(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const a of i)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(i){const a={};return i.integrity&&(a.integrity=i.integrity),i.referrerPolicy&&(a.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?a.credentials="include":i.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(i){if(i.ep)return;i.ep=!0;const a=t(i);fetch(i.href,a)}})();var $_e=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function c$(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var IU={exports:{}},V0={},MU={exports:{}},Hn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wp=Symbol.for("react.element"),d$=Symbol.for("react.portal"),h$=Symbol.for("react.fragment"),f$=Symbol.for("react.strict_mode"),v$=Symbol.for("react.profiler"),p$=Symbol.for("react.provider"),m$=Symbol.for("react.context"),_$=Symbol.for("react.forward_ref"),g$=Symbol.for("react.suspense"),E$=Symbol.for("react.memo"),y$=Symbol.for("react.lazy"),Y2=Symbol.iterator;function b$(e){return e===null||typeof e!="object"?null:(e=Y2&&e[Y2]||e["@@iterator"],typeof e=="function"?e:null)}var AU={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},wU=Object.assign,RU={};function lf(e,n,t){this.props=e,this.context=n,this.refs=RU,this.updater=t||AU}lf.prototype.isReactComponent={};lf.prototype.setState=function(e,n){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,n,"setState")};lf.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function OU(){}OU.prototype=lf.prototype;function OT(e,n,t){this.props=e,this.context=n,this.refs=RU,this.updater=t||AU}var DT=OT.prototype=new OU;DT.constructor=OT;wU(DT,lf.prototype);DT.isPureReactComponent=!0;var Q2=Array.isArray,DU=Object.prototype.hasOwnProperty,UT={current:null},UU={key:!0,ref:!0,__self:!0,__source:!0};function LU(e,n,t){var r,i={},a=null,s=null;if(n!=null)for(r in n.ref!==void 0&&(s=n.ref),n.key!==void 0&&(a=""+n.key),n)DU.call(n,r)&&!UU.hasOwnProperty(r)&&(i[r]=n[r]);var o=arguments.length-2;if(o===1)i.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];i.children=l}if(e&&e.defaultProps)for(r in o=e.defaultProps,o)i[r]===void 0&&(i[r]=o[r]);return{$$typeof:Wp,type:e,key:a,ref:s,props:i,_owner:UT.current}}function C$(e,n){return{$$typeof:Wp,type:e.type,key:n,ref:e.ref,props:e.props,_owner:e._owner}}function LT(e){return typeof e=="object"&&e!==null&&e.$$typeof===Wp}function S$(e){var n={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(t){return n[t]})}var X2=/\/+/g;function jy(e,n){return typeof e=="object"&&e!==null&&e.key!=null?S$(""+e.key):n.toString(36)}function ng(e,n,t,r,i){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var s=!1;if(e===null)s=!0;else switch(a){case"string":case"number":s=!0;break;case"object":switch(e.$$typeof){case Wp:case d$:s=!0}}if(s)return s=e,i=i(s),e=r===""?"."+jy(s,0):r,Q2(i)?(t="",e!=null&&(t=e.replace(X2,"$&/")+"/"),ng(i,n,t,"",function(u){return u})):i!=null&&(LT(i)&&(i=C$(i,t+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(X2,"$&/")+"/")+e)),n.push(i)),1;if(s=0,r=r===""?".":r+":",Q2(e))for(var o=0;o<e.length;o++){a=e[o];var l=r+jy(a,o);s+=ng(a,n,t,l,i)}else if(l=b$(e),typeof l=="function")for(e=l.call(e),o=0;!(a=e.next()).done;)a=a.value,l=r+jy(a,o++),s+=ng(a,n,t,l,i);else if(a==="object")throw n=String(e),Error("Objects are not valid as a React child (found: "+(n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n)+"). If you meant to render a collection of children, use an array instead.");return s}function a_(e,n,t){if(e==null)return e;var r=[],i=0;return ng(e,r,"","",function(a){return n.call(t,a,i++)}),r}function T$(e){if(e._status===-1){var n=e._result;n=n(),n.then(function(t){(e._status===0||e._status===-1)&&(e._status=1,e._result=t)},function(t){(e._status===0||e._status===-1)&&(e._status=2,e._result=t)}),e._status===-1&&(e._status=0,e._result=n)}if(e._status===1)return e._result.default;throw e._result}var Ta={current:null},rg={transition:null},N$={ReactCurrentDispatcher:Ta,ReactCurrentBatchConfig:rg,ReactCurrentOwner:UT};function kU(){throw Error("act(...) is not supported in production builds of React.")}Hn.Children={map:a_,forEach:function(e,n,t){a_(e,function(){n.apply(this,arguments)},t)},count:function(e){var n=0;return a_(e,function(){n++}),n},toArray:function(e){return a_(e,function(n){return n})||[]},only:function(e){if(!LT(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Hn.Component=lf;Hn.Fragment=h$;Hn.Profiler=v$;Hn.PureComponent=OT;Hn.StrictMode=f$;Hn.Suspense=g$;Hn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=N$;Hn.act=kU;Hn.cloneElement=function(e,n,t){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=wU({},e.props),i=e.key,a=e.ref,s=e._owner;if(n!=null){if(n.ref!==void 0&&(a=n.ref,s=UT.current),n.key!==void 0&&(i=""+n.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(l in n)DU.call(n,l)&&!UU.hasOwnProperty(l)&&(r[l]=n[l]===void 0&&o!==void 0?o[l]:n[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];r.children=o}return{$$typeof:Wp,type:e.type,key:i,ref:a,props:r,_owner:s}};Hn.createContext=function(e){return e={$$typeof:m$,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:p$,_context:e},e.Consumer=e};Hn.createElement=LU;Hn.createFactory=function(e){var n=LU.bind(null,e);return n.type=e,n};Hn.createRef=function(){return{current:null}};Hn.forwardRef=function(e){return{$$typeof:_$,render:e}};Hn.isValidElement=LT;Hn.lazy=function(e){return{$$typeof:y$,_payload:{_status:-1,_result:e},_init:T$}};Hn.memo=function(e,n){return{$$typeof:E$,type:e,compare:n===void 0?null:n}};Hn.startTransition=function(e){var n=rg.transition;rg.transition={};try{e()}finally{rg.transition=n}};Hn.unstable_act=kU;Hn.useCallback=function(e,n){return Ta.current.useCallback(e,n)};Hn.useContext=function(e){return Ta.current.useContext(e)};Hn.useDebugValue=function(){};Hn.useDeferredValue=function(e){return Ta.current.useDeferredValue(e)};Hn.useEffect=function(e,n){return Ta.current.useEffect(e,n)};Hn.useId=function(){return Ta.current.useId()};Hn.useImperativeHandle=function(e,n,t){return Ta.current.useImperativeHandle(e,n,t)};Hn.useInsertionEffect=function(e,n){return Ta.current.useInsertionEffect(e,n)};Hn.useLayoutEffect=function(e,n){return Ta.current.useLayoutEffect(e,n)};Hn.useMemo=function(e,n){return Ta.current.useMemo(e,n)};Hn.useReducer=function(e,n,t){return Ta.current.useReducer(e,n,t)};Hn.useRef=function(e){return Ta.current.useRef(e)};Hn.useState=function(e){return Ta.current.useState(e)};Hn.useSyncExternalStore=function(e,n,t){return Ta.current.useSyncExternalStore(e,n,t)};Hn.useTransition=function(){return Ta.current.useTransition()};Hn.version="18.3.1";MU.exports=Hn;var M=MU.exports;const m=c$(M);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var I$=M,M$=Symbol.for("react.element"),A$=Symbol.for("react.fragment"),w$=Object.prototype.hasOwnProperty,R$=I$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,O$={key:!0,ref:!0,__self:!0,__source:!0};function xU(e,n,t){var r,i={},a=null,s=null;t!==void 0&&(a=""+t),n.key!==void 0&&(a=""+n.key),n.ref!==void 0&&(s=n.ref);for(r in n)w$.call(n,r)&&!O$.hasOwnProperty(r)&&(i[r]=n[r]);if(e&&e.defaultProps)for(r in n=e.defaultProps,n)i[r]===void 0&&(i[r]=n[r]);return{$$typeof:M$,type:e,key:a,ref:s,props:i,_owner:R$.current}}V0.Fragment=A$;V0.jsx=xU;V0.jsxs=xU;IU.exports=V0;var de=IU.exports,PU={exports:{}},ys={},FU={exports:{}},BU={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function n(K,Z){var te=K.length;K.push(Z);e:for(;0<te;){var ne=te-1>>>1,le=K[ne];if(0<i(le,Z))K[ne]=Z,K[te]=le,te=ne;else break e}}function t(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var Z=K[0],te=K.pop();if(te!==Z){K[0]=te;e:for(var ne=0,le=K.length,Te=le>>>1;ne<Te;){var Ze=2*(ne+1)-1,ce=K[Ze],ge=Ze+1,Qe=K[ge];if(0>i(ce,te))ge<le&&0>i(Qe,ce)?(K[ne]=Qe,K[ge]=te,ne=ge):(K[ne]=ce,K[Ze]=te,ne=Ze);else if(ge<le&&0>i(Qe,te))K[ne]=Qe,K[ge]=te,ne=ge;else break e}}return Z}function i(K,Z){var te=K.sortIndex-Z.sortIndex;return te!==0?te:K.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var s=Date,o=s.now();e.unstable_now=function(){return s.now()-o}}var l=[],u=[],c=1,h=null,f=3,p=!1,_=!1,g=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(K){for(var Z=t(u);Z!==null;){if(Z.callback===null)r(u);else if(Z.startTime<=K)r(u),Z.sortIndex=Z.expirationTime,n(l,Z);else break;Z=t(u)}}function I(K){if(g=!1,S(K),!_)if(t(l)!==null)_=!0,j(w);else{var Z=t(u);Z!==null&&X(I,Z.startTime-K)}}function w(K,Z){_=!1,g&&(g=!1,E(U),U=-1),p=!0;var te=f;try{for(S(Z),h=t(l);h!==null&&(!(h.expirationTime>Z)||K&&!F());){var ne=h.callback;if(typeof ne=="function"){h.callback=null,f=h.priorityLevel;var le=ne(h.expirationTime<=Z);Z=e.unstable_now(),typeof le=="function"?h.callback=le:h===t(l)&&r(l),S(Z)}else r(l);h=t(l)}if(h!==null)var Te=!0;else{var Ze=t(u);Ze!==null&&X(I,Ze.startTime-Z),Te=!1}return Te}finally{h=null,f=te,p=!1}}var R=!1,A=null,U=-1,O=5,B=-1;function F(){return!(e.unstable_now()-B<O)}function P(){if(A!==null){var K=e.unstable_now();B=K;var Z=!0;try{Z=A(!0,K)}finally{Z?G():(R=!1,A=null)}}else R=!1}var G;if(typeof y=="function")G=function(){y(P)};else if(typeof MessageChannel<"u"){var L=new MessageChannel,$=L.port2;L.port1.onmessage=P,G=function(){$.postMessage(null)}}else G=function(){C(P,0)};function j(K){A=K,R||(R=!0,G())}function X(K,Z){U=C(function(){K(e.unstable_now())},Z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_continueExecution=function(){_||p||(_=!0,j(w))},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return f},e.unstable_getFirstCallbackNode=function(){return t(l)},e.unstable_next=function(K){switch(f){case 1:case 2:case 3:var Z=3;break;default:Z=f}var te=f;f=Z;try{return K()}finally{f=te}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(K,Z){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var te=f;f=K;try{return Z()}finally{f=te}},e.unstable_scheduleCallback=function(K,Z,te){var ne=e.unstable_now();switch(typeof te=="object"&&te!==null?(te=te.delay,te=typeof te=="number"&&0<te?ne+te:ne):te=ne,K){case 1:var le=-1;break;case 2:le=250;break;case 5:le=1073741823;break;case 4:le=1e4;break;default:le=5e3}return le=te+le,K={id:c++,callback:Z,priorityLevel:K,startTime:te,expirationTime:le,sortIndex:-1},te>ne?(K.sortIndex=te,n(u,K),t(l)===null&&K===t(u)&&(g?(E(U),U=-1):g=!0,X(I,te-ne))):(K.sortIndex=le,n(l,K),_||p||(_=!0,j(w))),K},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(K){var Z=f;return function(){var te=f;f=Z;try{return K.apply(this,arguments)}finally{f=te}}}})(BU);FU.exports=BU;var D$=FU.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var U$=M,ms=D$;function Ye(e){for(var n="https://reactjs.org/docs/error-decoder.html?invariant="+e,t=1;t<arguments.length;t++)n+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+e+"; visit "+n+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var HU=new Set,dp={};function wd(e,n){Vh(e,n),Vh(e+"Capture",n)}function Vh(e,n){for(dp[e]=n,e=0;e<n.length;e++)HU.add(n[e])}var Fl=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),MC=Object.prototype.hasOwnProperty,L$=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Z2={},J2={};function k$(e){return MC.call(J2,e)?!0:MC.call(Z2,e)?!1:L$.test(e)?J2[e]=!0:(Z2[e]=!0,!1)}function x$(e,n,t,r){if(t!==null&&t.type===0)return!1;switch(typeof n){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function P$(e,n,t,r){if(n===null||typeof n>"u"||x$(e,n,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!n;case 4:return n===!1;case 5:return isNaN(n);case 6:return isNaN(n)||1>n}return!1}function Na(e,n,t,r,i,a,s){this.acceptsBooleans=n===2||n===3||n===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=t,this.propertyName=e,this.type=n,this.sanitizeURL=a,this.removeEmptyString=s}var ji={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){ji[e]=new Na(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var n=e[0];ji[n]=new Na(n,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){ji[e]=new Na(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){ji[e]=new Na(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){ji[e]=new Na(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){ji[e]=new Na(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){ji[e]=new Na(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){ji[e]=new Na(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){ji[e]=new Na(e,5,!1,e.toLowerCase(),null,!1,!1)});var kT=/[\-:]([a-z])/g;function xT(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var n=e.replace(kT,xT);ji[n]=new Na(n,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var n=e.replace(kT,xT);ji[n]=new Na(n,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var n=e.replace(kT,xT);ji[n]=new Na(n,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){ji[e]=new Na(e,1,!1,e.toLowerCase(),null,!1,!1)});ji.xlinkHref=new Na("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){ji[e]=new Na(e,1,!1,e.toLowerCase(),null,!0,!0)});function PT(e,n,t,r){var i=ji.hasOwnProperty(n)?ji[n]:null;(i!==null?i.type!==0:r||!(2<n.length)||n[0]!=="o"&&n[0]!=="O"||n[1]!=="n"&&n[1]!=="N")&&(P$(n,t,i,r)&&(t=null),r||i===null?k$(n)&&(t===null?e.removeAttribute(n):e.setAttribute(n,""+t)):i.mustUseProperty?e[i.propertyName]=t===null?i.type===3?!1:"":t:(n=i.attributeName,r=i.attributeNamespace,t===null?e.removeAttribute(n):(i=i.type,t=i===3||i===4&&t===!0?"":""+t,r?e.setAttributeNS(r,n,t):e.setAttribute(n,t))))}var ql=U$.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,s_=Symbol.for("react.element"),gh=Symbol.for("react.portal"),Eh=Symbol.for("react.fragment"),FT=Symbol.for("react.strict_mode"),AC=Symbol.for("react.profiler"),GU=Symbol.for("react.provider"),$U=Symbol.for("react.context"),BT=Symbol.for("react.forward_ref"),wC=Symbol.for("react.suspense"),RC=Symbol.for("react.suspense_list"),HT=Symbol.for("react.memo"),_u=Symbol.for("react.lazy"),VU=Symbol.for("react.offscreen"),eA=Symbol.iterator;function Wf(e){return e===null||typeof e!="object"?null:(e=eA&&e[eA]||e["@@iterator"],typeof e=="function"?e:null)}var Hr=Object.assign,qy;function yv(e){if(qy===void 0)try{throw Error()}catch(t){var n=t.stack.trim().match(/\n( *(at )?)/);qy=n&&n[1]||""}return`
`+qy+e}var Ky=!1;function Wy(e,n){if(!e||Ky)return"";Ky=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(n)if(n=function(){throw Error()},Object.defineProperty(n.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(n,[])}catch(u){var r=u}Reflect.construct(e,[],n)}else{try{n.call()}catch(u){r=u}e.call(n.prototype)}else{try{throw Error()}catch(u){r=u}e()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),a=r.stack.split(`
`),s=i.length-1,o=a.length-1;1<=s&&0<=o&&i[s]!==a[o];)o--;for(;1<=s&&0<=o;s--,o--)if(i[s]!==a[o]){if(s!==1||o!==1)do if(s--,o--,0>o||i[s]!==a[o]){var l=`
`+i[s].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=s&&0<=o);break}}}finally{Ky=!1,Error.prepareStackTrace=t}return(e=e?e.displayName||e.name:"")?yv(e):""}function F$(e){switch(e.tag){case 5:return yv(e.type);case 16:return yv("Lazy");case 13:return yv("Suspense");case 19:return yv("SuspenseList");case 0:case 2:case 15:return e=Wy(e.type,!1),e;case 11:return e=Wy(e.type.render,!1),e;case 1:return e=Wy(e.type,!0),e;default:return""}}function OC(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Eh:return"Fragment";case gh:return"Portal";case AC:return"Profiler";case FT:return"StrictMode";case wC:return"Suspense";case RC:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case $U:return(e.displayName||"Context")+".Consumer";case GU:return(e._context.displayName||"Context")+".Provider";case BT:var n=e.render;return e=e.displayName,e||(e=n.displayName||n.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case HT:return n=e.displayName||null,n!==null?n:OC(e.type)||"Memo";case _u:n=e._payload,e=e._init;try{return OC(e(n))}catch{}}return null}function B$(e){var n=e.type;switch(e.tag){case 24:return"Cache";case 9:return(n.displayName||"Context")+".Consumer";case 10:return(n._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=n.render,e=e.displayName||e.name||"",n.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return n;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return OC(n);case 8:return n===FT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n}return null}function qu(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function zU(e){var n=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(n==="checkbox"||n==="radio")}function H$(e){var n=zU(e)?"checked":"value",t=Object.getOwnPropertyDescriptor(e.constructor.prototype,n),r=""+e[n];if(!e.hasOwnProperty(n)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var i=t.get,a=t.set;return Object.defineProperty(e,n,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,a.call(this,s)}}),Object.defineProperty(e,n,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){e._valueTracker=null,delete e[n]}}}}function o_(e){e._valueTracker||(e._valueTracker=H$(e))}function jU(e){if(!e)return!1;var n=e._valueTracker;if(!n)return!0;var t=n.getValue(),r="";return e&&(r=zU(e)?e.checked?"true":"false":e.value),e=r,e!==t?(n.setValue(e),!0):!1}function Rg(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function DC(e,n){var t=n.checked;return Hr({},n,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??e._wrapperState.initialChecked})}function tA(e,n){var t=n.defaultValue==null?"":n.defaultValue,r=n.checked!=null?n.checked:n.defaultChecked;t=qu(n.value!=null?n.value:t),e._wrapperState={initialChecked:r,initialValue:t,controlled:n.type==="checkbox"||n.type==="radio"?n.checked!=null:n.value!=null}}function qU(e,n){n=n.checked,n!=null&&PT(e,"checked",n,!1)}function UC(e,n){qU(e,n);var t=qu(n.value),r=n.type;if(t!=null)r==="number"?(t===0&&e.value===""||e.value!=t)&&(e.value=""+t):e.value!==""+t&&(e.value=""+t);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}n.hasOwnProperty("value")?LC(e,n.type,t):n.hasOwnProperty("defaultValue")&&LC(e,n.type,qu(n.defaultValue)),n.checked==null&&n.defaultChecked!=null&&(e.defaultChecked=!!n.defaultChecked)}function nA(e,n,t){if(n.hasOwnProperty("value")||n.hasOwnProperty("defaultValue")){var r=n.type;if(!(r!=="submit"&&r!=="reset"||n.value!==void 0&&n.value!==null))return;n=""+e._wrapperState.initialValue,t||n===e.value||(e.value=n),e.defaultValue=n}t=e.name,t!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,t!==""&&(e.name=t)}function LC(e,n,t){(n!=="number"||Rg(e.ownerDocument)!==e)&&(t==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+t&&(e.defaultValue=""+t))}var bv=Array.isArray;function Dh(e,n,t,r){if(e=e.options,n){n={};for(var i=0;i<t.length;i++)n["$"+t[i]]=!0;for(t=0;t<e.length;t++)i=n.hasOwnProperty("$"+e[t].value),e[t].selected!==i&&(e[t].selected=i),i&&r&&(e[t].defaultSelected=!0)}else{for(t=""+qu(t),n=null,i=0;i<e.length;i++){if(e[i].value===t){e[i].selected=!0,r&&(e[i].defaultSelected=!0);return}n!==null||e[i].disabled||(n=e[i])}n!==null&&(n.selected=!0)}}function kC(e,n){if(n.dangerouslySetInnerHTML!=null)throw Error(Ye(91));return Hr({},n,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function rA(e,n){var t=n.value;if(t==null){if(t=n.children,n=n.defaultValue,t!=null){if(n!=null)throw Error(Ye(92));if(bv(t)){if(1<t.length)throw Error(Ye(93));t=t[0]}n=t}n==null&&(n=""),t=n}e._wrapperState={initialValue:qu(t)}}function KU(e,n){var t=qu(n.value),r=qu(n.defaultValue);t!=null&&(t=""+t,t!==e.value&&(e.value=t),n.defaultValue==null&&e.defaultValue!==t&&(e.defaultValue=t)),r!=null&&(e.defaultValue=""+r)}function iA(e){var n=e.textContent;n===e._wrapperState.initialValue&&n!==""&&n!==null&&(e.value=n)}function WU(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function xC(e,n){return e==null||e==="http://www.w3.org/1999/xhtml"?WU(n):e==="http://www.w3.org/2000/svg"&&n==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var l_,YU=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(n,t,r,i){MSApp.execUnsafeLocalFunction(function(){return e(n,t,r,i)})}:e}(function(e,n){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=n;else{for(l_=l_||document.createElement("div"),l_.innerHTML="<svg>"+n.valueOf().toString()+"</svg>",n=l_.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;n.firstChild;)e.appendChild(n.firstChild)}});function hp(e,n){if(n){var t=e.firstChild;if(t&&t===e.lastChild&&t.nodeType===3){t.nodeValue=n;return}}e.textContent=n}var Dv={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},G$=["Webkit","ms","Moz","O"];Object.keys(Dv).forEach(function(e){G$.forEach(function(n){n=n+e.charAt(0).toUpperCase()+e.substring(1),Dv[n]=Dv[e]})});function QU(e,n,t){return n==null||typeof n=="boolean"||n===""?"":t||typeof n!="number"||n===0||Dv.hasOwnProperty(e)&&Dv[e]?(""+n).trim():n+"px"}function XU(e,n){e=e.style;for(var t in n)if(n.hasOwnProperty(t)){var r=t.indexOf("--")===0,i=QU(t,n[t],r);t==="float"&&(t="cssFloat"),r?e.setProperty(t,i):e[t]=i}}var $$=Hr({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function PC(e,n){if(n){if($$[e]&&(n.children!=null||n.dangerouslySetInnerHTML!=null))throw Error(Ye(137,e));if(n.dangerouslySetInnerHTML!=null){if(n.children!=null)throw Error(Ye(60));if(typeof n.dangerouslySetInnerHTML!="object"||!("__html"in n.dangerouslySetInnerHTML))throw Error(Ye(61))}if(n.style!=null&&typeof n.style!="object")throw Error(Ye(62))}}function FC(e,n){if(e.indexOf("-")===-1)return typeof n.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var BC=null;function GT(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var HC=null,Uh=null,Lh=null;function aA(e){if(e=Xp(e)){if(typeof HC!="function")throw Error(Ye(280));var n=e.stateNode;n&&(n=W0(n),HC(e.stateNode,e.type,n))}}function ZU(e){Uh?Lh?Lh.push(e):Lh=[e]:Uh=e}function JU(){if(Uh){var e=Uh,n=Lh;if(Lh=Uh=null,aA(e),n)for(e=0;e<n.length;e++)aA(n[e])}}function eL(e,n){return e(n)}function tL(){}var Yy=!1;function nL(e,n,t){if(Yy)return e(n,t);Yy=!0;try{return eL(e,n,t)}finally{Yy=!1,(Uh!==null||Lh!==null)&&(tL(),JU())}}function fp(e,n){var t=e.stateNode;if(t===null)return null;var r=W0(t);if(r===null)return null;t=r[n];e:switch(n){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(t&&typeof t!="function")throw Error(Ye(231,n,typeof t));return t}var GC=!1;if(Fl)try{var Yf={};Object.defineProperty(Yf,"passive",{get:function(){GC=!0}}),window.addEventListener("test",Yf,Yf),window.removeEventListener("test",Yf,Yf)}catch{GC=!1}function V$(e,n,t,r,i,a,s,o,l){var u=Array.prototype.slice.call(arguments,3);try{n.apply(t,u)}catch(c){this.onError(c)}}var Uv=!1,Og=null,Dg=!1,$C=null,z$={onError:function(e){Uv=!0,Og=e}};function j$(e,n,t,r,i,a,s,o,l){Uv=!1,Og=null,V$.apply(z$,arguments)}function q$(e,n,t,r,i,a,s,o,l){if(j$.apply(this,arguments),Uv){if(Uv){var u=Og;Uv=!1,Og=null}else throw Error(Ye(198));Dg||(Dg=!0,$C=u)}}function Rd(e){var n=e,t=e;if(e.alternate)for(;n.return;)n=n.return;else{e=n;do n=e,n.flags&4098&&(t=n.return),e=n.return;while(e)}return n.tag===3?t:null}function rL(e){if(e.tag===13){var n=e.memoizedState;if(n===null&&(e=e.alternate,e!==null&&(n=e.memoizedState)),n!==null)return n.dehydrated}return null}function sA(e){if(Rd(e)!==e)throw Error(Ye(188))}function K$(e){var n=e.alternate;if(!n){if(n=Rd(e),n===null)throw Error(Ye(188));return n!==e?null:e}for(var t=e,r=n;;){var i=t.return;if(i===null)break;var a=i.alternate;if(a===null){if(r=i.return,r!==null){t=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===t)return sA(i),e;if(a===r)return sA(i),n;a=a.sibling}throw Error(Ye(188))}if(t.return!==r.return)t=i,r=a;else{for(var s=!1,o=i.child;o;){if(o===t){s=!0,t=i,r=a;break}if(o===r){s=!0,r=i,t=a;break}o=o.sibling}if(!s){for(o=a.child;o;){if(o===t){s=!0,t=a,r=i;break}if(o===r){s=!0,r=a,t=i;break}o=o.sibling}if(!s)throw Error(Ye(189))}}if(t.alternate!==r)throw Error(Ye(190))}if(t.tag!==3)throw Error(Ye(188));return t.stateNode.current===t?e:n}function iL(e){return e=K$(e),e!==null?aL(e):null}function aL(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var n=aL(e);if(n!==null)return n;e=e.sibling}return null}var sL=ms.unstable_scheduleCallback,oA=ms.unstable_cancelCallback,W$=ms.unstable_shouldYield,Y$=ms.unstable_requestPaint,ii=ms.unstable_now,Q$=ms.unstable_getCurrentPriorityLevel,$T=ms.unstable_ImmediatePriority,oL=ms.unstable_UserBlockingPriority,Ug=ms.unstable_NormalPriority,X$=ms.unstable_LowPriority,lL=ms.unstable_IdlePriority,z0=null,jo=null;function Z$(e){if(jo&&typeof jo.onCommitFiberRoot=="function")try{jo.onCommitFiberRoot(z0,e,void 0,(e.current.flags&128)===128)}catch{}}var mo=Math.clz32?Math.clz32:t9,J$=Math.log,e9=Math.LN2;function t9(e){return e>>>=0,e===0?32:31-(J$(e)/e9|0)|0}var u_=64,c_=4194304;function Cv(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function Lg(e,n){var t=e.pendingLanes;if(t===0)return 0;var r=0,i=e.suspendedLanes,a=e.pingedLanes,s=t&268435455;if(s!==0){var o=s&~i;o!==0?r=Cv(o):(a&=s,a!==0&&(r=Cv(a)))}else s=t&~i,s!==0?r=Cv(s):a!==0&&(r=Cv(a));if(r===0)return 0;if(n!==0&&n!==r&&!(n&i)&&(i=r&-r,a=n&-n,i>=a||i===16&&(a&4194240)!==0))return n;if(r&4&&(r|=t&16),n=e.entangledLanes,n!==0)for(e=e.entanglements,n&=r;0<n;)t=31-mo(n),i=1<<t,r|=e[t],n&=~i;return r}function n9(e,n){switch(e){case 1:case 2:case 4:return n+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function r9(e,n){for(var t=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,a=e.pendingLanes;0<a;){var s=31-mo(a),o=1<<s,l=i[s];l===-1?(!(o&t)||o&r)&&(i[s]=n9(o,n)):l<=n&&(e.expiredLanes|=o),a&=~o}}function VC(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function uL(){var e=u_;return u_<<=1,!(u_&4194240)&&(u_=64),e}function Qy(e){for(var n=[],t=0;31>t;t++)n.push(e);return n}function Yp(e,n,t){e.pendingLanes|=n,n!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,n=31-mo(n),e[n]=t}function i9(e,n){var t=e.pendingLanes&~n;e.pendingLanes=n,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=n,e.mutableReadLanes&=n,e.entangledLanes&=n,n=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<t;){var i=31-mo(t),a=1<<i;n[i]=0,r[i]=-1,e[i]=-1,t&=~a}}function VT(e,n){var t=e.entangledLanes|=n;for(e=e.entanglements;t;){var r=31-mo(t),i=1<<r;i&n|e[r]&n&&(e[r]|=n),t&=~i}}var fr=0;function cL(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var dL,zT,hL,fL,vL,zC=!1,d_=[],Ou=null,Du=null,Uu=null,vp=new Map,pp=new Map,Cu=[],a9="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lA(e,n){switch(e){case"focusin":case"focusout":Ou=null;break;case"dragenter":case"dragleave":Du=null;break;case"mouseover":case"mouseout":Uu=null;break;case"pointerover":case"pointerout":vp.delete(n.pointerId);break;case"gotpointercapture":case"lostpointercapture":pp.delete(n.pointerId)}}function Qf(e,n,t,r,i,a){return e===null||e.nativeEvent!==a?(e={blockedOn:n,domEventName:t,eventSystemFlags:r,nativeEvent:a,targetContainers:[i]},n!==null&&(n=Xp(n),n!==null&&zT(n)),e):(e.eventSystemFlags|=r,n=e.targetContainers,i!==null&&n.indexOf(i)===-1&&n.push(i),e)}function s9(e,n,t,r,i){switch(n){case"focusin":return Ou=Qf(Ou,e,n,t,r,i),!0;case"dragenter":return Du=Qf(Du,e,n,t,r,i),!0;case"mouseover":return Uu=Qf(Uu,e,n,t,r,i),!0;case"pointerover":var a=i.pointerId;return vp.set(a,Qf(vp.get(a)||null,e,n,t,r,i)),!0;case"gotpointercapture":return a=i.pointerId,pp.set(a,Qf(pp.get(a)||null,e,n,t,r,i)),!0}return!1}function pL(e){var n=Yc(e.target);if(n!==null){var t=Rd(n);if(t!==null){if(n=t.tag,n===13){if(n=rL(t),n!==null){e.blockedOn=n,vL(e.priority,function(){hL(t)});return}}else if(n===3&&t.stateNode.current.memoizedState.isDehydrated){e.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ig(e){if(e.blockedOn!==null)return!1;for(var n=e.targetContainers;0<n.length;){var t=jC(e.domEventName,e.eventSystemFlags,n[0],e.nativeEvent);if(t===null){t=e.nativeEvent;var r=new t.constructor(t.type,t);BC=r,t.target.dispatchEvent(r),BC=null}else return n=Xp(t),n!==null&&zT(n),e.blockedOn=t,!1;n.shift()}return!0}function uA(e,n,t){ig(e)&&t.delete(n)}function o9(){zC=!1,Ou!==null&&ig(Ou)&&(Ou=null),Du!==null&&ig(Du)&&(Du=null),Uu!==null&&ig(Uu)&&(Uu=null),vp.forEach(uA),pp.forEach(uA)}function Xf(e,n){e.blockedOn===n&&(e.blockedOn=null,zC||(zC=!0,ms.unstable_scheduleCallback(ms.unstable_NormalPriority,o9)))}function mp(e){function n(i){return Xf(i,e)}if(0<d_.length){Xf(d_[0],e);for(var t=1;t<d_.length;t++){var r=d_[t];r.blockedOn===e&&(r.blockedOn=null)}}for(Ou!==null&&Xf(Ou,e),Du!==null&&Xf(Du,e),Uu!==null&&Xf(Uu,e),vp.forEach(n),pp.forEach(n),t=0;t<Cu.length;t++)r=Cu[t],r.blockedOn===e&&(r.blockedOn=null);for(;0<Cu.length&&(t=Cu[0],t.blockedOn===null);)pL(t),t.blockedOn===null&&Cu.shift()}var kh=ql.ReactCurrentBatchConfig,kg=!0;function l9(e,n,t,r){var i=fr,a=kh.transition;kh.transition=null;try{fr=1,jT(e,n,t,r)}finally{fr=i,kh.transition=a}}function u9(e,n,t,r){var i=fr,a=kh.transition;kh.transition=null;try{fr=4,jT(e,n,t,r)}finally{fr=i,kh.transition=a}}function jT(e,n,t,r){if(kg){var i=jC(e,n,t,r);if(i===null)sb(e,n,r,xg,t),lA(e,r);else if(s9(i,e,n,t,r))r.stopPropagation();else if(lA(e,r),n&4&&-1<a9.indexOf(e)){for(;i!==null;){var a=Xp(i);if(a!==null&&dL(a),a=jC(e,n,t,r),a===null&&sb(e,n,r,xg,t),a===i)break;i=a}i!==null&&r.stopPropagation()}else sb(e,n,r,null,t)}}var xg=null;function jC(e,n,t,r){if(xg=null,e=GT(r),e=Yc(e),e!==null)if(n=Rd(e),n===null)e=null;else if(t=n.tag,t===13){if(e=rL(n),e!==null)return e;e=null}else if(t===3){if(n.stateNode.current.memoizedState.isDehydrated)return n.tag===3?n.stateNode.containerInfo:null;e=null}else n!==e&&(e=null);return xg=e,null}function mL(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Q$()){case $T:return 1;case oL:return 4;case Ug:case X$:return 16;case lL:return 536870912;default:return 16}default:return 16}}var Iu=null,qT=null,ag=null;function _L(){if(ag)return ag;var e,n=qT,t=n.length,r,i="value"in Iu?Iu.value:Iu.textContent,a=i.length;for(e=0;e<t&&n[e]===i[e];e++);var s=t-e;for(r=1;r<=s&&n[t-r]===i[a-r];r++);return ag=i.slice(e,1<r?1-r:void 0)}function sg(e){var n=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&n===13&&(e=13)):e=n,e===10&&(e=13),32<=e||e===13?e:0}function h_(){return!0}function cA(){return!1}function bs(e){function n(t,r,i,a,s){this._reactName=t,this._targetInst=i,this.type=r,this.nativeEvent=a,this.target=s,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(t=e[o],this[o]=t?t(a):a[o]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?h_:cA,this.isPropagationStopped=cA,this}return Hr(n.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=h_)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=h_)},persist:function(){},isPersistent:h_}),n}var uf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},KT=bs(uf),Qp=Hr({},uf,{view:0,detail:0}),c9=bs(Qp),Xy,Zy,Zf,j0=Hr({},Qp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:WT,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Zf&&(Zf&&e.type==="mousemove"?(Xy=e.screenX-Zf.screenX,Zy=e.screenY-Zf.screenY):Zy=Xy=0,Zf=e),Xy)},movementY:function(e){return"movementY"in e?e.movementY:Zy}}),dA=bs(j0),d9=Hr({},j0,{dataTransfer:0}),h9=bs(d9),f9=Hr({},Qp,{relatedTarget:0}),Jy=bs(f9),v9=Hr({},uf,{animationName:0,elapsedTime:0,pseudoElement:0}),p9=bs(v9),m9=Hr({},uf,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),_9=bs(m9),g9=Hr({},uf,{data:0}),hA=bs(g9),E9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},y9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function C9(e){var n=this.nativeEvent;return n.getModifierState?n.getModifierState(e):(e=b9[e])?!!n[e]:!1}function WT(){return C9}var S9=Hr({},Qp,{key:function(e){if(e.key){var n=E9[e.key]||e.key;if(n!=="Unidentified")return n}return e.type==="keypress"?(e=sg(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?y9[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:WT,charCode:function(e){return e.type==="keypress"?sg(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?sg(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),T9=bs(S9),N9=Hr({},j0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fA=bs(N9),I9=Hr({},Qp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:WT}),M9=bs(I9),A9=Hr({},uf,{propertyName:0,elapsedTime:0,pseudoElement:0}),w9=bs(A9),R9=Hr({},j0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),O9=bs(R9),D9=[9,13,27,32],YT=Fl&&"CompositionEvent"in window,Lv=null;Fl&&"documentMode"in document&&(Lv=document.documentMode);var U9=Fl&&"TextEvent"in window&&!Lv,gL=Fl&&(!YT||Lv&&8<Lv&&11>=Lv),vA=" ",pA=!1;function EL(e,n){switch(e){case"keyup":return D9.indexOf(n.keyCode)!==-1;case"keydown":return n.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function yL(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var yh=!1;function L9(e,n){switch(e){case"compositionend":return yL(n);case"keypress":return n.which!==32?null:(pA=!0,vA);case"textInput":return e=n.data,e===vA&&pA?null:e;default:return null}}function k9(e,n){if(yh)return e==="compositionend"||!YT&&EL(e,n)?(e=_L(),ag=qT=Iu=null,yh=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(n.ctrlKey||n.altKey||n.metaKey)||n.ctrlKey&&n.altKey){if(n.char&&1<n.char.length)return n.char;if(n.which)return String.fromCharCode(n.which)}return null;case"compositionend":return gL&&n.locale!=="ko"?null:n.data;default:return null}}var x9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function mA(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n==="input"?!!x9[e.type]:n==="textarea"}function bL(e,n,t,r){ZU(r),n=Pg(n,"onChange"),0<n.length&&(t=new KT("onChange","change",null,t,r),e.push({event:t,listeners:n}))}var kv=null,_p=null;function P9(e){DL(e,0)}function q0(e){var n=Sh(e);if(jU(n))return e}function F9(e,n){if(e==="change")return n}var CL=!1;if(Fl){var eb;if(Fl){var tb="oninput"in document;if(!tb){var _A=document.createElement("div");_A.setAttribute("oninput","return;"),tb=typeof _A.oninput=="function"}eb=tb}else eb=!1;CL=eb&&(!document.documentMode||9<document.documentMode)}function gA(){kv&&(kv.detachEvent("onpropertychange",SL),_p=kv=null)}function SL(e){if(e.propertyName==="value"&&q0(_p)){var n=[];bL(n,_p,e,GT(e)),nL(P9,n)}}function B9(e,n,t){e==="focusin"?(gA(),kv=n,_p=t,kv.attachEvent("onpropertychange",SL)):e==="focusout"&&gA()}function H9(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return q0(_p)}function G9(e,n){if(e==="click")return q0(n)}function $9(e,n){if(e==="input"||e==="change")return q0(n)}function V9(e,n){return e===n&&(e!==0||1/e===1/n)||e!==e&&n!==n}var Eo=typeof Object.is=="function"?Object.is:V9;function gp(e,n){if(Eo(e,n))return!0;if(typeof e!="object"||e===null||typeof n!="object"||n===null)return!1;var t=Object.keys(e),r=Object.keys(n);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var i=t[r];if(!MC.call(n,i)||!Eo(e[i],n[i]))return!1}return!0}function EA(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function yA(e,n){var t=EA(e);e=0;for(var r;t;){if(t.nodeType===3){if(r=e+t.textContent.length,e<=n&&r>=n)return{node:t,offset:n-e};e=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=EA(t)}}function TL(e,n){return e&&n?e===n?!0:e&&e.nodeType===3?!1:n&&n.nodeType===3?TL(e,n.parentNode):"contains"in e?e.contains(n):e.compareDocumentPosition?!!(e.compareDocumentPosition(n)&16):!1:!1}function NL(){for(var e=window,n=Rg();n instanceof e.HTMLIFrameElement;){try{var t=typeof n.contentWindow.location.href=="string"}catch{t=!1}if(t)e=n.contentWindow;else break;n=Rg(e.document)}return n}function QT(e){var n=e&&e.nodeName&&e.nodeName.toLowerCase();return n&&(n==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||n==="textarea"||e.contentEditable==="true")}function z9(e){var n=NL(),t=e.focusedElem,r=e.selectionRange;if(n!==t&&t&&t.ownerDocument&&TL(t.ownerDocument.documentElement,t)){if(r!==null&&QT(t)){if(n=r.start,e=r.end,e===void 0&&(e=n),"selectionStart"in t)t.selectionStart=n,t.selectionEnd=Math.min(e,t.value.length);else if(e=(n=t.ownerDocument||document)&&n.defaultView||window,e.getSelection){e=e.getSelection();var i=t.textContent.length,a=Math.min(r.start,i);r=r.end===void 0?a:Math.min(r.end,i),!e.extend&&a>r&&(i=r,r=a,a=i),i=yA(t,a);var s=yA(t,r);i&&s&&(e.rangeCount!==1||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==s.node||e.focusOffset!==s.offset)&&(n=n.createRange(),n.setStart(i.node,i.offset),e.removeAllRanges(),a>r?(e.addRange(n),e.extend(s.node,s.offset)):(n.setEnd(s.node,s.offset),e.addRange(n)))}}for(n=[],e=t;e=e.parentNode;)e.nodeType===1&&n.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<n.length;t++)e=n[t],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var j9=Fl&&"documentMode"in document&&11>=document.documentMode,bh=null,qC=null,xv=null,KC=!1;function bA(e,n,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;KC||bh==null||bh!==Rg(r)||(r=bh,"selectionStart"in r&&QT(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),xv&&gp(xv,r)||(xv=r,r=Pg(qC,"onSelect"),0<r.length&&(n=new KT("onSelect","select",null,n,t),e.push({event:n,listeners:r}),n.target=bh)))}function f_(e,n){var t={};return t[e.toLowerCase()]=n.toLowerCase(),t["Webkit"+e]="webkit"+n,t["Moz"+e]="moz"+n,t}var Ch={animationend:f_("Animation","AnimationEnd"),animationiteration:f_("Animation","AnimationIteration"),animationstart:f_("Animation","AnimationStart"),transitionend:f_("Transition","TransitionEnd")},nb={},IL={};Fl&&(IL=document.createElement("div").style,"AnimationEvent"in window||(delete Ch.animationend.animation,delete Ch.animationiteration.animation,delete Ch.animationstart.animation),"TransitionEvent"in window||delete Ch.transitionend.transition);function K0(e){if(nb[e])return nb[e];if(!Ch[e])return e;var n=Ch[e],t;for(t in n)if(n.hasOwnProperty(t)&&t in IL)return nb[e]=n[t];return e}var ML=K0("animationend"),AL=K0("animationiteration"),wL=K0("animationstart"),RL=K0("transitionend"),OL=new Map,CA="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ju(e,n){OL.set(e,n),wd(n,[e])}for(var rb=0;rb<CA.length;rb++){var ib=CA[rb],q9=ib.toLowerCase(),K9=ib[0].toUpperCase()+ib.slice(1);Ju(q9,"on"+K9)}Ju(ML,"onAnimationEnd");Ju(AL,"onAnimationIteration");Ju(wL,"onAnimationStart");Ju("dblclick","onDoubleClick");Ju("focusin","onFocus");Ju("focusout","onBlur");Ju(RL,"onTransitionEnd");Vh("onMouseEnter",["mouseout","mouseover"]);Vh("onMouseLeave",["mouseout","mouseover"]);Vh("onPointerEnter",["pointerout","pointerover"]);Vh("onPointerLeave",["pointerout","pointerover"]);wd("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wd("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wd("onBeforeInput",["compositionend","keypress","textInput","paste"]);wd("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wd("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wd("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Sv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),W9=new Set("cancel close invalid load scroll toggle".split(" ").concat(Sv));function SA(e,n,t){var r=e.type||"unknown-event";e.currentTarget=t,q$(r,n,void 0,e),e.currentTarget=null}function DL(e,n){n=(n&4)!==0;for(var t=0;t<e.length;t++){var r=e[t],i=r.event;r=r.listeners;e:{var a=void 0;if(n)for(var s=r.length-1;0<=s;s--){var o=r[s],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==a&&i.isPropagationStopped())break e;SA(i,o,u),a=l}else for(s=0;s<r.length;s++){if(o=r[s],l=o.instance,u=o.currentTarget,o=o.listener,l!==a&&i.isPropagationStopped())break e;SA(i,o,u),a=l}}}if(Dg)throw e=$C,Dg=!1,$C=null,e}function Nr(e,n){var t=n[ZC];t===void 0&&(t=n[ZC]=new Set);var r=e+"__bubble";t.has(r)||(UL(n,e,2,!1),t.add(r))}function ab(e,n,t){var r=0;n&&(r|=4),UL(t,e,r,n)}var v_="_reactListening"+Math.random().toString(36).slice(2);function Ep(e){if(!e[v_]){e[v_]=!0,HU.forEach(function(t){t!=="selectionchange"&&(W9.has(t)||ab(t,!1,e),ab(t,!0,e))});var n=e.nodeType===9?e:e.ownerDocument;n===null||n[v_]||(n[v_]=!0,ab("selectionchange",!1,n))}}function UL(e,n,t,r){switch(mL(n)){case 1:var i=l9;break;case 4:i=u9;break;default:i=jT}t=i.bind(null,n,t,e),i=void 0,!GC||n!=="touchstart"&&n!=="touchmove"&&n!=="wheel"||(i=!0),r?i!==void 0?e.addEventListener(n,t,{capture:!0,passive:i}):e.addEventListener(n,t,!0):i!==void 0?e.addEventListener(n,t,{passive:i}):e.addEventListener(n,t,!1)}function sb(e,n,t,r,i){var a=r;if(!(n&1)&&!(n&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var o=r.stateNode.containerInfo;if(o===i||o.nodeType===8&&o.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===i||l.nodeType===8&&l.parentNode===i))return;s=s.return}for(;o!==null;){if(s=Yc(o),s===null)return;if(l=s.tag,l===5||l===6){r=a=s;continue e}o=o.parentNode}}r=r.return}nL(function(){var u=a,c=GT(t),h=[];e:{var f=OL.get(e);if(f!==void 0){var p=KT,_=e;switch(e){case"keypress":if(sg(t)===0)break e;case"keydown":case"keyup":p=T9;break;case"focusin":_="focus",p=Jy;break;case"focusout":_="blur",p=Jy;break;case"beforeblur":case"afterblur":p=Jy;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=dA;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=h9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=M9;break;case ML:case AL:case wL:p=p9;break;case RL:p=w9;break;case"scroll":p=c9;break;case"wheel":p=O9;break;case"copy":case"cut":case"paste":p=_9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=fA}var g=(n&4)!==0,C=!g&&e==="scroll",E=g?f!==null?f+"Capture":null:f;g=[];for(var y=u,S;y!==null;){S=y;var I=S.stateNode;if(S.tag===5&&I!==null&&(S=I,E!==null&&(I=fp(y,E),I!=null&&g.push(yp(y,I,S)))),C)break;y=y.return}0<g.length&&(f=new p(f,_,null,t,c),h.push({event:f,listeners:g}))}}if(!(n&7)){e:{if(f=e==="mouseover"||e==="pointerover",p=e==="mouseout"||e==="pointerout",f&&t!==BC&&(_=t.relatedTarget||t.fromElement)&&(Yc(_)||_[Bl]))break e;if((p||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,p?(_=t.relatedTarget||t.toElement,p=u,_=_?Yc(_):null,_!==null&&(C=Rd(_),_!==C||_.tag!==5&&_.tag!==6)&&(_=null)):(p=null,_=u),p!==_)){if(g=dA,I="onMouseLeave",E="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=fA,I="onPointerLeave",E="onPointerEnter",y="pointer"),C=p==null?f:Sh(p),S=_==null?f:Sh(_),f=new g(I,y+"leave",p,t,c),f.target=C,f.relatedTarget=S,I=null,Yc(c)===u&&(g=new g(E,y+"enter",_,t,c),g.target=S,g.relatedTarget=C,I=g),C=I,p&&_)t:{for(g=p,E=_,y=0,S=g;S;S=oh(S))y++;for(S=0,I=E;I;I=oh(I))S++;for(;0<y-S;)g=oh(g),y--;for(;0<S-y;)E=oh(E),S--;for(;y--;){if(g===E||E!==null&&g===E.alternate)break t;g=oh(g),E=oh(E)}g=null}else g=null;p!==null&&TA(h,f,p,g,!1),_!==null&&C!==null&&TA(h,C,_,g,!0)}}e:{if(f=u?Sh(u):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var w=F9;else if(mA(f))if(CL)w=$9;else{w=H9;var R=B9}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(w=G9);if(w&&(w=w(e,u))){bL(h,w,t,c);break e}R&&R(e,f,u),e==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&LC(f,"number",f.value)}switch(R=u?Sh(u):window,e){case"focusin":(mA(R)||R.contentEditable==="true")&&(bh=R,qC=u,xv=null);break;case"focusout":xv=qC=bh=null;break;case"mousedown":KC=!0;break;case"contextmenu":case"mouseup":case"dragend":KC=!1,bA(h,t,c);break;case"selectionchange":if(j9)break;case"keydown":case"keyup":bA(h,t,c)}var A;if(YT)e:{switch(e){case"compositionstart":var U="onCompositionStart";break e;case"compositionend":U="onCompositionEnd";break e;case"compositionupdate":U="onCompositionUpdate";break e}U=void 0}else yh?EL(e,t)&&(U="onCompositionEnd"):e==="keydown"&&t.keyCode===229&&(U="onCompositionStart");U&&(gL&&t.locale!=="ko"&&(yh||U!=="onCompositionStart"?U==="onCompositionEnd"&&yh&&(A=_L()):(Iu=c,qT="value"in Iu?Iu.value:Iu.textContent,yh=!0)),R=Pg(u,U),0<R.length&&(U=new hA(U,e,null,t,c),h.push({event:U,listeners:R}),A?U.data=A:(A=yL(t),A!==null&&(U.data=A)))),(A=U9?L9(e,t):k9(e,t))&&(u=Pg(u,"onBeforeInput"),0<u.length&&(c=new hA("onBeforeInput","beforeinput",null,t,c),h.push({event:c,listeners:u}),c.data=A))}DL(h,n)})}function yp(e,n,t){return{instance:e,listener:n,currentTarget:t}}function Pg(e,n){for(var t=n+"Capture",r=[];e!==null;){var i=e,a=i.stateNode;i.tag===5&&a!==null&&(i=a,a=fp(e,t),a!=null&&r.unshift(yp(e,a,i)),a=fp(e,n),a!=null&&r.push(yp(e,a,i))),e=e.return}return r}function oh(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function TA(e,n,t,r,i){for(var a=n._reactName,s=[];t!==null&&t!==r;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===r)break;o.tag===5&&u!==null&&(o=u,i?(l=fp(t,a),l!=null&&s.unshift(yp(t,l,o))):i||(l=fp(t,a),l!=null&&s.push(yp(t,l,o)))),t=t.return}s.length!==0&&e.push({event:n,listeners:s})}var Y9=/\r\n?/g,Q9=/\u0000|\uFFFD/g;function NA(e){return(typeof e=="string"?e:""+e).replace(Y9,`
`).replace(Q9,"")}function p_(e,n,t){if(n=NA(n),NA(e)!==n&&t)throw Error(Ye(425))}function Fg(){}var WC=null,YC=null;function QC(e,n){return e==="textarea"||e==="noscript"||typeof n.children=="string"||typeof n.children=="number"||typeof n.dangerouslySetInnerHTML=="object"&&n.dangerouslySetInnerHTML!==null&&n.dangerouslySetInnerHTML.__html!=null}var XC=typeof setTimeout=="function"?setTimeout:void 0,X9=typeof clearTimeout=="function"?clearTimeout:void 0,IA=typeof Promise=="function"?Promise:void 0,Z9=typeof queueMicrotask=="function"?queueMicrotask:typeof IA<"u"?function(e){return IA.resolve(null).then(e).catch(J9)}:XC;function J9(e){setTimeout(function(){throw e})}function ob(e,n){var t=n,r=0;do{var i=t.nextSibling;if(e.removeChild(t),i&&i.nodeType===8)if(t=i.data,t==="/$"){if(r===0){e.removeChild(i),mp(n);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=i}while(t);mp(n)}function Lu(e){for(;e!=null;e=e.nextSibling){var n=e.nodeType;if(n===1||n===3)break;if(n===8){if(n=e.data,n==="$"||n==="$!"||n==="$?")break;if(n==="/$")return null}}return e}function MA(e){e=e.previousSibling;for(var n=0;e;){if(e.nodeType===8){var t=e.data;if(t==="$"||t==="$!"||t==="$?"){if(n===0)return e;n--}else t==="/$"&&n++}e=e.previousSibling}return null}var cf=Math.random().toString(36).slice(2),Go="__reactFiber$"+cf,bp="__reactProps$"+cf,Bl="__reactContainer$"+cf,ZC="__reactEvents$"+cf,eV="__reactListeners$"+cf,tV="__reactHandles$"+cf;function Yc(e){var n=e[Go];if(n)return n;for(var t=e.parentNode;t;){if(n=t[Bl]||t[Go]){if(t=n.alternate,n.child!==null||t!==null&&t.child!==null)for(e=MA(e);e!==null;){if(t=e[Go])return t;e=MA(e)}return n}e=t,t=e.parentNode}return null}function Xp(e){return e=e[Go]||e[Bl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Sh(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Ye(33))}function W0(e){return e[bp]||null}var JC=[],Th=-1;function ec(e){return{current:e}}function Mr(e){0>Th||(e.current=JC[Th],JC[Th]=null,Th--)}function Sr(e,n){Th++,JC[Th]=e.current,e.current=n}var Ku={},ia=ec(Ku),Ha=ec(!1),fd=Ku;function zh(e,n){var t=e.type.contextTypes;if(!t)return Ku;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===n)return r.__reactInternalMemoizedMaskedChildContext;var i={},a;for(a in t)i[a]=n[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=n,e.__reactInternalMemoizedMaskedChildContext=i),i}function Ga(e){return e=e.childContextTypes,e!=null}function Bg(){Mr(Ha),Mr(ia)}function AA(e,n,t){if(ia.current!==Ku)throw Error(Ye(168));Sr(ia,n),Sr(Ha,t)}function LL(e,n,t){var r=e.stateNode;if(n=n.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var i in r)if(!(i in n))throw Error(Ye(108,B$(e)||"Unknown",i));return Hr({},t,r)}function Hg(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ku,fd=ia.current,Sr(ia,e),Sr(Ha,Ha.current),!0}function wA(e,n,t){var r=e.stateNode;if(!r)throw Error(Ye(169));t?(e=LL(e,n,fd),r.__reactInternalMemoizedMergedChildContext=e,Mr(Ha),Mr(ia),Sr(ia,e)):Mr(Ha),Sr(Ha,t)}var bl=null,Y0=!1,lb=!1;function kL(e){bl===null?bl=[e]:bl.push(e)}function nV(e){Y0=!0,kL(e)}function tc(){if(!lb&&bl!==null){lb=!0;var e=0,n=fr;try{var t=bl;for(fr=1;e<t.length;e++){var r=t[e];do r=r(!0);while(r!==null)}bl=null,Y0=!1}catch(i){throw bl!==null&&(bl=bl.slice(e+1)),sL($T,tc),i}finally{fr=n,lb=!1}}return null}var Nh=[],Ih=0,Gg=null,$g=0,Os=[],Ds=0,vd=null,wl=1,Rl="";function Lc(e,n){Nh[Ih++]=$g,Nh[Ih++]=Gg,Gg=e,$g=n}function xL(e,n,t){Os[Ds++]=wl,Os[Ds++]=Rl,Os[Ds++]=vd,vd=e;var r=wl;e=Rl;var i=32-mo(r)-1;r&=~(1<<i),t+=1;var a=32-mo(n)+i;if(30<a){var s=i-i%5;a=(r&(1<<s)-1).toString(32),r>>=s,i-=s,wl=1<<32-mo(n)+i|t<<i|r,Rl=a+e}else wl=1<<a|t<<i|r,Rl=e}function XT(e){e.return!==null&&(Lc(e,1),xL(e,1,0))}function ZT(e){for(;e===Gg;)Gg=Nh[--Ih],Nh[Ih]=null,$g=Nh[--Ih],Nh[Ih]=null;for(;e===vd;)vd=Os[--Ds],Os[Ds]=null,Rl=Os[--Ds],Os[Ds]=null,wl=Os[--Ds],Os[Ds]=null}var vs=null,ds=null,Or=!1,uo=null;function PL(e,n){var t=Bs(5,null,null,0);t.elementType="DELETED",t.stateNode=n,t.return=e,n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)}function RA(e,n){switch(e.tag){case 5:var t=e.type;return n=n.nodeType!==1||t.toLowerCase()!==n.nodeName.toLowerCase()?null:n,n!==null?(e.stateNode=n,vs=e,ds=Lu(n.firstChild),!0):!1;case 6:return n=e.pendingProps===""||n.nodeType!==3?null:n,n!==null?(e.stateNode=n,vs=e,ds=null,!0):!1;case 13:return n=n.nodeType!==8?null:n,n!==null?(t=vd!==null?{id:wl,overflow:Rl}:null,e.memoizedState={dehydrated:n,treeContext:t,retryLane:1073741824},t=Bs(18,null,null,0),t.stateNode=n,t.return=e,e.child=t,vs=e,ds=null,!0):!1;default:return!1}}function e1(e){return(e.mode&1)!==0&&(e.flags&128)===0}function t1(e){if(Or){var n=ds;if(n){var t=n;if(!RA(e,n)){if(e1(e))throw Error(Ye(418));n=Lu(t.nextSibling);var r=vs;n&&RA(e,n)?PL(r,t):(e.flags=e.flags&-4097|2,Or=!1,vs=e)}}else{if(e1(e))throw Error(Ye(418));e.flags=e.flags&-4097|2,Or=!1,vs=e}}}function OA(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;vs=e}function m_(e){if(e!==vs)return!1;if(!Or)return OA(e),Or=!0,!1;var n;if((n=e.tag!==3)&&!(n=e.tag!==5)&&(n=e.type,n=n!=="head"&&n!=="body"&&!QC(e.type,e.memoizedProps)),n&&(n=ds)){if(e1(e))throw FL(),Error(Ye(418));for(;n;)PL(e,n),n=Lu(n.nextSibling)}if(OA(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Ye(317));e:{for(e=e.nextSibling,n=0;e;){if(e.nodeType===8){var t=e.data;if(t==="/$"){if(n===0){ds=Lu(e.nextSibling);break e}n--}else t!=="$"&&t!=="$!"&&t!=="$?"||n++}e=e.nextSibling}ds=null}}else ds=vs?Lu(e.stateNode.nextSibling):null;return!0}function FL(){for(var e=ds;e;)e=Lu(e.nextSibling)}function jh(){ds=vs=null,Or=!1}function JT(e){uo===null?uo=[e]:uo.push(e)}var rV=ql.ReactCurrentBatchConfig;function Jf(e,n,t){if(e=t.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ye(309));var r=t.stateNode}if(!r)throw Error(Ye(147,e));var i=r,a=""+e;return n!==null&&n.ref!==null&&typeof n.ref=="function"&&n.ref._stringRef===a?n.ref:(n=function(s){var o=i.refs;s===null?delete o[a]:o[a]=s},n._stringRef=a,n)}if(typeof e!="string")throw Error(Ye(284));if(!t._owner)throw Error(Ye(290,e))}return e}function __(e,n){throw e=Object.prototype.toString.call(n),Error(Ye(31,e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e))}function DA(e){var n=e._init;return n(e._payload)}function BL(e){function n(E,y){if(e){var S=E.deletions;S===null?(E.deletions=[y],E.flags|=16):S.push(y)}}function t(E,y){if(!e)return null;for(;y!==null;)n(E,y),y=y.sibling;return null}function r(E,y){for(E=new Map;y!==null;)y.key!==null?E.set(y.key,y):E.set(y.index,y),y=y.sibling;return E}function i(E,y){return E=Fu(E,y),E.index=0,E.sibling=null,E}function a(E,y,S){return E.index=S,e?(S=E.alternate,S!==null?(S=S.index,S<y?(E.flags|=2,y):S):(E.flags|=2,y)):(E.flags|=1048576,y)}function s(E){return e&&E.alternate===null&&(E.flags|=2),E}function o(E,y,S,I){return y===null||y.tag!==6?(y=pb(S,E.mode,I),y.return=E,y):(y=i(y,S),y.return=E,y)}function l(E,y,S,I){var w=S.type;return w===Eh?c(E,y,S.props.children,I,S.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===_u&&DA(w)===y.type)?(I=i(y,S.props),I.ref=Jf(E,y,S),I.return=E,I):(I=fg(S.type,S.key,S.props,null,E.mode,I),I.ref=Jf(E,y,S),I.return=E,I)}function u(E,y,S,I){return y===null||y.tag!==4||y.stateNode.containerInfo!==S.containerInfo||y.stateNode.implementation!==S.implementation?(y=mb(S,E.mode,I),y.return=E,y):(y=i(y,S.children||[]),y.return=E,y)}function c(E,y,S,I,w){return y===null||y.tag!==7?(y=od(S,E.mode,I,w),y.return=E,y):(y=i(y,S),y.return=E,y)}function h(E,y,S){if(typeof y=="string"&&y!==""||typeof y=="number")return y=pb(""+y,E.mode,S),y.return=E,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case s_:return S=fg(y.type,y.key,y.props,null,E.mode,S),S.ref=Jf(E,null,y),S.return=E,S;case gh:return y=mb(y,E.mode,S),y.return=E,y;case _u:var I=y._init;return h(E,I(y._payload),S)}if(bv(y)||Wf(y))return y=od(y,E.mode,S,null),y.return=E,y;__(E,y)}return null}function f(E,y,S,I){var w=y!==null?y.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return w!==null?null:o(E,y,""+S,I);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case s_:return S.key===w?l(E,y,S,I):null;case gh:return S.key===w?u(E,y,S,I):null;case _u:return w=S._init,f(E,y,w(S._payload),I)}if(bv(S)||Wf(S))return w!==null?null:c(E,y,S,I,null);__(E,S)}return null}function p(E,y,S,I,w){if(typeof I=="string"&&I!==""||typeof I=="number")return E=E.get(S)||null,o(y,E,""+I,w);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case s_:return E=E.get(I.key===null?S:I.key)||null,l(y,E,I,w);case gh:return E=E.get(I.key===null?S:I.key)||null,u(y,E,I,w);case _u:var R=I._init;return p(E,y,S,R(I._payload),w)}if(bv(I)||Wf(I))return E=E.get(S)||null,c(y,E,I,w,null);__(y,I)}return null}function _(E,y,S,I){for(var w=null,R=null,A=y,U=y=0,O=null;A!==null&&U<S.length;U++){A.index>U?(O=A,A=null):O=A.sibling;var B=f(E,A,S[U],I);if(B===null){A===null&&(A=O);break}e&&A&&B.alternate===null&&n(E,A),y=a(B,y,U),R===null?w=B:R.sibling=B,R=B,A=O}if(U===S.length)return t(E,A),Or&&Lc(E,U),w;if(A===null){for(;U<S.length;U++)A=h(E,S[U],I),A!==null&&(y=a(A,y,U),R===null?w=A:R.sibling=A,R=A);return Or&&Lc(E,U),w}for(A=r(E,A);U<S.length;U++)O=p(A,E,U,S[U],I),O!==null&&(e&&O.alternate!==null&&A.delete(O.key===null?U:O.key),y=a(O,y,U),R===null?w=O:R.sibling=O,R=O);return e&&A.forEach(function(F){return n(E,F)}),Or&&Lc(E,U),w}function g(E,y,S,I){var w=Wf(S);if(typeof w!="function")throw Error(Ye(150));if(S=w.call(S),S==null)throw Error(Ye(151));for(var R=w=null,A=y,U=y=0,O=null,B=S.next();A!==null&&!B.done;U++,B=S.next()){A.index>U?(O=A,A=null):O=A.sibling;var F=f(E,A,B.value,I);if(F===null){A===null&&(A=O);break}e&&A&&F.alternate===null&&n(E,A),y=a(F,y,U),R===null?w=F:R.sibling=F,R=F,A=O}if(B.done)return t(E,A),Or&&Lc(E,U),w;if(A===null){for(;!B.done;U++,B=S.next())B=h(E,B.value,I),B!==null&&(y=a(B,y,U),R===null?w=B:R.sibling=B,R=B);return Or&&Lc(E,U),w}for(A=r(E,A);!B.done;U++,B=S.next())B=p(A,E,U,B.value,I),B!==null&&(e&&B.alternate!==null&&A.delete(B.key===null?U:B.key),y=a(B,y,U),R===null?w=B:R.sibling=B,R=B);return e&&A.forEach(function(P){return n(E,P)}),Or&&Lc(E,U),w}function C(E,y,S,I){if(typeof S=="object"&&S!==null&&S.type===Eh&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case s_:e:{for(var w=S.key,R=y;R!==null;){if(R.key===w){if(w=S.type,w===Eh){if(R.tag===7){t(E,R.sibling),y=i(R,S.props.children),y.return=E,E=y;break e}}else if(R.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===_u&&DA(w)===R.type){t(E,R.sibling),y=i(R,S.props),y.ref=Jf(E,R,S),y.return=E,E=y;break e}t(E,R);break}else n(E,R);R=R.sibling}S.type===Eh?(y=od(S.props.children,E.mode,I,S.key),y.return=E,E=y):(I=fg(S.type,S.key,S.props,null,E.mode,I),I.ref=Jf(E,y,S),I.return=E,E=I)}return s(E);case gh:e:{for(R=S.key;y!==null;){if(y.key===R)if(y.tag===4&&y.stateNode.containerInfo===S.containerInfo&&y.stateNode.implementation===S.implementation){t(E,y.sibling),y=i(y,S.children||[]),y.return=E,E=y;break e}else{t(E,y);break}else n(E,y);y=y.sibling}y=mb(S,E.mode,I),y.return=E,E=y}return s(E);case _u:return R=S._init,C(E,y,R(S._payload),I)}if(bv(S))return _(E,y,S,I);if(Wf(S))return g(E,y,S,I);__(E,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,y!==null&&y.tag===6?(t(E,y.sibling),y=i(y,S),y.return=E,E=y):(t(E,y),y=pb(S,E.mode,I),y.return=E,E=y),s(E)):t(E,y)}return C}var qh=BL(!0),HL=BL(!1),Vg=ec(null),zg=null,Mh=null,eN=null;function tN(){eN=Mh=zg=null}function nN(e){var n=Vg.current;Mr(Vg),e._currentValue=n}function n1(e,n,t){for(;e!==null;){var r=e.alternate;if((e.childLanes&n)!==n?(e.childLanes|=n,r!==null&&(r.childLanes|=n)):r!==null&&(r.childLanes&n)!==n&&(r.childLanes|=n),e===t)break;e=e.return}}function xh(e,n){zg=e,eN=Mh=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&n&&(Ba=!0),e.firstContext=null)}function $s(e){var n=e._currentValue;if(eN!==e)if(e={context:e,memoizedValue:n,next:null},Mh===null){if(zg===null)throw Error(Ye(308));Mh=e,zg.dependencies={lanes:0,firstContext:e}}else Mh=Mh.next=e;return n}var Qc=null;function rN(e){Qc===null?Qc=[e]:Qc.push(e)}function GL(e,n,t,r){var i=n.interleaved;return i===null?(t.next=t,rN(n)):(t.next=i.next,i.next=t),n.interleaved=t,Hl(e,r)}function Hl(e,n){e.lanes|=n;var t=e.alternate;for(t!==null&&(t.lanes|=n),t=e,e=e.return;e!==null;)e.childLanes|=n,t=e.alternate,t!==null&&(t.childLanes|=n),t=e,e=e.return;return t.tag===3?t.stateNode:null}var gu=!1;function iN(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function $L(e,n){e=e.updateQueue,n.updateQueue===e&&(n.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ul(e,n){return{eventTime:e,lane:n,tag:0,payload:null,callback:null,next:null}}function ku(e,n,t){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Yn&2){var i=r.pending;return i===null?n.next=n:(n.next=i.next,i.next=n),r.pending=n,Hl(e,t)}return i=r.interleaved,i===null?(n.next=n,rN(r)):(n.next=i.next,i.next=n),r.interleaved=n,Hl(e,t)}function og(e,n,t){if(n=n.updateQueue,n!==null&&(n=n.shared,(t&4194240)!==0)){var r=n.lanes;r&=e.pendingLanes,t|=r,n.lanes=t,VT(e,t)}}function UA(e,n){var t=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var i=null,a=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};a===null?i=a=s:a=a.next=s,t=t.next}while(t!==null);a===null?i=a=n:a=a.next=n}else i=a=n;t={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=t;return}e=t.lastBaseUpdate,e===null?t.firstBaseUpdate=n:e.next=n,t.lastBaseUpdate=n}function jg(e,n,t,r){var i=e.updateQueue;gu=!1;var a=i.firstBaseUpdate,s=i.lastBaseUpdate,o=i.shared.pending;if(o!==null){i.shared.pending=null;var l=o,u=l.next;l.next=null,s===null?a=u:s.next=u,s=l;var c=e.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==s&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(a!==null){var h=i.baseState;s=0,c=u=l=null,o=a;do{var f=o.lane,p=o.eventTime;if((r&f)===f){c!==null&&(c=c.next={eventTime:p,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var _=e,g=o;switch(f=n,p=t,g.tag){case 1:if(_=g.payload,typeof _=="function"){h=_.call(p,h,f);break e}h=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=g.payload,f=typeof _=="function"?_.call(p,h,f):_,f==null)break e;h=Hr({},h,f);break e;case 2:gu=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,f=i.effects,f===null?i.effects=[o]:f.push(o))}else p={eventTime:p,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=p,l=h):c=c.next=p,s|=f;if(o=o.next,o===null){if(o=i.shared.pending,o===null)break;f=o,o=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(c===null&&(l=h),i.baseState=l,i.firstBaseUpdate=u,i.lastBaseUpdate=c,n=i.shared.interleaved,n!==null){i=n;do s|=i.lane,i=i.next;while(i!==n)}else a===null&&(i.shared.lanes=0);md|=s,e.lanes=s,e.memoizedState=h}}function LA(e,n,t){if(e=n.effects,n.effects=null,e!==null)for(n=0;n<e.length;n++){var r=e[n],i=r.callback;if(i!==null){if(r.callback=null,r=t,typeof i!="function")throw Error(Ye(191,i));i.call(r)}}}var Zp={},qo=ec(Zp),Cp=ec(Zp),Sp=ec(Zp);function Xc(e){if(e===Zp)throw Error(Ye(174));return e}function aN(e,n){switch(Sr(Sp,n),Sr(Cp,e),Sr(qo,Zp),e=n.nodeType,e){case 9:case 11:n=(n=n.documentElement)?n.namespaceURI:xC(null,"");break;default:e=e===8?n.parentNode:n,n=e.namespaceURI||null,e=e.tagName,n=xC(n,e)}Mr(qo),Sr(qo,n)}function Kh(){Mr(qo),Mr(Cp),Mr(Sp)}function VL(e){Xc(Sp.current);var n=Xc(qo.current),t=xC(n,e.type);n!==t&&(Sr(Cp,e),Sr(qo,t))}function sN(e){Cp.current===e&&(Mr(qo),Mr(Cp))}var Pr=ec(0);function qg(e){for(var n=e;n!==null;){if(n.tag===13){var t=n.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return n}else if(n.tag===19&&n.memoizedProps.revealOrder!==void 0){if(n.flags&128)return n}else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return null;n=n.return}n.sibling.return=n.return,n=n.sibling}return null}var ub=[];function oN(){for(var e=0;e<ub.length;e++)ub[e]._workInProgressVersionPrimary=null;ub.length=0}var lg=ql.ReactCurrentDispatcher,cb=ql.ReactCurrentBatchConfig,pd=0,Br=null,fi=null,Ti=null,Kg=!1,Pv=!1,Tp=0,iV=0;function Xi(){throw Error(Ye(321))}function lN(e,n){if(n===null)return!1;for(var t=0;t<n.length&&t<e.length;t++)if(!Eo(e[t],n[t]))return!1;return!0}function uN(e,n,t,r,i,a){if(pd=a,Br=n,n.memoizedState=null,n.updateQueue=null,n.lanes=0,lg.current=e===null||e.memoizedState===null?lV:uV,e=t(r,i),Pv){a=0;do{if(Pv=!1,Tp=0,25<=a)throw Error(Ye(301));a+=1,Ti=fi=null,n.updateQueue=null,lg.current=cV,e=t(r,i)}while(Pv)}if(lg.current=Wg,n=fi!==null&&fi.next!==null,pd=0,Ti=fi=Br=null,Kg=!1,n)throw Error(Ye(300));return e}function cN(){var e=Tp!==0;return Tp=0,e}function Po(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ti===null?Br.memoizedState=Ti=e:Ti=Ti.next=e,Ti}function Vs(){if(fi===null){var e=Br.alternate;e=e!==null?e.memoizedState:null}else e=fi.next;var n=Ti===null?Br.memoizedState:Ti.next;if(n!==null)Ti=n,fi=e;else{if(e===null)throw Error(Ye(310));fi=e,e={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},Ti===null?Br.memoizedState=Ti=e:Ti=Ti.next=e}return Ti}function Np(e,n){return typeof n=="function"?n(e):n}function db(e){var n=Vs(),t=n.queue;if(t===null)throw Error(Ye(311));t.lastRenderedReducer=e;var r=fi,i=r.baseQueue,a=t.pending;if(a!==null){if(i!==null){var s=i.next;i.next=a.next,a.next=s}r.baseQueue=i=a,t.pending=null}if(i!==null){a=i.next,r=r.baseState;var o=s=null,l=null,u=a;do{var c=u.lane;if((pd&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,s=r):l=l.next=h,Br.lanes|=c,md|=c}u=u.next}while(u!==null&&u!==a);l===null?s=r:l.next=o,Eo(r,n.memoizedState)||(Ba=!0),n.memoizedState=r,n.baseState=s,n.baseQueue=l,t.lastRenderedState=r}if(e=t.interleaved,e!==null){i=e;do a=i.lane,Br.lanes|=a,md|=a,i=i.next;while(i!==e)}else i===null&&(t.lanes=0);return[n.memoizedState,t.dispatch]}function hb(e){var n=Vs(),t=n.queue;if(t===null)throw Error(Ye(311));t.lastRenderedReducer=e;var r=t.dispatch,i=t.pending,a=n.memoizedState;if(i!==null){t.pending=null;var s=i=i.next;do a=e(a,s.action),s=s.next;while(s!==i);Eo(a,n.memoizedState)||(Ba=!0),n.memoizedState=a,n.baseQueue===null&&(n.baseState=a),t.lastRenderedState=a}return[a,r]}function zL(){}function jL(e,n){var t=Br,r=Vs(),i=n(),a=!Eo(r.memoizedState,i);if(a&&(r.memoizedState=i,Ba=!0),r=r.queue,dN(WL.bind(null,t,r,e),[e]),r.getSnapshot!==n||a||Ti!==null&&Ti.memoizedState.tag&1){if(t.flags|=2048,Ip(9,KL.bind(null,t,r,i,n),void 0,null),wi===null)throw Error(Ye(349));pd&30||qL(t,n,i)}return i}function qL(e,n,t){e.flags|=16384,e={getSnapshot:n,value:t},n=Br.updateQueue,n===null?(n={lastEffect:null,stores:null},Br.updateQueue=n,n.stores=[e]):(t=n.stores,t===null?n.stores=[e]:t.push(e))}function KL(e,n,t,r){n.value=t,n.getSnapshot=r,YL(n)&&QL(e)}function WL(e,n,t){return t(function(){YL(n)&&QL(e)})}function YL(e){var n=e.getSnapshot;e=e.value;try{var t=n();return!Eo(e,t)}catch{return!0}}function QL(e){var n=Hl(e,1);n!==null&&_o(n,e,1,-1)}function kA(e){var n=Po();return typeof e=="function"&&(e=e()),n.memoizedState=n.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Np,lastRenderedState:e},n.queue=e,e=e.dispatch=oV.bind(null,Br,e),[n.memoizedState,e]}function Ip(e,n,t,r){return e={tag:e,create:n,destroy:t,deps:r,next:null},n=Br.updateQueue,n===null?(n={lastEffect:null,stores:null},Br.updateQueue=n,n.lastEffect=e.next=e):(t=n.lastEffect,t===null?n.lastEffect=e.next=e:(r=t.next,t.next=e,e.next=r,n.lastEffect=e)),e}function XL(){return Vs().memoizedState}function ug(e,n,t,r){var i=Po();Br.flags|=e,i.memoizedState=Ip(1|n,t,void 0,r===void 0?null:r)}function Q0(e,n,t,r){var i=Vs();r=r===void 0?null:r;var a=void 0;if(fi!==null){var s=fi.memoizedState;if(a=s.destroy,r!==null&&lN(r,s.deps)){i.memoizedState=Ip(n,t,a,r);return}}Br.flags|=e,i.memoizedState=Ip(1|n,t,a,r)}function xA(e,n){return ug(8390656,8,e,n)}function dN(e,n){return Q0(2048,8,e,n)}function ZL(e,n){return Q0(4,2,e,n)}function JL(e,n){return Q0(4,4,e,n)}function ek(e,n){if(typeof n=="function")return e=e(),n(e),function(){n(null)};if(n!=null)return e=e(),n.current=e,function(){n.current=null}}function tk(e,n,t){return t=t!=null?t.concat([e]):null,Q0(4,4,ek.bind(null,n,e),t)}function hN(){}function nk(e,n){var t=Vs();n=n===void 0?null:n;var r=t.memoizedState;return r!==null&&n!==null&&lN(n,r[1])?r[0]:(t.memoizedState=[e,n],e)}function rk(e,n){var t=Vs();n=n===void 0?null:n;var r=t.memoizedState;return r!==null&&n!==null&&lN(n,r[1])?r[0]:(e=e(),t.memoizedState=[e,n],e)}function ik(e,n,t){return pd&21?(Eo(t,n)||(t=uL(),Br.lanes|=t,md|=t,e.baseState=!0),n):(e.baseState&&(e.baseState=!1,Ba=!0),e.memoizedState=t)}function aV(e,n){var t=fr;fr=t!==0&&4>t?t:4,e(!0);var r=cb.transition;cb.transition={};try{e(!1),n()}finally{fr=t,cb.transition=r}}function ak(){return Vs().memoizedState}function sV(e,n,t){var r=Pu(e);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},sk(e))ok(n,t);else if(t=GL(e,n,t,r),t!==null){var i=va();_o(t,e,r,i),lk(t,n,r)}}function oV(e,n,t){var r=Pu(e),i={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(sk(e))ok(n,i);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=n.lastRenderedReducer,a!==null))try{var s=n.lastRenderedState,o=a(s,t);if(i.hasEagerState=!0,i.eagerState=o,Eo(o,s)){var l=n.interleaved;l===null?(i.next=i,rN(n)):(i.next=l.next,l.next=i),n.interleaved=i;return}}catch{}finally{}t=GL(e,n,i,r),t!==null&&(i=va(),_o(t,e,r,i),lk(t,n,r))}}function sk(e){var n=e.alternate;return e===Br||n!==null&&n===Br}function ok(e,n){Pv=Kg=!0;var t=e.pending;t===null?n.next=n:(n.next=t.next,t.next=n),e.pending=n}function lk(e,n,t){if(t&4194240){var r=n.lanes;r&=e.pendingLanes,t|=r,n.lanes=t,VT(e,t)}}var Wg={readContext:$s,useCallback:Xi,useContext:Xi,useEffect:Xi,useImperativeHandle:Xi,useInsertionEffect:Xi,useLayoutEffect:Xi,useMemo:Xi,useReducer:Xi,useRef:Xi,useState:Xi,useDebugValue:Xi,useDeferredValue:Xi,useTransition:Xi,useMutableSource:Xi,useSyncExternalStore:Xi,useId:Xi,unstable_isNewReconciler:!1},lV={readContext:$s,useCallback:function(e,n){return Po().memoizedState=[e,n===void 0?null:n],e},useContext:$s,useEffect:xA,useImperativeHandle:function(e,n,t){return t=t!=null?t.concat([e]):null,ug(4194308,4,ek.bind(null,n,e),t)},useLayoutEffect:function(e,n){return ug(4194308,4,e,n)},useInsertionEffect:function(e,n){return ug(4,2,e,n)},useMemo:function(e,n){var t=Po();return n=n===void 0?null:n,e=e(),t.memoizedState=[e,n],e},useReducer:function(e,n,t){var r=Po();return n=t!==void 0?t(n):n,r.memoizedState=r.baseState=n,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:n},r.queue=e,e=e.dispatch=sV.bind(null,Br,e),[r.memoizedState,e]},useRef:function(e){var n=Po();return e={current:e},n.memoizedState=e},useState:kA,useDebugValue:hN,useDeferredValue:function(e){return Po().memoizedState=e},useTransition:function(){var e=kA(!1),n=e[0];return e=aV.bind(null,e[1]),Po().memoizedState=e,[n,e]},useMutableSource:function(){},useSyncExternalStore:function(e,n,t){var r=Br,i=Po();if(Or){if(t===void 0)throw Error(Ye(407));t=t()}else{if(t=n(),wi===null)throw Error(Ye(349));pd&30||qL(r,n,t)}i.memoizedState=t;var a={value:t,getSnapshot:n};return i.queue=a,xA(WL.bind(null,r,a,e),[e]),r.flags|=2048,Ip(9,KL.bind(null,r,a,t,n),void 0,null),t},useId:function(){var e=Po(),n=wi.identifierPrefix;if(Or){var t=Rl,r=wl;t=(r&~(1<<32-mo(r)-1)).toString(32)+t,n=":"+n+"R"+t,t=Tp++,0<t&&(n+="H"+t.toString(32)),n+=":"}else t=iV++,n=":"+n+"r"+t.toString(32)+":";return e.memoizedState=n},unstable_isNewReconciler:!1},uV={readContext:$s,useCallback:nk,useContext:$s,useEffect:dN,useImperativeHandle:tk,useInsertionEffect:ZL,useLayoutEffect:JL,useMemo:rk,useReducer:db,useRef:XL,useState:function(){return db(Np)},useDebugValue:hN,useDeferredValue:function(e){var n=Vs();return ik(n,fi.memoizedState,e)},useTransition:function(){var e=db(Np)[0],n=Vs().memoizedState;return[e,n]},useMutableSource:zL,useSyncExternalStore:jL,useId:ak,unstable_isNewReconciler:!1},cV={readContext:$s,useCallback:nk,useContext:$s,useEffect:dN,useImperativeHandle:tk,useInsertionEffect:ZL,useLayoutEffect:JL,useMemo:rk,useReducer:hb,useRef:XL,useState:function(){return hb(Np)},useDebugValue:hN,useDeferredValue:function(e){var n=Vs();return fi===null?n.memoizedState=e:ik(n,fi.memoizedState,e)},useTransition:function(){var e=hb(Np)[0],n=Vs().memoizedState;return[e,n]},useMutableSource:zL,useSyncExternalStore:jL,useId:ak,unstable_isNewReconciler:!1};function so(e,n){if(e&&e.defaultProps){n=Hr({},n),e=e.defaultProps;for(var t in e)n[t]===void 0&&(n[t]=e[t]);return n}return n}function r1(e,n,t,r){n=e.memoizedState,t=t(r,n),t=t==null?n:Hr({},n,t),e.memoizedState=t,e.lanes===0&&(e.updateQueue.baseState=t)}var X0={isMounted:function(e){return(e=e._reactInternals)?Rd(e)===e:!1},enqueueSetState:function(e,n,t){e=e._reactInternals;var r=va(),i=Pu(e),a=Ul(r,i);a.payload=n,t!=null&&(a.callback=t),n=ku(e,a,i),n!==null&&(_o(n,e,i,r),og(n,e,i))},enqueueReplaceState:function(e,n,t){e=e._reactInternals;var r=va(),i=Pu(e),a=Ul(r,i);a.tag=1,a.payload=n,t!=null&&(a.callback=t),n=ku(e,a,i),n!==null&&(_o(n,e,i,r),og(n,e,i))},enqueueForceUpdate:function(e,n){e=e._reactInternals;var t=va(),r=Pu(e),i=Ul(t,r);i.tag=2,n!=null&&(i.callback=n),n=ku(e,i,r),n!==null&&(_o(n,e,r,t),og(n,e,r))}};function PA(e,n,t,r,i,a,s){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,s):n.prototype&&n.prototype.isPureReactComponent?!gp(t,r)||!gp(i,a):!0}function uk(e,n,t){var r=!1,i=Ku,a=n.contextType;return typeof a=="object"&&a!==null?a=$s(a):(i=Ga(n)?fd:ia.current,r=n.contextTypes,a=(r=r!=null)?zh(e,i):Ku),n=new n(t,a),e.memoizedState=n.state!==null&&n.state!==void 0?n.state:null,n.updater=X0,e.stateNode=n,n._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=a),n}function FA(e,n,t,r){e=n.state,typeof n.componentWillReceiveProps=="function"&&n.componentWillReceiveProps(t,r),typeof n.UNSAFE_componentWillReceiveProps=="function"&&n.UNSAFE_componentWillReceiveProps(t,r),n.state!==e&&X0.enqueueReplaceState(n,n.state,null)}function i1(e,n,t,r){var i=e.stateNode;i.props=t,i.state=e.memoizedState,i.refs={},iN(e);var a=n.contextType;typeof a=="object"&&a!==null?i.context=$s(a):(a=Ga(n)?fd:ia.current,i.context=zh(e,a)),i.state=e.memoizedState,a=n.getDerivedStateFromProps,typeof a=="function"&&(r1(e,n,a,t),i.state=e.memoizedState),typeof n.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(n=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),n!==i.state&&X0.enqueueReplaceState(i,i.state,null),jg(e,t,i,r),i.state=e.memoizedState),typeof i.componentDidMount=="function"&&(e.flags|=4194308)}function Wh(e,n){try{var t="",r=n;do t+=F$(r),r=r.return;while(r);var i=t}catch(a){i=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:n,stack:i,digest:null}}function fb(e,n,t){return{value:e,source:null,stack:t??null,digest:n??null}}function a1(e,n){try{console.error(n.value)}catch(t){setTimeout(function(){throw t})}}var dV=typeof WeakMap=="function"?WeakMap:Map;function ck(e,n,t){t=Ul(-1,t),t.tag=3,t.payload={element:null};var r=n.value;return t.callback=function(){Qg||(Qg=!0,p1=r),a1(e,n)},t}function dk(e,n,t){t=Ul(-1,t),t.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var i=n.value;t.payload=function(){return r(i)},t.callback=function(){a1(e,n)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(t.callback=function(){a1(e,n),typeof r!="function"&&(xu===null?xu=new Set([this]):xu.add(this));var s=n.stack;this.componentDidCatch(n.value,{componentStack:s!==null?s:""})}),t}function BA(e,n,t){var r=e.pingCache;if(r===null){r=e.pingCache=new dV;var i=new Set;r.set(n,i)}else i=r.get(n),i===void 0&&(i=new Set,r.set(n,i));i.has(t)||(i.add(t),e=NV.bind(null,e,n,t),n.then(e,e))}function HA(e){do{var n;if((n=e.tag===13)&&(n=e.memoizedState,n=n!==null?n.dehydrated!==null:!0),n)return e;e=e.return}while(e!==null);return null}function GA(e,n,t,r,i){return e.mode&1?(e.flags|=65536,e.lanes=i,e):(e===n?e.flags|=65536:(e.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(n=Ul(-1,1),n.tag=2,ku(t,n,1))),t.lanes|=1),e)}var hV=ql.ReactCurrentOwner,Ba=!1;function ha(e,n,t,r){n.child=e===null?HL(n,null,t,r):qh(n,e.child,t,r)}function $A(e,n,t,r,i){t=t.render;var a=n.ref;return xh(n,i),r=uN(e,n,t,r,a,i),t=cN(),e!==null&&!Ba?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i,Gl(e,n,i)):(Or&&t&&XT(n),n.flags|=1,ha(e,n,r,i),n.child)}function VA(e,n,t,r,i){if(e===null){var a=t.type;return typeof a=="function"&&!yN(a)&&a.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(n.tag=15,n.type=a,hk(e,n,a,r,i)):(e=fg(t.type,null,r,n,n.mode,i),e.ref=n.ref,e.return=n,n.child=e)}if(a=e.child,!(e.lanes&i)){var s=a.memoizedProps;if(t=t.compare,t=t!==null?t:gp,t(s,r)&&e.ref===n.ref)return Gl(e,n,i)}return n.flags|=1,e=Fu(a,r),e.ref=n.ref,e.return=n,n.child=e}function hk(e,n,t,r,i){if(e!==null){var a=e.memoizedProps;if(gp(a,r)&&e.ref===n.ref)if(Ba=!1,n.pendingProps=r=a,(e.lanes&i)!==0)e.flags&131072&&(Ba=!0);else return n.lanes=e.lanes,Gl(e,n,i)}return s1(e,n,t,r,i)}function fk(e,n,t){var r=n.pendingProps,i=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(n.mode&1))n.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sr(wh,is),is|=t;else{if(!(t&1073741824))return e=a!==null?a.baseLanes|t:t,n.lanes=n.childLanes=1073741824,n.memoizedState={baseLanes:e,cachePool:null,transitions:null},n.updateQueue=null,Sr(wh,is),is|=e,null;n.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:t,Sr(wh,is),is|=r}else a!==null?(r=a.baseLanes|t,n.memoizedState=null):r=t,Sr(wh,is),is|=r;return ha(e,n,i,t),n.child}function vk(e,n){var t=n.ref;(e===null&&t!==null||e!==null&&e.ref!==t)&&(n.flags|=512,n.flags|=2097152)}function s1(e,n,t,r,i){var a=Ga(t)?fd:ia.current;return a=zh(n,a),xh(n,i),t=uN(e,n,t,r,a,i),r=cN(),e!==null&&!Ba?(n.updateQueue=e.updateQueue,n.flags&=-2053,e.lanes&=~i,Gl(e,n,i)):(Or&&r&&XT(n),n.flags|=1,ha(e,n,t,i),n.child)}function zA(e,n,t,r,i){if(Ga(t)){var a=!0;Hg(n)}else a=!1;if(xh(n,i),n.stateNode===null)cg(e,n),uk(n,t,r),i1(n,t,r,i),r=!0;else if(e===null){var s=n.stateNode,o=n.memoizedProps;s.props=o;var l=s.context,u=t.contextType;typeof u=="object"&&u!==null?u=$s(u):(u=Ga(t)?fd:ia.current,u=zh(n,u));var c=t.getDerivedStateFromProps,h=typeof c=="function"||typeof s.getSnapshotBeforeUpdate=="function";h||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==r||l!==u)&&FA(n,s,r,u),gu=!1;var f=n.memoizedState;s.state=f,jg(n,r,s,i),l=n.memoizedState,o!==r||f!==l||Ha.current||gu?(typeof c=="function"&&(r1(n,t,c,r),l=n.memoizedState),(o=gu||PA(n,t,o,r,f,l,u))?(h||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(n.flags|=4194308)):(typeof s.componentDidMount=="function"&&(n.flags|=4194308),n.memoizedProps=r,n.memoizedState=l),s.props=r,s.state=l,s.context=u,r=o):(typeof s.componentDidMount=="function"&&(n.flags|=4194308),r=!1)}else{s=n.stateNode,$L(e,n),o=n.memoizedProps,u=n.type===n.elementType?o:so(n.type,o),s.props=u,h=n.pendingProps,f=s.context,l=t.contextType,typeof l=="object"&&l!==null?l=$s(l):(l=Ga(t)?fd:ia.current,l=zh(n,l));var p=t.getDerivedStateFromProps;(c=typeof p=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(o!==h||f!==l)&&FA(n,s,r,l),gu=!1,f=n.memoizedState,s.state=f,jg(n,r,s,i);var _=n.memoizedState;o!==h||f!==_||Ha.current||gu?(typeof p=="function"&&(r1(n,t,p,r),_=n.memoizedState),(u=gu||PA(n,t,u,r,f,_,l)||!1)?(c||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,_,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,_,l)),typeof s.componentDidUpdate=="function"&&(n.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(n.flags|=1024)):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(n.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(n.flags|=1024),n.memoizedProps=r,n.memoizedState=_),s.props=r,s.state=_,s.context=l,r=u):(typeof s.componentDidUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(n.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&f===e.memoizedState||(n.flags|=1024),r=!1)}return o1(e,n,t,r,a,i)}function o1(e,n,t,r,i,a){vk(e,n);var s=(n.flags&128)!==0;if(!r&&!s)return i&&wA(n,t,!1),Gl(e,n,a);r=n.stateNode,hV.current=n;var o=s&&typeof t.getDerivedStateFromError!="function"?null:r.render();return n.flags|=1,e!==null&&s?(n.child=qh(n,e.child,null,a),n.child=qh(n,null,o,a)):ha(e,n,o,a),n.memoizedState=r.state,i&&wA(n,t,!0),n.child}function pk(e){var n=e.stateNode;n.pendingContext?AA(e,n.pendingContext,n.pendingContext!==n.context):n.context&&AA(e,n.context,!1),aN(e,n.containerInfo)}function jA(e,n,t,r,i){return jh(),JT(i),n.flags|=256,ha(e,n,t,r),n.child}var l1={dehydrated:null,treeContext:null,retryLane:0};function u1(e){return{baseLanes:e,cachePool:null,transitions:null}}function mk(e,n,t){var r=n.pendingProps,i=Pr.current,a=!1,s=(n.flags&128)!==0,o;if((o=s)||(o=e!==null&&e.memoizedState===null?!1:(i&2)!==0),o?(a=!0,n.flags&=-129):(e===null||e.memoizedState!==null)&&(i|=1),Sr(Pr,i&1),e===null)return t1(n),e=n.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(n.mode&1?e.data==="$!"?n.lanes=8:n.lanes=1073741824:n.lanes=1,null):(s=r.children,e=r.fallback,a?(r=n.mode,a=n.child,s={mode:"hidden",children:s},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=s):a=eE(s,r,0,null),e=od(e,r,t,null),a.return=n,e.return=n,a.sibling=e,n.child=a,n.child.memoizedState=u1(t),n.memoizedState=l1,e):fN(n,s));if(i=e.memoizedState,i!==null&&(o=i.dehydrated,o!==null))return fV(e,n,s,r,o,i,t);if(a){a=r.fallback,s=n.mode,i=e.child,o=i.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&n.child!==i?(r=n.child,r.childLanes=0,r.pendingProps=l,n.deletions=null):(r=Fu(i,l),r.subtreeFlags=i.subtreeFlags&14680064),o!==null?a=Fu(o,a):(a=od(a,s,t,null),a.flags|=2),a.return=n,r.return=n,r.sibling=a,n.child=r,r=a,a=n.child,s=e.child.memoizedState,s=s===null?u1(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},a.memoizedState=s,a.childLanes=e.childLanes&~t,n.memoizedState=l1,r}return a=e.child,e=a.sibling,r=Fu(a,{mode:"visible",children:r.children}),!(n.mode&1)&&(r.lanes=t),r.return=n,r.sibling=null,e!==null&&(t=n.deletions,t===null?(n.deletions=[e],n.flags|=16):t.push(e)),n.child=r,n.memoizedState=null,r}function fN(e,n){return n=eE({mode:"visible",children:n},e.mode,0,null),n.return=e,e.child=n}function g_(e,n,t,r){return r!==null&&JT(r),qh(n,e.child,null,t),e=fN(n,n.pendingProps.children),e.flags|=2,n.memoizedState=null,e}function fV(e,n,t,r,i,a,s){if(t)return n.flags&256?(n.flags&=-257,r=fb(Error(Ye(422))),g_(e,n,s,r)):n.memoizedState!==null?(n.child=e.child,n.flags|=128,null):(a=r.fallback,i=n.mode,r=eE({mode:"visible",children:r.children},i,0,null),a=od(a,i,s,null),a.flags|=2,r.return=n,a.return=n,r.sibling=a,n.child=r,n.mode&1&&qh(n,e.child,null,s),n.child.memoizedState=u1(s),n.memoizedState=l1,a);if(!(n.mode&1))return g_(e,n,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var o=r.dgst;return r=o,a=Error(Ye(419)),r=fb(a,r,void 0),g_(e,n,s,r)}if(o=(s&e.childLanes)!==0,Ba||o){if(r=wi,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==a.retryLane&&(a.retryLane=i,Hl(e,i),_o(r,e,i,-1))}return EN(),r=fb(Error(Ye(421))),g_(e,n,s,r)}return i.data==="$?"?(n.flags|=128,n.child=e.child,n=IV.bind(null,e),i._reactRetry=n,null):(e=a.treeContext,ds=Lu(i.nextSibling),vs=n,Or=!0,uo=null,e!==null&&(Os[Ds++]=wl,Os[Ds++]=Rl,Os[Ds++]=vd,wl=e.id,Rl=e.overflow,vd=n),n=fN(n,r.children),n.flags|=4096,n)}function qA(e,n,t){e.lanes|=n;var r=e.alternate;r!==null&&(r.lanes|=n),n1(e.return,n,t)}function vb(e,n,t,r,i){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:n,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:i}:(a.isBackwards=n,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=t,a.tailMode=i)}function _k(e,n,t){var r=n.pendingProps,i=r.revealOrder,a=r.tail;if(ha(e,n,r.children,t),r=Pr.current,r&2)r=r&1|2,n.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=n.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&qA(e,t,n);else if(e.tag===19)qA(e,t,n);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break e;for(;e.sibling===null;){if(e.return===null||e.return===n)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Sr(Pr,r),!(n.mode&1))n.memoizedState=null;else switch(i){case"forwards":for(t=n.child,i=null;t!==null;)e=t.alternate,e!==null&&qg(e)===null&&(i=t),t=t.sibling;t=i,t===null?(i=n.child,n.child=null):(i=t.sibling,t.sibling=null),vb(n,!1,i,t,a);break;case"backwards":for(t=null,i=n.child,n.child=null;i!==null;){if(e=i.alternate,e!==null&&qg(e)===null){n.child=i;break}e=i.sibling,i.sibling=t,t=i,i=e}vb(n,!0,t,null,a);break;case"together":vb(n,!1,null,null,void 0);break;default:n.memoizedState=null}return n.child}function cg(e,n){!(n.mode&1)&&e!==null&&(e.alternate=null,n.alternate=null,n.flags|=2)}function Gl(e,n,t){if(e!==null&&(n.dependencies=e.dependencies),md|=n.lanes,!(t&n.childLanes))return null;if(e!==null&&n.child!==e.child)throw Error(Ye(153));if(n.child!==null){for(e=n.child,t=Fu(e,e.pendingProps),n.child=t,t.return=n;e.sibling!==null;)e=e.sibling,t=t.sibling=Fu(e,e.pendingProps),t.return=n;t.sibling=null}return n.child}function vV(e,n,t){switch(n.tag){case 3:pk(n),jh();break;case 5:VL(n);break;case 1:Ga(n.type)&&Hg(n);break;case 4:aN(n,n.stateNode.containerInfo);break;case 10:var r=n.type._context,i=n.memoizedProps.value;Sr(Vg,r._currentValue),r._currentValue=i;break;case 13:if(r=n.memoizedState,r!==null)return r.dehydrated!==null?(Sr(Pr,Pr.current&1),n.flags|=128,null):t&n.child.childLanes?mk(e,n,t):(Sr(Pr,Pr.current&1),e=Gl(e,n,t),e!==null?e.sibling:null);Sr(Pr,Pr.current&1);break;case 19:if(r=(t&n.childLanes)!==0,e.flags&128){if(r)return _k(e,n,t);n.flags|=128}if(i=n.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Sr(Pr,Pr.current),r)break;return null;case 22:case 23:return n.lanes=0,fk(e,n,t)}return Gl(e,n,t)}var gk,c1,Ek,yk;gk=function(e,n){for(var t=n.child;t!==null;){if(t.tag===5||t.tag===6)e.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===n)break;for(;t.sibling===null;){if(t.return===null||t.return===n)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};c1=function(){};Ek=function(e,n,t,r){var i=e.memoizedProps;if(i!==r){e=n.stateNode,Xc(qo.current);var a=null;switch(t){case"input":i=DC(e,i),r=DC(e,r),a=[];break;case"select":i=Hr({},i,{value:void 0}),r=Hr({},r,{value:void 0}),a=[];break;case"textarea":i=kC(e,i),r=kC(e,r),a=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=Fg)}PC(t,r);var s;t=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var o=i[u];for(s in o)o.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(dp.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var l=r[u];if(o=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(s in o)!o.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in l)l.hasOwnProperty(s)&&o[s]!==l[s]&&(t||(t={}),t[s]=l[s])}else t||(a||(a=[]),a.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(a=a||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(a=a||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(dp.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&Nr("scroll",e),a||o===l||(a=[])):(a=a||[]).push(u,l))}t&&(a=a||[]).push("style",t);var u=a;(n.updateQueue=u)&&(n.flags|=4)}};yk=function(e,n,t,r){t!==r&&(n.flags|=4)};function ev(e,n){if(!Or)switch(e.tailMode){case"hidden":n=e.tail;for(var t=null;n!==null;)n.alternate!==null&&(t=n),n=n.sibling;t===null?e.tail=null:t.sibling=null;break;case"collapsed":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?n||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Zi(e){var n=e.alternate!==null&&e.alternate.child===e.child,t=0,r=0;if(n)for(var i=e.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=e,i=i.sibling;else for(i=e.child;i!==null;)t|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=t,n}function pV(e,n,t){var r=n.pendingProps;switch(ZT(n),n.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Zi(n),null;case 1:return Ga(n.type)&&Bg(),Zi(n),null;case 3:return r=n.stateNode,Kh(),Mr(Ha),Mr(ia),oN(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(m_(n)?n.flags|=4:e===null||e.memoizedState.isDehydrated&&!(n.flags&256)||(n.flags|=1024,uo!==null&&(g1(uo),uo=null))),c1(e,n),Zi(n),null;case 5:sN(n);var i=Xc(Sp.current);if(t=n.type,e!==null&&n.stateNode!=null)Ek(e,n,t,r,i),e.ref!==n.ref&&(n.flags|=512,n.flags|=2097152);else{if(!r){if(n.stateNode===null)throw Error(Ye(166));return Zi(n),null}if(e=Xc(qo.current),m_(n)){r=n.stateNode,t=n.type;var a=n.memoizedProps;switch(r[Go]=n,r[bp]=a,e=(n.mode&1)!==0,t){case"dialog":Nr("cancel",r),Nr("close",r);break;case"iframe":case"object":case"embed":Nr("load",r);break;case"video":case"audio":for(i=0;i<Sv.length;i++)Nr(Sv[i],r);break;case"source":Nr("error",r);break;case"img":case"image":case"link":Nr("error",r),Nr("load",r);break;case"details":Nr("toggle",r);break;case"input":tA(r,a),Nr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Nr("invalid",r);break;case"textarea":rA(r,a),Nr("invalid",r)}PC(t,a),i=null;for(var s in a)if(a.hasOwnProperty(s)){var o=a[s];s==="children"?typeof o=="string"?r.textContent!==o&&(a.suppressHydrationWarning!==!0&&p_(r.textContent,o,e),i=["children",o]):typeof o=="number"&&r.textContent!==""+o&&(a.suppressHydrationWarning!==!0&&p_(r.textContent,o,e),i=["children",""+o]):dp.hasOwnProperty(s)&&o!=null&&s==="onScroll"&&Nr("scroll",r)}switch(t){case"input":o_(r),nA(r,a,!0);break;case"textarea":o_(r),iA(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=Fg)}r=i,n.updateQueue=r,r!==null&&(n.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=WU(t)),e==="http://www.w3.org/1999/xhtml"?t==="script"?(e=s.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=s.createElement(t,{is:r.is}):(e=s.createElement(t),t==="select"&&(s=e,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):e=s.createElementNS(e,t),e[Go]=n,e[bp]=r,gk(e,n,!1,!1),n.stateNode=e;e:{switch(s=FC(t,r),t){case"dialog":Nr("cancel",e),Nr("close",e),i=r;break;case"iframe":case"object":case"embed":Nr("load",e),i=r;break;case"video":case"audio":for(i=0;i<Sv.length;i++)Nr(Sv[i],e);i=r;break;case"source":Nr("error",e),i=r;break;case"img":case"image":case"link":Nr("error",e),Nr("load",e),i=r;break;case"details":Nr("toggle",e),i=r;break;case"input":tA(e,r),i=DC(e,r),Nr("invalid",e);break;case"option":i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=Hr({},r,{value:void 0}),Nr("invalid",e);break;case"textarea":rA(e,r),i=kC(e,r),Nr("invalid",e);break;default:i=r}PC(t,i),o=i;for(a in o)if(o.hasOwnProperty(a)){var l=o[a];a==="style"?XU(e,l):a==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&YU(e,l)):a==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&hp(e,l):typeof l=="number"&&hp(e,""+l):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(dp.hasOwnProperty(a)?l!=null&&a==="onScroll"&&Nr("scroll",e):l!=null&&PT(e,a,l,s))}switch(t){case"input":o_(e),nA(e,r,!1);break;case"textarea":o_(e),iA(e);break;case"option":r.value!=null&&e.setAttribute("value",""+qu(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?Dh(e,!!r.multiple,a,!1):r.defaultValue!=null&&Dh(e,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(e.onclick=Fg)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(n.flags|=4)}n.ref!==null&&(n.flags|=512,n.flags|=2097152)}return Zi(n),null;case 6:if(e&&n.stateNode!=null)yk(e,n,e.memoizedProps,r);else{if(typeof r!="string"&&n.stateNode===null)throw Error(Ye(166));if(t=Xc(Sp.current),Xc(qo.current),m_(n)){if(r=n.stateNode,t=n.memoizedProps,r[Go]=n,(a=r.nodeValue!==t)&&(e=vs,e!==null))switch(e.tag){case 3:p_(r.nodeValue,t,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&p_(r.nodeValue,t,(e.mode&1)!==0)}a&&(n.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[Go]=n,n.stateNode=r}return Zi(n),null;case 13:if(Mr(Pr),r=n.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Or&&ds!==null&&n.mode&1&&!(n.flags&128))FL(),jh(),n.flags|=98560,a=!1;else if(a=m_(n),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(Ye(318));if(a=n.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Ye(317));a[Go]=n}else jh(),!(n.flags&128)&&(n.memoizedState=null),n.flags|=4;Zi(n),a=!1}else uo!==null&&(g1(uo),uo=null),a=!0;if(!a)return n.flags&65536?n:null}return n.flags&128?(n.lanes=t,n):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(n.child.flags|=8192,n.mode&1&&(e===null||Pr.current&1?mi===0&&(mi=3):EN())),n.updateQueue!==null&&(n.flags|=4),Zi(n),null);case 4:return Kh(),c1(e,n),e===null&&Ep(n.stateNode.containerInfo),Zi(n),null;case 10:return nN(n.type._context),Zi(n),null;case 17:return Ga(n.type)&&Bg(),Zi(n),null;case 19:if(Mr(Pr),a=n.memoizedState,a===null)return Zi(n),null;if(r=(n.flags&128)!==0,s=a.rendering,s===null)if(r)ev(a,!1);else{if(mi!==0||e!==null&&e.flags&128)for(e=n.child;e!==null;){if(s=qg(e),s!==null){for(n.flags|=128,ev(a,!1),r=s.updateQueue,r!==null&&(n.updateQueue=r,n.flags|=4),n.subtreeFlags=0,r=t,t=n.child;t!==null;)a=t,e=r,a.flags&=14680066,s=a.alternate,s===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=s.childLanes,a.lanes=s.lanes,a.child=s.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=s.memoizedProps,a.memoizedState=s.memoizedState,a.updateQueue=s.updateQueue,a.type=s.type,e=s.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),t=t.sibling;return Sr(Pr,Pr.current&1|2),n.child}e=e.sibling}a.tail!==null&&ii()>Yh&&(n.flags|=128,r=!0,ev(a,!1),n.lanes=4194304)}else{if(!r)if(e=qg(s),e!==null){if(n.flags|=128,r=!0,t=e.updateQueue,t!==null&&(n.updateQueue=t,n.flags|=4),ev(a,!0),a.tail===null&&a.tailMode==="hidden"&&!s.alternate&&!Or)return Zi(n),null}else 2*ii()-a.renderingStartTime>Yh&&t!==1073741824&&(n.flags|=128,r=!0,ev(a,!1),n.lanes=4194304);a.isBackwards?(s.sibling=n.child,n.child=s):(t=a.last,t!==null?t.sibling=s:n.child=s,a.last=s)}return a.tail!==null?(n=a.tail,a.rendering=n,a.tail=n.sibling,a.renderingStartTime=ii(),n.sibling=null,t=Pr.current,Sr(Pr,r?t&1|2:t&1),n):(Zi(n),null);case 22:case 23:return gN(),r=n.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(n.flags|=8192),r&&n.mode&1?is&1073741824&&(Zi(n),n.subtreeFlags&6&&(n.flags|=8192)):Zi(n),null;case 24:return null;case 25:return null}throw Error(Ye(156,n.tag))}function mV(e,n){switch(ZT(n),n.tag){case 1:return Ga(n.type)&&Bg(),e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 3:return Kh(),Mr(Ha),Mr(ia),oN(),e=n.flags,e&65536&&!(e&128)?(n.flags=e&-65537|128,n):null;case 5:return sN(n),null;case 13:if(Mr(Pr),e=n.memoizedState,e!==null&&e.dehydrated!==null){if(n.alternate===null)throw Error(Ye(340));jh()}return e=n.flags,e&65536?(n.flags=e&-65537|128,n):null;case 19:return Mr(Pr),null;case 4:return Kh(),null;case 10:return nN(n.type._context),null;case 22:case 23:return gN(),null;case 24:return null;default:return null}}var E_=!1,ea=!1,_V=typeof WeakSet=="function"?WeakSet:Set,wt=null;function Ah(e,n){var t=e.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Kr(e,n,r)}else t.current=null}function d1(e,n,t){try{t()}catch(r){Kr(e,n,r)}}var KA=!1;function gV(e,n){if(WC=kg,e=NL(),QT(e)){if("selectionStart"in e)var t={start:e.selectionStart,end:e.selectionEnd};else e:{t=(t=e.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{t.nodeType,a.nodeType}catch{t=null;break e}var s=0,o=-1,l=-1,u=0,c=0,h=e,f=null;t:for(;;){for(var p;h!==t||i!==0&&h.nodeType!==3||(o=s+i),h!==a||r!==0&&h.nodeType!==3||(l=s+r),h.nodeType===3&&(s+=h.nodeValue.length),(p=h.firstChild)!==null;)f=h,h=p;for(;;){if(h===e)break t;if(f===t&&++u===i&&(o=s),f===a&&++c===r&&(l=s),(p=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=p}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(YC={focusedElem:e,selectionRange:t},kg=!1,wt=n;wt!==null;)if(n=wt,e=n.child,(n.subtreeFlags&1028)!==0&&e!==null)e.return=n,wt=e;else for(;wt!==null;){n=wt;try{var _=n.alternate;if(n.flags&1024)switch(n.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var g=_.memoizedProps,C=_.memoizedState,E=n.stateNode,y=E.getSnapshotBeforeUpdate(n.elementType===n.type?g:so(n.type,g),C);E.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var S=n.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ye(163))}}catch(I){Kr(n,n.return,I)}if(e=n.sibling,e!==null){e.return=n.return,wt=e;break}wt=n.return}return _=KA,KA=!1,_}function Fv(e,n,t){var r=n.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&e)===e){var a=i.destroy;i.destroy=void 0,a!==void 0&&d1(n,t,a)}i=i.next}while(i!==r)}}function Z0(e,n){if(n=n.updateQueue,n=n!==null?n.lastEffect:null,n!==null){var t=n=n.next;do{if((t.tag&e)===e){var r=t.create;t.destroy=r()}t=t.next}while(t!==n)}}function h1(e){var n=e.ref;if(n!==null){var t=e.stateNode;switch(e.tag){case 5:e=t;break;default:e=t}typeof n=="function"?n(e):n.current=e}}function bk(e){var n=e.alternate;n!==null&&(e.alternate=null,bk(n)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(n=e.stateNode,n!==null&&(delete n[Go],delete n[bp],delete n[ZC],delete n[eV],delete n[tV])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Ck(e){return e.tag===5||e.tag===3||e.tag===4}function WA(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Ck(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function f1(e,n,t){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?t.nodeType===8?t.parentNode.insertBefore(e,n):t.insertBefore(e,n):(t.nodeType===8?(n=t.parentNode,n.insertBefore(e,t)):(n=t,n.appendChild(e)),t=t._reactRootContainer,t!=null||n.onclick!==null||(n.onclick=Fg));else if(r!==4&&(e=e.child,e!==null))for(f1(e,n,t),e=e.sibling;e!==null;)f1(e,n,t),e=e.sibling}function v1(e,n,t){var r=e.tag;if(r===5||r===6)e=e.stateNode,n?t.insertBefore(e,n):t.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(v1(e,n,t),e=e.sibling;e!==null;)v1(e,n,t),e=e.sibling}var Fi=null,lo=!1;function uu(e,n,t){for(t=t.child;t!==null;)Sk(e,n,t),t=t.sibling}function Sk(e,n,t){if(jo&&typeof jo.onCommitFiberUnmount=="function")try{jo.onCommitFiberUnmount(z0,t)}catch{}switch(t.tag){case 5:ea||Ah(t,n);case 6:var r=Fi,i=lo;Fi=null,uu(e,n,t),Fi=r,lo=i,Fi!==null&&(lo?(e=Fi,t=t.stateNode,e.nodeType===8?e.parentNode.removeChild(t):e.removeChild(t)):Fi.removeChild(t.stateNode));break;case 18:Fi!==null&&(lo?(e=Fi,t=t.stateNode,e.nodeType===8?ob(e.parentNode,t):e.nodeType===1&&ob(e,t),mp(e)):ob(Fi,t.stateNode));break;case 4:r=Fi,i=lo,Fi=t.stateNode.containerInfo,lo=!0,uu(e,n,t),Fi=r,lo=i;break;case 0:case 11:case 14:case 15:if(!ea&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var a=i,s=a.destroy;a=a.tag,s!==void 0&&(a&2||a&4)&&d1(t,n,s),i=i.next}while(i!==r)}uu(e,n,t);break;case 1:if(!ea&&(Ah(t,n),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(o){Kr(t,n,o)}uu(e,n,t);break;case 21:uu(e,n,t);break;case 22:t.mode&1?(ea=(r=ea)||t.memoizedState!==null,uu(e,n,t),ea=r):uu(e,n,t);break;default:uu(e,n,t)}}function YA(e){var n=e.updateQueue;if(n!==null){e.updateQueue=null;var t=e.stateNode;t===null&&(t=e.stateNode=new _V),n.forEach(function(r){var i=MV.bind(null,e,r);t.has(r)||(t.add(r),r.then(i,i))})}}function eo(e,n){var t=n.deletions;if(t!==null)for(var r=0;r<t.length;r++){var i=t[r];try{var a=e,s=n,o=s;e:for(;o!==null;){switch(o.tag){case 5:Fi=o.stateNode,lo=!1;break e;case 3:Fi=o.stateNode.containerInfo,lo=!0;break e;case 4:Fi=o.stateNode.containerInfo,lo=!0;break e}o=o.return}if(Fi===null)throw Error(Ye(160));Sk(a,s,i),Fi=null,lo=!1;var l=i.alternate;l!==null&&(l.return=null),i.return=null}catch(u){Kr(i,n,u)}}if(n.subtreeFlags&12854)for(n=n.child;n!==null;)Tk(n,e),n=n.sibling}function Tk(e,n){var t=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(eo(n,e),Lo(e),r&4){try{Fv(3,e,e.return),Z0(3,e)}catch(g){Kr(e,e.return,g)}try{Fv(5,e,e.return)}catch(g){Kr(e,e.return,g)}}break;case 1:eo(n,e),Lo(e),r&512&&t!==null&&Ah(t,t.return);break;case 5:if(eo(n,e),Lo(e),r&512&&t!==null&&Ah(t,t.return),e.flags&32){var i=e.stateNode;try{hp(i,"")}catch(g){Kr(e,e.return,g)}}if(r&4&&(i=e.stateNode,i!=null)){var a=e.memoizedProps,s=t!==null?t.memoizedProps:a,o=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{o==="input"&&a.type==="radio"&&a.name!=null&&qU(i,a),FC(o,s);var u=FC(o,a);for(s=0;s<l.length;s+=2){var c=l[s],h=l[s+1];c==="style"?XU(i,h):c==="dangerouslySetInnerHTML"?YU(i,h):c==="children"?hp(i,h):PT(i,c,h,u)}switch(o){case"input":UC(i,a);break;case"textarea":KU(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;p!=null?Dh(i,!!a.multiple,p,!1):f!==!!a.multiple&&(a.defaultValue!=null?Dh(i,!!a.multiple,a.defaultValue,!0):Dh(i,!!a.multiple,a.multiple?[]:"",!1))}i[bp]=a}catch(g){Kr(e,e.return,g)}}break;case 6:if(eo(n,e),Lo(e),r&4){if(e.stateNode===null)throw Error(Ye(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(g){Kr(e,e.return,g)}}break;case 3:if(eo(n,e),Lo(e),r&4&&t!==null&&t.memoizedState.isDehydrated)try{mp(n.containerInfo)}catch(g){Kr(e,e.return,g)}break;case 4:eo(n,e),Lo(e);break;case 13:eo(n,e),Lo(e),i=e.child,i.flags&8192&&(a=i.memoizedState!==null,i.stateNode.isHidden=a,!a||i.alternate!==null&&i.alternate.memoizedState!==null||(mN=ii())),r&4&&YA(e);break;case 22:if(c=t!==null&&t.memoizedState!==null,e.mode&1?(ea=(u=ea)||c,eo(n,e),ea=u):eo(n,e),Lo(e),r&8192){if(u=e.memoizedState!==null,(e.stateNode.isHidden=u)&&!c&&e.mode&1)for(wt=e,c=e.child;c!==null;){for(h=wt=c;wt!==null;){switch(f=wt,p=f.child,f.tag){case 0:case 11:case 14:case 15:Fv(4,f,f.return);break;case 1:Ah(f,f.return);var _=f.stateNode;if(typeof _.componentWillUnmount=="function"){r=f,t=f.return;try{n=r,_.props=n.memoizedProps,_.state=n.memoizedState,_.componentWillUnmount()}catch(g){Kr(r,t,g)}}break;case 5:Ah(f,f.return);break;case 22:if(f.memoizedState!==null){XA(h);continue}}p!==null?(p.return=f,wt=p):XA(h)}c=c.sibling}e:for(c=null,h=e;;){if(h.tag===5){if(c===null){c=h;try{i=h.stateNode,u?(a=i.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(o=h.stateNode,l=h.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=QU("display",s))}catch(g){Kr(e,e.return,g)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Kr(e,e.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===e)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===e)break e;for(;h.sibling===null;){if(h.return===null||h.return===e)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:eo(n,e),Lo(e),r&4&&YA(e);break;case 21:break;default:eo(n,e),Lo(e)}}function Lo(e){var n=e.flags;if(n&2){try{e:{for(var t=e.return;t!==null;){if(Ck(t)){var r=t;break e}t=t.return}throw Error(Ye(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(hp(i,""),r.flags&=-33);var a=WA(e);v1(e,a,i);break;case 3:case 4:var s=r.stateNode.containerInfo,o=WA(e);f1(e,o,s);break;default:throw Error(Ye(161))}}catch(l){Kr(e,e.return,l)}e.flags&=-3}n&4096&&(e.flags&=-4097)}function EV(e,n,t){wt=e,Nk(e)}function Nk(e,n,t){for(var r=(e.mode&1)!==0;wt!==null;){var i=wt,a=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||E_;if(!s){var o=i.alternate,l=o!==null&&o.memoizedState!==null||ea;o=E_;var u=ea;if(E_=s,(ea=l)&&!u)for(wt=i;wt!==null;)s=wt,l=s.child,s.tag===22&&s.memoizedState!==null?ZA(i):l!==null?(l.return=s,wt=l):ZA(i);for(;a!==null;)wt=a,Nk(a),a=a.sibling;wt=i,E_=o,ea=u}QA(e)}else i.subtreeFlags&8772&&a!==null?(a.return=i,wt=a):QA(e)}}function QA(e){for(;wt!==null;){var n=wt;if(n.flags&8772){var t=n.alternate;try{if(n.flags&8772)switch(n.tag){case 0:case 11:case 15:ea||Z0(5,n);break;case 1:var r=n.stateNode;if(n.flags&4&&!ea)if(t===null)r.componentDidMount();else{var i=n.elementType===n.type?t.memoizedProps:so(n.type,t.memoizedProps);r.componentDidUpdate(i,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=n.updateQueue;a!==null&&LA(n,a,r);break;case 3:var s=n.updateQueue;if(s!==null){if(t=null,n.child!==null)switch(n.child.tag){case 5:t=n.child.stateNode;break;case 1:t=n.child.stateNode}LA(n,s,t)}break;case 5:var o=n.stateNode;if(t===null&&n.flags&4){t=o;var l=n.memoizedProps;switch(n.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(n.memoizedState===null){var u=n.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&mp(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ye(163))}ea||n.flags&512&&h1(n)}catch(f){Kr(n,n.return,f)}}if(n===e){wt=null;break}if(t=n.sibling,t!==null){t.return=n.return,wt=t;break}wt=n.return}}function XA(e){for(;wt!==null;){var n=wt;if(n===e){wt=null;break}var t=n.sibling;if(t!==null){t.return=n.return,wt=t;break}wt=n.return}}function ZA(e){for(;wt!==null;){var n=wt;try{switch(n.tag){case 0:case 11:case 15:var t=n.return;try{Z0(4,n)}catch(l){Kr(n,t,l)}break;case 1:var r=n.stateNode;if(typeof r.componentDidMount=="function"){var i=n.return;try{r.componentDidMount()}catch(l){Kr(n,i,l)}}var a=n.return;try{h1(n)}catch(l){Kr(n,a,l)}break;case 5:var s=n.return;try{h1(n)}catch(l){Kr(n,s,l)}}}catch(l){Kr(n,n.return,l)}if(n===e){wt=null;break}var o=n.sibling;if(o!==null){o.return=n.return,wt=o;break}wt=n.return}}var yV=Math.ceil,Yg=ql.ReactCurrentDispatcher,vN=ql.ReactCurrentOwner,Gs=ql.ReactCurrentBatchConfig,Yn=0,wi=null,ui=null,zi=0,is=0,wh=ec(0),mi=0,Mp=null,md=0,J0=0,pN=0,Bv=null,ka=null,mN=0,Yh=1/0,ml=null,Qg=!1,p1=null,xu=null,y_=!1,Mu=null,Xg=0,Hv=0,m1=null,dg=-1,hg=0;function va(){return Yn&6?ii():dg!==-1?dg:dg=ii()}function Pu(e){return e.mode&1?Yn&2&&zi!==0?zi&-zi:rV.transition!==null?(hg===0&&(hg=uL()),hg):(e=fr,e!==0||(e=window.event,e=e===void 0?16:mL(e.type)),e):1}function _o(e,n,t,r){if(50<Hv)throw Hv=0,m1=null,Error(Ye(185));Yp(e,t,r),(!(Yn&2)||e!==wi)&&(e===wi&&(!(Yn&2)&&(J0|=t),mi===4&&Su(e,zi)),$a(e,r),t===1&&Yn===0&&!(n.mode&1)&&(Yh=ii()+500,Y0&&tc()))}function $a(e,n){var t=e.callbackNode;r9(e,n);var r=Lg(e,e===wi?zi:0);if(r===0)t!==null&&oA(t),e.callbackNode=null,e.callbackPriority=0;else if(n=r&-r,e.callbackPriority!==n){if(t!=null&&oA(t),n===1)e.tag===0?nV(JA.bind(null,e)):kL(JA.bind(null,e)),Z9(function(){!(Yn&6)&&tc()}),t=null;else{switch(cL(r)){case 1:t=$T;break;case 4:t=oL;break;case 16:t=Ug;break;case 536870912:t=lL;break;default:t=Ug}t=Uk(t,Ik.bind(null,e))}e.callbackPriority=n,e.callbackNode=t}}function Ik(e,n){if(dg=-1,hg=0,Yn&6)throw Error(Ye(327));var t=e.callbackNode;if(Ph()&&e.callbackNode!==t)return null;var r=Lg(e,e===wi?zi:0);if(r===0)return null;if(r&30||r&e.expiredLanes||n)n=Zg(e,r);else{n=r;var i=Yn;Yn|=2;var a=Ak();(wi!==e||zi!==n)&&(ml=null,Yh=ii()+500,sd(e,n));do try{SV();break}catch(o){Mk(e,o)}while(!0);tN(),Yg.current=a,Yn=i,ui!==null?n=0:(wi=null,zi=0,n=mi)}if(n!==0){if(n===2&&(i=VC(e),i!==0&&(r=i,n=_1(e,i))),n===1)throw t=Mp,sd(e,0),Su(e,r),$a(e,ii()),t;if(n===6)Su(e,r);else{if(i=e.current.alternate,!(r&30)&&!bV(i)&&(n=Zg(e,r),n===2&&(a=VC(e),a!==0&&(r=a,n=_1(e,a))),n===1))throw t=Mp,sd(e,0),Su(e,r),$a(e,ii()),t;switch(e.finishedWork=i,e.finishedLanes=r,n){case 0:case 1:throw Error(Ye(345));case 2:kc(e,ka,ml);break;case 3:if(Su(e,r),(r&130023424)===r&&(n=mN+500-ii(),10<n)){if(Lg(e,0)!==0)break;if(i=e.suspendedLanes,(i&r)!==r){va(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=XC(kc.bind(null,e,ka,ml),n);break}kc(e,ka,ml);break;case 4:if(Su(e,r),(r&4194240)===r)break;for(n=e.eventTimes,i=-1;0<r;){var s=31-mo(r);a=1<<s,s=n[s],s>i&&(i=s),r&=~a}if(r=i,r=ii()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*yV(r/1960))-r,10<r){e.timeoutHandle=XC(kc.bind(null,e,ka,ml),r);break}kc(e,ka,ml);break;case 5:kc(e,ka,ml);break;default:throw Error(Ye(329))}}}return $a(e,ii()),e.callbackNode===t?Ik.bind(null,e):null}function _1(e,n){var t=Bv;return e.current.memoizedState.isDehydrated&&(sd(e,n).flags|=256),e=Zg(e,n),e!==2&&(n=ka,ka=t,n!==null&&g1(n)),e}function g1(e){ka===null?ka=e:ka.push.apply(ka,e)}function bV(e){for(var n=e;;){if(n.flags&16384){var t=n.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var i=t[r],a=i.getSnapshot;i=i.value;try{if(!Eo(a(),i))return!1}catch{return!1}}}if(t=n.child,n.subtreeFlags&16384&&t!==null)t.return=n,n=t;else{if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return!0;n=n.return}n.sibling.return=n.return,n=n.sibling}}return!0}function Su(e,n){for(n&=~pN,n&=~J0,e.suspendedLanes|=n,e.pingedLanes&=~n,e=e.expirationTimes;0<n;){var t=31-mo(n),r=1<<t;e[t]=-1,n&=~r}}function JA(e){if(Yn&6)throw Error(Ye(327));Ph();var n=Lg(e,0);if(!(n&1))return $a(e,ii()),null;var t=Zg(e,n);if(e.tag!==0&&t===2){var r=VC(e);r!==0&&(n=r,t=_1(e,r))}if(t===1)throw t=Mp,sd(e,0),Su(e,n),$a(e,ii()),t;if(t===6)throw Error(Ye(345));return e.finishedWork=e.current.alternate,e.finishedLanes=n,kc(e,ka,ml),$a(e,ii()),null}function _N(e,n){var t=Yn;Yn|=1;try{return e(n)}finally{Yn=t,Yn===0&&(Yh=ii()+500,Y0&&tc())}}function _d(e){Mu!==null&&Mu.tag===0&&!(Yn&6)&&Ph();var n=Yn;Yn|=1;var t=Gs.transition,r=fr;try{if(Gs.transition=null,fr=1,e)return e()}finally{fr=r,Gs.transition=t,Yn=n,!(Yn&6)&&tc()}}function gN(){is=wh.current,Mr(wh)}function sd(e,n){e.finishedWork=null,e.finishedLanes=0;var t=e.timeoutHandle;if(t!==-1&&(e.timeoutHandle=-1,X9(t)),ui!==null)for(t=ui.return;t!==null;){var r=t;switch(ZT(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Bg();break;case 3:Kh(),Mr(Ha),Mr(ia),oN();break;case 5:sN(r);break;case 4:Kh();break;case 13:Mr(Pr);break;case 19:Mr(Pr);break;case 10:nN(r.type._context);break;case 22:case 23:gN()}t=t.return}if(wi=e,ui=e=Fu(e.current,null),zi=is=n,mi=0,Mp=null,pN=J0=md=0,ka=Bv=null,Qc!==null){for(n=0;n<Qc.length;n++)if(t=Qc[n],r=t.interleaved,r!==null){t.interleaved=null;var i=r.next,a=t.pending;if(a!==null){var s=a.next;a.next=i,r.next=s}t.pending=r}Qc=null}return e}function Mk(e,n){do{var t=ui;try{if(tN(),lg.current=Wg,Kg){for(var r=Br.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Kg=!1}if(pd=0,Ti=fi=Br=null,Pv=!1,Tp=0,vN.current=null,t===null||t.return===null){mi=1,Mp=n,ui=null;break}e:{var a=e,s=t.return,o=t,l=n;if(n=zi,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var p=HA(s);if(p!==null){p.flags&=-257,GA(p,s,o,a,n),p.mode&1&&BA(a,u,n),n=p,l=u;var _=n.updateQueue;if(_===null){var g=new Set;g.add(l),n.updateQueue=g}else _.add(l);break e}else{if(!(n&1)){BA(a,u,n),EN();break e}l=Error(Ye(426))}}else if(Or&&o.mode&1){var C=HA(s);if(C!==null){!(C.flags&65536)&&(C.flags|=256),GA(C,s,o,a,n),JT(Wh(l,o));break e}}a=l=Wh(l,o),mi!==4&&(mi=2),Bv===null?Bv=[a]:Bv.push(a),a=s;do{switch(a.tag){case 3:a.flags|=65536,n&=-n,a.lanes|=n;var E=ck(a,l,n);UA(a,E);break e;case 1:o=l;var y=a.type,S=a.stateNode;if(!(a.flags&128)&&(typeof y.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(xu===null||!xu.has(S)))){a.flags|=65536,n&=-n,a.lanes|=n;var I=dk(a,o,n);UA(a,I);break e}}a=a.return}while(a!==null)}Rk(t)}catch(w){n=w,ui===t&&t!==null&&(ui=t=t.return);continue}break}while(!0)}function Ak(){var e=Yg.current;return Yg.current=Wg,e===null?Wg:e}function EN(){(mi===0||mi===3||mi===2)&&(mi=4),wi===null||!(md&268435455)&&!(J0&268435455)||Su(wi,zi)}function Zg(e,n){var t=Yn;Yn|=2;var r=Ak();(wi!==e||zi!==n)&&(ml=null,sd(e,n));do try{CV();break}catch(i){Mk(e,i)}while(!0);if(tN(),Yn=t,Yg.current=r,ui!==null)throw Error(Ye(261));return wi=null,zi=0,mi}function CV(){for(;ui!==null;)wk(ui)}function SV(){for(;ui!==null&&!W$();)wk(ui)}function wk(e){var n=Dk(e.alternate,e,is);e.memoizedProps=e.pendingProps,n===null?Rk(e):ui=n,vN.current=null}function Rk(e){var n=e;do{var t=n.alternate;if(e=n.return,n.flags&32768){if(t=mV(t,n),t!==null){t.flags&=32767,ui=t;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{mi=6,ui=null;return}}else if(t=pV(t,n,is),t!==null){ui=t;return}if(n=n.sibling,n!==null){ui=n;return}ui=n=e}while(n!==null);mi===0&&(mi=5)}function kc(e,n,t){var r=fr,i=Gs.transition;try{Gs.transition=null,fr=1,TV(e,n,t,r)}finally{Gs.transition=i,fr=r}return null}function TV(e,n,t,r){do Ph();while(Mu!==null);if(Yn&6)throw Error(Ye(327));t=e.finishedWork;var i=e.finishedLanes;if(t===null)return null;if(e.finishedWork=null,e.finishedLanes=0,t===e.current)throw Error(Ye(177));e.callbackNode=null,e.callbackPriority=0;var a=t.lanes|t.childLanes;if(i9(e,a),e===wi&&(ui=wi=null,zi=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||y_||(y_=!0,Uk(Ug,function(){return Ph(),null})),a=(t.flags&15990)!==0,t.subtreeFlags&15990||a){a=Gs.transition,Gs.transition=null;var s=fr;fr=1;var o=Yn;Yn|=4,vN.current=null,gV(e,t),Tk(t,e),z9(YC),kg=!!WC,YC=WC=null,e.current=t,EV(t),Y$(),Yn=o,fr=s,Gs.transition=a}else e.current=t;if(y_&&(y_=!1,Mu=e,Xg=i),a=e.pendingLanes,a===0&&(xu=null),Z$(t.stateNode),$a(e,ii()),n!==null)for(r=e.onRecoverableError,t=0;t<n.length;t++)i=n[t],r(i.value,{componentStack:i.stack,digest:i.digest});if(Qg)throw Qg=!1,e=p1,p1=null,e;return Xg&1&&e.tag!==0&&Ph(),a=e.pendingLanes,a&1?e===m1?Hv++:(Hv=0,m1=e):Hv=0,tc(),null}function Ph(){if(Mu!==null){var e=cL(Xg),n=Gs.transition,t=fr;try{if(Gs.transition=null,fr=16>e?16:e,Mu===null)var r=!1;else{if(e=Mu,Mu=null,Xg=0,Yn&6)throw Error(Ye(331));var i=Yn;for(Yn|=4,wt=e.current;wt!==null;){var a=wt,s=a.child;if(wt.flags&16){var o=a.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(wt=u;wt!==null;){var c=wt;switch(c.tag){case 0:case 11:case 15:Fv(8,c,a)}var h=c.child;if(h!==null)h.return=c,wt=h;else for(;wt!==null;){c=wt;var f=c.sibling,p=c.return;if(bk(c),c===u){wt=null;break}if(f!==null){f.return=p,wt=f;break}wt=p}}}var _=a.alternate;if(_!==null){var g=_.child;if(g!==null){_.child=null;do{var C=g.sibling;g.sibling=null,g=C}while(g!==null)}}wt=a}}if(a.subtreeFlags&2064&&s!==null)s.return=a,wt=s;else e:for(;wt!==null;){if(a=wt,a.flags&2048)switch(a.tag){case 0:case 11:case 15:Fv(9,a,a.return)}var E=a.sibling;if(E!==null){E.return=a.return,wt=E;break e}wt=a.return}}var y=e.current;for(wt=y;wt!==null;){s=wt;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,wt=S;else e:for(s=y;wt!==null;){if(o=wt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Z0(9,o)}}catch(w){Kr(o,o.return,w)}if(o===s){wt=null;break e}var I=o.sibling;if(I!==null){I.return=o.return,wt=I;break e}wt=o.return}}if(Yn=i,tc(),jo&&typeof jo.onPostCommitFiberRoot=="function")try{jo.onPostCommitFiberRoot(z0,e)}catch{}r=!0}return r}finally{fr=t,Gs.transition=n}}return!1}function ew(e,n,t){n=Wh(t,n),n=ck(e,n,1),e=ku(e,n,1),n=va(),e!==null&&(Yp(e,1,n),$a(e,n))}function Kr(e,n,t){if(e.tag===3)ew(e,e,t);else for(;n!==null;){if(n.tag===3){ew(n,e,t);break}else if(n.tag===1){var r=n.stateNode;if(typeof n.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(xu===null||!xu.has(r))){e=Wh(t,e),e=dk(n,e,1),n=ku(n,e,1),e=va(),n!==null&&(Yp(n,1,e),$a(n,e));break}}n=n.return}}function NV(e,n,t){var r=e.pingCache;r!==null&&r.delete(n),n=va(),e.pingedLanes|=e.suspendedLanes&t,wi===e&&(zi&t)===t&&(mi===4||mi===3&&(zi&130023424)===zi&&500>ii()-mN?sd(e,0):pN|=t),$a(e,n)}function Ok(e,n){n===0&&(e.mode&1?(n=c_,c_<<=1,!(c_&130023424)&&(c_=4194304)):n=1);var t=va();e=Hl(e,n),e!==null&&(Yp(e,n,t),$a(e,t))}function IV(e){var n=e.memoizedState,t=0;n!==null&&(t=n.retryLane),Ok(e,t)}function MV(e,n){var t=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;i!==null&&(t=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Ye(314))}r!==null&&r.delete(n),Ok(e,t)}var Dk;Dk=function(e,n,t){if(e!==null)if(e.memoizedProps!==n.pendingProps||Ha.current)Ba=!0;else{if(!(e.lanes&t)&&!(n.flags&128))return Ba=!1,vV(e,n,t);Ba=!!(e.flags&131072)}else Ba=!1,Or&&n.flags&1048576&&xL(n,$g,n.index);switch(n.lanes=0,n.tag){case 2:var r=n.type;cg(e,n),e=n.pendingProps;var i=zh(n,ia.current);xh(n,t),i=uN(null,n,r,e,i,t);var a=cN();return n.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(n.tag=1,n.memoizedState=null,n.updateQueue=null,Ga(r)?(a=!0,Hg(n)):a=!1,n.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,iN(n),i.updater=X0,n.stateNode=i,i._reactInternals=n,i1(n,r,e,t),n=o1(null,n,r,!0,a,t)):(n.tag=0,Or&&a&&XT(n),ha(null,n,i,t),n=n.child),n;case 16:r=n.elementType;e:{switch(cg(e,n),e=n.pendingProps,i=r._init,r=i(r._payload),n.type=r,i=n.tag=wV(r),e=so(r,e),i){case 0:n=s1(null,n,r,e,t);break e;case 1:n=zA(null,n,r,e,t);break e;case 11:n=$A(null,n,r,e,t);break e;case 14:n=VA(null,n,r,so(r.type,e),t);break e}throw Error(Ye(306,r,""))}return n;case 0:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:so(r,i),s1(e,n,r,i,t);case 1:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:so(r,i),zA(e,n,r,i,t);case 3:e:{if(pk(n),e===null)throw Error(Ye(387));r=n.pendingProps,a=n.memoizedState,i=a.element,$L(e,n),jg(n,r,null,t);var s=n.memoizedState;if(r=s.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},n.updateQueue.baseState=a,n.memoizedState=a,n.flags&256){i=Wh(Error(Ye(423)),n),n=jA(e,n,r,t,i);break e}else if(r!==i){i=Wh(Error(Ye(424)),n),n=jA(e,n,r,t,i);break e}else for(ds=Lu(n.stateNode.containerInfo.firstChild),vs=n,Or=!0,uo=null,t=HL(n,null,r,t),n.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(jh(),r===i){n=Gl(e,n,t);break e}ha(e,n,r,t)}n=n.child}return n;case 5:return VL(n),e===null&&t1(n),r=n.type,i=n.pendingProps,a=e!==null?e.memoizedProps:null,s=i.children,QC(r,i)?s=null:a!==null&&QC(r,a)&&(n.flags|=32),vk(e,n),ha(e,n,s,t),n.child;case 6:return e===null&&t1(n),null;case 13:return mk(e,n,t);case 4:return aN(n,n.stateNode.containerInfo),r=n.pendingProps,e===null?n.child=qh(n,null,r,t):ha(e,n,r,t),n.child;case 11:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:so(r,i),$A(e,n,r,i,t);case 7:return ha(e,n,n.pendingProps,t),n.child;case 8:return ha(e,n,n.pendingProps.children,t),n.child;case 12:return ha(e,n,n.pendingProps.children,t),n.child;case 10:e:{if(r=n.type._context,i=n.pendingProps,a=n.memoizedProps,s=i.value,Sr(Vg,r._currentValue),r._currentValue=s,a!==null)if(Eo(a.value,s)){if(a.children===i.children&&!Ha.current){n=Gl(e,n,t);break e}}else for(a=n.child,a!==null&&(a.return=n);a!==null;){var o=a.dependencies;if(o!==null){s=a.child;for(var l=o.firstContext;l!==null;){if(l.context===r){if(a.tag===1){l=Ul(-1,t&-t),l.tag=2;var u=a.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}a.lanes|=t,l=a.alternate,l!==null&&(l.lanes|=t),n1(a.return,t,n),o.lanes|=t;break}l=l.next}}else if(a.tag===10)s=a.type===n.type?null:a.child;else if(a.tag===18){if(s=a.return,s===null)throw Error(Ye(341));s.lanes|=t,o=s.alternate,o!==null&&(o.lanes|=t),n1(s,t,n),s=a.sibling}else s=a.child;if(s!==null)s.return=a;else for(s=a;s!==null;){if(s===n){s=null;break}if(a=s.sibling,a!==null){a.return=s.return,s=a;break}s=s.return}a=s}ha(e,n,i.children,t),n=n.child}return n;case 9:return i=n.type,r=n.pendingProps.children,xh(n,t),i=$s(i),r=r(i),n.flags|=1,ha(e,n,r,t),n.child;case 14:return r=n.type,i=so(r,n.pendingProps),i=so(r.type,i),VA(e,n,r,i,t);case 15:return hk(e,n,n.type,n.pendingProps,t);case 17:return r=n.type,i=n.pendingProps,i=n.elementType===r?i:so(r,i),cg(e,n),n.tag=1,Ga(r)?(e=!0,Hg(n)):e=!1,xh(n,t),uk(n,r,i),i1(n,r,i,t),o1(null,n,r,!0,e,t);case 19:return _k(e,n,t);case 22:return fk(e,n,t)}throw Error(Ye(156,n.tag))};function Uk(e,n){return sL(e,n)}function AV(e,n,t,r){this.tag=e,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=n,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Bs(e,n,t,r){return new AV(e,n,t,r)}function yN(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wV(e){if(typeof e=="function")return yN(e)?1:0;if(e!=null){if(e=e.$$typeof,e===BT)return 11;if(e===HT)return 14}return 2}function Fu(e,n){var t=e.alternate;return t===null?(t=Bs(e.tag,n,e.key,e.mode),t.elementType=e.elementType,t.type=e.type,t.stateNode=e.stateNode,t.alternate=e,e.alternate=t):(t.pendingProps=n,t.type=e.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=e.flags&14680064,t.childLanes=e.childLanes,t.lanes=e.lanes,t.child=e.child,t.memoizedProps=e.memoizedProps,t.memoizedState=e.memoizedState,t.updateQueue=e.updateQueue,n=e.dependencies,t.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext},t.sibling=e.sibling,t.index=e.index,t.ref=e.ref,t}function fg(e,n,t,r,i,a){var s=2;if(r=e,typeof e=="function")yN(e)&&(s=1);else if(typeof e=="string")s=5;else e:switch(e){case Eh:return od(t.children,i,a,n);case FT:s=8,i|=8;break;case AC:return e=Bs(12,t,n,i|2),e.elementType=AC,e.lanes=a,e;case wC:return e=Bs(13,t,n,i),e.elementType=wC,e.lanes=a,e;case RC:return e=Bs(19,t,n,i),e.elementType=RC,e.lanes=a,e;case VU:return eE(t,i,a,n);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case GU:s=10;break e;case $U:s=9;break e;case BT:s=11;break e;case HT:s=14;break e;case _u:s=16,r=null;break e}throw Error(Ye(130,e==null?e:typeof e,""))}return n=Bs(s,t,n,i),n.elementType=e,n.type=r,n.lanes=a,n}function od(e,n,t,r){return e=Bs(7,e,r,n),e.lanes=t,e}function eE(e,n,t,r){return e=Bs(22,e,r,n),e.elementType=VU,e.lanes=t,e.stateNode={isHidden:!1},e}function pb(e,n,t){return e=Bs(6,e,null,n),e.lanes=t,e}function mb(e,n,t){return n=Bs(4,e.children!==null?e.children:[],e.key,n),n.lanes=t,n.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},n}function RV(e,n,t,r,i){this.tag=n,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qy(0),this.expirationTimes=Qy(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qy(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bN(e,n,t,r,i,a,s,o,l){return e=new RV(e,n,t,o,l),n===1?(n=1,a===!0&&(n|=8)):n=0,a=Bs(3,null,null,n),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},iN(a),e}function OV(e,n,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gh,key:r==null?null:""+r,children:e,containerInfo:n,implementation:t}}function Lk(e){if(!e)return Ku;e=e._reactInternals;e:{if(Rd(e)!==e||e.tag!==1)throw Error(Ye(170));var n=e;do{switch(n.tag){case 3:n=n.stateNode.context;break e;case 1:if(Ga(n.type)){n=n.stateNode.__reactInternalMemoizedMergedChildContext;break e}}n=n.return}while(n!==null);throw Error(Ye(171))}if(e.tag===1){var t=e.type;if(Ga(t))return LL(e,t,n)}return n}function kk(e,n,t,r,i,a,s,o,l){return e=bN(t,r,!0,e,i,a,s,o,l),e.context=Lk(null),t=e.current,r=va(),i=Pu(t),a=Ul(r,i),a.callback=n??null,ku(t,a,i),e.current.lanes=i,Yp(e,i,r),$a(e,r),e}function tE(e,n,t,r){var i=n.current,a=va(),s=Pu(i);return t=Lk(t),n.context===null?n.context=t:n.pendingContext=t,n=Ul(a,s),n.payload={element:e},r=r===void 0?null:r,r!==null&&(n.callback=r),e=ku(i,n,s),e!==null&&(_o(e,i,s,a),og(e,i,s)),s}function Jg(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function tw(e,n){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var t=e.retryLane;e.retryLane=t!==0&&t<n?t:n}}function CN(e,n){tw(e,n),(e=e.alternate)&&tw(e,n)}function DV(){return null}var xk=typeof reportError=="function"?reportError:function(e){console.error(e)};function SN(e){this._internalRoot=e}nE.prototype.render=SN.prototype.render=function(e){var n=this._internalRoot;if(n===null)throw Error(Ye(409));tE(e,n,null,null)};nE.prototype.unmount=SN.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var n=e.containerInfo;_d(function(){tE(null,e,null,null)}),n[Bl]=null}};function nE(e){this._internalRoot=e}nE.prototype.unstable_scheduleHydration=function(e){if(e){var n=fL();e={blockedOn:null,target:e,priority:n};for(var t=0;t<Cu.length&&n!==0&&n<Cu[t].priority;t++);Cu.splice(t,0,e),t===0&&pL(e)}};function TN(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function rE(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function nw(){}function UV(e,n,t,r,i){if(i){if(typeof r=="function"){var a=r;r=function(){var u=Jg(s);a.call(u)}}var s=kk(n,r,e,0,null,!1,!1,"",nw);return e._reactRootContainer=s,e[Bl]=s.current,Ep(e.nodeType===8?e.parentNode:e),_d(),s}for(;i=e.lastChild;)e.removeChild(i);if(typeof r=="function"){var o=r;r=function(){var u=Jg(l);o.call(u)}}var l=bN(e,0,!1,null,null,!1,!1,"",nw);return e._reactRootContainer=l,e[Bl]=l.current,Ep(e.nodeType===8?e.parentNode:e),_d(function(){tE(n,l,t,r)}),l}function iE(e,n,t,r,i){var a=t._reactRootContainer;if(a){var s=a;if(typeof i=="function"){var o=i;i=function(){var l=Jg(s);o.call(l)}}tE(n,s,e,i)}else s=UV(t,n,e,i,r);return Jg(s)}dL=function(e){switch(e.tag){case 3:var n=e.stateNode;if(n.current.memoizedState.isDehydrated){var t=Cv(n.pendingLanes);t!==0&&(VT(n,t|1),$a(n,ii()),!(Yn&6)&&(Yh=ii()+500,tc()))}break;case 13:_d(function(){var r=Hl(e,1);if(r!==null){var i=va();_o(r,e,1,i)}}),CN(e,1)}};zT=function(e){if(e.tag===13){var n=Hl(e,134217728);if(n!==null){var t=va();_o(n,e,134217728,t)}CN(e,134217728)}};hL=function(e){if(e.tag===13){var n=Pu(e),t=Hl(e,n);if(t!==null){var r=va();_o(t,e,n,r)}CN(e,n)}};fL=function(){return fr};vL=function(e,n){var t=fr;try{return fr=e,n()}finally{fr=t}};HC=function(e,n,t){switch(n){case"input":if(UC(e,t),n=t.name,t.type==="radio"&&n!=null){for(t=e;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+n)+'][type="radio"]'),n=0;n<t.length;n++){var r=t[n];if(r!==e&&r.form===e.form){var i=W0(r);if(!i)throw Error(Ye(90));jU(r),UC(r,i)}}}break;case"textarea":KU(e,t);break;case"select":n=t.value,n!=null&&Dh(e,!!t.multiple,n,!1)}};eL=_N;tL=_d;var LV={usingClientEntryPoint:!1,Events:[Xp,Sh,W0,ZU,JU,_N]},tv={findFiberByHostInstance:Yc,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},kV={bundleType:tv.bundleType,version:tv.version,rendererPackageName:tv.rendererPackageName,rendererConfig:tv.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ql.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=iL(e),e===null?null:e.stateNode},findFiberByHostInstance:tv.findFiberByHostInstance||DV,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var b_=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!b_.isDisabled&&b_.supportsFiber)try{z0=b_.inject(kV),jo=b_}catch{}}ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=LV;ys.createPortal=function(e,n){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!TN(n))throw Error(Ye(200));return OV(e,n,null,t)};ys.createRoot=function(e,n){if(!TN(e))throw Error(Ye(299));var t=!1,r="",i=xk;return n!=null&&(n.unstable_strictMode===!0&&(t=!0),n.identifierPrefix!==void 0&&(r=n.identifierPrefix),n.onRecoverableError!==void 0&&(i=n.onRecoverableError)),n=bN(e,1,!1,null,null,t,!1,r,i),e[Bl]=n.current,Ep(e.nodeType===8?e.parentNode:e),new SN(n)};ys.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var n=e._reactInternals;if(n===void 0)throw typeof e.render=="function"?Error(Ye(188)):(e=Object.keys(e).join(","),Error(Ye(268,e)));return e=iL(n),e=e===null?null:e.stateNode,e};ys.flushSync=function(e){return _d(e)};ys.hydrate=function(e,n,t){if(!rE(n))throw Error(Ye(200));return iE(null,e,n,!0,t)};ys.hydrateRoot=function(e,n,t){if(!TN(e))throw Error(Ye(405));var r=t!=null&&t.hydratedSources||null,i=!1,a="",s=xk;if(t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(a=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),n=kk(n,null,e,1,t??null,i,!1,a,s),e[Bl]=n.current,Ep(e),r)for(e=0;e<r.length;e++)t=r[e],i=t._getVersion,i=i(t._source),n.mutableSourceEagerHydrationData==null?n.mutableSourceEagerHydrationData=[t,i]:n.mutableSourceEagerHydrationData.push(t,i);return new nE(n)};ys.render=function(e,n,t){if(!rE(n))throw Error(Ye(200));return iE(null,e,n,!1,t)};ys.unmountComponentAtNode=function(e){if(!rE(e))throw Error(Ye(40));return e._reactRootContainer?(_d(function(){iE(null,null,e,!1,function(){e._reactRootContainer=null,e[Bl]=null})}),!0):!1};ys.unstable_batchedUpdates=_N;ys.unstable_renderSubtreeIntoContainer=function(e,n,t,r){if(!rE(t))throw Error(Ye(200));if(e==null||e._reactInternals===void 0)throw Error(Ye(38));return iE(e,n,t,!1,r)};ys.version="18.3.1-next-f1338f8080-20240426";function Pk(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Pk)}catch(e){console.error(e)}}Pk(),PU.exports=ys;var Od=PU.exports,Fk,rw=Od;Fk=rw.createRoot,rw.hydrateRoot;const xV="_container_1n8k8_1",PV="_card_1n8k8_10",FV="_header_1n8k8_19",BV="_title_1n8k8_24",HV="_subtitle_1n8k8_32",GV="_form_1n8k8_38",$V="_label_1n8k8_50",VV="_input_1n8k8_44",zV="_button_1n8k8_74",jV="_info_1n8k8_96",qV="_dualMode_1n8k8_123",KV="_divider_1n8k8_127",WV="_dualButton_1n8k8_147",YV="_dualInfo_1n8k8_165",QV="_field_1n8k8_172",yi={container:xV,card:PV,header:FV,title:BV,subtitle:HV,form:GV,label:$V,input:VV,button:zV,info:jV,dualMode:qV,divider:KV,dualButton:WV,dualInfo:YV,field:QV};function XV({onLogin:e,onDualMode:n}){const[t,r]=M.useState(""),[i,a]=M.useState(""),[s,o]=M.useState(!1),l=async u=>{u.preventDefault(),!(!t.trim()||!i.trim())&&(o(!0),setTimeout(()=>{e({userId:t.trim(),nickname:i.trim()}),o(!1)},500))};return de.jsx("div",{className:yi.container,children:de.jsxs("div",{className:yi.card,children:[de.jsxs("div",{className:yi.header,children:[de.jsx("h1",{className:yi.title,children:" Zigbang Chat Debug"}),de.jsx("p",{className:yi.subtitle,children:"Sendbird  "})]}),de.jsxs("form",{onSubmit:l,className:yi.form,children:[de.jsxs("div",{className:yi.field,children:[de.jsx("label",{htmlFor:"userId",className:yi.label,children:"User ID"}),de.jsx("input",{id:"userId",type:"text",value:t,onChange:u=>r(u.target.value),placeholder:"test_user",className:yi.input,disabled:s,autoComplete:"off"})]}),de.jsxs("div",{className:yi.field,children:[de.jsx("label",{htmlFor:"nickname",className:yi.label,children:""}),de.jsx("input",{id:"nickname",type:"text",value:i,onChange:u=>a(u.target.value),placeholder:"",className:yi.input,disabled:s,autoComplete:"off"})]}),de.jsx("button",{type:"submit",className:yi.button,disabled:s||!t.trim()||!i.trim(),children:s?" ...":""})]}),de.jsx("div",{className:yi.info,children:de.jsx("p",{children:" zigbang  Sendbird APP_ID "})}),n&&de.jsxs("div",{className:yi.dualMode,children:[de.jsx("div",{className:yi.divider,children:de.jsx("span",{children:""})}),de.jsx("button",{type:"button",onClick:n,className:yi.dualButton,children:"    (A  B )"}),de.jsx("p",{className:yi.dualInfo,children:"     "})]})]})})}var E1=function(e,n){return E1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},E1(e,n)};function Bk(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");E1(e,n);function t(){this.constructor=e}e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var H=function(){return H=Object.assign||function(n){for(var t,r=1,i=arguments.length;r<i;r++){t=arguments[r];for(var a in t)Object.prototype.hasOwnProperty.call(t,a)&&(n[a]=t[a])}return n},H.apply(this,arguments)};function Hk(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t}function vr(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{u(r.next(c))}catch(h){s(h)}}function l(c){try{u(r.throw(c))}catch(h){s(h)}}function u(c){c.done?a(c.value):i(c.value).then(o,l)}u((r=r.apply(e,n||[])).next())})}function pr(e,n){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,i,a,s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(u){return function(c){return l([u,c])}}function l(u){if(r)throw new TypeError("Generator is already executing.");for(;s&&(s=0,u[0]&&(t=0)),t;)try{if(r=1,i&&(a=u[0]&2?i.return:u[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,u[1])).done)return a;switch(i=0,a&&(u=[u[0]&2,a.value]),u[0]){case 0:case 1:a=u;break;case 4:return t.label++,{value:u[1],done:!1};case 5:t.label++,i=u[1],u=[0];continue;case 7:u=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(u[0]===6||u[0]===2)){t=0;continue}if(u[0]===3&&(!a||u[1]>a[0]&&u[1]<a[3])){t.label=u[1];break}if(u[0]===6&&t.label<a[1]){t.label=a[1],a=u;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(u);break}a[2]&&t.ops.pop(),t.trys.pop();continue}u=n.call(e,t)}catch(c){u=[6,c],i=0}finally{r=a=0}if(u[0]&5)throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}function we(e,n,t){if(t||arguments.length===2)for(var r=0,i=n.length,a;r<i;r++)(a||!(r in n))&&(a||(a=Array.prototype.slice.call(n,0,r)),a[r]=n[r]);return e.concat(a||Array.prototype.slice.call(n))}const nv={reactions:"reactions",message_search_v3:"message_search_v3",enable_og_tag:"enable_og_tag"},ZV={delivery_receipt:"delivery_receipt"},JV="modulepreload",ez=function(e){return"/"+e},iw={},Gv=function(n,t,r){let i=Promise.resolve();if(t&&t.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),o=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));i=Promise.allSettled(t.map(l=>{if(l=ez(l),l in iw)return;iw[l]=!0;const u=l.endsWith(".css"),c=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${l}"]${c}`))return;const h=document.createElement("link");if(h.rel=u?"stylesheet":JV,u||(h.as="script"),h.crossOrigin="",h.href=l,o&&h.setAttribute("nonce",o),document.head.appendChild(h),u)return new Promise((f,p)=>{h.addEventListener("load",f),h.addEventListener("error",()=>p(new Error(`Unable to preload CSS for ${l}`)))})}))}function a(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&a(o.reason);return n().catch(a)})};var y1=function(e,n){return y1=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,r){t.__proto__=r}||function(t,r){for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(t[i]=r[i])},y1(e,n)};function k(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function t(){this.constructor=e}y1(e,n),e.prototype=n===null?Object.create(n):(t.prototype=n.prototype,new t)}var z=function(){return z=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var i in n=arguments[t])Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i]);return e},z.apply(this,arguments)};function tz(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function"){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]])}return t}function N(e,n,t,r){return new(t||(t=Promise))(function(i,a){function s(u){try{l(r.next(u))}catch(c){a(c)}}function o(u){try{l(r.throw(u))}catch(c){a(c)}}function l(u){var c;u.done?i(u.value):(c=u.value,c instanceof t?c:new t(function(h){h(c)})).then(s,o)}l((r=r.apply(e,[])).next())})}function T(e,n){var t,r,i,a={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]},s=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return s.next=o(0),s.throw=o(1),s.return=o(2),typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function o(l){return function(u){return function(c){if(t)throw new TypeError("Generator is already executing.");for(;s&&(s=0,c[0]&&(a=0)),a;)try{if(t=1,r&&(i=2&c[0]?r.return:c[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,c[1])).done)return i;switch(r=0,i&&(c=[2&c[0],i.value]),c[0]){case 0:case 1:i=c;break;case 4:return a.label++,{value:c[1],done:!1};case 5:a.label++,r=c[1],c=[0];continue;case 7:c=a.ops.pop(),a.trys.pop();continue;default:if(i=a.trys,!((i=i.length>0&&i[i.length-1])||c[0]!==6&&c[0]!==2)){a=0;continue}if(c[0]===3&&(!i||c[1]>i[0]&&c[1]<i[3])){a.label=c[1];break}if(c[0]===6&&a.label<i[1]){a.label=i[1],i=c;break}if(i&&a.label<i[2]){a.label=i[2],a.ops.push(c);break}i[2]&&a.ops.pop(),a.trys.pop();continue}c=n.call(e,a)}catch(h){c=[6,h],r=0}finally{t=i=0}if(5&c[0])throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}([l,u])}}}function ye(e){var n=typeof Symbol=="function"&&Symbol.iterator,t=n&&e[n],r=0;if(t)return t.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(n?"Object is not iterable.":"Symbol.iterator is not defined.")}function Ge(e,n){var t=typeof Symbol=="function"&&e[Symbol.iterator];if(!t)return e;var r,i,a=t.call(e),s=[];try{for(;(n===void 0||n-- >0)&&!(r=a.next()).done;)s.push(r.value)}catch(o){i={error:o}}finally{try{r&&!r.done&&(t=a.return)&&t.call(a)}finally{if(i)throw i.error}}return s}function it(e,n,t){if(arguments.length===2)for(var r,i=0,a=n.length;i<a;i++)!r&&i in n||(r||(r=Array.prototype.slice.call(n,0,i)),r[i]=n[i]);return e.concat(r||Array.prototype.slice.call(n))}var Le,Gk="4.20.5",Bu=function(){function e(){}return Object.defineProperty(e,"OS_VERSION",{get:function(){return typeof navigator<"u"&&navigator.userAgent?navigator.userAgent.replace(/,/g,"."):"noAgent"},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_VERSION",{get:function(){return Gk},enumerable:!1,configurable:!0}),Object.defineProperty(e,"SDK_MAJOR_VERSION",{get:function(){return e.SDK_VERSION.split(".")[0]},enumerable:!1,configurable:!0}),Object.defineProperty(e,"DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL",{get:function(){return 100},enumerable:!1,configurable:!0}),Object.defineProperty(e,"INTERNAL_CALL",{get:function(){return"ic"},enumerable:!1,configurable:!0}),e}();(function(e){e[e.NON_AUTHORIZED=400108]="NON_AUTHORIZED",e[e.INVALID_TOKEN=400111]="INVALID_TOKEN",e[e.NOT_FOUND_IN_DATABASE=400201]="NOT_FOUND_IN_DATABASE",e[e.USER_AUTH_DEACTIVATED=400300]="USER_AUTH_DEACTIVATED",e[e.USER_AUTH_DELETED_OR_NOT_FOUND=400301]="USER_AUTH_DELETED_OR_NOT_FOUND",e[e.SESSION_TOKEN_EXPIRED=400302]="SESSION_TOKEN_EXPIRED",e[e.APPLICATION_NOT_FOUND=400304]="APPLICATION_NOT_FOUND",e[e.SESSION_KEY_EXPIRED=400309]="SESSION_KEY_EXPIRED",e[e.SESSION_REVOKED=400310]="SESSION_REVOKED",e[e.INVALID_SESSION_TYPE=400312]="INVALID_SESSION_TYPE",e[e.INVALID_AUTH_FOR_SERVICE=400313]="INVALID_AUTH_FOR_SERVICE",e[e.STAT_UPLOAD_NOT_ALLOWED=403200]="STAT_UPLOAD_NOT_ALLOWED",e[e.NOT_SUPPORTED_PINNED_MESSAGE_IN_REVIEW_MESSAGE=400940]="NOT_SUPPORTED_PINNED_MESSAGE_IN_REVIEW_MESSAGE",e[e.INTERNAL_SERVER_ERROR=500901]="INTERNAL_SERVER_ERROR",e[e.RATE_LIMIT_EXCEEDED=500910]="RATE_LIMIT_EXCEEDED",e[e.INVALID_REQUIRED_FORM_VALUE=400105]="INVALID_REQUIRED_FORM_VALUE",e[e.UNKNOWN_SERVER_ERROR=900200]="UNKNOWN_SERVER_ERROR",e[e.NOT_SUPPORTED_FEATURE_IN_IN_REVIEW_MESSAGE=901500]="NOT_SUPPORTED_FEATURE_IN_IN_REVIEW_MESSAGE",e[e.ERR_DUPLICATED_DATA=400202]="ERR_DUPLICATED_DATA",e[e.DEBUG_MODE_REQUIRED=7e5]="DEBUG_MODE_REQUIRED",e[e.LOST_INSTANCE=700100]="LOST_INSTANCE",e[e.CONNECTION_RENEW=700102]="CONNECTION_RENEW",e[e.INVALID_CONNECTION_STATE_TRANSITION=700200]="INVALID_CONNECTION_STATE_TRANSITION",e[e.INVALID_COMMAND=700700]="INVALID_COMMAND",e[e.XMLHTTPREQUEST_NOT_SUPPORTED=700800]="XMLHTTPREQUEST_NOT_SUPPORTED",e[e.UNKNOWN_ERROR=77e4]="UNKNOWN_ERROR",e[e.INVALID_INITIALIZATION=800100]="INVALID_INITIALIZATION",e[e.CONNECTION_REQUIRED=800101]="CONNECTION_REQUIRED",e[e.CONNECTION_CANCELED=800102]="CONNECTION_CANCELED",e[e.INVALID_PARAMETER=800110]="INVALID_PARAMETER",e[e.NOT_SUPPORTED_ERROR=800111]="NOT_SUPPORTED_ERROR",e[e.NETWORK_ERROR=800120]="NETWORK_ERROR",e[e.NETWORK_ROUTING_ERROR=800121]="NETWORK_ROUTING_ERROR",e[e.MALFORMED_DATA=800130]="MALFORMED_DATA",e[e.MALFORMED_ERROR_DATA=800140]="MALFORMED_ERROR_DATA",e[e.WRONG_CHANNEL_TYPE=800150]="WRONG_CHANNEL_TYPE",e[e.MARK_AS_READ_RATE_LIMIT_EXCEEDED=800160]="MARK_AS_READ_RATE_LIMIT_EXCEEDED",e[e.QUERY_IN_PROGRESS=800170]="QUERY_IN_PROGRESS",e[e.ACK_TIMEOUT=800180]="ACK_TIMEOUT",e[e.LOGIN_TIMEOUT=800190]="LOGIN_TIMEOUT",e[e.WEBSOCKET_CONNECTION_CLOSED=800200]="WEBSOCKET_CONNECTION_CLOSED",e[e.WEBSOCKET_CONNECTION_FAILED=800210]="WEBSOCKET_CONNECTION_FAILED",e[e.REQUEST_FAILED=800220]="REQUEST_FAILED",e[e.DELAYED_CONNECTING=800221]="DELAYED_CONNECTING",e[e.FILE_UPLOAD_CANCEL_FAILED=800230]="FILE_UPLOAD_CANCEL_FAILED",e[e.REQUEST_CANCELED=800240]="REQUEST_CANCELED",e[e.REQUEST_DUPLICATED=800250]="REQUEST_DUPLICATED",e[e.FILE_SIZE_LIMIT_EXCEEDED=800260]="FILE_SIZE_LIMIT_EXCEEDED",e[e.ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED=800270]="ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED",e[e.SESSION_TOKEN_REQUEST_FAILED=800500]="SESSION_TOKEN_REQUEST_FAILED",e[e.SESSION_TOKEN_REFRESHED=800501]="SESSION_TOKEN_REFRESHED",e[e.SESSION_TOKEN_REFRESH_FAILED=800502]="SESSION_TOKEN_REFRESH_FAILED",e[e.COLLECTION_DISPOSED=800600]="COLLECTION_DISPOSED",e[e.DATABASE_ERROR=800700]="DATABASE_ERROR",e[e.USER_DEACTIVATED=900021]="USER_DEACTIVATED",e[e.CHANNEL_IS_FROZEN=900050]="CHANNEL_IS_FROZEN",e[e.RECEIVER_USER_DEACTIVATED=900081]="RECEIVER_USER_DEACTIVATED"})(Le||(Le={}));var Ji,Zc,ri,e0,b1,$v,Vi=function(e){return!(e instanceof Q&&!e.shouldThrowOutside)},Q=function(e){function n(t){var r=t.code,i=r===void 0?0:r,a=t.message,s=a===void 0?"":a,o=e.call(this,s)||this;return o.shouldThrowOutside=!1,o._detail="",o.name="SendbirdError",o.code=i,Object.setPrototypeOf(o,n.prototype),o}return k(n,e),Object.defineProperty(n.prototype,"detail",{get:function(){return this._detail},enumerable:!1,configurable:!0}),n.prototype.setDetail=function(t){this._detail=t},Object.defineProperty(n.prototype,"isInvalidTokenError",{get:function(){return this.code===Le.INVALID_TOKEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionExpiredError",{get:function(){return this.isSessionTokenExpiredError||this.isSessionKeyExpiredError},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionTokenExpiredError",{get:function(){return this.code===Le.SESSION_TOKEN_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionKeyExpiredError",{get:function(){return this.code===Le.SESSION_KEY_EXPIRED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionInvalidatedError",{get:function(){return this.isSessionRevokedError||this.isUserAuthDeactivedError||this.isUserAuthDeletedOrNotFoundError},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionRevokedError",{get:function(){return this.code===Le.SESSION_REVOKED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUserAuthDeactivedError",{get:function(){return this.code===Le.USER_AUTH_DEACTIVATED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isUserAuthDeletedOrNotFoundError",{get:function(){return this.code===Le.USER_AUTH_DELETED_OR_NOT_FOUND},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isNetworkError",{get:function(){return this.code===Le.NETWORK_ERROR||this.code===Le.NETWORK_ROUTING_ERROR},enumerable:!1,configurable:!0}),Object.defineProperty(n,"debugModeRequired",{get:function(){return new n({code:Le.DEBUG_MODE_REQUIRED,message:"Cannot run this operation in production mode."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"lostInstance",{get:function(){return new n({code:Le.LOST_INSTANCE,message:"Instance ID is missing. It should belong to an instance."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidCommand",{get:function(){return new n({code:Le.INVALID_COMMAND,message:"Cannot send invalid command."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"unknown",{get:function(){return new n({code:Le.UNKNOWN_ERROR,message:"Unknown error occurred."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionRenew",{get:function(){return new n({code:Le.CONNECTION_RENEW,message:"Connection restarts."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidConnectionStateTransition",{get:function(){return new n({code:Le.INVALID_CONNECTION_STATE_TRANSITION,message:"Invalid connection state transition."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"xmlHttpRequestNotSupported",{get:function(){return new n({code:Le.XMLHTTPREQUEST_NOT_SUPPORTED,message:"Cannot upload file. XMLHttpRequest is not defined in this environment."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionRequired",{get:function(){return new n({code:Le.CONNECTION_REQUIRED,message:"Connection is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionCanceled",{get:function(){return new n({code:Le.CONNECTION_CANCELED,message:"Connection is canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"invalidParameters",{get:function(){return new n({code:Le.INVALID_PARAMETER,message:"Invalid parameters."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"notSupportedError",{get:function(){return new n({code:Le.NOT_SUPPORTED_ERROR,message:"Given parameters are not supported."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"channelTypeNotSupportedError",{get:function(){return new n({code:Le.NOT_SUPPORTED_ERROR,message:"Called method is not supported in the current channel's channel type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"networkError",{get:function(){return new n({code:Le.NETWORK_ERROR,message:"There was a network error."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"markAsReadAllRateLimitExceeded",{get:function(){return new n({code:Le.MARK_AS_READ_RATE_LIMIT_EXCEEDED,message:"markAsRead rate limit exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"queryInProgress",{get:function(){return new n({code:Le.QUERY_IN_PROGRESS,message:"Query in progress."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"noAckTimeout",{get:function(){return new n({code:Le.ACK_TIMEOUT,message:"Command received no ack."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"loginTimeout",{get:function(){return new n({code:Le.LOGIN_TIMEOUT,message:"Connection timeout."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"connectionClosed",{get:function(){return new n({code:Le.WEBSOCKET_CONNECTION_CLOSED,message:"Connection is closed. Please reconnect."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"requestFailed",{get:function(){return new n({code:Le.REQUEST_FAILED,message:"Request failed."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"tooManyRequests",{get:function(){return new n({code:Le.REQUEST_DUPLICATED,message:"Too many requests."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"alreadyConnectedAsAnotherUser",{get:function(){return new n({code:Le.REQUEST_FAILED,message:"Already logged in as a different user. Call disconnect() first."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"fileUploadCanceled",{get:function(){return new n({code:Le.FILE_UPLOAD_CANCEL_FAILED,message:"File upload has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"requestCanceled",{get:function(){return new n({code:Le.REQUEST_CANCELED,message:"Request has been canceled."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"sessionTokenRefreshFailed",{get:function(){return new n({code:Le.SESSION_TOKEN_REFRESH_FAILED,message:"Failed to refresh the session key."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"sessionTokenRequestFailed",{get:function(){return new n({code:Le.SESSION_TOKEN_REQUEST_FAILED,message:"Failed to get the session token."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"databaseError",{get:function(){return new n({code:Le.DATABASE_ERROR,message:"Database error."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"fileSizeLimitExceededError",{get:function(){return new n({code:Le.FILE_SIZE_LIMIT_EXCEEDED,message:"File size exceeds the file size limit."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"statLogUploadLimitExceededError",{get:function(){return new n({code:Le.ERR_UPLOAD_STAT_RETRY_COUNT_EXCEEDED,message:"The upload request failed due to the retry count being exceeded."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"malformedDataError",{get:function(){return new n({code:Le.MALFORMED_DATA,message:"Malformed data."})},enumerable:!1,configurable:!0}),n.prototype.throwOutside=function(){throw this.shouldThrowOutside=!0,this},n}(Error),nz=[Le.CONNECTION_REQUIRED,Le.NETWORK_ERROR,Le.ACK_TIMEOUT,Le.WEBSOCKET_CONNECTION_CLOSED,Le.WEBSOCKET_CONNECTION_FAILED,Le.FILE_UPLOAD_CANCEL_FAILED,Le.REQUEST_CANCELED,Le.INTERNAL_SERVER_ERROR,Le.RATE_LIMIT_EXCEEDED,Le.UNKNOWN_SERVER_ERROR,Le.USER_DEACTIVATED,Le.CHANNEL_IS_FROZEN,Le.RECEIVER_USER_DEACTIVATED],rz=[Le.WEBSOCKET_CONNECTION_CLOSED,Le.WEBSOCKET_CONNECTION_FAILED,Le.CONNECTION_REQUIRED,Le.CHANNEL_IS_FROZEN],$k=function(e,n){if(e!==n){var t=z({},e),r=z({},n);return(!t.hasOwnProperty("messageId")||!r.hasOwnProperty("messageId")||t.messageId===r.messageId)&&(!t.hasOwnProperty("reqId")||!r.hasOwnProperty("reqId")||t.reqId===r.reqId)&&(t.hasOwnProperty("messageId")&&delete t.messageId,t.hasOwnProperty("reqId")&&delete t.reqId,r.hasOwnProperty("messageId")&&delete r.messageId,r.hasOwnProperty("reqId")&&delete r.reqId,JSON.stringify(t)===JSON.stringify(r))}return!0},Y=function(e,n,t){return t===void 0&&(t=!1),!(!t||!Jp(n))||(typeof e!="string"?typeof e=="object"?Bt(e,n):iz(e,n):typeof n===e)},Bt=function(e,n,t){return t===void 0&&(t=!1),!(!t||!Jp(n))||Object.values(e).includes(n)},iz=function(e,n){return n instanceof e},Ht=function(e,n,t){return t===void 0&&(t=!1),!(!t||!Jp(n))||Array.isArray(n)&&n.every(function(r){return Y(e,r)})},aw=function(e,n){return!!Jp(e)||typeof e=="number"&&e.toString().length===13},az=function(e){return e>0&&nz.indexOf(e)>=0},t0=function(e){return e>0&&rz.indexOf(e)>=0},ai=function(e,n){if(n===void 0&&(n=!1),n&&Jp(e))return!0;var t=typeof e=="object"&&e!==null&&e.hasOwnProperty("name")&&typeof e.name=="string"&&e.hasOwnProperty("uri")&&typeof e.uri=="string"&&e.hasOwnProperty("type")&&typeof e.type=="string";if(!t){if(typeof Blob<"u")return e instanceof Blob;if(typeof File<"u")return e instanceof File}return t},sz=function(e,n){if(e===n)return!0;if(e==null||n==null||e.length!==n.length)return!1;for(var t=it([],Ge(e),!1).sort(),r=it([],Ge(n),!1).sort(),i=0;i<t.length;++i)if(t[i]!==r[i])return!1;return!0},Jp=function(e){return e==null},Vk=function(){function e(n){var t=n===void 0?{}:n,r=t.useMemberInfoInMessage,i=r===void 0||r,a=t.typingIndicatorInvalidateTime,s=a===void 0?1e4:a,o=t.typingIndicatorThrottle,l=o===void 0?1e3:o,u=t.websocketResponseTimeout,c=u===void 0?1e4:u,h=t.websocketPayloadDecompression,f=h===void 0||h,p=t.sessionTokenRefreshTimeout,_=p===void 0?60:p;this._useMemberInfoInMessage=!0,this._typingIndicatorInvalidateTime=1e4,this._typingIndicatorThrottle=1e3,this._websocketResponseTimeout=1e4,this._sessionTokenRefreshTimeout=60,this._useMemberInfoInMessage=i,this._typingIndicatorInvalidateTime=s,this._typingIndicatorThrottle=l,this._websocketResponseTimeout=c,this._sessionTokenRefreshTimeout=_,this.websocketPayloadDecompression=f}return Object.defineProperty(e.prototype,"useMemberInfoInMessage",{get:function(){return this._useMemberInfoInMessage},set:function(n){Y("boolean",n)&&(this._useMemberInfoInMessage=n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorInvalidateTime",{get:function(){return this._typingIndicatorInvalidateTime},set:function(n){Y("number",n)&&(this._typingIndicatorInvalidateTime=n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"typingIndicatorThrottle",{get:function(){return this._typingIndicatorThrottle},set:function(n){Y("number",n)&&n>=1e3&&n<=9e3&&(this._typingIndicatorThrottle=n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocketResponseTimeout",{get:function(){return this._websocketResponseTimeout},set:function(n){Y("number",n)&&n>=5e3&&n<=3e4&&(this._websocketResponseTimeout=n)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sessionTokenRefreshTimeout",{get:function(){return this._sessionTokenRefreshTimeout},set:function(n){Y("number",n)&&(n<60?n=60:n>1800&&(n=1800),this._sessionTokenRefreshTimeout=n)},enumerable:!1,configurable:!0}),e}(),zk={encrypt:function(e){return e},decrypt:function(e){return e}},sw=function(){function e(n){var t=n.store;this._preference=new Map,this._store=t}return e.prototype._savePreferenceKeys=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,this._store.set({key:this._keysAddress,value:it([],Ge(this._preference.keys()),!1)})];case 1:return n.sent(),[2]}})})},e.prototype.init=function(n,t){var r;return t===void 0&&(t=1),N(this,void 0,void 0,function(){var i,a,s,o,l,u,c,h,f,p,_;return T(this,function(g){switch(g.label){case 0:return this._version=t,this._keysAddress=n,i="".concat(n,".metadata.version"),[4,this._store.get(i)];case 1:return a=g.sent(),[4,this._store.get(n)];case 2:return s=(r=g.sent())!==null&&r!==void 0?r:[],!a||a.version<this._version?this._version===9?[3,3]:[3,6]:[3,10];case 3:return o=s.find(function(C){return C.includes("groupchannel/sync.meta")}),o?[4,this._store.remove(o)]:[3,5];case 4:g.sent(),g.label=5;case 5:return[3,8];case 6:return[4,this._resetPreferenceData(s)];case 7:g.sent(),g.label=8;case 8:return[4,this._updatePreferenceVersionInfo(i)];case 9:return g.sent(),[3,17];case 10:g.trys.push([10,15,16,17]),l=ye(s),u=l.next(),g.label=11;case 11:return u.done?[3,14]:(c=u.value,[4,this._store.get(c)]);case 12:(h=g.sent())&&this._preference.set(c,h),g.label=13;case 13:return u=l.next(),[3,11];case 14:return[3,17];case 15:return f=g.sent(),p={error:f},[3,17];case 16:try{u&&!u.done&&(_=l.return)&&_.call(l)}finally{if(p)throw p.error}return[7];case 17:return[2]}})})},e.prototype._updatePreferenceVersionInfo=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this._store.set({key:n,value:{version:this._version}})];case 1:return t.sent(),[2]}})})},e.prototype._resetPreferenceData=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return this._preference=new Map,[4,this._store.removeMany(n)];case 1:return t.sent(),[2]}})})},e.prototype.get=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){return[2,this._preference.get(n)]})})},e.prototype.set=function(n,t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return r=!this._preference.has(n),[4,this._store.set({key:n,value:t})];case 1:return i.sent(),this._preference.set(n,t),r?[4,this._savePreferenceKeys()]:[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},e.prototype.remove=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this._store.remove(n)];case 1:return t.sent(),this._preference.delete(n),[4,this._savePreferenceKeys()];case 2:return t.sent(),[2]}})})},e.prototype.clear=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,this._store.removeMany(it([],Ge(this._preference.keys()),!1))];case 1:return n.sent(),this._preference.clear(),[4,this._savePreferenceKeys()];case 2:return n.sent(),[2]}})})},e}(),oz=function(){function e(n){var t=n.encryption,r=n.store,i=n.localCacheEnabled,a=n.localCacheConfig;this.store=r,this.preference=new sw({store:r}),this.encryption=t??zk,this.localCacheEnabled=i,this.localCacheConfig=a}return e.prototype.replaceStore=function(n){this.store=n,this.preference=new sw({store:n})},e}();(function(e){e.SUCCESS="success",e.PENDING="pending",e.ERROR="error"})(Ji||(Ji={})),function(e){e.DEFAULT="default",e.ALL="all",e.MENTION_ONLY="mention_only",e.OFF="off"}(Zc||(Zc={})),function(e){e.FCM="gcm",e.APNS="apns",e.UNKNOWN="unknown"}(ri||(ri={})),function(e){e.SESSION_TOKEN="session_token",e.ACCESS_TOKEN="access_token"}(e0||(e0={})),function(e){e.ALTERNATIVE="alternative",e.DEFAULT="default"}(b1||(b1={})),function(e){e.CUSTOM="custom",e.MESSAGE_COLLECTION_ACCESSED_AT="messagecollection_accessed_at"}($v||($v={}));var n0,lz=function(){function e(n){var t=n.channel,r=n.cachedMessageCount;this._cachedMessageCount=0,this._channel=t,this._cachedMessageCount=r}return Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cachedMessageCount",{get:function(){return this._cachedMessageCount},enumerable:!1,configurable:!0}),e}(),jk=function(){function e(n){var t=n===void 0?{}:n,r=t.maxSize,i=r===void 0?256:r,a=t.clearOrder,s=a===void 0?$v.MESSAGE_COLLECTION_ACCESSED_AT:a,o=t.customClearOrderComparator,l=t.enableAutoResend,u=l===void 0||l,c=t.enableRestoreDB,h=c!==void 0&&c;this._clearOrderComparatorUseMessageCollectionAccessedAt=function(f,p){return f.channel.messageCollectionLastAccessedAt===p.channel.messageCollectionLastAccessedAt?f.channel.lastMessage&&!p.channel.lastMessage?1:!f.channel.lastMessage&&p.channel.lastMessage?-1:f.channel.lastMessage||p.channel.lastMessage?f.channel.lastMessage.createdAt-p.channel.lastMessage.createdAt:0:f.channel.messageCollectionLastAccessedAt>p.channel.messageCollectionLastAccessedAt?1:-1},this._maxSize=Math.max(i,64),o?(this._clearOrder=s,this._customClearOrderComparator=o):this._clearOrder=$v.MESSAGE_COLLECTION_ACCESSED_AT,this._enableAutoResend=u,this._enableRestoreDB=h}return Object.defineProperty(e.prototype,"maxSize",{get:function(){return this._maxSize},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clearOrder",{get:function(){return this._clearOrder},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableRestoreDB",{get:function(){return this._enableRestoreDB},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"clearOrderComparator",{get:function(){var n;return this._clearOrder===$v.MESSAGE_COLLECTION_ACCESSED_AT?this._clearOrderComparatorUseMessageCollectionAccessedAt:(n=this._customClearOrderComparator)!==null&&n!==void 0?n:this._clearOrderComparatorUseMessageCollectionAccessedAt},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"enableAutoResend",{get:function(){return this._enableAutoResend},enumerable:!1,configurable:!0}),e}();(function(e){e.FEED="feed",e.CHAT="chat",e.CHAT_API="chat_api"})(n0||(n0={}));var Kt,hs,xs,jn,Mi,Qh,Oi,Yr,yo,sn,ow,C1,S1,uz=function(){function e(){this.isRefreshing=!1}return Object.defineProperty(e.prototype,"hasSession",{get:function(){return!!this.sessionKey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasChatServicePermission",{get:function(){var n;return!!(!((n=this.services)===null||n===void 0)&&n.includes(n0.CHAT))},enumerable:!1,configurable:!0}),e.prototype.clear=function(){this.authToken=void 0,this.sessionKey=void 0,this.services=[]},e}(),_s=function(){var e=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(n==="x"?t:3&t|8).toString(16)})},lw=function(){function e(n){var t=n.container;this._container={},this._container=t,this.key=_s()}return e.prototype._register=function(n,t,r){var i;return n in this._container||(this._container[n]=new Map),(i=this._container[n])===null||i===void 0||i.set(this.key,{occurence:t,handler:r}),this},e.prototype.on=function(n,t){return this._register(n,-1,t)},e.prototype.once=function(n,t){return this._register(n,1,t)},e.prototype.close=function(){var n=this;Object.keys(this._container).forEach(function(t){var r;(r=n._container[t])===null||r===void 0||r.delete(n.key)})},e}(),Dd=function(){function e(){this._container={}}return e.prototype.on=function(n,t){return new lw({container:this._container}).on(n,t)},e.prototype.once=function(n,t){return new lw({container:this._container}).once(n,t)},e.prototype.dispatch=function(n,t){var r,i,a=this._container[n];if(a){var s=[];try{for(var o=ye(a.keys()),l=o.next();!l.done;l=o.next()){var u=l.value,c=a.get(u);c.handler(t),c.occurence>0&&(c.occurence--,c.occurence===0&&s.push(u))}}catch(h){r={error:h}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}s.forEach(function(h){return a.delete(h)})}},e}(),cz=function(){function e(){this._dispatcher=new Dd}return e.prototype.on=function(n){return this._dispatcher.on("event",n)},e.prototype.once=function(n){return this._dispatcher.once("event",n)},e.prototype.dispatch=function(n){this._dispatcher.dispatch("event",n)},e}(),Gn=function(){},Ae=function(e){var n={};return e&&Object.keys(e).forEach(function(t){e[t]===void 0||Number.isNaN(e[t])||e[t]===null||(n[t]=e[t])}),n},$e=function(e){if(e!=null){if(typeof e=="object"){if(Array.isArray(e)){for(var n=it([],Ge(e),!1),t=0;t<n.length;t++)n[t]=$e(n[t]);return n}return Object.keys(e).forEach(function(r){e[r]===null&&delete e[r]}),e}return e}};(function(e){e.BASE="base",e.GROUP="group",e.OPEN="open",e.FEED="feed"})(Kt||(Kt={})),function(e){e.OPERATOR="operator",e.NONE="none"}(hs||(hs={})),function(e){e.MUTED="muted",e.UNMUTED="unmuted"}(xs||(xs={})),function(e){e.BASE="base",e.USER="user",e.FILE="file",e.ADMIN="admin"}(jn||(jn={})),function(e){e.ALL="",e.USER="MESG",e.FILE="FILE",e.ADMIN="ADMM"}(Mi||(Mi={})),function(e){e.USER="MESG",e.FILE="FILE",e.ADMIN="ADMM"}(Qh||(Qh={})),function(e){e.USERS="users",e.CHANNEL="channel"}(Oi||(Oi={})),function(e){e.ALL="all",e.NONE="none",e.ONLY_REPLY_TO_CHANNEL="only_reply_to_channel"}(Yr||(Yr={})),function(e){e.DEFAULT="default",e.SUPPRESS="suppress"}(yo||(yo={})),function(e){e.PENDING="pending",e.SCHEDULED="scheduled",e.SUCCEEDED="succeeded",e.FAILED="failed",e.CANCELED="canceled"}(sn||(sn={})),function(e){e.INREVIEW="InReview",e.APPROVED="Approved"}(ow||(ow={})),function(e){e.HIGH="high",e.NORMAL="normal",e.LOW="low"}(C1||(C1={})),function(e){e.CREATED_AT="created_at",e.UPDATED_AT="updated_at"}(S1||(S1={}));var fe,Gr="v3",En="/".concat(Gr,"/users"),dz="/".concat(Gr,"/sdk/users"),hz="/".concat(Gr,"/storage/file"),qi="/".concat(Gr,"/group_channels"),fz="/".concat(Gr,"/sdk/group_channels"),Ud="/".concat(Gr,"/open_channels"),vz="/".concat(Gr,"/sdk/open_channels"),pz="/".concat(Gr,"/search"),T1="/".concat(Gr,"/report"),mz="/".concat(Gr,"/emojis"),qk="/".concat(Gr,"/emoji_categories"),Co="/".concat(Gr,"/polls"),Kk="/".concat(Gr,"/scheduled_messages"),_z="/".concat(Gr,"/sdk/ui_kit/configuration"),gz="/".concat(Gr,"/sdk/statistics"),Ez="/".concat(Gr,"/sdk/notification_statistics"),Wk="/".concat(Gr,"/message_templates"),yz="/".concat(Gr,"/sdk/push_delivery"),bz="/".concat(Gr,"/forms"),Cz="/".concat(Gr,"/report_category"),Sz="/".concat(Gr,"/sdk/applications/settings"),NN="/".concat(Gr,"/ai_agent"),IN="/".concat(Gr,"/ai_agent/group_channels"),mn=function(e){switch(e){case Kt.FEED:case Kt.GROUP:return qi;case Kt.OPEN:return Ud;default:return null}},Yk=function(e){switch(e){case Kt.GROUP:return"".concat(T1,"/group_channels");case Kt.OPEN:return"".concat(T1,"/open_channels");default:return null}},Xh=function(e,n,t){var r,i;switch(e){case Oi.CHANNEL:return!0;case Oi.USERS:if(n)try{for(var a=ye(n),s=a.next();!s.done;s=a.next())if(s.value===t)return!0}catch(o){r={error:o}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}}return!1},MN=function(e,n,t){var r,i,a,s,o=Xh((r=e.mentionType)!==null&&r!==void 0?r:null,(i=e.mentionedUserIds)!==null&&i!==void 0?i:[],t),l=Xh((a=n.mentionType)!==null&&a!==void 0?a:null,(s=n.mentionedUserIds)!==null&&s!==void 0?s:[],t);return!o&&l?1:o&&!l?-1:0},Qk=function(e,n,t){var r,i=n||new FormData;for(var a in e)if(e.hasOwnProperty(a)){var s=e[a],o=t?"".concat(t,"[").concat(a,"]"):a;ai(s)?i.append(o,s,(r=s.name)!==null&&r!==void 0?r:"filename"):typeof s!="object"||s===null||Array.isArray(s)||s instanceof Blob?i.append(o,String(s)):i=Qk(s,i,o)}return i};(function(e){e.GET="GET",e.POST="POST",e.PUT="PUT",e.DELETE="DELETE",e.PATCH="PATCH"})(fe||(fe={}));var kn,ve=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.params={},t.requireAuth=!0,t.headers={},t.requestId=_s(),t}return k(n,e),n.prototype.encodeParams=function(t){var r=this;return t==null||t===""?encodeURIComponent(""):Array.isArray(t)?t.map(function(i){return r.encodeParams(i)}).join(","):encodeURIComponent(typeof t=="object"?JSON.stringify(t):String(t))},Object.defineProperty(n.prototype,"query",{get:function(){var t=this,r=Ae(this.params);return"?".concat(Object.keys(r).map(function(i){return"".concat(encodeURIComponent(i),"=").concat(t.encodeParams(r[i]))}).join("&"))},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"payload",{get:function(){var t=Ae(this.params);return Object.keys(t).some(function(r){return ai(t[r])})?Qk(t):JSON.stringify(t)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasSessionKey",{get:function(){return this.headers["Session-Key"]!==void 0},enumerable:!1,configurable:!0}),n}(Gn),_e=function(e){function n(t,r){var i=e.call(this)||this;return i._iid=t,i._payload=r,i}return k(n,e),Object.defineProperty(n.prototype,"payload",{get:function(){return z({},this._payload)},enumerable:!1,configurable:!0}),n.prototype.as=function(t){return new t(this._iid,this.payload)},n}(Gn),Tz=function(e){function n(t){var r=e.call(this)||this;return r.requestId=t,r}return k(n,e),n}(Gn),Zh=function(e){function n(t){var r=t.expires_in,i=t.reason,a=i===void 0?Le.SESSION_KEY_EXPIRED:i,s=t.message,o=s===void 0?"":s,l=e.call(this)||this;switch(l.expiresIn=r??0,a){case Le.SESSION_KEY_EXPIRED:case Le.SESSION_TOKEN_EXPIRED:case Le.SESSION_REVOKED:case Le.USER_AUTH_DEACTIVATED:case Le.USER_AUTH_DELETED_OR_NOT_FOUND:l.error=new Q({code:a,message:o})}return l}return k(n,e),Object.defineProperty(n.prototype,"invalidateSessionToken",{get:function(){var t;return!!(!((t=this.error)===null||t===void 0)&&t.isSessionTokenExpiredError)},enumerable:!1,configurable:!0}),n}(Gn),Qn=function(e){function n(t,r,i,a){a===void 0&&(a="");var s,o=this;return(o=e.call(this)||this)._iid=t,o.code=r,o.payload=i,o.requestId=(s=i.req_id)!==null&&s!==void 0?s:a,o}return k(n,e),n.createFromRawMessage=function(t,r){var i=r.substring(0,4),a={};try{a=JSON.parse(r.substring(4))}catch{i="NOOP"}finally{return new n(t,i,a)}},n.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),`
`)},n.prototype.as=function(t){return new t(this._iid,this.code,this.payload)},n}(Gn),Ri=function(e){function n(t){var r,i=t.code,a=t.ackRequired,s=t.payload,o=s===void 0?{}:s,l=this;return(l=e.call(this)||this).code=i,l.payload=o,l.requestId=(r=l.payload.req_id)!==null&&r!==void 0?r:_s(),l.ackRequired=a,l.payload.req_id=l.requestId,l}return k(n,e),n.prototype.convertToMessage=function(){return"".concat(this.code).concat(JSON.stringify(this.payload),`
`)},n}(Gn),AN=function(e){function n(t){var r=t.userId,i=t.authToken,a=t.services,s=t.expiringSession,o=s===void 0||s,l=e.call(this)||this;return l.path="".concat(En,"/").concat(encodeURIComponent(r),"/session_key"),l.method=fe.POST,l.params=Ae({token:i,services:a,expiring_session:!!o}),l.requireAuth=!1,l}return k(n,e),n}(ve),Nz=function(e){function n(t){var r=t.authToken,i=t.expiringSession,a=i===void 0||i,s=t.requestId,o=s===void 0?void 0:s;return e.call(this,{code:"LOGI",payload:Ae({token:r,expiring_session:a?1:0,req_id:o}),ackRequired:!0})||this}return k(n,e),n}(Ri),Iz=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.key,s=r.expires_at,o=r.services;return i.key=a,i.expiresAt=s,i.services=o,i}return k(n,e),n}(_e),Mz=function(e){function n(t,r,i){var a,s=this;return(s=e.call(this,t,"LOGI",i)||this).error=null,s.newKey=null,s.newKey=(a=i.new_key)!==null&&a!==void 0?a:null,s.error=i.error?new Q(i):null,s}return k(n,e),n}(Qn),Ol=function(e){function n(t){var r=e.call(this)||this;return r.statLog=t,r}return k(n,e),n}(Gn),Xk=function(e){function n(t){var r=t.request,i=t.deferred,a=t.error,s=a===void 0?Q.requestFailed:a,o=e.call(this)||this;return o.request=r,o.deferred=i,o.error=s,o}return k(n,e),n}(Gn);(function(e){e.FEATURE_LOCALCACHE="feature:local_cache",e.FEATURE_LOCALCACHE_EVENT="feature:local_cache_event",e.NOTIFICATION="noti:stats",e.WEBSOCKET_CONNECT="ws:connect",e.WEBSOCKET_DISCONNECT="ws:disconnect",e.API_RESULT="api:result"})(kn||(kn={}));var N1,ld,Au,Kn=function(){function e(n){var t=n.type,r=n.data,i=n.ts,a=i===void 0?Date.now():i;this.type=t,this.createdAt=a,this.data=r}return e.payloadify=function(n){return Ae({stat_type:n.type,ts:n.createdAt,data:Ae(n.data)})},e}(),I1=function(){return typeof document>"u"&&typeof navigator<"u"&&navigator.product=="ReactNative"},uw=function(){return!(typeof navigator>"u"||!/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini|Windows Phone/i.test(navigator.userAgent))};(function(e){e.CHAT="chat",e.CALLS="calls",e.DESK="desk",e.LIVE="live",e.UIKIT_CHAT="uikit-chat",e.UIKIT_LIVE="uikit-live",e.AI_AGENT="ai-agent"})(N1||(N1={})),function(e){e.ANDROID="android",e.IOS="ios",e.JS="js",e.UNREAL="unreal",e.UNITY="unity",e.REACT_NATIVE="react-native",e.FLUTTER="flutter"}(ld||(ld={})),function(e){e.ANDROID="android",e.IOS="ios",e.WEB="web",e.MOBILE_WEB="mobile_web",e.WINDOWS="windows"}(Au||(Au={}));var Az="^(0|[1-9]\\d*)\\.(0|[1-9]\\d*)\\.(0|[1-9]\\d*)(?:-((?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\\.(?:0|[1-9]\\d*|\\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?(?:\\+([0-9a-zA-Z-]+(?:\\.[0-9a-zA-Z-]+)*))?$",r0=function(){function e(){}var n;return n=e,e._getFrameWork=function(){if(typeof window<"u"){if(window.__REACT__)return"react";if(window.__VUE__)return"vue";var t=window.__REACT_DEVTOOLS_GLOBAL_HOOK__;if(t&&t.getFiberRoots&&t.getFiberRoots(1).size>0)return"react";if(window.__NUXT__)return"vue(SSR)";if(window.__NEXT_DATA__||window.__NEXT_P||window.__NEXT_F)return"nextjs"}return""},e.sendbirdSdkUserAgentWithExtension=function(t){var r=I1()?ld.REACT_NATIVE:ld.JS,i={main_sdk_info:"chat/".concat(r,"/").concat(Bu.SDK_VERSION),device_os_platform:uw()?"mobile-web":"web",os_version:Bu.OS_VERSION};if(t){var a=t.sendbirdExtensions,s=t.deviceOS,o=t.customData,l=o===void 0?{}:o;s.version&&(i.os_version=s.version),s.platform&&(i.device_os_platform=s.platform),a.length>0&&(i.extension_sdk_info=a.map(function(c){var h=c.product,f=c.platform,p=c.version;return"".concat(h,"/").concat(f,"/").concat(p)}).join(",")),Object.keys(i).forEach(function(c){return delete l[c]}),Object.keys(l).length>0&&(i=z(z({},i),l))}var u=n._getFrameWork();return u&&(i.javascript_framework=u),Object.entries(i).map(function(c){var h=Ge(c,2),f=h[0],p=h[1];return"".concat(f,"=").concat(p)}).join("&")},e.userAgentWithExtension=function(t){var r=I1()?"reactnative":"JS",i=t.sb_syncmanager?"s".concat(t.sb_syncmanager):"",a=t.sb_uikit?"u".concat(t.sb_uikit):"",s=t["device-os-platform"]?"o".concat(t["device-os-platform"]):uw()?"omobile-web":"oweb";return"".concat(r,"/c").concat(Bu.SDK_VERSION,"/").concat(i,"/").concat(a,"/").concat(s)},e}(),ra=function(){var e=this;this.promise=new Promise(function(n,t){e.resolve=n,e.reject=function(r){t(r)}})},i0=function(e){function n(t){var r=e.call(this)||this;return r.requestId=t.requestId,r}return k(n,e),n}(Gn),Zk=function(e){function n(t){var r=e.call(this)||this;return r.method=fe.DELETE,r.path="".concat(mn(t.channelType),"/").concat(t.channelUrl,"/messages/").concat(t.messageId),t.messageToken&&(r.params=Ae({mesg_token:t.messageToken})),r}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var Jk=function(e){function n(t,r,i){var a,s=this;return(s=e.call(this,t,"DELM",i)||this).channelUrl=i.channel_url,s.channelType=i.channel_type,s.messageId=Number(i.msg_id),s.silent=i.silent,s.messageCreatedAt=i.message_created_at?Number(i.message_created_at):-1,s.senderId=(a=i.sender_id)!==null&&a!==void 0?a:void 0,s}return k(n,e),n}(Qn),wz=function(){function e(n,t){var r=t.session,i=t.sdkState,a=t.dispatcher,s=t.logger,o=t.useFetchCompat,l=o!==void 0&&o,u=this;this._abortControl=new Map,this._shouldImportFetchCompat=!1,this._iid=n,this._session=r,this._sdkState=i,this._dispatcher=a,this._dispatcher.on(function(c){c instanceof Tz&&u.cancel(c.requestId)}),this._logger=s,this._shouldImportFetchCompat=l}return e.prototype._createHeader=function(n,t){var r=this._sdkState,i=r.appId,a=r.appVersion,s=r.sendbirdRuntimeEnvironment,o=z(z({},n.headers),{SendBird:"JS,".concat(Bu.OS_VERSION,",").concat(Bu.SDK_VERSION,",").concat(i).concat(a?",".concat(a):""),"SB-User-Agent":r0.userAgentWithExtension(this._sdkState.extensions),"Request-Sent-Timestamp":Date.now().toString(),"SB-SDK-User-Agent":r0.sendbirdSdkUserAgentWithExtension(s)});return t||(o["Content-Type"]="application/json; charset=utf-8"),o["App-Id"]=i,n.requireAuth?!n.hasSessionKey&&this._session.hasSession&&(o["Session-key"]=this._session.sessionKey):this._session.authToken&&(o["Access-token"]=this._session.authToken),o},e.prototype._statLogApiResult=function(n,t,r){n.path.includes("/sdk/statistics")||this._dispatcher.dispatch(new Ol(new Kn({type:kn.API_RESULT,data:{endpoint:n.path,method:n.method,success:!r,latency:Date.now()-t,error_code:r==null?void 0:r.code,error_description:r==null?void 0:r.message}})))},e.prototype._isBodyRequired=function(n){var t=n.method;return t!==fe.GET&&(t!==fe.DELETE||n instanceof Zk)},e.prototype.send=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I;return T(this,function(w){switch(w.label){case 0:t=n.path,r=n.method,i=n.uploadProgressHandler,a=this._isBodyRequired(n),s=this._sdkState.api,o="".concat(s.host).concat(t).concat(a?"":n.query),l=a?n.payload:null,u=this._createHeader(n,l instanceof FormData?l:void 0),c=new AbortController,h=c.signal,this._abortControl.set(n.requestId,c),f=Date.now(),w.label=1;case 1:return w.trys.push([1,13,,14]),i?[4,Gv(()=>import("./__bundle-8c2483b9-2V7Rnb8N.js"),[])]:[3,6];case 2:p=w.sent().xmlHttpRequest,w.label=3;case 3:return w.trys.push([3,5,,6]),[4,p(this._iid,{requestId:n.requestId,method:n.method,url:o,headers:u,data:l??void 0,uploadProgressHandler:i})];case 4:return _=w.sent(),this._logger.debug("receive api response",n.requestId),this._statLogApiResult(n,f),[2,_];case 5:if(!((g=w.sent())instanceof Q&&g.code===Le.XMLHTTPREQUEST_NOT_SUPPORTED))throw g;return this._logger.debug("XMLHttpRequest is not available in this environment. progressHandler is ignored."),[3,6];case 6:return this._shouldImportFetchCompat&&(this._shouldImportFetchCompat=!1,(typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof global<"u"&&global||{fetch:null}).fetch=null),typeof AbortController<"u"?[3,8]:[4,Gv(()=>Promise.resolve().then(()=>G_e),void 0)];case 7:w.sent(),w.label=8;case 8:return typeof fetch=="function"?[3,10]:[4,Gv(()=>import("./__bundle-46d64517-CuIdjffc.js").then(R=>R._),[])];case 9:w.sent(),w.label=10;case 10:return[4,fetch(o,{method:r,body:l,headers:u,signal:h})];case 11:return[4,(C=w.sent()).json()];case 12:if(E=w.sent(),C.ok||C.redirected)return this._logger.debug("receive api response",n.requestId),this._statLogApiResult(n,f),[2,new _e(this._iid,E)];if(E){if((y=new Q(E)).isSessionExpiredError){if(this._dispatcher.dispatch(new Zh({reason:y.code,message:y.message})),!(n instanceof AN))return S=new ra,this._dispatcher.dispatch(new Xk({request:n,deferred:S,error:y})),[2,S.promise];throw y}throw y.isSessionInvalidatedError&&this._dispatcher.dispatch(new Zh({reason:y.code,message:y.message})),y}throw Q.requestFailed;case 13:throw I=w.sent(),this._statLogApiResult(n,f,I),I instanceof Q?(this._logger.debug("fail api request",I),I):(I==null?void 0:I.name)==="AbortError"?Q.requestCanceled:(this._logger.debug("fail api request",I),Q.networkError);case 14:return[2]}})})},e.prototype.cancel=function(n){this._abortControl.has(n)&&(this._abortControl.get(n).abort(),this._abortControl.delete(n)),this._dispatcher.dispatch(new i0({requestId:n}))},e.prototype.cancelAll=function(){var n,t;try{for(var r=ye(this._abortControl.values()),i=r.next();!i.done;i=r.next())i.value.abort()}catch(a){n={error:a}}finally{try{i&&!i.done&&(t=r.return)&&t.call(r)}finally{if(n)throw n.error}}this._abortControl.clear(),this._dispatcher.dispatch(new i0({}))},e}(),vt=function(){};function df(e){let n=e.length;for(;--n>=0;)e[n]=0}const wN=256,ex=286,Vv=30,zv=15,M1=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),vg=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),Rz=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),cw=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),_l=new Array(576);df(_l);const jv=new Array(60);df(jv);const Ap=new Array(512);df(Ap);const qv=new Array(256);df(qv);const RN=new Array(29);df(RN);const a0=new Array(Vv);function _b(e,n,t,r,i){this.static_tree=e,this.extra_bits=n,this.extra_base=t,this.elems=r,this.max_length=i,this.has_stree=e&&e.length}let dw,hw,fw;function gb(e,n){this.dyn_tree=e,this.max_code=0,this.stat_desc=n}df(a0);const tx=e=>e<256?Ap[e]:Ap[256+(e>>>7)],wp=(e,n)=>{e.pending_buf[e.pending++]=255&n,e.pending_buf[e.pending++]=n>>>8&255},xa=(e,n,t)=>{e.bi_valid>16-t?(e.bi_buf|=n<<e.bi_valid&65535,wp(e,e.bi_buf),e.bi_buf=n>>16-e.bi_valid,e.bi_valid+=t-16):(e.bi_buf|=n<<e.bi_valid&65535,e.bi_valid+=t)},$o=(e,n,t)=>{xa(e,t[2*n],t[2*n+1])},nx=(e,n)=>{let t=0;do t|=1&e,e>>>=1,t<<=1;while(--n>0);return t>>>1},rx=(e,n,t)=>{const r=new Array(16);let i,a,s=0;for(i=1;i<=zv;i++)s=s+t[i-1]<<1,r[i]=s;for(a=0;a<=n;a++){let o=e[2*a+1];o!==0&&(e[2*a]=nx(r[o]++,o))}},ix=e=>{let n;for(n=0;n<ex;n++)e.dyn_ltree[2*n]=0;for(n=0;n<Vv;n++)e.dyn_dtree[2*n]=0;for(n=0;n<19;n++)e.bl_tree[2*n]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},ax=e=>{e.bi_valid>8?wp(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},vw=(e,n,t,r)=>{const i=2*n,a=2*t;return e[i]<e[a]||e[i]===e[a]&&r[n]<=r[t]},Eb=(e,n,t)=>{const r=e.heap[t];let i=t<<1;for(;i<=e.heap_len&&(i<e.heap_len&&vw(n,e.heap[i+1],e.heap[i],e.depth)&&i++,!vw(n,r,e.heap[i],e.depth));)e.heap[t]=e.heap[i],t=i,i<<=1;e.heap[t]=r},pw=(e,n,t)=>{let r,i,a,s,o=0;if(e.sym_next!==0)do r=255&e.pending_buf[e.sym_buf+o++],r+=(255&e.pending_buf[e.sym_buf+o++])<<8,i=e.pending_buf[e.sym_buf+o++],r===0?$o(e,i,n):(a=qv[i],$o(e,a+wN+1,n),s=M1[a],s!==0&&(i-=RN[a],xa(e,i,s)),r--,a=tx(r),$o(e,a,t),s=vg[a],s!==0&&(r-=a0[a],xa(e,r,s)));while(o<e.sym_next);$o(e,256,n)},yb=(e,n)=>{const t=n.dyn_tree,r=n.stat_desc.static_tree,i=n.stat_desc.has_stree,a=n.stat_desc.elems;let s,o,l,u=-1;for(e.heap_len=0,e.heap_max=573,s=0;s<a;s++)t[2*s]!==0?(e.heap[++e.heap_len]=u=s,e.depth[s]=0):t[2*s+1]=0;for(;e.heap_len<2;)l=e.heap[++e.heap_len]=u<2?++u:0,t[2*l]=1,e.depth[l]=0,e.opt_len--,i&&(e.static_len-=r[2*l+1]);for(n.max_code=u,s=e.heap_len>>1;s>=1;s--)Eb(e,t,s);l=a;do s=e.heap[1],e.heap[1]=e.heap[e.heap_len--],Eb(e,t,1),o=e.heap[1],e.heap[--e.heap_max]=s,e.heap[--e.heap_max]=o,t[2*l]=t[2*s]+t[2*o],e.depth[l]=(e.depth[s]>=e.depth[o]?e.depth[s]:e.depth[o])+1,t[2*s+1]=t[2*o+1]=l,e.heap[1]=l++,Eb(e,t,1);while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],((c,h)=>{const f=h.dyn_tree,p=h.max_code,_=h.stat_desc.static_tree,g=h.stat_desc.has_stree,C=h.stat_desc.extra_bits,E=h.stat_desc.extra_base,y=h.stat_desc.max_length;let S,I,w,R,A,U,O=0;for(R=0;R<=zv;R++)c.bl_count[R]=0;for(f[2*c.heap[c.heap_max]+1]=0,S=c.heap_max+1;S<573;S++)I=c.heap[S],R=f[2*f[2*I+1]+1]+1,R>y&&(R=y,O++),f[2*I+1]=R,I>p||(c.bl_count[R]++,A=0,I>=E&&(A=C[I-E]),U=f[2*I],c.opt_len+=U*(R+A),g&&(c.static_len+=U*(_[2*I+1]+A)));if(O!==0){do{for(R=y-1;c.bl_count[R]===0;)R--;c.bl_count[R]--,c.bl_count[R+1]+=2,c.bl_count[y]--,O-=2}while(O>0);for(R=y;R!==0;R--)for(I=c.bl_count[R];I!==0;)w=c.heap[--S],w>p||(f[2*w+1]!==R&&(c.opt_len+=(R-f[2*w+1])*f[2*w],f[2*w+1]=R),I--)}})(e,n),rx(t,u,e.bl_count)},mw=(e,n,t)=>{let r,i,a=-1,s=n[1],o=0,l=7,u=4;for(s===0&&(l=138,u=3),n[2*(t+1)+1]=65535,r=0;r<=t;r++)i=s,s=n[2*(r+1)+1],++o<l&&i===s||(o<u?e.bl_tree[2*i]+=o:i!==0?(i!==a&&e.bl_tree[2*i]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,a=i,s===0?(l=138,u=3):i===s?(l=6,u=3):(l=7,u=4))},_w=(e,n,t)=>{let r,i,a=-1,s=n[1],o=0,l=7,u=4;for(s===0&&(l=138,u=3),r=0;r<=t;r++)if(i=s,s=n[2*(r+1)+1],!(++o<l&&i===s)){if(o<u)do $o(e,i,e.bl_tree);while(--o!=0);else i!==0?(i!==a&&($o(e,i,e.bl_tree),o--),$o(e,16,e.bl_tree),xa(e,o-3,2)):o<=10?($o(e,17,e.bl_tree),xa(e,o-3,3)):($o(e,18,e.bl_tree),xa(e,o-11,7));o=0,a=i,s===0?(l=138,u=3):i===s?(l=6,u=3):(l=7,u=4)}};let gw=!1;const sx=(e,n,t,r)=>{xa(e,0+(r?1:0),3),ax(e),wp(e,t),wp(e,~t),t&&e.pending_buf.set(e.window.subarray(n,n+t),e.pending),e.pending+=t};var Oz=(e,n,t,r)=>{let i,a,s=0;e.level>0?(e.strm.data_type===2&&(e.strm.data_type=(o=>{let l,u=4093624447;for(l=0;l<=31;l++,u>>>=1)if(1&u&&o.dyn_ltree[2*l]!==0)return 0;if(o.dyn_ltree[18]!==0||o.dyn_ltree[20]!==0||o.dyn_ltree[26]!==0)return 1;for(l=32;l<wN;l++)if(o.dyn_ltree[2*l]!==0)return 1;return 0})(e)),yb(e,e.l_desc),yb(e,e.d_desc),s=(o=>{let l;for(mw(o,o.dyn_ltree,o.l_desc.max_code),mw(o,o.dyn_dtree,o.d_desc.max_code),yb(o,o.bl_desc),l=18;l>=3&&o.bl_tree[2*cw[l]+1]===0;l--);return o.opt_len+=3*(l+1)+5+5+4,l})(e),i=e.opt_len+3+7>>>3,a=e.static_len+3+7>>>3,a<=i&&(i=a)):i=a=t+5,t+4<=i&&n!==-1?sx(e,n,t,r):e.strategy===4||a===i?(xa(e,2+(r?1:0),3),pw(e,_l,jv)):(xa(e,4+(r?1:0),3),((o,l,u,c)=>{let h;for(xa(o,l-257,5),xa(o,u-1,5),xa(o,c-4,4),h=0;h<c;h++)xa(o,o.bl_tree[2*cw[h]+1],3);_w(o,o.dyn_ltree,l-1),_w(o,o.dyn_dtree,u-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),pw(e,e.dyn_ltree,e.dyn_dtree)),ix(e),r&&ax(e)},Dz={_tr_init:e=>{gw||((()=>{let n,t,r,i,a;const s=new Array(16);for(r=0,i=0;i<28;i++)for(RN[i]=r,n=0;n<1<<M1[i];n++)qv[r++]=i;for(qv[r-1]=i,a=0,i=0;i<16;i++)for(a0[i]=a,n=0;n<1<<vg[i];n++)Ap[a++]=i;for(a>>=7;i<Vv;i++)for(a0[i]=a<<7,n=0;n<1<<vg[i]-7;n++)Ap[256+a++]=i;for(t=0;t<=zv;t++)s[t]=0;for(n=0;n<=143;)_l[2*n+1]=8,n++,s[8]++;for(;n<=255;)_l[2*n+1]=9,n++,s[9]++;for(;n<=279;)_l[2*n+1]=7,n++,s[7]++;for(;n<=287;)_l[2*n+1]=8,n++,s[8]++;for(rx(_l,287,s),n=0;n<Vv;n++)jv[2*n+1]=5,jv[2*n]=nx(n,5);dw=new _b(_l,M1,257,ex,zv),hw=new _b(jv,vg,0,Vv,zv),fw=new _b(new Array(0),Rz,0,19,7)})(),gw=!0),e.l_desc=new gb(e.dyn_ltree,dw),e.d_desc=new gb(e.dyn_dtree,hw),e.bl_desc=new gb(e.bl_tree,fw),e.bi_buf=0,e.bi_valid=0,ix(e)},_tr_stored_block:sx,_tr_flush_block:Oz,_tr_tally:(e,n,t)=>(e.pending_buf[e.sym_buf+e.sym_next++]=n,e.pending_buf[e.sym_buf+e.sym_next++]=n>>8,e.pending_buf[e.sym_buf+e.sym_next++]=t,n===0?e.dyn_ltree[2*t]++:(e.matches++,n--,e.dyn_ltree[2*(qv[t]+wN+1)]++,e.dyn_dtree[2*tx(n)]++),e.sym_next===e.sym_end),_tr_align:e=>{xa(e,2,3),$o(e,256,_l),(n=>{n.bi_valid===16?(wp(n,n.bi_buf),n.bi_buf=0,n.bi_valid=0):n.bi_valid>=8&&(n.pending_buf[n.pending++]=255&n.bi_buf,n.bi_buf>>=8,n.bi_valid-=8)})(e)}},Kv=(e,n,t,r)=>{let i=65535&e,a=e>>>16&65535,s=0;for(;t!==0;){s=t>2e3?2e3:t,t-=s;do i=i+n[r++]|0,a=a+i|0;while(--s);i%=65521,a%=65521}return i|a<<16};const Uz=new Uint32Array((()=>{let e,n=[];for(var t=0;t<256;t++){e=t;for(var r=0;r<8;r++)e=1&e?3988292384^e>>>1:e>>>1;n[t]=e}return n})());var Si=(e,n,t,r)=>{const i=Uz,a=r+t;e^=-1;for(let s=r;s<a;s++)e=e>>>8^i[255&(e^n[s])];return~e},gd={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},em={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};const{_tr_init:Lz,_tr_stored_block:A1,_tr_flush_block:kz,_tr_tally:Hu,_tr_align:xz}=Dz,{Z_NO_FLUSH:Gu,Z_PARTIAL_FLUSH:Pz,Z_FULL_FLUSH:Fz,Z_FINISH:Ps,Z_BLOCK:Ew,Z_OK:ki,Z_STREAM_END:yw,Z_STREAM_ERROR:Fo,Z_DATA_ERROR:Bz,Z_BUF_ERROR:bb,Z_DEFAULT_COMPRESSION:Hz,Z_FILTERED:Gz,Z_HUFFMAN_ONLY:C_,Z_RLE:$z,Z_FIXED:Vz,Z_DEFAULT_STRATEGY:zz,Z_UNKNOWN:jz,Z_DEFLATED:s0}=em,Jc=258,Ko=262,Fh=42,Bc=113,Tv=666,Hc=(e,n)=>(e.msg=gd[n],n),bw=e=>2*e-(e>4?9:0),Tu=e=>{let n=e.length;for(;--n>=0;)e[n]=0},qz=e=>{let n,t,r,i=e.w_size;n=e.hash_size,r=n;do t=e.head[--r],e.head[r]=t>=i?t-i:0;while(--n);n=i,r=n;do t=e.prev[--r],e.prev[r]=t>=i?t-i:0;while(--n)};let $u=(e,n,t)=>(n<<e.hash_shift^t)&e.hash_mask;const ns=e=>{const n=e.state;let t=n.pending;t>e.avail_out&&(t=e.avail_out),t!==0&&(e.output.set(n.pending_buf.subarray(n.pending_out,n.pending_out+t),e.next_out),e.next_out+=t,n.pending_out+=t,e.total_out+=t,e.avail_out-=t,n.pending-=t,n.pending===0&&(n.pending_out=0))},os=(e,n)=>{kz(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,n),e.block_start=e.strstart,ns(e.strm)},Jn=(e,n)=>{e.pending_buf[e.pending++]=n},rv=(e,n)=>{e.pending_buf[e.pending++]=n>>>8&255,e.pending_buf[e.pending++]=255&n},w1=(e,n,t,r)=>{let i=e.avail_in;return i>r&&(i=r),i===0?0:(e.avail_in-=i,n.set(e.input.subarray(e.next_in,e.next_in+i),t),e.state.wrap===1?e.adler=Kv(e.adler,n,i,t):e.state.wrap===2&&(e.adler=Si(e.adler,n,i,t)),e.next_in+=i,e.total_in+=i,i)},ox=(e,n)=>{let t,r,i=e.max_chain_length,a=e.strstart,s=e.prev_length,o=e.nice_match;const l=e.strstart>e.w_size-Ko?e.strstart-(e.w_size-Ko):0,u=e.window,c=e.w_mask,h=e.prev,f=e.strstart+Jc;let p=u[a+s-1],_=u[a+s];e.prev_length>=e.good_match&&(i>>=2),o>e.lookahead&&(o=e.lookahead);do if(t=n,u[t+s]===_&&u[t+s-1]===p&&u[t]===u[a]&&u[++t]===u[a+1]){a+=2,t++;do;while(u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&u[++a]===u[++t]&&a<f);if(r=Jc-(f-a),a=f-Jc,r>s){if(e.match_start=n,s=r,r>=o)break;p=u[a+s-1],_=u[a+s]}}while((n=h[n&c])>l&&--i!=0);return s<=e.lookahead?s:e.lookahead},Rh=e=>{const n=e.w_size;let t,r,i;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=n+(n-Ko)&&(e.window.set(e.window.subarray(n,n+n-r),0),e.match_start-=n,e.strstart-=n,e.block_start-=n,e.insert>e.strstart&&(e.insert=e.strstart),qz(e),r+=n),e.strm.avail_in===0)break;if(t=w1(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=t,e.lookahead+e.insert>=3)for(i=e.strstart-e.insert,e.ins_h=e.window[i],e.ins_h=$u(e,e.ins_h,e.window[i+1]);e.insert&&(e.ins_h=$u(e,e.ins_h,e.window[i+3-1]),e.prev[i&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=i,i++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<Ko&&e.strm.avail_in!==0)},lx=(e,n)=>{let t,r,i,a=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,s=0,o=e.strm.avail_in;do{if(t=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,r=e.strstart-e.block_start,t>r+e.strm.avail_in&&(t=r+e.strm.avail_in),t>i&&(t=i),t<a&&(t===0&&n!==Ps||n===Gu||t!==r+e.strm.avail_in)))break;s=n===Ps&&t===r+e.strm.avail_in?1:0,A1(e,0,0,s),e.pending_buf[e.pending-4]=t,e.pending_buf[e.pending-3]=t>>8,e.pending_buf[e.pending-2]=~t,e.pending_buf[e.pending-1]=~t>>8,ns(e.strm),r&&(r>t&&(r=t),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+r),e.strm.next_out),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r,e.block_start+=r,t-=r),t&&(w1(e.strm,e.strm.output,e.strm.next_out,t),e.strm.next_out+=t,e.strm.avail_out-=t,e.strm.total_out+=t)}while(s===0);return o-=e.strm.avail_in,o&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s?4:n!==Gu&&n!==Ps&&e.strm.avail_in===0&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(w1(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i,a=i>e.w_size?e.w_size:i,r=e.strstart-e.block_start,(r>=a||(r||n===Ps)&&n!==Gu&&e.strm.avail_in===0&&r<=i)&&(t=r>i?i:r,s=n===Ps&&e.strm.avail_in===0&&t===r?1:0,A1(e,e.block_start,t,s),e.block_start+=t,ns(e.strm)),s?3:1)},Cb=(e,n)=>{let t,r;for(;;){if(e.lookahead<Ko){if(Rh(e),e.lookahead<Ko&&n===Gu)return 1;if(e.lookahead===0)break}if(t=0,e.lookahead>=3&&(e.ins_h=$u(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),t!==0&&e.strstart-t<=e.w_size-Ko&&(e.match_length=ox(e,t)),e.match_length>=3)if(r=Hu(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=$u(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(--e.match_length!=0);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=$u(e,e.ins_h,e.window[e.strstart+1]);else r=Hu(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(os(e,!1),e.strm.avail_out===0))return 1}return e.insert=e.strstart<2?e.strstart:2,n===Ps?(os(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(os(e,!1),e.strm.avail_out===0)?1:2},lh=(e,n)=>{let t,r,i;for(;;){if(e.lookahead<Ko){if(Rh(e),e.lookahead<Ko&&n===Gu)return 1;if(e.lookahead===0)break}if(t=0,e.lookahead>=3&&(e.ins_h=$u(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,t!==0&&e.prev_length<e.max_lazy_match&&e.strstart-t<=e.w_size-Ko&&(e.match_length=ox(e,t),e.match_length<=5&&(e.strategy===Gz||e.match_length===3&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-3,r=Hu(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=i&&(e.ins_h=$u(e,e.ins_h,e.window[e.strstart+3-1]),t=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(--e.prev_length!=0);if(e.match_available=0,e.match_length=2,e.strstart++,r&&(os(e,!1),e.strm.avail_out===0))return 1}else if(e.match_available){if(r=Hu(e,0,e.window[e.strstart-1]),r&&os(e,!1),e.strstart++,e.lookahead--,e.strm.avail_out===0)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(r=Hu(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,n===Ps?(os(e,!0),e.strm.avail_out===0?3:4):e.sym_next&&(os(e,!1),e.strm.avail_out===0)?1:2};function ko(e,n,t,r,i){this.good_length=e,this.max_lazy=n,this.nice_length=t,this.max_chain=r,this.func=i}const Nv=[new ko(0,0,0,0,lx),new ko(4,4,8,4,Cb),new ko(4,5,16,8,Cb),new ko(4,6,32,32,Cb),new ko(4,4,16,16,lh),new ko(8,16,32,32,lh),new ko(8,16,128,128,lh),new ko(8,32,128,256,lh),new ko(32,128,258,1024,lh),new ko(32,258,258,4096,lh)];function Kz(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=s0,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(1146),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),Tu(this.dyn_ltree),Tu(this.dyn_dtree),Tu(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),Tu(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),Tu(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}const Iv=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.status!==Fh&&n.status!==57&&n.status!==69&&n.status!==73&&n.status!==91&&n.status!==103&&n.status!==Bc&&n.status!==Tv?1:0},ux=e=>{if(Iv(e))return Hc(e,Fo);e.total_in=e.total_out=0,e.data_type=jz;const n=e.state;return n.pending=0,n.pending_out=0,n.wrap<0&&(n.wrap=-n.wrap),n.status=n.wrap===2?57:n.wrap?Fh:Bc,e.adler=n.wrap===2?0:1,n.last_flush=-2,Lz(n),ki},cx=e=>{const n=ux(e);var t;return n===ki&&((t=e.state).window_size=2*t.w_size,Tu(t.head),t.max_lazy_match=Nv[t.level].max_lazy,t.good_match=Nv[t.level].good_length,t.nice_match=Nv[t.level].nice_length,t.max_chain_length=Nv[t.level].max_chain,t.strstart=0,t.block_start=0,t.lookahead=0,t.insert=0,t.match_length=t.prev_length=2,t.match_available=0,t.ins_h=0),n},Cw=(e,n,t,r,i,a)=>{if(!e)return Fo;let s=1;if(n===Hz&&(n=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),i<1||i>9||t!==s0||r<8||r>15||n<0||n>9||a<0||a>Vz||r===8&&s!==1)return Hc(e,Fo);r===8&&(r=9);const o=new Kz;return e.state=o,o.strm=e,o.status=Fh,o.wrap=s,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=i+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<i+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=3*(o.lit_bufsize-1),o.level=n,o.strategy=a,o.method=t,cx(e)};var Wv={deflateInit:(e,n)=>Cw(e,n,s0,15,8,zz),deflateInit2:Cw,deflateReset:cx,deflateResetKeep:ux,deflateSetHeader:(e,n)=>Iv(e)||e.state.wrap!==2?Fo:(e.state.gzhead=n,ki),deflate:(e,n)=>{if(Iv(e)||n>Ew||n<0)return e?Hc(e,Fo):Fo;const t=e.state;if(!e.output||e.avail_in!==0&&!e.input||t.status===Tv&&n!==Ps)return Hc(e,e.avail_out===0?bb:Fo);const r=t.last_flush;if(t.last_flush=n,t.pending!==0){if(ns(e),e.avail_out===0)return t.last_flush=-1,ki}else if(e.avail_in===0&&bw(n)<=bw(r)&&n!==Ps)return Hc(e,bb);if(t.status===Tv&&e.avail_in!==0)return Hc(e,bb);if(t.status===Fh&&t.wrap===0&&(t.status=Bc),t.status===Fh){let i=s0+(t.w_bits-8<<4)<<8,a=-1;if(a=t.strategy>=C_||t.level<2?0:t.level<6?1:t.level===6?2:3,i|=a<<6,t.strstart!==0&&(i|=32),i+=31-i%31,rv(t,i),t.strstart!==0&&(rv(t,e.adler>>>16),rv(t,65535&e.adler)),e.adler=1,t.status=Bc,ns(e),t.pending!==0)return t.last_flush=-1,ki}if(t.status===57){if(e.adler=0,Jn(t,31),Jn(t,139),Jn(t,8),t.gzhead)Jn(t,(t.gzhead.text?1:0)+(t.gzhead.hcrc?2:0)+(t.gzhead.extra?4:0)+(t.gzhead.name?8:0)+(t.gzhead.comment?16:0)),Jn(t,255&t.gzhead.time),Jn(t,t.gzhead.time>>8&255),Jn(t,t.gzhead.time>>16&255),Jn(t,t.gzhead.time>>24&255),Jn(t,t.level===9?2:t.strategy>=C_||t.level<2?4:0),Jn(t,255&t.gzhead.os),t.gzhead.extra&&t.gzhead.extra.length&&(Jn(t,255&t.gzhead.extra.length),Jn(t,t.gzhead.extra.length>>8&255)),t.gzhead.hcrc&&(e.adler=Si(e.adler,t.pending_buf,t.pending,0)),t.gzindex=0,t.status=69;else if(Jn(t,0),Jn(t,0),Jn(t,0),Jn(t,0),Jn(t,0),Jn(t,t.level===9?2:t.strategy>=C_||t.level<2?4:0),Jn(t,3),t.status=Bc,ns(e),t.pending!==0)return t.last_flush=-1,ki}if(t.status===69){if(t.gzhead.extra){let i=t.pending,a=(65535&t.gzhead.extra.length)-t.gzindex;for(;t.pending+a>t.pending_buf_size;){let o=t.pending_buf_size-t.pending;if(t.pending_buf.set(t.gzhead.extra.subarray(t.gzindex,t.gzindex+o),t.pending),t.pending=t.pending_buf_size,t.gzhead.hcrc&&t.pending>i&&(e.adler=Si(e.adler,t.pending_buf,t.pending-i,i)),t.gzindex+=o,ns(e),t.pending!==0)return t.last_flush=-1,ki;i=0,a-=o}let s=new Uint8Array(t.gzhead.extra);t.pending_buf.set(s.subarray(t.gzindex,t.gzindex+a),t.pending),t.pending+=a,t.gzhead.hcrc&&t.pending>i&&(e.adler=Si(e.adler,t.pending_buf,t.pending-i,i)),t.gzindex=0}t.status=73}if(t.status===73){if(t.gzhead.name){let i,a=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=Si(e.adler,t.pending_buf,t.pending-a,a)),ns(e),t.pending!==0)return t.last_flush=-1,ki;a=0}i=t.gzindex<t.gzhead.name.length?255&t.gzhead.name.charCodeAt(t.gzindex++):0,Jn(t,i)}while(i!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=Si(e.adler,t.pending_buf,t.pending-a,a)),t.gzindex=0}t.status=91}if(t.status===91){if(t.gzhead.comment){let i,a=t.pending;do{if(t.pending===t.pending_buf_size){if(t.gzhead.hcrc&&t.pending>a&&(e.adler=Si(e.adler,t.pending_buf,t.pending-a,a)),ns(e),t.pending!==0)return t.last_flush=-1,ki;a=0}i=t.gzindex<t.gzhead.comment.length?255&t.gzhead.comment.charCodeAt(t.gzindex++):0,Jn(t,i)}while(i!==0);t.gzhead.hcrc&&t.pending>a&&(e.adler=Si(e.adler,t.pending_buf,t.pending-a,a))}t.status=103}if(t.status===103){if(t.gzhead.hcrc){if(t.pending+2>t.pending_buf_size&&(ns(e),t.pending!==0))return t.last_flush=-1,ki;Jn(t,255&e.adler),Jn(t,e.adler>>8&255),e.adler=0}if(t.status=Bc,ns(e),t.pending!==0)return t.last_flush=-1,ki}if(e.avail_in!==0||t.lookahead!==0||n!==Gu&&t.status!==Tv){let i=t.level===0?lx(t,n):t.strategy===C_?((a,s)=>{let o;for(;;){if(a.lookahead===0&&(Rh(a),a.lookahead===0)){if(s===Gu)return 1;break}if(a.match_length=0,o=Hu(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,o&&(os(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,s===Ps?(os(a,!0),a.strm.avail_out===0?3:4):a.sym_next&&(os(a,!1),a.strm.avail_out===0)?1:2})(t,n):t.strategy===$z?((a,s)=>{let o,l,u,c;const h=a.window;for(;;){if(a.lookahead<=Jc){if(Rh(a),a.lookahead<=Jc&&s===Gu)return 1;if(a.lookahead===0)break}if(a.match_length=0,a.lookahead>=3&&a.strstart>0&&(u=a.strstart-1,l=h[u],l===h[++u]&&l===h[++u]&&l===h[++u])){c=a.strstart+Jc;do;while(l===h[++u]&&l===h[++u]&&l===h[++u]&&l===h[++u]&&l===h[++u]&&l===h[++u]&&l===h[++u]&&l===h[++u]&&u<c);a.match_length=Jc-(c-u),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=3?(o=Hu(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(o=Hu(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),o&&(os(a,!1),a.strm.avail_out===0))return 1}return a.insert=0,s===Ps?(os(a,!0),a.strm.avail_out===0?3:4):a.sym_next&&(os(a,!1),a.strm.avail_out===0)?1:2})(t,n):Nv[t.level].func(t,n);if(i!==3&&i!==4||(t.status=Tv),i===1||i===3)return e.avail_out===0&&(t.last_flush=-1),ki;if(i===2&&(n===Pz?xz(t):n!==Ew&&(A1(t,0,0,!1),n===Fz&&(Tu(t.head),t.lookahead===0&&(t.strstart=0,t.block_start=0,t.insert=0))),ns(e),e.avail_out===0))return t.last_flush=-1,ki}return n!==Ps?ki:t.wrap<=0?yw:(t.wrap===2?(Jn(t,255&e.adler),Jn(t,e.adler>>8&255),Jn(t,e.adler>>16&255),Jn(t,e.adler>>24&255),Jn(t,255&e.total_in),Jn(t,e.total_in>>8&255),Jn(t,e.total_in>>16&255),Jn(t,e.total_in>>24&255)):(rv(t,e.adler>>>16),rv(t,65535&e.adler)),ns(e),t.wrap>0&&(t.wrap=-t.wrap),t.pending!==0?ki:yw)},deflateEnd:e=>{if(Iv(e))return Fo;const n=e.state.status;return e.state=null,n===Bc?Hc(e,Bz):ki},deflateSetDictionary:(e,n)=>{let t=n.length;if(Iv(e))return Fo;const r=e.state,i=r.wrap;if(i===2||i===1&&r.status!==Fh||r.lookahead)return Fo;if(i===1&&(e.adler=Kv(e.adler,n,t,0)),r.wrap=0,t>=r.w_size){i===0&&(Tu(r.head),r.strstart=0,r.block_start=0,r.insert=0);let l=new Uint8Array(r.w_size);l.set(n.subarray(t-r.w_size,t),0),n=l,t=r.w_size}const a=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=t,e.next_in=0,e.input=n,Rh(r);r.lookahead>=3;){let l=r.strstart,u=r.lookahead-2;do r.ins_h=$u(r,r.ins_h,r.window[l+3-1]),r.prev[l&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=l,l++;while(--u);r.strstart=l,r.lookahead=2,Rh(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=o,e.avail_in=a,r.wrap=i,ki},deflateInfo:"pako deflate (from Nodeca project)"};const Wz=(e,n)=>Object.prototype.hasOwnProperty.call(e,n);var dx=function(e){const n=Array.prototype.slice.call(arguments,1);for(;n.length;){const t=n.shift();if(t){if(typeof t!="object")throw new TypeError(t+"must be non-object");for(const r in t)Wz(t,r)&&(e[r]=t[r])}}return e},hx=e=>{let n=0;for(let r=0,i=e.length;r<i;r++)n+=e[r].length;const t=new Uint8Array(n);for(let r=0,i=0,a=e.length;r<a;r++){let s=e[r];t.set(s,i),i+=s.length}return t};let fx=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{fx=!1}const Rp=new Uint8Array(256);for(let e=0;e<256;e++)Rp[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;Rp[254]=Rp[254]=1;var ON=e=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let n,t,r,i,a,s=e.length,o=0;for(i=0;i<s;i++)t=e.charCodeAt(i),(64512&t)==55296&&i+1<s&&(r=e.charCodeAt(i+1),(64512&r)==56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),o+=t<128?1:t<2048?2:t<65536?3:4;for(n=new Uint8Array(o),a=0,i=0;a<o;i++)t=e.charCodeAt(i),(64512&t)==55296&&i+1<s&&(r=e.charCodeAt(i+1),(64512&r)==56320&&(t=65536+(t-55296<<10)+(r-56320),i++)),t<128?n[a++]=t:t<2048?(n[a++]=192|t>>>6,n[a++]=128|63&t):t<65536?(n[a++]=224|t>>>12,n[a++]=128|t>>>6&63,n[a++]=128|63&t):(n[a++]=240|t>>>18,n[a++]=128|t>>>12&63,n[a++]=128|t>>>6&63,n[a++]=128|63&t);return n},Yz=(e,n)=>{const t=n||e.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,n));let r,i;const a=new Array(2*t);for(i=0,r=0;r<t;){let s=e[r++];if(s<128){a[i++]=s;continue}let o=Rp[s];if(o>4)a[i++]=65533,r+=o-1;else{for(s&=o===2?31:o===3?15:7;o>1&&r<t;)s=s<<6|63&e[r++],o--;o>1?a[i++]=65533:s<65536?a[i++]=s:(s-=65536,a[i++]=55296|s>>10&1023,a[i++]=56320|1023&s)}}return((s,o)=>{if(o<65534&&s.subarray&&fx)return String.fromCharCode.apply(null,s.length===o?s:s.subarray(0,o));let l="";for(let u=0;u<o;u++)l+=String.fromCharCode(s[u]);return l})(a,i)},Qz=(e,n)=>{(n=n||e.length)>e.length&&(n=e.length);let t=n-1;for(;t>=0&&(192&e[t])==128;)t--;return t<0||t===0?n:t+Rp[e[t]]>n?t:n},vx=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};const px=Object.prototype.toString,{Z_NO_FLUSH:Xz,Z_SYNC_FLUSH:Zz,Z_FULL_FLUSH:Jz,Z_FINISH:ej,Z_OK:o0,Z_STREAM_END:tj,Z_DEFAULT_COMPRESSION:nj,Z_DEFAULT_STRATEGY:rj,Z_DEFLATED:ij}=em;function Yv(e){this.options=dx({level:nj,method:ij,chunkSize:16384,windowBits:15,memLevel:8,strategy:rj},e||{});let n=this.options;n.raw&&n.windowBits>0?n.windowBits=-n.windowBits:n.gzip&&n.windowBits>0&&n.windowBits<16&&(n.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vx,this.strm.avail_out=0;let t=Wv.deflateInit2(this.strm,n.level,n.method,n.windowBits,n.memLevel,n.strategy);if(t!==o0)throw new Error(gd[t]);if(n.header&&Wv.deflateSetHeader(this.strm,n.header),n.dictionary){let r;if(r=typeof n.dictionary=="string"?ON(n.dictionary):px.call(n.dictionary)==="[object ArrayBuffer]"?new Uint8Array(n.dictionary):n.dictionary,t=Wv.deflateSetDictionary(this.strm,r),t!==o0)throw new Error(gd[t]);this._dict_set=!0}}function Sb(e,n){const t=new Yv(n);if(t.push(e,!0),t.err)throw t.msg||gd[t.err];return t.result}Yv.prototype.push=function(e,n){const t=this.strm,r=this.options.chunkSize;let i,a;if(this.ended)return!1;for(a=n===~~n?n:n===!0?ej:Xz,typeof e=="string"?t.input=ON(e):px.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;)if(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),(a===Zz||a===Jz)&&t.avail_out<=6)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else{if(i=Wv.deflate(t,a),i===tj)return t.next_out>0&&this.onData(t.output.subarray(0,t.next_out)),i=Wv.deflateEnd(this.strm),this.onEnd(i),this.ended=!0,i===o0;if(t.avail_out!==0){if(a>0&&t.next_out>0)this.onData(t.output.subarray(0,t.next_out)),t.avail_out=0;else if(t.avail_in===0)break}else this.onData(t.output)}return!0},Yv.prototype.onData=function(e){this.chunks.push(e)},Yv.prototype.onEnd=function(e){e===o0&&(this.result=hx(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var aj={Deflate:Yv,deflate:Sb,deflateRaw:function(e,n){return(n=n||{}).raw=!0,Sb(e,n)},gzip:function(e,n){return(n=n||{}).gzip=!0,Sb(e,n)}};const S_=16209;var sj=function(e,n){let t,r,i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w,R,A,U,O;const B=e.state;t=e.next_in,U=e.input,r=t+(e.avail_in-5),i=e.next_out,O=e.output,a=i-(n-e.avail_out),s=i+(e.avail_out-257),o=B.dmax,l=B.wsize,u=B.whave,c=B.wnext,h=B.window,f=B.hold,p=B.bits,_=B.lencode,g=B.distcode,C=(1<<B.lenbits)-1,E=(1<<B.distbits)-1;e:do{p<15&&(f+=U[t++]<<p,p+=8,f+=U[t++]<<p,p+=8),y=_[f&C];t:for(;;){if(S=y>>>24,f>>>=S,p-=S,S=y>>>16&255,S===0)O[i++]=65535&y;else{if(!(16&S)){if(64&S){if(32&S){B.mode=16191;break e}e.msg="invalid literal/length code",B.mode=S_;break e}y=_[(65535&y)+(f&(1<<S)-1)];continue t}for(I=65535&y,S&=15,S&&(p<S&&(f+=U[t++]<<p,p+=8),I+=f&(1<<S)-1,f>>>=S,p-=S),p<15&&(f+=U[t++]<<p,p+=8,f+=U[t++]<<p,p+=8),y=g[f&E];;){if(S=y>>>24,f>>>=S,p-=S,S=y>>>16&255,16&S){if(w=65535&y,S&=15,p<S&&(f+=U[t++]<<p,p+=8,p<S&&(f+=U[t++]<<p,p+=8)),w+=f&(1<<S)-1,w>o){e.msg="invalid distance too far back",B.mode=S_;break e}if(f>>>=S,p-=S,S=i-a,w>S){if(S=w-S,S>u&&B.sane){e.msg="invalid distance too far back",B.mode=S_;break e}if(R=0,A=h,c===0){if(R+=l-S,S<I){I-=S;do O[i++]=h[R++];while(--S);R=i-w,A=O}}else if(c<S){if(R+=l+c-S,S-=c,S<I){I-=S;do O[i++]=h[R++];while(--S);if(R=0,c<I){S=c,I-=S;do O[i++]=h[R++];while(--S);R=i-w,A=O}}}else if(R+=c-S,S<I){I-=S;do O[i++]=h[R++];while(--S);R=i-w,A=O}for(;I>2;)O[i++]=A[R++],O[i++]=A[R++],O[i++]=A[R++],I-=3;I&&(O[i++]=A[R++],I>1&&(O[i++]=A[R++]))}else{R=i-w;do O[i++]=O[R++],O[i++]=O[R++],O[i++]=O[R++],I-=3;while(I>2);I&&(O[i++]=O[R++],I>1&&(O[i++]=O[R++]))}break}if(64&S){e.msg="invalid distance code",B.mode=S_;break e}y=g[(65535&y)+(f&(1<<S)-1)]}}break}}while(t<r&&i<s);I=p>>3,t-=I,p-=I<<3,f&=(1<<p)-1,e.next_in=t,e.next_out=i,e.avail_in=t<r?r-t+5:5-(t-r),e.avail_out=i<s?s-i+257:257-(i-s),B.hold=f,B.bits=p};const T_=15,oj=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),lj=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),uj=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),cj=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var Qv=(e,n,t,r,i,a,s,o)=>{const l=o.bits;let u,c,h,f,p,_,g=0,C=0,E=0,y=0,S=0,I=0,w=0,R=0,A=0,U=0,O=null;const B=new Uint16Array(16),F=new Uint16Array(16);let P,G,L,$=null;for(g=0;g<=T_;g++)B[g]=0;for(C=0;C<r;C++)B[n[t+C]]++;for(S=l,y=T_;y>=1&&B[y]===0;y--);if(S>y&&(S=y),y===0)return i[a++]=20971520,i[a++]=20971520,o.bits=1,0;for(E=1;E<y&&B[E]===0;E++);for(S<E&&(S=E),R=1,g=1;g<=T_;g++)if(R<<=1,R-=B[g],R<0)return-1;if(R>0&&(e===0||y!==1))return-1;for(F[1]=0,g=1;g<T_;g++)F[g+1]=F[g]+B[g];for(C=0;C<r;C++)n[t+C]!==0&&(s[F[n[t+C]]++]=C);if(e===0?(O=$=s,_=20):e===1?(O=oj,$=lj,_=257):(O=uj,$=cj,_=0),U=0,C=0,g=E,p=a,I=S,w=0,h=-1,A=1<<S,f=A-1,e===1&&A>852||e===2&&A>592)return 1;for(;;){P=g-w,s[C]+1<_?(G=0,L=s[C]):s[C]>=_?(G=$[s[C]-_],L=O[s[C]-_]):(G=96,L=0),u=1<<g-w,c=1<<I,E=c;do c-=u,i[p+(U>>w)+c]=P<<24|G<<16|L;while(c!==0);for(u=1<<g-1;U&u;)u>>=1;if(u!==0?(U&=u-1,U+=u):U=0,C++,--B[g]==0){if(g===y)break;g=n[t+s[C]]}if(g>S&&(U&f)!==h){for(w===0&&(w=S),p+=E,I=g-w,R=1<<I;I+w<y&&(R-=B[I+w],!(R<=0));)I++,R<<=1;if(A+=1<<I,e===1&&A>852||e===2&&A>592)return 1;h=U&f,i[h]=S<<24|I<<16|p-a}}return U!==0&&(i[p+U]=g-w<<24|64<<16),o.bits=S,0};const{Z_FINISH:Sw,Z_BLOCK:dj,Z_TREES:N_,Z_OK:Gc,Z_STREAM_END:hj,Z_NEED_DICT:fj,Z_STREAM_ERROR:Rs,Z_DATA_ERROR:Tw,Z_MEM_ERROR:Nw,Z_BUF_ERROR:vj,Z_DEFLATED:Iw}=em,aE=16180,I_=16190,hl=16191,Tb=16192,Nb=16194,M_=16199,A_=16200,Ib=16206,Ar=16209,Mw=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function pj(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const ed=e=>{if(!e)return 1;const n=e.state;return!n||n.strm!==e||n.mode<aE||n.mode>16211?1:0},mx=e=>{if(ed(e))return Rs;const n=e.state;return e.total_in=e.total_out=n.total=0,e.msg="",n.wrap&&(e.adler=1&n.wrap),n.mode=aE,n.last=0,n.havedict=0,n.flags=-1,n.dmax=32768,n.head=null,n.hold=0,n.bits=0,n.lencode=n.lendyn=new Int32Array(852),n.distcode=n.distdyn=new Int32Array(592),n.sane=1,n.back=-1,Gc},_x=e=>{if(ed(e))return Rs;const n=e.state;return n.wsize=0,n.whave=0,n.wnext=0,mx(e)},gx=(e,n)=>{let t;if(ed(e))return Rs;const r=e.state;return n<0?(t=0,n=-n):(t=5+(n>>4),n<48&&(n&=15)),n&&(n<8||n>15)?Rs:(r.window!==null&&r.wbits!==n&&(r.window=null),r.wrap=t,r.wbits=n,_x(e))},Aw=(e,n)=>{if(!e)return Rs;const t=new pj;e.state=t,t.strm=e,t.window=null,t.mode=aE;const r=gx(e,n);return r!==Gc&&(e.state=null),r};let Mb,Ab,ww=!0;const mj=e=>{if(ww){Mb=new Int32Array(512),Ab=new Int32Array(32);let n=0;for(;n<144;)e.lens[n++]=8;for(;n<256;)e.lens[n++]=9;for(;n<280;)e.lens[n++]=7;for(;n<288;)e.lens[n++]=8;for(Qv(1,e.lens,0,288,Mb,0,e.work,{bits:9}),n=0;n<32;)e.lens[n++]=5;Qv(2,e.lens,0,32,Ab,0,e.work,{bits:5}),ww=!1}e.lencode=Mb,e.lenbits=9,e.distcode=Ab,e.distbits=5},Rw=(e,n,t,r)=>{let i;const a=e.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),r>=a.wsize?(a.window.set(n.subarray(t-a.wsize,t),0),a.wnext=0,a.whave=a.wsize):(i=a.wsize-a.wnext,i>r&&(i=r),a.window.set(n.subarray(t-r,t-r+i),a.wnext),(r-=i)?(a.window.set(n.subarray(t-r,t),0),a.wnext=r,a.whave=a.wsize):(a.wnext+=i,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=i))),0};var Cl={inflateReset:_x,inflateReset2:gx,inflateResetKeep:mx,inflateInit:e=>Aw(e,15),inflateInit2:Aw,inflate:(e,n)=>{let t,r,i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w,R,A,U=0;const O=new Uint8Array(4);let B,F;const P=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(ed(e)||!e.output||!e.input&&e.avail_in!==0)return Rs;t=e.state,t.mode===hl&&(t.mode=Tb),s=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,u=t.hold,c=t.bits,h=o,f=l,A=Gc;e:for(;;)switch(t.mode){case aE:if(t.wrap===0){t.mode=Tb;break}for(;c<16;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}if(2&t.wrap&&u===35615){t.wbits===0&&(t.wbits=15),t.check=0,O[0]=255&u,O[1]=u>>>8&255,t.check=Si(t.check,O,2,0),u=0,c=0,t.mode=16181;break}if(t.head&&(t.head.done=!1),!(1&t.wrap)||(((255&u)<<8)+(u>>8))%31){e.msg="incorrect header check",t.mode=Ar;break}if((15&u)!==Iw){e.msg="unknown compression method",t.mode=Ar;break}if(u>>>=4,c-=4,R=8+(15&u),t.wbits===0&&(t.wbits=R),R>15||R>t.wbits){e.msg="invalid window size",t.mode=Ar;break}t.dmax=1<<t.wbits,t.flags=0,e.adler=t.check=1,t.mode=512&u?16189:hl,u=0,c=0;break;case 16181:for(;c<16;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}if(t.flags=u,(255&t.flags)!==Iw){e.msg="unknown compression method",t.mode=Ar;break}if(57344&t.flags){e.msg="unknown header flags set",t.mode=Ar;break}t.head&&(t.head.text=u>>8&1),512&t.flags&&4&t.wrap&&(O[0]=255&u,O[1]=u>>>8&255,t.check=Si(t.check,O,2,0)),u=0,c=0,t.mode=16182;case 16182:for(;c<32;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}t.head&&(t.head.time=u),512&t.flags&&4&t.wrap&&(O[0]=255&u,O[1]=u>>>8&255,O[2]=u>>>16&255,O[3]=u>>>24&255,t.check=Si(t.check,O,4,0)),u=0,c=0,t.mode=16183;case 16183:for(;c<16;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}t.head&&(t.head.xflags=255&u,t.head.os=u>>8),512&t.flags&&4&t.wrap&&(O[0]=255&u,O[1]=u>>>8&255,t.check=Si(t.check,O,2,0)),u=0,c=0,t.mode=16184;case 16184:if(1024&t.flags){for(;c<16;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}t.length=u,t.head&&(t.head.extra_len=u),512&t.flags&&4&t.wrap&&(O[0]=255&u,O[1]=u>>>8&255,t.check=Si(t.check,O,2,0)),u=0,c=0}else t.head&&(t.head.extra=null);t.mode=16185;case 16185:if(1024&t.flags&&(p=t.length,p>o&&(p=o),p&&(t.head&&(R=t.head.extra_len-t.length,t.head.extra||(t.head.extra=new Uint8Array(t.head.extra_len)),t.head.extra.set(r.subarray(a,a+p),R)),512&t.flags&&4&t.wrap&&(t.check=Si(t.check,r,p,a)),o-=p,a+=p,t.length-=p),t.length))break e;t.length=0,t.mode=16186;case 16186:if(2048&t.flags){if(o===0)break e;p=0;do R=r[a+p++],t.head&&R&&t.length<65536&&(t.head.name+=String.fromCharCode(R));while(R&&p<o);if(512&t.flags&&4&t.wrap&&(t.check=Si(t.check,r,p,a)),o-=p,a+=p,R)break e}else t.head&&(t.head.name=null);t.length=0,t.mode=16187;case 16187:if(4096&t.flags){if(o===0)break e;p=0;do R=r[a+p++],t.head&&R&&t.length<65536&&(t.head.comment+=String.fromCharCode(R));while(R&&p<o);if(512&t.flags&&4&t.wrap&&(t.check=Si(t.check,r,p,a)),o-=p,a+=p,R)break e}else t.head&&(t.head.comment=null);t.mode=16188;case 16188:if(512&t.flags){for(;c<16;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}if(4&t.wrap&&u!==(65535&t.check)){e.msg="header crc mismatch",t.mode=Ar;break}u=0,c=0}t.head&&(t.head.hcrc=t.flags>>9&1,t.head.done=!0),e.adler=t.check=0,t.mode=hl;break;case 16189:for(;c<32;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}e.adler=t.check=Mw(u),u=0,c=0,t.mode=I_;case I_:if(t.havedict===0)return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,t.hold=u,t.bits=c,fj;e.adler=t.check=1,t.mode=hl;case hl:if(n===dj||n===N_)break e;case Tb:if(t.last){u>>>=7&c,c-=7&c,t.mode=Ib;break}for(;c<3;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}switch(t.last=1&u,u>>>=1,c-=1,3&u){case 0:t.mode=16193;break;case 1:if(mj(t),t.mode=M_,n===N_){u>>>=2,c-=2;break e}break;case 2:t.mode=16196;break;case 3:e.msg="invalid block type",t.mode=Ar}u>>>=2,c-=2;break;case 16193:for(u>>>=7&c,c-=7&c;c<32;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}if((65535&u)!=(u>>>16^65535)){e.msg="invalid stored block lengths",t.mode=Ar;break}if(t.length=65535&u,u=0,c=0,t.mode=Nb,n===N_)break e;case Nb:t.mode=16195;case 16195:if(p=t.length,p){if(p>o&&(p=o),p>l&&(p=l),p===0)break e;i.set(r.subarray(a,a+p),s),o-=p,a+=p,l-=p,s+=p,t.length-=p;break}t.mode=hl;break;case 16196:for(;c<14;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}if(t.nlen=257+(31&u),u>>>=5,c-=5,t.ndist=1+(31&u),u>>>=5,c-=5,t.ncode=4+(15&u),u>>>=4,c-=4,t.nlen>286||t.ndist>30){e.msg="too many length or distance symbols",t.mode=Ar;break}t.have=0,t.mode=16197;case 16197:for(;t.have<t.ncode;){for(;c<3;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}t.lens[P[t.have++]]=7&u,u>>>=3,c-=3}for(;t.have<19;)t.lens[P[t.have++]]=0;if(t.lencode=t.lendyn,t.lenbits=7,B={bits:t.lenbits},A=Qv(0,t.lens,0,19,t.lencode,0,t.work,B),t.lenbits=B.bits,A){e.msg="invalid code lengths set",t.mode=Ar;break}t.have=0,t.mode=16198;case 16198:for(;t.have<t.nlen+t.ndist;){for(;U=t.lencode[u&(1<<t.lenbits)-1],C=U>>>24,E=U>>>16&255,y=65535&U,!(C<=c);){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}if(y<16)u>>>=C,c-=C,t.lens[t.have++]=y;else{if(y===16){for(F=C+2;c<F;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}if(u>>>=C,c-=C,t.have===0){e.msg="invalid bit length repeat",t.mode=Ar;break}R=t.lens[t.have-1],p=3+(3&u),u>>>=2,c-=2}else if(y===17){for(F=C+3;c<F;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}u>>>=C,c-=C,R=0,p=3+(7&u),u>>>=3,c-=3}else{for(F=C+7;c<F;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}u>>>=C,c-=C,R=0,p=11+(127&u),u>>>=7,c-=7}if(t.have+p>t.nlen+t.ndist){e.msg="invalid bit length repeat",t.mode=Ar;break}for(;p--;)t.lens[t.have++]=R}}if(t.mode===Ar)break;if(t.lens[256]===0){e.msg="invalid code -- missing end-of-block",t.mode=Ar;break}if(t.lenbits=9,B={bits:t.lenbits},A=Qv(1,t.lens,0,t.nlen,t.lencode,0,t.work,B),t.lenbits=B.bits,A){e.msg="invalid literal/lengths set",t.mode=Ar;break}if(t.distbits=6,t.distcode=t.distdyn,B={bits:t.distbits},A=Qv(2,t.lens,t.nlen,t.ndist,t.distcode,0,t.work,B),t.distbits=B.bits,A){e.msg="invalid distances set",t.mode=Ar;break}if(t.mode=M_,n===N_)break e;case M_:t.mode=A_;case A_:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,t.hold=u,t.bits=c,sj(e,f),s=e.next_out,i=e.output,l=e.avail_out,a=e.next_in,r=e.input,o=e.avail_in,u=t.hold,c=t.bits,t.mode===hl&&(t.back=-1);break}for(t.back=0;U=t.lencode[u&(1<<t.lenbits)-1],C=U>>>24,E=U>>>16&255,y=65535&U,!(C<=c);){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}if(E&&!(240&E)){for(S=C,I=E,w=y;U=t.lencode[w+((u&(1<<S+I)-1)>>S)],C=U>>>24,E=U>>>16&255,y=65535&U,!(S+C<=c);){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}u>>>=S,c-=S,t.back+=S}if(u>>>=C,c-=C,t.back+=C,t.length=y,E===0){t.mode=16205;break}if(32&E){t.back=-1,t.mode=hl;break}if(64&E){e.msg="invalid literal/length code",t.mode=Ar;break}t.extra=15&E,t.mode=16201;case 16201:if(t.extra){for(F=t.extra;c<F;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}t.length+=u&(1<<t.extra)-1,u>>>=t.extra,c-=t.extra,t.back+=t.extra}t.was=t.length,t.mode=16202;case 16202:for(;U=t.distcode[u&(1<<t.distbits)-1],C=U>>>24,E=U>>>16&255,y=65535&U,!(C<=c);){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}if(!(240&E)){for(S=C,I=E,w=y;U=t.distcode[w+((u&(1<<S+I)-1)>>S)],C=U>>>24,E=U>>>16&255,y=65535&U,!(S+C<=c);){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}u>>>=S,c-=S,t.back+=S}if(u>>>=C,c-=C,t.back+=C,64&E){e.msg="invalid distance code",t.mode=Ar;break}t.offset=y,t.extra=15&E,t.mode=16203;case 16203:if(t.extra){for(F=t.extra;c<F;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}t.offset+=u&(1<<t.extra)-1,u>>>=t.extra,c-=t.extra,t.back+=t.extra}if(t.offset>t.dmax){e.msg="invalid distance too far back",t.mode=Ar;break}t.mode=16204;case 16204:if(l===0)break e;if(p=f-l,t.offset>p){if(p=t.offset-p,p>t.whave&&t.sane){e.msg="invalid distance too far back",t.mode=Ar;break}p>t.wnext?(p-=t.wnext,_=t.wsize-p):_=t.wnext-p,p>t.length&&(p=t.length),g=t.window}else g=i,_=s-t.offset,p=t.length;p>l&&(p=l),l-=p,t.length-=p;do i[s++]=g[_++];while(--p);t.length===0&&(t.mode=A_);break;case 16205:if(l===0)break e;i[s++]=t.length,l--,t.mode=A_;break;case Ib:if(t.wrap){for(;c<32;){if(o===0)break e;o--,u|=r[a++]<<c,c+=8}if(f-=l,e.total_out+=f,t.total+=f,4&t.wrap&&f&&(e.adler=t.check=t.flags?Si(t.check,i,f,s-f):Kv(t.check,i,f,s-f)),f=l,4&t.wrap&&(t.flags?u:Mw(u))!==t.check){e.msg="incorrect data check",t.mode=Ar;break}u=0,c=0}t.mode=16207;case 16207:if(t.wrap&&t.flags){for(;c<32;){if(o===0)break e;o--,u+=r[a++]<<c,c+=8}if(4&t.wrap&&u!==(4294967295&t.total)){e.msg="incorrect length check",t.mode=Ar;break}u=0,c=0}t.mode=16208;case 16208:A=hj;break e;case Ar:A=Tw;break e;case 16210:return Nw;default:return Rs}return e.next_out=s,e.avail_out=l,e.next_in=a,e.avail_in=o,t.hold=u,t.bits=c,(t.wsize||f!==e.avail_out&&t.mode<Ar&&(t.mode<Ib||n!==Sw))&&Rw(e,e.output,e.next_out,f-e.avail_out),h-=e.avail_in,f-=e.avail_out,e.total_in+=h,e.total_out+=f,t.total+=f,4&t.wrap&&f&&(e.adler=t.check=t.flags?Si(t.check,i,f,e.next_out-f):Kv(t.check,i,f,e.next_out-f)),e.data_type=t.bits+(t.last?64:0)+(t.mode===hl?128:0)+(t.mode===M_||t.mode===Nb?256:0),(h===0&&f===0||n===Sw)&&A===Gc&&(A=vj),A},inflateEnd:e=>{if(ed(e))return Rs;let n=e.state;return n.window&&(n.window=null),e.state=null,Gc},inflateGetHeader:(e,n)=>{if(ed(e))return Rs;const t=e.state;return 2&t.wrap?(t.head=n,n.done=!1,Gc):Rs},inflateSetDictionary:(e,n)=>{const t=n.length;let r,i,a;return ed(e)?Rs:(r=e.state,r.wrap!==0&&r.mode!==I_?Rs:r.mode===I_&&(i=1,i=Kv(i,n,t,0),i!==r.check)?Tw:(a=Rw(e,n,t,t),a?(r.mode=16210,Nw):(r.havedict=1,Gc)))},inflateInfo:"pako inflate (from Nodeca project)"},_j=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};const Ex=Object.prototype.toString,{Z_NO_FLUSH:gj,Z_FINISH:Ej,Z_OK:Xv,Z_STREAM_END:wb,Z_NEED_DICT:Rb,Z_STREAM_ERROR:yj,Z_DATA_ERROR:Ow,Z_MEM_ERROR:bj}=em;function Zv(e){this.options=dx({chunkSize:65536,windowBits:15,to:""},e||{});const n=this.options;n.raw&&n.windowBits>=0&&n.windowBits<16&&(n.windowBits=-n.windowBits,n.windowBits===0&&(n.windowBits=-15)),!(n.windowBits>=0&&n.windowBits<16)||e&&e.windowBits||(n.windowBits+=32),n.windowBits>15&&n.windowBits<48&&(15&n.windowBits||(n.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new vx,this.strm.avail_out=0;let t=Cl.inflateInit2(this.strm,n.windowBits);if(t!==Xv)throw new Error(gd[t]);if(this.header=new _j,Cl.inflateGetHeader(this.strm,this.header),n.dictionary&&(typeof n.dictionary=="string"?n.dictionary=ON(n.dictionary):Ex.call(n.dictionary)==="[object ArrayBuffer]"&&(n.dictionary=new Uint8Array(n.dictionary)),n.raw&&(t=Cl.inflateSetDictionary(this.strm,n.dictionary),t!==Xv)))throw new Error(gd[t])}function Ob(e,n){const t=new Zv(n);if(t.push(e),t.err)throw t.msg||gd[t.err];return t.result}Zv.prototype.push=function(e,n){const t=this.strm,r=this.options.chunkSize,i=this.options.dictionary;let a,s,o;if(this.ended)return!1;for(s=n===~~n?n:n===!0?Ej:gj,Ex.call(e)==="[object ArrayBuffer]"?t.input=new Uint8Array(e):t.input=e,t.next_in=0,t.avail_in=t.input.length;;){for(t.avail_out===0&&(t.output=new Uint8Array(r),t.next_out=0,t.avail_out=r),a=Cl.inflate(t,s),a===Rb&&i&&(a=Cl.inflateSetDictionary(t,i),a===Xv?a=Cl.inflate(t,s):a===Ow&&(a=Rb));t.avail_in>0&&a===wb&&t.state.wrap>0&&e[t.next_in]!==0;)Cl.inflateReset(t),a=Cl.inflate(t,s);switch(a){case yj:case Ow:case Rb:case bj:return this.onEnd(a),this.ended=!0,!1}if(o=t.avail_out,t.next_out&&(t.avail_out===0||a===wb))if(this.options.to==="string"){let l=Qz(t.output,t.next_out),u=t.next_out-l,c=Yz(t.output,l);t.next_out=u,t.avail_out=r-u,u&&t.output.set(t.output.subarray(l,l+u),0),this.onData(c)}else this.onData(t.output.length===t.next_out?t.output:t.output.subarray(0,t.next_out));if(a!==Xv||o!==0){if(a===wb)return a=Cl.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(t.avail_in===0)break}}return!0},Zv.prototype.onData=function(e){this.chunks.push(e)},Zv.prototype.onEnd=function(e){e===Xv&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=hx(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var Cj={Inflate:Zv,inflate:Ob,inflateRaw:function(e,n){return(n=n||{}).raw=!0,Ob(e,n)},ungzip:Ob};const{Deflate:Sj,deflate:Tj,deflateRaw:Nj,gzip:Ij}=aj,{Inflate:Mj,inflate:Aj,inflateRaw:wj,ungzip:Rj}=Cj;var co,Oj={Deflate:Sj,deflate:Tj,deflateRaw:Nj,gzip:Ij,Inflate:Mj,inflate:Aj,inflateRaw:wj,ungzip:Rj,constants:em},Db=function(e){return N(void 0,void 0,void 0,function(){var n,t;return T(this,function(r){if(n=Oj.ungzip(e),typeof TextDecoder<"u")try{return[2,new TextDecoder("utf-8").decode(new Uint8Array(n))]}catch{}return t=8192,[2,Array.from({length:Math.ceil(n.length/t)},function(i,a){var s=a*t,o=n.slice(s,s+t);return String.fromCharCode.apply(null,o)}).join("")]})})},ze=function(e){return N(void 0,void 0,void 0,function(){var n;return T(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e()];case 1:return t.sent(),[3,3];case 2:if(!((n=t.sent())instanceof Q))throw n;return n.throwOutside(),[3,3];case 3:return[2]}})})},or=function(e){return N(void 0,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:case 2:return n.sent(),[3,3];case 3:return[2]}})})},DN=function(e){function n(t){var r=e.call(this)||this;return r.retryAfterTime=1e3*t.retry_after,r.reasonCode=t.reason_code,r.message=t.message,r}return k(n,e),n}(Gn);(function(e){e.CONNECTING="CONNECTING",e.OPEN="OPEN",e.CLOSED="CLOSED"})(co||(co={}));var gn,Dj=function(e){function n(t,r){var i=r.sdkState,a=r.dispatcher,s=r.logger,o=e.call(this)||this;return o.lastActive=0,o._iid=t,o._sdkState=i,o._dispatcher=a,o._logger=s,o}return k(n,e),Object.defineProperty(n.prototype,"isOpen",{get:function(){return this.connectionState===co.OPEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"connectionState",{get:function(){if(this._ws)switch(this._ws.readyState){case 0:return co.CONNECTING;case 1:return co.OPEN}return co.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"ws",{get:function(){var t;return(t=this._ws)!==null&&t!==void 0?t:null},enumerable:!1,configurable:!0}),n.prototype._handleMessage=function(t){var r=this;t.split(`
`).forEach(function(i){if(i){var a=Qn.createFromRawMessage(r._iid,i);if(r._logger.debug("receive websocket event",a),a.code==="LOGI")r.dispatch("message",a);else if(a.code==="PONG")r.dispatch("pong");else if(a.code==="EXPR"){if(a.payload){var s=new Zh(a.payload);s.expiresIn>=0&&r._dispatcher.dispatch(s)}}else if(a.code==="BUSY"){if(a.payload){var o=new DN(a.payload);r._dispatcher.dispatch(o)}}else a.code==="NOOP"||r.dispatch("message",a)}})},n.prototype.connect=function(t,r){return r===void 0&&(r=""),N(this,void 0,void 0,function(){var i=this;return T(this,function(a){switch(a.label){case 0:return typeof fetch=="function"?[3,2]:[4,Gv(()=>import("./__bundle-46d64517-CuIdjffc.js").then(s=>s._),[])];case 1:a.sent(),a.label=2;case 2:return or(function(){return N(i,void 0,void 0,function(){return T(this,function(s){return fetch(this._sdkState.api.host),[2]})})}),this._ws=new WebSocket(t,encodeURIComponent(r)),this._ws.onopen=function(){i._logger.debug("websocket open"),i.dispatch("open")},this._ws.onmessage=function(s){return N(i,void 0,void 0,function(){var o,l,u,c,h,f,p,_=this;return T(this,function(g){switch(g.label){case 0:return!((p=this._sdkState.websocket)===null||p===void 0)&&p.compression?s.data instanceof Blob?((o=new FileReader).readAsArrayBuffer(s.data),o.onloadend=function(){return N(_,void 0,void 0,function(){var C,E;return T(this,function(y){switch(y.label){case 0:return y.trys.push([0,2,,3]),[4,Db(o.result)];case 1:return C=y.sent(),this._handleMessage(C),[3,3];case 2:return E=y.sent(),this.error(E),[3,3];case 3:return[2]}})})},[3,12]):[3,1]:[3,13];case 1:if(!(s.data instanceof ArrayBuffer))return[3,6];g.label=2;case 2:return g.trys.push([2,4,,5]),[4,Db(new Uint8Array(s.data))];case 3:return h=g.sent(),this._handleMessage(h),[3,5];case 4:return l=g.sent(),this.error(l),[3,5];case 5:return[3,12];case 6:if(!(typeof Buffer<"u"&&s.data instanceof Buffer))return[3,11];g.label=7;case 7:return g.trys.push([7,9,,10]),u=s.data,c=u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength),[4,Db(c)];case 8:return h=g.sent(),this._handleMessage(h),[3,10];case 9:return f=g.sent(),this.error(f),[3,10];case 10:return[3,12];case 11:typeof s.data=="string"&&this._handleMessage(s.data),g.label=12;case 12:return[3,14];case 13:this._handleMessage(s.data),g.label=14;case 14:return[2]}})})},this._ws.onerror=function(){i._logger.debug("websocket error"),i.dispatch("error",Q.networkError)},this._ws.onclose=function(s){i._logger.debug("websocket close",s.code,s.reason),i.cleanUpWebSocket(),i.dispatch("close")},this.lastActive=Date.now(),[2]}})})},n.prototype.cleanUpWebSocket=function(){this._ws&&(this._ws.onopen=vt,this._ws.onmessage=vt,this._ws.onerror=vt,this._ws.onclose=vt,this.connectionState===co.OPEN&&this._ws.close(1e3,"Normal Closure"),this._ws=void 0)},n.prototype.disconnect=function(){var t=this;return new Promise(function(r){if(t._ws){if(t.connectionState===co.CLOSED)return t.cleanUpWebSocket(),void r();t._ws.onclose=null,t._ws.onclose=function(){t.cleanUpWebSocket(),t.dispatch("close"),r()},t._ws.close()}else r()})},n.prototype.send=function(t){if(!this._ws)throw Q.connectionClosed;t.code!=="PING"?this.dispatch("ping-refresh"):this._logger.debug("send ping",t),this._ws.send(t.convertToMessage())},n.prototype.error=function(t){this._logger.debug("websocket error",t),this.dispatch("error",t)},n}(Dd),UN=function(e){function n(t){var r=t.all,i=t.feed,a=t.custom_types,s=t.ts,o=e.call(this)||this;return o.all=r,o.feed=i,o.customTypes=a,o.ts=s,o}return k(n,e),n}(Gn),yx=function(e){function n(t){var r=t.previousMessageId,i=t.messageCreatedAt,a=t.channelUrl,s=e.call(this)||this;return s.previousMessageId=r,s.messageCreatedAt=i,s.channelUrl=a,s}return k(n,e),n}(Gn),Uj=function(){function e(n,t){var r=t.session,i=t.sdkState,a=t.dispatcher,s=t.logger,o=t.useFetchCompat,l=o!==void 0&&o,u=this;this._ackStateMap=new Map,this._batchableCommandAckStateMap=new Map,this._redundantActionCommands=new Map,this._sdkState=i,this._dispatcher=a,this._logger=s,this.apiClient=new wz(n,{session:r,sdkState:i,dispatcher:a,logger:s,useFetchCompat:l}),this.websocketClient=new Dj(n,{sdkState:i,dispatcher:a,logger:s}),this.websocketClient.on("message",function(c){var h,f;if(c.payload.unread_cnt&&u._dispatcher.dispatch(new UN(c.payload.unread_cnt)),c.code!=="MESG"&&c.code!=="FILE"&&c.code!=="ADMM"&&c.code!=="BRDM"||c.payload.channel_type!==Kt.GROUP||!c.payload.previous_message_id||u._dispatcher.dispatch(new yx({previousMessageId:c.payload.previous_message_id,messageCreatedAt:c.payload.ts,channelUrl:c.payload.channel_url})),c.requestId){if(u._ackStateMap.has(c.requestId)){var p=u._ackStateMap.get(c.requestId);c.code!=="EROR"?p.resolve(c):p.reject(new Q({code:c.payload.code,message:c.payload.message}))}else if(u._batchableCommandAckStateMap.has(c.requestId)){var _=Date.now();try{for(var g=ye(u._batchableCommandAckStateMap.entries()),C=g.next();!C.done;C=g.next()){var E=Ge(C.value,2),y=(E[0],E[1]);y.channelUrl===c.payload.channel_url&&y.requestTime<_&&(p=y.ackState,c.code!=="EROR"?p.resolve(c):p.reject(new Q({code:c.payload.code,message:c.payload.message})))}}catch(w){h={error:w}}finally{try{C&&!C.done&&(f=g.return)&&f.call(g)}finally{if(h)throw h.error}}}}else if(u._redundantActionCommands.has(c.payload.unique_id)){var S=u._redundantActionCommands.get(c.payload.unique_id),I=S==null?void 0:S.indexOf(c.code);I!==-1&&(S==null||S.splice(I,1)),S.length===0&&u._redundantActionCommands.delete(c.payload.unique_id)}else u._dispatcher.dispatch(c)}).on("close",function(){u._ackStateMap.forEach(function(c){c.reject(Q.connectionClosed)}),u._ackStateMap.clear(),u._batchableCommandAckStateMap.clear(),u._redundantActionCommands.clear()})}return e.prototype._sendApiRequest=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return n.params.unique_id&&this._redundantActionCommands.set(n.params.unique_id,["SYEV","READ"]),[4,this.apiClient.send(n)];case 1:return[2,t.sent()]}})})},e.prototype._sendWebsocketRequest=function(n){return N(this,void 0,void 0,function(){var t,r,i,a=this;return T(this,function(s){if(!this._sdkState.websocket)throw Q.connectionRequired;if(t=new ra,n.ackRequired){i=function(o,l){var u=n.code==="READ"?a._batchableCommandAckStateMap:a._ackStateMap;u.has(n.requestId)&&(u.delete(n.requestId),r&&(clearTimeout(r),r=null),o?(a._logger.debug("fail websocket request",n.requestId,o),t.reject(o)):(a._logger.debug("receive websocket ack",n.requestId,n),a._logger.debug("receive websocket ack",l),t.resolve(l)))};try{r=setTimeout(function(){return i(Q.noAckTimeout)},this._sdkState.websocket.responseTimeout),n.code==="READ"?this._batchableCommandAckStateMap.set(n.requestId,{ackState:{resolve:function(o){return i(void 0,o)},reject:function(o){return i(o)}},channelUrl:n.payload.channel_url,requestTime:Date.now()}):this._ackStateMap.set(n.requestId,{resolve:function(o){return i(void 0,o)},reject:function(o){return i(o)}}),this.websocketClient.send(n)}catch(o){i(o)}}else try{this.websocketClient.send(n),t.resolve()}catch(o){t.reject(o)}return[2,t.promise]})})},e.prototype.send=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return n instanceof ve?[4,this._sendApiRequest(n)]:[3,2];case 1:case 3:return[2,t.sent()];case 2:return n instanceof Ri?[4,this._sendWebsocketRequest(n)]:[3,4];case 4:throw Q.invalidParameters}})})},e.prototype.cancel=function(n){this.apiClient.cancel(n)},e.prototype.cancelAll=function(){this.apiClient.cancelAll()},e}();(function(e){e[e.NONE=0]="NONE",e[e.INITIALIZED=1]="INITIALIZED",e[e.CONNECTING=2]="CONNECTING",e[e.CONNECTED=3]="CONNECTED",e[e.RECONNECTING=4]="RECONNECTING",e[e.INTERNAL_DISCONNECTED=5]="INTERNAL_DISCONNECTED",e[e.EXTERNAL_DISCONNECTED=6]="EXTERNAL_DISCONNECTED",e[e.LOGOUT=7]="LOGOUT",e[e.DELAYED_CONNECTING=8]="DELAYED_CONNECTING"})(gn||(gn={}));var td,nd,ja=function(e){function n(t){var r=t.stateType,i=e.call(this)||this;return i.stateType=r,i}return k(n,e),n}(Gn),bx=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return k(n,e),n}(Gn),R1=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return k(n,e),n}(Gn),Cx=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return k(n,e),n}(Gn),Dw=function(){function e(n){var t,r,i,a;this.isEnabled=(t=n.enabled)!==null&&t!==void 0&&t,this.feedChannels=(r=n.feed_channels)!==null&&r!==void 0?r:{},this.templateListToken=(i=n.template_list_token)!==null&&i!==void 0?i:null,this.settingsUpdatedAt=(a=n.settings_updated_at)!==null&&a!==void 0?a:0}return e.payloadify=function(n){return Ae($e({enabled:n.isEnabled,feed_channels:n.feedChannels,template_list_token:n.templateListToken,settings_updated_at:n.settingsUpdatedAt}))},e}(),LN=function(e){return"sendbird@".concat(e,"/changelog_include_chat_notifications")},Uw=function(){function e(n){var t;this.lastUpdatedAt=(t=n.last_updated_at)!==null&&t!==void 0?t:0}return e.payloadify=function(n){return Ae($e({last_updated_at:n.lastUpdatedAt}))},e}(),Lw=function(){function e(n){var t;this.token=(t=n.template_list_token)!==null&&t!==void 0?t:""}return e.payloadify=function(n){return Ae($e({template_list_token:n.token}))},e}(),w_=function(){function e(n){n===void 0&&(n={min_stat_count:100,min_interval:10800,max_stat_count_per_request:1e3,lower_threshold:10,request_delay_range:180}),this.minStatCount=n.min_stat_count,this.minInterval=1e3*n.min_interval,this.maxStatCountPerRequest=n.max_stat_count_per_request,this.lowerThreshold=n.lower_threshold,this.requestDelayRange=1e3*n.request_delay_range}return e.payloadify=function(n){return Ae($e({min_stat_count:n.minStatCount,min_interval:n.minInterval/1e3,max_stat_count_per_request:n.maxStatCountPerRequest,lower_threshold:n.lowerThreshold,request_delay_range:n.requestDelayRange/1e3}))},e}(),Ub=function(){function e(n){n===void 0&&(n={default:{min_stat_count:100,min_interval:10800,max_stat_count_per_request:1e3,lower_threshold:10,request_delay_range:180}}),this.default=new w_(n.default),this.realTime=new w_(n.realtime)}return e.payloadify=function(n){return Ae($e({default:w_.payloadify(n.default),realtime:w_.payloadify(n.realTime)}))},e}(),Lj=function(){function e(n){var t;this.templateListToken=(t=n.template_list_token)!==null&&t!==void 0?t:null}return e.payloadify=function(n){return Ae($e({template_list_token:n.templateListToken}))},e}(),kw=function(){function e(n){this.enabled=n.enabled,this.orderBy=n.order_by.type,this.excludeRecentHours=n.order_by.exclude_recent_hours,this.bufferRatio=n.buffer_ratio}return e.payloadify=function(n){return Ae($e({enabled:n.enabled,order_by:{type:n.orderBy,exclude_recent_hours:n.excludeRecentHours},buffer_ratio:n.bufferRatio}))},e}(),xw=1048576,kj=5;(function(e){e[e.NONE=0]="NONE",e[e.INCLUDE_REPLY=1]="INCLUDE_REPLY",e[e.EXCLUDE_REPLY=2]="EXCLUDE_REPLY",e[e.INCLUDE_REPLY_TO_CHANNEL=3]="INCLUDE_REPLY_TO_CHANNEL"})(td||(td={})),function(e){e[e.NONE=0]="NONE",e[e.INCLUDE_REPLY=1]="INCLUDE_REPLY",e[e.EXCLUDE_REPLY=2]="EXCLUDE_REPLY",e[e.INCLUDE_REPLY_TO_CHANNEL=3]="INCLUDE_REPLY_TO_CHANNEL"}(nd||(nd={}));var Pw=function(){function e(n){var t,r,i,a,s,o,l,u,c,h;n===void 0&&(n={}),this.emojiHash=n.emoji_hash||"",this.uploadSizeLimit=n.file_upload_size_limit?n.file_upload_size_limit*xw:Number.MAX_SAFE_INTEGER,this.useReaction=!!n.use_reaction,this.applicationAttributes=(t=n.application_attributes)!==null&&t!==void 0?t:[],this.premiumFeatureList=(r=n.premium_feature_list)!==null&&r!==void 0?r:[],this.deviceTokenCache=this.applicationAttributes.includes("sdk_device_token_cache"),this.enabledChannelMemberShipHistory=this.applicationAttributes.includes("channel_membership_history"),this.multipleFilesMessageFileCountLimit=(i=n.multiple_file_send_max_size)!==null&&i!==void 0?i:5,this.allowSdkStatsUpload=(a=n.allow_sdk_log_ingestion)===null||a===void 0||a,this.unreadCountThreadingPolicy=(s=n.unread_cnt_threading_policy)!==null&&s!==void 0?s:td.NONE,this.lastMessageThreadingPolicy=(o=n.last_msg_threading_policy)!==null&&o!==void 0?o:nd.NONE,this.channelRotationInfo=n.channel_rotation?new kw(n.channel_rotation):null,this.uikitConfigInfo=new Uw((l=n.uikit_config)!==null&&l!==void 0?l:{}),this.notificationInfo=n.notifications?new Dw(n.notifications):null,this.messageTemplateInfo=n.message_template?new Lw(n.message_template):null,this.aiAgentInfo=n.ai_agent?new Lj(n.ai_agent):null,this.statConfigInfo=n.log_publish_config?new Ub(n.log_publish_config):new Ub,this.disableSuperGroupMack=(u=n.disable_supergroup_mack)!==null&&u!==void 0&&u,this.configSyncNeeded=(c=n.config_sync_needed)!==null&&c!==void 0&&c,this.requestDedupIntervalMs=(h=n.request_dedup_interval_ms)!==null&&h!==void 0?h:500}return e.payloadify=function(n){return Ae($e({emoji_hash:n.emojiHash,file_upload_size_limit:n.uploadSizeLimit/xw,application_attributes:n.applicationAttributes,premium_feature_list:n.premiumFeatureList,use_reaction:n.useReaction,allow_sdk_log_ingestion:n.allowSdkStatsUpload,unread_cnt_threading_policy:n.unreadCountThreadingPolicy,last_msg_threading_policy:n.lastMessageThreadingPolicy,channel_rotation:n.channelRotationInfo?kw.payloadify(n.channelRotationInfo):null,uikit_config:n.uikitConfigInfo?Uw.payloadify(n.uikitConfigInfo):null,notifications:n.notificationInfo?Dw.payloadify(n.notificationInfo):null,message_template:n.messageTemplateInfo?Lw.payloadify(n.messageTemplateInfo):null,log_publish_config:n.statConfigInfo?Ub.payloadify(n.statConfigInfo):null,disable_supergroup_mack:n.disableSuperGroupMack,config_sync_needed:n.configSyncNeeded,request_dedup_interval_ms:n.requestDedupIntervalMs}))},e}(),l0=function(e){return"sendbird@".concat(e,"/app_configs_info")},Ur=function(){function e(n){this._iid="",this._iid=n}return e.payloadify=function(n){return{}},e}(),xj=function(e){function n(t){var r=t.userId,i=t.metadata,a=e.call(this)||this;return a.method=fe.POST,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/metadata"),a.params={metadata:i},a}return k(n,e),n}(ve),Pj=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.metaData=r,i}return k(n,e),n}(_e),Fj=function(e){function n(t){var r=t.userId,i=t.metadata,a=t.upsert,s=e.call(this)||this;return s.method=fe.PUT,s.path="".concat(En,"/").concat(encodeURIComponent(r),"/metadata"),s.params={metadata:i,upsert:a},s}return k(n,e),n}(ve),Bj=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.metadata=r,i}return k(n,e),n}(_e),Hj=function(e){function n(t){var r=t.userId,i=t.metadataKey,a=e.call(this)||this;return a.method=fe.DELETE,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/metadata/").concat(i),a}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var Gj=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=fe.DELETE,i.path="".concat(En,"/").concat(encodeURIComponent(r),"/metadata"),i}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var Oh,hf=function(e,n){var t=JSON.parse(JSON.stringify(e));return t._iid&&delete t._iid,n&&n(t),t},Ll=function(e,n){var t=JSON.parse(JSON.stringify(e));return t},me=function(e){return{do:function(n){e||n()},throw:function(n){if(!e)throw n}}};(function(e){e.ONLINE="online",e.OFFLINE="offline",e.NON_AVAILABLE="nonavailable"})(Oh||(Oh={}));var Ed,Gt=function(e){function n(t,r){var i,a,s,o,l,u,c,h,f,p,_,g,C,E=this;return(E=e.call(this,t)||this).userId=(a=(i=r.guest_id)!==null&&i!==void 0?i:r.user_id)!==null&&a!==void 0?a:"",E.nickname=(o=(s=r.nickname)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:"",E.plainProfileUrl=(u=(l=r.profile_url)!==null&&l!==void 0?l:r.image)!==null&&u!==void 0?u:"",E.requireAuth=(c=r.require_auth_for_profile_image)!==null&&c!==void 0&&c,E.metaData=(h=r.metadata)!==null&&h!==void 0?h:{},E.connectionStatus=Oh.NON_AVAILABLE,Bt(Oh,r.is_online)?E.connectionStatus=r.is_online:Y("boolean",r.is_online)&&(E.connectionStatus=r.is_online?Oh.ONLINE:Oh.OFFLINE),E.isActive=(f=r.is_active)===null||f===void 0||f,E.lastSeenAt=(p=r.last_seen_at)!==null&&p!==void 0?p:null,E.preferredLanguages=r.preferred_languages?it([],Ge(r.preferred_languages),!1):null,E.friendDiscoveryKey=(_=r.friend_discovery_key)!==null&&_!==void 0?_:null,E.friendName=(g=r.friend_name)!==null&&g!==void 0?g:null,E._hashValue=E._generateHashValue(),E._updatedAt=(C=r.updatedat)!==null&&C!==void 0?C:0,E}return k(n,e),n.payloadify=function(t){return Ae($e(z(z({},e.payloadify.call(this,t)),{user_id:t.userId,nickname:t.nickname,profile_url:t.plainProfileUrl,require_auth_for_profile_image:t.requireAuth,metadata:t.metaData,is_online:t.connectionStatus,is_active:t.isActive,last_seen_at:t.lastSeenAt,preferred_languages:t.preferredLanguages,friend_discovery_key:t.friendDiscoveryKey,friend_name:t.friendName})))},n._buildUserFromSerializedData=function(t){var r=Ll(t);return new n(r._iid,n.payloadify(r))},n.prototype._generateHashValue=function(){for(var t,r=JSON.stringify({userId:this.userId,nickname:this.nickname,plainProfileUrl:this.plainProfileUrl,friendDiscoveryKey:this.friendDiscoveryKey,friendName:this.friendName,metaData:JSON.stringify(this.metaData),performanceLanguages:(t=this.preferredLanguages)===null||t===void 0?void 0:t.toString(),requireAuth:this.requireAuth}),i=0,a=0;a<r.length;a++)i=(i<<5)-i+r.charCodeAt(a),i|=0;return i},Object.defineProperty(n.prototype,"profileUrl",{get:function(){var t=q.of(this._iid).sessionManager;return this.requireAuth&&t.ekey?"".concat(this.plainProfileUrl,"?auth=").concat(t.ekey):this.plainProfileUrl},enumerable:!1,configurable:!0}),n.prototype.serialize=function(){return hf(this)},n.prototype._isValidMetaData=function(t){return!Array.isArray(t)&&Object.keys(t).length>0&&Object.keys(t).map(function(r){return t[r]}).every(function(r){return Y("string",r)})},n.prototype._applyMetaData=function(t,r){var i=this;r===void 0&&(r=!1),Object.keys(t).forEach(function(a){r?delete i.metaData[a]:i.metaData[a]=t[a]})},n.prototype.createMetaData=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:return me(this._isValidMetaData(t)).throw(Q.invalidParameters),r=q.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new xj({userId:i.userId,metadata:t}),[4,a.send(s)];case 1:return o=u.sent(),l=o.as(Pj).metaData,this._applyMetaData(l),[2,this.metaData]}})})},n.prototype.updateMetaData=function(t,r){return r===void 0&&(r=!1),N(this,void 0,void 0,function(){var i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return me(this._isValidMetaData(t)).throw(Q.invalidParameters),i=q.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new Fj({userId:a.userId,metadata:t,upsert:r}),[4,s.send(o)];case 1:return l=c.sent(),u=l.as(Bj).metadata,this._applyMetaData(u),[2,this.metaData]}})})},n.prototype.deleteMetaData=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return me(Y("string",t)).throw(Q.invalidParameters),r=q.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new Hj({userId:i.userId,metadataKey:t}),[4,a.send(s)];case 1:return l.sent(),this._applyMetaData(((o={})[t]=!0,o),!0),[2,this.metaData]}})})},n.prototype.deleteAllMetaData=function(){return N(this,void 0,void 0,function(){var t,r,i,a;return T(this,function(s){switch(s.label){case 0:return t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new Gj({userId:r.userId}),[4,i.send(a)];case 1:return s.sent(),this.metaData={},[2]}})})},n}(Ur),Sx=function(e){function n(t){var r=t.userProfile,i=e.call(this)||this;return i.userProfile=r,i}return k(n,e),n}(Gn),O1=function(){function e(n,t){var r,i,a,s,o,l,u,c,h,f,p,_,g,C;this._iid=n,this.appInfo=new Pw(t),this.user=new Gt(n,t),this.connectedAt=(r=t.login_ts)!==null&&r!==void 0?r:0,this.firstConnectedAt=0,this.pingInterval=(i=t.ping_interval)!==null&&i!==void 0?i:15,this.pongTimeout=(a=t.pong_timeout)!==null&&a!==void 0?a:5,this.reconnectInterval=(o=(s=t.reconnect)===null||s===void 0?void 0:s.interval)!==null&&o!==void 0?o:3e3,this.reconnectMaxInterval=(u=(l=t.reconnect)===null||l===void 0?void 0:l.max_interval)!==null&&u!==void 0?u:6e4,this.reconnectRetryCount=(h=(c=t.reconnect)===null||c===void 0?void 0:c.retry_cnt)!==null&&h!==void 0?h:5,this.reconnectIntervalMultiple=(p=(f=t.reconnect)===null||f===void 0?void 0:f.mul)!==null&&p!==void 0?p:2,this.maxUnreadCountOnSuperGroup=(_=t.max_unread_cnt_on_super_group)!==null&&_!==void 0?_:100,this.profileImageEncryption=!!t.profile_image_encryption,this.concurrentCallLimit=(g=t.concurrent_call_limit)!==null&&g!==void 0?g:5,this.backOffDelay=(C=t.back_off_delay)!==null&&C!==void 0?C:100}return e.payloadify=function(n){return Ae($e(z(z(z({},Gt.payloadify(n.user)),Pw.payloadify(n.appInfo)),{login_ts:n.connectedAt,ping_interval:n.pingInterval,pong_timeout:n.pongTimeout,reconnect:{interval:n.reconnectInterval,max_interval:n.reconnectMaxInterval,retry_cnt:n.reconnectRetryCount,mul:n.reconnectIntervalMultiple},max_unread_cnt_on_super_group:n.maxUnreadCountOnSuperGroup,profile_image_encryption:n.profileImageEncryption,concurrent_call_limit:n.concurrentCallLimit,back_off_delay:n.backOffDelay})))},e.prototype.apply=function(){var n=this.reconnectInterval,t=this.reconnectMaxInterval,r=this.reconnectIntervalMultiple,i=q.of(this._iid);i.sdkState.websocket&&(i.sdkState.websocket.pingInterval=1e3*this.pingInterval,i.sdkState.websocket.pongTimeout=1e3*this.pongTimeout,i.sdkState.websocket.reconnectMaxRetry=this.reconnectRetryCount,i.sdkState.websocket.reconnectRetryStrategy={calcTimeout:function(a){return a>0?1e3*Math.min(n*Math.pow(r,a-1),t):10}}),i.appInfo=this.appInfo,i.sessionManager.currentUser=this.user,i.connectedAt=this.connectedAt,this.firstConnectedAt||(i.firstConnectedAt=this.connectedAt),i.maxSuperGroupChannelUnreadCount=this.maxUnreadCountOnSuperGroup,i.concurrentCallLimit=this.concurrentCallLimit,i.backOffDelay=this.backOffDelay,i.requestDeduplicator.requestDedupInterval=this.appInfo.requestDedupIntervalMs,i.dispatcher.dispatch(new Sx({userProfile:this}))},e}(),Tx=function(e){function n(t){var r=t.request,i=r===void 0||r,a=t.features,s=a===void 0?{}:a,o=t.options,l=o===void 0?{}:o,u=t.statConfigInfo,c=e.call(this)||this;return c.request=i,c.features=z({localCache:!0,notification:!0},s),c.options=z({ingestion:!0},l),c.statConfigInfo=u,c}return k(n,e),n}(Gn),Nx=function(e){function n(t){var r=e.call(this)||this;return r.configSyncNeeded=!1,r.configSyncNeeded=t,r}return k(n,e),n}(Gn),pg=function(e){function n(t,r,i){var a,s,o,l,u=this;return(u=e.call(this,t,r,i)||this).error=null,u.services=[],u.userProfile=new O1(t,i),u.deviceTokenLastDeletedAt=(a=i.device_token_last_deleted_at)!==null&&a!==void 0?a:0,u.key=(s=i.key)!==null&&s!==void 0?s:"",u.ekey=(o=i.ekey)!==null&&o!==void 0?o:"",u.error=i.error?new Q(i):null,u.services=(l=i.services)!==null&&l!==void 0?l:[],u.isSessionRefresh="new_key"in i,u}return k(n,e),n.asError=function(t){return new n("","LOGI",z({user_id:"",error:!0},t))},n.prototype.applyTo=function(t){return N(this,void 0,void 0,function(){var r,i,a;return T(this,function(s){switch(s.label){case 0:return this.isSessionRefresh?[2]:this.error?[3,4]:(r=q.of(t))?(i=r.sessionManager,a=r.dispatcher,[4,i.login(this)]):[3,2];case 1:return s.sent(),this.userProfile.apply(),a.dispatch(new Nx(this.userProfile.appInfo.configSyncNeeded)),a.dispatch(new Tx({request:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_request_log_publish"),features:{localCache:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_feature_local_cache_log_publish"),notification:this.userProfile.appInfo.applicationAttributes.includes("allow_sdk_noti_stats_log_publish")},options:{ingestion:this.userProfile.appInfo.allowSdkStatsUpload},statConfigInfo:this.userProfile.appInfo.statConfigInfo})),[3,3];case 2:throw Q.lostInstance;case 3:return[3,5];case 4:throw this.error;case 5:return[2]}})})},n}(Qn),nc=function(){function e(){this.type=gn.NONE,this.name="none"}return e.prototype.run=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){return[2]})})},e.prototype.onConnect=function(n,t){return N(this,void 0,void 0,function(){return T(this,function(r){return[2]})})},e.prototype.onReconnect=function(n,t){return t.resetReconnectCount,N(this,void 0,void 0,function(){return T(this,function(r){return[2]})})},e.prototype.onDisconnect=function(n,t){return t.error,t.autoReconnect,t.cause,N(this,void 0,void 0,function(){return T(this,function(r){return[2]})})},e.prototype.onDisconnectWebSocket=function(n,t){return N(this,void 0,void 0,function(){return T(this,function(r){return[2]})})},e.prototype.onLogout=function(n,t){return N(this,void 0,void 0,function(){return T(this,function(r){return[2]})})},e.prototype.onDelayedConnecting=function(n,t){return t.retryAfterTime,t.reasonCode,t.message,N(this,void 0,void 0,function(){return T(this,function(r){return[2]})})},e}(),Wo=function(e){function n(t){t===void 0&&(t={});var r,i=this;return(i=e.call(this)||this).type=gn.LOGOUT,i.name="logout",i._wasPreviouslyConnected=(r=t.wasPreviouslyConnected)===null||r===void 0||r,i}return k(n,e),n.prototype.run=function(t){return N(this,void 0,void 0,function(){var r,i,a=this;return T(this,function(s){switch(s.label){case 0:return r=Date.now(),i=t.sdkState.userId,[4,t.logout()];case 1:return s.sent(),[4,t.changeState(new kN,r)];case 2:return s.sent(),this._wasPreviouslyConnected&&ze(function(){return N(a,void 0,void 0,function(){return T(this,function(o){return t.connectionHandlers.forEach(function(l){var u;(u=l.onDisconnected)===null||u===void 0||u.call(l,i)}),[2]})})}),[2]}})})},n}(nc),tm=function(e){function n(t){var r=(t===void 0?{}:t).isAlreadyDisconnected,i=r!==void 0&&r,a=e.call(this)||this;return a.type=gn.EXTERNAL_DISCONNECTED,a.name="externaldisconnected",a._isAlreadyDisconnected=i,a}return k(n,e),n.prototype.run=function(t){return N(this,void 0,void 0,function(){var r=this;return T(this,function(i){switch(i.label){case 0:return[4,t.disconnect()];case 1:return i.sent(),this._isAlreadyDisconnected||ze(function(){return N(r,void 0,void 0,function(){return T(this,function(a){return t.connectionHandlers.forEach(function(s){var o;(o=s.onConnectionLost)===null||o===void 0||o.call(s)}),[2]})})}),[2]}})})},n.prototype.onConnect=function(t,r){return N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return i=Date.now(),[4,t.disconnect()];case 1:return a.sent(),[4,t.changeState(new oE({authToken:r}),i)];case 2:return a.sent(),[2]}})})},n.prototype.onReconnect=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new Op,r)];case 1:return i.sent(),[2]}})})},n.prototype.onLogout=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new Wo,r)];case 1:return i.sent(),[2]}})})},n}(nc);(function(e){e.ExternalSetBackground="ExternalSetBackground",e.ExternalDisconnectWebSocket="ExternalDisconnectWebSocket",e.MaxReconnectRetry="MaxReconnectRetry"})(Ed||(Ed={}));var $j=function(){function e(n,t){var r=t.sdkState,i=t.cacheContext,a=t.connectionHandlers,s=t.sessionManager,o=t.websocketClient,l=t.dispatcher,u=t.logger,c=t.disableWebSocketCloseEventHandling,h=c!==void 0&&c,f=this;this._disableWebSocketCloseEventHandling=!1,this._webSocketClosedCause=null,this._logger=u,this._disableWebSocketCloseEventHandling=h,this._context=new jj(n,{sdkState:r,cacheContext:i,connectionHandlers:a,sessionManager:s,websocketClient:o,dispatcher:l,logger:u}),this._sdkState=r,this._sessionManager=s,this._websocketClient=o,this._commandDispatcher=l,this._commandDispatcher.on(function(p){var _=f._context.currentState;if(p instanceof DN&&_.type===gn.CONNECTED){var g=p.retryAfterTime,C=p.reasonCode,E=p.message;_.onDelayedConnecting(f._context,{retryAfterTime:g,reasonCode:C,message:E})}})}return e.prototype._registerEventDispatcher=function(){var n=this;this._disableWebSocketCloseEventHandling||(this._clearEventDispatcher(),this._sessionEventDispatcherContext=this._sessionManager.on("refresh",function(){n.isConnecting||n.isConnected||(n._logger.debug("try reconnect by session key refresh"),or(function(){return N(n,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this.reconnect()];case 1:return t.sent(),[2]}})})}))}),this._websocketEventDispatcherContext=this._websocketClient.on("close",function(){n._sdkState.appState!=="foreground"||n._webSocketClosedCause||or(function(){return N(n,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return this._sessionManager.isSessionKeyRefreshing?[3,2]:(this._logger.debug("try reconnect by websocket connection closed"),[4,this.reconnect()]);case 1:return t.sent(),[3,4];case 2:return[4,this.disconnectWebSocket()];case 3:t.sent(),t.label=4;case 4:return[2]}})})})}))},e.prototype._clearEventDispatcher=function(){this._sessionEventDispatcherContext&&(this._sessionEventDispatcherContext.close(),this._sessionEventDispatcherContext=void 0),this._websocketEventDispatcherContext&&(this._websocketEventDispatcherContext.close(),this._websocketEventDispatcherContext=void 0)},Object.defineProperty(e.prototype,"isConnected",{get:function(){return this._context.currentState.type===gn.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isConnecting",{get:function(){var n=this._context.currentState;return n.type===gn.CONNECTING||n.type===gn.RECONNECTING},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"websocketClient",{get:function(){return this._websocketClient},enumerable:!1,configurable:!0}),e.prototype.connect=function(n){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:return t=this._context.currentState,this._webSocketClosedCause=null,[4,t.onConnect(this._context,n)];case 1:return r.sent(),this._registerEventDispatcher(),[2]}})})},e.prototype.reconnect=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){switch(t.label){case 0:return n=this._context.currentState,this._webSocketClosedCause=null,[4,n.onReconnect(this._context,{})];case 1:return t.sent(),[2]}})})},e.prototype.resetAndReconnect=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){switch(t.label){case 0:return n=this._context.currentState,this._webSocketClosedCause=null,[4,n.onReconnect(this._context,{resetReconnectCount:!0})];case 1:return t.sent(),[2]}})})},e.prototype.background=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){switch(t.label){case 0:return n=this._context.currentState,this._webSocketClosedCause=Ed.ExternalSetBackground,[4,n.onDisconnect(this._context,{autoReconnect:!1,cause:this._webSocketClosedCause})];case 1:return t.sent(),[2]}})})},e.prototype.disconnect=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this._context.currentState.onDisconnect(this._context,{error:n,autoReconnect:!0,cause:this._webSocketClosedCause})];case 1:return t.sent(),[2]}})})},e.prototype.disconnectWebSocket=function(n){return n===void 0&&(n=!1),N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:return t=this._context.currentState,n&&(this._webSocketClosedCause=Ed.ExternalDisconnectWebSocket),[4,t.onDisconnectWebSocket(this._context,{cause:this._webSocketClosedCause})];case 1:return r.sent(),[2]}})})},e.prototype.logout=function(n){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:return t=this._context.currentState,this._clearEventDispatcher(),[4,t.onLogout(this._context,n)];case 1:return r.sent(),[2]}})})},e}(),Jh=function(e){function n(t){var r=t.retryAfterTime,i=t.reasonCode,a=t.message,s=t.authToken,o=e.call(this)||this;return o.type=gn.DELAYED_CONNECTING,o.name="delayedconnecting",o._timerStartTime=0,o._retryAfterTime=r,o._reasonCode=i,o._message=a,o._authToken=s,o}return k(n,e),n.prototype._clearDelayConnectTimer=function(){this._delayConnectTimer&&(clearTimeout(this._delayConnectTimer),this._delayConnectTimer=void 0),this._timerStartTime=0},n.prototype._startDelayedConnectTimer=function(t){var r=this;this._clearDelayConnectTimer(),this._timerStartTime=Date.now(),this._delayConnectTimer=setTimeout(function(){return N(r,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return i=Date.now(),clearTimeout(this._delayConnectTimer),this._delayConnectTimer=void 0,this._timerStartTime=0,[4,t.changeState(new Op({authToken:this._authToken,isSoftRateLimited:!0}),i)];case 1:return a.sent(),[2]}})})},this._retryAfterTime),t.connectionHandlers.forEach(function(i){var a;(a=i.onConnectionDelayed)===null||a===void 0||a.call(i,Math.ceil(r._retryAfterTime/1e3))})},n.prototype._calculateRemainDelayConnectTime=function(){this._delayConnectTimer&&(this._retryAfterTime=this._retryAfterTime-(Date.now()-this._timerStartTime))},n.prototype._throwDelayedConnectingError=function(){var t=new Q({code:Le.DELAYED_CONNECTING,message:this._message});throw t.setDetail(JSON.stringify({retry_after:Math.ceil(this._retryAfterTime/1e3),reason_code:this._reasonCode,message:this._message})),t},n.prototype.run=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){return this._startDelayedConnectTimer(t),[2]})})},n.prototype.onConnect=function(t,r){return N(this,void 0,void 0,function(){return T(this,function(i){return this._delayConnectTimer&&(this._calculateRemainDelayConnectTime(),this._startDelayedConnectTimer(t),this._throwDelayedConnectingError()),[2]})})},n.prototype.onReconnect=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){return this._delayConnectTimer&&(this._calculateRemainDelayConnectTime(),this._startDelayedConnectTimer(t),this._throwDelayedConnectingError()),[2]})})},n.prototype.onDelayedConnecting=function(t,r){var i=r.retryAfterTime,a=r.reasonCode,s=r.message;return N(this,void 0,void 0,function(){return T(this,function(o){return this._retryAfterTime=i,this._reasonCode=a,this._message=s,this._startDelayedConnectTimer(t),[2]})})},n.prototype.onDisconnect=function(t,r){var i=r.autoReconnect,a=i!==void 0&&i,s=r.cause,o=s===void 0?null:s;return N(this,void 0,void 0,function(){var l;return T(this,function(u){switch(u.label){case 0:return l=Date.now(),this._clearDelayConnectTimer(),o!==Ed.ExternalSetBackground?[3,2]:[4,t.changeState(new ef({autoReconnect:a,retryAfterTime:this._retryAfterTime,disconnectedTime:l,reasonCode:this._reasonCode,message:this._message}),l)];case 1:return u.sent(),[3,6];case 2:return t.hasSession?[4,t.changeState(new ef({autoReconnect:a}),l)]:[3,4];case 3:return u.sent(),[3,6];case 4:return[4,t.changeState(new Wo,l)];case 5:u.sent(),u.label=6;case 6:return[2]}})})},n.prototype.onDisconnectWebSocket=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return r=Date.now(),this._clearDelayConnectTimer(),[4,t.changeState(new tm,r)];case 1:return i.sent(),[2]}})})},n.prototype.onLogout=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return r=Date.now(),this._clearDelayConnectTimer(),[4,t.changeState(new Wo,r)];case 1:return i.sent(),[2]}})})},n}(nc),ef=function(e){function n(t){var r=e.call(this)||this;return r.type=gn.INTERNAL_DISCONNECTED,r.name="internaldisconnected",r._autoReconnect=!1,r._autoReconnect=t.autoReconnect,r._retryAfter=t.retryAfterTime,r._disconnectedTime=t.disconnectedTime,r._reasonCode=t.reasonCode,r._message=t.message,r}return k(n,e),n.prototype._getDelayedConnectTime=function(t){return this._retryAfter&&this._disconnectedTime?Math.ceil((this._retryAfter-(t-this._disconnectedTime))/1e3):-1},n.prototype.run=function(t){return N(this,void 0,void 0,function(){var r,i=this;return T(this,function(a){switch(a.label){case 0:return r=Date.now(),[4,t.disconnect()];case 1:return a.sent(),ze(function(){return N(i,void 0,void 0,function(){return T(this,function(s){return t.connectionHandlers.forEach(function(o){var l;(l=o.onConnectionLost)===null||l===void 0||l.call(o)}),[2]})})}),this._autoReconnect?[4,t.changeState(new Op,r)]:[3,3];case 2:a.sent(),a.label=3;case 3:return[2]}})})},n.prototype.onConnect=function(t,r){return N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return i=Date.now(),[4,t.disconnect()];case 1:return a.sent(),[4,t.changeState(new oE({authToken:r}),i)];case 2:return a.sent(),[2]}})})},n.prototype.onReconnect=function(t){return N(this,void 0,void 0,function(){var r,i;return T(this,function(a){switch(a.label){case 0:return r=Date.now(),(i=this._getDelayedConnectTime(r))>0?[4,t.changeState(new Jh({retryAfterTime:i,reasonCode:this._reasonCode,message:this._message}),r)]:[3,2];case 1:return a.sent(),[3,4];case 2:return[4,t.changeState(new Op,r)];case 3:a.sent(),a.label=4;case 4:return[2]}})})},n.prototype.onDisconnectWebSocket=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new tm({isAlreadyDisconnected:!0}),r)];case 1:return i.sent(),[2]}})})},n.prototype.onLogout=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new Wo,r)];case 1:return i.sent(),[2]}})})},n}(nc),Bi=function(e){return N(void 0,void 0,void 0,function(){return T(this,function(n){return[2,new Promise(function(t){return setTimeout(t,e)})]})})},Ix=function(){function e(){}return e.prototype.calcTimeout=function(){return 0},e}(),sE=function(e,n,t){return t===void 0&&(t=new Ix),N(void 0,void 0,void 0,function(){var r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:r=0,i=null,a=function(c){return i=c??new Error("Halted")},s=function(){r=0},u.label=1;case 1:if(!(n===-1||r<n))return[3,9];u.label=2;case 2:return u.trys.push([2,4,,8]),[4,e(a,s)];case 3:if(o=u.sent(),i)throw i;return[2,o];case 4:if(l=u.sent(),i)return[3,6];if(++r===n)throw l;return[4,Bi(t.calcTimeout(r))];case 5:return u.sent(),[3,7];case 6:throw i;case 7:return[3,8];case 8:return[3,1];case 9:throw"It should not happen."}})})},Op=function(e){function n(t){var r=t===void 0?{}:t,i=r.authToken,a=r.isSoftRateLimited,s=e.call(this)||this;return s.type=gn.RECONNECTING,s.name="reconnecting",s._callbacks=[],s._authToken=i,s._isSoftRateLimited=a??void 0,s}return k(n,e),n.prototype._halt=function(t){this._haltConnect&&(this._haltConnect(t),this._haltConnect=void 0)},n.prototype._flushCallbacks=function(t){this._haltConnect=void 0,this._resetConnect=void 0,this._callbacks.forEach(function(r){return r(t)})},n.prototype.run=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u,c,h,f,p=this;return T(this,function(_){switch(_.label){case 0:r=Date.now(),i=new ra,this._callbacks.push(function(g){return g?i.reject(g):i.resolve()}),ze(function(){return N(p,void 0,void 0,function(){return T(this,function(g){return t.connectionHandlers.forEach(function(C){var E;(E=C.onReconnectStarted)===null||E===void 0||E.call(C)}),[2]})})}),a=t.dispatcher,_.label=1;case 1:return _.trys.push([1,4,,12]),s=_s(),o=0,l=t.sdkState.websocket,u=l.reconnectMaxRetry,c=l.reconnectRetryStrategy,[4,sE(function(g,C){return N(p,void 0,void 0,function(){var E;return T(this,function(y){switch(y.label){case 0:this._haltConnect=g,this._resetConnect=C,y.label=1;case 1:return y.trys.push([1,3,,4]),o++,[4,t.connect({authToken:this._authToken,connectionKey:s,connectionRetryCount:o,isSoftRateLimited:this._isSoftRateLimited})];case 2:return y.sent(),[3,4];case 3:if(E=y.sent(),t.clearLoginTimer(),E instanceof Q){switch(E.code){case Le.CONNECTION_CANCELED:case Le.DELAYED_CONNECTING:return g(E),[2]}if(E.isSessionExpiredError||E.isSessionInvalidatedError)return g(E),[2]}throw E;case 4:return[2]}})})},u,c)];case 2:return _.sent(),[4,t.changeState(new Mx,r)];case 3:return _.sent(),this._flushCallbacks(),ze(function(){return N(p,void 0,void 0,function(){return T(this,function(g){return t.connectionHandlers.forEach(function(C){var E;(E=C.onReconnectSucceeded)===null||E===void 0||E.call(C)}),[2]})})}),[3,12];case 4:return h=_.sent(),Vi(h)?[3,10]:[4,t.disconnect()];case 5:return _.sent(),h instanceof Q?h.code!==Le.DELAYED_CONNECTING?[3,7]:(f=JSON.parse(h.detail),[4,t.changeState(new Jh({retryAfterTime:1e3*f.retry_after,reasonCode:f.reason_code,message:f.message,authToken:this._authToken}),r)]):[3,9];case 6:return _.sent(),[3,9];case 7:return h.code===Le.CONNECTION_CANCELED?[3,9]:[4,t.changeState(new ef({autoReconnect:!1}),r)];case 8:_.sent(),h.isSessionExpiredError&&a.dispatch(new Zh({reason:h.code,message:h.message})),_.label=9;case 9:return this._flushCallbacks(h),ze(function(){return N(p,void 0,void 0,function(){return T(this,function(g){return t.connectionHandlers.forEach(function(C){var E;(E=C.onReconnectFailed)===null||E===void 0||E.call(C)}),[2]})})}),[3,11];case 10:throw h;case 11:return[3,12];case 12:return[2,i.promise]}})})},n.prototype.onConnect=function(t,r){return N(this,void 0,void 0,function(){var i;return T(this,function(a){return i=new ra,this._halt(Q.connectionCanceled),t.cancelConnectForRetry(),this._callbacks.push(function(){var s=Date.now();t.changeState(new oE({authToken:r}),s).then(function(){i.resolve()}).catch(function(o){i.reject(o)})}),[2,i.promise]})})},n.prototype.onReconnect=function(t,r){var i=r.resetReconnectCount,a=i!==void 0&&i;return N(this,void 0,void 0,function(){var s;return T(this,function(o){return s=new ra,this._resetConnect&&a&&this._resetConnect(),this._callbacks.push(function(l){return l?s.reject(l):s.resolve()}),[2,s.promise]})})},n.prototype.onDisconnect=function(t,r){r._error;var i=r.autoReconnect,a=i===void 0||i;return N(this,void 0,void 0,function(){var s;return T(this,function(o){switch(o.label){case 0:return s=Date.now(),this._halt(Q.connectionCanceled),[4,t.changeState(new ef({autoReconnect:a}),s)];case 1:return o.sent(),[2]}})})},n.prototype.onDisconnectWebSocket=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return r=Date.now(),this._halt(Q.connectionCanceled),[4,t.changeState(new tm,r)];case 1:return i.sent(),[2]}})})},n.prototype.onLogout=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return r=Date.now(),this._halt(Q.connectionCanceled),[4,t.changeState(new Wo,r)];case 1:return i.sent(),[2]}})})},n.prototype.onDelayedConnecting=function(t,r){var i=r.retryAfterTime,a=r.reasonCode,s=r.message;return N(this,void 0,void 0,function(){var o,l;return T(this,function(u){switch(u.label){case 0:return o=Date.now(),(l=new Q({code:Le.DELAYED_CONNECTING,message:s})).setDetail(JSON.stringify({retry_after:i/1e3,reason_code:a,message:s})),this._halt(l),[4,t.changeState(new Jh({retryAfterTime:i,reasonCode:a,message:s,authToken:this._authToken}),o)];case 1:return u.sent(),[2]}})})},n}(nc),Mx=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=gn.CONNECTED,t.name="connected",t}return k(n,e),n.prototype.onReconnect=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.disconnect()];case 1:return i.sent(),[4,t.changeState(new Op,r)];case 2:return i.sent(),[2]}})})},n.prototype.onDisconnect=function(t,r){var i=r.autoReconnect;return N(this,void 0,void 0,function(){var a;return T(this,function(s){switch(s.label){case 0:return a=Date.now(),[4,t.changeState(new ef({autoReconnect:i}),a)];case 1:return s.sent(),[2]}})})},n.prototype.onDisconnectWebSocket=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new tm,r)];case 1:return i.sent(),[2]}})})},n.prototype.onLogout=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new Wo,r)];case 1:return i.sent(),[2]}})})},n.prototype.onDelayedConnecting=function(t,r){var i=r.retryAfterTime,a=r.reasonCode,s=r.message;return N(this,void 0,void 0,function(){var o;return T(this,function(l){switch(l.label){case 0:return o=Date.now(),[4,t.changeState(new Jh({retryAfterTime:i,reasonCode:a,message:s}),o)];case 1:return l.sent(),[2]}})})},n}(nc),oE=function(e){function n(t){var r=t.authToken,i=e.call(this)||this;return i.type=gn.CONNECTING,i.name="connecting",i._authToken="",i._callbacks=[],i._authToken=r,i}return k(n,e),n.prototype._halt=function(t){this._haltConnect&&(this._haltConnect(t),this._haltConnect=void 0)},n.prototype._flushCallbacks=function(t){this._haltConnect=void 0,this._callbacks.forEach(function(r){return r(t)})},n.prototype.run=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u=this;return T(this,function(c){switch(c.label){case 0:r=Date.now(),i=new ra,this._callbacks.push(function(h){return h?i.reject(h):i.resolve()}),c.label=1;case 1:return c.trys.push([1,4,,12]),a=_s(),s=0,[4,sE(function(h){return N(u,void 0,void 0,function(){var f;return T(this,function(p){switch(p.label){case 0:this._haltConnect=h,p.label=1;case 1:return p.trys.push([1,3,,4]),s++,[4,t.connect({authToken:this._authToken,connectionKey:a,connectionRetryCount:s})];case 2:return p.sent(),[3,4];case 3:if(f=p.sent(),t.clearLoginTimer(),f instanceof Q)switch(f.code){case Le.CONNECTION_CANCELED:case Le.SESSION_KEY_EXPIRED:case Le.SESSION_TOKEN_EXPIRED:case Le.SESSION_REVOKED:case Le.USER_AUTH_DEACTIVATED:case Le.USER_AUTH_DELETED_OR_NOT_FOUND:case Le.USER_DEACTIVATED:case Le.DELAYED_CONNECTING:return h(f),[2]}throw f;case 4:return[2]}})})},t.sdkState.websocket.connectMaxRetry)];case 2:return c.sent(),[4,t.changeState(new Mx,r)];case 3:return c.sent(),ze(function(){return N(u,void 0,void 0,function(){return T(this,function(h){return this._flushCallbacks(),t.connectionHandlers.forEach(function(f){var p;(p=f.onConnected)===null||p===void 0||p.call(f,t.sdkState.userId)}),[2]})})}),[3,12];case 4:return o=c.sent(),Vi(o)?[3,10]:[4,t.disconnect()];case 5:return c.sent(),o instanceof Q?o.code!==Le.DELAYED_CONNECTING?[3,7]:(l=JSON.parse(o.detail),[4,t.changeState(new Jh({retryAfterTime:1e3*l.retry_after,reasonCode:l.reason_code,message:l.message,authToken:this._authToken}),r)]):[3,9];case 6:return c.sent(),[3,9];case 7:return o.code===Le.CONNECTION_CANCELED?[3,9]:[4,t.changeState(new kN,r)];case 8:c.sent(),c.label=9;case 9:return ze(function(){return N(u,void 0,void 0,function(){return T(this,function(h){return this._flushCallbacks(o),[2]})})}),[3,11];case 10:throw o;case 11:return[3,12];case 12:return[2,i.promise]}})})},n.prototype.onConnect=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){return r=new ra,this._callbacks.push(function(a){return a?r.reject(a):r.resolve()}),[2,r.promise]})})},n.prototype.onDisconnect=function(t,r){var i=r.error,a=i===void 0?null:i,s=r.autoReconnect,o=s!==void 0&&s,l=r.cause,u=l===void 0?null:l;return N(this,void 0,void 0,function(){var c;return T(this,function(h){switch(h.label){case 0:return c=Date.now(),this._halt(a??Fw(u)),t.hasSession?[4,t.changeState(new ef({autoReconnect:o}),c)]:[3,2];case 1:return h.sent(),[3,4];case 2:return[4,t.changeState(new Wo,c)];case 3:h.sent(),h.label=4;case 4:return[2]}})})},n.prototype.onDisconnectWebSocket=function(t,r){return N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return this._halt(Fw((r==null?void 0:r.cause)||null)),i=Date.now(),t.hasSession?[4,t.changeState(new tm,i)]:[3,2];case 1:return a.sent(),[3,4];case 2:return[4,t.changeState(new Wo,i)];case 3:a.sent(),a.label=4;case 4:return[2]}})})},n.prototype.onLogout=function(t,r){return N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return i=Date.now(),this._halt(r??Q.connectionCanceled),[4,t.changeState(new Wo,i)];case 1:return a.sent(),[2]}})})},n.prototype.onDelayedConnecting=function(t,r){var i=r.retryAfterTime,a=r.reasonCode,s=r.message;return N(this,void 0,void 0,function(){var o;return T(this,function(l){switch(l.label){case 0:return o=Date.now(),[4,t.changeState(new Jh({retryAfterTime:i,reasonCode:a,message:s,authToken:this._authToken}),o)];case 1:return l.sent(),[2]}})})},n}(nc);function Fw(e){var n=Q.connectionCanceled;if(e){var t=null;switch(e){case Ed.ExternalSetBackground:t="Connection has been canceled due to the application having externally moved to background while in ConnectingState.";break;case Ed.ExternalDisconnectWebSocket:t="Connection has been canceled because sb.disconnectWebSocket() was called while in ConnectingState."}t&&n.setDetail(t)}return n}var Eu,kN=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.type=gn.INITIALIZED,t.name="initialized",t}return k(n,e),n.prototype.onConnect=function(t,r){return N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return i=Date.now(),[4,t.changeState(new oE({authToken:r}),i)];case 1:return a.sent(),[2]}})})},n.prototype.onLogout=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return r=Date.now(),[4,t.changeState(new Wo({wasPreviouslyConnected:!1}),r)];case 1:return i.sent(),[2]}})})},n}(nc),Vj=function(e){function n(){return e.call(this,{code:"PING",payload:{id:Date.now(),active:1},ackRequired:!1})||this}return k(n,e),n}(Ri),zj=function(){function e(n){var t=n.pingDelegate,r=n.sdkState,i=n.logger;this.pingDelegate=t,this.sdkState=r,this._logger=i}return Object.defineProperty(e.prototype,"isWaiting",{get:function(){return!!this._pingTimeoutTimer},enumerable:!1,configurable:!0}),e.prototype.ping=function(){var n,t=this;if(!this.sdkState.websocket)throw Q.connectionRequired;var r=new Vj;try{var i=(n=this.sdkState.websocket.pongTimeout)!==null&&n!==void 0?n:5e3;this._pingTimeoutTimer=setTimeout(function(){t._logger.debug("pinger.ping() timeout"),t.pingDelegate.error()},i),this.pingDelegate.send(r),this._logger.debug("pinger.ping()")}catch(a){this._logger.debug("pinger.ping() error",a),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0),this.pingDelegate.error()}return r},e.prototype.pong=function(){this._logger.debug("pinger.pong()"),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},e.prototype.refreshTimer=function(){var n,t=this;if(!this.sdkState.websocket)throw Q.connectionRequired;this._logger.debug("pinger.refreshTimer()");var r=(n=this.sdkState.websocket.pingInterval)!==null&&n!==void 0?n:15e3;this.stop(),this._pingTimer=setInterval(function(){t.ping()},r)},e.prototype.start=function(){this._logger.debug("pinger.start()"),this.refreshTimer(),this.ping()},e.prototype.stop=function(){this._logger.debug("pinger.stop()"),this._pingTimer&&(clearInterval(this._pingTimer),this._pingTimer=void 0),this._pingTimeoutTimer&&(clearTimeout(this._pingTimeoutTimer),this._pingTimeoutTimer=void 0)},e}(),Ax=["premium_feature_list","file_upload_size_limit","application_attributes","emoji_hash","multiple_file_send_max_size","notifications","message_template","ai_agent"],jj=function(e){function n(t,r){var i,a=r.sdkState,s=r.cacheContext,o=r.connectionHandlers,l=r.sessionManager,u=r.websocketClient,c=r.dispatcher,h=r.logger,f=r.entryState,p=f===void 0?new kN:f,_=this;return(_=e.call(this)||this)._currentConnectionRetryCount=0,_._stateUpdatedAt=0,_._connectingAt=0,_._connectedAt=0,_._logiReceivedAt=0,_._connectionRequestQueue=[],_._iid=t,_.sdkState=a,_.cacheContext=s,_.connectionHandlers=o,_._sessionManager=l,_._websocketClient=u,_._dispatcher=c,_._logger=h,_._currentState=p,!((i=_.sdkState.websocket)===null||i===void 0)&&i.pingerDisabled||(_._pinger=new zj({pingDelegate:{send:function(g){return _._websocketClient.send(g)},error:function(g){c.dispatch(new Ol(new Kn({type:kn.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:Le.NETWORK_ERROR,error_description:"cause=ping_pong_timedout"}}))),_._websocketClient.error(g)}},sdkState:_.sdkState,logger:h})),_._websocketClient.on("open",function(){_._connectedAt=Date.now(),_._tryResolveConnectionRequest()}).on("message",function(g){g.code==="LOGI"&&(_.clearLoginTimer(),_._dispatcher.dispatch(g.as(pg)))}).on("ping-refresh",function(){var g;return(g=_._pinger)===null||g===void 0?void 0:g.refreshTimer()}).on("pong",function(){var g;return(g=_._pinger)===null||g===void 0?void 0:g.pong()}).on("error",function(){var g;return(g=_._pinger)===null||g===void 0?void 0:g.stop()}).on("close",function(){_._logiProcessingTimer=setTimeout(function(){_._logiProcessingTimer=void 0,_._unresolvedLogi||_._rejectConnectionRequest(Q.networkError)},500)}),_._dispatcher.on(function(g){if(g instanceof pg)_._unresolvedLogi=g,_._tryResolveConnectionRequest();else if(g instanceof DN){var C=g.retryAfterTime,E=g.reasonCode,y=g.message,S=new Q({code:Le.DELAYED_CONNECTING,message:y});S.setDetail(JSON.stringify({retry_after:C/1e3,reason_code:E,message:y})),_._rejectConnectionRequest(S)}}),_}return k(n,e),Object.defineProperty(n.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasSession",{get:function(){return this._sessionManager.session.hasSession},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"dispatcher",{get:function(){return this._dispatcher},enumerable:!1,configurable:!0}),n.prototype.changeState=function(t,r){return N(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return r>=this._stateUpdatedAt?(this._currentState=t,this._stateUpdatedAt=r,this._dispatcher.dispatch(new ja({stateType:t.type})),this._logger.debug("connection state changes to ".concat(t.name)),[4,this._currentState.run(this)]):[3,2];case 1:return i.sent(),[2,!0];case 2:return[2,!1]}})})},n.prototype._tryResolveConnectionRequest=function(){var t;return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return r=this._unresolvedLogi,this._websocketClient.isOpen&&r?(this._unresolvedLogi=void 0,this._logiReceivedAt=Date.now(),r.error?[3,2]:[4,r.applyTo(this._iid)]):[3,3];case 1:return i.sent(),this._statLogConnection(),(t=this._pinger)===null||t===void 0||t.start(),this._connectionRequestQueue.forEach(function(a){return a.resolve()}),this._connectionRequestQueue=[],this.sdkState.appState="foreground",[3,3];case 2:this._logger.warn("login failed: ".concat(r.error)),this._rejectConnectionRequest(r.error),i.label=3;case 3:return[2]}})})},n.prototype._rejectConnectionRequest=function(t){var r;if((r=this._pinger)===null||r===void 0||r.stop(),this.clearLoginTimer(),this._connectionRequestQueue.length>0){var i=this._connectionRequestQueue;this._connectionRequestQueue=[],i.forEach(function(a){return a.reject(t)}),this._statLogConnection(t)}},n.prototype._url=function(t){var r,i=t.configTs,a=this.sdkState,s=a.appId,o=a.appVersion,l=a.userId,u=a.extensions,c=a.sendbirdRuntimeEnvironment,h=this.cacheContext.localCacheEnabled,f=this._sessionManager.session,p=(r=this.sdkState.websocket)===null||r===void 0?void 0:r.compression,_=!!(u??{}).sb_uikit,g=r0.userAgentWithExtension(u);return"".concat(this.sdkState.websocket.host,"/?p=JS&pv=").concat(encodeURIComponent(Bu.OS_VERSION),"&sv=").concat(encodeURIComponent(Bu.SDK_VERSION),"&ai=").concat(s).concat(o?"&av=".concat(o):"").concat(f.hasSession?"":"&user_id=".concat(encodeURIComponent(l)),"&pmce=").concat(p?1:0,"&active=1&device_token_types=").concat(encodeURIComponent(["gcm","huawei","apns"].join(",")),"&SB-User-Agent=").concat(g,"&SB-SDK-User-Agent=").concat(encodeURIComponent(r0.sendbirdSdkUserAgentWithExtension(c)),"&Request-Sent-Timestamp=").concat(Date.now().toString(),"&include_extra_data=").concat(encodeURIComponent(String(Ax))).concat(this._sessionManager.handler?"&expiring_session=1":"","&use_local_cache=").concat(h?1:0,"&include_poll_details=1").concat(_?"&uikit_config=1":"","&config_ts=").concat(i)},n.prototype._statLogConnection=function(t){var r,i;this._dispatcher.dispatch(new Ol(new Kn({type:kn.WEBSOCKET_CONNECT,data:{host_url:(r=this.sdkState.websocket)===null||r===void 0?void 0:r.host,success:!t,latency:this._connectedAt>0?this._connectedAt-this._connectingAt:Date.now()-this._connectingAt,logi_latency:this._logiReceivedAt>0?this._logiReceivedAt-this._connectingAt:void 0,connection_id:this._currentConnectionKey,accum_trial:this._currentConnectionRetryCount,is_soft_rate_limited:(i=this._isSoftRateLimited)!==null&&i!==void 0?i:void 0,error_code:t==null?void 0:t.code,error_description:(t==null?void 0:t.code)===Le.DELAYED_CONNECTING?t==null?void 0:t.detail:t==null?void 0:t.message}})))},n.prototype.connect=function(t){var r;return t===void 0&&(t={}),N(this,void 0,void 0,function(){var i,a,s,o,l,u,c,h,f,p,_,g,C=this;return T(this,function(E){switch(E.label){case 0:return this._logiProcessingTimer&&(clearTimeout(this._logiProcessingTimer),this._logiProcessingTimer=void 0,this._rejectConnectionRequest(Q.connectionCanceled)),i=new ra,a=t.authToken,s=a===void 0?"":a,o=t.connectionKey,l=o===void 0?_s():o,u=t.connectionRetryCount,c=u===void 0?1:u,h=t.isSoftRateLimited,this._connectionRequestQueue.push(i),this._connectionRequestQueue.length!==1?[3,2]:(this._currentConnectionKey=l,this._currentConnectionRetryCount=c,this._isSoftRateLimited=h,this._connectingAt=Date.now(),this._connectedAt=0,this._logiReceivedAt=0,this._loginTimer=setTimeout(function(){C._loginTimer=void 0,C._rejectConnectionRequest(Q.loginTimeout)},(r=this.sdkState.websocket)===null||r===void 0?void 0:r.responseTimeout),f=this._sessionManager.session,s&&(f.authToken=s,f.sessionKey=void 0),p=0,[4,this.cacheContext.preference.get(l0(this.sdkState.appId))]);case 1:(_=E.sent())&&(p=_.configTs),g=this._url({configTs:p}),f.sessionKey||f.authToken?this._websocketClient.connect(g,JSON.stringify(f.hasSession?{auth:f.sessionKey}:{token:f.authToken})):this._websocketClient.connect(g,JSON.stringify({})),E.label=2;case 2:return[2,i.promise]}})})},n.prototype.cancelConnectForRetry=function(){this._dispatcher.dispatch(pg.asError(Q.connectionRenew))},n.prototype.disconnect=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this._websocketClient.disconnect()];case 1:return t.sent(),[2]}})})},n.prototype.logout=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return this.sdkState.userId=void 0,this._unresolvedLogi=void 0,[4,this.disconnect()];case 1:return t.sent(),[4,this._sessionManager.clear()];case 2:return t.sent(),[2]}})})},n.prototype.clearLoginTimer=function(){this._loginTimer&&(clearTimeout(this._loginTimer),this._loginTimer=void 0)},n}(Dd),wx=function(e){function n(t){var r=t.appId,i=t.userId,a=t.includeUIKitConfig,s=a!==void 0&&a,o=t.localCacheEnabled,l=o===void 0||o,u=t.expiringSession,c=u===void 0||u,h=t.configTs,f=h===void 0?0:h,p=e.call(this)||this;return p.path="".concat(dz,"/").concat(encodeURIComponent(i),"/authentication"),p.method=fe.POST,p.params=Ae({expiring_session:!!c,include_logi:!0,include_extra_data:String(Ax),uikit_config:s,use_local_cache:l,app_id:r,config_ts:f}),p.requireAuth=!1,p}return k(n,e),n}(ve),qj=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.logi=new pg(t,"LOGI",r),i}return k(n,e),n}(_e);(function(e){e[e.ALL=0]="ALL",e[e.WEBSOCKET=1]="WEBSOCKET",e[e.API=2]="API"})(Eu||(Eu={}));var tr,Bw,Kj=[AN,wx],Wj=function(){function e(n,t){var r=t.session,i=t.sdkState,a=t.dispatcher,s=t.logger,o=t.useFetchCompat,l=o!==void 0&&o,u=this;this._currentConnectionStateType=gn.INITIALIZED,this._lazyCallQueue=[],this.commandRouter=new Uj(n,{session:r,sdkState:i,dispatcher:a,logger:s,useFetchCompat:l}),this._session=r,this._logger=s,this._dispatcher=a,this._dispatcher.on(function(c){var h,f,p;if(c instanceof ja){var _=c.stateType;switch(u._currentConnectionStateType=_,_){case gn.CONNECTED:u._resolveLazyCallQueue();break;case gn.INITIALIZED:case gn.INTERNAL_DISCONNECTED:case gn.EXTERNAL_DISCONNECTED:case gn.LOGOUT:u._session.isRefreshing||u._rejectLazyCallQueue(!((p=u._session)===null||p===void 0)&&p.hasSession?Q.connectionClosed:Q.connectionRequired)}}else if(c instanceof bx)u._session.hasChatServicePermission||u._resolveLazyCallQueue(Eu.API);else if(c instanceof R1||c instanceof Cx)u._rejectLazyCallQueue(Q.connectionClosed);else if(c instanceof Xk){var g=c.request,C=c.deferred,E=c.error;try{for(var y=ye(Kj),S=y.next();!S.done;S=y.next())if(g instanceof S.value)return void C.reject(E)}catch(I){h={error:I}}finally{try{S&&!S.done&&(f=y.return)&&f.call(y)}finally{if(h)throw h.error}}u._lazyCallQueue.push({command:g,deferred:C})}})}return Object.defineProperty(e.prototype,"isReady",{get:function(){return this._currentConnectionStateType===gn.CONNECTED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLazyCallActivated",{get:function(){return this._currentConnectionStateType===gn.CONNECTING||this._currentConnectionStateType===gn.RECONNECTING||this._session.isRefreshing},enumerable:!1,configurable:!0}),e.prototype._classifyLazyCallQueueByScope=function(n){var t,r=[],i=[];switch(n){case Eu.ALL:t=null;break;case Eu.WEBSOCKET:t=Ri;break;case Eu.API:t=ve}var a=!1;return this._lazyCallQueue.forEach(function(s){!t||s.command instanceof t||(a=!0),a?i.push(s):r.push(s)}),[r,i]},e.prototype._resolveLazyCallQueue=function(n){var t=this;n===void 0&&(n=Eu.ALL);var r=Ge(this._classifyLazyCallQueueByScope(n),2),i=r[0],a=r[1];this._lazyCallQueue=a,i.forEach(function(s){return N(t,void 0,void 0,function(){var o,l,u,c,h;return T(this,function(f){switch(f.label){case 0:o=s.command,l=s.deferred,(u=s.timeout)&&clearTimeout(u),f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this.send(o)];case 2:return c=f.sent(),l.resolve(c),[3,4];case 3:return h=f.sent(),l.reject(h),[3,4];case 4:return[2]}})})})},e.prototype._rejectLazyCallQueue=function(n,t){var r=this;t===void 0&&(t=Eu.ALL);var i=Ge(this._classifyLazyCallQueueByScope(t),2),a=i[0],s=i[1];this._lazyCallQueue=s,a.forEach(function(o){return N(r,void 0,void 0,function(){var l,u;return T(this,function(c){return l=o.deferred,u=o.timeout,clearTimeout(u),l.reject(n),[2]})})})},e.prototype.send=function(n){return N(this,void 0,void 0,function(){var t,r,i=this;return T(this,function(a){switch(a.label){case 0:return n instanceof Ri?this.isReady?(this._logger.debug("send websocket request",n),[4,this.commandRouter.send(n)]):[3,2]:[3,4];case 1:case 5:case 7:return[2,a.sent()];case 2:if(this.isLazyCallActivated)return this._logger.debug("wait websocket request",n),t=new ra,this._lazyCallQueue.push({command:n,deferred:t,timeout:setTimeout(function(){return i.timeout(n.requestId)},1e4)}),[2,t.promise];throw this._logger.debug("fail websocket request"),Q.connectionRequired;case 3:case 9:return[3,11];case 4:return n instanceof ve?this._session.hasSession?(this._logger.debug("send api request",n),[4,this.commandRouter.send(n)]):[3,6]:[3,10];case 6:return n.hasSessionKey?(this._logger.debug("send api request with tmp session key",n),[4,this.commandRouter.send(n)]):[3,8];case 8:if(this.isLazyCallActivated)return this._logger.debug("wait api request",n),t=new ra,this._lazyCallQueue.push({command:n,deferred:t,timeout:setTimeout(function(){return i.timeout(n.requestId)},1e4)}),[2,t.promise];throw r=Q.connectionRequired,this._logger.debug("fail api request",r),r;case 10:throw Q.invalidCommand;case 11:return[2]}})})},e.prototype.forceSend=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return this._logger.debug("send forced request",n),n instanceof Ri||n instanceof ve?[4,this.commandRouter.send(n)]:[3,2];case 1:return[2,t.sent()];case 2:throw Q.invalidCommand}})})},e.prototype.timeout=function(n){this._logger.debug("timeout request",n);var t=this._lazyCallQueue.findIndex(function(r){return r.command.requestId===n});t>-1&&(this._lazyCallQueue[t].deferred.reject(Q.connectionRequired),this._lazyCallQueue.splice(t,1))},e.prototype.cancel=function(n){this._logger.debug("cancel api request",n),this.commandRouter.cancel(n)},e.prototype.cancelAll=function(){this._logger.debug("cancel all api requests"),this.commandRouter.cancelAll()},e}(),Lb="sendbird@devicetokens",kb=function(){function e(n){var t=n.type,r=n.token,i=n.device_os,a=n.device_manufacturer,s=n.system_push_enabled;this.type=t,this.token=r,this.deviceOS=i,this.deviceManufacturer=a,this.systemPushEnabled=s}return e.payloadify=function(n){return Ae($e({type:n.type,token:n.token,device_os:n.deviceOS,device_manufacturer:n.deviceManufacturer,system_push_enabled:n.systemPushEnabled}))},e}(),xb=new WeakMap,Yj=function(e){function n(t){var r=t._iid,i=t.session,a=t.cacheContext,s=t.sdkState,o=t.dispatcher,l=t.requestQueue,u=t.logger,c=t.pushNotificationAckManager,h=e.call(this)||this;return h._currentConnectionStateType=gn.INITIALIZED,h._isRefreshingAuthToken=!1,h.currentUser=null,h.session=i,h._iid=r,h._cacheContext=a,h._sdkState=s,h._dispatcher=o,h._requestQueue=l,h._logger=u,h._pushNotificationAckManager=c,h._deviceTokens=[],h._dispatcher.on(function(f){var p,_,g;if(f instanceof ja){var C=f.stateType;h._currentConnectionStateType=C}else if(f instanceof Zh&&h.handler&&!h.isSessionKeyRefreshing){if(h._currentConnectionStateType===gn.CONNECTING)return;!((p=f.error)===null||p===void 0)&&p.isSessionInvalidatedError?h.clear():(!((_=f.error)===null||_===void 0)&&_.isSessionTokenExpiredError&&h.refreshAuthToken().catch(function(E){if(Vi(E)&&h._sdkState.appState==="foreground")throw E}),!((g=f.error)===null||g===void 0)&&g.isSessionKeyExpiredError&&(h._logger.debug("session expired"),h.handler.onSessionExpired&&h.handler.onSessionExpired(),h._currentConnectionStateType===gn.CONNECTED&&h._dispatcher.dispatch(new Ol(new Kn({type:kn.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:Le.SESSION_KEY_EXPIRED,error_description:"cause=session_expired"}}))),h.refreshSessionKey().catch(function(E){if(Vi(E)&&h._sdkState.appState==="foreground")throw E})))}}),h}return k(n,e),Object.defineProperty(n.prototype,"ekey",{get:function(){return xb.get(this)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceTokens",{get:function(){return this._deviceTokens},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"deviceTokenLastDeletedAt",{get:function(){return this._deviceTokenLastDeletedAt},enumerable:!1,configurable:!0}),n.prototype.indexOfDeviceToken=function(t,r){return this._deviceTokens.findIndex(function(i){return i.type===t&&i.token===r})},n.prototype.hasDeviceToken=function(t,r){return this.indexOfDeviceToken(t,r)>=0},n.prototype.createRefreshWebsocketCommand=function(t,r){return new Nz({authToken:t,expiringSession:!0,requestId:r})},n.prototype._refreshSessionKeyByWebSocket=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return r=this.createRefreshWebsocketCommand(t),[4,this._requestQueue.forceSend(r)];case 1:if(i=l.sent(),a=i.as(Mz),s=a.newKey,o=a.error)throw o;return this.session.sessionKey=s??this.session.sessionKey,[2]}})})},n.prototype._refreshSessionKeyByApi=function(t){return N(this,void 0,void 0,function(){var r,i=this;return T(this,function(a){switch(a.label){case 0:return r=new AN({userId:this._sdkState.userId,authToken:t,services:this.session.services&&this.session.services.length>0?this.session.services:void 0,expiringSession:!0}),[4,sE(function(s){return N(i,void 0,void 0,function(){var o,l,u,c,h;return T(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),[4,this._requestQueue.forceSend(r)];case 1:return o=f.sent(),l=o.as(Iz),u=l.key,c=l.services,this.session.sessionKey=u,this.session.services=c,[3,3];case 2:if(h=f.sent(),!this._isSessionRelatedError(h))throw h;return s(h),[3,3];case 3:return[2]}})})},3)];case 1:return a.sent(),[2]}})})},n.prototype._refreshSessionKey=function(t,r){return r===void 0&&(r=!0),N(this,void 0,void 0,function(){var i,a;return T(this,function(s){switch(s.label){case 0:if(this._currentConnectionStateType!==gn.CONNECTED)return[3,8];s.label=1;case 1:return s.trys.push([1,3,,8]),[4,this._refreshSessionKeyByWebSocket(t)];case 2:return s.sent(),this.complete(),[2];case 3:i=s.sent(),s.label=4;case 4:return s.trys.push([4,6,,7]),[4,this._handleSessionRefreshError(i,r)];case 5:return s.sent(),[2];case 6:return s.sent(),[3,7];case 7:return[3,8];case 8:return s.trys.push([8,10,,12]),[4,this._refreshSessionKeyByApi(t)];case 9:return s.sent(),this.complete(),[3,12];case 10:return a=s.sent(),[4,this._handleSessionRefreshError(a,r)];case 11:return s.sent(),[3,12];case 12:return[2]}})})},n.prototype._receiveNewAuthToken=function(){var t,r=this,i=new ra;if(this._isRefreshingAuthToken=!0,this.session.sessionKey=void 0,this.session.authToken=void 0,(t=this.handler)===null||t===void 0?void 0:t.onSessionTokenRequired){var a=null,s=function(){a&&(clearTimeout(a),a=null)},o=function(u){s(),r._isRefreshingAuthToken&&(r._isRefreshingAuthToken=!1,i.resolve(u))},l=function(u){s(),r._isRefreshingAuthToken&&(r._isRefreshingAuthToken=!1,i.reject(u))};a=setTimeout(function(){return l()},1e3*this._sdkState.sessionTokenRefreshTimeout),ze(function(){return N(r,void 0,void 0,function(){var u;return T(this,function(c){return!((u=this.handler)===null||u===void 0)&&u.onSessionTokenRequired&&this.handler.onSessionTokenRequired(o,l),[2]})})})}else i.resolve(null);return i.promise},n.prototype._handleSessionRefreshError=function(t,r){return r===void 0&&(r=!1),N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return t instanceof Q&&(t.isSessionTokenExpiredError||t.code===Le.APPLICATION_NOT_FOUND)?(this.session.authToken=void 0,r?[4,this._receiveNewAuthToken()]:[3,6]):[3,6];case 1:return(i=a.sent())?(this.session.authToken=i,[4,this._refreshSessionKey(this.session.authToken,!1)]):[3,3];case 2:return a.sent(),[3,5];case 3:return[4,this.clear()];case 4:a.sent(),a.label=5;case 5:return[2];case 6:throw t}})})},n.prototype._isSessionRelatedError=function(t){return t instanceof Q&&(t.isSessionExpiredError||t.isSessionInvalidatedError)},Object.defineProperty(n.prototype,"isSessionKeyRefreshing",{get:function(){return this.session.isRefreshing},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRefreshingAuthToken",{get:function(){return this._isRefreshingAuthToken},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isSessionExpiring",{get:function(){return!!this.handler},enumerable:!1,configurable:!0}),n.prototype.authenticate=function(t,r){var i;return N(this,void 0,void 0,function(){var a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return this.session.authToken=r,a=0,[4,this._cacheContext.preference.get(l0(this._sdkState.appId))];case 1:return(s=c.sent())&&(a=s.configTs),o=new wx({appId:this._sdkState.appId,userId:t,includeUIKitConfig:!!((i=this._sdkState.extensions)!==null&&i!==void 0?i:{}).sb_uikit,localCacheEnabled:this._cacheContext.localCacheEnabled,expiringSession:this.isSessionExpiring,configTs:a}),[4,this._requestQueue.commandRouter.send(o)];case 2:return l=c.sent(),(u=l.as(qj).logi).error?[3,5]:this.session.hasChatServicePermission?[3,4]:[4,u.applyTo(this._iid)];case 3:c.sent(),c.label=4;case 4:return[3,6];case 5:throw u.error;case 6:return[2]}})})},n.prototype.login=function(t){var r;return N(this,void 0,void 0,function(){var i,a,s,o,l,u,c,h;return T(this,function(f){switch(f.label){case 0:return i=t.key,a=t.ekey,s=t.services,o=t.userProfile,l=t.deviceTokenLastDeletedAt,u=l===void 0?0:l,this.session.sessionKey=i,this.session.services=s,xb.set(this,a),this._deviceTokenCacheEnabled=(r=o==null?void 0:o.appInfo)===null||r===void 0?void 0:r.deviceTokenCache,c=this._cacheContext.preference,this._deviceTokenCacheEnabled?[4,c.get(Lb)]:[3,5];case 1:return!(h=f.sent())||h.lastDeletedAt<u?(this._deviceTokens=[],this._deviceTokenLastDeletedAt=u,[4,this.saveDeviceToken()]):[3,3];case 2:return f.sent(),[3,4];case 3:this._deviceTokens=h.tokens.map(function(p){return new kb(kb.payloadify(p))}),this._deviceTokenLastDeletedAt=h.lastDeletedAt,f.label=4;case 4:return[3,7];case 5:return[4,c.remove(Lb)];case 6:f.sent(),f.label=7;case 7:return[2]}})})},n.prototype.complete=function(){var t=this;this.dispatch("refresh"),this._dispatcher.dispatch(new bx),ze(function(){return N(t,void 0,void 0,function(){var r;return T(this,function(i){return this._logger.debug("session refreshed"),!((r=this.handler)===null||r===void 0)&&r.onSessionRefreshed&&this.handler.onSessionRefreshed(),[2]})})})},n.prototype.error=function(t){var r=this;ze(function(){return N(r,void 0,void 0,function(){var i;return T(this,function(a){return!((i=this.handler)===null||i===void 0)&&i.onSessionError&&this.handler.onSessionError(t),[2]})})})},n.prototype.close=function(){var t=this;this.dispatch("close"),this._dispatcher.dispatch(new Cx),ze(function(){return N(t,void 0,void 0,function(){var r;return T(this,function(i){return this._logger.debug("session closed"),!((r=this.handler)===null||r===void 0)&&r.onSessionClosed&&this.handler.onSessionClosed(),[2]})})})},n.prototype.refreshAuthToken=function(){return N(this,void 0,void 0,function(){var t,r;return T(this,function(i){switch(i.label){case 0:if(t=null,!this.isSessionExpiring||this.session.isRefreshing)return[3,9];this.session.isRefreshing=!0,i.label=1;case 1:return i.trys.push([1,7,8,9]),[4,this._receiveNewAuthToken()];case 2:return(t=i.sent())?(this._logger.debug("session refreshing.."),this.session.authToken=t,[4,this._refreshSessionKey(this.session.authToken)]):[3,4];case 3:return i.sent(),[3,6];case 4:return[4,this.clear()];case 5:i.sent(),i.label=6;case 6:return[3,9];case 7:throw i.sent(),r=t?Q.sessionTokenRefreshFailed:Q.sessionTokenRequestFailed,this._dispatcher.dispatch(new R1),this.error(r),this._logger.debug("refresh auth token error = ",r),r;case 8:return this.session.isRefreshing=!1,[7];case 9:return[2]}})})},n.prototype.refreshSessionKey=function(){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:if(!this.isSessionExpiring||this.session.isRefreshing)return[3,5];this.session.isRefreshing=!0,r.label=1;case 1:return r.trys.push([1,3,4,5]),[4,this._refreshSessionKey(this.session.authToken)];case 2:return r.sent(),[3,5];case 3:throw r.sent(),t=Q.sessionTokenRefreshFailed,this._dispatcher.dispatch(new R1),this.error(t),t;case 4:return this.session.isRefreshing=!1,[7];case 5:return[2]}})})},n.prototype.setDeviceToken=function(t,r,i){if(this._deviceTokenCacheEnabled&&this.indexOfDeviceToken(t,r)<0){var a=new kb({type:t,token:r,device_os:i==null?void 0:i.deviceOS,device_manufacturer:i==null?void 0:i.deviceManufacturer,system_push_enabled:i==null?void 0:i.systemPushEnabled});return this._deviceTokens.push(a),!0}return!1},n.prototype.unsetDeviceToken=function(t,r){if(this._deviceTokenCacheEnabled){var i=this.indexOfDeviceToken(t,r);i>=0&&this._deviceTokens.splice(i,1)}},n.prototype.unsetDeviceTokens=function(t){this._deviceTokenCacheEnabled&&(this._deviceTokens=t?this._deviceTokens.filter(function(r){return r.type!==t}):[])},n.prototype.setDeviceTokenDeletedAt=function(t){t>0&&(this._deviceTokenLastDeletedAt=t)},n.prototype.saveDeviceToken=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return this._deviceTokenCacheEnabled?[4,this._cacheContext.preference.set(Lb,{tokens:this._deviceTokens,lastDeletedAt:this._deviceTokenLastDeletedAt})]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.clear=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return this.currentUser=null,this.session.clear(),this.close(),xb.delete(this),this._deviceTokens=[],this._deviceTokenLastDeletedAt=0,[4,this.saveDeviceToken()];case 1:return t.sent(),this._pushNotificationAckManager.clear(),[2]}})})},n}(Dd),Rx=function(e,n){var t,r;if(e!==null&&n!==null){var i=Object.keys(e),a=Object.keys(n),s=it([],Ge(new Set(it(it([],Ge(i),!1),Ge(a),!1))),!1),o={};try{for(var l=ye(s),u=l.next();!u.done;u=l.next()){var c=u.value,h=typeof e[c],f=typeof n[c];h==="undefined"?o[c]=n[c]:f==="undefined"?o[c]=e[c]:h!==f?o[c]=n[c]:h==="object"&&e[c]&&n[c]?o[c]=Rx(e[c],n[c]):o[c]=n[c]}}catch(p){t={error:p}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}return o}return n};(function(e){e[e.PENDING=0]="PENDING",e[e.COLLECT_ONLY=1]="COLLECT_ONLY",e[e.ENABLED=2]="ENABLED",e[e.DISABLED=3]="DISABLED"})(tr||(tr={})),function(e){e.DAILY="daily",e.DEFAULT="default",e.REALTIME="realtime"}(Bw||(Bw={}));var u0,lE=100,xN=function(){function e(n){var t=n.deviceId,r=n.cacheContext,i=n.requestQueue;this.queue=[],this.flushWaitQueue=[],this.enabledState=tr.PENDING,this.isFlushing=!1,this._sentLogStats=[],this.deviceId=t,this.cacheContext=r,this.requestQueue=i,this.logInfo={deviceId:t,statLogs:[],generation:1,lastFlushedAt:0},this.limit=lE}return Object.defineProperty(e.prototype,"isEnabled",{get:function(){return this.enabledState===tr.ENABLED},enumerable:!1,configurable:!0}),e.prototype.init=function(n){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:return this.key=n,[4,this.cacheContext.preference.get(this.key)];case 1:return(t=r.sent())&&(this.logInfo=t),[2]}})})},e.prototype._mergeQueue=function(){this.flushWaitQueue.length>0&&(this.queue=this.queue.concat(this.flushWaitQueue),this.flushWaitQueue=[])},e.prototype._isDuplicateStat=function(n){var t=this._sentLogStats.find(function(r){var i;return r.channelUrl===n.data.channel_url&&r.messageId===((i=n.data.notificationId)!==null&&i!==void 0?i:n.data.message_id)&&r.action===n.data.action});return t||this._sentLogStats.push({channelUrl:n.data.channel_url,messageId:n.data.message_id,action:n.data.action}),!!t},e.prototype._save=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){switch(t.label){case 0:return n=it(it([],Ge(this.queue),!1),Ge(this.flushWaitQueue),!1),[4,this.cacheContext.preference.set(this.key,{deviceId:this.logInfo.deviceId,statLogs:n.map(function(r){return Kn.payloadify(r)}),generation:this.logInfo.generation++,lastFlushedAt:this.logInfo.lastFlushedAt})];case 1:return t.sent(),[2]}})})},e.prototype.clear=function(){return N(this,void 0,void 0,function(){return T(this,function(n){return this.queue=[],this.flushWaitQueue=[],this.logInfo.generation=1,this._save(),[2]})})},e}(),Dp=function(e){function n(t){var r,i,a,s,o=t.type,l=t.data,u=t.ts,c=u===void 0?Date.now():u,h=e.call(this,{type:o,data:l,ts:c})||this;return h.date=new Date(c),h.key="".concat((r=h.date,i=r.getFullYear(),a=String(r.getMonth()+1).padStart(2,"0"),s=String(r.getDate()).padStart(2,"0"),"".concat(i).concat(a).concat(s)),"_").concat(o),h}return k(n,e),n}(Kn),Ox=function(e){function n(t){var r=t.deviceId,i=t.statLogs,a=e.call(this)||this;return a.method=fe.POST,a.path="".concat(gz),a.params={device_id:r,log_entries:i.map(function(s){return Kn.payloadify(s)})},a}return k(n,e),n}(ve),Qj=function(e){function n(t){var r=t.deviceId,i=t.cacheContext,a=t.requestQueue;return e.call(this,{deviceId:r,cacheContext:i,requestQueue:a})||this}return k(n,e),Object.defineProperty(n.prototype,"_isSendable",{get:function(){return this.queue.length!==0&&Date.now()-this.logInfo.lastFlushedAt>=this.statConfig.minInterval},enumerable:!1,configurable:!0}),n.prototype.init=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,e.prototype.init.call(this,t+".daily")];case 1:return r.sent(),this.queue=this.logInfo.statLogs.map(function(i){return new Kn({type:i.stat_type,ts:i.ts,data:i.data})}),[2]}})})},n.prototype.setConfig=function(t,r){return N(this,void 0,void 0,function(){var i,a,s,o;return T(this,function(l){switch(l.label){case 0:return this.statConfig=t,this.statConfig.minInterval=864e5,this._mergeQueue(),r.localCacheStat?(this.enabledState=r.enabledStat?tr.ENABLED:tr.COLLECT_ONLY,[3,3]):[3,1];case 1:return this.enabledState=tr.DISABLED,[4,this.clear()];case 2:l.sent(),l.label=3;case 3:return this.isEnabled&&this._isSendable?[4,this._getUploadStats()]:[3,9];case 4:i=l.sent(),a=Math.max(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),s=0,l.label=5;case 5:return s<i.length?(o=i.slice(s,1+this.statConfig.maxStatCountPerRequest),[4,Bi(a)]):[3,9];case 6:return l.sent(),[4,this._flush(o)];case 7:l.sent(),l.label=8;case 8:return s+=this.statConfig.maxStatCountPerRequest,[3,5];case 9:return[2]}})})},n.prototype.put=function(t){return N(this,void 0,void 0,function(){var r,i,a,s;return T(this,function(o){switch(o.label){case 0:return this.enabledState===tr.DISABLED?[2,!0]:(r=this.enabledState===tr.PENDING||this.isFlushing?this.flushWaitQueue:this.queue,i=Ge(r.filter(function(l){return l instanceof Dp&&l.key===t.key}),1),(a=i[0])?a.data=Rx(a.data,t.data):r.push(t),this.enabledState===tr.PENDING?[3,2]:[4,this._save()]);case 1:o.sent(),o.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this._isSendable?[4,this._getUploadStats()]:[3,5]):[3,5];case 3:return s=o.sent(),[4,this._flush(s)];case 4:return[2,o.sent()];case 5:return[2,!0]}})})},n.prototype._getUploadStats=function(){return N(this,void 0,void 0,function(){var t;return T(this,function(r){return t=this.queue.filter(function(i){if(i instanceof Dp){var a=new Date,s=Ge([i.date.getFullYear(),a.getFullYear()],2),o=s[0],l=s[1];if(o<l)return!0;if(o===l){var u=Ge([i.date.getMonth(),a.getMonth()],2),c=u[0],h=u[1];if(c<h)return!0;if(c===h){var f=Ge([i.date.getDate(),a.getDate()],2);return f[0]<f[1]}}}return!1}),[2,t]})})},n.prototype._flush=function(t){return N(this,void 0,void 0,function(){var r,i,a,s;return T(this,function(o){switch(o.label){case 0:if(r=!0,!(t.length>0))return[3,10];if(this.isFlushing)return[3,9];this.isFlushing=!0,o.label=1;case 1:return o.trys.push([1,4,8,9]),i=it([],Ge(t),!1).slice(0,Math.min(this.limit,this.statConfig.maxStatCountPerRequest)),a=new Ox({deviceId:this.deviceId,statLogs:i}),[4,this.requestQueue.send(a)];case 2:return o.sent(),this.queue=it([],Ge(t),!1).slice(i.length).concat(this.flushWaitQueue),this.flushWaitQueue=[],this.limit=lE,this.logInfo.lastFlushedAt=Date.now(),[4,this._save()];case 3:return o.sent(),[3,9];case 4:return(s=o.sent())instanceof Q?s.code!==Le.NON_AUTHORIZED?[3,6]:[4,this.clear()]:[3,7];case 5:return o.sent(),this.enabledState=tr.DISABLED,[3,7];case 6:s.code===Le.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=tr.COLLECT_ONLY),o.label=7;case 7:return this.limit=this.limit+20,r=!1,[3,9];case 8:return this.isFlushing=!1,[7];case 9:return[3,11];case 10:this.isFlushing=!1,o.label=11;case 11:return[2,r]}})})},n}(xN),Xj=function(e){function n(t){var r=t.deviceId,i=t.cacheContext,a=t.requestQueue;return e.call(this,{deviceId:r,cacheContext:i,requestQueue:a})||this}return k(n,e),n.prototype._isSendable=function(t){if(t===void 0&&(t=!1),this.queue.length<this.statConfig.lowerThreshold)return!1;if(t){if(Date.now()-this.logInfo.lastFlushedAt<this.statConfig.minInterval)return!1}else if(this.queue.length<this.statConfig.minStatCount)return!1;return!0},n.prototype._filterQueueByType=function(t,r){return N(this,void 0,void 0,function(){return T(this,function(i){return[2,r?t.filter(function(a){return a.type!==kn.FEATURE_LOCALCACHE_EVENT}):t.filter(function(a){return a.type===kn.FEATURE_LOCALCACHE_EVENT})]})})},n.prototype.init=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,e.prototype.init.call(this,t+".default")];case 1:return r.sent(),this.queue=this.logInfo.statLogs.map(function(i){return i.data=z({message_init_policy:"",starting_point:0},i.data),new Kn({type:i.stat_type,ts:i.ts,data:i.data})}),[2]}})})},n.prototype.setConfig=function(t,r){return N(this,void 0,void 0,function(){var i,a,s,o;return T(this,function(l){switch(l.label){case 0:return this.statConfig=t,this._mergeQueue(),r.requestStat||r.localCacheStat?(this.enabledState=r.enabledStat?tr.ENABLED:tr.COLLECT_ONLY,i=void 0,r.requestStat||(i=!1),r.localCacheStat||(i=!0),i===void 0?[3,3]:(a=this,[4,this._filterQueueByType(this.queue,i)])):[3,4];case 1:return a.queue=l.sent(),s=this,[4,this._filterQueueByType(this.flushWaitQueue,i)];case 2:s.flushWaitQueue=l.sent(),this._save(),l.label=3;case 3:return[3,6];case 4:return this.enabledState=tr.DISABLED,[4,this.clear()];case 5:l.sent(),l.label=6;case 6:return this.isEnabled&&this._isSendable(!0)?(o=Math.max(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),[4,Bi(o)]):[3,9];case 7:return l.sent(),[4,this._flush(this.queue)];case 8:l.sent(),l.label=9;case 9:return[2]}})})},n.prototype.put=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return this.enabledState===tr.DISABLED?[2,!0]:((r=this.enabledState===tr.PENDING||this.isFlushing?this.flushWaitQueue:this.queue).push(t),this.enabledState===tr.PENDING?[3,2]:[4,this._save()]);case 1:i.sent(),i.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this._isSendable()?[4,this._flush(r)]:[3,4]):[3,4];case 3:return[2,i.sent()];case 4:return[2,!0]}})})},n.prototype._flush=function(t){return N(this,void 0,void 0,function(){var r,i,a,s;return T(this,function(o){switch(o.label){case 0:if(r=!0,!(t.length>0))return[3,10];if(this.isFlushing)return[3,9];this.isFlushing=!0,o.label=1;case 1:return o.trys.push([1,4,8,9]),i=it([],Ge(t),!1).slice(0,Math.min(this.limit,this.statConfig.maxStatCountPerRequest)),a=new Ox({deviceId:this.deviceId,statLogs:i}),[4,this.requestQueue.send(a)];case 2:return o.sent(),this.queue=it([],Ge(t),!1).slice(i.length).concat(this.flushWaitQueue),this.flushWaitQueue=[],this.limit=lE,this.logInfo.lastFlushedAt=Date.now(),[4,this._save()];case 3:return o.sent(),[3,9];case 4:return(s=o.sent())instanceof Q?s.code!==Le.NON_AUTHORIZED?[3,6]:[4,this.clear()]:[3,7];case 5:return o.sent(),this.enabledState=tr.DISABLED,[3,7];case 6:s.code===Le.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=tr.COLLECT_ONLY),o.label=7;case 7:return this.limit=this.limit+20,r=!1,[3,9];case 8:return this.isFlushing=!1,[7];case 9:return[3,11];case 10:this.isFlushing=!1,o.label=11;case 11:return[2,r]}})})},n}(xN),Zj=function(e){function n(t){var r=t.deviceId,i=t.statLogs,a=e.call(this)||this;return a.method=fe.POST,a.path="".concat(Ez),a.params={device_id:r,log_entries:i.map(function(s){return Kn.payloadify(s)})},a}return k(n,e),n}(ve),Jj=function(e){function n(t){var r=t.deviceId,i=t.cacheContext,a=t.requestQueue;return e.call(this,{deviceId:r,cacheContext:i,requestQueue:a})||this}return k(n,e),Object.defineProperty(n.prototype,"_isSendable",{get:function(){return this.queue.length>=this.statConfig.minStatCount&&this.queue.length>this.statConfig.lowerThreshold||this.logInfo.lastFlushedAt>0&&Date.now()-this.logInfo.lastFlushedAt>=this.statConfig.minInterval},enumerable:!1,configurable:!0}),n.prototype.init=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,e.prototype.init.call(this,t+".realtime")];case 1:return r.sent(),this.queue=this.logInfo.statLogs.map(function(i){var a;return i.data=Ae(z(z({},i.data),{message_id:(a=i.data.notificationId)!==null&&a!==void 0?a:i.data.message_id,notificationId:void 0})),new Kn({type:i.stat_type,ts:i.ts,data:i.data})}),this._sentLogStats=this.queue.map(function(i){var a;return{channelUrl:i.data.channelUrl,messageId:(a=i.data.notificationId)!==null&&a!==void 0?a:i.data.message_id,action:i.data.action}}),[2]}})})},n.prototype.setConfig=function(t,r){return N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return this.statConfig=t,this._mergeQueue(),r.notificationStat?(this.enabledState=r.enabledStat?tr.ENABLED:tr.COLLECT_ONLY,[3,3]):[3,1];case 1:return this.enabledState=tr.DISABLED,[4,this.clear()];case 2:a.sent(),a.label=3;case 3:return this.isEnabled&&this._isSendable?(i=Math.max(Math.floor(Math.random()*this.statConfig.requestDelayRange),100),[4,Bi(i)]):[3,6];case 4:return a.sent(),[4,this._flush(this.queue)];case 5:a.sent(),a.label=6;case 6:return[2]}})})},n.prototype.put=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return this.enabledState===tr.DISABLED?[2,!0]:(r=this.enabledState===tr.PENDING||this.isFlushing?this.flushWaitQueue:this.queue,this._isDuplicateStat(t)?[2,!0]:(r.push(t),this.enabledState===tr.PENDING?[3,2]:[4,this._save()]));case 1:i.sent(),i.label=2;case 2:return this.isEnabled?(this._mergeQueue(),this.isEnabled&&this._isSendable?[4,this._flush(r)]:[3,4]):[3,4];case 3:return[2,i.sent()];case 4:return[2,!0]}})})},n.prototype._flush=function(t){return N(this,void 0,void 0,function(){var r,i,a,s;return T(this,function(o){switch(o.label){case 0:if(r=!0,!(t.length>0))return[3,10];if(this.isFlushing)return[3,9];this.isFlushing=!0,o.label=1;case 1:return o.trys.push([1,4,8,9]),i=it([],Ge(t),!1).slice(0,Math.min(this.limit,this.statConfig.maxStatCountPerRequest)),a=new Zj({deviceId:this.deviceId,statLogs:i}),[4,this.requestQueue.send(a)];case 2:return o.sent(),this.queue=it([],Ge(t),!1).slice(i.length).concat(this.flushWaitQueue),this.flushWaitQueue=[],this.limit=lE,this.logInfo.lastFlushedAt=Date.now(),[4,this._save()];case 3:return o.sent(),[3,9];case 4:return(s=o.sent())instanceof Q?s.code!==Le.NON_AUTHORIZED?[3,6]:[4,this.clear()]:[3,7];case 5:return o.sent(),this.enabledState=tr.DISABLED,[3,7];case 6:s.code===Le.STAT_UPLOAD_NOT_ALLOWED&&(this.enabledState=tr.COLLECT_ONLY),o.label=7;case 7:return this.limit=this.limit+20,r=!1,[3,9];case 8:return this.isFlushing=!1,[7];case 9:return[3,11];case 10:this.isFlushing=!1,o.label=11;case 11:return[2,r]}})})},n}(xN),eq=function(){function e(n){var t=n.cacheContext,r=n.requestQueue,i=n.dispatcher,a=n.logger;this._collectRequestStat=!0,this._collectFeatureLocalCacheStat=!0,this._collectionNotificationStat=!0,this._retryCount=0,this.deviceId=_s(),this.cacheContext=t,this.requestQueue=r,this.dispatcher=i,this.logger=a,this._dailyStatCollector=new Qj({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue}),this._defaultStatCollector=new Xj({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue}),this._notificationStatCollector=new Jj({deviceId:this.deviceId,cacheContext:this.cacheContext,requestQueue:this.requestQueue})}return e.prototype._migration=function(){return N(this,void 0,void 0,function(){var n,t,r,i;return T(this,function(a){switch(a.label){case 0:return[4,this.cacheContext.preference.get(this.key)];case 1:return(n=a.sent())?(t=[],n.statLogs.forEach(function(s){s.stat_type===kn.FEATURE_LOCALCACHE&&t.push(new Kn({type:s.stat_type,ts:s.ts,data:s.data}))}),[4,this.cacheContext.preference.set(this.key+".daily",{deviceId:n.deviceId,statLogs:t.map(function(s){return Kn.payloadify(s)}),generation:n.generation,lastFlushedAt:n.lastFlushedAt})]):[3,6];case 2:return a.sent(),r=[],n.statLogs.forEach(function(s){s.stat_type!==kn.FEATURE_LOCALCACHE&&s.stat_type!==kn.NOTIFICATION&&(s.stat_type===kn.FEATURE_LOCALCACHE_EVENT&&(s.data=z({message_init_policy:"",starting_point:0},s.data)),r.push(new Kn({type:s.stat_type,ts:s.ts,data:s.data})))}),[4,this.cacheContext.preference.set(this.key+".default",{deviceId:n.deviceId,statLogs:r.map(function(s){return Kn.payloadify(s)}),generation:n.generation,lastFlushedAt:n.lastFlushedAt})];case 3:return a.sent(),i=[],n.statLogs.forEach(function(s){var o;s.stat_type===kn.NOTIFICATION&&(s.data=Ae(z(z({},s.data),{message_id:(o=s.data.notificationId)!==null&&o!==void 0?o:s.data.message_id,notificationId:void 0})),i.push(new Kn({type:s.stat_type,ts:s.ts,data:s.data})))}),[4,this.cacheContext.preference.set(this.key+".realtime",{deviceId:n.deviceId,statLogs:i.map(function(s){return Kn.payloadify(s)}),generation:n.generation,lastFlushedAt:n.lastFlushedAt})];case 4:return a.sent(),[4,this.cacheContext.preference.remove(this.key)];case 5:a.sent(),a.label=6;case 6:return[2]}})})},e.prototype.init=function(n){return N(this,void 0,void 0,function(){var t=this;return T(this,function(r){switch(r.label){case 0:return this.key=n,[4,this._migration()];case 1:return r.sent(),[4,this._dailyStatCollector.init(this.key)];case 2:return r.sent(),[4,this._defaultStatCollector.init(this.key)];case 3:return r.sent(),[4,this._notificationStatCollector.init(this.key)];case 4:return r.sent(),this.commandEventContext||(this.commandEventContext=this.dispatcher.on(function(i){return N(t,void 0,void 0,function(){var a,s,o,l,u,c;return T(this,function(h){return i instanceof Ol?(a=i.statLog,this.put(a)):i instanceof Tx&&(s=i.request,o=i.features,l=i.options,u=i.statConfigInfo,this._retryCount=0,this._collectRequestStat=s,this._collectFeatureLocalCacheStat=o==null?void 0:o.localCache,this._collectionNotificationStat=o==null?void 0:o.notification,this._statConfig=u,this._dailyStatCollector.setConfig(this._statConfig.default,{localCacheStat:this._collectFeatureLocalCacheStat,enabledStat:l.ingestion}),this._defaultStatCollector.setConfig(this._statConfig.default,{requestStat:this._collectRequestStat,localCacheStat:this._collectFeatureLocalCacheStat,enabledStat:l.ingestion}),this._notificationStatCollector.setConfig((c=this._statConfig.realTime)!==null&&c!==void 0?c:this._statConfig.default,{notificationStat:this._collectionNotificationStat,enabledStat:l.ingestion})),[2]})})})),[2]}})})},e.prototype.put=function(n){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:return t=!0,n instanceof Dp?this._collectFeatureLocalCacheStat?[4,this._dailyStatCollector.put(n)]:[3,2]:[3,3];case 1:t=r.sent(),r.label=2;case 2:return[3,13];case 3:switch(n.type){case kn.API_RESULT:case kn.WEBSOCKET_CONNECT:case kn.WEBSOCKET_DISCONNECT:return[3,4];case kn.FEATURE_LOCALCACHE:case kn.FEATURE_LOCALCACHE_EVENT:return[3,7];case kn.NOTIFICATION:return[3,10]}return[3,13];case 4:return this._collectRequestStat?[4,this._defaultStatCollector.put(n)]:[3,6];case 5:t=r.sent(),r.label=6;case 6:return[3,13];case 7:return this._collectFeatureLocalCacheStat?[4,this._defaultStatCollector.put(n)]:[3,9];case 8:t=r.sent(),r.label=9;case 9:return[3,13];case 10:return this._collectionNotificationStat?[4,this._notificationStatCollector.put(n)]:[3,12];case 11:t=r.sent(),r.label=12;case 12:return[3,13];case 13:return t?this._retryCount=0:(this._retryCount++,this._retryCount>20&&(this._dailyStatCollector.enabledState=tr.COLLECT_ONLY,this._defaultStatCollector.enabledState=tr.COLLECT_ONLY,this._notificationStatCollector.enabledState=tr.COLLECT_ONLY,this.logger.debug(Q.statLogUploadLimitExceededError))),[2]}})})},e.prototype.close=function(){this.commandEventContext&&(this.commandEventContext.close(),this.commandEventContext=void 0)},e}(),tq=function(){function e(n){var t=n.limit,r=t===void 0?5:t;this.workersByKey={},this.limit=r}return e.prototype.run=function(n,t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return this.workersByKey[n]||(this.workersByKey[n]=[]),this.workersByKey[n].length<this.limit?(this.workersByKey[n].push(t),[4,t()]):[3,2];case 1:return r=i.sent(),this.workersByKey[n].pop(),[2,r];case 2:throw Q.tooManyRequests}})})},e.prototype.clear=function(n){this.workersByKey[n]=[]},e}();(function(e){e.DELIVERY_RECEIPT="delivery_receipt",e.PUSH_ACKNOWLEDGEMENT="push_acknowledgement"})(u0||(u0={}));var oe,nq=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t._pushAckedCache={},t}return k(n,e),n.prototype.isAcked=function(t,r){var i,a="".concat(t,"_").concat(r);return(i=this._pushAckedCache[a])!==null&&i!==void 0&&i},n.prototype.markAsAcked=function(t,r){var i="".concat(t,"_").concat(r);this._pushAckedCache[i]=!0},n.prototype.clear=function(){q.of(this._iid).logger.debug("clear push acked cache"),this._pushAckedCache={}},n.prototype.parseData=function(t){var r,i,a,s,o=q.of(this._iid).logger,l=t.sendbird;if(typeof l=="string")try{l=JSON.parse(l)}catch{throw o.info("push notification payload does not contain sendbird payload in JSON format."),Q.malformedDataError}if(!l||typeof l!="object")throw o.info("push notification payload does not contain sendbird payload in JSON format."),Q.malformedDataError;var u=(r=l.push_tracking_id)!==null&&r!==void 0?r:"",c=l.notification_message_id,h=l.notification_channel_key,f=l.notification_template_key,p=l.notification_event_deadline,_=(i=l.session_key)!==null&&i!==void 0?i:{},g=(a=_==null?void 0:_.key)!==null&&a!==void 0?a:"",C=(s=_==null?void 0:_.topics)!==null&&s!==void 0?s:[];if(typeof u!="string"||u.length===0)throw o.info("push tracking id is not available"),Q.malformedDataError;if(typeof c!="string"||c.length===0)throw o.info("message id is not available"),Q.malformedDataError;return{pushTrackingId:u,sessionKey:g,sessionTopics:C,messageId:c,channelKey:h,templateKey:f,notificationEventDeadline:p}},n}(Ur),Bh=function(e){this.name=e.name,this._custom=e.custom,this._usedByModerationEngine=e.used_by_moderation_engine},rq=function(e){function n(){var t=e.call(this)||this;return t.method=fe.GET,t.path=Cz,t}return k(n,e),n}(ve),iq=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.reportCategories=r.categories,i}return k(n,e),n}(_e),aq=function(e){function n(t){var r=e.call(this,t)||this;return r._categories=[],r}return k(n,e),n.prototype.categories=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return this._categories.length!==0?[3,2]:[4,this._fetchCategories()];case 1:t.sent(),t.label=2;case 2:return[2,this._categories]}})})},n.prototype._fetchCategories=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s;return T(this,function(o){switch(o.label){case 0:return t=q.of(this._iid).requestQueue,r=new rq,[4,t.send(r)];case 1:return i=o.sent(),(a=i.as(iq).reportCategories)&&(s=this._categories).push.apply(s,it([],Ge(a.map(function(l){return new Bh(l)})),!1)),[2]}})})},n}(Ur),sq=function(){function e(){this._enabledRequestDedup=!0,this._requestCache=new Map,this._requestDedupInterval=500}return Object.defineProperty(e.prototype,"requestDedupInterval",{set:function(n){this._requestDedupInterval=n,this._requestDedupInterval<=0?this._enabledRequestDedup=!1:n<50&&(this._requestDedupInterval=50)},enumerable:!1,configurable:!0}),e.prototype.normalizePath=function(n){return n.replace("/v3/sdk/","/v3/")},e.prototype._generateCacheKey=function(n){var t=n.path,r=n.time,i=n.params,a=this.normalizePath(t),s=i?Object.entries(i).sort(function(l,u){var c=Ge(l,1)[0],h=Ge(u,1)[0];return c.localeCompare(h)}).map(function(l){var u=Ge(l,2),c=u[0],h=u[1];return"".concat(c,"=").concat(JSON.stringify(h))}).join("&"):"",o=r?"_".concat(r):"";return"".concat(a,"?").concat(s).concat(o)},e.prototype.requestGetChannel=function(n,t,r,i){var a,s,o=this;if(i===void 0&&(i=!0),!this._enabledRequestDedup)return t();var l=Date.now(),u=this._generateCacheKey({path:n,params:r});if(i)try{for(var c=ye(this._requestCache.entries()),h=c.next();!h.done;h=c.next()){var f=Ge(h.value,2),p=f[0],_=f[1];if(p.startsWith(u)&&l-_.requestTime<=this._requestDedupInterval)return _.pendingResponse?Promise.resolve(_.pendingResponse):_.promise}}catch(y){a={error:y}}finally{try{h&&!h.done&&(s=c.return)&&s.call(c)}finally{if(a)throw a.error}}var g=i?this._generateCacheKey({path:n,time:l,params:r}):u,C=t().then(function(y){var S=o._requestCache.get(g);return S&&(S.pendingResponse=y,S.responseTime=Date.now()),Promise.resolve(y)}).catch(function(y){return Promise.reject(y)}).finally(function(){setTimeout(function(){o._requestCache.delete(g)},o._requestDedupInterval)}),E={requestTime:l,responseTime:null,promise:C,pendingResponse:null};return this._requestCache.set(g,E),C},e.prototype.updatePendingResponse=function(n,t){var r,i;try{for(var a=ye(this._requestCache.entries()),s=a.next();!s.done;s=a.next()){var o=Ge(s.value,2),l=o[0],u=o[1];if(l.includes(n.url)&&u.pendingResponse&&u.responseTime<t){var c=u.pendingResponse.payload,h=n.constructor.payloadify(n,!0),f=z(z({},c),h);u.pendingResponse=new _e(n._iid,f);break}}}catch(p){r={error:p}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},e}(),Ic={},q=function(){function e(n,t){var r,i,a,s,o,l,u,c,h;if(this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map,!Ic[n]){Ic[n]=this;var f=(r=t.options)!==null&&r!==void 0?r:new Vk,p=this.sdkState={appId:t.appId,appVersion:(i=t.appVersion)!==null&&i!==void 0?i:"",appState:"foreground",userId:void 0,extensions:{},api:{host:(a=t.apiHost)!==null&&a!==void 0?a:"https://api-".concat(t.appId,".sendbird.com")},websocket:{host:(s=t.websocketHost)!==null&&s!==void 0?s:"wss://ws-".concat(t.appId,".sendbird.com"),pingerDisabled:!!t.noPingpong,pingInterval:void 0,pongTimeout:void 0,connectMaxRetry:2,compression:!0,reconnectMaxRetry:-1,reconnectRetryStrategy:new Ix,responseTimeout:f.websocketResponseTimeout},sessionTokenRefreshTimeout:f.sessionTokenRefreshTimeout};this.appInfo=void 0,this.subscribedUnreadMessageCount={all:0,feed:0,customTypes:{},ts:0};var _=this.logger=t.logger;this.connectedAt=0,this.firstConnectedAt=0,this.connectionHandlers=new Map,this.userEventHandlers=new Map,typeof t.localCacheEnabled=="string"&&(t.localCacheEnabled=t.localCacheEnabled==="true");var g=this.cacheContext=new oz({encryption:t.encryption,store:t.store,localCacheEnabled:(o=t.localCacheEnabled)!==null&&o!==void 0&&o,localCacheConfig:(l=t.localCacheConfig)!==null&&l!==void 0?l:new jk});this.debugMode=(u=t.debugMode)!==null&&u!==void 0&&u,this.maxSuperGroupChannelUnreadCount=Bu.DEFAULT_MAX_UNREAD_COUNT_OF_SUPER_GROUP_CHANNEL,this.useMemberInfoInMessage=f.useMemberInfoInMessage,this.typingIndicatorInvalidateTime=f.typingIndicatorInvalidateTime,this.typingIndicatorThrottle=f.typingIndicatorThrottle,this.concurrentCallLimit=void 0,this.backOffDelay=void 0;var C=this.dispatcher=new cz,E=new uz;this.requestQueue=new Wj(n,{session:E,sdkState:p,dispatcher:C,logger:_,useFetchCompat:t.useFetchCompat}),this.pushNotificationAckManager=new nq(n),this.sessionManager=new Yj({_iid:n,session:E,cacheContext:g,sdkState:p,dispatcher:C,requestQueue:this.requestQueue,logger:_,pushNotificationAckManager:this.pushNotificationAckManager}),this.connectionManager=new $j(n,{sdkState:p,cacheContext:this.cacheContext,connectionHandlers:this.connectionHandlers,dispatcher:C,sessionManager:this.sessionManager,websocketClient:this.requestQueue.commandRouter.websocketClient,disableWebSocketCloseEventHandling:(c=t.disableWebSocketCloseEventHandling)!==null&&c!==void 0&&c,logger:_}),this.statManager=new eq({cacheContext:this.cacheContext,requestQueue:this.requestQueue,dispatcher:this.dispatcher,logger:_}),this.appStateToggleEnabled=(h=t.appStateToggleEnabled)===null||h===void 0||h,this.messageBackgroundSyncThrottleController=new tq({limit:5}),this.reportCategoryManager=new aq(n),this.requestDeduplicator=new sq}return Ic[n]}return e.of=function(n){if(Ic[n])return Ic[n];throw Q.lostInstance},e.clear=function(n){Ic[n]&&delete Ic[n]},e.prototype.hasExtension=function(n){return this.sdkState.extensions&&this.sdkState.extensions[n]},e}(),uE=function(){function e(){}return e.prototype.init=function(n,t){var r=t.sdkState,i=t.dispatcher,a=t.sessionManager,s=t.requestQueue,o=t.logger;t.onlineDetector;var l=t.cacheContext;this._iid=n,this._cacheContext=l,this._sdkState=r,this._dispatcher=i,this._sessionManager=a,this._requestQueue=s,this._logger=o},e}();(function(e){e.UNKNOWN="UNKNOWN",e.EVENT_CHANNEL_CREATED="EVENT_CHANNEL_CREATED",e.EVENT_CHANNEL_UPDATED="EVENT_CHANNEL_UPDATED",e.EVENT_CHANNEL_DELETED="EVENT_CHANNEL_DELETED",e.EVENT_CHANNEL_READ="EVENT_CHANNEL_READ",e.EVENT_CHANNEL_UNREAD="EVENT_CHANNEL_UNREAD",e.EVENT_CHANNEL_DELIVERED="EVENT_CHANNEL_DELIVERED",e.EVENT_CHANNEL_INVITED="EVENT_CHANNEL_INVITED",e.EVENT_CHANNEL_JOINED="EVENT_CHANNEL_JOINED",e.EVENT_CHANNEL_LEFT="EVENT_CHANNEL_LEFT",e.EVENT_CHANNEL_ACCEPTED_INVITE="EVENT_CHANNEL_ACCEPTED_INVITE",e.EVENT_CHANNEL_DECLINED_INVITE="EVENT_CHANNEL_DECLINED_INVITE",e.EVENT_CHANNEL_OPERATOR_UPDATED="EVENT_CHANNEL_OPERATOR_UPDATED",e.EVENT_CHANNEL_BANNED="EVENT_CHANNEL_BANNED",e.EVENT_CHANNEL_UNBANNED="EVENT_CHANNEL_UNBANNED",e.EVENT_CHANNEL_MUTED="EVENT_CHANNEL_MUTED",e.EVENT_CHANNEL_UNMUTED="EVENT_CHANNEL_UNMUTED",e.EVENT_CHANNEL_FROZEN="EVENT_CHANNEL_FROZEN",e.EVENT_CHANNEL_UNFROZEN="EVENT_CHANNEL_UNFROZEN",e.EVENT_CHANNEL_HIDDEN="EVENT_CHANNEL_HIDDEN",e.EVENT_CHANNEL_UNHIDDEN="EVENT_CHANNEL_UNHIDDEN",e.EVENT_CHANNEL_RESET_HISTORY="EVENT_CHANNEL_RESET_HISTORY",e.EVENT_CHANNEL_TYPING_STATUS_UPDATE="EVENT_CHANNEL_TYPING_STATUS_UPDATE",e.EVENT_CHANNEL_MEMBER_COUNT_UPDATED="EVENT_CHANNEL_MEMBER_COUNT_UPDATED",e.EVENT_CHANNEL_METADATA_CREATED="EVENT_CHANNEL_METADATA_CREATED",e.EVENT_CHANNEL_METADATA_UPDATED="EVENT_CHANNEL_METADATA_UPDATED",e.EVENT_CHANNEL_METADATA_DELETED="EVENT_CHANNEL_METADATA_DELETED",e.EVENT_CHANNEL_METACOUNTER_CREATED="EVENT_CHANNEL_METACOUNTER_CREATED",e.EVENT_CHANNEL_METACOUNTER_UPDATED="EVENT_CHANNEL_METACOUNTER_UPDATED",e.EVENT_CHANNEL_METACOUNTER_DELETED="EVENT_CHANNEL_METACOUNTER_DELETED",e.EVENT_MESSAGE_SENT="EVENT_MESSAGE_SENT",e.EVENT_MESSAGE_RECEIVED="EVENT_MESSAGE_RECEIVED",e.EVENT_MESSAGE_UPDATED="EVENT_MESSAGE_UPDATED",e.EVENT_PINNED_MESSAGE_UPDATED="EVENT_PINNED_MESSAGE_UPDATED",e.REQUEST_CHANNEL="REQUEST_CHANNEL",e.REQUEST_CHANNEL_CHANGELOGS="REQUEST_CHANNEL_CHANGELOGS",e.REFRESH_CHANNEL="REFRESH_CHANNEL",e.CHANNEL_LASTACCESSEDAT_UPDATED="CHANNEL_LASTACCESSEDAT_UPDATED",e.SYNC_CHANNEL_BACKGROUND="SYNC_CHANNEL_BACKGROUND",e.SYNC_CHANNEL_CHANGELOGS="SYNC_CHANNEL_CHANGELOGS",e.EVENT_MESSAGE_SENT_SUCCESS="EVENT_MESSAGE_SENT_SUCCESS",e.EVENT_MESSAGE_SENT_FAILED="EVENT_MESSAGE_SENT_FAILED",e.EVENT_MESSAGE_SENT_PENDING="EVENT_MESSAGE_SENT_PENDING",e.EVENT_MESSAGE_DELETED="EVENT_MESSAGE_DELETED",e.EVENT_MESSAGE_FEEDBACK_ADDED="EVENT_MESSAGE_FEEDBACK_ADDED",e.EVENT_MESSAGE_FEEDBACK_UPDATED="EVENT_MESSAGE_FEEDBACK_UPDATED",e.EVENT_MESSAGE_FEEDBACK_DELETED="EVENT_MESSAGE_FEEDBACK_DELETED",e.EVENT_MESSAGE_READ="EVENT_MESSAGE_READ",e.EVENT_MESSAGE_DELIVERED="EVENT_MESSAGE_DELIVERED",e.EVENT_MESSAGE_REACTION_UPDATED="EVENT_MESSAGE_REACTION_UPDATED",e.EVENT_MESSAGE_THREADINFO_UPDATED="EVENT_MESSAGE_THREADINFO_UPDATED",e.EVENT_MESSAGE_OFFSET_UPDATED="EVENT_MESSAGE_OFFSET_UPDATED",e.REQUEST_MESSAGE="REQUEST_MESSAGE",e.EVENT_THREAD_INFO_UPDATED="EVENT_THREADINFO_UPDATED",e.EVENT_POLL_UPDATED="EVENT_POLL_UPDATED",e.EVENT_POLL_VOTED="EVENT_POLL_VOTED",e.SYNC_POLL_CHANGELOGS="SYNC_POLL_CHANGELOGS",e.EVENT_CHANNEL_CSAT_SUBMITTED="EVENT_CHANNEL_CSAT_SUBMITTED",e.EVENT_CHANNEL_CONVERSATION_HANDEDOFF="EVENT_CHANNEL_CONVERSATION_HANDEDOFF",e.REQUEST_RESEND_MESSAGE="REQUEST_RESEND_MESSAGE",e.REQUEST_THREADED_MESSAGE="REQUEST_THREADED_MESSAGE",e.REQUEST_MESSAGE_CHANGELOGS="REQUEST_MESSAGE_CHANGELOGS",e.SYNC_MESSAGE_FILL="SYNC_MESSAGE_FILL",e.SYNC_MESSAGE_BACKGROUND="SYNC_MESSAGE_BACKGROUND",e.SYNC_MESSAGE_CHANGELOGS="SYNC_MESSAGE_CHANGELOGS",e.LOCAL_MESSAGE_PENDING_CREATED="LOCAL_MESSAGE_PENDING_CREATED",e.LOCAL_MESSAGE_FAILED="LOCAL_MESSAGE_FAILED",e.LOCAL_MESSAGE_CANCELED="LOCAL_MESSAGE_CANCELED",e.LOCAL_MESSAGE_RESEND_STARTED="LOCAL_MESSAGE_RESEND_STARTED"})(oe||(oe={}));var tf;z({},oe);var gl=function(e){return e.startsWith("EVENT_")||e.startsWith("LOCAL_MESSAGE_")||e===oe.SYNC_MESSAGE_FILL||e===oe.SYNC_MESSAGE_CHANGELOGS||e===oe.SYNC_POLL_CHANGELOGS},er=function(e){function n(t){var r=t.messages,i=t.source,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=e.call(this)||this;return o.messages=r,o.source=i,o.isWebSocketEventComing=s,o}return k(n,e),n}(Gn),PN=function(e){function n(t){var r=t.messageIds,i=t.source,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=e.call(this)||this;return o.messageIds=r,o.source=i,o.isWebSocketEventComing=s,o}return k(n,e),n}(Gn),Dx=function(e){function n(t){var r=t.messageDeletionTimestamp,i=t.channelUrl,a=t.source,s=e.call(this)||this;return s.messageDeletionTimestamp=r,s.channelUrl=i,s.source=a,s}return k(n,e),n}(Gn),Ux=function(e){function n(t){var r=t.event,i=t.source,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=e.call(this)||this;return o.event=r,o.source=i,o.isWebSocketEventComing=s,o}return k(n,e),n}(Gn),Lx=function(e){function n(t){var r=t.event,i=t.source,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=e.call(this)||this;return o.event=r,o.source=i,o.isWebSocketEventComing=s,o}return k(n,e),n}(Gn),kx=function(e){function n(t){var r=t.reqId,i=t.source,a=e.call(this)||this;return a.reqId=r,a.source=i,a}return k(n,e),n}(Gn),xx=function(e){function n(t){var r=t.polls,i=t.source,a=e.call(this)||this;return a.polls=r,a.source=i,a}return k(n,e),n}(Gn),FN=function(e){function n(t){var r=t.event,i=t.source,a=e.call(this)||this;return a.event=r,a.source=i,a}return k(n,e),n}(Gn),cE=function(e){function n(t){var r=t.event,i=t.source,a=e.call(this)||this;return a.event=r,a.source=i,a}return k(n,e),n}(Gn);(function(e){e.OPEN="open",e.CLOSED="closed"})(tf||(tf={}));var Px="removed",D1=function(e){switch(e){case"open":return tf.OPEN;case"closed":return tf.CLOSED;default:return null}},Fx=function(e){return!e||!!e.text&&Y("string",e.text)},mg=function(e){function n(t,r){var i,a,s,o,l,u,c,h=this;return(h=e.call(this,t)||this).pollId=0,h.id=0,h.text=null,h.voteCount=0,h.createdBy=null,h.createdAt=0,h.updatedAt=0,h._lastVotedAt=0,h.pollId=(i=r.poll_id)!==null&&i!==void 0?i:0,h.id=(a=r.id)!==null&&a!==void 0?a:0,h.text=(s=r.text)!==null&&s!==void 0?s:null,h.voteCount=(o=r.vote_count)!==null&&o!==void 0?o:0,h.createdBy=(l=r.created_by)!==null&&l!==void 0?l:null,h.createdAt=(u=r.created_at)!==null&&u!==void 0?u:0,h.updatedAt=(c=r.updated_at)!==null&&c!==void 0?c:0,h}return k(n,e),n.payloadify=function(t){return Ae($e(z(z({},e.payloadify.call(this,t)),{vote_count:t.voteCount,poll_id:t.pollId,text:t.text,created_at:t.createdAt,id:t.id,created_by:t.createdBy,updated_at:t.updatedAt})))},n}(Ur),zs=function(e){function n(t,r){var i,a,s,o,l,u,c,h,f,p,_,g,C,E=this;return(E=e.call(this,t)||this).id=0,E.title=null,E.createdAt=0,E.updatedAt=0,E.closeAt=-1,E.status=tf.CLOSED,E.messageId=0,E.data=null,E.voterCount=-1,E.options=[],E.createdBy=null,E.allowUserSuggestion=!1,E.allowMultipleVotes=!1,E.votedPollOptionIds=[],E.id=(i=r.id)!==null&&i!==void 0?i:0,E.title=(a=r.title)!==null&&a!==void 0?a:null,E.createdAt=(s=r.created_at)!==null&&s!==void 0?s:0,E.updatedAt=(o=r.updated_at)!==null&&o!==void 0?o:0,E.closeAt=(l=r.close_at)!==null&&l!==void 0?l:-1,E.status=(u=D1(r.status))!==null&&u!==void 0?u:tf.CLOSED,E.messageId=(c=r.message_id)!==null&&c!==void 0?c:0,E.data=(h=r.data)!==null&&h!==void 0?h:null,E.voterCount=(f=r.voter_count)!==null&&f!==void 0?f:-1,E.options=r.options?r.options.map(function(y){return new mg(E._iid,y)}):[],E.createdBy=(p=r.created_by)!==null&&p!==void 0?p:null,E.allowUserSuggestion=(_=r.allow_user_suggestion)!==null&&_!==void 0&&_,E.allowMultipleVotes=(g=r.allow_multiple_votes)!==null&&g!==void 0&&g,E.votedPollOptionIds=(C=r.voted_option_ids)!==null&&C!==void 0?C:[],E}return k(n,e),n.prototype._applyPollUpdatePayload=function(t){var r,i,a,s,o,l,u,c,h=this;this.title=(r=t.title)!==null&&r!==void 0?r:this.title,this.updatedAt=(i=t.updated_at)!==null&&i!==void 0?i:this.updatedAt,this.closeAt=(a=t.close_at)!==null&&a!==void 0?a:this.closeAt,this.status=(s=D1(t.status))!==null&&s!==void 0?s:this.status,this.data=(o=t.data)!==null&&o!==void 0?o:this.data,this.voterCount=(l=t.voter_count)!==null&&l!==void 0?l:this.voterCount,t.options&&(this.options=t.options.map(function(f){return new mg(h._iid,f)}),this.votedPollOptionIds=t.options.filter(function(f){return f.vote_count>0}).map(function(f){return f.id})),this.allowUserSuggestion=(u=t.allow_user_suggestion)!==null&&u!==void 0?u:this.allowUserSuggestion,this.allowMultipleVotes=(c=t.allow_multiple_votes)!==null&&c!==void 0?c:this.allowMultipleVotes},n.payloadify=function(t){return Ae($e(z(z({},e.payloadify.call(this,t)),{id:t.id,title:t.title,created_at:t.createdAt,updated_at:t.updatedAt,close_at:t.closeAt,status:t.status,message_id:t.messageId,data:t.data,voter_count:t.voterCount,options:t.options.map(function(r){return mg.payloadify(r)}),created_by:t.createdBy,allow_user_suggestion:t.allowUserSuggestion,allow_multiple_votes:t.allowMultipleVotes,voted_option_ids:t.votedPollOptionIds})))},n.prototype.applyPollUpdateEvent=function(t){var r=t._payload.poll;return!(!r||this.id!==r.id||r.updated_at<this.updatedAt)&&(this._applyPollUpdatePayload(r),!0)},n.prototype.applyPollVoteEvent=function(t){if(this.id!==t.pollId)return!1;var r=this.options,i=r.map(function(o){return o.id}),a=t._payload,s=Math.floor(a.ts/1e3);return a.updated_vote_counts.forEach(function(o){var l=i.indexOf(o.option_id);if(l>-1){var u=r[l];s>=u._lastVotedAt&&(u.voteCount=o.vote_count,u._lastVotedAt=s)}}),a.req_id&&a.voted_option_ids&&(this.votedPollOptionIds=a.voted_option_ids),typeof a.voter_count=="number"&&(this.voterCount=a.voter_count),!0},n.prototype.serialize=function(){return hf(this)},n}(Ur),Kl=function(){function e(n,t){var r;this.limit=20,this._isLoading=!1,this._hasNext=!0,this._token="",this._iid=n,this.limit=(r=t.limit)!==null&&r!==void 0?r:20}return Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isLoading",{get:function(){return this._isLoading},enumerable:!1,configurable:!0}),e.prototype._validate=function(){return Y("number",this.limit)&&this.limit>0},e}(),el=function(e){function n(t,r,i,a){var s=e.call(this,t,a)||this;return s.channelUrl=r,s.channelType=i,s}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Y("string",this.channelUrl)&&Bt(Kt,this.channelType)},n}(Kl),oq=function(e){this.pollId=0,this.messageId=0,this.pollId=e.poll_id,this.messageId=e.message_id,this._payload=e},lq=function(e){function n(t){var r=t.title,i=t.optionTexts,a=t.data,s=t.allowUserSuggestion,o=t.allowMultipleVotes,l=t.closeAt,u=e.call(this)||this;return u.method=fe.POST,u.path=Co,u.params={title:r,options:i,data:a,allow_user_suggestion:s,allow_multiple_votes:o,close_at:l},u}return k(n,e),n}(ve),uq=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new zs(t,r),i}return k(n,e),n}(_e),cq=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.pollId,s=e.call(this)||this;return s.method=fe.GET,s.path="".concat(Co,"/").concat(encodeURIComponent(a)),s.params={channel_url:r,channel_type:i},s}return k(n,e),n}(ve),dq=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new zs(t,r),i}return k(n,e),n}(_e),hq=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.pollId,s=t.pollOptionId,o=e.call(this)||this;return o.method=fe.GET,o.path="".concat(Co,"/").concat(encodeURIComponent(a),"/options/").concat(encodeURIComponent(s)),o.params={channel_url:r,channel_type:i},o}return k(n,e),n}(ve),fq=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pollOption=new mg(t,r),i}return k(n,e),n}(_e),vq=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.timestamp,s=t.token,o=e.call(this)||this;return o.method=fe.GET,o.path="".concat(mn(r),"/").concat(encodeURIComponent(i),"/polls/changelogs"),o.params=Ae({change_ts:a,token:s}),o}return k(n,e),n}(ve),pq=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.updatedPolls=r.updated.map(function(a){return function(s,o){return new zs(s,o)}(t,a)}),i.deletedPollIds=r.deleted.map(function(a){return a}),i.hasMore=r.has_more,i.nextToken=r.next,i}return k(n,e),n}(_e),mq={title:"",optionTexts:[],data:void 0,allowUserSuggestion:void 0,allowMultipleVotes:void 0,closeAt:-1},Bx=function(e){return Y("string",e.title)&&(n=e.optionTexts,Ht("string",n)&&n.every(function(t){return t.trim()!==""}))&&Fx(e.data)&&Y("boolean",e.allowUserSuggestion,!0)&&Y("boolean",e.allowMultipleVotes,!0)&&Y("number",e.closeAt,!0);var n},_q={channelUrl:"",channelType:Kt.BASE,pollId:0,pollOptionId:0},Hx=function(e){return Y("string",e.channelUrl)&&e.channelUrl!==""&&Bt(Kt,e.channelType)&&Y("number",e.pollId)&&e.pollId>0&&Y("number",e.pollOptionId)&&e.pollOptionId>0},gq={channelUrl:"",channelType:Kt.BASE,pollId:0},Gx=function(e){return Y("string",e.channelUrl)&&e.channelUrl!==""&&Bt(Kt,e.channelType)&&Y("number",e.pollId)},Hw={},c0=function(){function e(n,t){var r=t.sdkState,i=t.dispatcher,a=t.sessionManager,s=t.requestQueue,o=t.logger;this._iid=n,this._sdkState=r,this._sessionManager=a,this._requestQueue=s,this._dispatcher=i,this._logger=o,Hw[n]=this}return e.of=function(n){return Hw[n]},e.prototype.buildPollFromSerializedData=function(n){var t=Ll(n);return new zs(this._iid,zs.payloadify(t))},e.prototype.get=function(n){return N(this,void 0,void 0,function(){var t,r;return T(this,function(i){switch(i.label){case 0:return me(Gx(n)).throw(Q.invalidParameters),t=new cq(z({},n)),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,r.as(dq).poll]}})})},e.prototype.create=function(n){return N(this,void 0,void 0,function(){var t,r;return T(this,function(i){switch(i.label){case 0:return me(Bx(n)).throw(Q.invalidParameters),t=new lq(z({},n)),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,r.as(uq).poll]}})})},e.prototype.getOption=function(n){return N(this,void 0,void 0,function(){var t,r;return T(this,function(i){switch(i.label){case 0:return me(Hx(n)).throw(Q.invalidParameters),t=new hq(z({},n)),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,r.as(fq).pollOption]}})})},e.prototype.getPollChangeLogs=function(n,t,r,i){return i===void 0&&(i=oe.SYNC_POLL_CHANGELOGS),N(this,void 0,void 0,function(){var a,s,o,l,u,c,h;return T(this,function(f){switch(f.label){case 0:return a=new vq($e({channelType:t,channelUrl:n,timestamp:typeof r=="number"?r:null,token:typeof r=="string"?r:null})),[4,this._requestQueue.send(a)];case 1:return s=f.sent(),o=s.as(pq),l=o.updatedPolls,u=o.deletedPollIds,c=o.hasMore,h=o.nextToken,l.length>0&&this._dispatcher.dispatch(new xx({polls:l,source:i})),[2,{updatedPolls:l,deletedPollIds:u,hasMore:c,token:h}]}})})},e}(),Eq=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.token,s=t.limit,o=e.call(this)||this;return o.method=fe.GET,o.path=Co,o.params={channel_url:r,channel_type:i,token:a,limit:s},o}return k(n,e),n}(ve),yq=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).polls=((i=r.polls)!==null&&i!==void 0?i:[]).map(function(s){return new zs(t,s)}),a.token=r.next,a}return k(n,e),n}(_e),$x=function(e){function n(t,r){return e.call(this,t,r.channelUrl,r.channelType,r)||this}return k(n,e),n.prototype.next=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=q.of(this._iid).requestQueue,r=new Eq(z(z({},this),{token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(yq),s=a.polls,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(el),bq=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.pollId,s=t.pollOptionId,o=t.token,l=t.limit,u=e.call(this)||this;return u.method=fe.GET,u.path="".concat(Co,"/").concat(encodeURIComponent(a),"/options/").concat(encodeURIComponent(s),"/voters"),u.params={channel_url:r,channel_type:i,token:o,limit:l},u}return k(n,e),n}(ve),Cq=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).voters=((i=r.voters)!==null&&i!==void 0?i:[]).map(function(s){return new Gt(t,s)}),a.token=r.next,a}return k(n,e),n}(_e),Vx=function(e){function n(t,r){var i=e.call(this,t,r.channelUrl,r.channelType,r)||this;return i.pollId=r.pollId,i.pollOptionId=r.pollOptionId,i}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Y("number",this.pollId)&&Y("number",this.pollOptionId)},n.prototype.next=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=q.of(this._iid).requestQueue,r=new bq(z(z({},this),{pollId:this.pollId,pollOptionId:this.pollOptionId,token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(Cq),s=a.voters,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(el),yd,Wl=function(){function e(n,t,r){var i,a;this.width=0,this.height=0,this.realWidth=0,this.realHeight=0,this._requireAuth=!1,this._iid=n,this.plainUrl=t.url,this.width=t.width,this.height=t.height,this.realWidth=(i=t.real_width)!==null&&i!==void 0?i:t.width,this.realHeight=(a=t.real_height)!==null&&a!==void 0?a:t.height,this._requireAuth=r}return e.payloadify=function(n){return Ae($e(n instanceof e?{url:n.plainUrl,width:n.width,height:n.height,real_width:n.realWidth,real_height:n.realHeight}:{url:"",width:n.maxWidth,height:n.maxHeight,real_width:0,real_height:0}))},Object.defineProperty(e.prototype,"url",{get:function(){var n=q.of(this._iid).sessionManager;return this._requireAuth&&n.ekey?"".concat(this.plainUrl,"?auth=").concat(n.ekey):this.plainUrl},enumerable:!1,configurable:!0}),e}(),d0=function(e){function n(t){var r=e.call(this)||this;if(r.method=fe.POST,r.path="".concat(hz),r.params=Ae({file:t.file,channel_url:t.channelUrl}),t.thumbnailSizes)for(var i=0;i<t.thumbnailSizes.length;i++){var a=t.thumbnailSizes[i],s=a.maxWidth,o=a.maxHeight;r.params["thumbnail".concat(i+1)]="".concat(s,",").concat(o)}return r.requestId=t.requestId,r}return k(n,e),n}(ve),h0=function(e){function n(t,r){var i,a,s,o,l=this;return(l=e.call(this,t,r)||this).url=r.url,l.fileSize=(i=r.file_size)!==null&&i!==void 0?i:0,l.thumbnails=(s=(a=r.thumbnails)===null||a===void 0?void 0:a.map(function(u){return new Wl(t,u,!1)}))!==null&&s!==void 0?s:[],l.requireAuth=(o=r.require_auth)!==null&&o!==void 0&&o,l}return k(n,e),n}(_e),f0=function(e){function n(t,r){var i,a,s,o,l,u=this;return(u=e.call(this,t)||this).replyCount=0,u.memberCount=0,u.lastRepliedAt=0,u.updatedAt=0,u.replyCount=(i=r.reply_count)!==null&&i!==void 0?i:0,u.memberCount=(a=r.member_count)!==null&&a!==void 0?a:0,u.mostRepliedUsers=r.most_replies&&Ht("object",r.most_replies)?r.most_replies.map(function(c){return new Gt(u._iid,c)}):[],u.unreadReplyCount=(s=r.unread_message_count)!==null&&s!==void 0?s:0,u.isPushNotificationEnabled=typeof r.push_enabled=="number"?r.push_enabled>0:void 0,u.lastRepliedAt=(o=r.last_replied_at)!==null&&o!==void 0?o:0,u.updatedAt=(l=r.updated_at)!==null&&l!==void 0?l:0,u}return k(n,e),n.payloadify=function(t){return Ae($e(z(z({},e.payloadify.call(this,t)),{reply_count:t.replyCount,unread_message_count:t.unreadReplyCount,member_count:t.memberCount,most_replies:Array.isArray(t.mostRepliedUsers)?t.mostRepliedUsers.map(function(r){return Gt.payloadify(r)}):[],push_enabled:typeof t.isPushNotificationEnabled=="boolean"?t.isPushNotificationEnabled?1:0:void 0,last_replied_at:t.lastRepliedAt,updated_at:t.updatedAt})))},Object.defineProperty(n.prototype,"_isUpdateRequired",{get:function(){return this.unreadReplyCount===void 0||this.isPushNotificationEnabled===void 0},enumerable:!1,configurable:!0}),n.prototype._updateFrom=function(t){var r,i;this.unreadReplyCount=(r=t.unreadReplyCount)!==null&&r!==void 0?r:this.unreadReplyCount,this.isPushNotificationEnabled=(i=t.isPushNotificationEnabled)!==null&&i!==void 0?i:this.isPushNotificationEnabled},n}(Ur);(function(e){e.ADD="add",e.DELETE="delete"})(yd||(yd={}));var yu,BN=function(e){var n;this.messageId=0,this.operation=null,this.updatedAt=0;var t=Y("string",e.msg_id)?parseInt(e.msg_id):e.msg_id,r=e.user_id,i=e.operation?e.operation.toLowerCase():null,a=e.reaction,s=e.updated_at,o=e.count,l=e.sampled_user_ids,u=(n=e.sampled_user_info)!==null&&n!==void 0?n:{};t&&Y("string",r)&&Y("string",i)&&Bt(yd,i)&&Y("string",a)&&a&&Y("number",s)&&(this.messageId=t,this.userId=r,this.key=a,this.operation=i,this.updatedAt=s,this._count=o,this._sampledUserIds=l,this._sampledUserInfoList=u)},Pb=function(e){function n(t,r,i){var a,s=this;return(s=e.call(this,t)||this).userId=r,s.nickname=i.nickname,s.plainProfileUrl=i.profile_url,s.requireAuth=(a=i.require_auth_for_profile_image)!==null&&a!==void 0&&a,s}return k(n,e),Object.defineProperty(n.prototype,"profileUrl",{get:function(){var t=q.of(this._iid).sessionManager;return this.requireAuth&&t.ekey?"".concat(this.plainProfileUrl,"?auth=").concat(t.ekey):this.plainProfileUrl},enumerable:!1,configurable:!0}),n.payloadify=function(t){return{nickname:t.nickname,profile_url:t.plainProfileUrl,require_auth_for_profile_image:t.requireAuth}},n}(Ur),iv=function(e){function n(t,r){var i,a,s,o,l,u,c,h,f,p=this;(p=e.call(this,t)||this)._sampledUserInfoList=[],p._count=0,p._hasCurrentUserReacted=!1;var _=r.key,g=it([],Ge((o=(s=r.sampled_user_ids)!==null&&s!==void 0?s:r.user_ids)!==null&&o!==void 0?o:[]),!1),C=(u=(l=r.last_ts)!==null&&l!==void 0?l:r.updated_at)!==null&&u!==void 0?u:0,E=(c=r.is_self_included)!==null&&c!==void 0?c:g.includes(q.of(t).sdkState.userId),y=(h=r.sampled_user_info)!==null&&h!==void 0?h:{};Y("string",_)&&_&&Ht("string",g)&&g.length>0&&Y("number",C)&&(p.key=_,p._sampledUserIds=g,p._updatedAt=C,p._count=(f=r.count)!==null&&f!==void 0?f:g.length,p._hasCurrentUserReacted=E,Object.keys(y).forEach(function(R){p._sampledUserInfoList.push(new Pb(t,R,y[R]))}));var S={};try{for(var I=ye(p.sampledUserIds),w=I.next();!w.done;w=I.next())S[w.value]=p.updatedAt}catch(R){i={error:R}}finally{try{w&&!w.done&&(a=I.return)&&a.call(I)}finally{if(i)throw i.error}}return p._version=S,p}return k(n,e),Object.defineProperty(n.prototype,"isEmpty",{get:function(){return this._count===0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"userIds",{get:function(){return this._sampledUserIds},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sampledUserIds",{get:function(){return this._sampledUserIds},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"sampledUserInfoList",{get:function(){return this._sampledUserInfoList},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"count",{get:function(){return this._count},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"updatedAt",{get:function(){return this._updatedAt},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasCurrentUserReacted",{get:function(){return this._hasCurrentUserReacted},enumerable:!1,configurable:!0}),n.payloadify=function(t){var r={};return t._sampledUserInfoList.forEach(function(i){r[i.userId]=Pb.payloadify(i)}),Ae($e({key:t.key,sampled_user_ids:t._sampledUserIds,sampled_user_info:r,count:t._count,is_self_included:t._hasCurrentUserReacted,last_ts:t._updatedAt}))},n.prototype.applyEvent=function(t){var r=this;if(t.key===this.key&&this.updatedAt<=t.updatedAt)if(t._sampledUserIds)this._sampledUserIds=t._sampledUserIds,this._sampledUserInfoList=[],Object.keys(t._sampledUserInfoList).forEach(function(a){r._sampledUserInfoList.push(new Pb(r._iid,a,t._sampledUserInfoList[a]))}),this._count=t._count,t._hasCurrentUserReacted!==void 0&&(this._hasCurrentUserReacted=t._hasCurrentUserReacted),this._updatedAt=t.updatedAt;else{if(!this._version[t.userId]||this._version[t.userId]<=t.updatedAt){var i=this._sampledUserIds.indexOf(t.userId);switch(t.operation){case yd.ADD:i<0&&this._sampledUserIds.push(t.userId);break;case yd.DELETE:i>=0&&this._sampledUserIds.splice(i,1)}this._count=this._sampledUserIds.length,this._version[t.userId]=t.updatedAt}this._updatedAt=Math.max(this.updatedAt,t.updatedAt)}},n}(Ur),Gw=function(){function e(n){this.secureUrl=null,this.type=null,this.width=0,this.height=0,this.alt=null,this.url=n.url,n.secure_url&&(this.secureUrl=n.secure_url),n.type&&(this.type=n.type),n.width&&(this.width=n.width),n.height&&(this.height=n.height),n.alt&&(this.alt=n.alt)}return e.payloadify=function(n){var t,r;return Ae($e({url:n.url,secure_url:n.secureUrl,type:n.type,width:(t=n.width)!==null&&t!==void 0?t:0,height:(r=n.height)!==null&&r!==void 0?r:0,alt:n.alt}))},e}(),$w=function(){function e(n){this.title=null,this.url=null,this.description=null,this.defaultImage=null,n["og:title"]&&(this.title=n["og:title"]),n["og:url"]&&(this.url=n["og:url"]),n["og:description"]&&(this.description=n["og:description"]),n["og:image"]&&(this.defaultImage=new Gw(n["og:image"]))}return e.payloadify=function(n){return Ae($e({"og:title":n.title,"og:url":n.url,"og:description":n.description,"og:image":n.defaultImage?Gw.payloadify(n.defaultImage):null}))},e}(),js=function(){function e(n){var t,r;this.volume=0,this.name=(t=n.name)!==null&&t!==void 0?t:"default",this.volume=(r=n.volume)!==null&&r!==void 0?r:1}return e.prototype.serialize=function(){return{name:this.name,volume:this.volume}},e.payloadify=function(n){return Ae($e({name:n.name,volume:n.volume}))},e}();(function(e){e.GOOD="good",e.BAD="bad"})(yu||(yu={}));var Nl=function(){function e(n){this.id=n.id,this.rating=n.rating,this.comment=n.comment}return e._getStatus=function(n){return n?"id"in n?"SUBMITTED":"NO_FEEDBACK":"NOT_APPLICABLE"},e._isSubmitted=function(n){return e._getStatus(n)==="SUBMITTED"},e._getPayloadByStatus=function(n){return n==="NO_FEEDBACK"?{}:null},e.payloadify=function(n){return Ae($e({id:n.id,rating:n.rating,comment:n.comment}))},e}(),nf=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).isBlockedByMe=!1,a.role=Bt(hs,r.role)?r.role:hs.NONE,a.isBlockedByMe=(i=r.is_blocked_by_me)!==null&&i!==void 0&&i,a}return k(n,e),n.payloadify=function(t){return Ae($e(z(z({},e.payloadify.call(this,t)),{role:t.role,is_blocked_by_me:t.isBlockedByMe})))},n}(Gt),pi=function(){function e(n){this.key=n.key,this.value=Ht("string",n.value)?it([],Ge(n.value),!1):[]}return e.payloadify=function(n){var t;return Ae($e({key:n.key,value:(t=n.value)!==null&&t!==void 0?t:[]}))},e}(),zx=function(e){switch(e){case jn.BASE:return"";case jn.USER:return"MESG";case jn.FILE:return"FILE";case jn.ADMIN:return"ADMM"}},jx=function(e){function n(t,r){var i,a,s,o,l,u,c,h,f,p=this;(p=e.call(this,t)||this).channelType=Kt.BASE,p.messageType=jn.BASE,p.mentionType=null,p.mentionedUsers=null,p.mentionedUserIds=null,p.metaArrays=[],p.extendedMessage={},p.createdAt=0,p.updatedAt=0,p.channelUrl=r.channel_url,p.channelType=Bt(Kt,r.channel_type)?r.channel_type:Kt.GROUP,r.channel&&(r.channel.channel_url&&(p.channelUrl=r.channel.channel_url),r.channel.channel_type&&(p.channelType=r.channel.channel_type)),p.data=(i=r.data)!==null&&i!==void 0?i:"",p.customType=(a=r.custom_type)!==null&&a!==void 0?a:"",p.mentionType=Bt(Oi,r.mention_type)?r.mention_type:null,p.mentionedUsers=r.mentioned_users?r.mentioned_users.map(function(y){return new Gt(p._iid,y)}):null,p.mentionedUserIds=(s=r.mentioned_user_ids)!==null&&s!==void 0?s:null,p.mentionedUsers&&!p.mentionedUserIds&&(p.mentionedUserIds=p.mentionedUsers.map(function(y){return y.userId}));var _=(o=r.metaarray)!==null&&o!==void 0?o:{},g=(l=r.metaarray_key_order)!==null&&l!==void 0?l:Object.keys(_).sort(function(y,S){return y.localeCompare(S)});p.metaArrays=[];for(var C=0;C<g.length;C++){var E=g[C];p.metaArrays.push(new pi({key:E,value:_[E]||[]}))}return r.sorted_metaarray&&(p.metaArrays=r.sorted_metaarray.map(function(y){return new pi(y)})),p.extendedMessage=(u=r.extended_message)!==null&&u!==void 0?u:{},p.extendedMessagePayload=r.extended_message_payload,p.createdAt=(h=(c=r.created_at)!==null&&c!==void 0?c:r.ts)!==null&&h!==void 0?h:0,p.updatedAt=(f=r.updated_at)!==null&&f!==void 0?f:0,p}return k(n,e),n.payloadify=function(t){var r,i;return Ae($e(z(z({},e.payloadify.call(this,t)),{channel_url:t.channelUrl,channel_type:t.channelType,type:zx(t.messageType),data:t.data,custom_type:t.customType,mention_type:t.mentionType,mentioned_user_ids:t.mentionedUserIds,mentioned_users:(r=t.mentionedUsers)===null||r===void 0?void 0:r.map(function(a){return Gt.payloadify(a)}),sorted_metaarray:(i=t.metaArrays)===null||i===void 0?void 0:i.map(function(a){return pi.payloadify(a)}),extended_message:t.extendedMessage,extended_message_payload:t.extendedMessagePayload,created_at:t.createdAt,updated_at:t.updatedAt})))},n.prototype.isIdentical=function(t){return!0},n.prototype.isEqual=function(t){return $k(this,t)},n.prototype.isUserMessage=function(){return this.messageType===jn.USER},n.prototype.isFileMessage=function(){return this.messageType===jn.FILE&&!Object.prototype.hasOwnProperty.call(this,"fileInfoList")},n.prototype.isMultipleFilesMessage=function(){return this.messageType===jn.FILE&&Object.prototype.hasOwnProperty.call(this,"fileInfoList")},n.prototype.isAdminMessage=function(){return this.messageType===jn.ADMIN},n.prototype.serialize=function(){return hf(this)},n.prototype.getMetaArraysByKeys=function(t){return this.metaArrays.filter(function(r){return t.includes(r.key)})},n}(Ur),qx=function(e){function n(t,r){var i,a,s,o=this;return(o=e.call(this,t)||this).channelUrl=(i=r.channel_url)!==null&&i!==void 0?i:"",o.channelType=(a=r.channel_type)!==null&&a!==void 0?a:Kt.GROUP,o.reader=new Gt(o._iid,r.user),o.readAt=r.ts,o.isExcluded=(s=r.is_excluded)!==null&&s!==void 0&&s,o}return k(n,e),n}(Ur),Sq=function(e){function n(t){var r=t.channelUrl;return e.call(this,{code:"READ",ackRequired:!0,payload:{channel_url:r}})||this}return k(n,e),n}(Ri),Tq=function(e){function n(t){var r=e.call(this)||this,i=t.channelUrl,a=t.channelType,s=t.userId,o=t.notificationIds,l=t.messageId,u=t.isExcluded,c=t.uniqueId;return r.method=fe.PUT,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/messages/mark_as_read"),r.params=Ae($e({user_id:s,message_ids:o,message_id:l,is_excluded:u,unique_id:c})),r}return k(n,e),n}(ve),Kx=function(e){function n(t,r,i){var a=e.call(this,t,"READ",i)||this;return a.readStatus=new qx(t,i),a}return k(n,e),n}(Qn),Nq=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.readAt=r.ts,i.unreadMessageCount=r.unread_message_count,i.totalUnreadCount=r.total_unread_count,i.channelUrl=r.channel_url,i.userId=r.user_id,i.isExcluded=r.is_excluded,i.uniqueId=r.unique_id,i}return k(n,e),n}(_e),Iq=function(e){function n(t){var r=t.channelUrl,i=t.messageId;return e.call(this,{code:"READ",ackRequired:!0,payload:{channel_url:r,parent_message_id:i}})||this}return k(n,e),n}(Ri),Mq=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.pushEnabled,o=e.call(this)||this;return o.method=fe.PUT,o.path="".concat(mn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/thread_push"),o.params={push_enabled:s},o}return k(n,e),n}(ve);(function(e){function n(t,r){return e.call(this,t,r)||this}k(n,e)})(_e);var Aq=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.rating,o=t.comment,l=e.call(this)||this;return l.method=fe.POST,l.path="".concat(mn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/feedbacks"),l.params={rating:s,comment:o},l}return k(n,e),n}(ve),wq=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.feedback=new Nl(r),i}return k(n,e),n}(_e),Rq=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.feedbackId,o=t.rating,l=t.comment,u=e.call(this)||this;return u.method=fe.PUT,u.path="".concat(mn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/feedbacks/").concat(s),u.params={rating:o,comment:l},u}return k(n,e),n}(ve),Oq=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.feedback=new Nl(r),i}return k(n,e),n}(_e),Dq=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.feedbackId,o=e.call(this)||this;return o.method=fe.DELETE,o.path="".concat(mn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/feedbacks/").concat(s),o}return k(n,e),n}(ve);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.feedback=new Nl(r),i}k(n,e)})(_e);var $c,Vw,U1=function(e){function n(t,r){var i,a,s,o,l,u=this;return(u=e.call(this,t)||this).plainUrl="",u.fileName=null,u.mimeType=null,u.fileSize=0,u.thumbnails=[],u._requireAuth=!1,u.plainUrl=(i=r.url)!==null&&i!==void 0?i:"",u.fileName=(a=r.file_name)!==null&&a!==void 0?a:null,u.mimeType=(s=r.file_type)!==null&&s!==void 0?s:null,u.fileSize=(o=r.file_size)!==null&&o!==void 0?o:0,u._requireAuth=(l=r.require_auth)!==null&&l!==void 0&&l,u.thumbnails=r.thumbnails?r.thumbnails.map(function(c){var h;return new Wl(u._iid,typeof c=="string"?{url:c,width:0,height:0}:z(z({},c),{url:((h=c.url)!==null&&h!==void 0?h:"").split("auth=")[0]}),u._requireAuth)}):[],u}return k(n,e),n.payloadify=function(t){var r;return Ae($e({url:t.plainUrl,file_name:t.fileName,file_type:t.mimeType,file_size:t.fileSize,thumbnails:(r=t.thumbnails)===null||r===void 0?void 0:r.map(function(i){var a;return{url:((a=i.plainUrl)!==null&&a!==void 0?a:"").split("auth=")[0],width:i.width,height:i.height,real_width:i.realWidth,real_height:i.realHeight}}),require_auth:t._requireAuth}))},Object.defineProperty(n.prototype,"url",{get:function(){var t=q.of(this._iid).sessionManager;return this._requireAuth&&t.ekey?"".concat(this.plainUrl,"?auth=").concat(t.ekey):this.plainUrl},enumerable:!1,configurable:!0}),n}(Ur),Wx=function(e){var n=e.channelUrl,t=e.channelType,r=e.parentMessage;this.channelUrl=n,this.channelType=t,this.parentMessage=r};(function(e){e.NUMBER="number",e.ENUM="enum",e.TEXT="text",e.REGEX="regex",e.DECIMAL_PLACE="decimal_place"})($c||($c={})),function(e){e.TEXT="text",e.TEXTAREA="textarea",e.NUMBER="number",e.PHONE="phone",e.EMAIL="email",e.CHIP="chip"}(Vw||(Vw={}));var wu,ls,zw=function(){function e(n,t){var r=t.id,i=t.name,a=t.items,s=t.version,o=t.is_submitted;this.messageId=n,this.id=r,this.name=i,this.items=a.map(function(l){return new jw(l)}).sort(function(l,u){return l.sortOrder-u.sortOrder}),this.version=s??1,this._isSubmitted=o}return Object.defineProperty(e.prototype,"isSubmitted",{get:function(){var n;return(n=this._isSubmitted)!==null&&n!==void 0?n:this.items.some(function(t){return Array.isArray(t.submittedValues)})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isSubmittable",{get:function(){return this.items.every(function(n){return n.required?!!(Array.isArray(n.draftValues)&&n.draftValues.length>0)&&n.isValid(n.draftValues):!(Array.isArray(n.draftValues)&&n.draftValues.length>0)||n.isValid(n.draftValues)})},enumerable:!1,configurable:!0}),e.payloadify=function(n){return Ae($e({id:n.id,name:n.name,items:n.items.map(function(t){return jw.payloadify(t)}),version:n.version,is_submitted:n._isSubmitted}))},e.isMessageFormPayload=function(n){return!!(n!=null&&n.message_form)},e}(),jw=function(){function e(n){var t=n.id,r=n.name,i=n.required,a=n.sort_order,s=n.placeholder,o=n.style,l=n.item_type,u=n.validators,c=n.value,h=n.values;this.id=t,this.name=r,this.required=i,this.sortOrder=a,this.placeholder=s,Object.keys(o).length===0?this.style={layout:l}:this.style=Ae({layout:o.layout,options:o.options,defaultOptions:o.default_options,resultCount:o.result_count}),h?this.submittedValues=h:c&&(this.submittedValues=[c]),this._validators=u}return e.prototype.isValid=function(n){var t=this;return n.every(function(r){var i=function(a,s){return s.every(function(o){switch(o.key){case $c.NUMBER:var l=Number(a);return!(isNaN(l)||o.min&&typeof o.min!="number"||o.max&&typeof o.max!="number"||typeof o.min=="number"&&l<o.min||typeof o.max=="number"&&l>o.max);case $c.ENUM:return typeof a=="string"&&(!(o.enums&&Array.isArray(o.enums)&&o.enums.length>0&&!o.enums.includes(a))||o.allow_other);case $c.TEXT:return!(typeof a!="string"||typeof o.min_length=="number"&&a.length<o.min_length||typeof o.max_length=="number"&&a.length>o.max_length);case $c.REGEX:return!(typeof a!="string"||o.regex&&(typeof o.regex!="string"||!new RegExp(o.regex).test(a)));case $c.DECIMAL_PLACE:return a.length!==0&&(l=Number(a),!(isNaN(l)||(!o.max_decimal_place||typeof o.max_decimal_place=="number")&&o.max_decimal_place&&!function(u,c){var h=u.toString(),f=h.indexOf(".");return f===-1||h.slice(f+1).length<=c}(l,o.max_decimal_place)));default:return!0}})}(r,t._validators);return i})},e.payloadify=function(n){return Ae($e({id:n.id,name:n.name,required:n.required,sort_order:n.sortOrder,placeholder:n.placeholder,style:Ae({layout:n.style.layout,options:n.style.options,default_options:n.style.defaultOptions,result_count:n.style.resultCount}),item_type:n.style.layout,validators:n._validators,values:n.submittedValues}))},e}(),Uq=function(e){function n(t){var r=e.call(this)||this;return r.method=fe.POST,r.path="".concat(bz,"/").concat(t.formId,"/submit"),r.params=Ae({message_id:t.messageId,items:t.items}),r}return k(n,e),n}(ve);(function(e){e.PENDING="pending",e.SENT="sent",e.FAILED="failed",e.CANCELED="canceled"})(wu||(wu={})),function(e){e.PENDING="pending",e.IN_QUEUE="in_queue",e.SENT="sent",e.FAILED="failed",e.CANCELED="canceled",e.REMOVED="removed"}(ls||(ls={}));var rd,Hi=function(e){function n(t,r){var i,a,s,o,l,u,c,h,f,p=this;return(p=e.call(this,t,r)||this).parentMessage=null,p.silent=!1,p.isOperatorMessage=!1,p.threadInfo=null,p.reactions=[],p.appleCriticalAlertOptions=null,p.scheduledInfo=null,p.suggestedReplies=null,p.myFeedback=null,p.myFeedbackStatus="NOT_APPLICABLE",p.messageForm=null,p._isContinuousMessages=!1,p._scheduledStatus=null,p._poll=null,p.messageId=(a=(i=r.msg_id)!==null&&i!==void 0?i:r.message_id)!==null&&a!==void 0?a:0,p.parentMessageId=(s=typeof r.parent_message_id=="string"?parseInt(r.parent_message_id):r.parent_message_id)!==null&&s!==void 0?s:0,p.threadInfo=r.thread_info?new f0(p._iid,r.thread_info):null,r.reactions_summary?p.reactions=r.reactions_summary.map(function(_){return new iv(t,_)}):r.reactions?p.reactions=r.reactions.map(function(_){return new iv(t,_)}):p.reactions=[],p.ogMetaData=r.og_tag?new $w(r.og_tag):null,p.silent=(o=r.silent)!==null&&o!==void 0&&o,p.isOperatorMessage=(l=r.is_op_msg)!==null&&l!==void 0&&l,p.appleCriticalAlertOptions=r.apple_critical_alert_options?new js(r.apple_critical_alert_options):null,typeof r.scheduled_message_id=="number"&&typeof r.scheduled_at=="number"&&r.scheduled_status&&(p.scheduledInfo={scheduledMessageId:r.scheduled_message_id,scheduledAt:r.scheduled_at},p._scheduledStatus=r.scheduled_status),p._isContinuousMessages=(u=r.is_continuous_messages)!==null&&u!==void 0&&u,p.myFeedback=Nl._isSubmitted(r.feedback)?new Nl(r.feedback):null,p.myFeedbackStatus=Nl._getStatus(r.feedback),p.suggestedReplies=(h=(c=r.extended_message_payload)===null||c===void 0?void 0:c.suggested_replies)!==null&&h!==void 0?h:null,p.messageForm=zw.isMessageFormPayload(r.extended_message_payload)?new zw(p.messageId,r.extended_message_payload.message_form):null,p.message=(f=r.message)!==null&&f!==void 0?f:"",p._poll=r.poll?new zs(p._iid,r.poll):null,p}return k(n,e),n.payloadify=function(t){var r,i;return Ae($e(z(z({},e.payloadify.call(this,t)),{message_id:t.messageId,parent_message_id:t.parentMessageId,thread_info:t.threadInfo?f0.payloadify(t.threadInfo):null,reactions_summary:t.reactions.map(function(a){return iv.payloadify(a)}),og_tag:t.ogMetaData?$w.payloadify(t.ogMetaData):null,silent:t.silent,is_op_msg:t.isOperatorMessage,apple_critical_alert_options:t.appleCriticalAlertOptions?js.payloadify(t.appleCriticalAlertOptions):null,scheduled_message_id:(r=t.scheduledInfo)===null||r===void 0?void 0:r.scheduledMessageId,scheduled_at:(i=t.scheduledInfo)===null||i===void 0?void 0:i.scheduledAt,scheduled_status:t._scheduledStatus,feedback:t.myFeedback?Nl.payloadify(t.myFeedback):Nl._getPayloadByStatus(t.myFeedbackStatus),message:t.message,poll:t._poll?zs.payloadify(t._poll):null})))},n._getParentMessageInfoPayload=function(t){var r={type:zx(t.messageType),ts:t.createdAt,user:t.sender?nf.payloadify(t.sender):null,message:t.message,data:t.data,custom_type:t.customType};switch(t.messageType){case jn.USER:return Ae($e(z(z({},r),{translations:t.translations})));case jn.FILE:return Ae($e(z(z({},r),{file:{url:t.plainUrl,name:t.name,type:t.type,require_auth:t.requireAuth},files:Array.isArray(t.fileInfoList)?t.fileInfoList.map(function(i){return U1.payloadify(i)}):null})));case jn.ADMIN:return Ae($e(z(z({},r),{translations:t.translations})));default:return Ae($e(z({},r)))}},n.prototype.isIdentical=function(t){return this.messageId===t.messageId},n.prototype.applyThreadInfoUpdateEvent=function(t){return this.messageId===t.targetMessageId&&(t.threadInfo._isUpdateRequired&&this.threadInfo&&t.threadInfo._updateFrom(this.threadInfo),this.threadInfo=t.threadInfo,!0)},n.prototype._findReactionIndex=function(t){for(var r=0;r<this.reactions.length;r++)if(this.reactions[r].key===t)return r;return-1},n.prototype.applyReactionEvent=function(t){var r=q.of(this._iid).sdkState;if(this.messageId===t.messageId)switch(t.operation){case yd.ADD:t.userId===r.userId&&(t._hasCurrentUserReacted=!0),(i=this._findReactionIndex(t.key))!==-1?this.reactions[i].applyEvent(t):t._sampledUserIds?this.reactions.push(new iv(this._iid,{key:t.key,sampled_user_ids:t._sampledUserIds,sampled_user_info:t._sampledUserInfoList,count:t._count,is_self_included:t._hasCurrentUserReacted,last_ts:t.updatedAt})):this.reactions.push(new iv(this._iid,{key:t.key,user_ids:[t.userId],updated_at:t.updatedAt}));break;case yd.DELETE:var i;(i=this._findReactionIndex(t.key))!==-1&&(t._sampledUserIds?t._count===0?this.reactions.splice(i,1):(t.userId===r.userId&&(t._hasCurrentUserReacted=!1),this.reactions[i].applyEvent(t)):(this.reactions[i].applyEvent(t),this.reactions[i].isEmpty&&this.reactions.splice(i,1)))}},n.prototype.applyParentMessage=function(t){if(!this.parentMessage)return this.parentMessage=t,!0;if(this.parentMessageId===t.messageId){var r=this.parentMessage.updatedAt;if(t.updatedAt>=r)return this.parentMessage=t,!0}return!1},n.prototype.applyPoll=function(t){return!(this._poll&&this._poll.id===t.id&&this._poll.updatedAt>t.updatedAt)&&(this._poll=t,!0)},Object.defineProperty(n.prototype,"poll",{get:function(){return this._poll},enumerable:!1,configurable:!0}),n.prototype._triggerThreadInfoUpdatedEvent=function(){return N(this,void 0,void 0,function(){var t;return T(this,function(r){return(t=q.of(this._iid).dispatcher).dispatch(new Wx({channelType:Kt.GROUP,channelUrl:this.channelUrl,parentMessage:this})),t.dispatch(new er({messages:[this],source:oe.EVENT_MESSAGE_THREADINFO_UPDATED})),[2]})})},n.prototype.markThreadAsRead=function(){return N(this,void 0,void 0,function(){var t,r;return T(this,function(i){switch(i.label){case 0:return t=q.of(this._iid).requestQueue,r=new Iq({channelUrl:this.channelUrl,messageId:this.messageId}),[4,t.send(r)];case 1:return i.sent(),this.threadInfo&&this.threadInfo.unreadReplyCount!==0?(this.threadInfo.unreadReplyCount=0,[4,this._triggerThreadInfoUpdatedEvent()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[2]}})})},n.prototype.setPushNotificationEnabled=function(t){return N(this,void 0,void 0,function(){var r,i;return T(this,function(a){switch(a.label){case 0:return r=q.of(this._iid).requestQueue,i=new Mq({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,pushEnabled:t}),[4,r.send(i)];case 1:return a.sent(),this.threadInfo&&this.threadInfo.isPushNotificationEnabled!==t&&(this.threadInfo.isPushNotificationEnabled=t),[2]}})})},n.prototype.submitMessageForm=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:if(r=q.of(this._iid).requestQueue,i=null,a=null,s=this.messageForm,!t&&s){if(!s.isSubmittable)throw new Q({code:Le.INVALID_PARAMETER,message:"The form is not submittable. Please check all form items are valid before submitting."});if(s.isSubmitted)throw new Q({code:Le.INVALID_PARAMETER,message:"The form has already been submitted."});i=s.id,a=s.items.reduce(function(u,c){return u.push({form_item_id:c.id,values:Array.isArray(c.draftValues)?c.draftValues:[]}),u},[])}else t&&(i=t.formId,a=Object.entries(t.answers).reduce(function(u,c){var h=Ge(c,2),f=h[0],p=h[1],_=Number(f);if(Number.isNaN(_))throw new Q({code:Le.INVALID_PARAMETER,message:"Keys in answers must be numeric string."});return u.push({form_item_id:_,value:p}),u},[]));if(!i||!a)throw new Q({code:Le.INVALID_PARAMETER,message:"Missing one or more required inputs: formId, answers."});return o=new Uq({messageId:this.messageId,formId:i,items:a}),[4,r.send(o)];case 1:return l.sent(),[2]}})})},n.prototype.submitFeedback=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:return r=q.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new Aq({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,rating:t.rating,comment:t.comment}),[4,i.send(s)];case 1:return o=u.sent(),l=o.as(wq),this.myFeedback=l.feedback,this.myFeedbackStatus="SUBMITTED",a.dispatch(new er({messages:[this],source:oe.EVENT_MESSAGE_FEEDBACK_ADDED})),[2]}})})},n.prototype.updateFeedback=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:return r=q.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new Rq({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,feedbackId:t.id,rating:t.rating,comment:t.comment}),[4,i.send(s)];case 1:return o=u.sent(),l=o.as(Oq),this.myFeedback=l.feedback,this.myFeedbackStatus="SUBMITTED",a.dispatch(new er({messages:[this],source:oe.EVENT_MESSAGE_FEEDBACK_UPDATED})),[2]}})})},n.prototype.deleteFeedback=function(t){return N(this,void 0,void 0,function(){var r,i,a,s;return T(this,function(o){switch(o.label){case 0:return r=q.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new Dq({channelUrl:this.channelUrl,channelType:this.channelType,messageId:this.messageId,feedbackId:t}),[4,i.send(s)];case 1:return o.sent(),this.myFeedback=null,this.myFeedbackStatus="NO_FEEDBACK",a.dispatch(new er({messages:[this],source:oe.EVENT_MESSAGE_FEEDBACK_DELETED})),[2]}})})},n}(jx),yr=function(e){function n(t,r){var i,a,s,o,l=this;if((l=e.call(this,t,r)||this).reqId="",l.replyToChannel=!1,l.errorCode=0,l.sender=r.user?new nf(l._iid,r.user):r.sender_id,l.reqId=(a=(i=r.req_id)!==null&&i!==void 0?i:r.request_id)!==null&&a!==void 0?a:"",l.replyToChannel=(s=r.is_reply_to_channel)!==null&&s!==void 0&&s,r.request_state&&Bt(sn,r.request_state)&&(l.sendingStatus=r.request_state),!l.sendingStatus)if(l.messageId>0)l.sendingStatus=sn.SUCCEEDED;else if(l.scheduledInfo)switch(r.scheduled_status&&(l._scheduledStatus=r.scheduled_status),r.scheduled_status){case ls.SENT:case ls.IN_QUEUE:l.sendingStatus=sn.SUCCEEDED;break;case ls.PENDING:l.sendingStatus=sn.SCHEDULED;break;case ls.FAILED:case ls.REMOVED:l.sendingStatus=sn.FAILED;break;case ls.CANCELED:l.sendingStatus=sn.CANCELED}else l.sendingStatus=sn.PENDING;return l.errorCode=(o=r.error_code)!==null&&o!==void 0?o:0,l._messageToken=r.mesg_token,l}return k(n,e),n.payloadify=function(t){return Ae($e(z(z({},e.payloadify.call(this,t)),{user:nf.payloadify(t.sender),req_id:t.reqId,is_reply_to_channel:t.replyToChannel,request_state:t.sendingStatus,error_code:t.errorCode,mesg_token:t._messageToken})))},Object.defineProperty(n.prototype,"isResendable",{get:function(){return(this.sendingStatus===sn.FAILED||this.sendingStatus===sn.CANCELED)&&az(this.errorCode)},enumerable:!1,configurable:!0}),n.prototype.isIdentical=function(t){return this.messageId>0&&t.messageId>0?this.messageId===t.messageId:this.reqId===t.reqId},n}(Hi),nm={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:Mi.ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1},dE=function(e){return Y("number",e.prevResultSize)&&Y("number",e.nextResultSize)&&Y("boolean",e.isInclusive)&&Y("boolean",e.reverse)&&Y("string",e.messageTypeFilter)&&Bt(Mi,e.messageTypeFilter)&&Ht("string",e.customTypesFilter,!0)&&Ht("string",e.senderUserIdsFilter,!0)&&Y("boolean",e.includeMetaArray)&&Y("boolean",e.includeReactions)&&Y("boolean",e.includeParentMessageInfo)},bd=function(e){function n(t,r){var i,a,s,o=this;if((o=e.call(this,t,r)||this).translations={},o.messageType=jn.ADMIN,o.translations=(i=r.translations)!==null&&i!==void 0?i:{},r.parent_message_info){var l=r.parent_message_info;o.parentMessage=Di(t,Ae($e(z(z({},l),{message_id:o.parentMessageId,channel_url:o.channelUrl,channel_type:o.channelType,file:l.file,url:(a=l.file)===null||a===void 0?void 0:a.url,require_auth:(s=l.file)===null||s===void 0?void 0:s.require_auth}))))}return o}return k(n,e),n.payloadify=function(t){return Ae($e(z(z({},e.payloadify.call(this,t)),{translations:t.translations,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},n.prototype.getThreadedMessagesByTimestamp=function(t,r){return N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return i=z(z({},nm),r),me(this.messageId>0&&Y("number",t)&&dE(i)).throw(Q.invalidParameters),[4,Wr.of(this._iid).getThreadedMessagesByTimestamp(this,t,i)];case 1:return[2,a.sent()]}})})},n}(Hi),qw=function(){function e(n){var t,r;this.detail={},this.type=(t=n.type)!==null&&t!==void 0?t:"",this.vendor=(r=n.vendor)!==null&&r!==void 0?r:"",n.detail&&Y("object",n.detail)&&!Array.isArray(n.detail)&&(this.detail=n.detail)}return e.payloadify=function(n){return Ae($e({type:n.type,vendor:n.vendor,detail:n.detail}))},e}(),Kw=function(){function e(n){this.status=n.status,n.original_message_info&&(this.originalMessageInfo={createdAt:n.original_message_info.ts,messageId:n.original_message_info.id})}return e.payloadify=function(n){return Ae({status:n.status,original_message_info:n.originalMessageInfo?{id:n.originalMessageInfo.messageId,ts:n.originalMessageInfo.createdAt}:void 0})},e}(),Ni=function(e){function n(t,r){var i,a,s,o,l,u,c,h=this;if((h=e.call(this,t,r)||this).messageParams=null,h.mentionedMessageTemplate=void 0,h.translations={},h.translationTargetLanguages=[],h.messageSurvivalSeconds=-1,h.plugins=[],h.messageType=jn.USER,h.translations=(s=r.translations)!==null&&s!==void 0?s:{},h.translationTargetLanguages=(o=r.target_langs)!==null&&o!==void 0?o:[],Object.keys(h.translations).length===0&&h.translationTargetLanguages.length>0)try{for(var f=ye(h.translationTargetLanguages),p=f.next();!p.done;p=f.next()){var _=p.value;h.translations[_]=""}}catch(C){i={error:C}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}if(h.mentionedMessageTemplate=r.mentioned_message_template,h.messageSurvivalSeconds=(l=r.message_survival_seconds)!==null&&l!==void 0?l:-1,h.plugins=r.plugins?r.plugins.map(function(C){return new qw(C)}):[],r.parent_message_info){var g=r.parent_message_info;h.parentMessage=Di(t,Ae($e(z(z({},g),{created_at:g.ts,message_id:h.parentMessageId,channel_url:h.channelUrl,channel_type:h.channelType,file:g.file,url:(u=g.file)===null||u===void 0?void 0:u.url,require_auth:(c=g.file)===null||c===void 0?void 0:c.require_auth}))))}return r.review_info&&(h.messageReviewInfo=new Kw(r.review_info)),h}return k(n,e),n.payloadify=function(t){return Ae($e(z(z({},e.payloadify.call(this,t)),{translations:t.translations,message_survival_seconds:t.messageSurvivalSeconds,mentioned_message_template:t.mentionedMessageTemplate,plugins:t.plugins.map(function(r){return qw.payloadify(r)}),parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null,review_info:t.messageReviewInfo?Kw.payloadify(t.messageReviewInfo):void 0})))},n.prototype.getThreadedMessagesByTimestamp=function(t,r){return N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return i=z(z({},nm),r),me(this.messageId>0&&Y("number",t)&&dE(i)).throw(Q.invalidParameters),[4,Wr.of(this._iid).getThreadedMessagesByTimestamp(this,t,i)];case 1:return[2,a.sent()]}})})},n}(yr),fs=function(e){function n(t,r){var i,a,s,o,l,u,c,h,f=this;if((f=e.call(this,t,r)||this).messageParams=null,f.fileInfoList=[],f.messageSurvivalSeconds=-1,f.messageType=jn.FILE,f.data=(s=(a=(i=r.file)===null||i===void 0?void 0:i.data)!==null&&a!==void 0?a:r.custom)!==null&&s!==void 0?s:"",f.fileInfoList=(l=(o=r.files)===null||o===void 0?void 0:o.map(function(_){return new U1(t,_)}))!==null&&l!==void 0?l:[],f.messageSurvivalSeconds=(u=r.message_survival_seconds)!==null&&u!==void 0?u:-1,r.parent_message_info){var p=r.parent_message_info;f.parentMessage=Di(t,Ae($e(z(z({},p),{created_at:p.ts,message_id:f.parentMessageId,channel_url:f.channelUrl,channel_type:f.channelType,file:p.file,url:(c=p.file)===null||c===void 0?void 0:c.url,require_auth:(h=p.file)===null||h===void 0?void 0:h.require_auth}))))}return f}return k(n,e),n.prototype.getThreadedMessagesByTimestamp=function(t,r){return N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return i=z(z({},nm),r),me(this.messageId>0&&Y("number",t)&&dE(i)).throw(Q.invalidParameters),[4,Wr.of(this._iid).getThreadedMessagesByTimestamp(this,t,i)];case 1:return[2,a.sent()]}})})},n.payloadify=function(t){var r,i,a,s,o,l;return Ae($e(z(z({},e.payloadify.call(this,t)),{file:{name:(i=(r=t.fileInfoList[0])===null||r===void 0?void 0:r.fileName)!==null&&i!==void 0?i:"",size:(s=(a=t.fileInfoList[0])===null||a===void 0?void 0:a.fileSize)!==null&&s!==void 0?s:0,type:(l=(o=t.fileInfoList[0])===null||o===void 0?void 0:o.mimeType)!==null&&l!==void 0?l:"",data:t.data},files:Array.isArray(t.fileInfoList)?t.fileInfoList.map(function(u){return U1.payloadify(u)}):null,message_survival_seconds:t.messageSurvivalSeconds,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},n._isMultipleFilesMessagePayload=function(t){var r=t.files;return Array.isArray(r)&&r.length>=2},n._isMultipleFilesMessageSerializedData=function(t){var r=t.fileInfoList;return Array.isArray(r)},n}(yr);(function(e){e.SENT="SENT",e.READ="READ"})(rd||(rd={}));var Cd=function(e){function n(t,r){var i,a,s=this;if((s=e.call(this,t,r)||this).notificationData=null,s.notificationId=r.notification_message_id,s.messageType=jn.ADMIN,s.messageStatus=(i=r.message_status)!==null&&i!==void 0?i:rd.SENT,s.priority=(a=r.priority)!==null&&a!==void 0?a:C1.NORMAL,s.notificationEventDeadline=r.notification_event_deadline,s.extendedMessage.sub_type===0)try{var o=JSON.parse(s.extendedMessage.sub_data),l=o.label,u=o.tags,c=u===void 0?[]:u,h=o.template_key,f=o.template_variables;s.notificationData={label:l,tags:c,templateKey:h,templateVariables:f}}catch{}return s}return k(n,e),n.payloadify=function(t){return Ae($e(z(z({},e.payloadify.call(this,t)),{notification_message_id:t.notificationId,message_status:t.messageStatus,priority:t.priority,notification_event_deadline:t.notificationEventDeadline})))},n.prototype.isIdentical=function(t){return this.notificationId===t.notificationId},n}(jx),L1=function(e){if(e.notificationId)return Cd.payloadify(e);switch(e.messageType){case jn.USER:return Ni.payloadify(e);case jn.FILE:return e.fileInfoList?fs.payloadify(e):Rr.payloadify(e);case jn.ADMIN:return bd.payloadify(e);default:throw Q.unknown}},Di=function(e,n){if(n.notification_message_id)return new Cd(e,n);switch(n.type){case"MESG":return new Ni(e,n);case"FILE":return fs._isMultipleFilesMessagePayload(n)?new fs(e,n):new Rr(e,n);case"ADMM":case"BRDM":return new bd(e,n);default:return null}},Rr=function(e){function n(t,r){var i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S=this;(S=e.call(this,t,r)||this).messageParams=null,S.plainUrl="",S.requireAuth=!1,S.thumbnails=[],S.messageSurvivalSeconds=-1,S.messageType=jn.FILE;var I=r.file;if(S.plainUrl=((a=(i=I==null?void 0:I.url)!==null&&i!==void 0?i:r.url)!==null&&a!==void 0?a:"").split("?auth=")[0],S.name=(o=(s=I==null?void 0:I.name)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:"File",S.size=(u=(l=I==null?void 0:I.size)!==null&&l!==void 0?l:r.size)!==null&&u!==void 0?u:0,S.data=(f=(h=(c=I==null?void 0:I.data)!==null&&c!==void 0?c:r.custom)!==null&&h!==void 0?h:S.data)!==null&&f!==void 0?f:"",S.type=I?(p=I.type)!==null&&p!==void 0?p:"":(_=r.type)!==null&&_!==void 0?_:"",S.requireAuth=(g=r.require_auth)!==null&&g!==void 0&&g,S.thumbnails=r.thumbnails?r.thumbnails.map(function(R){var A;return new Wl(S._iid,typeof R=="string"?{url:R,width:0,height:0}:z(z({},R),{url:((A=R.url)!==null&&A!==void 0?A:"").split("auth=")[0]}),S.requireAuth)}):[],S.messageSurvivalSeconds=(C=r.message_survival_seconds)!==null&&C!==void 0?C:-1,r.parent_message_info){var w=r.parent_message_info;S.parentMessage=Di(t,Ae($e(z(z({},w),{created_at:w.ts,message_id:S.parentMessageId,channel_url:S.channelUrl,channel_type:S.channelType,file:w.file,url:(E=w.file)===null||E===void 0?void 0:E.url,require_auth:(y=w.file)===null||y===void 0?void 0:y.require_auth}))))}return S}return k(n,e),n.payloadify=function(t){var r;return Ae($e(z(z({},e.payloadify.call(this,t)),{url:t.plainUrl,require_auth:t.requireAuth,file:{name:t.name,size:t.size,type:t.type,data:t.data},thumbnails:(r=t.thumbnails)===null||r===void 0?void 0:r.map(function(i){return{url:i.plainUrl,width:i.width,height:i.height,real_width:i.realWidth,real_height:i.realHeight}}),message_survival_seconds:t.messageSurvivalSeconds,parent_message_info:t.parentMessage?e._getParentMessageInfoPayload.call(this,t.parentMessage):null})))},Object.defineProperty(n.prototype,"url",{get:function(){var t=q.of(this._iid).sessionManager;return this.requireAuth&&t.ekey?"".concat(this.plainUrl,"?auth=").concat(t.ekey):this.plainUrl},enumerable:!1,configurable:!0}),n.prototype.getThreadedMessagesByTimestamp=function(t,r){return N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return i=z(z({},nm),r),me(this.messageId>0&&Y("number",t)&&dE(i)).throw(Q.invalidParameters),[4,Wr.of(this._iid).getThreadedMessagesByTimestamp(this,t,i)];case 1:return[2,a.sent()]}})})},n}(yr),Up=function(e){function n(t,r){var i=r.file,a=r.fileUrl,s=r.fileName,o=r.fileSize,l=r.mimeType,u=r.thumbnailSizes,c=r._uploadedMetaData,h=r._thumbnails,f=e.call(this,t)||this;return f._plainUrl=a,f.file=i,f.fileName=s,f.fileSize=o,f.mimeType=l,f.thumbnailSizes=u,f._uploadedMetaData=c,f._thumbnails=h,f}return k(n,e),n.getPlainUrl=function(t){return t instanceof n?t._plainUrl:t.fileUrl},Object.defineProperty(n.prototype,"fileUrl",{get:function(){var t,r=q.of(this._iid).sessionManager;return this._plainUrl&&(!((t=this._uploadedMetaData)===null||t===void 0)&&t.requireAuth)&&r.ekey?"".concat(this._plainUrl,"?auth=").concat(r.ekey):this._plainUrl},set:function(t){this._plainUrl=t},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return{file:this.file,fileUrl:this._plainUrl,fileName:this.fileName,fileSize:this.fileSize,mimeType:this.mimeType,thumbnailSizes:this.thumbnailSizes,_thumbnails:this._thumbnails,_uploadedMetaData:this._uploadedMetaData}},n}(Ur),Lq=function(e){function n(t){var r,i,a,s,o=[];return t.mentionType===Oi.USERS&&(t.mentionedUserIds?o=t.mentionedUserIds:t.mentionedUsers&&(o=t.mentionedUsers.map(function(l){return l.userId}))),e.call(this,{code:"FILE",ackRequired:!0,payload:Ae($e({channel_url:t.channelUrl,files:t.files?Yx(t.files):null,url:t.url,name:(r=t.fileName)!==null&&r!==void 0?r:"",type:(i=t.mimeType)!==null&&i!==void 0?i:"",size:(a=t.fileSize)!==null&&a!==void 0?a:0,custom:t.data,custom_type:t.customType,thumbnails:(s=t._thumbnails)===null||s===void 0?void 0:s.map(function(l){return Wl.payloadify(l)}),require_auth:t.requireAuth,metaarray:t.metaArrays,mention_type:t.mentionType,mentioned_user_ids:o,push_option:t.pushNotificationDeliveryOption&&t.pushNotificationDeliveryOption!==yo.DEFAULT?t.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:t.appleCriticalAlertOptions?js.payloadify(t.appleCriticalAlertOptions):null,silent:t.silent,reply_to_channel:t.isReplyToChannel,parent_message_id:t.parentMessageId?t.parentMessageId:null,req_id:t.reqId,poll_id:t.pollId,pin_message:t.isPinnedMessage,message:t.message}))})||this}return k(n,e),n}(Ri),kq=function(e){function n(t){var r,i,a=this;a=e.call(this)||this;var s=[];return t.mentionType===Oi.USERS&&(t.mentionedUserIds?s=t.mentionedUserIds:t.mentionedUsers&&(s=t.mentionedUsers.map(function(o){return o.userId}))),a.method=fe.POST,a.path="".concat(mn(t.channelType),"/").concat(encodeURIComponent(t.channelUrl),"/messages"),a.params=Ae($e({message_type:jn.FILE,user_id:t.userId,files:t.files?Yx(t.files):null,url:t.fileUrl,mention_type:t.mentionType,mentioned_user_ids:s,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,data:t.data,custom_type:t.customType,thumbnails:(r=t._thumbnails)===null||r===void 0?void 0:r.map(function(o){return Wl.payloadify(o)}),require_auth:t.requireAuth,sorted_metaarray:(i=t.metaArrays)===null||i===void 0?void 0:i.map(function(o){return pi.payloadify(o)}),push_option:t.pushNotificationDeliveryOption,parent_message_id:t.parentMessageId?t.parentMessageId:null,apple_critical_alert_options:t.appleCriticalAlertOptions?js.payloadify(t.appleCriticalAlertOptions):null,reply_to_channel:t.isReplyToChannel,req_id:t.reqId,poll_id:t.pollId,pin_message:t.isPinnedMessage})),a}return k(n,e),n}(ve),HN=function(e){function n(t,r,i){var a,s,o,l,u=this;(u=e.call(this,t,"FILE",i)||this).message=i.files&&i.files.length>=2?new fs(t,i):new Rr(t,i);var c=q.of(t).sdkState;return u.isMentioned=Xh(u.message.mentionType,(o=(a=u.message.mentionedUserIds)!==null&&a!==void 0?a:(s=u.message.mentionedUsers)===null||s===void 0?void 0:s.map(function(h){return h.userId}))!==null&&o!==void 0?o:[],c.userId),u.forceUpdateLastMessage=(l=i.force_update_last_message)!==null&&l!==void 0&&l,u}return k(n,e),n}(Qn),xq=function(e){function n(t,r){var i,a,s,o,l=this;(l=e.call(this,t,r)||this).message=r.files&&r.files.length>=2?new fs(t,r):new Rr(t,r);var u=q.of(t).sdkState;return l.isMentioned=Xh(l.message.mentionType,(s=(i=l.message.mentionedUserIds)!==null&&i!==void 0?i:(a=l.message.mentionedUsers)===null||a===void 0?void 0:a.map(function(c){return c.userId}))!==null&&s!==void 0?s:[],u.userId),l.forceUpdateLastMessage=(o=r.force_update_last_message)!==null&&o!==void 0&&o,l}return k(n,e),n}(_e);function Yx(e){return e.map(function(n){var t,r;return Ae($e({url:Up.getPlainUrl(n),file_name:n.fileName,file_type:n.mimeType,file_size:n.fileSize,thumbnails:(t=n._thumbnails)===null||t===void 0?void 0:t.map(function(i){return Wl.payloadify(i)}),require_auth:(r=n._uploadedMetaData)===null||r===void 0?void 0:r.requireAuth}))})}var ti;(function(e){e[e.PENDING=0]="PENDING",e[e.UPLOADING=1]="UPLOADING",e[e.UPLOADED=2]="UPLOADED",e[e.SENDING=3]="SENDING",e[e.FAILED=4]="FAILED"})(ti||(ti={}));var Pq=function(){function e(n,t){var r=t.sdkState,i=t.dispatcher,a=t.requestQueue,s=t.onlineDetector,o=t.cacheContext,l=this;this._queueMap=new Map,this._iid=n,this._sdkState=r,this._requestQueue=a,this._cacheContext=o,this._dispatcher=i,this._dispatcher.on(function(u){u instanceof ja&&(l._connectionState=u.stateType)}),this._onlineDetector=s}return Object.defineProperty(e.prototype,"_shouldSendThroughWebSocket",{get:function(){return this._connectionState===gn.CONNECTED||this._connectionState===gn.CONNECTING||this._connectionState===gn.RECONNECTING},enumerable:!1,configurable:!0}),e.prototype._sendFileMessage=function(n,t){return N(this,void 0,void 0,function(){var r,i,a;return T(this,function(s){switch(s.label){case 0:return r=this._createSendFileMessageRequestParams(n,t),this._shouldSendThroughWebSocket?(i=new Lq(r),[4,this._requestQueue.send(i)]):[3,2];case 1:return a=s.sent(),[2,a.as(HN).message];case 2:return i=new kq(z(z({},r),{userId:this._sdkState.userId})),[4,this._requestQueue.send(i)];case 3:return a=s.sent(),[2,a.as(xq).message]}})})},e.prototype._createSendFileMessageRequestParams=function(n,t){var r=z(z({},t.params),{channelUrl:n.url,channelType:n.channelType,reqId:t.requestId,url:""});if(t.multipleFileUploadInfo){var i=t.params;r.files=i.fileInfoList}else i=t.params,r.url=i.fileUrl,r.requireAuth=i.requireAuth;return r},e.prototype._resolveMessageQueue=function(n){var t;return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u,c,h,f,p,_,g;return T(this,function(C){switch(C.label){case 0:if(!(r=this._queueMap.get(n.url)))return[3,21];if(r.isResolving)return[3,20];r.isResolving=!0,i=[],a=!0,C.label=1;case 1:C.trys.push([1,15,16,17]),s=ye(r.messageQueue),o=s.next(),C.label=2;case 2:if(o.done)return[3,14];switch(l=o.value,l.state){case ti.PENDING:case ti.UPLOADING:return[3,3];case ti.UPLOADED:return[3,4];case ti.FAILED:return[3,12]}return[3,13];case 3:return a=!1,i.push(l),[3,13];case 4:if(!a)return[3,10];C.label=5;case 5:return C.trys.push([5,8,,9]),l.state=ti.SENDING,[4,this._sendFileMessage(n,l)];case 6:return u=C.sent(),l.deferred.resolve(u),[4,Bi(100)];case 7:return C.sent(),[3,9];case 8:return c=C.sent(),l.deferred.reject(c),[3,9];case 9:return[3,11];case 10:i.push(l),C.label=11;case 11:return[3,13];case 12:return h=(t=l.error)!==null&&t!==void 0?t:Q.unknown,l.deferred.reject(h.code===Le.REQUEST_CANCELED?Q.fileUploadCanceled:h),[3,13];case 13:return o=s.next(),[3,2];case 14:return[3,17];case 15:return f=C.sent(),_={error:f},[3,17];case 16:try{o&&!o.done&&(g=s.return)&&g.call(s)}finally{if(_)throw _.error}return[7];case 17:return p=r.isResolveRequestPending,r.messageQueue=i,r.isResolving=!1,r.isResolveRequestPending=!1,p?[4,this._resolveMessageQueue(n)]:[3,19];case 18:C.sent(),C.label=19;case 19:return[3,21];case 20:r.isResolveRequestPending=!0,C.label=21;case 21:return[2]}})})},e.prototype._uploadNextPendingItem=function(n){var t;return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u,c,h,f;return T(this,function(p){switch(p.label){case 0:return(r=this._queueMap.get(n.url))&&(i=r.messageQueue.find(function(_){return _.state===ti.PENDING}))?i.multipleFileUploadInfo?(a=i.multipleFileUploadInfo,s=a.uploadIndex,o=a.uploadCount,l=a.requestHandler,f=i.params,u=f.fileInfoList[s],!ai(u.file)||!((t=u._uploadedMetaData)===null||t===void 0)&&t.isUploaded?[3,2]:[4,this._tryUploadNextItemAndUpdateItemState(n,r,i)]):[3,4]:[3,9];case 1:return p.sent(),[3,3];case 2:i.state=s<o-1?ti.PENDING:ti.UPLOADED,p.label=3;case 3:return c=f.fileInfoList[s],h=i.multipleFileUploadInfo.uploadIndex++,i.multipleFileUploadInfo.isCopy||l==null||l._triggerOnFileUploaded(i.requestId,h,c,i.error),[3,7];case 4:return f=i.params,ai(f.file)?[4,this._tryUploadNextItemAndUpdateItemState(n,r,i)]:[3,6];case 5:return p.sent(),[3,7];case 6:f.thumbnailSizes=[],i.state=ti.UPLOADED,p.label=7;case 7:return this._uploadNextPendingItem(n),[4,this._resolveMessageQueue(n)];case 8:p.sent(),p.label=9;case 9:return[2]}})})},e.prototype._tryUploadNextItemAndUpdateItemState=function(n,t,r){return N(this,void 0,void 0,function(){var i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return[4,this._onlineDetector.isOnline()];case 1:if(i=c.sent(),!q.of(this._iid).sessionManager.currentUser||!i)return r.error=Q.connectionRequired,r.state=ti.FAILED,[2];if(!(t.uploadQueue.length<6))return[3,9];r.state=ti.UPLOADING,t.uploadQueue.push(r),c.label=2;case 2:return c.trys.push([2,7,,8]),r.multipleFileUploadInfo?(a=r.multipleFileUploadInfo,s=a.uploadIndex,o=a.uploadCount,l=r.params,[4,this._uploadNextFileForMultipleFilesItemAndUpdateParams(n,r,l)]):[3,4];case 3:return c.sent(),r.state=s<o-1?ti.PENDING:ti.UPLOADED,[3,6];case 4:return l=r.params,[4,this._uploadNextFileForSingleFileItemAndUpdateParams(n,r,l)];case 5:c.sent(),r.state=ti.UPLOADED,c.label=6;case 6:return[3,8];case 7:switch((u=c.sent()).code){case Le.REQUEST_FAILED:r.error=new Q({code:Le.NETWORK_ERROR,message:"Failed to upload a file."});break;case Le.REQUEST_CANCELED:r.error=Q.fileUploadCanceled;break;default:r.error=u}return r.state=ti.FAILED,[3,8];case 8:this._dequeueUploadItem(t,r),c.label=9;case 9:return[2]}})})},e.prototype._dequeueUploadItem=function(n,t){var r=n.uploadQueue.findIndex(function(i){return i.requestId===t.requestId});r>=0&&n.uploadQueue.splice(r,1)},e.prototype._uploadNextFileForSingleFileItemAndUpdateParams=function(n,t,r){var i,a,s;return N(this,void 0,void 0,function(){var o,l,u,c,h,f,p,_,g,C;return T(this,function(E){switch(E.label){case 0:return o=new d0({file:r.file,channelUrl:n.url,thumbnailSizes:r.thumbnailSizes,requestId:t.requestId}),[4,this._requestQueue.send(o)];case 1:return l=E.sent(),u=l.as(h0),c=u.url,h=u.fileSize,f=h===void 0?r.fileSize:h,p=u.thumbnails,_=p===void 0?[]:p,g=u.requireAuth,C=g!==void 0&&g,r.fileName=(i=r.fileName)!==null&&i!==void 0?i:r.file.name,r.mimeType=(a=r.mimeType)!==null&&a!==void 0?a:r.file.type,r.fileSize=(s=r.fileSize)!==null&&s!==void 0?s:r.file.size,r.fileUrl=c,r.fileSize=f,r.requireAuth=C,r._thumbnails=_,[2]}})})},e.prototype._uploadNextFileForMultipleFilesItemAndUpdateParams=function(n,t,r){var i,a,s;return N(this,void 0,void 0,function(){var o,l,u,c,h,f,p,_,g,C,E;return T(this,function(y){switch(y.label){case 0:return o=t.multipleFileUploadInfo.uploadIndex,l=r.fileInfoList[o],u=new d0({file:l.file,channelUrl:n.url,thumbnailSizes:l.thumbnailSizes,requestId:t.requestId}),[4,this._requestQueue.send(u)];case 1:return c=y.sent(),h=c.as(h0),f=h.url,p=h.fileSize,_=p===void 0?l.fileSize:p,g=h.thumbnails,C=h.requireAuth,E=C!==void 0&&C,l.fileName=(i=l.fileName)!==null&&i!==void 0?i:l.file.name,l.mimeType=(a=l.mimeType)!==null&&a!==void 0?a:l.file.type,l.fileSize=(s=l.fileSize)!==null&&s!==void 0?s:l.file.size,l.file=void 0,l.fileUrl=f,l.fileSize=_,l._thumbnails=g,l._uploadedMetaData=z(z({},l._uploadedMetaData),{requireAuth:E,isUploaded:!0}),l instanceof Up||(r.fileInfoList[o]=new Up(this._iid,l)),[2]}})})},e.prototype.request=function(n,t,r,i){return i===void 0&&(i={}),N(this,void 0,void 0,function(){var a,s,o,l,u;return T(this,function(c){return this._queueMap.has(n.url)||(a={messageQueue:[],uploadQueue:[],isResolving:!1,isResolveRequestPending:!1},this._queueMap.set(n.url,a)),s=this._queueMap.get(n.url),o=new ra,l={requestId:t,params:r,state:ti.PENDING,deferred:o},function(h){return"fileInfoList"in h}(r)&&(u=z({uploadIndex:0,uploadCount:r.fileInfoList.length},i),l.multipleFileUploadInfo=u),s.messageQueue.push(l),this._uploadNextPendingItem(n),[2,o.promise]})})},e.prototype.cancel=function(n,t){var r,i,a=this._queueMap.get(n.url);if(a){var s=t?[a.messageQueue.find(function(_){return _.requestId===t})]:it([],Ge(a.messageQueue),!1);try{for(var o=ye(s),l=o.next();!l.done;l=o.next()){var u=l.value;if(u)switch(u.state){case ti.PENDING:if(u.state=ti.FAILED,u.error=Q.requestCanceled,u.multipleFileUploadInfo&&!u.multipleFileUploadInfo.isCopy){var c=u.multipleFileUploadInfo,h=c.uploadIndex,f=c.requestHandler,p=u.params.fileInfoList[h];f==null||f._triggerOnFileUploaded(u.requestId,h,p,Q.fileUploadCanceled)}this._resolveMessageQueue(n);break;case ti.UPLOADING:this._requestQueue.cancel(u.requestId),this._dispatcher.dispatch(new i0({requestId:u.requestId}))}}}catch(_){r={error:_}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}}else t&&(this._requestQueue.cancel(t),this._dispatcher.dispatch(new i0({requestId:t})))},e}(),Ww,Us,Jv={prevResultSize:0,nextResultSize:0,isInclusive:!1,reverse:!1,messageTypeFilter:Mi.ALL,customTypesFilter:void 0,senderUserIdsFilter:void 0,replyType:Yr.NONE,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1,showSubchannelMessagesOnly:!1},Yw=function(e){return Y("number",e.prevResultSize)&&Y("number",e.nextResultSize)&&Y("boolean",e.isInclusive)&&Y("boolean",e.reverse)&&Y("string",e.messageTypeFilter)&&Bt(Mi,e.messageTypeFilter)&&Ht("string",e.customTypesFilter,!0)&&Ht("string",e.senderUserIdsFilter,!0)&&Bt(Yr,e.replyType)&&Y("boolean",e.includeMetaArray)&&Y("boolean",e.includeReactions)&&Y("boolean",e.includeParentMessageInfo)&&Y("boolean",e.includeThreadInfo)&&Y("boolean",e.showSubchannelMessagesOnly)},k1={replyType:Yr.NONE,includeReactions:!1,includeThreadInfo:!1,includeMetaArray:!1,includeParentMessageInfo:!1},Qw=function(e){return Bt(Yr,e.replyType)&&Y("boolean",e.includeReactions)&&Y("boolean",e.includeMetaArray)&&Y("boolean",e.includeParentMessageInfo)&&Y("boolean",e.includeThreadInfo)};(function(e){e.MESSAGE="message"})(Ww||(Ww={})),function(e){e.INTERNAL_BACKSYNC="internal_backsync",e.INTERNAL_FILL_GAP="internal_fill_gap",e.EXTERNAL_LEGACY="external_legacy",e.EXTERNAL_COLLECTION="external_collection"}(Us||(Us={}));var x1,Fq=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.includeMetaArray,o=t.includeReactions,l=t.includeThreadInfo,u=t.includeParentMessageInfo,c=e.call(this)||this;return c.method=fe.GET,c.path="".concat(mn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(encodeURIComponent(a)),c.params={is_sdk:!0,with_sorted_meta_array:s,include_reactions_summary:o!=null&&o,include_thread_info:l,include_parent_message_info:u,include_poll_details:!0},c}return k(n,e),n}(ve),Bq=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=r?Di(t,z({},r)):null,i}return k(n,e),n}(_e),R_=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.timestamp,s=t.token,o=t.prevResultSize,l=t.nextResultSize,u=t.isInclusive,c=t.reverse,h=t.messageTypeFilter,f=t.customTypesFilter,p=t.senderUserIdsFilter,_=t.replyType,g=t.includeMetaArray,C=t.includeReactions,E=t.parentMessageId,y=t.includeThreadInfo,S=t.includeParentMessageInfo,I=t.showSubchannelMessagesOnly,w=t.checkingHasNext,R=t.checkingContinuousMessages,A=t.sdkSource,U=e.call(this)||this;return U.method=fe.GET,U.path="".concat(mn(r),"/").concat(encodeURIComponent(i),"/messages"),U.params=Ae($e({is_sdk:!0,prev_limit:o,next_limit:l,include:u,reverse:c,message_ts:a,message_id:s,message_type:h??null,custom_types:f,sender_ids:p,include_reply_type:_,with_sorted_meta_array:g,include_reactions_summary:C,parent_message_id:E,include_thread_info:y,include_parent_message_info:S,show_subchannel_message_only:I,include_poll_details:!0,checking_has_next:w,checking_continuous_messages:R,sdk_source:A})),U}return k(n,e),n}(ve),O_=function(e){function n(t,r){var i=e.call(this,t,r)||this;return r.is_continuous_messages!==void 0&&(i.isContinuousMessages=r.is_continuous_messages),r.has_next!==void 0&&(i.hasNext=r.has_next),i.messages=r.messages.map(function(a){return Di(t,a)}),i}return k(n,e),n}(_e),Hq=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.timestamp,s=t.token,o=t.replyType,l=t.includeMetaArray,u=t.includeReactions,c=t.includeThreadInfo,h=t.includeParentMessageInfo,f=e.call(this)||this;return f.method=fe.GET,f.path="".concat(mn(r),"/").concat(encodeURIComponent(i),"/messages/changelogs"),f.params={change_ts:a,token:s,with_sorted_meta_array:l,include_reactions_summary:u,include_thread_info:c,include_reply_type:o,include_parent_message_info:h,include_poll_details:!0},f}return k(n,e),n}(ve),Gq=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.updatedMessages=r.updated.map(function(a){return Di(t,a)}),i.deletedMessagesInfo=r.deleted.map(function(a){return{messageId:a.message_id,deletedAt:a.deleted_at}}),i.hasMore=r.has_more,i.nextToken=r.next,i.forceUseNextToken=r.force_use_next_token||!1,i}return k(n,e),n}(_e),$q=function(e){function n(t){var r=t.channelUrl,i=t.scheduledMessageId,a=e.call(this)||this;return a.method=fe.GET,a.path="".concat(qi,"/").concat(encodeURIComponent(r),"/scheduled_messages/").concat(encodeURIComponent(i)),a.params={},a}return k(n,e),n}(ve),Vq=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=r?Di(t,z({},r)):null,i}return k(n,e),n}(_e);(function(e){e.MUTED="muted",e.BANNED="banned"})(x1||(x1={}));var Xw=function(){function e(n){var t,r,i,a;this.restrictionType=null,Bt(x1,n.restriction_type)&&(this.restrictionType=n.restriction_type),this.description=(t=n.description)!==null&&t!==void 0?t:null,this.endAt=(i=(r=n.end_at)!==null&&r!==void 0?r:n.muted_end_at)!==null&&i!==void 0?i:-1,this.remainingDuration=(a=n.remaining_duration)!==null&&a!==void 0?a:-1}return e.payloadify=function(n){return Ae($e({restriction_type:n.restrictionType,description:n.description,end_at:n.endAt,remaining_duration:n.remainingDuration}))},e}(),Ld=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.restrictionInfo=new Xw(r),i}return k(n,e),n.payloadify=function(t){return Ae($e(z(z({},e.payloadify.call(this,t)),Xw.payloadify(t.restrictionInfo))))},n}(Gt),zq=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).isMuted=!1,a.isMuted=(i=r.is_muted)!==null&&i!==void 0&&i,a}return k(n,e),n}(Gt),Da=function(){function e(){this._onPending=vt,this._onFailed=vt,this._onSucceeded=vt}return e.prototype._trigger=function(n){switch(n==null?void 0:n.sendingStatus){case sn.PENDING:n.errorCode===0&&this._onPending(n);break;case sn.SCHEDULED:case sn.SUCCEEDED:this._onSucceeded(n)}},e.prototype._triggerFailed=function(n,t){switch(t==null?void 0:t.sendingStatus){case sn.FAILED:case sn.CANCELED:this._onFailed(n,t.scheduledInfo?null:t)}},e.prototype.onPending=function(n){return this._onPending=n,this},e.prototype.onFailed=function(n){return this._onFailed=n,this},e.prototype.onSucceeded=function(n){return this._onSucceeded=n,this},e}(),hE={data:void 0,customType:void 0,mentionType:Oi.USERS,mentionedUserIds:void 0,mentionedUsers:void 0,metaArrays:void 0,parentMessageId:void 0,isReplyToChannel:!1,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0,isPinnedMessage:!1,pollId:void 0},fE=function(e){return Y("string",e.data,!0)&&Y("string",e.customType,!0)&&Bt(Oi,e.mentionType)&&Ht("string",e.mentionedUserIds,!0)&&Ht(Gt,e.mentionedUsers,!0)&&Ht(pi,e.metaArrays,!0)&&Y("number",e.parentMessageId,!0)&&Y("boolean",e.isReplyToChannel)&&Bt(yo,e.pushNotificationDeliveryOption,!0)&&Y(js,e.appleCriticalAlertOptions,!0)&&Y("boolean",e.isPinnedMessage,!0)&&Y("number",e.pollId,!0)},Zw=function(e){return{isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption,pollId:e.pollId}},Qx=z(z({},hE),{message:"",mentionedMessageTemplate:void 0,translationTargetLanguages:void 0,extendedMessagePayload:void 0});function Xx(e){var n,t,r;return(n=e.messageParams)!==null&&n!==void 0?n:$e(z(z({},e),{mentionType:e.mentionType,mentionedUserIds:(t=e.mentionedUserIds)!==null&&t!==void 0?t:(r=e.mentionedUsers)===null||r===void 0?void 0:r.map(function(i){return i.userId}),mentionedMessageTemplate:e.mentionedMessageTemplate,translationTargetLanguages:Object.keys(e.translations),pushNotificationDeliveryOption:yo.DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1}))}var ud,P1=function(e){var n;return Ae($e({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,mentionedMessageTemplate:e.mentionedMessageTemplate,metaArrays:e.metaArrays,pollId:(n=e.poll)===null||n===void 0?void 0:n.id,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,message:e.message,translationTargetLanguages:Object.keys(e.translations),extendedMessagePayload:e.extendedMessagePayload}))},Zx=function(e){return fE(e)&&Y("string",e.message)&&Y("string",e.mentionedMessageTemplate,!0)&&Ht("string",e.translationTargetLanguages,!0)&&Y("object",e.extendedMessagePayload,!0)};(function(e){e.FILE="file",e.BLOB="blob",e.BLOB_LIKE_OBJECT="blobLikeObject",e.URL="url"})(ud||(ud={}));var _g=function(e){return typeof window<"u"&&"Blob"in window&&typeof Blob<"u"&&e instanceof Blob},Fb=function(e){return e===ud.BLOB||e===ud.FILE},Jw=function(e){return{file:e.file,fileKey:e.fileKey,fileType:e.fileType,isReplyToChannel:e.isReplyToChannel,pushNotificationDeliveryOption:e.pushNotificationDeliveryOption}},eR=z(z({},hE),{file:void 0,fileKey:void 0,fileUrl:void 0,fileName:void 0,fileType:void 0,fileSize:void 0,mimeType:void 0,thumbnailSizes:void 0,requireAuth:!1,message:void 0});function Jx(e){var n,t,r,i;return(n=e.messageParams)!==null&&n!==void 0?n:$e(z(z({},e),{fileUrl:e.plainUrl,fileName:e.name,fileSize:e.size,mimeType:e.type,mentionType:e.mentionType,mentionedUserIds:(t=e.mentionedUserIds)!==null&&t!==void 0?t:(r=e.mentionedUsers)===null||r===void 0?void 0:r.map(function(a){return a.userId}),pushNotificationDeliveryOption:yo.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:(i=e.thumbnails)===null||i===void 0?void 0:i.map(function(a){return{maxWidth:a.width,maxHeight:a.height}}),requireAuth:e.requireAuth,isPinnedMessage:!1,_thumbnails:e.thumbnails,message:e.message}))}var ep,F1=function(e,n){var t,r;return e.messageParams?(!e.url&&ai(n)&&(e.messageParams.file=n),e.messageParams):Ae($e({data:e.data,customType:e.customType,mentionType:e.mentionType,mentionedUsers:e.mentionedUsers,mentionedUserIds:e.mentionedUserIds,metaArrays:e.metaArrays,parentMessageId:e.parentMessageId,appleCriticalAlertOptions:e.appleCriticalAlertOptions,file:n,fileUrl:e.url,fileName:e.name,fileSize:e.size,mimeType:e.type,thumbnailSizes:(t=e.thumbnails)===null||t===void 0?void 0:t.map(function(i){return{maxWidth:i.width,maxHeight:i.height}}),message:e.message,pollId:(r=e.poll)===null||r===void 0?void 0:r.id}))},tR=function(e){return fE(e)&&(ai(e.file)||Y("string",e.fileUrl))&&Y("string",e.fileName,!0)&&Y("string",e.mimeType,!0)&&Y("number",e.fileSize,!0)&&Y("string",e.message,!0)&&(e.thumbnailSizes===null||e.thumbnailSizes===void 0||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every(function(n){return Y("object",n)&&n.maxWidth>0&&n.maxHeight>0}))},GN={data:void 0,customType:void 0,mentionType:Oi.USERS,mentionedUserIds:void 0,mentionedUsers:void 0,metaArrays:void 0,pushNotificationDeliveryOption:void 0,appleCriticalAlertOptions:void 0},$N=function(e){return Y("string",e.data,!0)&&Y("string",e.customType,!0)&&Bt(Oi,e.mentionType)&&Ht("string",e.mentionedUserIds,!0)&&Ht(Gt,e.mentionedUsers,!0)&&Ht(pi,e.metaArrays,!0)&&Bt(yo,e.pushNotificationDeliveryOption,!0)&&Y(js,e.appleCriticalAlertOptions,!0)},e4=z(z({},GN),{message:void 0,mentionedMessageTemplate:void 0,translationTargetLanguages:void 0,pollId:void 0}),t4=function(e){return $N(e)&&Y("string",e.mentionedMessageTemplate,!0)&&Y("string",e.message,!0)&&Ht("string",e.translationTargetLanguages,!0)&&Y("number",e.pollId,!0)},jq=z({},GN),qq=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.token,s=t.limit,o=e.call(this)||this;return o.method=fe.GET,o.path="".concat(mn(i),"/").concat(encodeURIComponent(r),"/operators"),o.params={token:a,limit:s},o}return k(n,e),n}(ve),Kq=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.operators=r.operators.map(function(a){return new Gt(t,a)}),i.token=r.next,i}return k(n,e),n}(_e),Wq=function(e){function n(t,r,i,a){return e.call(this,t,r,i,a)||this}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)},n.prototype.next=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:(t=[],this._hasNext?(this._isLoading=!0,r=q.of(this._iid).requestQueue,i=new qq(z(z({},this),{channelUrl:this.channelUrl,token:this._token})),[4,r.send(i)]):[3,2]):[3,5];case 1:return a=u.sent(),s=a.as(Kq),o=s.operators,l=s.token,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,o];case 2:return[2,t];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(el),Yq=function(e){function n(t,r,i,a){var s,o,l,u,c,h,f,p,_,g,C=this;return(C=e.call(this,t,r,i,a)||this).reverse=!1,C.messageTypeFilter=Mi.ALL,C.customTypesFilter=null,C.senderUserIdsFilter=null,C.replyType=Yr.NONE,C.includeMetaArray=!1,C.includeReactions=!1,C.includeParentMessageInfo=!1,C.includeThreadInfo=!1,C.showSubchannelMessagesOnly=!1,C._edge=Number.MAX_SAFE_INTEGER,C.reverse=(s=a.reverse)!==null&&s!==void 0&&s,C.messageTypeFilter=(o=a.messageTypeFilter)!==null&&o!==void 0?o:Mi.ALL,C.customTypesFilter=(l=a.customTypesFilter)!==null&&l!==void 0?l:null,C.senderUserIdsFilter=(u=a.senderUserIdsFilter)!==null&&u!==void 0?u:null,C.replyType=(c=a.replyType)!==null&&c!==void 0?c:Yr.NONE,C.includeMetaArray=(h=a.includeMetaArray)!==null&&h!==void 0&&h,C.includeReactions=(f=a.includeReactions)!==null&&f!==void 0&&f,C.includeParentMessageInfo=(p=a.includeParentMessageInfo)!==null&&p!==void 0&&p,C.includeThreadInfo=(_=a.includeThreadInfo)!==null&&_!==void 0&&_,C.showSubchannelMessagesOnly=(g=a.showSubchannelMessagesOnly)!==null&&g!==void 0&&g,C}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Y("boolean",this.reverse)&&Bt(Mi,this.messageTypeFilter)&&Bt(Yr,this.replyType)&&Ht("string",this.customTypesFilter,!0)&&Ht("string",this.senderUserIdsFilter,!0)&&Y("boolean",this.includeMetaArray)&&Y("boolean",this.includeReactions)&&Y("boolean",this.includeParentMessageInfo)&&Y("boolean",this.includeThreadInfo)&&Y("boolean",this.showSubchannelMessagesOnly)},n.prototype.load=function(){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,Wr.of(this._iid).getMessagesByTimestamp(this.channelUrl,this.channelType,this._edge,$e({prevResultSize:this.limit,nextResultSize:0,isInclusive:!1,reverse:this.reverse,messageTypeFilter:this.messageTypeFilter,customTypesFilter:this.customTypesFilter,replyType:this.replyType,senderUserIdsFilter:this.senderUserIdsFilter,includeReactions:this.includeReactions,includeMetaArray:this.includeMetaArray,includeParentMessageInfo:this.includeParentMessageInfo,includeThreadInfo:this.includeThreadInfo,showSubchannelMessagesOnly:this.showSubchannelMessagesOnly}))]):[3,2]:[3,5];case 1:return t=r.sent(),this._edge=Math.min.apply(Math,it([Number.MAX_SAFE_INTEGER],Ge(t.map(function(i){return i.createdAt})),!1)),this._hasNext=t.length>=this.limit,this._isLoading=!1,[2,t];case 2:return[2,[]];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(el),Qq=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.limit,o=t.token;return(r=e.call(this)||this).method=fe.GET,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/mute"),r.params={limit:s,token:o},r}return k(n,e),n}(ve),Xq=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.mutedUsers=[];var a=r.next,s=r.muted_list;return i.token=a,s&&s.length>0&&(i.mutedUsers=s.map(function(o){return new Ld(t,o)})),i}return k(n,e),n}(_e),Zq=function(e){function n(t,r,i,a){return e.call(this,t,r,i,a)||this}return k(n,e),n.prototype.next=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=q.of(this._iid).requestQueue,r=new Qq(z(z({},this),{token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(Xq),s=a.mutedUsers,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(el),Jq=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.limit,o=t.token;return(r=e.call(this)||this).method=fe.GET,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/ban"),r.params=Ae({limit:s,token:o}),r}return k(n,e),n}(ve),eK=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.bannedUsers=[];var a=r.next,s=r.banned_list;return i.token=a,s&&s.length>0&&(i.bannedUsers=s.map(function(o){return new Ld(t,o.user)})),i}return k(n,e),n}(_e),tK=function(e){function n(t,r,i,a){return e.call(this,t,r,i,a)||this}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)},n.prototype.next=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=q.of(this._iid).requestQueue,r=new Jq(z(z({},this),{token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(eK),s=a.bannedUsers,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(el);(function(e){e.SPAM="spam",e.HARASSING="harassing",e.SUSPICIOUS="suspicious",e.INAPPROPRIATE="inappropriate"})(ep||(ep={}));var nK=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.operatorUserIds;return(r=e.call(this)||this).method=fe.POST,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/operators"),r.params={operator_ids:s},r}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var rK=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.operatorUserIds;return(r=e.call(this)||this).method=fe.DELETE,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/operators"),r.params={operator_ids:s},r}return k(n,e),n}(ve);(function(e){function n(t,r){return e.call(this,t,r)||this}k(n,e)})(_e);var iK=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.userId;return(r=e.call(this)||this).method=fe.GET,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/mute/").concat(encodeURIComponent(s)),r}return k(n,e),n}(ve),aK=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.isMuted=!1,i.startAt=0,i.endAt=0;var a=r.is_muted,s=r.start_at,o=r.end_at,l=r.remaining_duration,u=r.description;return i.isMuted=a,i.startAt=s,i.endAt=o,i.remainingDuration=l,i.description=u,i}return k(n,e),n}(_e),nR=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.keys;return(r=e.call(this)||this).method=fe.GET,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={keys:s,include_ts:!0},r}return k(n,e),n}(ve),rR=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.metadata,s=r.ts;return i.metadata=a,i.ts=s,i}return k(n,e),n}(_e),sK=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.metadata;return(r=e.call(this)||this).method=fe.POST,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={metadata:s,include_ts:!0},r}return k(n,e),n}(ve),oK=function(e){function n(t,r){var i,a,s=this;return(s=e.call(this,t,r)||this).metaData=(i=r.metadata)!==null&&i!==void 0?i:{},s.ts=(a=r.ts)!==null&&a!==void 0?a:null,s}return k(n,e),n}(_e),lK=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.metadata,o=t.upsert;return(r=e.call(this)||this).method=fe.PUT,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={metadata:s,include_ts:!0,upsert:o!=null&&o},r}return k(n,e),n}(ve),uK=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.metadata,s=r.ts;return i.metadata=a,i.ts=s,i}return k(n,e),n}(_e),n4=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return i.data&&(a.created=i.data.created,a.updated=i.data.updated,a.deleted=i.data.deleted),a}return k(n,e),n}(Qn),cK=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.key;return(r=e.call(this)||this).method=fe.DELETE,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/metadata/").concat(s),r.params={include_ts:!0},r}return k(n,e),n}(ve),dK=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.ts;return i.ts=a,i}return k(n,e),n}(_e),hK=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType;return(r=e.call(this)||this).method=fe.DELETE,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/metadata"),r.params={include_ts:!0},r}return k(n,e),n}(ve),fK=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.ts;return i.ts=a,i}return k(n,e),n}(_e),iR=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.keys;return(r=e.call(this)||this).method=fe.GET,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={keys:s},r}return k(n,e),n}(ve),aR=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.metaCounter=r,i}return k(n,e),n}(_e),vK=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.metaCounter;return(r=e.call(this)||this).method=fe.POST,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={metacounter:s},r}return k(n,e),n}(ve),pK=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.metaCounter=r,i}return k(n,e),n}(_e),Bb=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.metaCounter,o=t.upsert,l=o!==void 0&&o,u=t.mode,c=u===void 0?"set":u;return(r=e.call(this)||this).method=fe.PUT,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={metacounter:s,upsert:l,mode:c},r}return k(n,e),n}(ve),Hb=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.metaCounter=r,i}return k(n,e),n}(_e),r4=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return i.data&&(a.created=i.data.created,a.updated=i.data.updated,a.deleted=i.data.deleted),a}return k(n,e),n}(Qn),mK=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.key;return(r=e.call(this)||this).method=fe.DELETE,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/metacounter/").concat(s),r.params={},r}return k(n,e),n}(ve);(function(e){function n(t,r){return e.call(this,t,r)||this}k(n,e)})(_e);var _K=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType;return(r=e.call(this)||this).method=fe.DELETE,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/metacounter"),r.params={},r}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var gK=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.userId,o=t.seconds,l=t.description;return(r=e.call(this)||this).method=fe.POST,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/mute"),r.params={user_id:s,seconds:o,description:l},r}return k(n,e),n}(ve);(function(e){function n(t,r){return e.call(this,t,r)||this}k(n,e)})(_e);var i4=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new Ld(t,i.data),a}return k(n,e),n}(Qn),EK=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.userId;return(r=e.call(this)||this).method=fe.DELETE,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/mute/").concat(encodeURIComponent(s)),r}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var a4=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new Ld(t,i.data),a}return k(n,e),n}(Qn),yK=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.userId,o=t.seconds,l=t.description;return(r=e.call(this)||this).method=fe.POST,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/ban"),r.params=Ae({user_id:s,seconds:o,description:l}),r}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var s4=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new Ld(t,i.data),i.data.member_count&&(a.memberCount=i.data.member_count),i.data.joined_member_count&&(a.joinedMemberCount=i.data.joined_member_count),a}return k(n,e),n}(Qn),bK=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.userId;return(r=e.call(this)||this).method=fe.DELETE,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/ban/").concat(encodeURIComponent(s)),r}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var o4=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new Ld(t,i.data),a}return k(n,e),n}(Qn),sR=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.freezing;return(r=e.call(this)||this).method=fe.PUT,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/freeze"),r.params={freeze:s},r}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var l4=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.freeze=i.data.freeze,a}return k(n,e),n}(Qn),VN=function(e){return e instanceof Bh?e._custom?"custom":e.name:e},zN=function(e){if(e instanceof Bh&&e._custom)return e.name},CK=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.category,o=t.userId,l=t.description;return(r=e.call(this)||this).method=fe.POST,r.path="".concat(Yk(a),"/").concat(encodeURIComponent(i)),r.params=Ae({report_category:VN(s),reporting_user_id:o,report_description:l,custom_report_category_name:zN(s)}),r}return k(n,e),n}(ve),SK=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.category,o=t.userId,l=t.offendingUserId,u=t.description;return(r=e.call(this)||this).method=fe.POST,r.path="".concat(T1,"/users/").concat(l),r.params=Ae({channel_url:i,channel_type:a===Kt.OPEN?"open_channels":"group_channels",report_category:VN(s),reporting_user_id:o,report_description:u,custom_report_category_name:zN(s)}),r}return k(n,e),n}(ve),TK=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType,s=t.category,o=t.userId,l=t.offendingUserId,u=t.messageId,c=t.description;return(r=e.call(this)||this).method=fe.POST,r.path="".concat(Yk(a),"/").concat(encodeURIComponent(i),"/messages/").concat(u),r.params=Ae({report_category:VN(s),reporting_user_id:o,report_description:c,offending_user_id:l,custom_report_category_name:zN(s)}),r}return k(n,e),n}(ve),NK=function(e){function n(t){var r=[];return t.mentionType===Oi.USERS&&(t.mentionedUserIds?r=t.mentionedUserIds:t.mentionedUsers&&(r=t.mentionedUsers.map(function(i){return i.userId}))),e.call(this,{code:"MESG",ackRequired:!0,payload:Ae($e({channel_url:t.channelUrl,message:t.message,data:t.data,custom_type:t.customType,metaarray:t.metaArrays,mention_type:t.mentionType,mentioned_user_ids:r,mentioned_message_template:t.mentionedMessageTemplate,target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption&&t.pushNotificationDeliveryOption!==yo.DEFAULT?t.pushNotificationDeliveryOption:void 0,apple_critical_alert_options:t.appleCriticalAlertOptions,silent:t.silent,reply_to_channel:t.isReplyToChannel,parent_message_id:t.parentMessageId?t.parentMessageId:null,req_id:t.reqId,poll_id:t.pollId,pin_message:t.isPinnedMessage,extended_message_payload:t.extendedMessagePayload}))})||this}return k(n,e),n}(Ri),jN=function(e){function n(t,r,i){var a,s,o,l,u=this;(u=e.call(this,t,"MESG",i)||this).message=new Ni(t,i);var c=q.of(t).sdkState;return u.isMentioned=Xh(u.message.mentionType,(o=(a=u.message.mentionedUserIds)!==null&&a!==void 0?a:(s=u.message.mentionedUsers)===null||s===void 0?void 0:s.map(function(h){return h.userId}))!==null&&o!==void 0?o:[],c.userId),u.forceUpdateLastMessage=(l=i.force_update_last_message)!==null&&l!==void 0&&l,u}return k(n,e),n}(Qn),oR=function(e){function n(t){var r=null;return t.mentionType===Oi.USERS&&(t.mentionedUserIds?r=t.mentionedUserIds:t.mentionedUsers&&(r=t.mentionedUsers.map(function(i){return i.userId}))),e.call(this,{code:"MEDI",ackRequired:!0,payload:Ae($e({channel_url:t.channelUrl,msg_id:t.messageId,message:t.message,data:t.data,custom_type:t.customType,metaarray:t.metaArrayParams,mention_type:t.mentionType,mentioned_user_ids:r,mentioned_message_template:t.mentionedMessageTemplate,apple_critical_alert_options:t.appleCriticalAlertOptions?js.payloadify(t.appleCriticalAlertOptions):null,poll_id:t.pollId}))})||this}return k(n,e),n}(Ri),v0=function(e){function n(t,r,i){var a,s,o,l,u,c=this;(c=e.call(this,t,"MEDI",i)||this).message=new Ni(t,i);var h=q.of(t).sdkState;return c.mentionCountChange=MN({mentionType:(a=i.old_values)===null||a===void 0?void 0:a.mention_type,mentionedUserIds:(o=(s=i.old_values)===null||s===void 0?void 0:s.mentioned_user_ids)!==null&&o!==void 0?o:[]},$e({mentionType:c.message.mentionType,mentionedUserIds:(l=c.message.mentionedUserIds)!==null&&l!==void 0?l:(u=c.message.mentionedUsers)===null||u===void 0?void 0:u.map(function(f){return f.userId})}),h.userId),c}return k(n,e),n}(Qn),lR=function(e){function n(t){var r=null;return t.mentionType===Oi.USERS&&(t.mentionedUserIds?r=t.mentionedUserIds:t.mentionedUsers&&(r=t.mentionedUsers.map(function(i){return i.userId}))),e.call(this,{code:"FEDI",ackRequired:!0,payload:Ae($e({channel_url:t.channelUrl,msg_id:t.messageId,data:t.data,custom_type:t.customType,metaarray:t.metaArrayParams,mention_type:t.mentionType,mentioned_user_ids:r,apple_critical_alert_options:t.appleCriticalAlertOptions}))})||this}return k(n,e),n}(Ri),p0=function(e){function n(t,r,i){var a,s,o,l,u,c=this;(c=e.call(this,t,"FEDI",i)||this).message=new Rr(t,i);var h=q.of(t).sdkState;return c.mentionCountChange=MN({mentionType:(a=i.old_values)===null||a===void 0?void 0:a.mention_type,mentionedUserIds:(o=(s=i.old_values)===null||s===void 0?void 0:s.mentioned_user_ids)!==null&&o!==void 0?o:[]},$e({mentionType:c.message.mentionType,mentionedUserIds:(l=c.message.mentionedUserIds)!==null&&l!==void 0?l:(u=c.message.mentionedUsers)===null||u===void 0?void 0:u.map(function(f){return f.userId})}),h.userId),c}return k(n,e),n}(Qn),IK=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.reactionKey,o=e.call(this)||this;return o.method=fe.POST,o.path="".concat(mn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/reactions"),o.params={reaction:s},o}return k(n,e),n}(ve),MK=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.reactionEvent=new BN(r),i}return k(n,e),n}(_e),AK=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.reactionKey,o=e.call(this)||this;return o.method=fe.DELETE,o.path="".concat(mn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/reactions"),o.params={reaction:s},o}return k(n,e),n}(ve),wK=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.reactionEvent=new BN(z({},r)),i}return k(n,e),n}(_e),RK=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=t.translationTargetLanguages,o=e.call(this)||this;return o.method=fe.POST,o.path="".concat(mn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(encodeURIComponent(a),"/translation"),o.params={target_langs:s},o}return k(n,e),n}(ve),OK=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=new Ni(t,r),i}return k(n,e),n}(_e),DK=function(e){function n(t){var r,i=this;i=e.call(this)||this;var a=[];t.mentionType===Oi.USERS&&(t.mentionedUserIds?a=t.mentionedUserIds:t.mentionedUsers&&(a=t.mentionedUsers.map(function(l){return l.userId})));var s=t.channelType,o=t.channelUrl;return i.method=fe.POST,i.path="".concat(mn(s),"/").concat(encodeURIComponent(o),"/scheduled_messages"),i.params=Ae($e({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:Qh.USER,message:t.message,custom_type:t.customType,data:t.data,mention_type:t.mentionType,mentioned_user_ids:a,sorted_metaarray:(r=t.metaArrays)===null||r===void 0?void 0:r.map(function(l){return pi.payloadify(l)}),apple_critical_alert_options:t.appleCriticalAlertOptions?js.payloadify(t.appleCriticalAlertOptions):null,target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption})),i}return k(n,e),n}(ve),u4=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=new Ni(t,r),i}return k(n,e),n}(_e),UK=function(e){function n(t){var r,i,a=this;a=e.call(this)||this;var s=[];t.mentionType===Oi.USERS&&(t.mentionedUserIds?s=t.mentionedUserIds:t.mentionedUsers&&(s=t.mentionedUsers.map(function(u){return u.userId})));var o=t.channelType,l=t.channelUrl;return a.method=fe.POST,a.path="".concat(mn(o),"/").concat(encodeURIComponent(l),"/scheduled_messages"),a.params=$e({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:Qh.FILE,url:t.fileUrl,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,thumbnails:(r=t._thumbnails)===null||r===void 0?void 0:r.map(function(u){return Wl.payloadify(u)}),custom_type:t.customType,data:t.data,require_auth:t.requireAuth,mention_type:t.mentionType,mentioned_user_ids:s,sorted_metaarray:(i=t.metaArrays)===null||i===void 0?void 0:i.map(function(u){return pi.payloadify(u)}),apple_critical_alert_options:t.appleCriticalAlertOptions?js.payloadify(t.appleCriticalAlertOptions):null,push_option:t.pushNotificationDeliveryOption}),a}return k(n,e),n}(ve),LK=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=new Rr(t,r),i}return k(n,e),n}(_e),kK=function(e){function n(t){var r=t.pollId,i=t.title,a=t.data,s=t.allowUserSuggestion,o=t.allowMultipleVotes,l=t.closeAt,u=e.call(this)||this;return u.method=fe.PUT,u.path="".concat(Co,"/").concat(encodeURIComponent(r)),u.params={title:i,data:a,allow_user_suggestion:s,allow_multiple_votes:o,close_at:l},u}return k(n,e),n}(ve),xK=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new zs(t,r),i}return k(n,e),n}(_e),PK=function(e){function n(t){var r=t.pollId,i=e.call(this)||this;return i.method=fe.DELETE,i.path="".concat(Co,"/").concat(encodeURIComponent(r)),i}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var FK=function(e){function n(t){var r=t.pollId,i=e.call(this)||this;return i.method=fe.PUT,i.path="".concat(Co,"/").concat(encodeURIComponent(r),"/close"),i}return k(n,e),n}(ve),BK=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new zs(t,r),i}return k(n,e),n}(_e),HK=function(e){function n(t){var r=t.channelUrl,i=t.channelType,a=t.pollId,s=t.optionText,o=e.call(this)||this;return o.method=fe.POST,o.path="".concat(Co,"/").concat(encodeURIComponent(a),"/options"),o.params={channel_url:r,channel_type:i,text:s},o}return k(n,e),n}(ve),GK=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new zs(t,r),i}return k(n,e),n}(_e),$K=function(e){function n(t){var r=t.pollId,i=t.pollOptionId,a=t.optionText,s=e.call(this)||this;return s.method=fe.PUT,s.path="".concat(Co,"/").concat(encodeURIComponent(r),"/options/").concat(encodeURIComponent(i)),s.params={text:a},s}return k(n,e),n}(ve),VK=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.poll=new zs(t,r),i}return k(n,e),n}(_e),zK=function(e){function n(t){var r=t.pollId,i=t.pollOptionId,a=e.call(this)||this;return a.method=fe.DELETE,a.path="".concat(Co,"/").concat(encodeURIComponent(r),"/options/").concat(encodeURIComponent(i)),a}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var jK=function(e){function n(t){var r=t.reqId,i=t.channelType,a=t.channelUrl,s=t.pollId,o=t.pollOptionIds;return e.call(this,{code:"VOTE",ackRequired:!0,payload:Ae({req_id:r,channel_type:i===Kt.OPEN?"open_channels":"group_channels",channel_url:a,poll_id:s,option_ids:o})})||this}return k(n,e),n}(Ri),qN=function(e){function n(t,r,i){var a=e.call(this,t,"VOTE",i)||this;return a.event=new oq(i),a.channelUrl=i.channel_url,a.channelType=i.channel_type,a}return k(n,e),n}(Qn),c4=100,d4="GroupChannel",qK="url",h4=100,KN="Message",KK="messageId",f4="NotificationMessage",WK="notificationId",YK="Poll",QK="pollId",XK="FeedChannel",ZK="url",v4="UserInfo",JK="userId";function eW(e){var n,t,r;return(n=e.messageParams)!==null&&n!==void 0?n:$e(z(z({},e),{isReplyToChannel:!1,mentionedUserIds:(t=e.mentionedUserIds)!==null&&t!==void 0?t:(r=e.mentionedUsers)===null||r===void 0?void 0:r.map(function(i){return i.userId}),pushNotificationDeliveryOption:yo.DEFAULT,isPinnedMessage:!1,fileInfoList:e.fileInfoList.map(function(i){var a;return{fileUrl:i.plainUrl,fileName:i.fileName,fileSize:i.fileSize,mimeType:i.mimeType,thumbnailSizes:(a=i.thumbnails)===null||a===void 0?void 0:a.map(function(s){return{maxWidth:s.width,maxHeight:s.height}}),_thumbnails:i.thumbnails,_uploadedMetaData:{requireAuth:i._requireAuth,isUploaded:!0}}})}))}var tW=z(z({},hE),{fileInfoList:[],message:""}),nW=function(e){return(ai(e.file)||Y("string",e.fileUrl))&&Y("string",e.fileName,!0)&&Y("string",e.mimeType,!0)&&Y("number",e.fileSize,!0)&&(e.thumbnailSizes===void 0||Array.isArray(e.thumbnailSizes)&&e.thumbnailSizes.every(function(n){return n.maxWidth>0&&n.maxHeight>0}))},gg=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t._onFileUploaded=vt,t}return k(n,e),n.prototype._triggerOnFileUploaded=function(t,r,i,a){this._onFileUploaded(t,r,i,a)},n.prototype.onFileUploaded=function(t){return this._onFileUploaded=t,this},n.prototype.onPending=function(t){return e.prototype.onPending.call(this,t),this},n.prototype.onFailed=function(t){return e.prototype.onFailed.call(this,t),this},n.prototype.onSucceeded=function(t){return e.prototype.onSucceeded.call(this,t),this},n}(Da),rW=function(e){function n(t,r){var i=e.call(this,t)||this;return i.message=null,i.message=Di(t,r.message),i}return k(n,e),n}(Ur),iW=function(e){function n(t){var r=this,i=t.channelType,a=t.channelUrl,s=t.limit,o=t.token,l=t.includeReactions,u=t.includeMetaArray,c=t.includeParentMessageInfo,h=t.includeThreadInfo,f=t.includePollDetails;return(r=e.call(this)||this).method=fe.GET,r.path="".concat(mn(i),"/").concat(encodeURIComponent(a),"/pinned_messages"),r.params=Ae({limit:s,token:o,include_reactions_summary:l,with_sorted_meta_array:u,include_thread_info:h,include_parent_message_info:c,include_poll_details:f}),r}return k(n,e),n}(ve),aW=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.pinned_messages,s=r.has_more,o=r.next;return i.pinnedMessages=a.map(function(l){return new rW(t,l)}),i.hasMore=s,i.token=o,i}return k(n,e),n}(_e),sW=function(e){function n(t,r,i,a){var s=e.call(this,t,r,i,a)||this;return s.includeMetaArray=a.includeMetaArray,s.includeReactions=a.includeReactions,s.includeParentMessageInfo=a.includeParentMessageInfo,s.includeThreadInfo=a.includeThreadInfo,s.includePollDetails=a.includePollDetails,s}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Y("boolean",this.includeMetaArray,!0)&&Y("boolean",this.includeReactions,!0)&&Y("boolean",this.includeParentMessageInfo,!0)&&Y("boolean",this.includeThreadInfo,!0)&&Y("boolean",this.includePollDetails,!0)},n.prototype.next=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=q.of(this._iid).requestQueue,r=new iW(z(z({},this),{token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=u.sent(),a=i.as(aW),s=a.pinnedMessages,o=a.hasMore,l=a.token,this._token=l,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(el),oW=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=e.call(this)||this;return s.method=fe.POST,s.path="".concat(mn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/pin"),s}return k(n,e),n}(ve);(function(e){function n(t,r){return e.call(this,t,r)||this}k(n,e)})(_e);var lW=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.messageId,s=e.call(this)||this;return s.method=fe.DELETE,s.path="".concat(mn(r),"/").concat(encodeURIComponent(i),"/messages/").concat(a,"/pin"),s}return k(n,e),n}(ve);(function(e){function n(t,r){return e.call(this,t,r)||this}k(n,e)})(_e);var Ci,uW=2;(function(e){e.SEND="send",e.RESEND="resend",e.COPY="copy"})(Ci||(Ci={}));var ar,m0=function(e){function n(t,r){var i,a,s,o,l,u,c,h=this;return(h=e.call(this,t)||this)._name="",h._createdAt=0,h.pinnedMessageIds=[],h.channelType=Kt.BASE,h.coverUrl="",h.customType="",h.data="",h.isFrozen=!1,h.isEphemeral=!1,h.creator=null,h._messageCollectionLastAccessedAt=0,h._url=r.channel_url,h._name=(i=r.name)!==null&&i!==void 0?i:"",h._createdAt=1e3*r.created_at,h.coverUrl=(a=r.cover_url)!==null&&a!==void 0?a:"",h.customType=(s=r.custom_type)!==null&&s!==void 0?s:"",h.data=(o=r.data)!==null&&o!==void 0?o:"",h.isFrozen=(l=r.freeze)!==null&&l!==void 0&&l,h.isEphemeral=(u=r.is_ephemeral)!==null&&u!==void 0&&u,h.creator=r.created_by?new Gt(h._iid,r.created_by):null,r.metadata&&Object.keys(r.metadata).length>0&&r.ts?(h._cachedMetaData=new Map,Object.keys(r.metadata).forEach(function(f){h._cachedMetaData.set(f,{value:r.metadata[f],isRemoved:!1,updatedAt:r.ts})})):typeof r.metadata=="string"&&(h._cachedMetaData=new Map(Object.entries(JSON.parse(r.metadata)))),h.pinnedMessageIds=(c=r.pinned_message_ids)!==null&&c!==void 0?c:[],h}return k(n,e),Object.defineProperty(n.prototype,"url",{get:function(){return this._url},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"name",{get:function(){return this._name},set:function(t){this._name=t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"createdAt",{get:function(){return this._createdAt},enumerable:!1,configurable:!0}),n.prototype.toJSON=function(){return z(z({},this),{url:this._url,name:this._name,createdAt:this._createdAt})},n.payloadify=function(t,r){r===void 0&&(r=!1);var i=z(z({},e.payloadify.call(this,t)),{channel_url:t.url,name:t.name,cover_url:t.coverUrl,custom_type:t.customType,data:t.data,freeze:t.isFrozen,is_ephemeral:t.isEphemeral,created_by:t.creator?Gt.payloadify(t.creator):null,created_at:t.createdAt/1e3,metadata:t.cachedMetaData,pinned_message_ids:t.pinnedMessageIds});return r?i:Ae($e(i))},n.prototype.isGroupChannel=function(){return this.channelType===Kt.GROUP},n.prototype.isOpenChannel=function(){return this.channelType===Kt.OPEN},n.prototype.isFeedChannel=function(){return this.channelType===Kt.FEED},Object.defineProperty(n.prototype,"cachedMetaData",{get:function(){var t={};return this._cachedMetaData&&this._cachedMetaData.forEach(function(r,i){r.isRemoved||(t[i]=r.value)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"messageCollectionLastAccessedAt",{get:function(){return this._messageCollectionLastAccessedAt},enumerable:!1,configurable:!0}),n.prototype._serializeCachedMetaData=function(){return this._cachedMetaData?{cachedMetaData:JSON.stringify(Object.fromEntries(this._cachedMetaData))}:{}},n.prototype._updateMessageCollectionLastAccessedAt=function(){this._messageCollectionLastAccessedAt=Date.now()},n.prototype._update=function(t){Object.assign(this,t)},n.prototype._upsertCachedMetaData=function(t,r){var i=this;Object.keys(t).forEach(function(a){i._cachedMetaData||(i._cachedMetaData=new Map);var s=i._cachedMetaData.get(a);(!s||s.updatedAt<=r)&&i._cachedMetaData.set(a,{value:t[a],isRemoved:!1,updatedAt:r})})},n.prototype._updateCachedMetaData=function(t,r){var i=this,a=!1;return this._cachedMetaData?this._cachedMetaData.forEach(function(s,o){var l;s.updatedAt<=r&&(i._cachedMetaData.set(o,{value:(l=t[o])!==null&&l!==void 0?l:s.value,isRemoved:!t[o],updatedAt:r}),a=!0)}):(this._cachedMetaData=new Map,Object.keys(t).forEach(function(s){i._cachedMetaData.set(s,{value:t[s],isRemoved:!1,updatedAt:r})}),a=!0),{isUpdated:a}},n.prototype._removeFromCachedMetaData=function(t,r){var i=this;this._cachedMetaData&&t.forEach(function(a){var s=i._cachedMetaData.get(a);s&&s.updatedAt<r&&(s.isRemoved=!0,s.updatedAt=r)})},n.prototype._clearCachedMetaData=function(){this._cachedMetaData&&this._cachedMetaData.clear()},n.prototype._runIfHandleableWithGroupChannel=function(t){this.isGroupChannel()?t(this):this.isFeedChannel()&&t(this.groupChannel)},n.prototype._generateRequestId=function(){return"rq-".concat(_s())},n.prototype.isIdentical=function(t){return t&&this.url===t.url},n.prototype.isEqual=function(t){return $k(this,t)},n.prototype.createOperatorListQuery=function(t){return t===void 0&&(t={}),new Wq(this._iid,this.url,this.channelType,t)},n.prototype.createMutedUserListQuery=function(t){return t===void 0&&(t={}),new Zq(this._iid,this.url,this.channelType,t)},n.prototype.createBannedUserListQuery=function(t){return t===void 0&&(t={}),new tK(this._iid,this.url,this.channelType,t)},n.prototype.createPreviousMessageListQuery=function(t){return t===void 0&&(t={}),new Yq(this._iid,this.url,this.channelType,t)},n.prototype.createPinnedMessageListQuery=function(t){return t===void 0&&(t={}),new sW(this._iid,this.url,this.channelType,t)},n.prototype.addOperators=function(t){return N(this,void 0,void 0,function(){var r,i;return T(this,function(a){switch(a.label){case 0:return me(Ht("string",t)).throw(Q.invalidParameters),r=q.of(this._iid).requestQueue,i=new nK({channelUrl:this.url,channelType:this.channelType,operatorUserIds:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.removeOperators=function(t){return N(this,void 0,void 0,function(){var r,i;return T(this,function(a){switch(a.label){case 0:return me(Ht("string",t)).throw(Q.invalidParameters),r=q.of(this._iid).requestQueue,i=new rK({channelUrl:this.url,channelType:this.channelType,operatorUserIds:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.getMyMutedInfo=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,c,h,f;return T(this,function(p){switch(p.label){case 0:return t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new iK({channelUrl:this.url,channelType:this.channelType,userId:r.userId}),[4,i.send(a)];case 1:return s=p.sent(),o=s.as(aK),l=o.isMuted,u=o.startAt,c=o.endAt,h=o.remainingDuration,f=o.description,[2,{isMuted:l,startAt:u,endAt:c,remainingDuration:h,description:f}]}})})},n.prototype.getMetaData=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:return me(Ht("string",t)).throw(Q.invalidParameters),r=q.of(this._iid).requestQueue,i=new nR({channelUrl:this.url,channelType:this.channelType,keys:t}),[4,r.send(i)];case 1:return a=u.sent(),s=a.as(rR),o=s.metadata,l=s.ts,this._upsertCachedMetaData(o,l),[2,o]}})})},n.prototype.getAllMetaData=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return t=q.of(this._iid).requestQueue,r=new nR({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,t.send(r)];case 1:return i=l.sent(),a=i.as(rR),s=a.metadata,o=a.ts,this._updateCachedMetaData(s,o),[2,s]}})})},n.prototype.createMetaData=function(t){return N(this,void 0,void 0,function(){var r,i,a,s;return T(this,function(o){switch(o.label){case 0:return r=q.of(this._iid).requestQueue,i=new sK({channelUrl:this.url,channelType:this.channelType,metadata:t}),[4,r.send(i)];case 1:return a=o.sent(),s=a.as(oK).metaData,this._upsertCachedMetaData(s,0),[2,s]}})})},n.prototype.updateMetaData=function(t,r){return r===void 0&&(r=!1),N(this,void 0,void 0,function(){var i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return i=q.of(this._iid).requestQueue,a=new lK({channelUrl:this.url,channelType:this.channelType,metadata:t,upsert:r}),[4,i.send(a)];case 1:return s=c.sent(),o=s.as(uK),l=o.metadata,u=o.ts,this._upsertCachedMetaData(l,u),[2,l]}})})},n.prototype.deleteMetaData=function(t){return N(this,void 0,void 0,function(){var r,i,a,s;return T(this,function(o){switch(o.label){case 0:return me(Y("string",t)).throw(Q.invalidParameters),r=q.of(this._iid).requestQueue,i=new cK({channelUrl:this.url,channelType:this.channelType,key:t}),[4,r.send(i)];case 1:return a=o.sent(),s=a.as(dK).ts,this._removeFromCachedMetaData([t],s),[2]}})})},n.prototype.deleteAllMetaData=function(){return N(this,void 0,void 0,function(){var t,r,i,a;return T(this,function(s){switch(s.label){case 0:return t=q.of(this._iid).requestQueue,r=new hK({channelUrl:this.url,channelType:this.channelType}),[4,t.send(r)];case 1:return i=s.sent(),a=i.as(fK).ts,this._removeFromCachedMetaData(it([],Ge(this._cachedMetaData.keys()),!1),a),[2]}})})},n.prototype.getMetaCounters=function(t){return N(this,void 0,void 0,function(){var r,i,a;return T(this,function(s){switch(s.label){case 0:return me(Ht("string",t)).throw(Q.invalidParameters),r=q.of(this._iid).requestQueue,i=new iR({channelUrl:this.url,channelType:this.channelType,keys:t}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(aR).metaCounter]}})})},n.prototype.getAllMetaCounters=function(){return N(this,void 0,void 0,function(){var t,r,i;return T(this,function(a){switch(a.label){case 0:return t=q.of(this._iid).requestQueue,r=new iR({channelUrl:this.url,channelType:this.channelType,keys:[]}),[4,t.send(r)];case 1:return i=a.sent(),[2,i.as(aR).metaCounter]}})})},n.prototype.createMetaCounters=function(t){return N(this,void 0,void 0,function(){var r,i,a;return T(this,function(s){switch(s.label){case 0:return r=q.of(this._iid).requestQueue,i=new vK({channelUrl:this.url,channelType:this.channelType,metaCounter:t}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(pK).metaCounter]}})})},n.prototype.updateMetaCounters=function(t,r){return r===void 0&&(r=!1),N(this,void 0,void 0,function(){var i,a,s;return T(this,function(o){switch(o.label){case 0:return i=q.of(this._iid).requestQueue,a=new Bb({channelUrl:this.url,channelType:this.channelType,metaCounter:t,upsert:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(Hb).metaCounter]}})})},n.prototype.increaseMetaCounters=function(t){return N(this,void 0,void 0,function(){var r,i,a;return T(this,function(s){switch(s.label){case 0:return r=q.of(this._iid).requestQueue,i=new Bb({channelUrl:this.url,channelType:this.channelType,metaCounter:t,upsert:!1,mode:"increase"}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(Hb).metaCounter]}})})},n.prototype.decreaseMetaCounters=function(t){return N(this,void 0,void 0,function(){var r,i,a;return T(this,function(s){switch(s.label){case 0:return r=q.of(this._iid).requestQueue,i=new Bb({channelUrl:this.url,channelType:this.channelType,metaCounter:t,upsert:!1,mode:"decrease"}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(Hb).metaCounter]}})})},n.prototype.deleteMetaCounter=function(t){return N(this,void 0,void 0,function(){var r,i;return T(this,function(a){switch(a.label){case 0:return me(Y("string",t)).throw(Q.invalidParameters),r=q.of(this._iid).requestQueue,i=new mK({channelUrl:this.url,channelType:this.channelType,key:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.deleteAllMetaCounters=function(){return N(this,void 0,void 0,function(){var t,r;return T(this,function(i){switch(i.label){case 0:return t=q.of(this._iid).requestQueue,r=new _K({channelUrl:this.url,channelType:this.channelType}),[4,t.send(r)];case 1:return i.sent(),[2]}})})},n.prototype.muteUser=function(t,r,i){return N(this,void 0,void 0,function(){return T(this,function(a){return[2,this.muteUserWithUserId(t.userId,r,i)]})})},n.prototype.muteUserWithUserId=function(t,r,i){return N(this,void 0,void 0,function(){var a,s;return T(this,function(o){switch(o.label){case 0:return me(Y("string",t)&&Y("number",r,!0)&&Y("string",i,!0)).throw(Q.invalidParameters),a=q.of(this._iid).requestQueue,s=new gK({channelUrl:this.url,channelType:this.channelType,userId:t,seconds:r,description:i}),[4,a.send(s)];case 1:return o.sent(),[2]}})})},n.prototype.unmuteUser=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){return[2,this.unmuteUserWithUserId(t.userId)]})})},n.prototype.unmuteUserWithUserId=function(t){return N(this,void 0,void 0,function(){var r,i;return T(this,function(a){switch(a.label){case 0:return me(Y("string",t)).throw(Q.invalidParameters),r=q.of(this._iid).requestQueue,i=new EK({channelUrl:this.url,channelType:this.channelType,userId:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.banUser=function(t,r,i){return N(this,void 0,void 0,function(){return T(this,function(a){return[2,this.banUserWithUserId(t.userId,r,i)]})})},n.prototype.banUserWithUserId=function(t,r,i){return N(this,void 0,void 0,function(){var a,s;return T(this,function(o){switch(o.label){case 0:return me(Y("string",t)&&Y("number",r,!0)&&Y("string",i,!0)).throw(Q.invalidParameters),a=q.of(this._iid).requestQueue,s=new yK({channelUrl:this.url,channelType:this.channelType,userId:t,seconds:r,description:i}),[4,a.send(s)];case 1:return o.sent(),[2]}})})},n.prototype.unbanUser=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){return[2,this.unbanUserWithUserId(t.userId)]})})},n.prototype.unbanUserWithUserId=function(t){return N(this,void 0,void 0,function(){var r,i;return T(this,function(a){switch(a.label){case 0:return me(Y("string",t)).throw(Q.invalidParameters),r=q.of(this._iid).requestQueue,i=new bK({channelUrl:this.url,channelType:this.channelType,userId:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.freeze=function(){return N(this,void 0,void 0,function(){var t,r;return T(this,function(i){switch(i.label){case 0:return t=q.of(this._iid).requestQueue,r=new sR({channelUrl:this.url,channelType:this.channelType,freezing:!0}),[4,t.send(r)];case 1:return i.sent(),this.isFrozen=!0,[2]}})})},n.prototype.unfreeze=function(){return N(this,void 0,void 0,function(){var t,r;return T(this,function(i){switch(i.label){case 0:return t=q.of(this._iid).requestQueue,r=new sR({channelUrl:this.url,channelType:this.channelType,freezing:!1}),[4,t.send(r)];case 1:return i.sent(),this.isFrozen=!1,[2]}})})},n.prototype.getMessagesByMessageId=function(t,r){return N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return i=z(z({},Jv),r),me(Y("number",t)&&Yw(i)).throw(Q.invalidParameters),[4,Wr.of(this._iid).getMessagesByMessageId(this.url,this.channelType,t,i)];case 1:return[2,a.sent()]}})})},n.prototype.getMessagesByTimestamp=function(t,r){return N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return i=z(z({},Jv),r),me(Y("number",t)&&Yw(i)).throw(Q.invalidParameters),[4,Wr.of(this._iid).getMessagesByTimestamp(this.url,this.channelType,t,i)];case 1:return[2,a.sent()]}})})},n.prototype.getMessageChangeLogsSinceTimestamp=function(t,r){return r===void 0&&(r={}),N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return i=z(z({},k1),r),me(Y("number",t)&&Qw(i)).throw(Q.invalidParameters),[4,Wr.of(this._iid).getMessageChangelogs(this.url,this.channelType,t,i)];case 1:return[2,a.sent()]}})})},n.prototype.getMessageChangeLogsSinceToken=function(t,r){return r===void 0&&(r={}),N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return i=z(z({},k1),r),me(Y("string",t)&&Qw(i)).throw(Q.invalidParameters),[4,Wr.of(this._iid).getMessageChangelogs(this.url,this.channelType,t,i)];case 1:return[2,a.sent()]}})})},n.prototype._createPendingSendableMessagePayload=function(t,r,i){var a,s=q.of(this._iid).sessionManager;return Ae($e({channel_url:this.url,channel_type:this.channelType,msg_id:0,parent_message_id:t.parentMessageId,data:t.data,custom_type:t.customType,mention_type:t.mentionType,sorted_metaarray:t.metaArrays?t.metaArrays.map(function(o){return pi.payloadify(o)}):null,apple_critical_alert_options:t.appleCriticalAlertOptions?js.payloadify(t.appleCriticalAlertOptions):null,created_at:i,user:s.currentUser?nf.payloadify(s.currentUser):null,req_id:r,request_state:sn.PENDING,mentioned_user_ids:t.mentionedUserIds,mentioned_users:(a=t.mentionedUsers)===null||a===void 0?void 0:a.map(function(o){return Gt.payloadify(o)})}))},n.prototype._createPendingUserMessage=function(t,r,i){var a,s,o={};if(t.translationTargetLanguages)try{for(var l=ye(t.translationTargetLanguages),u=l.next();!u.done;u=l.next())o[u.value]=""}catch(f){a={error:f}}finally{try{u&&!u.done&&(s=l.return)&&s.call(l)}finally{if(a)throw a.error}}var c=Ae(z(z({},this._createPendingSendableMessagePayload(t,r,i)),{type:jn.USER,message:t.message,translations:o,extended_message_payload:t.extendedMessagePayload})),h=new Ni(this._iid,c);return h.messageParams=t,h},n.prototype._createPendingScheduledUserMessage=function(t,r,i){var a=this._createPendingUserMessage(t,r,i);return a.scheduledInfo={scheduledMessageId:0,scheduledAt:t.scheduledAt,scheduledMessageParams:t},a},n.prototype._createPendingFileMessage=function(t,r,i){var a,s,o,l,u,c,h,f=Ae(z(z({},this._createPendingSendableMessagePayload(t,r,i)),{type:jn.FILE,url:t.fileUrl,file:{name:(a=t.fileName)!==null&&a!==void 0?a:(s=t.file)===null||s===void 0?void 0:s.name,size:(o=t.fileSize)!==null&&o!==void 0?o:(l=t.file)===null||l===void 0?void 0:l.size,type:(u=t.mimeType)!==null&&u!==void 0?u:(c=t.file)===null||c===void 0?void 0:c.type,data:t.data},thumbnails:(h=t._thumbnails)===null||h===void 0?void 0:h.map(function(_){return Wl.payloadify(_)}),message:t.message})),p=new Rr(this._iid,f);return p.messageParams=t,p},n.prototype._createPendingMultipleFilesMessage=function(t,r,i){var a=Ae(z(z({},this._createPendingSendableMessagePayload(t,r,i)),{type:jn.FILE,file:t.fileInfoList.length>0?{name:t.fileInfoList[0].fileName,size:t.fileInfoList[0].fileSize,type:t.fileInfoList[0].mimeType,data:t.data}:void 0,message:t.message})),s=new fs(this._iid,a);return s.messageParams=t,s},n.prototype._validateFailedFileMessageHasFile=function(t,r){var i;return!!t.url||ai(r)||ai((i=t.messageParams)===null||i===void 0?void 0:i.file)},n.prototype._createPendingScheduledFileMessage=function(t,r,i){var a=this._createPendingFileMessage(t,r,i);return a.scheduledInfo={scheduledMessageId:0,scheduledAt:t.scheduledAt,scheduledMessageParams:t},a},n.prototype._markMessageAsFailed=function(t,r,i){i===void 0&&(i=!1),t.errorCode=r.code,r.code===Le.REQUEST_CANCELED||r.code===Le.FILE_UPLOAD_CANCEL_FAILED?t.sendingStatus=sn.CANCELED:i||(t.sendingStatus=sn.FAILED)},n.prototype.sendUserMessage=function(t){var r=z(z({},Qx),t);return me(Zx(r)).throw(Q.invalidParameters),this._sendUserMessage(r)},n.prototype._sendUserMessage=function(t,r,i){var a=this;r===void 0&&(r=Ci.SEND);var s=q.of(this._iid),o=s.dispatcher,l=s.requestQueue,u=i??this._generateRequestId(),c=Date.now(),h=new Da;return Bi(2).then(function(){var f=a._createPendingUserMessage(t,u,c);o.dispatch(new er({messages:[f],source:r===Ci.RESEND?oe.LOCAL_MESSAGE_RESEND_STARTED:oe.EVENT_MESSAGE_SENT_PENDING})),ze(function(){return N(a,void 0,void 0,function(){return T(this,function(_){return[2,h._trigger(f)]})})});var p=new NK(z(z({},t),{channelUrl:a.url,channelType:a.channelType,reqId:u}));l.send(p).then(function(_){var g=_.as(jN).message;o.dispatch(new er({messages:[g],source:oe.EVENT_MESSAGE_SENT_SUCCESS})),ze(function(){return N(a,void 0,void 0,function(){return T(this,function(C){return[2,h._trigger(g)]})})})}).catch(function(_){if(Vi(_))throw _;Bi(2).then(function(){var g=a._createPendingUserMessage(t,u,c),C=q.of(a._iid).cacheContext,E=C.localCacheEnabled&&C.localCacheConfig.enableAutoResend&&t0(_.code);a._markMessageAsFailed(g,_,E),o.dispatch(new er({messages:[g],source:g.sendingStatus===sn.PENDING?oe.REQUEST_RESEND_MESSAGE:oe.EVENT_MESSAGE_SENT_FAILED})),ze(function(){return N(a,void 0,void 0,function(){return T(this,function(y){return[2,h._triggerFailed(_,g)]})})})})})}),h},n.prototype._autoResendUserMessage=function(t){return me(t instanceof Ni&&!!t.messageParams).throw(Q.invalidParameters),this._sendUserMessage(t.messageParams,Ci.SEND,t.reqId)},n.prototype.resendUserMessage=function(t){var r;return N(this,void 0,void 0,function(){var i,a;return T(this,function(s){return me(t instanceof Ni&&!t.scheduledInfo).throw(Q.invalidParameters),i=new ra,a=(r=t.messageParams)!==null&&r!==void 0?r:P1(t),this._sendUserMessage(a,Ci.RESEND,t.reqId).onFailed(function(o){return i.reject(o)}).onSucceeded(function(o){return i.resolve(o)}),[2,i.promise]})})},n.prototype.updateUserMessage=function(t,r){return N(this,void 0,void 0,function(){var i,a,s,o;return T(this,function(l){switch(l.label){case 0:return i=z(z({},e4),r),me(Y("number",t)&&t4(i)).throw(Q.invalidParameters),a=q.of(this._iid).requestQueue,s=new oR(z({channelType:this.channelType,channelUrl:this.url,messageId:t,metaArrayParams:i.metaArrays?{array:i.metaArrays,mode:"add",upsert:!0}:void 0},i)),[4,a.send(s)];case 1:return o=l.sent(),[2,o.as(v0).message]}})})},n.prototype.copyUserMessage=function(t,r){var i,a,s;return N(this,void 0,void 0,function(){var o,l;return T(this,function(u){return me(t instanceof n&&r instanceof Ni&&r.sendingStatus===sn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(Q.invalidParameters),me(!r.poll).throw(Q.notSupportedError),o=new ra,l=(i=r.messageParams)!==null&&i!==void 0?i:$e(z(z({},r),{mentionType:r.mentionType,mentionedUserIds:(a=r.mentionedUserIds)!==null&&a!==void 0?a:(s=r.mentionedUsers)===null||s===void 0?void 0:s.map(function(c){return c.userId}),translationTargetLanguages:Object.keys(r.translations),pushNotificationDeliveryOption:yo.DEFAULT,parentMessageId:null,isReplyToChannel:!1,isPinnedMessage:!1})),t._sendUserMessage(l).onSucceeded(function(c){o.resolve(c)}).onFailed(function(c){return o.reject(c)}),[2,o.promise]})})},n.prototype.translateUserMessage=function(t,r){return N(this,void 0,void 0,function(){var i,a,s;return T(this,function(o){switch(o.label){case 0:return me(t instanceof Ni&&t.messageId>0&&Ht("string",r)).throw(Q.invalidParameters),i=q.of(this._iid).requestQueue,a=new RK({channelType:this.channelType,channelUrl:this.url,messageId:t.messageId,translationTargetLanguages:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(OK).message]}})})},n.prototype._createScheduledUserMessage=function(t,r){var i=this,a=q.of(this._iid).requestQueue,s=Date.now(),o=this._generateRequestId();Bi(2).then(function(){var u=i._createPendingScheduledUserMessage(t,o,s);ze(function(){return N(i,void 0,void 0,function(){return T(this,function(c){return[2,r._trigger(u)]})})})});var l=new DK(z({reqId:o,channelType:this.channelType,channelUrl:this.url},t));a.send(l).then(function(u){var c=u.as(u4).message;ze(function(){return N(i,void 0,void 0,function(){return T(this,function(h){return[2,r._trigger(c)]})})})}).catch(function(u){if(Vi(u))throw u;Bi(2).then(function(){var c=i._createPendingScheduledUserMessage(t,o,s);i._markMessageAsFailed(c,u),ze(function(){return N(i,void 0,void 0,function(){return T(this,function(h){return[2,r._triggerFailed(u,c)]})})})})})},n.prototype.sendFileMessage=function(t){var r=z(z({},eR),t);return me(tR(r)).throw(Q.invalidParameters),this._sendFileMessage(r)},n.prototype.sendMultipleFilesMessage=function(t){var r,i=z(z({},tW),t),a=q.of(this._iid);me(function(o,l){return l===void 0&&(l=kj),fE(o)&&Y("string",o.message,!0)&&Array.isArray(o.fileInfoList)&&o.fileInfoList.length>=2&&o.fileInfoList.length<=l&&o.fileInfoList.every(function(u){return nW(u)})}(i,(r=a.appInfo)===null||r===void 0?void 0:r.multipleFilesMessageFileCountLimit)).throw(Q.invalidParameters);var s=!!t.fileInfoList.find(function(o){var l=a.appInfo.uploadSizeLimit;return o.file instanceof Blob&&o.file.size>l||o.fileSize>l});return me(!s).throw(Q.fileSizeLimitExceededError),this._sendMultipleFilesMessage(i)},n.prototype._sendFileMessage=function(t,r,i){var a=this;r===void 0&&(r=Ci.SEND);var s=q.of(this._iid).dispatcher,o=Wr.of(this._iid).fileMessageQueue,l=i??this._generateRequestId(),u=Date.now(),c=new Da;return Bi(2).then(function(){var h=a._createPendingFileMessage(t,l,u);s.dispatch(new er({messages:[h],source:r===Ci.RESEND?oe.LOCAL_MESSAGE_RESEND_STARTED:oe.EVENT_MESSAGE_SENT_PENDING})),ze(function(){return N(a,void 0,void 0,function(){return T(this,function(f){return[2,c._trigger(h)]})})}),o.request(a,l,t).then(function(f){s.dispatch(new er({messages:[f],source:oe.EVENT_MESSAGE_SENT_SUCCESS})),ze(function(){return N(a,void 0,void 0,function(){return T(this,function(p){return[2,c._trigger(f)]})})})}).catch(function(f){if(Vi(f))throw f;Bi(2).then(function(){var p=a._createPendingFileMessage(t,l,u),_=q.of(a._iid).cacheContext,g=_.localCacheEnabled&&_.localCacheConfig.enableAutoResend&&t0(f.code);a._markMessageAsFailed(p,f,g),s.dispatch(new er({messages:[p],source:p.sendingStatus===sn.PENDING?oe.REQUEST_RESEND_MESSAGE:f.code===Le.FILE_UPLOAD_CANCEL_FAILED?oe.LOCAL_MESSAGE_CANCELED:oe.EVENT_MESSAGE_SENT_FAILED})),ze(function(){return N(a,void 0,void 0,function(){return T(this,function(C){return[2,c._triggerFailed(f,p)]})})})})})}),c},n.prototype._autoResendFileMessage=function(t){me(t instanceof Rr&&!!t.messageParams).throw(Q.invalidParameters);var r=q.of(this._iid).logger;return r.debug("autoResendFileMessage pending",t),this._sendFileMessage(t.messageParams,Ci.SEND,t.reqId).onFailed(function(i){r.debug("autoResendFileMessage failed",i)}).onSucceeded(function(i){r.debug("autoResendFileMessage success",i)})},n.prototype._sendMultipleFilesMessage=function(t,r,i){var a=this,s=q.of(this._iid).dispatcher,o=Wr.of(this._iid).fileMessageQueue,l=i??this._generateRequestId(),u=Date.now(),c=new gg;return Bi(2).then(function(){var h=a._createPendingMultipleFilesMessage(t,l,u);s.dispatch(new er({messages:[h],source:r===Ci.RESEND?oe.LOCAL_MESSAGE_RESEND_STARTED:oe.EVENT_MESSAGE_SENT_PENDING})),ze(function(){return N(a,void 0,void 0,function(){return T(this,function(f){return[2,c._trigger(h)]})})}),o.request(a,l,t,{requestHandler:c,isCopy:r===Ci.COPY}).then(function(f){s.dispatch(new er({messages:[f],source:oe.EVENT_MESSAGE_SENT_SUCCESS})),ze(function(){return N(a,void 0,void 0,function(){return T(this,function(p){return[2,c._trigger(f)]})})})}).catch(function(f){if(Vi(f))throw f;Bi(2).then(function(){var p=a._createPendingMultipleFilesMessage(t,l,u);a._markMessageAsFailed(p,f),s.dispatch(new er({messages:[p],source:oe.EVENT_MESSAGE_SENT_FAILED})),ze(function(){return N(a,void 0,void 0,function(){return T(this,function(_){return[2,c._triggerFailed(f,p)]})})})})})}),c},n.prototype._createScheduledFileMessage=function(t,r,i,a){var s=this,o=q.of(this._iid).requestQueue,l=new UK(z(z({reqId:i,channelType:this.channelType,channelUrl:this.url},t),{fileUrl:t.fileUrl,requireAuth:t.requireAuth}));o.send(l).then(function(u){var c=u.as(LK).message;ze(function(){return N(s,void 0,void 0,function(){return T(this,function(h){return[2,r._trigger(c)]})})})}).catch(function(u){if(Vi(u))throw u;Bi(2).then(function(){var c=s._createPendingScheduledFileMessage(t,i,a);s._markMessageAsFailed(c,u),ze(function(){return N(s,void 0,void 0,function(){return T(this,function(h){return[2,r._triggerFailed(u,c)]})})})})})},n.prototype.sendFileMessages=function(t){var r,i;me(t.every(function(u){return tR(z(z({},eR),u))})).throw(Q.invalidParameters);var a=new Da;try{for(var s=ye(t),o=s.next();!o.done;o=s.next()){var l=o.value;this.sendFileMessage(l).onPending(function(u){return a._trigger(u)}).onFailed(function(u,c){return a._triggerFailed(u,c)}).onSucceeded(function(u){return a._trigger(u)})}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}return a},n.prototype.resendFileMessage=function(t,r){return N(this,void 0,void 0,function(){var i,a,s;return T(this,function(o){return i=this._validateFailedFileMessageHasFile(t,r),me(t instanceof Rr&&i&&!t.scheduledInfo).throw(Q.invalidParameters),a=new ra,s=F1(t,r),this._sendFileMessage(s,Ci.RESEND,t.reqId).onFailed(function(l){return a.reject(l)}).onSucceeded(function(l){return a.resolve(l)}),[2,a.promise]})})},n.prototype.resendMessage=function(t,r){var i,a;if(me(t instanceof yr&&!t.scheduledInfo&&t.isResendable).throw(Q.invalidParameters),t.isUserMessage()){var s=(i=t.messageParams)!==null&&i!==void 0?i:P1(t);return this._sendUserMessage(s,Ci.RESEND,t.reqId)}if(t.isFileMessage()){var o=this._validateFailedFileMessageHasFile(t,r);return me(o).throw(Q.invalidParameters),s=(a=t.messageParams)!==null&&a!==void 0?a:F1(t,r),this._sendFileMessage(s,Ci.RESEND,t.reqId)}if(t.isMultipleFilesMessage())throw Q.channelTypeNotSupportedError},n.prototype.updateFileMessage=function(t,r){return N(this,void 0,void 0,function(){var i,a,s,o;return T(this,function(l){switch(l.label){case 0:return i=z(z({},jq),r),me(Y("number",t)&&function(u){return $N(u)}(i)).throw(Q.invalidParameters),a=q.of(this._iid).requestQueue,s=new lR(z({channelType:this.channelType,channelUrl:this.url,messageId:t,metaArrayParams:i.metaArrays?{array:i.metaArrays,mode:"add",upsert:!0}:void 0},i)),[4,a.send(s)];case 1:return o=l.sent(),[2,o.as(p0).message]}})})},n.prototype.uploadFile=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return r=q.of(this._iid).requestQueue,i=_s(),(a=new d0({file:t.file,channelUrl:this.url,thumbnailSizes:t.thumbnailSizes,requestId:i})).uploadProgressHandler=t.progressHandler,t.uploadStartedHandler&&t.uploadStartedHandler(i),[4,r.send(a)];case 1:return s=c.sent(),o=s.as(h0),l=o.url,u=o.thumbnails,[2,{requestId:i,url:l,thumbnails:u}]}})})},n.prototype.cancelUploadingFileMessage=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){return me(Y("string",t)).throw(Q.invalidParameters),Wr.of(this._iid).fileMessageQueue.cancel(this,t),[2,!0]})})},n.prototype.copyFileMessage=function(t,r){var i,a,s;return N(this,void 0,void 0,function(){var o,l;return T(this,function(u){return me(t instanceof n&&r instanceof Rr&&r.sendingStatus===sn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(Q.invalidParameters),o=new ra,l=$e(z(z({},r),{fileUrl:r.url,fileName:r.name,fileSize:r.size,mimeType:r.type,mentionType:r.mentionType,mentionedUserIds:(i=r.mentionedUserIds)!==null&&i!==void 0?i:(a=r.mentionedUsers)===null||a===void 0?void 0:a.map(function(c){return c.userId}),pushNotificationDeliveryOption:yo.DEFAULT,parentMessageId:null,isReplyToChannel:!1,thumbnailSizes:(s=r.thumbnails)===null||s===void 0?void 0:s.map(function(c){return{maxWidth:c.width,maxHeight:c.height}}),requireAuth:r.requireAuth,isPinnedMessage:!1})),t._sendFileMessage(l).onSucceeded(function(c){return o.resolve(c)}).onFailed(function(c){return o.reject(c)}),[2,o.promise]})})},n.prototype.copyMessage=function(t,r){me(t instanceof n&&r instanceof yr&&r.sendingStatus===sn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(Q.invalidParameters);var i=r,a=t;if(i.isUserMessage()){me(!i.poll).throw(Q.notSupportedError);var s=Xx(i);return a._sendUserMessage(s)}if(i.isFileMessage())return s=Jx(i),a._sendFileMessage(s);if(r.isMultipleFilesMessage())throw Q.channelTypeNotSupportedError},n.prototype.deleteMessage=function(t){return N(this,void 0,void 0,function(){var r,i;return T(this,function(a){switch(a.label){case 0:return me(t instanceof Hi).throw(Q.invalidParameters),t.messageId>0?(r=q.of(this._iid).requestQueue,i=new Zk({channelType:this.channelType,channelUrl:this.url,messageId:t.messageId,messageToken:t instanceof yr?t._messageToken:void 0}),[4,r.send(i)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},n.prototype.addReaction=function(t,r){return N(this,void 0,void 0,function(){var i,a,s;return T(this,function(o){switch(o.label){case 0:return me(t instanceof Hi&&t.messageId>0&&Y("string",r)).throw(Q.invalidParameters),i=q.of(this._iid).requestQueue,a=new IK({channelType:this.channelType,channelUrl:this.url,messageId:t.messageId,reactionKey:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(MK).reactionEvent]}})})},n.prototype.deleteReaction=function(t,r){return N(this,void 0,void 0,function(){var i,a,s;return T(this,function(o){switch(o.label){case 0:return me(t instanceof Hi&&t.messageId>0&&Y("string",r)).throw(Q.invalidParameters),i=q.of(this._iid).requestQueue,a=new AK({channelType:this.channelType,channelUrl:this.url,messageId:t.messageId,reactionKey:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(wK).reactionEvent]}})})},n.prototype._updateUserMessageMetaArray=function(t,r,i,a){return N(this,void 0,void 0,function(){var s,o,l,u,c,h;return T(this,function(f){switch(f.label){case 0:return s=q.of(this._iid),o=s.dispatcher,l=s.requestQueue,u=new oR({channelType:this.channelType,channelUrl:this.url,messageId:t,metaArrayParams:{array:r,mode:i,upsert:a}}),[4,l.send(u)];case 1:return c=f.sent(),h=c.as(v0).message,o.dispatch(new er({messages:[h],source:oe.EVENT_MESSAGE_UPDATED})),[2,h]}})})},n.prototype._updateFileMessageMetaArray=function(t,r,i,a){return N(this,void 0,void 0,function(){var s,o,l,u,c,h;return T(this,function(f){switch(f.label){case 0:return s=q.of(this._iid),o=s.dispatcher,l=s.requestQueue,u=new lR({channelType:this.channelType,channelUrl:this.url,messageId:t,metaArrayParams:{array:r,mode:i,upsert:a}}),[4,l.send(u)];case 1:return c=f.sent(),h=c.as(p0).message,o.dispatch(new er({messages:[h],source:oe.EVENT_MESSAGE_UPDATED})),[2,h]}})})},n.prototype.createMessageMetaArrayKeys=function(t,r){return N(this,void 0,void 0,function(){var i;return T(this,function(a){return me(t instanceof Hi&&t.messageId>0&&Ht("string",r)).throw(Q.invalidParameters),i=r.map(function(s){return new pi({key:s})}),t instanceof Rr?[2,this._updateFileMessageMetaArray(t.messageId,i,"add",!0)]:[2,this._updateUserMessageMetaArray(t.messageId,i,"add",!0)]})})},n.prototype.deleteMessageMetaArrayKeys=function(t,r){return N(this,void 0,void 0,function(){var i;return T(this,function(a){return me(t instanceof Hi&&t.messageId>0&&Ht("string",r)).throw(Q.invalidParameters),i=r.map(function(s){return new pi({key:s})}),t instanceof Rr?[2,this._updateFileMessageMetaArray(t.messageId,i,"remove",!0)]:[2,this._updateUserMessageMetaArray(t.messageId,i,"remove",!0)]})})},n.prototype.addMessageMetaArrayValues=function(t,r){return N(this,void 0,void 0,function(){return T(this,function(i){return me(t instanceof Hi&&t.messageId>0&&r.every(function(a){return a instanceof pi})).throw(Q.invalidParameters),t instanceof Rr?[2,this._updateFileMessageMetaArray(t.messageId,r,"add",!0)]:[2,this._updateUserMessageMetaArray(t.messageId,r,"add",!0)]})})},n.prototype.removeMessageMetaArrayValues=function(t,r){return N(this,void 0,void 0,function(){return T(this,function(i){return me(t instanceof Hi&&t.messageId>0&&r.every(function(a){return a instanceof pi})).throw(Q.invalidParameters),t instanceof Rr?[2,this._updateFileMessageMetaArray(t.messageId,r,"remove",!0)]:[2,this._updateUserMessageMetaArray(t.messageId,r,"remove",!0)]})})},n.prototype.report=function(t,r){return N(this,void 0,void 0,function(){var i,a,s,o;return T(this,function(l){switch(l.label){case 0:return me((Bt(ep,t)||t instanceof Bh)&&Y("string",r)).throw(Q.invalidParameters),i=q.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new CK({channelUrl:this.url,channelType:this.channelType,userId:a.userId,category:t,description:r}),[4,s.send(o)];case 1:return l.sent(),[2]}})})},n.prototype.reportUser=function(t,r,i){return N(this,void 0,void 0,function(){var a,s,o,l;return T(this,function(u){switch(u.label){case 0:return me(t instanceof Gt&&(Bt(ep,r)||r instanceof Bh)&&Y("string",i)).throw(Q.invalidParameters),a=q.of(this._iid),s=a.sdkState,o=a.requestQueue,l=new SK({channelUrl:this.url,channelType:this.channelType,userId:s.userId,offendingUserId:t.userId,category:r,description:i}),[4,o.send(l)];case 1:return u.sent(),[2]}})})},n.prototype.reportMessage=function(t,r,i){return N(this,void 0,void 0,function(){var a,s,o,l;return T(this,function(u){switch(u.label){case 0:return me(t instanceof yr&&(Bt(ep,r)||r instanceof Bh)&&Y("string",i)).throw(Q.invalidParameters),a=q.of(this._iid),s=a.sdkState,o=a.requestQueue,l=new TK({channelUrl:this.url,channelType:this.channelType,userId:s.userId,offendingUserId:t.sender.userId,messageId:t.messageId,category:r,description:i,messageToken:t._messageToken}),[4,o.send(l)];case 1:return u.sent(),[2]}})})},n.prototype.updatePoll=function(t,r){return N(this,void 0,void 0,function(){var i,a,s;return T(this,function(o){switch(o.label){case 0:return me(Y("number",t)&&function(l){return Y("string",l.title,!0)&&Fx(l.data)&&Y("boolean",l.allowUserSuggestion,!0)&&Y("boolean",l.allowMultipleVotes,!0)&&Y("number",l.closeAt,!0)}(r)).throw(Q.invalidParameters),i=q.of(this._iid).requestQueue,a=new kK(z({pollId:t},r)),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(xK).poll]}})})},n.prototype.deletePoll=function(t){return N(this,void 0,void 0,function(){var r,i,a;return T(this,function(s){switch(s.label){case 0:return r=Y("number",t),me(r).throw(Q.invalidParameters),i=q.of(this._iid).requestQueue,a=new PK({pollId:t}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},n.prototype.closePoll=function(t){return N(this,void 0,void 0,function(){var r,i,a,s;return T(this,function(o){switch(o.label){case 0:return r=Y("number",t),me(r).throw(Q.invalidParameters),i=q.of(this._iid).requestQueue,a=new FK({pollId:t}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(BK).poll]}})})},n.prototype.addPollOption=function(t,r){return N(this,void 0,void 0,function(){var i,a,s,o;return T(this,function(l){switch(l.label){case 0:return i=Y("number",t)&&Y("string",r)&&r.trim()!=="",me(i).throw(Q.invalidParameters),a=q.of(this._iid).requestQueue,s=new HK({channelUrl:this.url,channelType:this.channelType,pollId:t,optionText:r}),[4,a.send(s)];case 1:return o=l.sent(),[2,o.as(GK).poll]}})})},n.prototype.updatePollOption=function(t,r,i){return N(this,void 0,void 0,function(){var a,s,o,l;return T(this,function(u){switch(u.label){case 0:return a=Y("number",t)&&Y("number",r)&&Y("string",i)&&i.trim()!=="",me(a).throw(Q.invalidParameters),s=q.of(this._iid).requestQueue,o=new $K({pollId:t,pollOptionId:r,optionText:i}),[4,s.send(o)];case 1:return l=u.sent(),[2,l.as(VK).poll]}})})},n.prototype.deletePollOption=function(t,r){return N(this,void 0,void 0,function(){var i,a,s;return T(this,function(o){switch(o.label){case 0:return i=Y("number",t)&&Y("number",r),me(i).throw(Q.invalidParameters),a=q.of(this._iid).requestQueue,s=new zK({pollId:t,pollOptionId:r}),[4,a.send(s)];case 1:return o.sent(),[2]}})})},n.prototype.votePoll=function(t,r){return N(this,void 0,void 0,function(){var i,a,s,o,l,u,c;return T(this,function(h){switch(h.label){case 0:return i=Y("number",t)&&Ht("number",r),me(i).throw(Q.invalidParameters),a=q.of(this._iid),s=a.requestQueue,o=a.dispatcher,l=new jK({reqId:this._generateRequestId(),channelUrl:this.url,channelType:this.channelType,pollId:t,pollOptionIds:r}),[4,s.send(l)];case 1:return u=h.sent(),c=u.as(qN).event,o.dispatch(new cE({event:c,source:oe.EVENT_POLL_VOTED})),[2,c]}})})},n.prototype.getPollChangeLogsSinceTimestamp=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return me(Y("number",t)).throw(Q.invalidParameters),[4,c0.of(this._iid).getPollChangeLogs(this.url,this.channelType,t)];case 1:return[2,r.sent()]}})})},n.prototype.getPollChangeLogsSinceToken=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return me(Y("string",t,!0)),[4,c0.of(this._iid).getPollChangeLogs(this.url,this.channelType,t)];case 1:return[2,r.sent()]}})})},n.prototype.createPollListQuery=function(t){return t===void 0&&(t=10),new $x(this._iid,{channelUrl:this.url,channelType:this.channelType,limit:t})},n.prototype.createPollVoterListQuery=function(t,r,i){return i===void 0&&(i=20),new Vx(this._iid,{channelUrl:this.url,channelType:this.channelType,pollId:t,pollOptionId:r,limit:i})},n.prototype.pinMessage=function(t){return N(this,void 0,void 0,function(){var r,i;return T(this,function(a){switch(a.label){case 0:return me(Y("number",t)&&t>0).throw(Q.invalidParameters),r=q.of(this._iid).requestQueue,i=new oW({channelType:this.channelType,channelUrl:this.url,messageId:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n.prototype.unpinMessage=function(t){return N(this,void 0,void 0,function(){var r,i;return T(this,function(a){switch(a.label){case 0:return me(Y("number",t)&&t>0).throw(Q.invalidParameters),r=q.of(this._iid).requestQueue,i=new lW({channelType:this.channelType,channelUrl:this.url,messageId:t}),[4,r.send(i)];case 1:return a.sent(),[2]}})})},n}(Ur),p4=function(e){function n(t){t===void 0&&(t={});var r=e.call(this)||this;return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)&&(r[i]=t[i])}),r}return k(n,e),n}(function(){this.onConnected=vt,this.onReconnectStarted=vt,this.onReconnectSucceeded=vt,this.onReconnectFailed=vt,this.onConnectionLost=vt,this.onDisconnected=vt,this.onConnectionDelayed=vt}),uR=function(e){function n(t){t===void 0&&(t={});var r=e.call(this)||this;return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)&&(r[i]=t[i])}),r}return k(n,e),n}(function(){this.onSessionExpired=vt,this.onSessionTokenRequired=function(e){return e(null)},this.onSessionError=vt,this.onSessionRefreshed=vt,this.onSessionClosed=vt}),cW=function(e){function n(t){t===void 0&&(t={});var r=e.call(this)||this;return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)&&(r[i]=t[i])}),r}return k(n,e),n}(function(){this.onFriendsDiscovered=vt,this.onTotalUnreadMessageCountChanged=vt,this.onTotalUnreadMessageCountUpdated=vt}),dW=function(e){function n(t){var r=t.limit,i=t.token,a=t.userIdsFilter,s=t.metaDataKeyFilter,o=t.metaDataValuesFilter,l=t.nicknameStartsWithFilter,u=e.call(this)||this;return u.method=fe.GET,u.path=En,u.params=Ae({limit:r,token:i,user_ids:a,metadatakey:s,metadatavalues_in:o,nickname_startswith:l}),u}return k(n,e),n}(ve),hW=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.users=r.users.map(function(a){return new Gt(t,a)}),i.next=r.next,i}return k(n,e),n}(_e),fW=function(e){function n(t,r){var i,a,s,o=this;return(o=e.call(this,t,r)||this).userIdsFilter=null,o.metaDataKeyFilter=null,o.metaDataValuesFilter=null,o.nicknameStartsWithFilter=null,o.userIdsFilter=(i=r.userIdsFilter)!==null&&i!==void 0?i:null,o.metaDataKeyFilter=(a=r.metaDataKeyFilter)!==null&&a!==void 0?a:null,o.metaDataValuesFilter=(s=r.metaDataValuesFilter)!==null&&s!==void 0?s:null,o.nicknameStartsWithFilter=r.nicknameStartsWithFilter||null,o}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Ht("string",this.userIdsFilter,!0)&&Y("string",this.metaDataKeyFilter,!0)&&Ht("string",this.metaDataValuesFilter,!0)&&Y("string",this.nicknameStartsWithFilter,!0)},n.prototype.next=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=q.of(this._iid).requestQueue,r=new dW($e(z(z({},this),{token:this._token}))),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(hW),s=a.users,o=a.next,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(Kl),vW=function(e){function n(t){var r=t.userId,i=t.limit,a=t.token,s=t.userIdsFilter,o=e.call(this)||this;return o.method=fe.GET,o.path="".concat(En,"/").concat(encodeURIComponent(r),"/block"),o.params=Ae({limit:i,token:a,user_ids:s}),o}return k(n,e),n}(ve),pW=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.users=r.users.map(function(a){return new Gt(t,a)}),i.next=r.next,i}return k(n,e),n}(_e),mW=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).userIdsFilter=null,a.userIdsFilter=(i=r.userIdsFilter)!==null&&i!==void 0?i:null,a}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Ht("string",this.userIdsFilter,!0)},n.prototype.next=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new vW($e(z(z({},this),{userId:r.userId,token:this._token}))),[4,i.send(a)]):[3,2]:[3,5];case 1:return s=c.sent(),o=s.as(pW),l=o.users,u=o.next,this._token=u,this._hasNext=!!u,this._isLoading=!1,[2,l];case 2:return[2,[]];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(Kl),_W=function(e){function n(t){var r=t.userId,i=t.limit,a=t.token,s=e.call(this)||this;return s.method=fe.GET,s.path="".concat(En,"/").concat(encodeURIComponent(r),"/friends"),s.params={limit:i,token:a},s}return k(n,e),n}(ve),gW=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.hasMore=r.has_more,i.users=r.users.map(function(a){return new Gt(t,a)}),i.next=r.next,i}return k(n,e),n}(_e),EW=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)},n.prototype.next=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,c;return T(this,function(h){switch(h.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new _W(z(z({},this),{userId:r.userId,token:this._token})),[4,i.send(a)]):[3,2]:[3,5];case 1:return s=h.sent(),o=s.as(gW),l=o.users,u=o.hasMore,c=o.next,this._token=c,this._hasNext=u,this._isLoading=!1,[2,l];case 2:return[2,[]];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(Kl),D_={},rm=function(){function e(n){var t=n.dbname,r=n.itemSizeLimit,i=r===void 0?1048576:r,a=n.cacheLimit,s=a===void 0?256:a,o=n.blockHashBase,l=o===void 0?2:o,u=n.blockHashMultiplier,c=u===void 0?10:u,h=n.blockHashConstant,f=h===void 0?11:h,p=n.transactionApplyDelay,_=p===void 0?200:p,g=n.disableLogger,C=g!==void 0&&g;return D_[t]||(this.itemSizeLimit=i,this.cacheLimit=s,this.blockHashBase=l,this.blockHashMultiplier=c,this.blockHashConstant=f,this.transactionApplyDelay=_,this.disableLogger=C,D_[t]=this),D_[t]}return e.get=function(n){return D_[n]},e}();(function(e){e[e.UNKNOWN_ERROR=6e7]="UNKNOWN_ERROR",e[e.STORE_NOT_DEFINED=61001e3]="STORE_NOT_DEFINED",e[e.STORE_NOT_AVAILABLE=61001001]="STORE_NOT_AVAILABLE",e[e.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING=61001002]="STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING",e[e.STORE_IS_FULL=61001003]="STORE_IS_FULL",e[e.STORE_NOT_INITIALIZED=61001004]="STORE_NOT_INITIALIZED",e[e.STORE_INVALID_KEY_TYPE=61002e3]="STORE_INVALID_KEY_TYPE",e[e.STORE_BROKEN_INTEGRITY=61002001]="STORE_BROKEN_INTEGRITY",e[e.STORE_BROKEN_BLOB=61002002]="STORE_BROKEN_BLOB",e[e.STORE_ENCRYPTION_INVALID=61002003]="STORE_ENCRYPTION_INVALID",e[e.STORE_ITEM_SIZE_LIMIT_EXCEEDED=61017e3]="STORE_ITEM_SIZE_LIMIT_EXCEEDED",e[e.STORE_READ_FAILED=61017001]="STORE_READ_FAILED",e[e.STORE_WRITE_FAILED=61017002]="STORE_WRITE_FAILED",e[e.DATABASE_SCHEMA_NOT_ON_UPGRADE=62002e3]="DATABASE_SCHEMA_NOT_ON_UPGRADE",e[e.COLLECTION_NOT_READY=63001e3]="COLLECTION_NOT_READY",e[e.COLLECTION_KEY_NOT_MATCH=63002e3]="COLLECTION_KEY_NOT_MATCH",e[e.COLLECTION_QUERY_NOT_VALID=63002001]="COLLECTION_QUERY_NOT_VALID",e[e.COLLECTION_KEY_NOT_FOUND=63004e3]="COLLECTION_KEY_NOT_FOUND",e[e.COLLECTION_KEY_NOT_GIVEN=63004001]="COLLECTION_KEY_NOT_GIVEN",e[e.COLLECTION_INSERT_DUPLICATE=63009e3]="COLLECTION_INSERT_DUPLICATE",e[e.COLLECTION_WRITE_FAILED=63017e3]="COLLECTION_WRITE_FAILED",e[e.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED=63017001]="COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED",e[e.INDEX_TABLE_IS_REQUIRED=65001e3]="INDEX_TABLE_IS_REQUIRED",e[e.INDEX_TYPE_NOT_MATCH=65002e3]="INDEX_TYPE_NOT_MATCH",e[e.COMPARE_TYPE_NOT_MATCH=69002001]="COMPARE_TYPE_NOT_MATCH",e[e.CIRCULAR_REFERENCE_FOUND=69002002]="CIRCULAR_REFERENCE_FOUND"})(ar||(ar={}));var id,Rn=function(e){function n(t){var r=t.code,i=r===void 0?ar.UNKNOWN_ERROR:r,a=t.message,s=a===void 0?"Unknown error occurred.":a,o=e.call(this,s)||this;return o.code=i,Object.setPrototypeOf(o,n.prototype),o}return k(n,e),Object.defineProperty(n,"storeNotDefined",{get:function(){return new n({code:ar.STORE_NOT_DEFINED,message:"Store is not defined. Specify the store on NestDB()"})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotAvailable",{get:function(){return new n({code:ar.STORE_NOT_AVAILABLE,message:"Store is not available. Check your environment settings."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotAvailableInPrivateBrowsing",{get:function(){return new n({code:ar.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING,message:"Store is not available because it is in private browsing."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeIsFull",{get:function(){return new n({code:ar.STORE_IS_FULL,message:"Store is full."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeNotInitialized",{get:function(){return new n({code:ar.STORE_NOT_INITIALIZED,message:"Store is not initialized."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeKeyTypeIsInvalid",{get:function(){return new n({code:ar.STORE_INVALID_KEY_TYPE,message:"Store key should be string type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeBrokenIntegrity",{get:function(){return new n({code:ar.STORE_BROKEN_INTEGRITY,message:"Data should be in a store but it does not. Integrity is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeBrokenBlob",{get:function(){return new n({code:ar.STORE_BROKEN_BLOB,message:"Data should be in a store but it does not. Blob data is broken."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeEncryptionInvalid",{get:function(){return new n({code:ar.STORE_ENCRYPTION_INVALID,message:"Encryption algorithm has changed. All the store should reset."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeItemSizeExceeded",{get:function(){return new n({code:ar.STORE_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that the store allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeReadFailed",{get:function(){return new n({code:ar.STORE_READ_FAILED,message:"Failed to read from store."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"storeWriteFailed",{get:function(){return new n({code:ar.STORE_WRITE_FAILED,message:"Failed to write to store."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"databaseSchemaNotOnUpgrade",{get:function(){return new n({code:ar.DATABASE_SCHEMA_NOT_ON_UPGRADE,message:"Committing schema is not allowed when upgrade is not running."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionNotReady",{get:function(){return new n({code:ar.COLLECTION_NOT_READY,message:"Collection is not ready due to an error during initialization."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotMatch",{get:function(){return new n({code:ar.COLLECTION_KEY_NOT_MATCH,message:"keyName of collection could not change."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionQueryNotValid",{get:function(){return new n({code:ar.COLLECTION_QUERY_NOT_VALID,message:"Query parameter is not a valid format."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionInsertDuplicate",{get:function(){return new n({code:ar.COLLECTION_INSERT_DUPLICATE,message:"The key already exists."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotFound",{get:function(){return new n({code:ar.COLLECTION_KEY_NOT_FOUND,message:"The key is not found."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionKeyNotGiven",{get:function(){return new n({code:ar.COLLECTION_KEY_NOT_GIVEN,message:"The item should contain [keyName] property."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionWriteFailed",{get:function(){return new n({code:ar.COLLECTION_WRITE_FAILED,message:"Failed to write an item."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"collectionItemSizeExceeded",{get:function(){return new n({code:ar.COLLECTION_ITEM_SIZE_LIMIT_EXCEEDED,message:"The size of the item exceeds the limit that a collection allows."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"indexTableIsRequired",{get:function(){return new n({code:ar.INDEX_TABLE_IS_REQUIRED,message:"Index table is required."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"indexTypesNotMatch",{get:function(){return new n({code:ar.INDEX_TYPE_NOT_MATCH,message:"Indexed column should have primitive type."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"compareTypesNotMatch",{get:function(){return new n({code:ar.COMPARE_TYPE_NOT_MATCH,message:"Values to compare have different types."})},enumerable:!1,configurable:!0}),Object.defineProperty(n,"circularReferenceFound",{get:function(){return new n({code:ar.CIRCULAR_REFERENCE_FOUND,message:"Cannot handle circular referenced object."})},enumerable:!1,configurable:!0}),n}(Error);(function(e){e.INIT="init",e.READY="ready",e.CLOSED="closed"})(id||(id={}));var cR,Gi=function(e,n){if(n===void 0&&(n=new WeakMap),typeof e=="object"&&e!==null){if(n.has(e))throw Rn.circularReferenceFound;var t;return n.set(e,!0),Array.isArray(e)?t=e.map(function(r){return Gi(r,n)}):e instanceof RegExp||e instanceof Date?t=e:(t={},Object.keys(e).forEach(function(r){t[r]=Gi(e[r],n)})),n.delete(e),t}return e},Dl=function(e,n){if(n==null)return 1;if(e==null)return-1;if(typeof e!=typeof n)throw Rn.compareTypesNotMatch;var t=0;switch(typeof e){case"boolean":case"number":t=e-n;break;case"string":t=e.localeCompare(n)}return t},dR=function(e,n){for(var t=0,r=0;r<e.length;r++)t=e.charCodeAt(r)+(t<<6)+(t<<16)-t;return(t>>>0)%n},U_=function(e){return new Promise(function(n){setTimeout(function(){return n()},e)})},cd=function(e,n){if(!n)return!1;if(typeof e!="function"){for(var t in e)if(["/and","&&"].includes(t)){if(e[t].some(function(l){return!cd(l,n)}))return!1}else if(["/or","||"].includes(t)){if(e[t].every(function(l){return!cd(l,n)}))return!1}else if(t==="/where"){if(!(0,e[t])(n))return!1}else{var r=t;if(typeof e[r]=="object"){var i=e[r];for(var a in i)switch(a){case"/eq":case"=":if((s=n[r])!==(o=i[a]))return!1;break;case"/neq":case"!=":if((s=n[r])===(o=i[a]))return!1;break;case"/gt":case">":var s=n[r],o=i[a];if(!(Dl(s,o)>0))return!1;break;case"/gte":case">=":if(s=n[r],o=i[a],!(Dl(s,o)>=0))return!1;break;case"/lt":case"<":if(s=n[r],o=i[a],!(Dl(s,o)<0))return!1;break;case"/lte":case"<=":if(s=n[r],o=i[a],!(Dl(s,o)<=0))return!1;break;case"/in":if(s=n[r],!(o=i[a]).includes(s))return!1;break;case"/nin":if(s=n[r],(o=i[a]).includes(s))return!1;break;case"/contain":if(s=n[r],o=i[a],!s.includes(o))return!1;break;case"/regex":if(s=n[r],!(o=i[a]).test(s))return!1;break;case"/where":if(s=n[r],!(0,i[a])(s))return!1}}else if(typeof e[r]=="function"){if(!e[r](n[r]))return!1}else if(e[r]!==n[r])return!1}return!0}return e(n)},Mv=function(){},hR=function(){return Promise.resolve()},yW=function(e){return e},fR=function(e,n){n()};(function(e){e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD"})(cR||(cR={}));var dd,$i,Ls,bW=function(){function e(n){var t=n.initialPrevValue,r=t===void 0?null:t,i=n.initialNextValue,a=i===void 0?null:i,s=n.iterator,o=n.map,l=o===void 0?yW:o,u=n.backward,c=u===void 0?hR:u,h=n.forward,f=h===void 0?hR:h,p=n.complete,_=p===void 0?Mv:p;this._prevValue=r,this._nextValue=a,this._error=null,this._map=l,this._backward=c,this._forward=f,this._iterator=s,this._complete=_}return Object.defineProperty(e.prototype,"prevValue",{get:function(){return this._map(this._prevValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nextValue",{get:function(){return this._map(this._nextValue)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this._error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return!!this._prevValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return!!this._nextValue},enumerable:!1,configurable:!0}),e.prototype.prev=function(){return N(this,void 0,void 0,function(){var n,t,r;return T(this,function(i){switch(i.label){case 0:if(!this.hasPrevious)return[3,6];i.label=1;case 1:return i.trys.push([1,3,,4]),n=this._prevValue,t=this,[4,this._backward()];case 2:return t._prevValue=i.sent()||null,this._nextValue=n,[3,4];case 3:return r=i.sent(),this._error=r,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,i.sent()];case 6:this._complete(),i.label=7;case 7:return[2]}})})},e.prototype.next=function(){return N(this,void 0,void 0,function(){var n,t,r;return T(this,function(i){switch(i.label){case 0:if(!this.hasNext)return[3,6];i.label=1;case 1:return i.trys.push([1,3,,4]),n=this._nextValue,t=this,[4,this._forward()];case 2:return t._nextValue=i.sent()||null,this._prevValue=n,[3,4];case 3:return r=i.sent(),this._error=r,[3,4];case 4:return[4,this._iterator(this)];case 5:return[2,i.sent()];case 6:this._complete(),i.label=7;case 7:return[2]}})})},e.prototype.stop=function(){this._prevValue=null,this._nextValue=null,this._complete()},e}(),B1=function(){function e(n){var t=n.condition,r=t===void 0?{}:t,i=n.backward,a=i!==void 0&&i,s=n.blockManager,o=n.indexer;this.condition=r,this.backward=a,this._blockManager=s,this._indexer=o}return e.prototype.findOptimizedStartPosition=function(){var n=this,t=["=","/eq",">",">=","/gt","/gte"],r=["=","/eq","<","<=","/lt","/lte"];if(this.backward){var i=this._indexer.origin.length-1;if(typeof this.condition!="function")for(p=0;p<this._indexer.fields.length;p++){var a=this._indexer.fields[p],s=1;if(a[0]==="-"&&(a=a.slice(1),s=-1),this.condition[a]){if(typeof this.condition[a]=="object"){var o=s>0?r:t;for(var l in this.condition[a])if(o.includes(l)){for(var u=i;u>=0;u--)if(s*Dl(this._indexer.origin[u].columnValues[p],this.condition[a][l])<=0){i=u;break}}}else for(u=i;u>=0;u--)if(s*Dl(this._indexer.origin[u].columnValues[p],this.condition[a])<=0){i=u;break}}}return Math.min(i+1,this._indexer.origin.length-1)}var c=0;if(typeof this.condition!="function")for(var h=function(_){var g=f._indexer.fields[_],C=1;if(g[0]==="-"&&(g=g.slice(1),C=-1),f.condition[g]){if(typeof f.condition[g]=="object")Object.keys(f.condition[g]).forEach(function(y){if((C>0?t:r).includes(y)){for(var S=c;S<n._indexer.origin.length;S++)if(C*Dl(n._indexer.origin[S].columnValues[_],n.condition[g][y])>=0){c=S;break}}});else for(var E=c;E<f._indexer.origin.length;E++)if(C*Dl(f._indexer.origin[E].columnValues[_],f.condition[g])>=0){c=E;break}}},f=this,p=0;p<this._indexer.fields.length;p++)h(p);return Math.max(c-1,0)},e.prototype.each=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u=this;return T(this,function(c){switch(c.label){case 0:if(t=this.findOptimizedStartPosition(),r=0,this.backward&&this._indexer.origin[t]&&(r=this._indexer.origin[t].keys.length-1),i=function(){if(u._indexer.origin[t]){if(!u._indexer.origin[t].keys[++r]){if(!u._indexer.origin[++t])return!1;r=0}return!0}return!1},a=function(){if(u._indexer.origin[t]){if(!u._indexer.origin[t].keys[--r]){if(!u._indexer.origin[--t])return!1;r=u._indexer.origin[t].keys.length-1}return!0}return!1},s=null,!this._indexer.origin[t])return[3,4];o=this.backward?a:i,c.label=1;case 1:return[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[r])];case 2:if((l=c.sent())&&cd(this.condition,l))return s=l,[3,4];c.label=3;case 3:if(o())return[3,1];c.label=4;case 4:return[4,new Promise(function(h){var f=new bW({initialNextValue:Gi(s),iterator:n,forward:function(){return N(u,void 0,void 0,function(){var p,_;return T(this,function(g){switch(g.label){case 0:p=this.backward?a:i,g.label=1;case 1:return p()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[r])]:[3,3];case 2:return(_=g.sent())&&cd(this.condition,_)?[2,Gi(_)]:[3,1];case 3:return[2,null]}})})},backward:function(){return N(u,void 0,void 0,function(){var p,_;return T(this,function(g){switch(g.label){case 0:p=this.backward?i:a,g.label=1;case 1:return p()?[4,this._blockManager.getFromBlock(this._indexer.origin[t].keys[r])]:[3,3];case 2:return(_=g.sent())&&cd(this.condition,_)?[2,Gi(_)]:[3,1];case 3:return[2,null]}})})},complete:h});n(f)})];case 5:return[2,c.sent()]}})})},e}(),CW=function(){function e(n){var t=n.condition,r=t===void 0?{}:t,i=n.backward,a=i!==void 0&&i,s=n.mutex,o=n.blockManager,l=n.indexer;this._mutex=s,this._iterator=new B1({condition:r,backward:a,blockManager:o,indexer:l}),this._indexer=l}return Object.defineProperty(e.prototype,"indexer",{get:function(){return this._indexer},enumerable:!1,configurable:!0}),e.prototype.fetch=function(n){return n===void 0&&(n={}),N(this,void 0,void 0,function(){var t,r,i,a,s=this;return T(this,function(o){switch(o.label){case 0:if(t=Math.max(n.offset||0,0),(r=typeof n.limit=="number"?n.limit:Number.MAX_SAFE_INTEGER)===0)return[2,[]];if(r<0)throw Rn.collectionQueryNotValid;o.label=1;case 1:return o.trys.push([1,4,,5]),i=[],[4,this._mutex.lock()];case 2:return o.sent(),[4,this._iterator.each(function(l){return N(s,void 0,void 0,function(){return T(this,function(u){return l.error?l.stop():l.hasNext?t===0?(i.push(l.nextValue),0<r&&r<=i.length?l.stop():l.next()):(t--,l.next()):l.stop(),[2]})})})];case 3:return o.sent(),this._mutex.unlock(),[2,i];case 4:throw a=o.sent(),this._mutex.unlock(),a;case 5:return[2]}})})},e.prototype.count=function(){return N(this,void 0,void 0,function(){var n,t,r=this;return T(this,function(i){switch(i.label){case 0:return i.trys.push([0,3,,4]),n=0,[4,this._mutex.lock()];case 1:return i.sent(),[4,this._iterator.each(function(a){return N(r,void 0,void 0,function(){return T(this,function(s){return a.error?a.stop():a.hasNext?(n++,a.next()):a.stop(),[2]})})})];case 2:return i.sent(),this._mutex.unlock(),[2,n];case 3:throw t=i.sent(),this._mutex.unlock(),t;case 4:return[2]}})})},e}(),WN=function(e){return"".concat("nest","@").concat(e)},Sd=function(e,n){return"".concat(WN(e),"/").concat(n)},Gb=function(e,n){return"".concat(Sd(e,n),".metadata")},_0=function(e,n){return"".concat(Sd(e,n),"/block.")},vR=function(e,n){return"".concat(Sd(e,n),"/blob.")},SW=function(){function e(n){var t=n.dbname,r=n.collectionName,i=n.store;this.dbname=t,this.collectionName=r,this.store=i}return e.prototype.get=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,c;return T(this,function(h){switch(h.label){case 0:return[4,this.store.get(n)];case 1:return(t=h.sent())?(r=t.data,i=t.type,typeof fetch>"u"?[3,4]:[4,fetch(r)]):[3,5];case 2:return[4,h.sent().blob()];case 3:return[2,h.sent()];case 4:for(a=[],s=atob(r.split(",")[1]),o=0;o<s.length;o+=512){for(l=s.slice(o,o+512),u=new Array(l.length),c=0;c<l.length;c++)u[c]=l.charCodeAt(c);a.push(new Uint8Array(u))}return[2,new Blob(a,{type:i})];case 5:return[2,null]}})})},e.prototype.save=function(n,t){return t===void 0&&(t="".concat(Date.now())),N(this,void 0,void 0,function(){var r,i,a,s,o=this;return T(this,function(l){switch(l.label){case 0:return[4,new Promise(function(u){var c=function(f,p,_,g){return g===void 0&&(g=0),"".concat(vR(f,p)).concat(_,".").concat(g)}(o.dbname,o.collectionName,t),h=new FileReader;h.onload=function(){u({blobId:c,data:h.result,type:n.type})},h.readAsDataURL(n)})];case 1:return r=l.sent(),i=r.blobId,a=r.data,s=r.type,[4,this.store.set({key:i,value:{data:a,type:s}})];case 2:return l.sent(),[2,i]}})})},e.prototype.remove=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this.store.remove(n)];case 1:return t.sent(),[2]}})})},e.prototype.clear=function(){return N(this,void 0,void 0,function(){var n,t,r=this;return T(this,function(i){switch(i.label){case 0:return n=vR(this.dbname,this.collectionName),[4,this.store.getAllKeys()];case 1:return t=i.sent(),[4,Promise.all(t.filter(function(a){return a.startsWith(n)}).map(function(a){return N(r,void 0,void 0,function(){return T(this,function(s){switch(s.label){case 0:return[4,this.store.remove(a)];case 1:return[2,s.sent()]}})})}))];case 2:return i.sent(),[2]}})})},e}();(function(e){e[e.COMMIT=0]="COMMIT",e[e.WRITE=1]="WRITE",e[e.ERROR=2]="ERROR"})(dd||(dd={})),function(e){e.PENDING="pending",e.PERSISTENT="persistent",e.VOLATILE="volatile"}($i||($i={})),function(e){e[e.NO_CACHE=0]="NO_CACHE",e[e.DEFAULT=1]="DEFAULT",e[e.PERSISTENT=2]="PERSISTENT"}(Ls||(Ls={}));var tp,xi,pR=[$i.PENDING,$i.VOLATILE],L_={},ta=function(){function e(n){var t=n.dbname,r=n.limit,i=r===void 0?256:r;return L_[t]||(this.dbname=t,this._items=[],this._limit=i,L_[t]=this),L_[t]}return e.get=function(n){return L_[n]},Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.find=function(n,t,r){return r===void 0&&(r=Ls.DEFAULT),N(this,void 0,void 0,function(){var i,a;return T(this,function(s){switch(s.label){case 0:return(i=this.get(t))?[3,2]:[4,n.get(t)];case 1:return(a=s.sent())&&(i={key:t,value:a,state:r===Ls.PERSISTENT?$i.PERSISTENT:$i.VOLATILE},this.put(i)),[3,3];case 2:r===Ls.PERSISTENT&&(i.state=$i.PERSISTENT),s.label=3;case 3:return[2,i]}})})},e.prototype.get=function(n,t){t===void 0&&(t=Ls.DEFAULT);var r=this._items.map(function(a){return a.key}).indexOf(n);if(r>-1){var i=this._items[r];return t===Ls.PERSISTENT&&(i.state=$i.PERSISTENT),t!==Ls.NO_CACHE&&this.put(i),i}return null},e.prototype.put=function(n){var t,r;if(this._limit>0){var i=this._items.map(function(h){return h.key}).indexOf(n.key);if(i>-1)pR.includes(this._items[i].state)&&pR.includes(n.state)?(this._items.splice(i,1),this._items.push(n)):(this._items[i].state=n.state,this._items[i].value=n.value);else{this._items.push(n);var a=this._items.filter(function(h){return h.state===$i.VOLATILE}),s=a.length-this._limit;if(s>0){var o=[];try{for(var l=ye(this._items),u=l.next();!u.done;u=l.next()){var c=u.value;c.state===$i.VOLATILE&&s>0?s--:o.push(c)}}catch(h){t={error:h}}finally{try{u&&!u.done&&(r=l.return)&&r.call(l)}finally{if(t)throw t.error}}this._items=o}}}},e.prototype.remove=function(n){var t=this._items.map(function(r){return r.key}).indexOf(n);t>-1&&this._items.splice(t,1)},e.prototype.clearByCondition=function(n){this._items=this._items.filter(function(t){return!n(t)})},e.prototype.clearForDatabase=function(n){this.clearByCondition(function(t){return t.key.startsWith(WN(n))})},e.prototype.clear=function(n){n===void 0&&(n=!1),this._items=n?[]:this._items.filter(function(t){return t.state!==$i.VOLATILE})},e}(),TW=function(){function e(n){var t=n.dbname,r=n.collectionName,i=n.store;this._requests=[],this._onCommit=new Map,this._onWrite=new Map,this._onError=new Map,this.dbname=t,this.collectionName=r,this.metadataKey=function(a,s){return"".concat(Sd(a,s),"/trans.metadata")}(t,r),this.recordsetKey=function(a,s){return"".concat(Sd(a,s),"/trans.recordset")}(t,r),this._store=i}return Object.defineProperty(e.prototype,"generation",{get:function(){return this._metadata?this._metadata.generation:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"requestCount",{get:function(){return this._requests.length},enumerable:!1,configurable:!0}),e.prototype._getReducedRecordset=function(n){return n===void 0&&(n=[]),N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:return[4,this._store.get(this.recordsetKey)];case 1:return(t=r.sent()||[]).push.apply(t,it([],Ge(n),!1)),[2,this._reduceRecordSet(t)]}})})},e.prototype._reduceRecordSet=function(n){for(var t=[],r={},i=n.length-1;i>=0;i--){for(var a=n[i],s=[],o=a.requests.length-1;o>=0;o--){var l=a.requests[o],u=l.data;r[u.key]||(s.unshift(l),r[u.key]=!0)}s.length>0&&(a.requests=s,t.unshift(a))}return t},e.prototype._applyRecord=function(n,t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u,c,h;return T(this,function(f){switch(f.label){case 0:r=ta.get(this.dbname),i=t.generation,a=t.requests,s=null,f.label=1;case 1:return f.trys.push([1,3,,4]),[4,this._store.setMany(a.map(function(p){return z(z({},p.data),{generation:i})}))];case 2:for(o=f.sent(),l=0;l<a.length;l++)o[l]instanceof Error&&(s||(s=o[l]),u=a[l].data,r.put(z(z({},u),{state:$i.PERSISTENT})));return[3,4];case 3:return c=f.sent(),s=c,[3,4];case 4:return s?[3,6]:(h=n.filter(function(p){return p.generation!==i}),[4,this._store.set({key:this.recordsetKey,value:h})]);case 5:return f.sent(),this._onWrite.forEach(function(p){p(a.map(function(_){return _.data}))}),[3,7];case 6:this._onError.forEach(function(p){s&&p(s)}),f.label=7;case 7:return[2]}})})},e.prototype.init=function(){return N(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:return n=this,[4,this._store.get(this.metadataKey)];case 1:return n._metadata=u.sent()||{generation:1},[4,this._getReducedRecordset()];case 2:t=u.sent(),u.label=3;case 3:u.trys.push([3,8,9,10]),r=ye(t),i=r.next(),u.label=4;case 4:return i.done?[3,7]:(a=i.value,[4,this._applyRecord(t,a)]);case 5:u.sent(),u.label=6;case 6:return i=r.next(),[3,4];case 7:return[3,10];case 8:return s=u.sent(),o={error:s},[3,10];case 9:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 10:return[2]}})})},e.prototype.on=function(n,t,r){switch(n){case dd.COMMIT:this._onCommit.set(t,r);break;case dd.WRITE:this._onWrite.set(t,r);break;case dd.ERROR:this._onError.set(t,r)}},e.prototype.requestWrite=function(n,t){this._requests.push({data:n,options:t}),ta.get(this.dbname).put(z({state:$i.PENDING},n))},e.prototype.requestMultipleWrite=function(n,t){var r,i,a=ta.get(this.dbname);try{for(var s=ye(n),o=s.next();!o.done;o=s.next()){var l=o.value;this._requests.push({data:l,options:t}),a.put(z({state:$i.PENDING},l))}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},e.prototype.clear=function(){return N(this,void 0,void 0,function(){return T(this,function(n){return ta.get(this.dbname).clearByCondition(function(t){return t.state===$i.PENDING}),this._requests=[],[2]})})},e.prototype.commit=function(){return N(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u,c,h,f,p=this;return T(this,function(_){switch(_.label){case 0:if(!((n=this._requests).length>0))return[3,4];for(t=[],r={},l=n.length-1;l>=0;l--)i=n[l],c=i.data,r[c.key]||(r[c.key]=!0,t.unshift(i));return a={generation:this.generation,requests:t},[4,this._getReducedRecordset([a])];case 1:return s=_.sent(),[4,this._store.set({key:this.recordsetKey,value:s})];case 2:return _.sent(),this._metadata.generation++,[4,this._store.set({key:this.metadataKey,value:this._metadata})];case 3:for(_.sent(),o=ta.get(this.dbname),l=0;l<t.length;l++)u=t[l],c=u.data,h=u.options,o.put(z(z({},c),{state:h&&h.persistent?$i.PERSISTENT:$i.VOLATILE}));this._requests=[],this._onCommit.forEach(function(g){g(n.map(function(C){return C.data}))}),f=rm.get(this.dbname),setTimeout(function(){try{p._applyRecord(s,a)}catch(g){p._onError.forEach(function(C){return C(g)})}},f.transactionApplyDelay),_.label=4;case 4:return[2]}})})},e}(),np=function(){function e(n){var t=n.blockId,r=n.keyName,i=n.items,a=i===void 0?[]:i,s=n.limit;this.blockId=t,this.keyName=r,this.limit=s,this._items=it([],Ge(a),!1)}return e.createFromCacheItem=function(n){return n?new e(n.value):null},Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this._items.length===0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},enumerable:!1,configurable:!0}),e.prototype.serialize=function(){return{blockId:this.blockId,keyName:this.keyName,limit:this.limit,items:this._items}},e.prototype.getItemByKey=function(n){var t=this,r=this._items.find(function(i){var a=i[t.keyName];return n===a});return r??null},e.prototype.has=function(n){var t=this;return this._items.map(function(r){return r[t.keyName]}).includes(n)},e.prototype.add=function(n){var t=this,r=this._items.map(function(i){return i[t.keyName]}).indexOf(n[this.keyName]);return r<0?this._items.length<this.limit&&(this._items.push(n),!0):(this._items[r]=n,!0)},e.prototype.remove=function(n){for(var t=0;t<this._items.length;t++)if(this._items[t][this.keyName]===n)return this._items.splice(t,1),!0;return!1},e.prototype.clear=function(){this._items=[]},e}(),NW=function(){function e(n){var t=n.dbname,r=n.collectionName,i=n.metadata,a=n.hashFunction,s=a===void 0?dR:a,o=n.transaction,l=n.store;this.dbname=t,this.collectionName=r,this.hashFunction=s,this.metadata=i,this._transaction=o,this._store=l}return Object.defineProperty(e.prototype,"keyName",{get:function(){return this.metadata.keyName},enumerable:!1,configurable:!0}),e.prototype.createBlockId=function(n,t){return t===void 0&&(t=this.metadata.blockLevel),r=this.dbname,i=this.collectionName,a=t,s="".concat(function(o,l,u){var c=u.base*Math.pow(u.multiplier,l)+u.constant;return(u.hashFunction||dR)(o,c)}(n,t,{hashFunction:this.hashFunction,base:this.metadata.blockHashBase,multiplier:this.metadata.blockHashMultiplier,constant:this.metadata.blockHashConstant})),"".concat(_0(r,i)).concat(a,".").concat(s);var r,i,a,s},e.prototype._findBlock=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s;return T(this,function(o){switch(o.label){case 0:t=ta.get(this.dbname),r=this.metadata.blockLevel,o.label=1;case 1:return r>0?(i=this.createBlockId(n,r),[4,t.find(this._store,i)]):[3,4];case 2:if((a=o.sent())&&(s=np.createFromCacheItem(a),s==null?void 0:s.getItemByKey(n)))return[2,s];o.label=3;case 3:return r--,[3,1];case 4:return[2,null]}})})},e.prototype.getFromBlock=function(n){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:return[4,this._findBlock(n)];case 1:return[2,(t=r.sent())?t.getItemByKey(n):null]}})})},e.prototype.putToBlock=function(n,t){return N(this,void 0,void 0,function(){var r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return r=rm.get(this.dbname),i=this.createBlockId(n),a=Math.floor(this._store.itemSizeLimit/r.itemSizeLimit),[4,ta.get(this.dbname).find(this._store,i)];case 1:return s=l.sent(),(o=s?np.createFromCacheItem(s):new np({blockId:i,keyName:this.keyName,items:[],limit:a}))!=null&&o.add(t)?(this._transaction.requestWrite({key:o.blockId,value:o.serialize()}),[2,!0]):[2,!1]}})})},e.prototype.removeFromBlock=function(n){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:return[4,this._findBlock(n)];case 1:return(t=r.sent())&&t.remove(n)?(this._transaction.requestWrite({key:t.blockId,value:t.serialize()}),[2,!0]):[2,!1]}})})},e.prototype.clearAllBlocks=function(){return N(this,void 0,void 0,function(){var n,t,r;return T(this,function(i){switch(i.label){case 0:return n=_0(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 1:return t=i.sent(),r=t.filter(function(a){return a.startsWith(n)}),[4,this._store.removeMany(r)];case 2:return i.sent(),[4,this._transaction.clear()];case 3:return i.sent(),ta.get(this.dbname).clearByCondition(function(a){return a.key.startsWith(n)}),[2]}})})},e}(),cu=function(){function e(n){var t=n.dbname,r=n.collectionName,i=n.keyName,a=n.fields,s=n.transaction,o=n.store,l=this;this._origin=[],this._table=[],this.restoreInterval=1e3;var u=function(c,h,f){return"".concat(Sd(c,h),"/index.").concat(f)}(t,r,a.join(">"));this.dbname=t,this.collectionName=r,this.keyName=i,this.fields=a,this.indexerKey=u,this._store=o,this._transaction=s,this._transaction.on(dd.COMMIT,this.indexerKey,function(){return l.commit()}),this._transaction.on(dd.ERROR,this.indexerKey,function(){return l.abort()}),this._lastRestoreIndexerTime=0,this._isRestoringIndexer=!1}return e.createKey=function(n){return n.join(">")},e.parseKey=function(n){return n.split(">")},e.prototype._addItem=function(n){var t=n[this.keyName],r=this.getColumnValues(n),i=Ge(this.indexOf(r),2),a=i[0];return i[1]?!this._table[a].keys.includes(t)&&(this._table[a].keys.push(t),!0):(this._table.splice(a,0,{columnValues:r,keys:[t]}),!0)},e.prototype._removeItem=function(n){var t=n[this.keyName],r=this.getColumnValues(n),i=Ge(this.indexOf(r),2),a=i[0];if(i[1]){var s=this._table[a].keys.indexOf(t);if(s>-1)return this._table[a].keys.splice(s,1),this._table[a].keys.length===0&&this._table.splice(a,1),!0}return!1},Object.defineProperty(e.prototype,"origin",{get:function(){return this._origin},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"table",{get:function(){return this._table},enumerable:!1,configurable:!0}),e.prototype.getColumnValues=function(n){var t,r,i,a,s=[];try{for(var o=ye(this.fields),l=o.next();!l.done;l=o.next()){var u=l.value;if(u[0]==="-"&&(u=u.slice(1)),i=n[u],a=void 0,a=typeof i,i!==null&&a!=="undefined"&&a!=="boolean"&&a!=="number"&&a!=="string")throw Rn.indexTypesNotMatch;s.push(n[u])}}catch(c){t={error:c}}finally{try{l&&!l.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return s},e.prototype.diff=function(n,t){for(var r in this.fields){var i=this.fields[r][0]==="-"?-1:1,a=Dl(n[r],t[r]);if(a!==0)return i*a}return 0},e.prototype.indexOf=function(n){if(this._table.length>0){for(var t=0,r=this._table.length-1;t<=r;){var i=Math.floor((t+r)/2),a=this.diff(n,this._table[i].columnValues);if(a>0)t=i+1;else{if(!(a<0))return[i,!0];r=i-1}}return[t,!1]}return[0,!1]},e.prototype.ensure=function(){return N(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u,c,h,f,p,_,g,C,E;return T(this,function(y){switch(y.label){case 0:return[4,(n=ta.get(this.dbname)).find(this._store,this.indexerKey,Ls.PERSISTENT)];case 1:return(t=y.sent())?[3,11]:(r=_0(this.dbname,this.collectionName),[4,this._store.getAllKeys()]);case 2:i=y.sent(),y.label=3;case 3:y.trys.push([3,8,9,10]),a=ye(i),s=a.next(),y.label=4;case 4:return s.done?[3,7]:(o=s.value).startsWith(r)?[4,n.find(this._store,o,Ls.NO_CACHE)]:[3,6];case 5:if(l=y.sent(),u=np.createFromCacheItem(l))try{for(C=void 0,c=ye(u.items),h=c.next();!h.done;h=c.next())f=h.value,this._addItem(f)}catch(S){C={error:S}}finally{try{h&&!h.done&&(E=c.return)&&E.call(c)}finally{if(C)throw C.error}}y.label=6;case 6:return s=a.next(),[3,4];case 7:return[3,10];case 8:return p=y.sent(),_={error:p},[3,10];case 9:try{s&&!s.done&&(g=a.return)&&g.call(a)}finally{if(_)throw _.error}return[7];case 10:return this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[3,12];case 11:this._origin=t.value,this._table=Gi(this._origin),y.label=12;case 12:return[2]}})})},e.prototype.restoreIndexer=function(){return N(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w,R,A,U,O,B,F,P,G,L,$,j,X,K,Z,te;return T(this,function(ne){switch(ne.label){case 0:return n=Date.now(),this._isRestoringIndexer||n-this._lastRestoreIndexerTime<this.restoreInterval?[2]:(this._lastRestoreIndexerTime=n,this._isRestoringIndexer=!0,[4,(t=ta.get(this.dbname)).find(this._store,this.indexerKey,Ls.PERSISTENT)]);case 1:(r=ne.sent())?(this._origin=r.value,this._table=Gi(this._origin)):this._table=[],i=new Set;try{for(a=ye(this._table),s=a.next();!s.done;s=a.next()){o=s.value;try{for(G=void 0,l=ye(o.keys),u=l.next();!u.done;u=l.next())O=u.value,i.add(O)}catch(le){G={error:le}}finally{try{u&&!u.done&&(L=l.return)&&L.call(l)}finally{if(G)throw G.error}}}}catch(le){F={error:le}}finally{try{s&&!s.done&&(P=a.return)&&P.call(a)}finally{if(F)throw F.error}}return c=_0(this.dbname,this.collectionName),[4,this._store.getAllKeys()];case 2:h=ne.sent(),f=new Set,p=new Map,ne.label=3;case 3:ne.trys.push([3,8,9,10]),_=ye(h),g=_.next(),ne.label=4;case 4:return g.done?[3,7]:(O=g.value).startsWith(c)?[4,t.find(this._store,O,Ls.NO_CACHE)]:[3,6];case 5:if(C=ne.sent(),E=np.createFromCacheItem(C))try{for(X=void 0,y=ye(E.items),S=y.next();!S.done;S=y.next())B=S.value,I=B[this.keyName],f.add(I),p.set(I,B)}catch(le){X={error:le}}finally{try{S&&!S.done&&(K=y.return)&&K.call(y)}finally{if(X)throw X.error}}ne.label=6;case 6:return g=_.next(),[3,4];case 7:return[3,10];case 8:return w=ne.sent(),$={error:w},[3,10];case 9:try{g&&!g.done&&(j=_.return)&&j.call(_)}finally{if($)throw $.error}return[7];case 10:if(f.size===0)return this._isRestoringIndexer=!1,[2];R=!1;try{for(A=ye(f),U=A.next();!U.done;U=A.next())O=U.value,i.has(O)||(R=!0,(B=p.get(O))&&this._addItem(B))}catch(le){Z={error:le}}finally{try{U&&!U.done&&(te=A.return)&&te.call(A)}finally{if(Z)throw Z.error}}return R?(this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),this._origin=Gi(this._table),this._isRestoringIndexer=!1,[2]):(this._isRestoringIndexer=!1,[2])}})})},e.prototype.drop=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return ta.get(this.dbname).remove(this.indexerKey),[4,this._store.remove(this.indexerKey)];case 1:return n.sent(),[2]}})})},e.prototype.addItem=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){return this._addItem(n)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.removeItem=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){return this._removeItem(n)&&this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.clear=function(){return N(this,void 0,void 0,function(){return T(this,function(n){return this._table=[],this._transaction.requestWrite({key:this.indexerKey,value:this._table},{persistent:!0}),[2]})})},e.prototype.commit=function(){this._origin=this._table,this._table=Gi(this._origin)},e.prototype.abort=function(){this._table=Gi(this._origin)},e}(),g0=function(){return typeof document<"u"&&typeof navigator<"u"&&navigator.product!=="ReactNative"},mR=function(){var e=new Date().getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=(e+16*Math.random())%16|0;return e=Math.floor(e/16),(n==="x"?t:3&t|8).toString(16)})};(function(e){e[e.PROCESSING=0]="PROCESSING",e[e.DONE=1]="DONE"})(tp||(tp={})),function(e){e.NEWNODE="newnode",e.REMOVENODE="removenode",e.CLAIM_HOST="claimhost",e.SYNC_HOST="synchost",e.REQUEST_LOCK="requestlock",e.ACQUIRE_LOCK="acquirelock",e.RELEASE_LOCK="releaselock"}(xi||(xi={}));var ro,$b={},YN=function(){function e(n,t){t===void 0&&(t={});var r=this;return this._state=tp.PROCESSING,this._queue=[],this._activationQueue=[],$b[n]&&!t.forceCreate||(this.nodeId=mR(),this.key=n,g0()&&(t.startAsInvisible?this.registerNode():document.visibilityState==="visible"?this.claimHost():this.registerNode(),document.addEventListener("visibilitychange",function(){document.visibilityState==="visible"&&r.claimHost()}),window.addEventListener("message",function(i){var a,s,o=i.data;if(o!=null&&o.isNestDbMessage){var l=o.nodeId,u=o.requestId,c=o.key,h=o.op,f=o.data;if(l!==r.nodeId&&c===r.key)switch(h){case xi.NEWNODE:r._sendSync();break;case xi.CLAIM_HOST:r._sendSync(),r._hostId=l;break;case xi.SYNC_HOST:if(!r.isInSync){r._activationTimeout&&clearTimeout(r._activationTimeout);var p=f,_=p.currentItemRequestId,g=p.queue,C=function(I){var w=r._queue.findIndex(function(R){return R.requestId===I.requestId});w<0&&r._requestLock({isNestDbMessage:!0,nodeId:I.nodeId,requestId:I.requestId,key:r.key,op:xi.REQUEST_LOCK,ts:I.ts})};try{for(var E=ye(g),y=E.next();!y.done;y=E.next())C(y.value)}catch(I){a={error:I}}finally{try{y&&!y.done&&(s=E.return)&&s.call(E)}finally{if(a)throw a.error}}r._currentItem=r._queue.find(function(I){return I.requestId===_}),r._completeSync()}break;case xi.REMOVENODE:r._queue=r._queue.filter(function(I){return I.nodeId!==o.nodeId}),r._currentItem&&r._currentItem.nodeId===o.nodeId&&(r._currentItem=void 0,r._acquire(r._queue[0]));break;case xi.REQUEST_LOCK:r._requestLock(o);break;case xi.ACQUIRE_LOCK:var S=r._queue.find(function(I){return I.requestId===u});r._acquire(S);break;case xi.RELEASE_LOCK:r._release(u)}}}),window.addEventListener("beforeunload",function(){r._send(xi.REMOVENODE)})),$b[n]=this),$b[n]}return Object.defineProperty(e.prototype,"locked",{get:function(){return!!this._currentItem},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isHost",{get:function(){return this._hostId===this.nodeId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInSync",{get:function(){return this._state==tp.DONE},enumerable:!1,configurable:!0}),e.prototype._send=function(n,t){var r;t===void 0&&(t={});var i={isNestDbMessage:!0,nodeId:this.nodeId,requestId:(r=t==null?void 0:t.requestId)!==null&&r!==void 0?r:mR(),key:this.key,op:n,data:t.data,ts:Date.now()};return g0()&&window.postMessage(i,"*"),i},e.prototype._acquire=function(n){n?(this._currentItem=n,this._currentItem.onAcquired&&this._currentItem.onAcquired(n.requestId)):this._currentItem=void 0},e.prototype._release=function(n){if(this._currentItem&&this._currentItem.requestId===n){var t=this._currentItem;this._currentItem=void 0,t.nodeId===this.nodeId&&this._send(xi.RELEASE_LOCK,{requestId:t.requestId});var r=this._queue.findIndex(function(i){return i.requestId===n});r>-1&&this._queue.splice(r,1),t.onReleased&&t.onReleased(n)}},e.prototype._requestLock=function(n){var t=this;return new Promise(function(r){for(var i={nodeId:n.nodeId,requestId:n.requestId,ts:n.ts,onAcquired:function(o){t.isHost&&t._send(xi.ACQUIRE_LOCK,{requestId:o}),r()},onReleased:function(){t._acquire(t._queue[0])}},a=!1,s=0;s<t._queue.length;s++)if(t._queue[s].ts>i.ts){t._queue.splice(s,0,i),a=!0;break}a||t._queue.push(i),t._currentItem||t._acquire(t._queue[0])})},e.prototype._sendSync=function(){var n;this.isHost&&this._send(xi.SYNC_HOST,{data:{currentItemRequestId:(n=this._currentItem)===null||n===void 0?void 0:n.requestId,queue:this._queue.map(function(t){return{nodeId:t.nodeId,requestId:t.requestId,ts:t.ts}})}})},e.prototype._waitUntilSyncCompleted=function(){return N(this,void 0,void 0,function(){var n=this;return T(this,function(t){return this.isHost&&!this.isInSync?[2,new Promise(function(r){n._activationQueue.push(r)})]:[2]})})},e.prototype._waitSync=function(){var n=this;this.isInSync||(this._activationTimeout=setTimeout(function(){n._completeSync()},8))},e.prototype._completeSync=function(){this.isInSync||(this._state=tp.DONE,this._activationQueue.forEach(function(n){return n()}),this._activationQueue=[])},e.prototype.registerNode=function(){this._send(xi.NEWNODE),this._waitSync()},e.prototype.claimHost=function(){this._hostId=this.nodeId,this._send(xi.CLAIM_HOST),this._waitSync()},e.prototype.lock=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){switch(t.label){case 0:return[4,this._waitUntilSyncCompleted()];case 1:return t.sent(),n=this._send(xi.REQUEST_LOCK),[4,this._requestLock(n)];case 2:return t.sent(),[2]}})})},e.prototype.unlock=function(){var n;!((n=this._currentItem)===null||n===void 0)&&n.requestId&&this._release(this._currentItem.requestId)},e}(),Vb=function(){function e(n){var t=n.dbname,r=n.collectionName,i=n.keyName,a=n.keyHash,s=n.indexes,o=n.store,l=this;this._state=id.INIT,this._indexers=[],this.dbname=t,this.name=r,this.keyName=i,this.indexes=it([[i]],Ge(s.filter(function(u){return cu.createKey(u)!==l.keyName})),!1),this._keyHash=a,this._store=o,this._mutex=new YN(function(u,c){return"".concat(Sd(u,c),".lock")}(t,r)),this._blobContainer=new SW({dbname:t,collectionName:r,store:o}),this._transaction=new TW({dbname:t,collectionName:r,store:o})}return e.metadataOf=function(n,t,r){return N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return i=Gb(n,t),[4,r.get(i)];case 1:return[2,a.sent()]}})})},Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isReady",{get:function(){return this._state===id.READY},enumerable:!1,configurable:!0}),e.prototype.init=function(){return N(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u,c,h,f,p,_,g=this;return T(this,function(C){switch(C.label){case 0:return[4,this._mutex.lock()];case 1:C.sent(),C.label=2;case 2:return C.trys.push([2,9,,10]),n=rm.get(this.dbname),[4,e.metadataOf(this.dbname,this.name,this._store)];case 3:return t=C.sent(),this._metadata=t||{keyName:this.keyName,blockLevel:1,blockHashBase:n.blockHashBase,blockHashMultiplier:n.blockHashMultiplier,blockHashConstant:n.blockHashConstant,indexes:this.indexes},[4,this._transaction.init()];case 4:C.sent(),this._blockManager=new NW({dbname:this.dbname,collectionName:this.name,hashFunction:this._keyHash,metadata:this._metadata,transaction:this._transaction,store:this._store}),r=it([],Ge(this.indexes),!1),i=[],a=r.map(function(E){return cu.createKey(E)}),s=t?t.indexes.map(function(E){return cu.createKey(E)}):[];try{for(o=ye(s),l=o.next();!l.done;l=o.next())u=l.value,a.includes(u)||i.push(cu.parseKey(u))}catch(E){p={error:E}}finally{try{l&&!l.done&&(_=o.return)&&_.call(o)}finally{if(p)throw p.error}}return(c=[]).push.apply(c,it([],Ge(r.map(function(E){var y=new cu({dbname:g.dbname,collectionName:g.name,keyName:g.keyName,fields:E,transaction:g._transaction,store:g._store});return g._indexers.push(y),y.ensure()})),!1)),c.push.apply(c,it([],Ge(i.map(function(E){return new cu({dbname:g.dbname,collectionName:g.name,keyName:g.keyName,fields:E,transaction:g._transaction,store:g._store}).drop()})),!1)),[4,Promise.all(c)];case 5:return C.sent(),[4,this._transaction.commit()];case 6:return C.sent(),a.sort().join(",")===s.sort().join(",")?[3,8]:(h=Gb(this.dbname,this.name),this._metadata.indexes=r,[4,this._store.set({key:h,value:this._metadata})]);case 7:C.sent(),C.label=8;case 8:return this._state=id.READY,this._mutex.unlock(),[3,10];case 9:throw f=C.sent(),this._mutex.unlock(),f;case 10:return[2]}})})},e.prototype.close=function(){this._state=id.CLOSED},e.prototype._hasPropertyOfKeyName=function(n){var t=n[this.keyName];return typeof t=="string"&&!!t},e.prototype._getIndexerBy=function(n){var t,r;n===void 0&&(n=null),n||(n=[this.keyName]);var i=cu.createKey(n);try{for(var a=ye(this._indexers),s=a.next();!s.done;s=a.next()){var o=s.value;if(i===cu.createKey(o.fields))return o}}catch(l){t={error:l}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}throw Rn.indexTableIsRequired},e.prototype._upgradeBlockLevel=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){switch(t.label){case 0:return n=Gb(this.dbname,this.name),this._metadata.blockLevel++,[4,this._store.set({key:n,value:this._metadata})];case 1:return t.sent(),[2]}})})},e.prototype._requestInsert=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return t=n[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return l.sent()?[3,13]:[4,this._blockManager.putToBlock(t,n)];case 2:return l.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return l.sent(),[4,this._blockManager.putToBlock(t,n)];case 4:l.sent(),l.label=5;case 5:l.trys.push([5,10,11,12]),r=ye(this._indexers),i=r.next(),l.label=6;case 6:return i.done?[3,9]:[4,i.value.addItem(n)];case 7:l.sent(),l.label=8;case 8:return i=r.next(),[3,6];case 9:return[3,12];case 10:return a=l.sent(),s={error:a},[3,12];case 11:try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}return[7];case 12:return[3,14];case 13:throw Rn.collectionInsertDuplicate;case 14:return[2]}})})},e.prototype._requestUpsert=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,c,h,f,p,_;return T(this,function(g){switch(g.label){case 0:return t=n[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(r=g.sent())?[3,13]:[4,this._blockManager.putToBlock(t,n)];case 2:return g.sent()?[3,5]:[4,this._upgradeBlockLevel()];case 3:return g.sent(),[4,this._blockManager.putToBlock(t,n)];case 4:g.sent(),g.label=5;case 5:g.trys.push([5,10,11,12]),i=ye(this._indexers),a=i.next(),g.label=6;case 6:return a.done?[3,9]:[4,(u=a.value).addItem(n)];case 7:g.sent(),g.label=8;case 8:return a=i.next(),[3,6];case 9:return[3,12];case 10:return s=g.sent(),h={error:s},[3,12];case 11:try{a&&!a.done&&(f=i.return)&&f.call(i)}finally{if(h)throw h.error}return[7];case 12:return[3,23];case 13:return[4,this._blockManager.putToBlock(t,n)];case 14:g.sent(),g.label=15;case 15:g.trys.push([15,21,22,23]),o=ye(this._indexers),l=o.next(),g.label=16;case 16:return l.done?[3,20]:(u=l.value).diff(u.getColumnValues(r),u.getColumnValues(n))===0?[3,19]:[4,u.removeItem(r)];case 17:return g.sent(),[4,u.addItem(n)];case 18:g.sent(),g.label=19;case 19:return l=o.next(),[3,16];case 20:return[3,23];case 21:return c=g.sent(),p={error:c},[3,23];case 22:try{l&&!l.done&&(_=o.return)&&_.call(o)}finally{if(p)throw p.error}return[7];case 23:return[2]}})})},e.prototype._requestUpdate=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return t=n[this.keyName],[4,this._blockManager.getFromBlock(t)];case 1:return(r=c.sent())?[4,this._blockManager.putToBlock(t,n)]:[3,11];case 2:c.sent(),c.label=3;case 3:c.trys.push([3,9,10,11]),i=ye(this._indexers),a=i.next(),c.label=4;case 4:return a.done?[3,8]:(s=a.value).diff(s.getColumnValues(r),s.getColumnValues(n))===0?[3,7]:[4,s.removeItem(r)];case 5:return c.sent(),[4,s.addItem(n)];case 6:c.sent(),c.label=7;case 7:return a=i.next(),[3,4];case 8:return[3,11];case 9:return o=c.sent(),l={error:o},[3,11];case 10:try{a&&!a.done&&(u=i.return)&&u.call(i)}finally{if(l)throw l.error}return[7];case 11:return[2]}})})},e.prototype._requestRemove=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return[4,this._blockManager.getFromBlock(n)];case 1:return(t=l.sent())?[4,this._blockManager.removeFromBlock(n)]:[3,10];case 2:l.sent(),l.label=3;case 3:l.trys.push([3,8,9,10]),r=ye(this._indexers),i=r.next(),l.label=4;case 4:return i.done?[3,7]:[4,i.value.removeItem(t)];case 5:l.sent(),l.label=6;case 6:return i=r.next(),[3,4];case 7:return[3,10];case 8:return a=l.sent(),s={error:a},[3,10];case 9:try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}return[7];case 10:return[2]}})})},e.prototype._requestClear=function(){return N(this,void 0,void 0,function(){var n,t,r,i,a;return T(this,function(s){switch(s.label){case 0:return[4,this._blockManager.clearAllBlocks()];case 1:s.sent(),s.label=2;case 2:s.trys.push([2,7,8,9]),n=ye(this._indexers),t=n.next(),s.label=3;case 3:return t.done?[3,6]:[4,t.value.clear()];case 4:s.sent(),s.label=5;case 5:return t=n.next(),[3,3];case 6:return[3,9];case 7:return r=s.sent(),i={error:r},[3,9];case 8:try{t&&!t.done&&(a=n.return)&&a.call(n)}finally{if(i)throw i.error}return[7];case 9:return[2]}})})},e.prototype.getByKey=function(n){return N(this,void 0,void 0,function(){var t,r;return T(this,function(i){switch(i.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,6];case 1:i.sent(),i.label=2;case 2:return i.trys.push([2,4,,5]),[4,this._blockManager.getFromBlock(n)];case 3:return t=i.sent(),this._mutex.unlock(),[2,Gi(t)];case 4:throw r=i.sent(),this._mutex.unlock(),r;case 5:return[3,7];case 6:throw Rn.collectionNotReady;case 7:return[2]}})})},e.prototype.query=function(n){if(n===void 0&&(n={}),this.isReady)return new CW({condition:n.where,mutex:this._mutex,blockManager:this._blockManager,indexer:this._getIndexerBy(n.index),backward:!!n.backward});throw Rn.collectionNotReady},e.prototype.insertOne=function(n){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:if(r.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(n))throw Rn.collectionKeyNotGiven;return[4,this._requestInsert(Gi(n))];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[2,n];case 5:return t=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Rn.collectionNotReady;case 9:return[2]}})})},e.prototype.insertMany=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u=this;return T(this,function(c){switch(c.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:c.sent(),c.label=2;case 2:if(c.trys.push([2,12,,14]),n.some(function(h){return!u._hasPropertyOfKeyName(h)}))throw Rn.collectionKeyNotGiven;c.label=3;case 3:c.trys.push([3,8,9,10]),t=ye(n),r=t.next(),c.label=4;case 4:return r.done?[3,7]:(i=r.value,[4,this._requestInsert(Gi(i))]);case 5:c.sent(),c.label=6;case 6:return r=t.next(),[3,4];case 7:return[3,10];case 8:return a=c.sent(),o={error:a},[3,10];case 9:try{r&&!r.done&&(l=t.return)&&l.call(t)}finally{if(o)throw o.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return c.sent(),this._mutex.unlock(),[2,n];case 12:return s=c.sent(),[4,this._transaction.clear()];case 13:throw c.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw Rn.collectionNotReady;case 16:return[2]}})})},e.prototype.upsertOne=function(n){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:if(r.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(n))throw Rn.collectionKeyNotGiven;return[4,this._requestUpsert(Gi(n))];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[2,n];case 5:return t=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Rn.collectionNotReady;case 9:return[2]}})})},e.prototype.upsertMany=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u=this;return T(this,function(c){switch(c.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:c.sent(),c.label=2;case 2:if(c.trys.push([2,12,,14]),n.some(function(h){return!u._hasPropertyOfKeyName(h)}))throw Rn.collectionKeyNotGiven;c.label=3;case 3:c.trys.push([3,8,9,10]),t=ye(n),r=t.next(),c.label=4;case 4:return r.done?[3,7]:(i=r.value,[4,this._requestUpsert(Gi(i))]);case 5:c.sent(),c.label=6;case 6:return r=t.next(),[3,4];case 7:return[3,10];case 8:return a=c.sent(),o={error:a},[3,10];case 9:try{r&&!r.done&&(l=t.return)&&l.call(t)}finally{if(o)throw o.error}return[7];case 10:return[4,this._transaction.commit()];case 11:return c.sent(),this._mutex.unlock(),[2,n];case 12:return s=c.sent(),[4,this._transaction.clear()];case 13:throw c.sent(),this._mutex.unlock(),s;case 14:return[3,16];case 15:throw Rn.collectionNotReady;case 16:return[2]}})})},e.prototype.update=function(n){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:if(r.trys.push([2,5,,7]),!this._hasPropertyOfKeyName(n))throw Rn.collectionKeyNotGiven;return[4,this._requestUpdate(Gi(n))];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[2,n];case 5:return t=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Rn.collectionNotReady;case 9:return[2]}})})},e.prototype.updateIf=function(n,t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u,c,h,f,p,_,g,C,E=this;return T(this,function(y){switch(y.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,16];case 1:y.sent(),y.label=2;case 2:return y.trys.push([2,13,,15]),r=n.where,i=r===void 0?{}:r,a=n.index,s=a===void 0?null:a,o=n.backward,l=o!==void 0&&o,u=[],[4,new B1({condition:i,blockManager:this._blockManager,backward:l,indexer:this._getIndexerBy(s)}).each(function(S){return N(E,void 0,void 0,function(){var I;return T(this,function(w){if(S.error)throw S.stop(),S.error;return S.hasNext?(I=S.nextValue,cd(i,I)&&t.set&&(typeof t.set!="function"?Object.keys(t.set).forEach(function(R){var A;I[R]=(A=t.set)===null||A===void 0?void 0:A[R]}):t.set(I),u.push(I)),S.next()):S.stop(),[2]})})})];case 3:y.sent(),y.label=4;case 4:y.trys.push([4,9,10,11]),c=ye(u),h=c.next(),y.label=5;case 5:return h.done?[3,8]:(f=h.value,[4,this._requestUpdate(Gi(f))]);case 6:y.sent(),y.label=7;case 7:return h=c.next(),[3,5];case 8:return[3,11];case 9:return p=y.sent(),g={error:p},[3,11];case 10:try{h&&!h.done&&(C=c.return)&&C.call(c)}finally{if(g)throw g.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return y.sent(),this._mutex.unlock(),[2,u];case 13:return _=y.sent(),[4,this._transaction.clear()];case 14:throw y.sent(),this._mutex.unlock(),_;case 15:return[3,17];case 16:throw this._transaction.clear(),Rn.collectionNotReady;case 17:return[2]}})})},e.prototype.remove=function(n){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,5,,7]),[4,this._requestRemove(n)];case 3:return r.sent(),[4,this._transaction.commit()];case 4:return r.sent(),this._mutex.unlock(),[3,7];case 5:return t=r.sent(),[4,this._transaction.clear()];case 6:throw r.sent(),this._mutex.unlock(),t;case 7:return[3,9];case 8:throw Rn.collectionNotReady;case 9:return[2]}})})},e.prototype.removeIf=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,c,h,f,p,_,g,C=this;return T(this,function(E){switch(E.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,15];case 1:E.sent(),E.label=2;case 2:return E.trys.push([2,13,,14]),t=n.where,r=t===void 0?{}:t,i=n.index,a=i===void 0?null:i,s=n.backward,o=s!==void 0&&s,l=[],[4,new B1({condition:r,blockManager:this._blockManager,backward:o,indexer:this._getIndexerBy(a)}).each(function(y){return N(C,void 0,void 0,function(){var S,I;return T(this,function(w){if(y.error)throw y.stop(),y.error;return y.hasNext?(S=y.nextValue,cd(r,S)&&(I=S[this.keyName],l.push(I)),y.next()):y.stop(),[2]})})})];case 3:E.sent(),E.label=4;case 4:E.trys.push([4,9,10,11]),u=ye(l),c=u.next(),E.label=5;case 5:return c.done?[3,8]:(h=c.value,[4,this._requestRemove(h)]);case 6:E.sent(),E.label=7;case 7:return c=u.next(),[3,5];case 8:return[3,11];case 9:return f=E.sent(),_={error:f},[3,11];case 10:try{c&&!c.done&&(g=u.return)&&g.call(u)}finally{if(_)throw _.error}return[7];case 11:return[4,this._transaction.commit()];case 12:return E.sent(),this._mutex.unlock(),[2,l];case 13:throw p=E.sent(),this._mutex.unlock(),p;case 14:return[3,16];case 15:throw this._transaction.clear(),Rn.collectionNotReady;case 16:return[2]}})})},e.prototype.clear=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){switch(t.label){case 0:return this.isReady?[4,this._mutex.lock()]:[3,8];case 1:t.sent(),t.label=2;case 2:return t.trys.push([2,5,,7]),[4,this._requestClear()];case 3:return t.sent(),[4,this._transaction.commit()];case 4:return t.sent(),this._mutex.unlock(),[3,7];case 5:return n=t.sent(),[4,this._transaction.clear()];case 6:throw t.sent(),this._mutex.unlock(),n;case 7:return[3,9];case 8:throw Rn.collectionNotReady;case 9:return[2]}})})},e.prototype.getBlob=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this._blobContainer.get(n)];case 1:return[2,t.sent()]}})})},e.prototype.saveBlob=function(n,t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,this._blobContainer.save(n,t)];case 1:return[2,r.sent()]}})})},e.prototype.removeBlob=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this._blobContainer.remove(n)];case 1:return t.sent(),[2]}})})},e.prototype.removeAllBlobs=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,this._blobContainer.clear()];case 1:return n.sent(),[2]}})})},e}(),zb="[NESTDB]",k_=!0,xc=function(){function e(){}return e.off=function(){k_=!1},e.log=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];k_&&console.log.apply(console,it(["".concat(zb,"[LOG]")],Ge(n),!1))},e.warning=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];k_&&console.warn.apply(console,it(["".concat(zb,"[WARNING]")],Ge(n),!1))},e.error=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];k_&&console.error.apply(console,it(["".concat(zb,"[ERROR]")],Ge(n),!1))},e}(),IW=[{},{a:700400,n:"error"}],vE=function(){function e(n){var t,r,i;this.encryption=(t=n.encryption)!==null&&t!==void 0?t:zk,this.itemSizeLimit=(r=n.itemSizeLimit)!==null&&r!==void 0?r:4194304,this.metadataBuffer=(i=n.metadataBuffer)!==null&&i!==void 0?i:256}return Object.defineProperty(e.prototype,"_encryptionCheckKey",{get:function(){return"".concat(this.dbname,".encrypt")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"_reservedKeys",{get:function(){return[this._encryptionCheckKey]},enumerable:!1,configurable:!0}),e.prototype._getRawKey=function(n,t){return t===void 0&&(t=""),"".concat(n).concat(t)},e.prototype._generateShardPostfixArray=function(n){return n===void 0&&(n=1),it([],Ge(Array(n).keys()),!1)},e.prototype._shardify=function(n){var t=this,r=n.key,i=n.value,a=JSON.stringify(this.encryption.encrypt(i)),s=Math.ceil(a.length/this.adjustedItemSizeLimit);return this._generateShardPostfixArray(s).map(function(o){var l={key:t._getRawKey(r,".".concat(o)),data:a.substring(o*t.adjustedItemSizeLimit,(o+1)*t.adjustedItemSizeLimit)};return o===0&&(l.metadata={shards:s}),l})},e.prototype._resetIfEncryptionChanged=function(){return N(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u,c=this;return T(this,function(h){switch(h.label){case 0:return[4,this.get(this._encryptionCheckKey)];case 1:if(n=h.sent(),t={encrypted:IW.map(function(f){var p;return(p=c.encryption)===null||p===void 0?void 0:p.encrypt(f)})},!n)return[3,8];if(!n.encrypted||!Array.isArray(n.encrypted))return[3,6];for(a in r=n.encrypted,i=[],r)i.push(a);s=0,h.label=2;case 2:return s<i.length?(a=i[s])in r?(o=a,l=JSON.stringify(n.encrypted[o]),u=JSON.stringify(t.encrypted[o]),l===u?[3,4]:(xc.warning("Encryption algorithm has changed. Stored data would be cleared."),[4,this.clear()])):[3,4]:[3,5];case 3:return h.sent(),[3,5];case 4:return s++,[3,2];case 5:return[3,8];case 6:return[4,this.clear()];case 7:h.sent(),h.label=8;case 8:return[4,this.set({key:this._encryptionCheckKey,value:t})];case 9:return h.sent(),[2]}})})},Object.defineProperty(e.prototype,"adjustedItemSizeLimit",{get:function(){return Math.max(this.itemSizeLimit-this.metadataBuffer,4)},enumerable:!1,configurable:!0}),e.prototype.usage=function(){return N(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return n=0,[4,this._getAllRawKeys()];case 1:t=c.sent(),c.label=2;case 2:c.trys.push([2,7,8,9]),r=ye(t),i=r.next(),c.label=3;case 3:return i.done?[3,6]:(a=i.value,[4,this._getRaw(a)]);case 4:(s=c.sent())&&(n+=JSON.stringify(s).length),c.label=5;case 5:return i=r.next(),[3,3];case 6:return[3,9];case 7:return o=c.sent(),l={error:o},[3,9];case 8:try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(l)throw l.error}return[7];case 9:return[2,n]}})})},e.prototype.getAllKeys=function(){return N(this,void 0,void 0,function(){var n=this;return T(this,function(t){switch(t.label){case 0:return[4,this._getAllRawKeys()];case 1:return[2,t.sent().filter(function(r){return r.endsWith(".0")}).map(function(r){return r.replace(/\.0$/,"")}).filter(function(r){return!n._reservedKeys.includes(r)})]}})})},e.prototype.get=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l=this;return T(this,function(u){switch(u.label){case 0:return t=this._getRawKey(n,".0"),[4,this._getRaw(t)];case 1:if(!(r=u.sent()))return[3,7];u.label=2;case 2:return u.trys.push([2,6,,7]),i=r.data,(a=r.metadata)!=null&&a.shards&&a.shards>1?[4,Promise.all(this._generateShardPostfixArray(a==null?void 0:a.shards).map(function(c){return N(l,void 0,void 0,function(){var h,f;return T(this,function(p){switch(p.label){case 0:return c>0?(h=this._getRawKey(n,".".concat(c)),[4,this._getRaw(h)]):[3,2];case 1:if(!(f=p.sent()))throw Rn.storeBrokenIntegrity;return[2,f.data];case 2:return[2,i]}})})}))]:[3,4];case 3:return o=u.sent(),[3,5];case 4:o=[i],u.label=5;case 5:return s=o,[2,this.encryption.decrypt(JSON.parse(s.join("")))];case 6:return u.sent(),[2,null];case 7:return[2,null]}})})},e.prototype.set=function(n){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:return t=this._shardify(n),[4,this._setRaw(t)];case 1:return r.sent(),[2,z({},n.value)]}})})},e.prototype.setMany=function(n){return N(this,void 0,void 0,function(){var t,r=this;return T(this,function(i){switch(i.label){case 0:return t=[],[4,this._setRaw(t.concat.apply(t,it([],Ge(n.map(function(a){return r._shardify(a)})),!1)))];case 1:return i.sent(),[2,n.map(function(a){return a.value})]}})})},e.prototype.remove=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o=this;return T(this,function(l){switch(l.label){case 0:return t=this._getRawKey(n,".0"),[4,this._getRaw(t)];case 1:return(r=l.sent())?(i=r.metadata,a=this._generateShardPostfixArray(i==null?void 0:i.shards).map(function(u){return o._getRawKey(n,".".concat(u))}),[4,this._removeRaw(a)]):[3,3];case 2:return l.sent(),(s=ta.get(this.dbname))==null||s.remove(n),[2,!0];case 3:return[2,!1]}})})},e.prototype.removeMany=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,c,h,f=this;return T(this,function(p){switch(p.label){case 0:t=ta.get(this.dbname),r=[],i=function(_){var g,C,E;return T(this,function(y){switch(y.label){case 0:return g=a._getRawKey(_,".0"),[4,a._getRaw(g)];case 1:return(C=y.sent())&&(E=C.metadata,r.push.apply(r,it([],Ge(a._generateShardPostfixArray(E==null?void 0:E.shards).map(function(S){return f._getRawKey(_,".".concat(S))})),!1))),t==null||t.remove(_),[2]}})},a=this,p.label=1;case 1:p.trys.push([1,6,7,8]),s=ye(n),o=s.next(),p.label=2;case 2:return o.done?[3,5]:(l=o.value,[5,i(l)]);case 3:p.sent(),p.label=4;case 4:return o=s.next(),[3,2];case 5:return[3,8];case 6:return u=p.sent(),c={error:u},[3,8];case 7:try{o&&!o.done&&(h=s.return)&&h.call(s)}finally{if(c)throw c.error}return[7];case 8:return r.length>0?[4,this._removeRaw(r)]:[3,10];case 9:p.sent(),p.label=10;case 10:return[2,n]}})})},e.prototype.clear=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){return(n=ta.get(this.dbname))==null||n.clearForDatabase(this.dbname),[2]})})},e}(),ua={},Vc=function(e){function n(t){t===void 0&&(t={});var r,i=this;i=e.call(this,z(z({},t),{itemSizeLimit:(r=t.itemSizeLimit)!==null&&r!==void 0?r:4194304}))||this;var a=t.delay,s=a===void 0?1:a;return i.delay=s,i.observer={},i}return k(n,e),Object.defineProperty(n.prototype,"rawData",{get:function(){return ua[this.dbname]},set:function(t){ua[this.dbname]=t},enumerable:!1,configurable:!0}),n.prototype._getAllRawKeys=function(){return N(this,void 0,void 0,function(){return T(this,function(t){if(ua[this.dbname])return[2,Object.keys(ua[this.dbname])];throw Rn.storeNotAvailable})})},n.prototype._getRaw=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return ua[this.dbname]?[4,U_(this.delay)]:[3,2];case 1:return r.sent(),[2,ua[this.dbname][t]?z({key:t},ua[this.dbname][t]):null];case 2:throw Rn.storeNotAvailable}})})},n.prototype._setRaw=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u,c;return T(this,function(h){switch(h.label){case 0:return ua[this.dbname]?[4,U_(this.delay)]:[3,2];case 1:h.sent();try{for(r=ye(t),i=r.next();!i.done;i=r.next())a=i.value,s=a.key,o=a.data,l=a.metadata,ua[this.dbname][s]=Object.freeze({data:o,metadata:l})}catch(f){u={error:f}}finally{try{i&&!i.done&&(c=r.return)&&c.call(r)}finally{if(u)throw u.error}}return[3,3];case 2:throw Rn.storeNotAvailable;case 3:return[2]}})})},n.prototype._removeRaw=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return ua[this.dbname]?[4,U_(this.delay)]:[3,2];case 1:l.sent();try{for(r=ye(t),i=r.next();!i.done;i=r.next())a=i.value,ua[this.dbname][a]&&delete ua[this.dbname][a]}catch(u){s={error:u}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}}return[3,3];case 2:throw Rn.storeNotAvailable;case 3:return[2]}})})},n.prototype.observe=function(t,r,i){var a=this;this.observer[t]||(this.observer[t]={}),r.forEach(function(s){return a.observer[t][s]=i})},n.prototype.checkAvailability=function(){return N(this,void 0,void 0,function(){return T(this,function(t){return[2]})})},n.prototype.init=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.dbname=t,ua[this.dbname]||(ua[this.dbname]={}),[4,this._resetIfEncryptionChanged()];case 1:return r.sent(),[2]}})})},n.prototype.set=function(t){return N(this,void 0,void 0,function(){var r,i;return T(this,function(a){if((r=this.observer[t.key])&&typeof r.set=="function"&&(i=r.set()))throw i;return[2,e.prototype.set.call(this,t)]})})},n.prototype.setMany=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return T(this,function(c){try{for(r=ye(t),i=r.next();!i.done;i=r.next())if(a=i.value,(s=this.observer[a.key])&&typeof s.set=="function"&&(o=s.set()))throw o}catch(h){l={error:h}}finally{try{i&&!i.done&&(u=r.return)&&u.call(r)}finally{if(l)throw l.error}}return[2,e.prototype.setMany.call(this,t)]})})},n.prototype.clear=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,e.prototype.clear.call(this)];case 1:return t.sent(),[4,U_(this.delay)];case 2:return t.sent(),ua[this.dbname]={},[2]}})})},n}(vE),_R="NestDBStore";(function(e){e[e.UNINITIALIZED=0]="UNINITIALIZED",e[e.OPENING=1]="OPENING",e[e.OPEN=2]="OPEN",e[e.CLOSED=3]="CLOSED"})(ro||(ro={}));var MW=function(e){function n(t){t===void 0&&(t={});var r,i=this;return(i=e.call(this,z(z({},t),{itemSizeLimit:(r=t.itemSizeLimit)!==null&&r!==void 0?r:104857600}))||this)._storeName=_R,i._state=ro.UNINITIALIZED,i._openJobQueue=[],i._window=typeof window<"u"?window:void 0,i._indexedDb=i._window?i._window.indexedDB||i._window.mozIndexedDB||i._window.webkitIndexedDB||i._window.msIndexedDB:void 0,i}return k(n,e),Object.defineProperty(n.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),n.prototype.isTransactionInactiveError=function(t){return t instanceof Error&&t.message.includes("The transaction is inactive")},n.prototype._putToObjectStore=function(t,r){return N(this,void 0,void 0,function(){return T(this,function(i){return[2,new Promise(function(a,s){var o=t.put(r);o.addEventListener("success",function(l){a(l.target.result)}),o.addEventListener("error",function(l){s(l.target.error)})})]})})},n.prototype._deleteFromObjectStore=function(t,r){return N(this,void 0,void 0,function(){return T(this,function(i){return[2,new Promise(function(a,s){var o=t.delete(r);o.addEventListener("success",function(){return a(r)}),o.addEventListener("error",function(l){return s(l.target.error)})})]})})},n.prototype._openDatabase=function(t){var r=this;return new Promise(function(i,a){if(r._indexedDb){r._state=ro.OPENING;var s=r._indexedDb.open(t);s.addEventListener("upgradeneeded",function(o){o.target.result.createObjectStore(_R,{keyPath:"key"})}),s.addEventListener("success",function(o){r._state=ro.OPEN,r._database=o.target.result,r._openJobQueue.forEach(function(l){return l()}),r._openJobQueue=[],r._database.onclose=function(){r._database=void 0,r._state=ro.OPENING,setTimeout(function(){r._openDatabase(t)},5)},i(r._database)}),s.addEventListener("error",function(o){r._state=ro.UNINITIALIZED,a(o.target.error)})}else a(Rn.storeNotAvailable)})},n.prototype._getObjectStore=function(t){return N(this,void 0,void 0,function(){var r,i=this;return T(this,function(a){switch(a.label){case 0:return this._database?((r=this._database.transaction(this._storeName,t)).addEventListener("abort",function(s){throw s.target.error}),[2,r.objectStore(this._storeName)]):[3,1];case 1:switch(this._state){case ro.UNINITIALIZED:case ro.OPEN:return[3,2];case ro.OPENING:case ro.CLOSED:return[3,3]}return[3,4];case 2:throw Rn.storeNotInitialized;case 3:return[2,new Promise(function(s){i._openJobQueue.push(function(){return s(i._getObjectStore(t))})})];case 4:return[4,this._getObjectStore(t)];case 5:return[2,a.sent()]}})})},n.prototype._getAllRawKeys=function(){return N(this,void 0,void 0,function(){var t=this;return T(this,function(r){switch(r.label){case 0:return[4,new Promise(function(i,a){return N(t,void 0,void 0,function(){var s,o;return T(this,function(l){switch(l.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return s=l.sent(),(o=s.getAllKeys()).addEventListener("success",function(u){i(u.target.result)}),o.addEventListener("error",function(u){return a(u.target.error)}),[2]}})})})];case 1:return[2,r.sent()]}})})},n.prototype._getRaw=function(t){return N(this,void 0,void 0,function(){var r=this;return T(this,function(i){switch(i.label){case 0:return[4,new Promise(function(a,s){return N(r,void 0,void 0,function(){var o,l;return T(this,function(u){switch(u.label){case 0:return[4,this._getObjectStore("readonly")];case 1:return o=u.sent(),(l=o.get(t)).addEventListener("success",function(c){var h;a((h=c==null?void 0:c.target)===null||h===void 0?void 0:h.result)}),l.addEventListener("error",function(c){return s(c.target.error)}),[2]}})})})];case 1:return[2,i.sent()]}})})},n.prototype._setRaw=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u,c,h,f=this;return T(this,function(p){switch(p.label){case 0:return p.trys.push([0,3,,15]),[4,this._getObjectStore("readwrite")];case 1:return r=p.sent(),[4,Promise.all(t.map(function(_){return f._putToObjectStore(r,_)}))];case 2:return p.sent(),[3,15];case 3:return i=p.sent(),this.isTransactionInactiveError(i)?[4,this._getObjectStore("readwrite")]:[3,13];case 4:a=p.sent(),p.label=5;case 5:p.trys.push([5,10,11,12]),s=ye(t),o=s.next(),p.label=6;case 6:return o.done?[3,9]:(l=o.value,[4,this._putToObjectStore(a,l)]);case 7:p.sent(),p.label=8;case 8:return o=s.next(),[3,6];case 9:return[3,12];case 10:return u=p.sent(),c={error:u},[3,12];case 11:try{o&&!o.done&&(h=s.return)&&h.call(s)}finally{if(c)throw c.error}return[7];case 12:return[3,14];case 13:throw i;case 14:return[3,15];case 15:return[2]}})})},n.prototype._removeRaw=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u,c,h,f=this;return T(this,function(p){switch(p.label){case 0:return p.trys.push([0,3,,15]),[4,this._getObjectStore("readwrite")];case 1:return r=p.sent(),[4,Promise.all(t.map(function(_){return f._deleteFromObjectStore(r,_)}))];case 2:return p.sent(),[3,15];case 3:return i=p.sent(),this.isTransactionInactiveError(i)?[4,this._getObjectStore("readwrite")]:[3,13];case 4:a=p.sent(),p.label=5;case 5:p.trys.push([5,10,11,12]),s=ye(t),o=s.next(),p.label=6;case 6:return o.done?[3,9]:(l=o.value,[4,this._deleteFromObjectStore(a,l)]);case 7:p.sent(),p.label=8;case 8:return o=s.next(),[3,6];case 9:return[3,12];case 10:return u=p.sent(),c={error:u},[3,12];case 11:try{o&&!o.done&&(h=s.return)&&h.call(s)}finally{if(c)throw c.error}return[7];case 12:return[3,14];case 13:throw i;case 14:return[3,15];case 15:return[2]}})})},n.prototype._triggerDatabaseClose=function(){this._database&&this._database.onclose&&this._database.onclose(new Event("dummy"))},n.prototype.checkAvailability=function(){return N(this,void 0,void 0,function(){var t,r=this;return T(this,function(i){switch(i.label){case 0:if(!((t=typeof window<"u"?window:null)!=null&&t.indexedDB||t!=null&&t.mozIndexedDB||t!=null&&t.webkitIndexedDB||t!=null&&t.msIndexedDB))return[3,6];if(this._indexedDb=t.indexedDB||t.mozIndexedDB||t.webkitIndexedDB||t.msIndexedDB,!this._window||!g0())return[3,4];if(!(g0()&&navigator.userAgent&&navigator.userAgent.includes("Edge/")))return[3,1];if(!this._window.indexedDB&&(t.PointerEvent||t.MSPointerEvent))throw Rn.storeNotAvailableInPrivateBrowsing;return[3,3];case 1:return[4,new Promise(function(a,s){if(r._indexedDb)try{var o=r._indexedDb.open("_testMozilla");o.onerror=function(){return s(Rn.storeNotAvailableInPrivateBrowsing)},o.onsuccess=function(l){if(l.target.result.close(),r._indexedDb){var u=r._indexedDb.deleteDatabase("_testMozilla");u.onerror=function(){return a()},u.onsuccess=function(){return a()}}else s(Rn.storeNotAvailable)}}catch{s(Rn.storeNotAvailableInPrivateBrowsing)}else s(Rn.storeNotAvailable)})];case 2:i.sent(),i.label=3;case 3:return[3,5];case 4:throw Rn.storeNotAvailable;case 5:return[3,7];case 6:throw Rn.storeNotAvailable;case 7:return[2]}})})},n.prototype.init=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.dbname=t,[4,this.checkAvailability()];case 1:return r.sent(),[4,this._openDatabase(t)];case 2:return r.sent(),[4,this._resetIfEncryptionChanged()];case 3:return r.sent(),[2]}})})},n.prototype.clear=function(){return N(this,void 0,void 0,function(){var t=this;return T(this,function(r){switch(r.label){case 0:return[4,e.prototype.clear.call(this)];case 1:return r.sent(),[4,new Promise(function(i,a){return N(t,void 0,void 0,function(){var s,o;return T(this,function(l){switch(l.label){case 0:return[4,this._getObjectStore("readwrite")];case 1:return s=l.sent(),(o=s.clear()).addEventListener("success",function(){return i()}),o.addEventListener("error",function(u){return a(u.target.error)}),[2]}})})})];case 2:return[2,r.sent()]}})})},n}(vE),AW=function(e){function n(t){var r=this,i=t.AsyncStorage,a=t.itemSizeLimit,s=a===void 0?2097152:a,o=tz(t,["AsyncStorage","itemSizeLimit"]);return(r=e.call(this,z(z({},o),{itemSizeLimit:s}))||this)._asyncStorage=i,r}return k(n,e),n.prototype._isBelonging=function(t){return t.startsWith("".concat(this.dbname,"/"))},n.prototype._getActualKey=function(t){return"".concat(this.dbname,"/").concat(t)},n.prototype._getAllRawKeys=function(){return N(this,void 0,void 0,function(){var t,r=this;return T(this,function(i){switch(i.label){case 0:return[4,this._asyncStorage.getAllKeys()];case 1:return t=i.sent(),[2,t.filter(function(a){return r._isBelonging(a)}).map(function(a){return a.substring("".concat(r.dbname,"/").length)})]}})})},n.prototype._getRaw=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return[4,this._asyncStorage.getItem(this._getActualKey(t))];case 1:return[2,(r=i.sent())?JSON.parse(r):null]}})})},n.prototype._setRaw=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:r=[];try{for(i=ye(t),a=i.next();!a.done;a=i.next())s=a.value,o=s.key,s.data.length<=this.adjustedItemSizeLimit&&r.push([this._getActualKey(o),JSON.stringify(s)])}catch(h){l={error:h}}finally{try{a&&!a.done&&(u=i.return)&&u.call(i)}finally{if(l)throw l.error}}return[4,this._asyncStorage.multiSet(r)];case 1:return c.sent(),[2]}})})},n.prototype._removeRaw=function(t){return N(this,void 0,void 0,function(){var r=this;return T(this,function(i){switch(i.label){case 0:return[4,this._asyncStorage.multiRemove(t.map(function(a){return r._getActualKey(a)}))];case 1:return i.sent(),[2]}})})},n.prototype.checkAvailability=function(){return N(this,void 0,void 0,function(){return T(this,function(t){if(!this._asyncStorage)throw Rn.storeNotAvailable;return[2]})})},n.prototype.init=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.dbname=t,[4,this._resetIfEncryptionChanged()];case 1:return r.sent(),[2]}})})},n.prototype.clear=function(){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:return[4,e.prototype.clear.call(this)];case 1:return r.sent(),[4,this.getAllKeys()];case 2:return t=r.sent(),[4,this.removeMany(t)];case 3:return r.sent(),[2]}})})},n}(vE),wW=function(e){function n(t){var r,i,a=this;return(a=e.call(this,z(z({},t),{itemSizeLimit:(r=t.itemSizeLimit)!==null&&r!==void 0?r:6291456}))||this)._mmkv=(i=t.MMKV,{getString:function(s){return i.getString(s)},set:function(s,o){return i.set(s,o)},delete:function(s){return i.remove?i.remove(s):i.delete(s)},getAllKeys:function(){return i.getAllKeys()}}),a}return k(n,e),n.prototype._isBelonging=function(t){return t.startsWith("".concat(this.dbname,"/"))},n.prototype._getActualKey=function(t){return"".concat(this.dbname,"/").concat(t)},n.prototype._getAllRawKeys=function(){return N(this,void 0,void 0,function(){var t,r=this;return T(this,function(i){switch(i.label){case 0:return[4,this._mmkv.getAllKeys()];case 1:return t=i.sent(),[2,t.filter(function(a){return r._isBelonging(a)}).map(function(a){return a.substring("".concat(r.dbname,"/").length)})]}})})},n.prototype._getRaw=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return[4,this._mmkv.getString(this._getActualKey(t))];case 1:return[2,(r=i.sent())?JSON.parse(r):null]}})})},n.prototype._setRaw=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l;return T(this,function(u){try{for(r=ye(t),i=r.next();!i.done;i=r.next())a=i.value,s=a.key,a.data.length<=this.adjustedItemSizeLimit&&this._mmkv.set(this._getActualKey(s),JSON.stringify(a))}catch(c){o={error:c}}finally{try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}}return[2]})})},n.prototype._removeRaw=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o;return T(this,function(l){try{for(r=ye(t),i=r.next();!i.done;i=r.next())a=i.value,this._mmkv.delete(this._getActualKey(a))}catch(u){s={error:u}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}}return[2]})})},n.prototype.checkAvailability=function(){return N(this,void 0,void 0,function(){return T(this,function(t){if(!this._mmkv)throw Rn.storeNotAvailable;return[2]})})},n.prototype.init=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.dbname=t,[4,this._resetIfEncryptionChanged()];case 1:return r.sent(),[2]}})})},n.prototype.clear=function(){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:return[4,e.prototype.clear.call(this)];case 1:return r.sent(),[4,this.getAllKeys()];case 2:return t=r.sent(),[4,this.removeMany(t)];case 3:return r.sent(),[2]}})})},n}(vE),ho;(function(e){e.INIT="INIT",e.OPENING="OPENING",e.OPENED="OPENED",e.CLOSED="CLOSED"})(ho||(ho={}));var Sl,RW=function(){function e(n){var t=n.name,r=n.version,i=n.store,a=n.config;this.name=t,this._version=r,this._state=ho.INIT,this._config=a||new rm({dbname:t}),this._store=i,this._event={success:Mv,error:Mv,storeReplaced:Mv,upgrade:fR},this._collections=new Map,this._globalMutex=new YN("".concat(this.name,".lock")),this._config.disableLogger&&xc.off(),new ta({dbname:t,limit:this._config.cacheLimit})}return Object.defineProperty(e.prototype,"version",{get:function(){return this._version},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"store",{get:function(){return this._store},enumerable:!1,configurable:!0}),e.prototype._initializeCollection=function(n,t){var r;return N(this,void 0,void 0,function(){var i,a,s;return T(this,function(o){switch(o.label){case 0:return a=this._collections.get(n),t?(i=new Vb({dbname:this.name,collectionName:n,keyName:t.keyName,indexes:(r=t.index)!==null&&r!==void 0?r:[[t.keyName]],store:this._store}),[3,3]):[3,1];case 1:return a&&a.state===id.READY?[3,3]:[4,Vb.metadataOf(this.name,n,this._store)];case 2:(s=o.sent())&&(i=new Vb({dbname:this.name,collectionName:n,keyName:s.keyName,indexes:s.indexes,store:this._store})),o.label=3;case 3:return i?(this._collections.set(n,i),[4,i.init()]):[3,5];case 4:o.sent(),o.label=5;case 5:return[2]}})})},e.prototype.estimateUsage=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,(t=this._store,N(void 0,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,t.usage()];case 1:return[2,r.sent()]}})}))];case 1:return[2,n.sent()]}var t})})},e.prototype.commitSchema=function(n){return N(this,void 0,void 0,function(){var t=this;return T(this,function(r){switch(r.label){case 0:return this._state!==ho.OPENING?[3,2]:[4,Promise.all(n.map(function(i){return N(t,void 0,void 0,function(){return T(this,function(a){switch(a.label){case 0:return[4,this._initializeCollection(i.collectionName,i)];case 1:return a.sent(),[2]}})})}))];case 1:return r.sent(),[3,3];case 2:throw Rn.databaseSchemaNotOnUpgrade;case 3:return[2]}})})},e.prototype.open=function(){var n;return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,c,h,f=this;return T(this,function(p){switch(p.label){case 0:return[4,this._globalMutex.lock()];case 1:if(p.sent(),this._state===ho.OPENED)return[3,20];this._state=ho.OPENING,p.label=2;case 2:return p.trys.push([2,13,,20]),[4,this._store.init(this.name)];case 3:return p.sent(),_=this.name,t="".concat(WN(_),".metadata"),r={version:0,collectionNames:[]},[4,this._store.get(t)];case 4:i=(n=p.sent())!==null&&n!==void 0?n:r,p.label=5;case 5:p.trys.push([5,10,11,12]),a=ye(i.collectionNames),s=a.next(),p.label=6;case 6:return s.done?[3,9]:(o=s.value,[4,this._initializeCollection(o)]);case 7:p.sent(),p.label=8;case 8:return s=a.next(),[3,6];case 9:return[3,12];case 10:return l=p.sent(),c={error:l},[3,12];case 11:try{s&&!s.done&&(h=a.return)&&h.call(a)}finally{if(c)throw c.error}return[7];case 12:return[2,new Promise(function(g,C){var E=function(S){i.version<f._version?f._event.upgrade(i.version,function(I){return N(f,void 0,void 0,function(){var w;return T(this,function(R){switch(R.label){case 0:if(I)return[3,5];i.version++,i.collectionNames=Array.from(this._collections.keys()),R.label=1;case 1:return R.trys.push([1,3,,4]),[4,this._store.set({key:t,value:i})];case 2:return R.sent(),S({continued:!0}),[3,4];case 3:return w=R.sent(),S({continued:!1,err:w}),[3,4];case 4:return[3,6];case 5:S({continued:!1,err:I}),R.label=6;case 6:return[2]}})})}):S({continued:!1})},y=function(S){var I=S.continued,w=I!==void 0&&I,R=S.err,A=R===void 0?null:R;w?setTimeout(function(){return E(y)},10):A?(xc.error(A.message),f._globalMutex.unlock(),f._event.error(A),C(A)):Promise.all(i.collectionNames.map(function(U){return f._initializeCollection(U)})).then(function(){f._state=ho.OPENED,f._globalMutex.unlock(),f._event.success(),g()}).catch(function(U){xc.error(U.message),f._globalMutex.unlock(),f._event.error(U),C(U)})};E(y)})];case 13:switch(u=p.sent(),u.code){case ar.STORE_NOT_AVAILABLE_IN_PRIVATE_BROWSING:return[3,14];case ar.STORE_NOT_AVAILABLE:return[3,16]}return[3,18];case 14:return xc.warning("Access to the local storage is not allowed. Switched to MemoryStore automatically."),this._store=new Vc({}),this._globalMutex.unlock(),this._event.error(u),this._event.storeReplaced(this._store),[4,this.open()];case 15:return p.sent(),[3,19];case 16:return xc.warning("IndexedDB is not available in this environment. Switched to MemoryStore automatically. Consider using other store to save data persistently (e.g. AsyncStorage)."),this._store=new Vc({}),this._globalMutex.unlock(),this._event.error(u),this._event.storeReplaced(this._store),[4,this.open()];case 17:return p.sent(),[3,19];case 18:throw xc.error(u.message),this._globalMutex.unlock(),this._event.error(u),u;case 19:return[3,20];case 20:return[2]}var _})})},e.prototype.close=function(){this._collections.forEach(function(n){return n.close()}),this._state=ho.CLOSED},e.prototype.clear=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,Promise.all(Array.from(this._collections.values()).map(function(t){return t.clear()}))];case 1:return n.sent(),[2]}})})},e.prototype.reset=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){switch(t.label){case 0:return(n=ta.get(this.name))&&n.clearForDatabase(this.name),[4,this._store.clear()];case 1:return t.sent(),[2]}})})},e.prototype.on=function(n,t){this._event[n]=t},e.prototype.off=function(n){typeof this._event[n]=="function"&&(n==="upgrade"?this._event[n]=fR:this._event[n]=Mv)},e.prototype.collection=function(n){var t=this._collections.get(n);if(t)return t;throw Rn.collectionNotReady},e}();(function(e){e[e.VERBOSE=0]="VERBOSE",e[e.DEBUG=1]="DEBUG",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.NONE=5]="NONE"})(Sl||(Sl={}));var vi,m4=function(){function e(){this.level=Sl.WARN}return e.prototype.verbose=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.level<=Sl.VERBOSE&&console.log.apply(console,it(["[verbose]"],Ge(n),!1))},e.prototype.debug=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.level<=Sl.DEBUG&&console.log.apply(console,it(["[debug]"],Ge(n),!1))},e.prototype.info=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.level<=Sl.INFO&&console.log.apply(console,it(["[info]"],Ge(n),!1))},e.prototype.warn=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.level<=Sl.WARN&&console.warn.apply(console,it(["[warn]"],Ge(n),!1))},e.prototype.error=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.level<=Sl.ERROR&&console.error.apply(console,it(["[error]"],Ge(n),!1))},e}(),Wu=function(){function e(n){var t,r,i,a;this.messageTypeFilter=(t=n==null?void 0:n.messageTypeFilter)!==null&&t!==void 0?t:Mi.ALL,this.customTypesFilter=(r=n==null?void 0:n.customTypesFilter)!==null&&r!==void 0?r:null,this.senderUserIdsFilter=(i=n==null?void 0:n.senderUserIdsFilter)!==null&&i!==void 0?i:null,this.replyType=(a=n==null?void 0:n.replyType)!==null&&a!==void 0?a:Yr.NONE}return e.prototype.clone=function(){var n=new e,t=JSON.parse(JSON.stringify(this));return Object.keys(t).forEach(function(r){n[r]=t[r]}),n},e.prototype.match=function(n){switch(this.messageTypeFilter){case Mi.USER:if(n.messageType!==jn.USER)return!1;break;case Mi.FILE:if(n.messageType!==jn.FILE)return!1;break;case Mi.ADMIN:if(n.messageType!==jn.ADMIN)return!1}if(this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes("*")&&!this.customTypesFilter.includes(n.customType)||this.senderUserIdsFilter&&this.senderUserIdsFilter.length>0&&(!(n instanceof yr)||!this.senderUserIdsFilter.includes(n.sender.userId)))return!1;if(n instanceof Hi)switch(this.replyType){case Yr.NONE:if(n.parentMessageId>0)return!1;break;case Yr.ONLY_REPLY_TO_CHANNEL:if(n instanceof yr&&n.parentMessageId>0&&!n.replyToChannel)return!1}return!0},e}();(function(e){e.CHANNEL_LATEST="channel_latest",e.NEWEST_CHILD_MESSAGE="newest_child_message"})(vi||(vi={}));var rp,Vo=function(e){switch(e){case vi.CHANNEL_LATEST:return["channelUrl","-createdAt","-messageId"];case vi.NEWEST_CHILD_MESSAGE:return["channelUrl","-parentMessageId","-createdAt","-messageId"]}},OW=function(){return["channelUrl","-createdAt","-notificationId"]},DW=z(z({},Qx),{scheduledAt:void 0}),UW=function(e){return Zx(e)&&Y("number",e.scheduledAt,!0)},LW=z(z({},hE),{scheduledAt:0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),kW=function(e){return fE(e)&&Y("number",e.scheduledAt)&&(ai(e.file)||Y("string",e.fileUrl))&&Y("string",e.fileName,!0)&&Y("string",e.mimeType,!0)&&Y("number",e.fileSize,!0)&&(e.thumbnailSizes===null||e.thumbnailSizes===void 0||e.thumbnailSizes.every(function(n){return Y("object",n)&&n.maxWidth>0&&n.maxHeight>0}))},_4="UnsentMessage",xW="reqId",x_={},Td=function(e){function n(t){var r=e.call(this,t)||this;return r._mutex=new YN("unsendmessagecache.lock"),x_[t]=r,r}return k(n,e),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return q.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),n.of=function(t,r){return r===void 0&&(r=!1),x_[t]&&!r||(x_[t]=new n(t)),x_[t]},Object.defineProperty(n.prototype,"collection",{get:function(){var t=this._cacheContext.nestdb,r=t==null?void 0:t.collection(_4);if(!r)throw Q.databaseError;return r},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(t){if(t.messageId>0)throw Q.invalidParameters;var r,i=z({},t.serialize());return t instanceof Ni?(t.messageParams&&(i.messageParams=Zw(t.messageParams)),t.scheduledInfo&&t.scheduledInfo.scheduledMessageParams&&(i.scheduledInfo.scheduledMessageParams=(r=t.scheduledInfo.scheduledMessageParams,z(z({},Zw(r)),{scheduledAt:r.scheduledAt})))):t instanceof Rr?(t.messageParams&&(i.messageParams=Jw(t.messageParams)),t.scheduledInfo&&t.scheduledInfo.scheduledMessageParams&&(i.scheduledInfo.scheduledMessageParams=function(a){return z(z({},Jw(a)),{scheduledAt:a.scheduledAt})}(t.scheduledInfo.scheduledMessageParams))):t instanceof fs&&t.messageParams&&(i.messageParams=function(a){return Ae({fileInfoList:a.fileInfoList.map(function(s){return{file:s.file,fileUrl:Up.getPlainUrl(s),fileName:s.fileName,fileSize:s.fileSize,mimeType:s.mimeType,thumbnailSizes:s.thumbnailSizes,_thumbnails:s._thumbnails,_uploadedMetaData:s._uploadedMetaData}}),isReplyToChannel:a.isReplyToChannel,pushNotificationDeliveryOption:a.pushNotificationDeliveryOption})}(t.messageParams)),i},n.prototype._deserialize=function(t){return t=z(z({},t),{messageId:parseInt(t.messageId)}),Wr.of(this._iid).buildMessageFromSerializedData(t)},n.prototype._deserializeWithMessageCreateParams=function(t){var r,i,a;return N(this,void 0,void 0,function(){var s,o,l,u,c,h,f=this;return T(this,function(p){switch(p.label){case 0:return s=Wr.of(this._iid),o=this._deserialize(t),t.messageParams?o instanceof Ni?(u=t.messageParams,o.messageParams=s.buildUserMessageCreateParamsFromSerializedData(u,o),[3,6]):[3,1]:[3,6];case 1:return o instanceof Rr?(u=t.messageParams).fileKey&&typeof u.fileKey=="string"&&Fb((r=u.fileType)!==null&&r!==void 0?r:"")?(l=u,[4,this.collection.getBlob(u.fileKey)]):[3,3]:[3,4];case 2:l.file=(i=p.sent())!==null&&i!==void 0?i:void 0,p.label=3;case 3:return o.messageParams=s.buildFileMessageCreateParamsFromSerializedData(u,o),[3,6];case 4:return o instanceof fs&&(u=t.messageParams)&&u.fileInfoList?(o.messageParams=s.buildMultipleFilesMessageCreateParamsFromSerializedData(u,o),[4,Promise.all(o.messageParams.fileInfoList.map(function(_){return N(f,void 0,void 0,function(){var g,C,E,y,S;return T(this,function(I){switch(I.label){case 0:return typeof((C=_._uploadedMetaData)===null||C===void 0?void 0:C.fileKey)=="string"&&Fb((y=(E=_._uploadedMetaData)===null||E===void 0?void 0:E.fileType)!==null&&y!==void 0?y:"")?(g=_,[4,this.collection.getBlob(_._uploadedMetaData.fileKey)]):[3,2];case 1:g.file=(S=I.sent())!==null&&S!==void 0?S:void 0,I.label=2;case 2:return[2]}})})}))]):[3,6];case 5:p.sent(),p.label=6;case 6:return o.scheduledInfo&&t.scheduledInfo&&t.scheduledInfo.scheduledMessageParams?o instanceof Ni?(c=t.scheduledInfo.scheduledMessageParams,o.scheduledInfo.scheduledMessageParams=s.buildScheduledUserMessageCreateParamsFromSerializedData(c,o),[3,10]):[3,7]:[3,10];case 7:return o instanceof Rr?(c=t.scheduledInfo.scheduledMessageParams).fileKey&&typeof c.fileKey=="string"&&typeof c.fileType=="string"&&Fb(c.fileType)?(h=c,[4,this.collection.getBlob(c.fileKey)]):[3,9]:[3,10];case 8:h.file=(a=p.sent())!==null&&a!==void 0?a:void 0,p.label=9;case 9:o.scheduledInfo.scheduledMessageParams=s.buildScheduledFileMessageCreateParamsFromSerializedData(c,o),p.label=10;case 10:return[2,o]}})})},n.prototype._getFileInfoBlobKey=function(t,r){return"".concat(t,".").concat(r)},n.prototype.get=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(t))]:[3,2];case 1:if(r=i.sent())return[2,this._deserializeWithMessageCreateParams(r)];i.label=2;case 2:return[2,void 0]}})})},n.prototype.fetch=function(t){var r=t.channelUrl,i=t.filter,a=i===void 0?new Wu:i,s=t.order,o=s===void 0?vi.CHANNEL_LATEST:s,l=t.sendingStatus,u=t.backward,c=u!==void 0&&u,h=t.parentMessageId;return N(this,void 0,void 0,function(){var f,p,_,g,C=this;return T(this,function(E){switch(E.label){case 0:return this.localCacheEnabled?(f=Vo(o),p={"/where":function(y){return!!(o!==vi.NEWEST_CHILD_MESSAGE||h&&y.parentMessageId!==0&&y.parentMessageId===h)&&a.match(C._deserialize(y))}},r&&(p.channelUrl=r),l&&(p.sendingStatus=l),_={where:p,index:f,backward:c},[4,this.collection.query(_)]):[3,3];case 1:return[4,E.sent().fetch({})];case 2:return g=E.sent(),[2,Promise.all(g.map(function(y){return N(C,void 0,void 0,function(){return T(this,function(S){switch(S.label){case 0:return[4,this._deserializeWithMessageCreateParams(y)];case 1:return[2,S.sent()]}})})}))];case 3:return[2,[]]}})})},n.prototype.getAllChildMessages=function(t,r){return r===void 0&&(r=new Wu),N(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return[4,this.fetch({filter:r,order:vi.NEWEST_CHILD_MESSAGE,channelUrl:t.channelUrl,backward:!1,parentMessageId:t.messageId})];case 1:return[2,i.sent()]}})})},n.prototype.upsert=function(t){return N(this,void 0,void 0,function(){var r=this;return T(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,Promise.all(t.map(function(a){return N(r,void 0,void 0,function(){var s;return T(this,function(o){switch(o.label){case 0:return a instanceof Rr||a instanceof fs?[4,this._mutex.lock()]:[3,4];case 1:return o.sent(),[4,this.saveBlob(a)];case 2:return o.sent(),[4,this._mutex.unlock()];case 3:o.sent(),o.label=4;case 4:return s=this._serialize(a),[4,this.collection.upsertOne(s)];case 5:return o.sent(),[2]}})})}))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.upsertChildMessages=function(t){return N(this,void 0,void 0,function(){var r=this;return T(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,Promise.all(t.map(function(a){return N(r,void 0,void 0,function(){var s;return T(this,function(o){switch(o.label){case 0:return s=[],a.threadInfo&&a.threadInfo.replyCount>0?[4,this.getAllChildMessages(a)]:[3,2];case 1:s=o.sent(),o.label=2;case 2:return s.length>0?(s.forEach(function(l){return l.applyParentMessage(a)}),[4,this.upsert(s)]):[3,4];case 3:o.sent(),o.label=4;case 4:return[2]}})})}))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.remove=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:if(!this.localCacheEnabled)return[3,8];u.label=1;case 1:u.trys.push([1,6,7,8]),r=ye(t),i=r.next(),u.label=2;case 2:return i.done?[3,5]:(a=i.value,[4,this.collection.remove(a)]);case 3:u.sent(),u.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s=u.sent(),o={error:s},[3,8];case 7:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 8:return[2]}})})},n.prototype.removeMessagesOfChannel=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:t}})]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},n.prototype.clear=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.saveBlob=function(t){return N(this,void 0,void 0,function(){var r,i,a,s=this;return T(this,function(o){switch(o.label){case 0:return t instanceof Rr?t.messageParams&&(a=t.messageParams).file&&_g(a.file)?[4,this.collection.saveBlob(a.file,t.reqId)]:[3,2]:[3,5];case 1:i=o.sent(),a.fileKey=i,a.fileType=ud.BLOB,o.label=2;case 2:return t.scheduledInfo&&t.scheduledInfo.scheduledMessageParams&&(r=t.scheduledInfo.scheduledMessageParams).file&&_g(r.file)?[4,this.collection.saveBlob(r.file,t.reqId)]:[3,4];case 3:i=o.sent(),r.fileKey=i,r.fileType=ud.BLOB,o.label=4;case 4:return[3,7];case 5:return t instanceof fs&&(a=t.messageParams)&&a.fileInfoList&&Array.isArray(a.fileInfoList)?[4,Promise.all(a.fileInfoList.map(function(l,u){return N(s,void 0,void 0,function(){var c;return T(this,function(h){switch(h.label){case 0:return l.file&&_g(l.file)?[4,this.collection.saveBlob(l.file,this._getFileInfoBlobKey(t.reqId,u))]:[3,2];case 1:c=h.sent(),l._uploadedMetaData||(l._uploadedMetaData={}),l._uploadedMetaData.fileKey=c,l._uploadedMetaData.fileType=ud.BLOB,h.label=2;case 2:return[2]}})})}))]:[3,7];case 6:o.sent(),o.label=7;case 7:return[2]}})})},n}(Ur),P_={},ad=function(e){function n(t){var r=e.call(this,t)||this;return P_[t]=r,r}return k(n,e),Object.defineProperty(n.prototype,"_sdkState",{get:function(){return q.of(this._iid).sdkState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return q.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return Td.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(t,r){return r===void 0&&(r=!1),P_[t]&&!r||(P_[t]=new n(t)),P_[t]},Object.defineProperty(n.prototype,"collection",{get:function(){var t=this._cacheContext.nestdb;return me(!!t).throw(Q.databaseError),t.collection(KN)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(t){return z(z({},t.serialize()),{messageId:"".concat(t.messageId)})},n.prototype._deserialize=function(t){return t=z(z({},t),{messageId:parseInt(t.messageId)}),Wr.of(this._iid).buildMessageFromSerializedData(t)},n.prototype.get=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey("".concat(t))]:[3,2];case 1:if(r=i.sent())return[2,this._deserialize(r)];i.label=2;case 2:return[2,void 0]}})})},n.prototype.fetch=function(t){var r=t.channelUrl,i=t.token,a=t.limit,s=a===void 0?100:a,o=t.filter,l=o===void 0?new Wu:o,u=t.order,c=u===void 0?vi.CHANNEL_LATEST:u,h=t.backward,f=h!==void 0&&h,p=t.parentMessageId,_=t.isPollOnly,g=_!==void 0&&_,C=t.exactMatch,E=C!==void 0&&C,y=t.inclusive,S=y===void 0||y,I=t.isRestoreIndexedDB,w=I!==void 0&&I;return N(this,void 0,void 0,function(){var R,A,U,O,B=this;return T(this,function(F){switch(F.label){case 0:return this.localCacheEnabled?(R=Vo(c),A={where:{channelUrl:r,"/where":function(P){if(i!=null&&i!=="")switch(c){case vi.CHANNEL_LATEST:if(E&&P.createdAt!==i)return!1;if(f){if(S&&P.createdAt<i||!S&&P.createdAt<=i)return!1}else if(S&&P.createdAt>i||!S&&P.createdAt>=i)return!1;break;case vi.NEWEST_CHILD_MESSAGE:if(!p||P.parentMessageId===0||P.parentMessageId!==p)return!1}return!(g&&!P._poll)&&l.match(B._deserialize(P))}},index:R,backward:f},[4,this.collection.query(A)]):[3,5];case 1:return U=F.sent(),this._cacheContext.localCacheConfig.enableRestoreDB&&w?[4,U.indexer.restoreIndexer()]:[3,3];case 2:F.sent(),F.label=3;case 3:return[4,U.fetch({limit:s??void 0})];case 4:return O=F.sent(),[2,Promise.all(O.map(function(P){return N(B,void 0,void 0,function(){return T(this,function(G){return[2,this._deserialize(P)]})})}))];case 5:return[2,[]]}})})},n.prototype.getAllChildMessages=function(t,r){return r===void 0&&(r=new Wu),N(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return[4,this.fetch({channelUrl:t.channelUrl,token:Date.now(),limit:null,backward:!1,filter:r,order:vi.NEWEST_CHILD_MESSAGE,parentMessageId:t.messageId})];case 1:return[2,i.sent()]}})})},n.prototype.upsert=function(t){var r;return N(this,void 0,void 0,function(){var i,a,s,o,l,u,c,h,f=this;return T(this,function(p){switch(p.label){case 0:return this.localCacheEnabled?[4,this.saveBlobs(t)]:[3,13];case 1:p.sent(),p.label=2;case 2:p.trys.push([2,7,8,9]),i=ye(t),a=i.next(),p.label=3;case 3:return a.done?[3,6]:(s=a.value,!((r=s.threadInfo)===null||r===void 0)&&r._isUpdateRequired?[4,this.get(s.messageId)]:[3,5]);case 4:(o=p.sent())!=null&&o.threadInfo&&s.threadInfo._updateFrom(o.threadInfo),p.label=5;case 5:return a=i.next(),[3,3];case 6:return[3,9];case 7:return l=p.sent(),c={error:l},[3,9];case 8:try{a&&!a.done&&(h=i.return)&&h.call(i)}finally{if(c)throw c.error}return[7];case 9:return u=t.map(function(_){return f._serialize(_)}),[4,this.collection.upsertMany(u)];case 10:return p.sent(),[4,this.upsertChildMessages(t)];case 11:return p.sent(),[4,this._unsentMessageCache.upsertChildMessages(t)];case 12:p.sent(),p.label=13;case 13:return[2]}})})},n.prototype.upsertChildMessages=function(t){return N(this,void 0,void 0,function(){var r=this;return T(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,Promise.all(t.map(function(a){return N(r,void 0,void 0,function(){var s,o;return T(this,function(l){switch(l.label){case 0:return s=[],!((o=a.threadInfo)===null||o===void 0)&&o.replyCount&&a.threadInfo.replyCount>0?[4,this.getAllChildMessages(a)]:[3,2];case 1:s=l.sent(),l.label=2;case 2:return s.length>0?(s.forEach(function(u){return u.applyParentMessage(a)}),[4,this.upsert(s)]):[3,4];case 3:l.sent(),l.label=4;case 4:return[2]}})})}))]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.remove=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:if(!this.localCacheEnabled)return[3,8];u.label=1;case 1:u.trys.push([1,6,7,8]),r=ye(t),i=r.next(),u.label=2;case 2:return i.done?[3,5]:(a=i.value,[4,this.collection.remove("".concat(a))]);case 3:u.sent(),u.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s=u.sent(),o={error:s},[3,8];case 7:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 8:return[2]}})})},n.prototype.removeMessagesOfChannel=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:t},index:Vo(vi.CHANNEL_LATEST)})]:[3,6];case 1:return i.sent(),[4,(r=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync"))];case 2:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync.meta"))];case 3:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs"))];case 4:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs.meta"))];case 5:i.sent(),i.label=6;case 6:return[2]}})})},n.prototype.removeUnderOffset=function(t,r,i){return i===void 0&&(i=!1),N(this,void 0,void 0,function(){return T(this,function(a){switch(a.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:t,createdAt:i?{"<=":r}:{"<":r}},index:Vo(vi.CHANNEL_LATEST)})]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},n.prototype.clear=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.countBetween=function(t,r,i){return N(this,void 0,void 0,function(){var a,s=this;return T(this,function(o){switch(o.label){case 0:return this.localCacheEnabled?(a=Vo(vi.CHANNEL_LATEST),[4,this.collection.query({where:{channelUrl:t,"/where":function(l){var u=s._deserialize(l);return i.includes(u.createdAt)&&r.match(u)}},index:a}).count()]):[3,2];case 1:return[2,o.sent()];case 2:return[2,0]}})})},n.prototype.saveBlobs=function(t){return N(this,void 0,void 0,function(){var r=this;return T(this,function(i){switch(i.label){case 0:return[4,Promise.all(t.map(function(a){return N(r,void 0,void 0,function(){var s,o;return T(this,function(l){switch(l.label){case 0:return a instanceof Rr&&a.messageParams&&(s=a.messageParams).file&&_g(s.file)?[4,this.collection.saveBlob(s.file,a.reqId)]:[3,2];case 1:o=l.sent(),s.fileKey=o,l.label=2;case 2:return[2]}})})}))];case 1:return i.sent(),[2]}})})},n.prototype._getGroupChannelPreferenceSize=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:return r=0,[4,(i=this._cacheContext.preference).get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync"))];case 1:return a=u.sent(),[4,i.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync.meta"))];case 2:return s=u.sent(),[4,i.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs"))];case 3:return o=u.sent(),[4,i.get("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs.meta"))];case 4:return l=u.sent(),a&&(r+=JSON.stringify(a).length),s&&(r+=JSON.stringify(s).length),o&&(r+=JSON.stringify(o).length),l&&(r+=JSON.stringify(l).length),[2,r]}})})},n}(Ur),F_={},PW=function(e){function n(t){var r=e.call(this,t)||this;return F_[t]=r,r}return k(n,e),Object.defineProperty(n.prototype,"_sdkState",{get:function(){return q.of(this._iid).sdkState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return q.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),n.of=function(t,r){return r===void 0&&(r=!1),F_[t]&&!r||(F_[t]=new n(t)),F_[t]},Object.defineProperty(n.prototype,"collection",{get:function(){var t=this._cacheContext.nestdb;return me(!!t).throw(Q.databaseError),t.collection(f4)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(t){return z({},t.serialize())},n.prototype._deserialize=function(t){return Wr.of(this._iid).buildMessageFromSerializedData(t)},n.prototype.get=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.getByKey(t)]:[3,2];case 1:if(r=i.sent())return[2,this._deserialize(r)];i.label=2;case 2:return[2,void 0]}})})},n.prototype.fetch=function(t){var r=t.channelUrl,i=t.token,a=t.limit,s=a===void 0?100:a,o=t.filter,l=o===void 0?new Wu:o,u=t.backward,c=u!==void 0&&u,h=t.exactMatch,f=h!==void 0&&h,p=t.inclusive,_=p===void 0||p;return N(this,void 0,void 0,function(){var g,C=this;return T(this,function(E){switch(E.label){case 0:return this.localCacheEnabled?(g={where:{channelUrl:r,"/where":function(y){if(i){if(f&&y.createdAt!==i)return!1;if(c){if(_&&y.createdAt<i||!_&&y.createdAt<=i)return!1}else if(_&&y.createdAt>i||!_&&y.createdAt>=i)return!1}return l.match(C._deserialize(y))}},index:["channelUrl","-createdAt","-notificationId"],backward:c},[4,this.collection.query(g)]):[3,3];case 1:return[4,E.sent().fetch({limit:s??void 0})];case 2:return[2,E.sent().map(function(y){return C._deserialize(y)})];case 3:return[2,[]]}})})},n.prototype.upsert=function(t){return N(this,void 0,void 0,function(){var r,i=this;return T(this,function(a){switch(a.label){case 0:return this.localCacheEnabled?(r=t.map(function(s){return i._serialize(s)}),[4,this.collection.upsertMany(r)]):[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},n.prototype.remove=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:if(!this.localCacheEnabled)return[3,8];u.label=1;case 1:u.trys.push([1,6,7,8]),r=ye(t),i=r.next(),u.label=2;case 2:return i.done?[3,5]:(a=i.value,[4,this.collection.remove(a)]);case 3:u.sent(),u.label=4;case 4:return i=r.next(),[3,2];case 5:return[3,8];case 6:return s=u.sent(),o={error:s},[3,8];case 7:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 8:return[2]}})})},n.prototype.markAsReadByTimestamp=function(t,r){return N(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.updateIf({where:{channelUrl:t,messageStatus:rd.SENT,createdAt:{"<":r}}},{set:{messageStatus:rd.READ}})]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.markAsReadByMessageIds=function(t,r){return N(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.updateIf({where:{channelUrl:t,notificationId:{"/in":r},messageStatus:rd.SENT}},{set:{messageStatus:rd.READ}})]:[3,2];case 1:return[2,i.sent().length];case 2:return[2,0]}})})},n.prototype.removeMessagesOfChannel=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:t},index:["channelUrl","-createdAt","-notificationId"]})]:[3,6];case 1:return i.sent(),[4,(r=this._cacheContext.preference).remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync"))];case 2:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/sync.meta"))];case 3:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs"))];case 4:return i.sent(),[4,r.remove("sendbird:".concat(this._sdkState.userId,"@groupchannel/").concat(t,"/message/changelogs.meta"))];case 5:i.sent(),i.label=6;case 6:return[2]}})})},n.prototype.removeUnderOffset=function(t,r){return N(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return this.localCacheEnabled?[4,this.collection.removeIf({where:{channelUrl:t,createdAt:{"<":r}},index:Vo(vi.CHANNEL_LATEST)})]:[3,2];case 1:i.sent(),i.label=2;case 2:return[2]}})})},n.prototype.clear=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.countBetween=function(t,r,i){return N(this,void 0,void 0,function(){var a,s=this;return T(this,function(o){switch(o.label){case 0:return this.localCacheEnabled?(a=["channelUrl","-createdAt","-notificationId"],[4,this.collection.query({where:{channelUrl:t,"/where":function(l){var u=s._deserialize(l);return i.includes(u.createdAt)&&r.match(u)}},index:a}).count()]):[3,2];case 1:return[2,o.sent()];case 2:return[2,0]}})})},n}(Ur),av={},g4=function(e){function n(t){var r=e.call(this,t)||this;return r._observers=new Map,r._dispatcherContext=r._dispatcher.on(function(i){return N(r,void 0,void 0,function(){var a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w,R,A,U,O,B=this;return T(this,function(F){switch(F.label){case 0:return i instanceof er?(a=i.messages,O=i.source,c=i.isWebSocketEventComing,s=a.filter(function(P){return P instanceof Hi&&P.channelType!==Kt.OPEN&&P.messageId>0}),o=a.filter(function(P){return P instanceof Hi&&P.channelType!==Kt.OPEN&&P.messageId===0}),l=a.filter(function(P){return P instanceof Cd}),s.length>0?[4,or(function(){return N(B,void 0,void 0,function(){return T(this,function(P){switch(P.label){case 0:return[4,this._messageCache.upsert(s)];case 1:return P.sent(),[4,this._unsentMessageCache.remove(s.map(function(G){return G instanceof yr?G.reqId:null}).filter(function(G){return G!==null}))];case 2:return P.sent(),[2]}})})})]:[3,2]):[3,7];case 1:F.sent(),c||this._broadcastUpdateEvent(s,O),F.label=2;case 2:return o.length>0?[4,or(function(){return N(B,void 0,void 0,function(){return T(this,function(P){switch(P.label){case 0:return[4,this._unsentMessageCache.upsert(o)];case 1:return P.sent(),[2]}})})})]:[3,4];case 3:F.sent(),c||this._broadcastUpdateEvent(o,O),F.label=4;case 4:return l.length>0?[4,or(function(){return N(B,void 0,void 0,function(){return T(this,function(P){switch(P.label){case 0:return[4,this._notificationCache.upsert(l)];case 1:return P.sent(),[2]}})})})]:[3,6];case 5:F.sent(),c||this._broadcastUpdateEvent(l,O),F.label=6;case 6:return[3,24];case 7:return i instanceof PN?(u=i.messageIds,O=i.source,c=i.isWebSocketEventComing,h=u.filter(function(P){return typeof P=="number"}),f=u.filter(function(P){return typeof P=="string"}),[4,or(function(){return N(B,void 0,void 0,function(){return T(this,function(P){switch(P.label){case 0:return h.length>0?[4,this._messageCache.remove(h)]:[3,2];case 1:P.sent(),P.label=2;case 2:return f.length>0?[4,this._notificationCache.remove(f)]:[3,4];case 3:P.sent(),P.label=4;case 4:return[2]}})})})]):[3,9];case 8:return F.sent(),c||this._broadcastRemoveEvent(u,O),[3,24];case 9:return i instanceof kx?(p=i.reqId,O=i.source,[4,or(function(){return N(B,void 0,void 0,function(){return T(this,function(P){switch(P.label){case 0:return[4,this._unsentMessageCache.remove([p])];case 1:return P.sent(),[2]}})})})]):[3,11];case 10:return F.sent(),this._broadcastRemoveUnsentEvent(p,O),[3,24];case 11:return i instanceof xx?(_=i.polls,O=i.source,this._cacheContext.localCacheEnabled?(g=_.map(function(P){return P.messageId}),[4,Promise.all(g.map(function(P){return B._messageCache.get(P)}))]):[3,14]):[3,15];case 12:return(C=F.sent().filter(function(P){return P})).length>0&&_.forEach(function(P){var G=C.find(function(L){return L.messageId===P.messageId});G&&G.applyPoll(P)}),[4,or(function(){return N(B,void 0,void 0,function(){return T(this,function(P){switch(P.label){case 0:return[4,this._messageCache.upsert(C)];case 1:return[2,P.sent()]}})})})];case 13:F.sent(),F.label=14;case 14:return this._broadcastPollChangeLogEvent(_,O),[3,24];case 15:return i instanceof FN?(E=i.event,O=i.source,[4,this._messageCache.get(E.messageId)]):[3,19];case 16:return(y=F.sent())&&y.isUserMessage()&&y.poll&&y.poll.applyPollUpdateEvent(E)?[4,or(function(){return N(B,void 0,void 0,function(){return T(this,function(P){switch(P.label){case 0:return[4,this._messageCache.upsert([y])];case 1:return[2,P.sent()]}})})})]:[3,18];case 17:F.sent(),F.label=18;case 18:return this._broadcastPollUpdateEvent(E,O),[3,24];case 19:return i instanceof cE?(S=i.event,O=i.source,[4,this._messageCache.get(S.messageId)]):[3,23];case 20:return(I=F.sent())&&I.isUserMessage()&&I.poll&&I.poll.applyPollVoteEvent(S)?[4,or(function(){return N(B,void 0,void 0,function(){return T(this,function(P){switch(P.label){case 0:return[4,this._messageCache.upsert([I])];case 1:return[2,P.sent()]}})})})]:[3,22];case 21:F.sent(),F.label=22;case 22:return this._broadcastPollVoteEvent(S,O),[3,24];case 23:i instanceof Ux?(w=i.event,O=i.source,w.messageId>0&&this._broadcastReactionUpdateEvent(w,O)):i instanceof Lx?(R=i.event,O=i.source,this._broadcastThreadUpdateEvent(R,O)):i instanceof Dx&&(A=i.messageDeletionTimestamp,U=i.channelUrl,O=i.source,this._broadcastMessageRetentionEvent(A,U,O)),F.label=24;case 24:return[2]}})})}),r}return k(n,e),Object.defineProperty(n.prototype,"_cacheContext",{get:function(){return q.of(this._iid).cacheContext},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_dispatcher",{get:function(){return q.of(this._iid).dispatcher},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_messageCache",{get:function(){return ad.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return Td.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_notificationCache",{get:function(){return PW.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(t,r){var i;return r===void 0&&(r=!1),av[t]&&!r||(av[t]&&((i=av[t]._dispatcherContext)===null||i===void 0||i.close()),av[t]=new n(t)),av[t]},n.prototype._broadcastUpdateEvent=function(t,r){var i,a;try{for(var s=ye(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onUpdate&&l.onUpdate(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastPollChangeLogEvent=function(t,r){var i,a;try{for(var s=ye(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onPollChangeLogUpdate&&l.onPollChangeLogUpdate(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastPollUpdateEvent=function(t,r){var i,a;try{for(var s=ye(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onPollUpdate&&l.onPollUpdate(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastPollVoteEvent=function(t,r){var i,a;try{for(var s=ye(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onPollVote&&l.onPollVote(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastRemoveEvent=function(t,r){var i,a;try{for(var s=ye(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onRemove&&l.onRemove(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastRemoveUnsentEvent=function(t,r){var i,a;try{for(var s=ye(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onRemoveUnsent&&l.onRemoveUnsent(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastReactionUpdateEvent=function(t,r){var i,a;try{for(var s=ye(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onReactionUpdate&&l.onReactionUpdate(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastThreadUpdateEvent=function(t,r){var i,a;try{for(var s=ye(this._observers.values()),o=s.next();!o.done;o=s.next()){var l=o.value;l.onThreadInfoUpdate&&l.onThreadInfoUpdate(t,r)}}catch(u){i={error:u}}finally{try{o&&!o.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}},n.prototype._broadcastMessageRetentionEvent=function(t,r,i){var a,s;try{for(var o=ye(this._observers.values()),l=o.next();!l.done;l=o.next()){var u=l.value;u.onDeletedByRetentionPolicy&&u.onDeletedByRetentionPolicy(t,r,i)}}catch(c){a={error:c}}finally{try{l&&!l.done&&(s=o.return)&&s.call(o)}finally{if(a)throw a.error}}},n.prototype.subscribe=function(t,r){this._observers.set(t,r)},n.prototype.unsubscribe=function(t){this._observers.delete(t)},n.prototype.unsubscribeAll=function(){this._observers.clear()},n}(Ur),gR={},H1=function(e){function n(t,r){var i=r.sdkState,a=r.cacheContext,s=e.call(this,t)||this;return s._users=new Map,s._sdkState=i,s._cacheContext=a,gR[t]=s,s}return k(n,e),n.of=function(t){return gR[t]},Object.defineProperty(n.prototype,"collection",{get:function(){var t=this._cacheContext.nestdb;return me(!!t).throw(Q.databaseError),t.collection(v4)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"users",{get:function(){return it([],Ge(this._users.values()),!1)},enumerable:!1,configurable:!0}),n.prototype._serialize=function(t,r){return z(z({},t.serialize()),{updatedAt:r})},n.prototype._deserialize=function(t){return Gt._buildUserFromSerializedData(t)},n.prototype.isCachedInMemory=function(t){return this._users.has(t)},n.prototype.getUserInfoFromCache=function(t){if(this._users.has(t))return this._users.get(t)},n.prototype.get=function(t){return N(this,void 0,void 0,function(){var r,i;return T(this,function(a){switch(a.label){case 0:return this._users.has(t)?[3,3]:this.localCacheEnabled?[4,this.collection.getByKey(t)]:[3,2];case 1:if(r=a.sent())return i=this._deserialize(r),this._users.set(i.userId,i),[2,i];a.label=2;case 2:return[2,void 0];case 3:return[2,this._users.get(t)]}})})},n.prototype.fetch=function(t){var r=t.limit,i=r===void 0?100:r,a=t.backward,s=a!==void 0&&a;return N(this,void 0,void 0,function(){var o,l,u,c=this;return T(this,function(h){switch(h.label){case 0:if(!this.localCacheEnabled)return[2,[]];h.label=1;case 1:return h.trys.push([1,4,,5]),o={index:["-userId","-updatedAt"],backward:s},[4,this.collection.query(o)];case 2:return[4,h.sent().fetch({limit:i})];case 3:return l=h.sent(),(u=l.map(function(f){return c._deserialize(f)})).forEach(function(f){c._users.has(f.userId)||c._users.set(f.userId,f)}),[2,u];case 4:return h.sent(),[2,[]];case 5:return[2]}})})},n.prototype.upsert=function(t,r){return N(this,void 0,void 0,function(){var i,a;return T(this,function(s){switch(s.label){case 0:if(!this.localCacheEnabled)return[3,2];if(i=this._serialize(t,r),a=this._users.get(t.userId)){if(a._hashValue===t._hashValue)return[2];if(a._updatedAt>r)return[2]}return this._users.set(t.userId,Gt._buildUserFromSerializedData(i)),[4,this.collection.upsertOne(i)];case 1:s.sent(),s.label=2;case 2:return[2]}})})},n.prototype.remove=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return this._users.has(t)&&this._users.delete(t),this.localCacheEnabled?[4,this.collection.remove(t)]:[3,2];case 1:r.sent(),r.label=2;case 2:return[2]}})})},n.prototype.clearMemoryCache=function(){this._users.clear()},n.prototype.clear=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return this.clearMemoryCache(),this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n}(Ur),FW=function(e){function n(t){var r=this,i=t.reverse,a=i!==void 0&&i,s=t.limit,o=s===void 0?20:s,l=t.keys,u=t.token;return(r=e.call(this)||this).method=fe.GET,r.path="".concat(Wk),r.params=Ae({token:u,limit:o,reverse:a,order:S1.UPDATED_AT,show_ui_template:!0,show_color_variables:!0,keys:l}),r}return k(n,e),n}(ve),BW=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.next,s=r.has_more,o=s!==void 0&&s,l=r.templates;return i.nextToken=a,i.hasMore=o,i.templates=l.map(function(u){return{template:JSON.stringify(u)}}),i}return k(n,e),n}(_e),HW=function(e){function n(t){var r=this,i=t.key;return(r=e.call(this)||this).method=fe.GET,r.path="".concat(Wk,"/").concat(i),r}return k(n,e),n}(ve),GW=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.template=JSON.stringify(r),i}return k(n,e),n}(_e),ER={},Wr=function(){function e(n,t){var r=t.sdkState,i=t.dispatcher,a=t.requestQueue,s=t.onlineDetector,o=t.cacheContext;this._iid=n,this._sdkState=r,this._requestQueue=a,this._dispatcher=i,this._cacheContext=o,ad.of(n),Td.of(n),g4.of(n),this.fileMessageQueue=new Pq(n,{sdkState:r,dispatcher:i,requestQueue:a,onlineDetector:s,cacheContext:o}),ER[n]=this}return e.of=function(n){return ER[n]},e.prototype._setSenderInfo=function(n){if(this._cacheContext.localCacheEnabled&&(n.messageType===jn.USER||n.messageType===jn.FILE)){var t=n.sender;if(t){var r=H1.of(this._iid),i=r.getUserInfoFromCache(t.userId);if(i){var a=z(z({},n.sender),{nickname:i.nickname,profileUrl:i.plainProfileUrl,requireAuth:i.requireAuth,metadata:i.metaData});n.sender=a}else r.upsert(new Gt(this._iid,Gt.payloadify(t)),n.createdAt)}}},e.prototype.buildMessageFromSerializedData=function(n){var t=Ll(n);if(t.notificationId)return new Cd(this._iid,Cd.payloadify(t));switch(this._setSenderInfo(t),t.messageType){case jn.USER:return new Ni(this._iid,Ni.payloadify(t));case jn.FILE:return fs._isMultipleFilesMessageSerializedData(t)?new fs(this._iid,fs.payloadify(t)):new Rr(this._iid,Rr.payloadify(t));case jn.ADMIN:return new bd(this._iid,bd.payloadify(t))}throw Q.invalidParameters},e.prototype.buildUserMessageCreateParamsFromSerializedData=function(n,t){return Ae($e({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,mentionedMessageTemplate:t.mentionedMessageTemplate,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,message:t.message,translationTargetLanguages:Object.keys(t.translations),pollId:n.pollId}))},e.prototype.buildFileMessageCreateParamsFromSerializedData=function(n,t){var r;return Ae($e({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,file:n.file,fileKey:n.fileKey,fileUrl:t.plainUrl,fileName:t.name,fileSize:t.size,mimeType:t.type,thumbnailSizes:(r=t.thumbnails)===null||r===void 0?void 0:r.map(function(i){return{maxWidth:i.width,maxHeight:i.height}}),fileType:n.fileType,requireAuth:t.requireAuth}))},e.prototype.buildMultipleFilesMessageCreateParamsFromSerializedData=function(n,t){var r=this;return Ae({data:t.data,customType:t.customType,mentionType:t.mentionType,mentionedUserIds:t.mentionedUserIds,mentionedUsers:t.mentionedUsers,metaArrays:t.metaArrays,parentMessageId:t.parentMessageId,isReplyToChannel:n.isReplyToChannel,pushNotificationDeliveryOption:n.pushNotificationDeliveryOption,appleCriticalAlertOptions:t.appleCriticalAlertOptions,reqId:t.reqId,fileInfoList:n.fileInfoList.map(function(i){return new Up(r._iid,i)})})},e.prototype.buildScheduledUserMessageCreateParamsFromSerializedData=function(n,t){return z(z({},this.buildUserMessageCreateParamsFromSerializedData(n,t)),{scheduledAt:n.scheduledAt})},e.prototype.buildScheduledFileMessageCreateParamsFromSerializedData=function(n,t){return z(z({},this.buildFileMessageCreateParamsFromSerializedData(n,t)),{scheduledAt:n.scheduledAt})},e.prototype.buildSenderFromSerializedData=function(n){var t=Ll(n);return new nf(this._iid,nf.payloadify(t))},e.prototype.getMessage=function(n){return N(this,void 0,void 0,function(){var t,r;return T(this,function(i){switch(i.label){case 0:return t=new Fq(n),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,r.as(Bq).message]}})})},e.prototype.getScheduledMessage=function(n){return N(this,void 0,void 0,function(){var t,r;return T(this,function(i){switch(i.label){case 0:return t=new $q(n),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,r.as(Vq).message]}})})},e.prototype.getMessagesByMessageId=function(n,t,r,i,a){return a===void 0&&(a=oe.REQUEST_MESSAGE),N(this,void 0,void 0,function(){var s,o,l;return T(this,function(u){switch(u.label){case 0:return s=new R_(z(z(z({channelType:t,channelUrl:n,token:String(r)},Jv),i),{sdkSource:Us.EXTERNAL_LEGACY})),[4,this._requestQueue.send(s)];case 1:return o=u.sent(),l=o.as(O_).messages,this._dispatcher.dispatch(new er({messages:l,source:a})),[2,l]}})})},e.prototype.getMessagesByTimestamp=function(n,t,r,i,a){return a===void 0&&(a=oe.REQUEST_MESSAGE),N(this,void 0,void 0,function(){var s,o,l;return T(this,function(u){switch(u.label){case 0:return s=new R_(z(z(z({channelType:t,channelUrl:n,timestamp:r},Jv),i),{sdkSource:Us.EXTERNAL_LEGACY})),[4,this._requestQueue.send(s)];case 1:return o=u.sent(),l=o.as(O_).messages,this._dispatcher.dispatch(new er({messages:l,source:a})),[2,l]}})})},e.prototype._getMessagesByTimestampForCollection=function(n,t,r,i,a,s,o,l){return a===void 0&&(a=oe.REQUEST_MESSAGE),N(this,void 0,void 0,function(){var u,c,h,f,p,_;return T(this,function(g){switch(g.label){case 0:return u=new R_(z(z(z({channelType:t,channelUrl:n,timestamp:r},Jv),i),{checkingHasNext:s,checkingContinuousMessages:o,sdkSource:l})),[4,this._requestQueue.send(u)];case 1:return c=g.sent(),h=c.as(O_),f=h.messages,p=h.isContinuousMessages,_=h.hasNext,this._dispatcher.dispatch(new er({messages:f,source:a})),[2,{messages:f,isContinuousMessages:p,hasNext:_}]}})})},e.prototype.getThreadedMessagesByTimestamp=function(n,t,r,i){return i===void 0&&(i=oe.REQUEST_THREADED_MESSAGE),N(this,void 0,void 0,function(){var a,s,o,l;return T(this,function(u){switch(u.label){case 0:return a=new R_(z(z(z({channelUrl:n.channelUrl,channelType:n.channelType,timestamp:t},nm),r),{replyType:Yr.ALL,parentMessageId:n.messageId,includeThreadInfo:!0})),[4,this._requestQueue.send(a)];case 1:return s=u.sent(),o=s.as(O_).messages,(l=o.slice(1)).forEach(function(c){c.parentMessage=n}),this._dispatcher.dispatch(new er({messages:l,source:i})),[2,{parentMessage:o[0],threadedMessages:l}]}})})},e.prototype.getMessageTemplatesByToken=function(n,t){return t===void 0&&(t={}),N(this,void 0,void 0,function(){var r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:return r=new FW(z({token:n},t)),[4,this._requestQueue.send(r)];case 1:return i=u.sent(),a=i.as(BW),s=a.hasMore,o=a.nextToken,l=a.templates,[2,{hasMore:s,token:o,templates:l}]}})})},e.prototype.getMessageTemplate=function(n){return N(this,void 0,void 0,function(){var t,r;return T(this,function(i){switch(i.label){case 0:return t=new HW({key:n}),[4,this._requestQueue.send(t)];case 1:return r=i.sent(),[2,{template:r.as(GW).template}]}})})},e.prototype.getMessageChangelogs=function(n,t,r,i,a){return a===void 0&&(a=oe.REQUEST_MESSAGE_CHANGELOGS),N(this,void 0,void 0,function(){var s,o,l,u,c,h,f,p,_;return T(this,function(g){switch(g.label){case 0:return s=new Hq(Ae($e(z(z({channelType:t,channelUrl:n,timestamp:typeof r=="number"?r:null,token:typeof r=="string"?r:null},k1),i)))),[4,this._requestQueue.send(s)];case 1:return o=g.sent(),l=o.as(Gq),u=l.updatedMessages,c=l.deletedMessagesInfo,h=l.hasMore,f=l.nextToken,p=l.forceUseNextToken,_=c.map(function(C){return C.messageId}),u.length>0&&this._dispatcher.dispatch(new er({messages:u,source:a})),_.length>0&&this._dispatcher.dispatch(new PN({messageIds:_,source:a})),[2,{updatedMessages:u,deletedMessageIds:_,hasMore:h,token:f,forceUseNextToken:p}]}})})},e}(),E4=function(e){function n(t,r){var i=e.call(this,t)||this;i.targetMessageId=0;var a=r.thread_info,s=r.parent_message_id,o=r.channel_url,l=r.channel_type;return a&&Y("object",a)&&Y("number",s)&&Y("string",o)&&Y("string",l)&&(i.threadInfo=new f0(t,a),i.targetMessageId=s,i.channelUrl=o,i.channelType=l),i}return k(n,e),n}(Ur),$W={channelUrl:"",channelType:Kt.BASE,messageId:0,includeReactions:!1,includeMetaArray:!1,includeParentMessageInfo:!1,includeThreadInfo:!1},VW=function(e){function n(t){var r=t.channelCustomType,i=t.keyword,a=t.limit,s=t.reverse,o=t.exactMatch,l=t.channelUrl,u=t.order,c=t.messageTimestampFrom,h=t.messageTimestampTo,f=t.advancedQuery,p=t.targetFields,_=t.nextToken,g=e.call(this)||this;return g.method=fe.GET,g.path="".concat(pz,"/messages"),g.params=Ae({custom_type:r,query:i,limit:a,reverse:s,exact_match:o,channel_url:l,message_ts_from:c,message_ts_to:h,sort_field:u,advanced_query:f,target_fields:p,after:_}),g}return k(n,e),n}(ve),zW=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.messages=r.results.map(function(a){return Di(t,a)}),i.hasNext=r.has_next,i.nextToken=r.end_cursor,i.totalCount=r.total_count,i}return k(n,e),n}(_e);(function(e){e.SCORE="score",e.TIMESTAMP="ts"})(rp||(rp={}));var jW=function(e){function n(t,r){var i,a,s,o,l,u,c,h,f,p=this;return(p=e.call(this,t,r)||this).keyword="",p.reverse=!1,p.exactMatch=!1,p.channelUrl=null,p.channelCustomType=null,p.messageTimestampFrom=null,p.messageTimestampTo=null,p.order=rp.SCORE,p.advancedQuery=!1,p.targetFields=null,p._nextToken="",p.totalCount=-1,p.keyword=r.keyword,p.reverse=(i=r.reverse)!==null&&i!==void 0&&i,p.exactMatch=(a=r.exactMatch)!==null&&a!==void 0&&a,p.channelUrl=(s=r.channelUrl)!==null&&s!==void 0?s:null,p.channelCustomType=(o=r.channelCustomType)!==null&&o!==void 0?o:null,p.messageTimestampFrom=(l=r.messageTimestampFrom)!==null&&l!==void 0?l:null,p.messageTimestampTo=(u=r.messageTimestampTo)!==null&&u!==void 0?u:null,p.order=(c=r.order)!==null&&c!==void 0?c:rp.SCORE,p.advancedQuery=(h=r.advancedQuery)!==null&&h!==void 0&&h,p.targetFields=(f=r.targetFields)!==null&&f!==void 0?f:null,p}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Y("string",this.keyword)&&this.keyword.length>0&&Y("boolean",this.reverse)&&Y("boolean",this.exactMatch)&&Y("string",this.channelUrl,!0)&&Y("string",this.channelCustomType,!0)&&Y("number",this.messageTimestampFrom,!0)&&Y("number",this.messageTimestampTo,!0)&&Bt(rp,this.order)&&Y("boolean",this.advancedQuery)&&Ht("string",this.targetFields,!0)},n.prototype.next=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=q.of(this._iid).requestQueue,r=new VW($e(z(z({},this),{nextToken:this._nextToken?this._nextToken:null}))),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=c.sent(),a=i.as(zW),s=a.messages,o=a.hasNext,l=a.nextToken,u=a.totalCount,this._nextToken=l,this._hasNext=o,this._isLoading=!1,this.totalCount=u,[2,s];case 2:return[2,[]];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(Kl),qW=function(e){function n(t){var r=t.channelType,i=t.channelUrl,a=t.limit,s=t.token,o=e.call(this)||this;return o.method=fe.GET,o.path="".concat(mn(r),"/").concat(encodeURIComponent(i),"/messages/parent_thread_message"),o.params=Ae($e({limit:a,token:s})),o}return k(n,e),n}(ve),KW=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.token=r.next,i.messages=r.messages.map(function(a){return Di(t,a)}),i}return k(n,e),n}(_e),WW=function(e){function n(t,r,i,a){var s=e.call(this,t,r,i,a)||this;return s._edge="",s}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)},n.prototype.load=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=q.of(this._iid).requestQueue,r=new qW({channelType:this.channelType,channelUrl:this.channelUrl,token:this._edge,limit:this.limit}),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(KW),s=a.messages,o=a.token,this._edge=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(el),YW={channelUrl:"",scheduledMessageId:0},QW={reverse:!1,limit:20},XW=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.name="message",t}return k(n,e),n.prototype.init=function(t,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,o=r.requestQueue,l=r.logger,u=r.onlineDetector,c=r.cacheContext;e.prototype.init.call(this,t,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:l,onlineDetector:u,cacheContext:c}),this._manager=new Wr(t,{sdkState:i,dispatcher:a,requestQueue:o,onlineDetector:u,cacheContext:c})},n.prototype.buildMessageFromSerializedData=function(t){return this._manager.buildMessageFromSerializedData(t)},n.prototype.buildSenderFromSerializedData=function(t){return this._manager.buildSenderFromSerializedData(t)},n.prototype.getMessage=function(t){return N(this,void 0,void 0,function(){var r,i;return T(this,function(a){switch(a.label){case 0:return r=z(z({},$W),t),me(function(s){return Y("string",s.channelUrl)&&Bt(Kt,s.channelType)&&Y("number",s.messageId)&&Y("boolean",s.includeReactions,!0)&&Y("boolean",s.includeMetaArray,!0)&&Y("boolean",s.includeParentMessageInfo,!0)&&Y("boolean",s.includeThreadInfo,!0)}(r)).throw(Q.invalidParameters),[4,this._manager.getMessage(r)];case 1:if((i=a.sent())instanceof Hi||i instanceof Cd||i===null)return[2,i];throw"Unknown message type is given."}})})},n.prototype.getScheduledMessage=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){return r=z(z({},YW),t),me(function(a){return Y("string",a.channelUrl)&&a.channelUrl!==""&&Y("number",a.scheduledMessageId)&&a.scheduledMessageId>0}(r)).throw(Q.invalidParameters),[2,this._manager.getScheduledMessage(r)]})})},n.prototype.getMessageTemplatesByToken=function(t,r){return r===void 0&&(r={}),N(this,void 0,void 0,function(){var i;return T(this,function(a){return i=z(z({},QW),r),me(Y("string",t,!0)&&function(s){return Y("boolean",s.reverse,!0)&&Y("number",s.limit,!0)&&Ht("string",s.keys,!0)}(i)).throw(Q.invalidParameters),[2,this._manager.getMessageTemplatesByToken(t,i)]})})},n.prototype.getMessageTemplate=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){return me(Y("string",t)).throw(Q.invalidParameters),[2,this._manager.getMessageTemplate(t)]})})},n}(uE),mr,ip,G1;(function(e){e.LATEST_LAST_MESSAGE="latest_last_message",e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",e.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"})(mr||(mr={})),function(e){e.CHRONOLOGICAL="chronological",e.CHANNEL_NAME_ALPHABETICAL="channel_name_alphabetical",e.METADATA_VALUE_ALPHABETICAL="metadata_value_alphabetical"}(ip||(ip={})),function(e){e.CREATED_AT="created_at",e.SCHEDULED_AT="scheduled_at"}(G1||(G1={}));var Lp,Eg=function(e){switch(e){case mr.LATEST_LAST_MESSAGE:return["-lastMessageUpdatedAt","-createdAt","syncIndex"];case mr.CHRONOLOGICAL:return["-createdAt","syncIndex"];case mr.CHANNEL_NAME_ALPHABETICAL:return["name"];default:return["-lastMessageUpdatedAt","-createdAt","syncIndex"]}},y4=function(e){function n(t){var r=t.message,i=e.call(this)||this;return i.message=r,i}return k(n,e),n}(Gn),yR={},Av=function(){function e(n,t){var r=t.localCacheEnabled,i=t.enableAutoResend,a=t.dispatcher,s=t.sdkState,o=t.logger,l=this;this._iid=n,yR[n]=this,this._localCacheEnabled=r,this._enableAutoResend=i,this._isProcessingAutoResend=!1,this._autoResendQueue=[],this._dispatcher=a,this._logger=o,this._sdkState=s,this._localCacheEnabled&&a.on(function(u){if(u instanceof ja)switch(u.stateType){case gn.CONNECTED:l._isProcessingAutoResend||l.processAutoResendRegisteredPendingMessages().then(function(){return l._processNextAutoResend()});break;case gn.INTERNAL_DISCONNECTED:case gn.EXTERNAL_DISCONNECTED:l._isProcessingAutoResend=!1}})}return e.of=function(n){return yR[n]},e.prototype.processNonAutoResendRegisteredPendingMessages=function(){return N(this,void 0,void 0,function(){var n=this;return T(this,function(t){switch(t.label){case 0:return this._enableAutoResend?[4,or(function(){return N(n,void 0,void 0,function(){var r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:r=u.sent();try{for(i=ye(r),a=i.next();!a.done;a=i.next())(s=a.value).errorCode===0&&(this._logger.debug("cached pending message is not auto-resend registered. changing its sending status to failed: ",s.reqId),s.sendingStatus=sn.FAILED,s.errorCode=Le.ACK_TIMEOUT,this._dispatcher.dispatch(new er({messages:[s],source:oe.LOCAL_MESSAGE_FAILED})))}catch(c){o={error:c}}finally{try{a&&!a.done&&(l=i.return)&&l.call(i)}finally{if(o)throw o.error}}return[2]}})})})]:[2];case 1:return t.sent(),[2]}})})},e.prototype.processAutoResendRegisteredPendingMessages=function(){return N(this,void 0,void 0,function(){var n=this;return T(this,function(t){switch(t.label){case 0:return[4,or(function(){return N(n,void 0,void 0,function(){var r,i,a,s,o,l,u,c;return T(this,function(h){switch(h.label){case 0:return[4,this._fetchAllCachedPendingMessages()];case 1:r=h.sent();try{for(i=ye(r),a=i.next();!a.done;a=i.next())s=a.value,this._enableAutoResend&&s.errorCode&&t0(s.errorCode)&&(o=new Date().getTime(),l=s.createdAt+2592e5,this._enableAutoResend&&o<=l?this._autoResendQueue.map(function(f){return f.reqId}).indexOf(s.reqId)<0&&this._autoResendQueue.push(s):(this._logger.debug("auto-resend registered pending messaged expired. expiration date: ",new Date(l).toLocaleString()),s.sendingStatus=sn.FAILED,this._dispatcher.dispatch(new er({messages:[s],source:oe.LOCAL_MESSAGE_FAILED}))))}catch(f){u={error:f}}finally{try{a&&!a.done&&(c=i.return)&&c.call(i)}finally{if(u)throw u.error}}return[2]}})})})];case 1:return t.sent(),[2]}})})},e.prototype.completeCurrentAndProcessNextAutoResend=function(n){if(this._localCacheEnabled&&this._enableAutoResend&&(n.sendingStatus===sn.SUCCEEDED||n.sendingStatus===sn.FAILED&&!t0(n.errorCode))){var t=this.indexOf(n);t>=0&&this._autoResendQueue.splice(t,1),t===0&&this._processNextAutoResend()}},e.prototype._fetchAllCachedPendingMessages=function(){return N(this,void 0,void 0,function(){var n,t;return T(this,function(r){switch(r.label){case 0:return n=Td.of(this._iid),(t=new Wu).replyType=Yr.ALL,[4,n.fetch({sendingStatus:sn.PENDING,backward:!0,filter:t})];case 1:return[2,r.sent()]}})})},e.prototype.indexOf=function(n){return this._autoResendQueue.length>0?this._autoResendQueue.map(function(t){return t.reqId}).indexOf(n.reqId):-1},e.prototype._processNextAutoResend=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){if(this._localCacheEnabled&&this._enableAutoResend&&this._sdkState.appState==="foreground")try{this._autoResendQueue.length>0?(this._isProcessingAutoResend||(this._logger.debug("auto-resend queue started."),this._isProcessingAutoResend=!0),n=this._autoResendQueue[0],this._dispatcher.dispatch(new y4({message:n})),this._logger.debug("processing auto-resend for message request id: ",n.reqId)):(this._logger.debug("auto-resend queue finished."),this._isProcessingAutoResend=!1)}catch(r){this._logger.warn("process auto-resend error: ",r),this._isProcessingAutoResend=!1}return[2]})})},e}();(function(e){e[e.USER_BLOCK=20001]="USER_BLOCK",e[e.USER_UNBLOCK=2e4]="USER_UNBLOCK",e[e.FRIEND_DISCOVERED=20900]="FRIEND_DISCOVERED"})(Lp||(Lp={}));var El,E0=function(){function e(n){this.category=n.cat,this.data=n.data}return e.getDataAsUserBlockEvent=function(n,t){var r=t.data,i=r.blocker,a=r.blockee;return{blocker:new Gt(n,i),blockee:new Gt(n,a)}},e.getDataAsFriendDiscoveredEvent=function(n,t){var r=t.data.friend_discoveries;return{friendDiscoveries:Array.isArray(r)?r.map(function(i){return new Gt(n,i)}):[]}},e}(),b4=function(e){function n(t,r){var i=r.userId,a=e.call(this)||this;return a._iid=t,a.userId=i,a}return k(n,e),n}(Gn),C4=function(e){function n(){return e.call(this)||this}return k(n,e),n}(Gn),S4=function(e){function n(t){var r=t.configTs,i=e.call(this)||this;return i.configTs=r,i}return k(n,e),n}(Gn),T4=function(e){function n(t,r,i){var a=e.call(this,t,"USEV",i)||this;return a.event=new E0(i),a}return k(n,e),n}(Qn),N4=function(e){function n(t){var r=t.appConfigsInfo,i=t.configTs,a=e.call(this)||this;return a.appConfigsInfo={},a.configTs=0,a.appConfigsInfo=r,a.configTs=i,a}return k(n,e),n}(Gn);(function(e){e[e.IDLE=0]="IDLE",e[e.RUNNING=1]="RUNNING",e[e.END=2]="END"})(El||(El={}));var $l=function(e){function n(t,r,i,a){var s=e.call(this)||this;return s._state=El.IDLE,s._retryCount=0,s._retryLimit=3,s.priority=0,s._worker=r,s}return k(n,e),Object.defineProperty(n.prototype,"isIdle",{get:function(){return this._state===El.IDLE},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isRunning",{get:function(){return this._state===El.RUNNING},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDone",{get:function(){return this._state===El.END},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"retryCount",{get:function(){return this._retryCount},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"retryLimit",{get:function(){return this._retryLimit},enumerable:!1,configurable:!0}),n.prototype._run=function(t){return N(this,void 0,void 0,function(){var r,i;return T(this,function(a){switch(a.label){case 0:if(!this.isRunning)return[3,4];a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this._worker(t)];case 2:return r=a.sent(),this._retryCount=0,this.dispatch("progress",r),r.hasNext?this._run(r.nextToken):this.end(),[3,4];case 3:return i=a.sent(),this.dispatch("error",i),this._retryCount<this._retryLimit?(this._retryCount++,this._run(t)):this.stop(),[3,4];case 4:return[2]}})})},n.prototype.start=function(t){this.isRunning||(this._state=El.RUNNING,this._run(t))},n.prototype.stop=function(){this._state=El.IDLE,this.dispatch("stop")},n.prototype.end=function(){this._state=El.END,this.dispatch("end")},n}(Dd),ZW=function(e,n){this.pollId=0,this.messageId=0,this.pollId=n.poll.id,this.messageId=n.poll.message_id,this._iid=e,this._payload=n},wn;(function(e){e[e.NONE=0]="NONE",e[e.CHANNEL_ENTER=10102]="CHANNEL_ENTER",e[e.CHANNEL_EXIT=10103]="CHANNEL_EXIT",e[e.USER_CHANNEL_MUTE=10201]="USER_CHANNEL_MUTE",e[e.USER_CHANNEL_UNMUTE=10200]="USER_CHANNEL_UNMUTE",e[e.USER_CHANNEL_BAN=10601]="USER_CHANNEL_BAN",e[e.USER_CHANNEL_UNBAN=10600]="USER_CHANNEL_UNBAN",e[e.CHANNEL_FREEZE=10701]="CHANNEL_FREEZE",e[e.CHANNEL_UNFREEZE=10700]="CHANNEL_UNFREEZE",e[e.TYPING_START=10900]="TYPING_START",e[e.TYPING_END=10901]="TYPING_END",e[e.CHANNEL_JOIN=1e4]="CHANNEL_JOIN",e[e.CHANNEL_LEAVE=10001]="CHANNEL_LEAVE",e[e.CHANNEL_OPERATOR_UPDATE=10002]="CHANNEL_OPERATOR_UPDATE",e[e.CHANNEL_INVITE=10020]="CHANNEL_INVITE",e[e.CHANNEL_ACCEPT_INVITE=10021]="CHANNEL_ACCEPT_INVITE",e[e.CHANNEL_DECLINE_INVITE=10022]="CHANNEL_DECLINE_INVITE",e[e.CHANNEL_PROP_CHANGED=11e3]="CHANNEL_PROP_CHANGED",e[e.CHANNEL_DELETED=12e3]="CHANNEL_DELETED",e[e.CHANNEL_META_DATA_CHANGED=11100]="CHANNEL_META_DATA_CHANGED",e[e.CHANNEL_META_COUNTERS_CHANGED=11200]="CHANNEL_META_COUNTERS_CHANGED",e[e.CHANNEL_HIDE=13e3]="CHANNEL_HIDE",e[e.CHANNEL_UNHIDE=13001]="CHANNEL_UNHIDE",e[e.PINNED_MESSAGE_CHANGED=11300]="PINNED_MESSAGE_CHANGED"})(wn||(wn={}));var JW=function(){function e(n){var t;this.channelUrl=n.channel_url,this.channelType=n.channel_type,this.category=n.cat,this.data=(t=n.data)!==null&&t!==void 0?t:{},this.ts=n.ts}return Object.defineProperty(e.prototype,"isGroupChannelEvent",{get:function(){return this.channelType===Kt.GROUP},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isOpenChannelEvent",{get:function(){return this.channelType===Kt.OPEN},enumerable:!1,configurable:!0}),e}(),Yl=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.event=new JW(i),a}return k(n,e),n}(Qn),I4=function(e){function n(t,r,i){var a=e.call(this,t,r,i)||this,s=i.data.operators,o=s===void 0?[]:s;return a.operators=o.map(function(l){return new Gt(a._iid,l)}),a}return k(n,e),n}(Yl),M4=function(e){function n(t,r,i){var a,s=this;return(s=e.call(this,t,"SYEV",i)||this).pinnedMessageIds=[],s.latestPinnedMessage=null,s.ts=0,i.data&&(s.pinnedMessageIds=(a=i.data.pinned_message_ids)!==null&&a!==void 0?a:[],s.latestPinnedMessage=i.data.latest_pinned_message?Di(t,z({},i.data.latest_pinned_message)):null),s.ts=i.ts,s}return k(n,e),n}(Qn),A4=function(e){function n(t,r){var i=e.call(this,t)||this;return i._logger=r.logger,i._sdkState=r.sdkState,i._sessionManager=r.sessionManager,i._requestQueue=r.requestQueue,i._dispatcher=r.dispatcher,i._cacheContext=r.cacheContext,i._channelType=r.channelType,i}return k(n,e),Object.defineProperty(n.prototype,"_messageBroadcast",{get:function(){return g4.of(this._iid)},enumerable:!1,configurable:!0}),n.prototype.subscribeMessageEvent=function(t,r){this._messageBroadcast.subscribe(t,r)},n.prototype.unsubscribeMessageEvent=function(t){this._messageBroadcast.unsubscribe(t)},n.prototype.getMessageFromCache=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){return[2,null]})})},n.prototype.getExactlyMatchingMessagesForTokenFromCache=function(t,r,i,a){return N(this,void 0,void 0,function(){return T(this,function(s){return[2,[]]})})},n.prototype.getMessagesFromCache=function(t,r,i,a,s,o,l){return N(this,void 0,void 0,function(){return T(this,function(u){return[2,[]]})})},n.prototype.getPollMessagesFromCache=function(t,r,i,a){return N(this,void 0,void 0,function(){return T(this,function(s){return[2,[]]})})},n.prototype.getCachedMessageCountBetween=function(t,r,i,a){return N(this,void 0,void 0,function(){return T(this,function(s){return[2,0]})})},n.prototype.getUnsentMessagesFromCache=function(t,r){return N(this,void 0,void 0,function(){return T(this,function(i){return[2,[]]})})},n.prototype.removeFailedMessageFromCache=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){return[2]})})},n}(Ur),w4=function(e){function n(t,r,i){var a,s,o,l,u=this;(u=e.call(this,t,"ADMM",i)||this).message=new bd(t,i);var c=q.of(t).sdkState;return u.isMentioned=Xh(u.message.mentionType,(o=(a=u.message.mentionedUserIds)!==null&&a!==void 0?a:(s=u.message.mentionedUsers)===null||s===void 0?void 0:s.map(function(h){return h.userId}))!==null&&o!==void 0?o:[],c.userId),u.forceUpdateLastMessage=(l=i.force_update_last_message)!==null&&l!==void 0&&l,u}return k(n,e),n}(Qn),R4=function(e){function n(t,r,i){var a,s,o,l,u,c=this;(c=e.call(this,t,"AEDI",i)||this).message=new bd(t,i);var h=q.of(t).sdkState;return c.mentionCountChange=MN({mentionType:(a=i.old_values)===null||a===void 0?void 0:a.mention_type,mentionedUserIds:(o=(s=i.old_values)===null||s===void 0?void 0:s.mentioned_user_ids)!==null&&o!==void 0?o:[]},$e({mentionType:c.message.mentionType,mentionedUserIds:(l=c.message.mentionedUserIds)!==null&&l!==void 0?l:(u=c.message.mentionedUsers)===null||u===void 0?void 0:u.map(function(f){return f.userId})}),h.userId),c}return k(n,e),n}(Qn),O4=function(e){function n(t,r,i){var a=e.call(this,t,"MRCT",i)||this;return a.channelUrl=i.channel_url,a.channelType=i.channel_type,a.event=new BN(i),a}return k(n,e),n}(Qn),D4=function(e){function n(t,r,i){var a=e.call(this,t,"MTHD",i)||this;return a.event=new E4(t,i),a}return k(n,e),n}(Qn),U4=function(e){function n(t,r,i){var a=e.call(this,t,"MCNT",i)||this;return a.groupChannelMemberCounts=i.group_channels.map(function(s){return{channelUrl:s.channel_url,memberCount:s.member_count,joinedMemberCount:s.joined_member_count,updatedAt:s.ts}}),a.openChannelMemberCounts=i.open_channels.map(function(s){return{channelUrl:s.channel_url,participantCount:s.participant_count,updatedAt:s.ts}}),a}return k(n,e),n}(Qn),L4=function(e){function n(t,r,i){var a=e.call(this,t,"PEDI",i)||this;return a.event=new ZW(t,i),a.status=D1(i.poll.status)||i.poll.status,a.channelUrl=i.channel_url,a.channelType=i.channel_type,a}return k(n,e),n}(Qn),k4=function(){this.onUserMuted=vt,this.onUserUnmuted=vt,this.onUserBanned=vt,this.onUserUnbanned=vt,this.onChannelChanged=vt,this.onChannelDeleted=vt,this.onChannelFrozen=vt,this.onChannelUnfrozen=vt,this.onOperatorUpdated=vt,this.onChannelMemberCountChanged=vt,this.onMetaDataCreated=vt,this.onMetaDataUpdated=vt,this.onMetaDataDeleted=vt,this.onMetaCounterCreated=vt,this.onMetaCounterUpdated=vt,this.onMetaCounterDeleted=vt,this.onMessageReceived=vt,this.onMessageUpdated=vt,this.onMessageDeleted=vt,this.onMentionReceived=vt,this.onReactionUpdated=vt,this.onThreadInfoUpdated=vt},Er;(function(e){e.NONE="none",e.JOINED="joined",e.INVITED="invited",e.LEFT="left"})(Er||(Er={}));var Yo,fa,pa,Vu,Fs,y0,kl,kp,us=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.state=null,i.role=null,i.isMuted=!1,i.isBlockedByMe=!1,i.isBlockingMe=!1,i.state=Bt(Er,r.state)?r.state:null,i.role=Bt(hs,r.role)?r.role:null,typeof r.is_muted=="boolean"&&(i.isMuted=r.is_muted),typeof r.is_blocked_by_me=="boolean"&&(i.isBlockedByMe=r.is_blocked_by_me),typeof r.is_blocking_me=="boolean"&&(i.isBlockingMe=r.is_blocking_me),i}return k(n,e),n.payloadify=function(t){return Ae($e(z(z({},e.payloadify.call(this,t)),{state:t.state,role:t.role,is_muted:t.isMuted,is_blocked_by_me:t.isBlockedByMe,is_blocking_me:t.isBlockingMe})))},n}(Ld),eY=function(e){function n(t,r){var i,a,s=this;return(s=e.call(this,t)||this).channelUrl=(i=r.channel_url)!==null&&i!==void 0?i:"",s.channelType=(a=r.channel_type)!==null&&a!==void 0?a:Kt.GROUP,s.member=new Gt(s._iid,r.user),s.deliveryAt=r.ts,s}return k(n,e),n}(Ur);(function(e){e.ALL="all",e.PUBLIC="public",e.PRIVATE="private"})(Yo||(Yo={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(fa||(fa={})),function(e){e.ALL="all",e.SUPER="super",e.NON_SUPER="nonsuper",e.BROADCAST_ONLY="broadcast_only",e.EXCLUSIVE_ONLY="exclusive_only"}(pa||(pa={})),function(e){e.ALL="all",e.UNREAD_MESSAGE="unread_message"}(Vu||(Vu={})),function(e){e.ALL="all",e.UNHIDDEN="unhidden_only",e.HIDDEN="hidden_only",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(Fs||(Fs={})),function(e){e.ALL="all",e.OPERATOR="operator",e.NONOPERATOR="nonoperator"}(y0||(y0={})),function(e){e.AND="AND",e.OR="OR"}(kl||(kl={})),function(e){e.MEMBER_NICKNAME="member_nickname",e.CHANNEL_NAME="channel_name"}(kp||(kp={}));var sr,pE=function(){function e(n){var t,r,i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w;this._searchFilter=null,this._userIdsFilter=null,this.metadataKey=null,this.metadataValues=null,this.metadataValueStartsWith=null,this.includeEmpty=(t=n==null?void 0:n.includeEmpty)!==null&&t!==void 0&&t,this.nicknameContainsFilter=(r=n==null?void 0:n.nicknameContainsFilter)!==null&&r!==void 0?r:null,this.nicknameStartsWithFilter=(i=n==null?void 0:n.nicknameStartsWithFilter)!==null&&i!==void 0?i:null,this.nicknameExactMatchFilter=(a=n==null?void 0:n.nicknameExactMatchFilter)!==null&&a!==void 0?a:null,this.channelNameContainsFilter=(s=n==null?void 0:n.channelNameContainsFilter)!==null&&s!==void 0?s:"",this.myMemberStateFilter=(o=n==null?void 0:n.myMemberStateFilter)!==null&&o!==void 0?o:fa.ALL,this.customTypesFilter=(l=n==null?void 0:n.customTypesFilter)!==null&&l!==void 0?l:null,this.channelUrlsFilter=(u=n==null?void 0:n.channelUrlsFilter)!==null&&u!==void 0?u:null,this.superChannelFilter=(c=n==null?void 0:n.superChannelFilter)!==null&&c!==void 0?c:pa.ALL,this.publicChannelFilter=(h=n==null?void 0:n.publicChannelFilter)!==null&&h!==void 0?h:Yo.ALL,this.customTypeStartsWithFilter=(f=n==null?void 0:n.customTypeStartsWithFilter)!==null&&f!==void 0?f:null,this.unreadChannelFilter=(p=n==null?void 0:n.unreadChannelFilter)!==null&&p!==void 0?p:Vu.ALL,this.hiddenChannelFilter=(_=n==null?void 0:n.hiddenChannelFilter)!==null&&_!==void 0?_:Fs.UNHIDDEN,this.includeFrozen=(g=n==null?void 0:n.includeFrozen)===null||g===void 0||g,this.metadataKey=(C=n==null?void 0:n.metadataKey)!==null&&C!==void 0?C:null,this.metadataValues=(E=n==null?void 0:n.metadataValues)!==null&&E!==void 0?E:null,this.metadataValueStartsWith=(y=n==null?void 0:n.metadataValueStartsWith)!==null&&y!==void 0?y:null,this._userIdsFilter=(S=n==null?void 0:n.userIdsFilter)!==null&&S!==void 0?S:null,this._searchFilter=(I=n==null?void 0:n.searchFilter)!==null&&I!==void 0?I:null,n!=null&&n.createdAfter&&(this.createdAfter=n.createdAfter),n!=null&&n.createdBefore&&(this.createdBefore=n.createdBefore),this.includeMetaData=(w=n==null?void 0:n.includeMetaData)===null||w===void 0||w}return e.prototype._isFriend=function(n){return!(!n||!n.friendDiscoveryKey&&!n.friendName)},Object.defineProperty(e.prototype,"searchFilter",{get:function(){return this._searchFilter},enumerable:!1,configurable:!0}),e.prototype.setSearchFilter=function(n,t){Array.isArray(n)&&n.length!==0&&typeof t=="string"&&t&&(this._searchFilter={query:t,fields:n})},Object.defineProperty(e.prototype,"userIdsFilter",{get:function(){return this._userIdsFilter},enumerable:!1,configurable:!0}),e.prototype.setUserIdsFilter=function(n,t,r){r===void 0&&(r=kl.AND),this._userIdsFilter={userIds:n,includeMode:t,queryType:r}},e.prototype.clone=function(){var n,t=new e;this.searchFilter&&t.setSearchFilter(this.searchFilter.fields,(n=this.searchFilter.query)!==null&&n!==void 0?n:void 0),this.userIdsFilter&&t.setUserIdsFilter(this.userIdsFilter.userIds,this.userIdsFilter.includeMode,this.userIdsFilter.queryType);var r=JSON.parse(JSON.stringify(this));return Object.keys(r).forEach(function(i){t[i]=r[i]}),t},e.prototype.match=function(n,t){var r;if(this._searchFilter){var i=this._searchFilter,a=i.query,s=i.fields;if(a&&s&&s.length>0&&!s.some(function(g){switch(g){case kp.CHANNEL_NAME:return n.name.toLowerCase().includes(a.toLowerCase());case kp.MEMBER_NICKNAME:return n.members.some(function(C){return C.nickname.toLowerCase().includes(a.toLowerCase())});default:return!0}}))return!1}if(this._userIdsFilter){var o=this._userIdsFilter,l=o.userIds,u=o.includeMode,c=o.queryType,h=n.members.map(function(g){return g.userId});if(u){if(l.length>0)switch(c){case kl.AND:if(l.some(function(g){return!h.includes(g)}))return!1;break;case kl.OR:if(l.every(function(g){return!h.includes(g)}))return!1}}else if(l.includes(t)||l.push(t),n.members.length>l.length||!sz(l,h))return!1}if(!this.includeEmpty&&!n.lastMessage||!this.includeFrozen&&n.isFrozen||this.customTypesFilter&&this.customTypesFilter.length>0&&!this.customTypesFilter.includes("*")&&!this.customTypesFilter.includes(n.customType)||this.customTypeStartsWithFilter&&!new RegExp("^".concat(this.customTypeStartsWithFilter)).test(n.customType)||this.channelNameContainsFilter&&!n.name.toLowerCase().includes(this.channelNameContainsFilter.toLowerCase()))return!1;if(this.nicknameContainsFilter){var f=this.nicknameContainsFilter.toLowerCase();if(!n.members.some(function(g){return g.userId!==t&&g.nickname.toLowerCase().includes(f)}))return!1}if(this.nicknameStartsWithFilter){var p=this.nicknameStartsWithFilter.toLowerCase();if(!n.members.some(function(g){return g.userId!==t&&g.nickname.toLowerCase().startsWith(p)}))return!1}if(this.nicknameExactMatchFilter){var _=this.nicknameExactMatchFilter.toLowerCase();if(!n.members.some(function(g){return g.userId!==t&&g.nickname.toLowerCase()!=_}))return!1}if(this.channelUrlsFilter&&this.channelUrlsFilter.length>0&&!this.channelUrlsFilter.includes(n.url))return!1;if(this.myMemberStateFilter)switch(this.myMemberStateFilter){case fa.ALL:if(n.myMemberState==="none")return!1;break;case fa.JOINED:if(n.myMemberState!=="joined")return!1;break;case fa.INVITED:if(n.myMemberState!=="invited")return!1;break;case fa.INVITED_BY_FRIEND:if(n.myMemberState!=="invited"||!this._isFriend(n.inviter))return!1;break;case fa.INVITED_BY_NON_FRIEND:if(n.myMemberState!=="invited"||this._isFriend(n.inviter))return!1}if(this.hiddenChannelFilter)switch(this.hiddenChannelFilter){case Fs.UNHIDDEN:if(n.isHidden||n.hiddenState!=="unhidden")return!1;break;case Fs.HIDDEN:if(!n.isHidden)return!1;break;case Fs.HIDDEN_ALLOW_AUTO_UNHIDE:if(!n.isHidden||n.hiddenState!=="hidden_allow_auto_unhide")return!1;break;case Fs.HIDDEN_PREVENT_AUTO_UNHIDE:if(!n.isHidden||n.hiddenState!=="hidden_prevent_auto_unhide")return!1}if(this.unreadChannelFilter&&this.unreadChannelFilter===Vu.UNREAD_MESSAGE&&n.unreadMessageCount===0)return!1;if(this.publicChannelFilter)switch(this.publicChannelFilter){case Yo.PUBLIC:if(!n.isPublic)return!1;break;case Yo.PRIVATE:if(n.isPublic)return!1}if(this.superChannelFilter)switch(this.superChannelFilter){case pa.SUPER:if(!n.isSuper)return!1;break;case pa.NON_SUPER:if(n.isSuper)return!1}return this.includeMetaData&&this.metadataKey&&(((r=n.cachedMetaData)===null||r===void 0?void 0:r[this.metadataKey])===void 0||this.metadataValues&&!this.metadataValues.includes(n.cachedMetaData[this.metadataKey])||this.metadataValueStartsWith&&!n.cachedMetaData[this.metadataKey].startsWith(this.metadataValueStartsWith))?!1:!(this.createdAfter&&n.createdAt<this.createdAfter)&&!(this.createdBefore&&n.createdAt>this.createdBefore)},e}(),tY=function(e){function n(t,r){var i=r.sdkState,a=r.cacheContext,s=e.call(this,t)||this;return s._channels=new Map,s._sdkState=i,s._cacheContext=a,s}return k(n,e),Object.defineProperty(n.prototype,"collection",{get:function(){var t=this._cacheContext.nestdb;return me(!!t).throw(Q.databaseError),t.collection(d4)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"localCacheEnabled",{get:function(){return this._cacheContext.localCacheEnabled&&!!this.collection},enumerable:!1,configurable:!0}),n.prototype._serialize=function(t,r){return r===void 0&&(r=0),z(z({},t.serialize()),{lastMessageUpdatedAt:t.lastMessage?t.lastMessage.createdAt:0,syncIndex:r})},n.prototype._deserialize=function(t){return jr.of(this._iid).buildGroupChannelFromSerializedData(t)},Object.defineProperty(n.prototype,"channels",{get:function(){return it([],Ge(this._channels.values()),!1)},enumerable:!1,configurable:!0}),n.prototype.isCachedInMemory=function(t){return this._channels.has(t)},n.prototype.filterOffsetChanged=function(t){var r=this;return t.filter(function(i){if(r._channels.has(i.url))return r._channels.get(i.url).messageOffsetTimestamp<i.messageOffsetTimestamp})},n.prototype.get=function(t){return N(this,void 0,void 0,function(){var r,i;return T(this,function(a){switch(a.label){case 0:return this._channels.has(t)?[3,3]:this.localCacheEnabled?[4,this.collection.getByKey(t)]:[3,2];case 1:if(r=a.sent())return i=this._deserialize(r),this._channels.set(t,i),[2,i];a.label=2;case 2:return[2,void 0];case 3:return[2,this._channels.get(t)]}})})},n.prototype.fetch=function(t){var r=t.token,i=t.offset,a=i===void 0?0:i,s=t.limit,o=s===void 0?c4:s,l=t.backward,u=l!==void 0&&l,c=t.filter,h=c===void 0?new pE:c,f=t.order,p=f===void 0?mr.LATEST_LAST_MESSAGE:f,_=t.borderlineChannelUrl;return N(this,void 0,void 0,function(){var g,C,E,y,S,I=this;return T(this,function(w){switch(w.label){case 0:return this.localCacheEnabled?(g=!!_,C=Eg(p),E={where:function(R){if(a>0)return a--,!1;if(r)switch(p){case mr.CHANNEL_NAME_ALPHABETICAL:if(!u&&R.name.localeCompare(r)<0||u&&R.name.localeCompare(r)>0)return!1;break;case mr.CHRONOLOGICAL:if(!u&&R.createdAt>r||u&&R.createdAt<r)return!1;break;case mr.LATEST_LAST_MESSAGE:if(!u&&R.lastMessageUpdatedAt>r||u&&R.lastMessageUpdatedAt<r)return!1}return g&&_&&_===R.url?(g=!1,!1):!g&&h.match(I._deserialize(R),I._sdkState.userId)},index:C,backward:u},[4,this.collection.query(E)]):[3,3];case 1:return[4,w.sent().fetch({limit:o})];case 2:return y=w.sent(),(S=y.map(function(R){return I._deserialize(R)})).forEach(function(R){!h.includeMetaData&&R.cachedMetaData&&R._clearCachedMetaData(),I._channels.has(R.url)||I._channels.set(R.url,R)}),[2,S];case 3:return[2,[]]}})})},n.prototype.upsert=function(t,r){return N(this,void 0,void 0,function(){var i,a,s,o=this;return T(this,function(l){switch(l.label){case 0:if(i=[],t.forEach(function(u){if(o._channels.has(u.url)){var c=o._channels.get(u.url);c._pinnedMessagesUpdatedAt<u._pinnedMessagesUpdatedAt&&(c._pinnedMessagesUpdatedAt=u._pinnedMessagesUpdatedAt),c._messageCollectionLastAccessedAt>u._messageCollectionLastAccessedAt&&(u._messageCollectionLastAccessedAt=c._messageCollectionLastAccessedAt),u.cachedMetaData instanceof Map&&u.cachedMetaData.size>0&&r&&(c._updateCachedMetaData(u.cachedMetaData,r).isUpdated||Object.assign(u,{_cachedMetaData:c.cachedMetaData})),c._update(u),i.push(c)}else o._channels.set(u.url,u),i.push(u)}),!this.localCacheEnabled)return[3,2];for(a=[],s=0;s<i.length;s++)a.push(this._serialize(i[s],s));return[4,this.collection.upsertMany(a)];case 1:l.sent(),l.label=2;case 2:return[2,i]}})})},n.prototype.remove=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:try{for(r=ye(t),i=r.next();!i.done;i=r.next())a=i.value,this._channels.delete(a)}catch(u){s={error:u}}finally{try{i&&!i.done&&(o=r.return)&&o.call(r)}finally{if(s)throw s.error}}return this.localCacheEnabled?[4,this.collection.removeIf({where:{url:{"/in":t}}})]:[3,2];case 1:l.sent(),l.label=2;case 2:return[2]}})})},n.prototype.clear=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return this.clearMemoryCache(),this.localCacheEnabled?[4,this.collection.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},n.prototype.clearMemoryCache=function(){this._channels.clear()},n.prototype._setBlockStateOfAllChannels=function(t,r,i){return N(this,void 0,void 0,function(){var a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w,R,A;return T(this,function(U){switch(U.label){case 0:if(a=[],t===this._sdkState.userId)try{for(s=ye(this._channels.values()),o=s.next();!o.done;o=s.next()){f=o.value;try{for(y=void 0,l=ye(f.members),u=l.next();!u.done;u=l.next())if((g=u.value).userId===r){g.isBlockedByMe=i,a.push(f);break}}catch(O){y={error:O}}finally{try{u&&!u.done&&(S=l.return)&&S.call(l)}finally{if(y)throw y.error}}}}catch(O){C={error:O}}finally{try{o&&!o.done&&(E=s.return)&&E.call(s)}finally{if(C)throw C.error}}else if(r===this._sdkState.userId)try{for(c=ye(this._channels.values()),h=c.next();!h.done;h=c.next()){f=h.value;try{for(R=void 0,p=ye(f.members),_=p.next();!_.done;_=p.next())if((g=_.value).userId===t){g.isBlockingMe=i,a.push(f);break}}catch(O){R={error:O}}finally{try{_&&!_.done&&(A=p.return)&&A.call(p)}finally{if(R)throw R.error}}}}catch(O){I={error:O}}finally{try{h&&!h.done&&(w=c.return)&&w.call(c)}finally{if(I)throw I.error}}return a.length>0?[4,this.upsert(a)]:[3,2];case 1:U.sent(),U.label=2;case 2:return[2]}})})},n.prototype.block=function(t,r){return N(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return[4,this._setBlockStateOfAllChannels(t,r,!0)];case 1:return i.sent(),[2]}})})},n.prototype.unblock=function(t,r){return N(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return[4,this._setBlockStateOfAllChannels(t,r,!1)];case 1:return i.sent(),[2]}})})},n.prototype.markAsRead=function(t,r){return r===void 0&&(r=it([],Ge(this._channels.keys()),!1)),N(this,void 0,void 0,function(){var i,a,s,o,l,u,c,h;return T(this,function(f){switch(f.label){case 0:i=[],f.label=1;case 1:f.trys.push([1,6,7,8]),a=ye(r),s=a.next(),f.label=2;case 2:return s.done?[3,5]:(o=s.value,[4,this.get(o)]);case 3:(l=f.sent())!=null&&l._updateUnreadMemberState(this._sdkState.userId,t)&&(l._updateUnreadCount(0,0),i.push(l)),f.label=4;case 4:return s=a.next(),[3,2];case 5:return[3,8];case 6:return u=f.sent(),c={error:u},[3,8];case 7:try{s&&!s.done&&(h=a.return)&&h.call(a)}finally{if(c)throw c.error}return[7];case 8:return i.length>0?[4,this.upsert(i)]:[3,10];case 9:f.sent(),f.label=10;case 10:return[2]}})})},n}(Ur),yg={invitedUserIds:void 0,channelUrl:void 0,coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isSuper:void 0,isBroadcast:void 0,isExclusive:void 0,isPublic:void 0,isDiscoverable:void 0,isStrict:void 0,isEphemeral:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},$1=function(e){return Ht("string",e.invitedUserIds,!0)&&Y("string",e.channelUrl,!0)&&Y("string",e.coverUrl,!0)&&(ai(e.coverImage)||Y("string",e.coverImage,!0))&&Y("boolean",e.isDistinct,!0)&&Y("boolean",e.isSuper,!0)&&Y("boolean",e.isBroadcast,!0)&&Y("boolean",e.isExclusive,!0)&&Y("boolean",e.isPublic,!0)&&Y("boolean",e.isStrict,!0)&&Y("boolean",e.isDiscoverable,!0)&&Y("boolean",e.isEphemeral,!0)&&Y("string",e.accessCode,!0)&&Y("string",e.name,!0)&&Y("string",e.data,!0)&&Y("string",e.customType,!0)&&Ht("string",e.operatorUserIds,!0)&&Y("number",e.messageSurvivalSeconds,!0)},b0={customTypes:void 0,includeEmpty:!1,includeFrozen:!0,includeMetaData:!0,includeChatNotification:!1},V1=function(e){return Ht("string",e.customTypes,!0)&&Y("boolean",e.includeEmpty,!0)&&Y("boolean",e.includeFrozen,!0)&&Y("boolean",e.includeMetaData,!0)&&Y("boolean",e.includeChatNotification,!0)},x4={myMemberStateFilter:fa.ALL},P4=function(e){return Bt(fa,e.myMemberStateFilter)};(function(e){e.GROUP_CHANNEL_UNREAD_MENTION_COUNT="group_channel_unread_mention_count",e.NONSUPER_UNREAD_MENTION_COUNT="non_super_group_channel_unread_mention_count",e.SUPER_UNREAD_MENTION_COUNT="super_group_channel_unread_mention_count",e.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT="group_channel_unread_message_count",e.NONSUPER_UNREAD_MESSAGE_COUNT="non_super_group_channel_unread_message_count",e.SUPER_UNREAD_MESSAGE_COUNT="super_group_channel_unread_message_count",e.GROUP_CHANNEL_INVITATION_COUNT="group_channel_invitation_count",e.NONSUPER_INVITATION_COUNT="non_super_group_channel_invitation_count",e.SUPER_INVITATION_COUNT="super_group_channel_invitation_count"})(sr||(sr={}));var nY={keys:[sr.GROUP_CHANNEL_UNREAD_MENTION_COUNT,sr.NONSUPER_UNREAD_MENTION_COUNT,sr.SUPER_UNREAD_MENTION_COUNT,sr.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT,sr.NONSUPER_UNREAD_MESSAGE_COUNT,sr.SUPER_UNREAD_MESSAGE_COUNT,sr.GROUP_CHANNEL_INVITATION_COUNT,sr.NONSUPER_INVITATION_COUNT,sr.SUPER_INVITATION_COUNT],customTypeFilters:void 0,customTypesFilter:void 0},rY={channelCustomTypesFilter:void 0,superChannelFilter:pa.ALL},iY=function(e){return Ht("string",e.channelCustomTypesFilter,!0)&&Bt(pa,e.superChannelFilter)},aY={channelUrl:void 0,scheduledStatus:void 0,messageTypeFilter:Mi.ALL},B_=z({},oe),bg=function(e){return e.startsWith("EVENT_")||e===oe.SYNC_CHANNEL_CHANGELOGS||e===oe.REFRESH_CHANNEL},Vt=function(e){function n(t){var r=t.channels,i=t.context,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=t.ts,l=e.call(this)||this;return l.channels=r,l.context=i,l.isWebSocketEventComing=s,l.ts=o,l}return k(n,e),n}(Gn),vl=function(e){function n(t){var r=t.channelUrls,i=t.context,a=t.isWebSocketEventComing,s=a!==void 0&&a,o=e.call(this)||this;return o.channelUrls=r,o.context=i,o.isWebSocketEventComing=s,o}return k(n,e),n}(Gn),F4=function(e){function n(t){var r=t.channel,i=e.call(this)||this;return i.channel=r,i}return k(n,e),n}(Gn),sY=function(){function e(n){var t=n.groupChannelCache,r=n.userInfoCache,i=n.messageCache,a=n.unsentMessageCache,s=n.dispatcher,o=this;this._observers=new Map,s.on(function(l){return N(o,void 0,void 0,function(){var u,c,h,f,p,_,g,C,E,y,S,I,w,R,A,U,O,B,F=this;return T(this,function(P){switch(P.label){case 0:if(!(l instanceof Vt))return[3,19];if(u=l.channels,w=l.context,R=l.isWebSocketEventComing,c=u.filter(function(G){return G instanceof gs}),w.source!==oe.EVENT_CHANNEL_RESET_HISTORY&&w.source!==oe.EVENT_CHANNEL_HIDDEN)return[3,9];P.label=1;case 1:P.trys.push([1,6,7,8]),h=ye(c),f=h.next(),P.label=2;case 2:return f.done?[3,5]:(E=f.value,[4,i.removeUnderOffset(E.url,E.messageOffsetTimestamp)]);case 3:P.sent(),P.label=4;case 4:return f=h.next(),[3,2];case 5:return[3,8];case 6:return p=P.sent(),A={error:p},[3,8];case 7:try{f&&!f.done&&(U=h.return)&&U.call(h)}finally{if(A)throw A.error}return[7];case 8:return[3,17];case 9:_=t.filterOffsetChanged(c),P.label=10;case 10:P.trys.push([10,15,16,17]),g=ye(_),C=g.next(),P.label=11;case 11:return C.done?[3,14]:(E=C.value,[4,i.removeUnderOffset(E.url,E.messageOffsetTimestamp)]);case 12:P.sent(),P.label=13;case 13:return C=g.next(),[3,11];case 14:return[3,17];case 15:return y=P.sent(),O={error:y},[3,17];case 16:try{C&&!C.done&&(B=g.return)&&B.call(g)}finally{if(O)throw O.error}return[7];case 17:return[4,t.upsert(c,l.ts)];case 18:return S=P.sent(),R||this._broadcastUpdateEvent(S,w),[3,25];case 19:return l instanceof vl?(I=l.channelUrls,w=l.context,R=l.isWebSocketEventComing,[4,t.remove(I)]):[3,22];case 20:return P.sent(),[4,or(function(){return N(F,void 0,void 0,function(){var G,L,$,j,X,K;return T(this,function(Z){switch(Z.label){case 0:Z.trys.push([0,6,7,8]),G=ye(I),L=G.next(),Z.label=1;case 1:return L.done?[3,5]:($=L.value,[4,i.removeMessagesOfChannel($)]);case 2:return Z.sent(),[4,a.removeMessagesOfChannel($)];case 3:Z.sent(),Z.label=4;case 4:return L=G.next(),[3,1];case 5:return[3,8];case 6:return j=Z.sent(),X={error:j},[3,8];case 7:try{L&&!L.done&&(K=G.return)&&K.call(G)}finally{if(X)throw X.error}return[7];case 8:return[2]}})})})];case 21:return P.sent(),R||this._broadcastRemoveEvent(I,w),[3,25];case 22:return l instanceof b4?[4,t.fetch({token:Number.MAX_SAFE_INTEGER,limit:Number.MAX_SAFE_INTEGER})]:[3,25];case 23:return P.sent(),[4,r.fetch({limit:Number.MAX_SAFE_INTEGER})];case 24:P.sent(),P.label=25;case 25:return[2]}})})})}return e.prototype._broadcastUpdateEvent=function(n,t){var r,i;try{for(var a=ye(this._observers.values()),s=a.next();!s.done;s=a.next()){var o=s.value;o.onUpdate&&o.onUpdate(n,t)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},e.prototype._broadcastRemoveEvent=function(n,t){var r,i;try{for(var a=ye(this._observers.values()),s=a.next();!s.done;s=a.next()){var o=s.value;o.onRemove&&o.onRemove(n,t)}}catch(l){r={error:l}}finally{try{s&&!s.done&&(i=a.return)&&i.call(a)}finally{if(r)throw r.error}}},e.prototype.subscribe=function(n,t){this._observers.set(n,t)},e.prototype.unsubscribe=function(n){this._observers.delete(n)},e.prototype.unsubscribeAll=function(){this._observers.clear()},e}(),oY=function(e){function n(t){var r=t.userId,i=t.ts,a=t.token,s=t.filter,o=t.includeChatNotification,l=o!==void 0&&o,u=e.call(this)||this,c=z(z({},b0),s),h=c.customTypes,f=c.includeEmpty,p=c.includeFrozen;return u.method=fe.GET,u.path="".concat(En,"/").concat(encodeURIComponent(r),"/my_group_channels/changelogs"),u.params=Ae($e({show_delivery_receipt:!0,show_member:!0,show_read_receipt:!0,change_ts:i||null,token:a,custom_types:h,show_empty:f,show_frozen:p,include_chat_notification:l})),u}return k(n,e),n}(ve),lY=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.updatedChannels=r.updated.map(function(a){return new gs(t,Object.assign(a,{ts:r.ts}))}),i.deletedChannelUrls=r.deleted,i.hasMore=r.has_more,i.token=r.next,i.ts=r.ts,i}return k(n,e),n}(_e),z1=function(e){function n(t){var r=t.channelUrl,i=t.isInternalCall,a=t.showLatestMessage,s=e.call(this)||this;return s.method=fe.GET,s.path="".concat(i?fz:qi,"/").concat(encodeURIComponent(r)),s.params={show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_latest_message:a!=null&&a,show_conversation:!0},s}return k(n,e),n}(ve),j1=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new gs(t,r),i}return k(n,e),n}(_e),uh={includeEmpty:!1,myMemberStateFilter:fa.ALL,unreadChannelFilter:Vu.ALL,superChannelFilter:pa.ALL,publicChannelFilter:Yo.ALL,hiddenChannelFilter:Fs.ALL,userIdsFilter:{queryType:kl.AND},order:mr.LATEST_LAST_MESSAGE},uY=function(e){function n(t){var r=this,i=t.userId,a=t.token,s=t.limit,o=t.order,l=t.includeEmpty,u=t.myMemberStateFilter,c=t.superChannelFilter,h=t.publicChannelFilter,f=t.unreadChannelFilter,p=t.nicknameContainsFilter,_=t.nicknameStartsWithFilter,g=t.nicknameExactMatchFilter,C=t.channelNameContainsFilter,E=t.channelUrlsFilter,y=t.customTypesFilter,S=t.customTypeStartsWithFilter,I=t.hiddenChannelFilter,w=t.metadataOrderKeyFilter,R=t.metadataKey,A=t.metadataValues,U=t.metadataValueStartsWith,O=t.includeFrozen,B=t.includeMetaData,F=t.searchFilter,P=t.userIdsFilter,G=t.includeChatNotification,L=G!==void 0&&G,$=t.includeLeftChannel,j=$!==void 0&&$,X=t.createdAfter,K=t.createdBefore;return(r=e.call(this)||this).method=fe.GET,r.path="".concat(En,"/").concat(encodeURIComponent(i),"/my_group_channels"),r.params=Ae({token:a,limit:s,order:o??uh.order,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:l??uh.includeEmpty,member_state_filter:u??uh.myMemberStateFilter,super_mode:c??uh.superChannelFilter,public_mode:h??uh.publicChannelFilter,unread_filter:f??uh.unreadChannelFilter,members_nickname_contains:p,members_nickname_startswith:_,members_nickname:g,name_contains:C,channel_urls:E,custom_types:y,custom_type_startswith:S,hidden_mode:I,metadata_order_key:w,metadata_key:R,metadata_values:A,metadata_value_startswith:U,show_frozen:O,show_metadata:B,include_chat_notification:L,include_left_channel:j,created_after:X,created_before:K}),F&&F.query&&F.fields&&(r.params.search_query=F.query,r.params.search_fields=F.fields),P&&P.userIds&&P.userIds.length>0&&(P.includeMode?(r.params.members_include_in=P.userIds,r.params.query_type=P.queryType.toUpperCase()):r.params.members_exactly_in=P.userIds),r}return k(n,e),n}(ve),cY=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.channels=[];var a=r.next,s=r.channels,o=r.ts;return i.token=a,s&&s.length>0&&(i.channels=s.map(function(l){return l.ts=o,new gs(t,l)})),i.ts=o??0,i}return k(n,e),n}(_e),dY=function(e){function n(t){var r=t.userId,i=t.filter,a=e.call(this)||this,s=i.myMemberStateFilter;return a.method=fe.GET,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/group_channel_count"),a.params={state:s??fa.ALL},a}return k(n,e),n}(ve),hY=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.groupChannelCount=r.group_channel_count,i}return k(n,e),n}(_e),fY=function(e){function n(t){var r=t.userId,i=t.filter,a=e.call(this)||this,s=i.keys,o=i.customTypeFilters,l=i.customTypesFilter;return a.method=fe.GET,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/unread_item_count"),a.params=Ae({item_keys:s,custom_types:l??o}),a}return k(n,e),n}(ve),vY=function(e){function n(t,r){var i=e.call(this,t,r)||this;return typeof r[sr.GROUP_CHANNEL_UNREAD_MENTION_COUNT]=="number"&&(i.groupChannelUnreadMentionCount=r[sr.GROUP_CHANNEL_UNREAD_MENTION_COUNT]),typeof r[sr.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]=="number"&&(i.groupChannelUnreadMessageCount=r[sr.GROUP_CHANNEL_UNREAD_MESSAGE_COUNT]),typeof r[sr.GROUP_CHANNEL_INVITATION_COUNT]=="number"&&(i.groupChannelInvitationCount=r[sr.GROUP_CHANNEL_INVITATION_COUNT]),typeof r[sr.SUPER_UNREAD_MENTION_COUNT]=="number"&&(i.superGroupChannelUnreadMentionCount=r[sr.SUPER_UNREAD_MENTION_COUNT]),typeof r[sr.SUPER_UNREAD_MESSAGE_COUNT]=="number"&&(i.superGroupChannelUnreadMessageCount=r[sr.SUPER_UNREAD_MESSAGE_COUNT]),typeof r[sr.SUPER_INVITATION_COUNT]=="number"&&(i.superGroupChannelInvitationCount=r[sr.SUPER_INVITATION_COUNT]),typeof r[sr.NONSUPER_UNREAD_MENTION_COUNT]=="number"&&(i.nonSuperGroupChannelUnreadMentionCount=r[sr.NONSUPER_UNREAD_MENTION_COUNT]),typeof r[sr.NONSUPER_UNREAD_MESSAGE_COUNT]=="number"&&(i.nonSuperGroupChannelUnreadMessageCount=r[sr.NONSUPER_UNREAD_MESSAGE_COUNT]),typeof r[sr.NONSUPER_INVITATION_COUNT]=="number"&&(i.nonSuperGroupChannelInvitationCount=r[sr.NONSUPER_INVITATION_COUNT]),i}return k(n,e),n}(_e),pY=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=fe.GET,i.path="".concat(En,"/").concat(encodeURIComponent(r),"/unread_channel_count"),i}return k(n,e),n}(ve),mY=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.unreadCount=r.unread_count,i}return k(n,e),n}(_e),_Y=function(e){function n(t){var r=t.userId,i=t.filter,a=t.includeFeedChannel,s=a!==void 0&&a,o=e.call(this)||this,l=i.channelCustomTypesFilter,u=i.superChannelFilter;return o.method=fe.GET,o.path="".concat(En,"/").concat(encodeURIComponent(r),"/unread_message_count"),o.params={super_mode:u??pa.ALL,custom_types:l,include_feed_channel:s},o}return k(n,e),n}(ve),gY=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.unreadCount=r.unread_count,i.unreadFeedCount=r.unread_feed_count,i}return k(n,e),n}(_e),EY=function(e){function n(t){var r=t.channelUrl,i=t.scheduledStatus,a=t.messageTypeFilter,s=e.call(this)||this;return s.method=fe.GET,s.path="".concat(Kk,"/count"),s.params={channel_url:r,status:bY(i)},a&&(s.params.message_type=a),s}return k(n,e),n}(ve),yY=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.count=r.count,i}return k(n,e),n}(_e),bY=function(e){if(!e)return[];var n=[];return e.forEach(function(t){switch(t){case wu.PENDING:n.push(ls.PENDING);break;case wu.SENT:n.push(ls.IN_QUEUE),n.push(ls.SENT);break;case wu.CANCELED:n.push(ls.CANCELED);break;case wu.FAILED:n.push(ls.FAILED)}}),n},CY=function(e){function n(t){var r=this,i=t.userId,a=t.channelUrl,s=t.coverUrl,o=t.coverImage,l=t.isDistinct,u=t.isSuper,c=t.isBroadcast,h=t.isPublic,f=t.isExclusive,p=t.isDiscoverable,_=t.isStrict,g=t.isEphemeral,C=t.accessCode,E=t.name,y=t.data,S=t.customType,I=t.messageSurvivalSeconds,w=t.invitedUserIds,R=t.operatorUserIds;return(r=e.call(this)||this).method=fe.POST,r.path=qi,r.params=Ae({user_ids:it([i],Ge(w??[]),!1).filter(function(A,U,O){return U===O.indexOf(A)}),channel_url:a,cover_url:s,cover_file:o,is_distinct:l,is_super:u,is_broadcast:c,is_exclusive:f,is_public:h,is_discoverable:p,strict:_,is_ephemeral:g,access_code:C,name:E,data:y,custom_type:S,operator_ids:R,message_survival_seconds:I}),r}return k(n,e),n}(ve),SY=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this).channel=new gs(t,r),a.isCreated=(i=r.is_created)===null||i===void 0||i,a}return k(n,e),n}(_e),bR=function(e){function n(t){var r=t.userId,i=t.channelUrls,a=e.call(this)||this;return a.method=fe.PUT,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/mark_as_read_all"),a.params={channel_urls:i},a}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var TY=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userId,s=t.accessCode;return(r=e.call(this)||this).method=fe.PUT,r.path="".concat(qi,"/").concat(encodeURIComponent(i),"/join"),r.params={user_id:a,access_code:s},r}return k(n,e),n}(ve),NY=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new gs(t,r),i}return k(n,e),n}(_e),IY=function(e){function n(t,r,i){var a=e.call(this,t,r,i)||this,s=i.data,o=s.member_count,l=o===void 0?0:o,u=s.joined_member_count,c=u===void 0?0:u,h=s.users,f=h===void 0?null:h;return a.memberCount=l,a.joinedMemberCount=c,a.members=Array.isArray(f)?f.map(function(p){return new us(t,p)}):[new us(t,i.data)],a}return k(n,e),n}(Yl),MY=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userId,s=t.shouldRemoveOperatorStatus;return(r=e.call(this)||this).method=fe.PUT,r.path="".concat(qi,"/").concat(encodeURIComponent(i),"/leave"),r.params={user_id:a,should_remove_operator_status:s},r}return k(n,e),n}(ve);(function(e){function n(t,r){return e.call(this,t,r)||this}k(n,e)})(_e);var AY=function(e){function n(t,r,i){var a=e.call(this,t,r,i)||this,s=i.data,o=s.member_count,l=o===void 0?0:o,u=s.joined_member_count,c=u===void 0?0:u;return a.memberCount=l,a.joinedMemberCount=c,a.member=new us(a._iid,i.data),a}return k(n,e),n}(Yl),wY=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userIds;return(r=e.call(this)||this).method=fe.POST,r.path="".concat(qi,"/").concat(encodeURIComponent(i),"/invite"),r.params={user_ids:a},r}return k(n,e),n}(ve),RY=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new gs(t,r),i}return k(n,e),n}(_e),OY=function(e){function n(t,r,i){var a=e.call(this,t,r,i)||this;a.inviter=null;var s=i.data,o=s.member_count,l=o===void 0?0:o,u=s.joined_member_count,c=u===void 0?0:u,h=s.inviter,f=s.invitees,p=f===void 0?[]:f;return a.memberCount=l,a.joinedMemberCount=c,h&&Object.keys(h).length>0&&(a.inviter=new Gt(t,h)),a.invitees=p.map(function(_){return new us(t,_)}),a}return k(n,e),n}(Yl),DY=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userId;return(r=e.call(this)||this).method=fe.PUT,r.path="".concat(qi,"/").concat(encodeURIComponent(i),"/decline"),r.params={user_id:a},r}return k(n,e),n}(ve);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new gs(t,r),i.channel.myMemberState=Er.NONE,i}k(n,e)})(_e);var UY=function(e){function n(t,r,i){var a=e.call(this,t,r,i)||this,s=i.data,o=s.member_count,l=s.joined_member_count,u=s.inviter,c=s.invitee;return a.memberCount=o??0,a.joinedMemberCount=l??0,a.inviter=new Gt(t,u),a.invitee=new us(t,c),a}return k(n,e),n}(Yl),q1={hidePreviousMessages:!1,allowAutoUnhide:!0},LY=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userId,s=t.hidePreviousMessages,o=t.allowAutoUnhide;return(r=e.call(this)||this).method=fe.PUT,r.path="".concat(qi,"/").concat(encodeURIComponent(i),"/hide"),r.params={user_id:a,hide_previous_messages:s??q1.hidePreviousMessages,allow_auto_unhide:o??q1.allowAutoUnhide},r}return k(n,e),n}(ve),kY=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.ts_message_offset;return i.messageOffsetTimestamp=a,i}return k(n,e),n}(_e),xY=function(e){function n(t,r,i){var a,s,o,l=this;return(l=e.call(this,t,"SYEV",i)||this).allowAutoUnhide=null,l.hidePreviousMessages=null,l.messageOffsetTimestamp=null,i.data&&(l.allowAutoUnhide=(a=i.data.allow_auto_unhide)!==null&&a!==void 0?a:null,l.hidePreviousMessages=(s=i.data.hide_previous_messages)!==null&&s!==void 0?s:null),l.messageOffsetTimestamp=(o=i.ts_message_offset)!==null&&o!==void 0?o:null,l}return k(n,e),n}(Qn),PY=function(e){function n(t){var r=t.channelUrl,i=t.time;return e.call(this,{code:"TPST",ackRequired:!1,payload:{channel_url:r,time:i}})||this}return k(n,e),n}(Ri),FY=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new Gt(t,i.data),a}return k(n,e),n}(Qn),BY=function(e){function n(t){var r=t.channelUrl,i=t.time;return e.call(this,{code:"TPEN",ackRequired:!1,payload:{channel_url:r,time:i}})||this}return k(n,e),n}(Ri),HY=function(e){function n(t,r,i){var a=e.call(this,t,"SYEV",i)||this;return a.user=new Gt(t,i.data),a}return k(n,e),n}(Qn),GY=function(e){function n(t){var r=t.channelUrl,i=t.messageId;return e.call(this,{code:"MACK",ackRequired:!1,payload:{channel_url:r,msg_id:i}})||this}return k(n,e),n}(Ri),B4=function(e){function n(t,r){var i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w,R,A,U,O,B,F=this;return(F=e.call(this,t,r)||this).includeEmpty=!1,F.includeFrozen=!0,F.includeMetaData=!0,F.includeChatNotification=!1,F.channelUrlsFilter=null,F.customTypesFilter=null,F.customTypeStartsWithFilter=null,F.nicknameContainsFilter=null,F.nicknameStartsWithFilter=null,F.nicknameExactMatchFilter=null,F.channelNameContainsFilter="",F.myMemberStateFilter=fa.ALL,F.unreadChannelFilter=Vu.ALL,F.superChannelFilter=pa.ALL,F.publicChannelFilter=Yo.ALL,F.hiddenChannelFilter=Fs.UNHIDDEN,F.searchFilter={fields:[],query:null},F.userIdsFilter={userIds:[],includeMode:!0,queryType:kl.AND},F.metadataKey=null,F.metadataValues=null,F.metadataOrderKeyFilter=null,F.metadataValueStartsWith=null,F.order=mr.LATEST_LAST_MESSAGE,F.includeEmpty=(i=r.includeEmpty)!==null&&i!==void 0&&i,F.includeFrozen=(a=r.includeFrozen)===null||a===void 0||a,F.includeMetaData=(s=r.includeMetaData)===null||s===void 0||s,F.includeChatNotification=(o=r.includeChatNotification)!==null&&o!==void 0&&o,F.channelUrlsFilter=(l=r.channelUrlsFilter)!==null&&l!==void 0?l:null,F.customTypesFilter=(u=r.customTypesFilter)!==null&&u!==void 0?u:null,F.customTypeStartsWithFilter=(c=r.customTypeStartsWithFilter)!==null&&c!==void 0?c:"",F.nicknameContainsFilter=(h=r.nicknameContainsFilter)!==null&&h!==void 0?h:null,F.nicknameStartsWithFilter=(f=r.nicknameStartsWithFilter)!==null&&f!==void 0?f:null,F.nicknameExactMatchFilter=(p=r.nicknameExactMatchFilter)!==null&&p!==void 0?p:null,F.channelNameContainsFilter=(_=r.channelNameContainsFilter)!==null&&_!==void 0?_:"",F.myMemberStateFilter=(g=r.myMemberStateFilter)!==null&&g!==void 0?g:fa.ALL,F.unreadChannelFilter=(C=r.unreadChannelFilter)!==null&&C!==void 0?C:Vu.ALL,F.superChannelFilter=(E=r.superChannelFilter)!==null&&E!==void 0?E:pa.ALL,F.publicChannelFilter=(y=r.publicChannelFilter)!==null&&y!==void 0?y:Yo.ALL,F.hiddenChannelFilter=(S=r.hiddenChannelFilter)!==null&&S!==void 0?S:Fs.UNHIDDEN,F.searchFilter=(I=r.searchFilter)!==null&&I!==void 0?I:{fields:[],query:null},F.userIdsFilter=(w=r.userIdsFilter)!==null&&w!==void 0?w:{userIds:[],includeMode:!0,queryType:kl.AND},F.metadataKey=(R=r.metadataKey)!==null&&R!==void 0?R:null,F.metadataValues=(A=r.metadataValues)!==null&&A!==void 0?A:null,F.metadataOrderKeyFilter=(U=r.metadataOrderKeyFilter)!==null&&U!==void 0?U:null,F.metadataValueStartsWith=(O=r.metadataValueStartsWith)!==null&&O!==void 0?O:null,F.order=(B=r.order)!==null&&B!==void 0?B:mr.LATEST_LAST_MESSAGE,r.createdAfter&&(F.createdAfter=r.createdAfter),r.createdBefore&&(F.createdBefore=r.createdBefore),F}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Y("boolean",this.includeEmpty)&&Y("boolean",this.includeFrozen)&&Y("boolean",this.includeMetaData)&&Y("string",this.channelNameContainsFilter)&&Ht("string",this.channelUrlsFilter,!0)&&Ht("string",this.customTypesFilter,!0)&&Y("string",this.customTypeStartsWithFilter)&&Y("string",this.nicknameContainsFilter,!0)&&Y("string",this.nicknameStartsWithFilter,!0)&&Y("string",this.nicknameExactMatchFilter,!0)&&Bt(fa,this.myMemberStateFilter)&&Bt(pa,this.superChannelFilter)&&Bt(Yo,this.publicChannelFilter)&&Bt(Vu,this.unreadChannelFilter)&&Bt(Fs,this.hiddenChannelFilter)&&Ht(kp,this.searchFilter.fields)&&Y("string",this.searchFilter.query,!0)&&Ht("string",this.userIdsFilter.userIds)&&Y("boolean",this.userIdsFilter.includeMode)&&Bt(kl,this.userIdsFilter.queryType)&&Bt(mr,this.order)&&Y("string",this.metadataOrderKeyFilter,!0)&&Y("string",this.metadataKey,!0)&&Ht("string",this.metadataValues,!0)&&Y("string",this.metadataValueStartsWith,!0)&&aw(this.createdAfter)&&aw(this.createdBefore)},n.prototype.serialize=function(){return hf(this)},n.prototype.next=function(){return N(this,void 0,void 0,function(){var t,r,i;return T(this,function(a){switch(a.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,[4,jr.of(this._iid).getMyGroupChannels(this._token,$e(z({},this)),this.limit,oe.REQUEST_CHANNEL,!0)]):[3,2]:[3,5];case 1:return t=a.sent(),r=t.channels,i=t.token,this._token=i,this._hasNext=!!i,this._isLoading=!1,[2,r];case 2:return[2,[]];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(Kl),$Y=function(e){function n(t){var r=t.channelUrl,i=t.userId,a=e.call(this)||this;return a.method=fe.PUT,a.path="".concat(qi,"/").concat(encodeURIComponent(r),"/messages/mark_as_delivered"),a.params=Ae({user_id:i}),a}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var K1,VY=function(e){function n(t,r,i){var a=e.call(this,t,"DLVR",i)||this;return a.channelUrl=i.channel_url,a.deliveredStateUpdate=i.updated,a}return k(n,e),n}(Qn),fo=function(){function e(n){var t=n.top,r=t===void 0?Number.MAX_SAFE_INTEGER:t,i=n.bottom,a=i===void 0?0:i;this.top=r,this.bottom=a}return e.prototype.includes=function(){for(var n=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.every(function(i){return n.top<=i&&i<=n.bottom})},e.prototype.overlap=function(n){return this.includes(n.top)||this.includes(n.bottom)},e.prototype.intersect=function(){for(var n=this,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return t.some(function(i){return n.top<=i&&i<=n.bottom})},e.prototype.extends=function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];this.top=Math.min.apply(Math,it([this.top],Ge(n),!1)),this.bottom=Math.max.apply(Math,it([this.bottom],Ge(n),!1))},e}(),to={},H4=function(e,n){return"sendbird:".concat(e,"@groupchannel/").concat(n,"/message/sync.meta")},zY=function(){function e(n){var t=n._iid,r=n.channel,i=n.limit,a=i===void 0?100:i,s=this;this.ref=0,this._iid=t,this._channel=r,this._limit=a,this._prevSyncLoopCount=0;var o=q.of(this._iid),l=o.sdkState,u=o.cacheContext,c=o.dispatcher,h=o.logger,f=o.statManager,p=o.messageBackgroundSyncThrottleController;this._metadataKey=H4(l.userId,r.url);var _,g,C=(_=l.userId,g=r.url,"sendbird:".concat(_,"@groupchannel/").concat(g,"/message/sync"));this._prevSync=new $l(C,function(E){return N(s,void 0,void 0,function(){var y=this;return T(this,function(S){switch(S.label){case 0:return[4,p.run("message-background-sync-".concat(r.url,"-prev"),function(){return N(y,void 0,void 0,function(){var I,w,R,A,U,O,B,F,P,G,L,$;return T(this,function(j){switch(j.label){case 0:return I={hasNext:!0,nextToken:0},this._prevSyncLoopCount++,[4,this.loadMetadata()];case 1:if(j.sent(),h.debug("message background prev sync from",(O=this._metadata)===null||O===void 0?void 0:O.range.top),(B=this._metadata)===null||B===void 0?void 0:B.previousComplete)return[3,10];j.label=2;case 2:return j.trys.push([2,5,8,9]),[4,Wr.of(this._iid)._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,!((P=(F=this._metadata)===null||F===void 0?void 0:F.range)===null||P===void 0)&&P.top?this._metadata.range.top:E,{prevResultSize:this._limit,nextResultSize:0,replyType:Yr.ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0,isInclusive:!0},oe.SYNC_MESSAGE_BACKGROUND,!1,!1,Us.INTERNAL_BACKSYNC)];case 3:return(w=j.sent().messages).length>0&&(R=w.map(function(X){return X.createdAt}),!((G=this._metadata)===null||G===void 0)&&(U=G.range).intersect.apply(U,it([],Ge(R),!1))?this.extendRange(w):this._metadata={range:new fo({top:Math.min.apply(Math,it([],Ge(R),!1)),bottom:Math.max.apply(Math,it([],Ge(R),!1))}),previousComplete:!1}),I.hasNext=w.length>=this._limit&&this._prevSyncLoopCount<1,this._metadata&&(I.nextToken=this._metadata.range.top,this._metadata.previousComplete=w.length<this._limit),h.debug("message background prev sync progress",I),[4,this.saveMetadata()];case 4:return j.sent(),[3,9];case 5:return A=j.sent(),h.debug("message background prev sync error",A),A instanceof Q&&A.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:j.sent(),j.label=7;case 7:throw A;case 8:return f.put(new Kn({type:kn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:r.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:($=(L=u.localCacheConfig)===null||L===void 0?void 0:L.maxSize)!==null&&$!==void 0?$:0,use_local_cache:u.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 9:return[3,11];case 10:I.hasNext=!1,j.label=11;case 11:return[2,I]}})})})];case 1:return[2,S.sent()]}})})}),this._nextSync=new $l(C,function(E){return N(s,void 0,void 0,function(){var y=this;return T(this,function(S){switch(S.label){case 0:return[4,p.run("message-background-sync-".concat(r.url,"-next"),function(){return N(y,void 0,void 0,function(){var I,w,R,A,U,O,B,F,P,G,L;return T(this,function($){switch($.label){case 0:return I={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:$.sent(),h.debug("message background next sync from",(O=this._metadata)===null||O===void 0?void 0:O.range.bottom),$.label=2;case 2:return $.trys.push([2,5,6,7]),[4,Wr.of(this._iid)._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,!((F=(B=this._metadata)===null||B===void 0?void 0:B.range)===null||F===void 0)&&F.bottom?this._metadata.range.bottom:E,{prevResultSize:0,nextResultSize:this._limit,replyType:Yr.ALL,includeReactions:!0,includeMetaArray:!0,includeParentMessageInfo:!0,includeThreadInfo:!0,isInclusive:!0},oe.SYNC_MESSAGE_BACKGROUND,!1,!1,Us.INTERNAL_BACKSYNC)];case 3:return(w=$.sent().messages).length>0&&(R=w.map(function(j){return j.createdAt}),!((P=this._metadata)===null||P===void 0)&&(U=P.range).intersect.apply(U,it([],Ge(R),!1))?this.extendRange(w):this._metadata={range:new fo({top:Math.min.apply(Math,it([],Ge(R),!1)),bottom:Math.max.apply(Math,it([],Ge(R),!1))}),previousComplete:!1}),I.hasNext=w.length>=this._limit,this._metadata&&(I.nextToken=this._metadata.range.bottom),h.debug("message background next sync progress",I),[4,this.saveMetadata()];case 4:return $.sent(),[3,7];case 5:throw A=$.sent(),h.debug("message background next sync error",A),A;case 6:return f.put(new Kn({type:kn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:r.url,measured_on:"back_sync",event:"cache_fetch",max_db_size:(L=(G=u.localCacheConfig)===null||G===void 0?void 0:G.maxSize)!==null&&L!==void 0?L:0,use_local_cache:u.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 7:return[2,I]}})})})];case 1:return[2,S.sent()]}})})}),this._connectionEventContext=c.on(function(E){E instanceof ja&&(E.stateType===gn.CONNECTED?s.resume():s.pause())})}return e.of=function(n,t){return to[n]||(to[n]={}),to[n][t.url]||(to[n][t.url]=new e({_iid:n,channel:t})),to[n][t.url].ref++,to[n][t.url]},e.clear=function(n,t){to[n]&&to[n][t]&&(to[n][t].close(),delete to[n])},Object.defineProperty(e.prototype,"range",{get:function(){var n,t;return(t=(n=this._metadata)===null||n===void 0?void 0:n.range)!==null&&t!==void 0?t:new fo({})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"previousComplete",{get:function(){var n;return!!(!((n=this._metadata)===null||n===void 0)&&n.previousComplete)},enumerable:!1,configurable:!0}),e.prototype.isWrappingMessages=function(n){var t;return(t=this.range)===null||t===void 0?void 0:t.includes.apply(t,it([],Ge(n.map(function(r){return r.createdAt})),!1))},e.prototype.extendRange=function(n){var t;this._metadata&&(t=this._metadata.range).extends.apply(t,it([],Ge(n.map(function(r){return r.createdAt})),!1))},e.prototype.loadMetadata=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,q.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:n=t.sent(),this._metadata=n?{range:new fo(n.range),previousComplete:n.previousComplete}:{range:new fo({}),previousComplete:!1},t.label=2;case 2:return[2,this._metadata]}})})},e.prototype.saveMetadata=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this._metadata?[4,q.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}})})},e.prototype.clearMetadata=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,q.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}})})},e.prototype.resume=function(n){var t,r,i,a;n===void 0&&(n=Date.now());var s=q.of(this._iid),o=s.logger,l=s.sessionManager;s.cacheContext.localCacheEnabled&&l.session.hasSession&&(o.debug("message background sync resume()"),this._prevSyncLoopCount=0,this._metadata&&this._metadata.previousComplete||this._prevSync.start((r=(t=this._metadata)===null||t===void 0?void 0:t.range.top)!==null&&r!==void 0?r:n),this._nextSync.start((a=(i=this._metadata)===null||i===void 0?void 0:i.range.bottom)!==null&&a!==void 0?a:n))},e.prototype.pause=function(){q.of(this._iid).logger.debug("message background sync stop()"),this._prevSync.stop(),this._nextSync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete to[this._iid][this._channel.url])},e}(),jY=function(){function e(n){var t=n._iid,r=n.cacheContext,i=n.groupChannelCache,a=n.messageCache,s=n.unsentMessageCache,o=n.activeChannelCount,l=o===void 0?2e3:o;this._iid=t,this._cacheContext=r,this._groupChannelCache=i,this._messageCache=a,this._unsentMessageCache=s,this.activeChannelCount=l}return e.prototype.removeChannelMessages=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this._messageCache.removeMessagesOfChannel(n)];case 1:return t.sent(),[4,this._unsentMessageCache.removeMessagesOfChannel(n)];case 2:return t.sent(),[2]}})})},Object.defineProperty(e.prototype,"channelRotationEnabled",{get:function(){var n,t,r=q.of(this._iid).appInfo;return(t=(n=r==null?void 0:r.channelRotationInfo)===null||n===void 0?void 0:n.enabled)!==null&&t!==void 0&&t},enumerable:!1,configurable:!0}),e.prototype.removeChannelsByRotation=function(){return N(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u=this;return T(this,function(c){switch(c.label){case 0:return n=q.of(this._iid),t=n.appInfo,r=n.connectedAt,t!=null&&t.channelRotationInfo&&t.channelRotationInfo.enabled?(i=t.channelRotationInfo,a=i.orderBy,s=i.excludeRecentHours,o=i.bufferRatio,a==="LAST_MESSAGE_TS_EXCLUDING_RECENT_JOINS"?[3,1]:[3,5]):[3,5];case 1:return[4,this._groupChannelCache.fetch({token:0,order:mr.LATEST_LAST_MESSAGE,offset:this.activeChannelCount*o,limit:Number.MAX_SAFE_INTEGER})];case 2:return l=c.sent(),typeof s=="number"&&(l=l.filter(function(h){return 1e3*h.joinedAt<r-3600*s*1e3})),[4,this._groupChannelCache.remove(l.map(function(h){return h.url}))];case 3:return c.sent(),[4,Promise.all(l.map(function(h){return u.removeChannelMessages(h.url)}))];case 4:return c.sent(),[3,5];case 5:return[2]}})})},e}(),Mc={},jr=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,z(z({},r),{channelType:Kt.GROUP}))||this)._leftChannels=new Map,a._markAsReadAllLastSentAt=0,a._forceDisableMack=(i=r.forceDisableMack)!==null&&i!==void 0&&i,a._groupChannelHandlers=new Map,a._groupChannelCache=new tY(a._iid,{sdkState:r.sdkState,cacheContext:r.cacheContext}),a._groupChannelRotationManager=new jY({_iid:a._iid,cacheContext:r.cacheContext,groupChannelCache:a._groupChannelCache,messageCache:a._messageCache,unsentMessageCache:a._unsentMessageCache}),a._userInfoCache=new H1(a._iid,{sdkState:r.sdkState,cacheContext:r.cacheContext}),a._groupChannelBroadcast=new sY({dispatcher:r.dispatcher,groupChannelCache:a._groupChannelCache,userInfoCache:a._userInfoCache,messageCache:ad.of(a._iid),unsentMessageCache:Td.of(a._iid)}),setInterval(function(){var s,o,l=function(h){h.invalidateTypingStatus()&&(a._dispatcher.dispatch(new Vt({channels:[h],context:{source:oe.EVENT_CHANNEL_TYPING_STATUS_UPDATE}})),a._groupChannelHandlers.forEach(function(f){f.onTypingStatusUpdated&&f.onTypingStatusUpdated(h)}))};try{for(var u=ye(a._groupChannelCache.channels),c=u.next();!c.done;c=u.next())l(c.value)}catch(h){s={error:h}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(s)throw s.error}}},1e3),a._dispatcher.on(function(s){if(s instanceof Qn)a._handleEvent(s).catch(function(c){if(Vi(c)&&a._sdkState.appState==="foreground")throw c});else if(s instanceof y4)N(a,void 0,void 0,function(){var c,h;return T(this,function(f){switch(f.label){case 0:return c=s.message,[4,this.getChannelFromCache(c.channelUrl)];case 1:return(h=f.sent())&&!h.isFrozen?[3,3]:[4,this.getChannelWithoutCache(c.channelUrl,!0)];case 2:h=f.sent(),f.label=3;case 3:return h.isFrozen||(c instanceof Ni?h._autoResendUserMessage(c):c instanceof Rr&&h._autoResendFileMessage(c)),[2]}})});else if(s instanceof C4)a.reduceDBSize();else if(s instanceof N4){var o=s.appConfigsInfo,l=s.configTs,u=o.message_purge_offset;u&&a._messageDataRetention(u),a._dispatcher.dispatch(new S4({configTs:l}))}else s instanceof Wx?N(a,void 0,void 0,function(){var c,h,f,p,_,g=this;return T(this,function(C){switch(C.label){case 0:return c=s.channelUrl,h=s.channelType,f=s.parentMessage,p=new E4(this._iid,{channel_type:Kt.GROUP,channel_url:c,parent_message_id:f.messageId,thread_info:f0.payloadify(f.threadInfo)}),h!==Kt.GROUP?[3,2]:[4,this.getChannel(c,!0)];case 1:_=C.sent(),ze(function(){return N(g,void 0,void 0,function(){var E,y,S,I,w;return T(this,function(R){try{for(E=ye(this._groupChannelHandlers.values()),y=E.next();!y.done;y=E.next())(S=y.value).onThreadInfoUpdated&&S.onThreadInfoUpdated(_,p)}catch(A){I={error:A}}finally{try{y&&!y.done&&(w=E.return)&&w.call(E)}finally{if(I)throw I.error}}return[2]})})}),C.label=2;case 2:return[2]}})}):s instanceof F4?N(a,void 0,void 0,function(){var c;return T(this,function(h){switch(h.label){case 0:return c=s.channel,[4,this._groupChannelCache.upsert([c])];case 1:return h.sent(),[2]}})}):s instanceof yx&&N(a,void 0,void 0,function(){return T(this,function(c){switch(c.label){case 0:return[4,this._expandMessageChunk(s)];case 1:return c.sent(),[2]}})})}),Mc[t]||(Mc[t]=a),a}return k(n,e),Object.defineProperty(n.prototype,"_messageCache",{get:function(){return ad.of(this._iid)},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"_unsentMessageCache",{get:function(){return Td.of(this._iid)},enumerable:!1,configurable:!0}),n.of=function(t){return Mc[t]||(Mc[t]=new n(t,q.of(t))),Mc[t]},n.clear=function(t){Mc[t]&&delete Mc[t]},Object.defineProperty(n.prototype,"handlers",{get:function(){return it([],Ge(this._groupChannelHandlers.values()),!1)},enumerable:!1,configurable:!0}),n.prototype.buildGroupChannelFromSerializedData=function(t){var r=Ll(t);return new gs(this._iid,gs.payloadify(r))},n.prototype.buildGroupChannelListQueryFromSerializedData=function(t){var r=Ll(t);return new B4(this._iid,r)},n.prototype.buildMemberFromSerializedData=function(t){var r=Ll(t);return new us(this._iid,us.payloadify(r))},n.prototype.getChannelFromCache=function(t){var r;return N(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return[4,this._groupChannelCache.get(t)];case 1:return[2,(r=i.sent())!==null&&r!==void 0?r:null]}})})},n.prototype.getChannelsFromCache=function(t,r,i,a,s){return N(this,void 0,void 0,function(){return T(this,function(o){switch(o.label){case 0:return[4,this._groupChannelCache.fetch({token:t,filter:r,order:i,limit:a,borderlineChannelUrl:s})];case 1:return[2,o.sent()]}})})},n.prototype.upsertChannelsToCache=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,this._groupChannelCache.upsert(t)];case 1:return[2,r.sent()]}})})},n.prototype.removeChannelsFromCache=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,this._groupChannelCache.remove(t)];case 1:return r.sent(),[2]}})})},n.prototype.clearChannelsFromCache=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this._groupChannelCache.clear()];case 1:return t.sent(),[2]}})})},n.prototype.removeChannelsByRotation=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this._groupChannelRotationManager.removeChannelsByRotation()];case 1:return t.sent(),[2]}})})},n.prototype.reduceDBSize=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,c,h,f,p,_,g,C;return T(this,function(E){switch(E.label){case 0:return t=ad.of(this._iid),r=q.of(this._iid).cacheContext,i=r.localCacheConfig,a=r.nestdb,r.localCacheEnabled&&a&&a.state==ho.OPENED?(s=1024*i.maxSize*1024,[4,a.estimateUsage()]):[2];case 1:if((o=E.sent())<s)return[2];l=[],u=this._groupChannelCache.channels,c={},_=0,E.label=2;case 2:return _<u.length?[4,this.getMessagesFromCache(u[_].url,0,"prev",new Wu)]:[3,5];case 3:h=E.sent(),c[u[_].url]=JSON.stringify(h).length,f=new lz({channel:u[_],cachedMessageCount:h.length}),l.push(f),E.label=4;case 4:return _++,[3,2];case 5:p=l.sort(i.clearOrderComparator),_=0,E.label=6;case 6:return _<p.length?[4,t.removeMessagesOfChannel(p[_].channel.url)]:[3,10];case 7:return E.sent(),[4,t._getGroupChannelPreferenceSize(p[_].channel.url)];case 8:if(g=E.sent(),C=c[p[_].channel.url]+g,(o-=C)<s)return[3,10];E.label=9;case 9:return _++,[3,6];case 10:return[4,H1.of(this._iid).clear()];case 11:return E.sent(),[2]}})})},n.prototype._messageDataRetention=function(t){var r;return N(this,void 0,void 0,function(){var i,a,s,o,l,u,c,h,f,p,_=this;return T(this,function(g){switch(g.label){case 0:i=[],a=ad.of(this._iid),s=function(C){var E,y;return T(this,function(S){switch(S.label){case 0:return E=C.customType,y=(r=t[E])!==null&&r!==void 0?r:t.global,[4,a.removeUnderOffset(C.url,y,!0)];case 1:return S.sent(),C.lastMessage&&C.lastMessage.createdAt<=y&&(C.lastMessage=null,i.push(C),ze(function(){return N(_,void 0,void 0,function(){var I,w,R,A,U;return T(this,function(O){try{for(I=ye(this._groupChannelHandlers.values()),w=I.next();!w.done;w=I.next())(R=w.value).onChannelChanged&&R.onChannelChanged(C)}catch(B){A={error:B}}finally{try{w&&!w.done&&(U=I.return)&&U.call(I)}finally{if(A)throw A.error}}return[2]})})})),o._dispatcher.dispatch(new Dx({channelUrl:C.url,messageDeletionTimestamp:y,source:oe.EVENT_MESSAGE_OFFSET_UPDATED})),[2]}})},o=this,g.label=1;case 1:g.trys.push([1,6,7,8]),l=ye(this._groupChannelCache.channels),u=l.next(),g.label=2;case 2:return u.done?[3,5]:(c=u.value,[5,s(c)]);case 3:g.sent(),g.label=4;case 4:return u=l.next(),[3,2];case 5:return[3,8];case 6:return h=g.sent(),f={error:h},[3,8];case 7:try{u&&!u.done&&(p=l.return)&&p.call(l)}finally{if(f)throw f.error}return[7];case 8:return i.length>0&&this._dispatcher.dispatch(new Vt({channels:i,context:{source:oe.EVENT_CHANNEL_UPDATED}})),[2]}})})},n.prototype._expandMessageChunk=function(t){var r;return N(this,void 0,void 0,function(){var i,a,s,o,l,u,c,h;return T(this,function(f){switch(f.label){case 0:return i=q.of(this._iid).cacheContext,a=t.previousMessageId,s=t.messageCreatedAt,o=t.channelUrl,i.localCacheEnabled&&((r=i.nestdb)===null||r===void 0?void 0:r.state)===ho.OPENED&&a?[4,this.getMessageFromCache(a)]:[2];case 1:return l=f.sent(),u=H4(this._sdkState.userId,o),[4,i.preference.get(u)];case 2:return(c=f.sent())?[3,5]:l?(h={range:new fo({top:l.createdAt,bottom:s}),previousComplete:!1},[4,i.preference.set(u,h)]):[3,4];case 3:f.sent(),f.label=4;case 4:return[3,7];case 5:return l&&c.range.includes(l.createdAt)?(c.range.extends(l.createdAt,s),[4,i.preference.set(u,c)]):[3,7];case 6:f.sent(),f.label=7;case 7:return[2]}})})},n.prototype._isSuperGroupMackDisabled=function(t){var r=q.of(this._iid).appInfo;return!(!t.isSuper||t.isBroadcast||!(r!=null&&r.disableSuperGroupMack))},n.prototype._getCachedUserInfo=function(t){return this._userInfoCache.getUserInfoFromCache(t)},n.prototype._upsertCachedUserInfo=function(t,r){q.of(this._iid).useMemberInfoInMessage&&this._userInfoCache.upsert(t,r)},n.prototype._handleEvent=function(t){var r,i;return N(this,void 0,void 0,function(){var a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w,R,A,U,O,B,F,P,G,L,$,j,X,K,Z,te,ne,le,Te,Ze,ce,ge,Qe,xe,tt,ht,bt,Rt,Ut,lt,kt,$t,mt,zt,Tt,Pt,Xe,je,Ve,Ct,ut,qe,pt,jt,Ue,hn,un,vn,Xt,Wt,At,xt,on,xn,st,ct,at,Pe,he,He,ot,nt,Zt,dt,On,Yt,rn,Pn,_n,Tn,qn,Be,rt,et,Nt,Et,Ot,nn,Nn,Je,an,Ke,J,Se,We,qt,Cn,yn,Wn,Xn,_t,Jt,gt,Qt,Tr,Qr,gi,kr,Ws,Cs,Ys,oc,lc,To,uc,Zl,cc,No,Jl,yf,Hd,dc,eu,Io,Ma,hc,nl,Mo,Ao,wo,fc,vc,pc,mc,Ss,Gd,bf,mm,_m,Vr,Cf,Sf,Tf,$d,Vd,ur,nr,gm,Nf,Em,If,ym,Mf,Af,wf,oi,_c,Ro,zd,jd,Wi,Rf,qd,Of,Kd,Df,Dn=this;return T(this,function(It){switch(It.label){case 0:switch(It.trys.push([0,88,,89]),t.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"READ":return[3,10];case"DLVR":return[3,13];case"MRCT":return[3,15];case"MTHD":return[3,27];case"MCNT":return[3,31];case"PEDI":return[3,40];case"VOTE":return[3,43];case"SYEV":return[3,46];case"USEV":return[3,86]}return[3,87];case 1:return p=null,t.code==="MESG"?p=t.as(jN):t.code==="FILE"?p=t.as(HN):t.code!=="ADMM"&&t.code!="BRDM"||(p=t.as(w4)),p?(a=p.message,s=p.isMentioned,o=p.forceUpdateLastMessage,a.channelType!==Kt.GROUP?[3,3]:(ge=this._groupChannelCache.isCachedInMemory(a.channelUrl),L=a instanceof yr&&a.sender.userId===this._sdkState.userId,[4,this.getChannel(a.channelUrl,!0)])):[3,3];case 2:if(l=It.sent(),u=q.of(this._iid),E=u.useMemberInfoInMessage,Vr=u.requestDeduplicator,this._forceDisableMack||this._isSuperGroupMackDisabled(l)||a instanceof bd||L||or(function(){return N(Dn,void 0,void 0,function(){var pe;return T(this,function(ie){switch(ie.label){case 0:return pe=new GY(a),[4,this._requestQueue.send(pe)];case 1:return ie.sent(),[2]}})})}),a instanceof yr){c=a.sender,l.isSuper&&this._upsertCachedUserInfo(c,a.createdAt);try{for(h=ye(l.members),f=h.next();!f.done;f=h.next())if((kr=f.value).userId===a.sender.userId){E&&(kr.nickname=a.sender.nickname,kr.plainProfileUrl=a.sender.plainProfileUrl,kr.metaData=a.sender.metaData,kr.isBlockedByMe=a.sender.isBlockedByMe);break}}catch(pe){nr={error:pe}}finally{try{f&&!f.done&&(gm=h.return)&&gm.call(h)}finally{if(nr)throw nr.error}}E&&s&&((r=a.mentionedUsers)===null||r===void 0||r.forEach(function(pe){var ie,Lt;try{for(var yt=ye(l.members),Dt=yt.next();!Dt.done;Dt=yt.next()){var rr=Dt.value;if(pe.userId===rr.userId){rr.nickname=pe.nickname,rr.plainProfileUrl=pe.plainProfileUrl,rr.metaData=pe.metaData;break}}}catch(Fn){ie={error:Fn}}finally{try{Dt&&!Dt.done&&(Lt=yt.return)&&Lt.call(yt)}finally{if(ie)throw ie.error}}})),L&&(R=this._sessionManager.currentUser)&&(R.nickname=a.sender.nickname,R.plainProfileUrl=a.sender.plainProfileUrl,R.metaData=a.sender.metaData)}a.silent&&!L||(l.isEphemeral||ge)&&(l._updateLastMessage(a),L||l._shouldUpdateUnreadCountWith(a)&&l._updateUnreadCount(l.unreadMessageCount+1,l.unreadMentionCount+(s?1:0))),o&&l._updateLastMessage(a),Vr.updatePendingResponse(l,Date.now()),this._dispatcher.dispatch(new Vt({channels:[l],context:{source:oe.EVENT_MESSAGE_RECEIVED}})),a.silent&&!L||ze(function(){return N(Dn,void 0,void 0,function(){var pe,ie,Lt,yt,Dt;return T(this,function(rr){try{for(pe=ye(this._groupChannelHandlers.values()),ie=pe.next();!ie.done;ie=pe.next())(Lt=ie.value).onChannelChanged&&Lt.onChannelChanged(l)}catch(Fn){yt={error:Fn}}finally{try{ie&&!ie.done&&(Dt=pe.return)&&Dt.call(pe)}finally{if(yt)throw yt.error}}return[2]})})}),this._dispatcher.dispatch(new er({messages:[a],source:oe.EVENT_MESSAGE_RECEIVED})),ze(function(){return N(Dn,void 0,void 0,function(){var pe,ie,Lt,yt,Dt;return T(this,function(rr){try{for(pe=ye(this._groupChannelHandlers.values()),ie=pe.next();!ie.done;ie=pe.next())(Lt=ie.value).onMessageReceived&&Lt.onMessageReceived(l,a),s&&Lt.onMentionReceived&&Lt.onMentionReceived(l,a)}catch(Fn){yt={error:Fn}}finally{try{ie&&!ie.done&&(Dt=pe.return)&&Dt.call(pe)}finally{if(yt)throw yt.error}}return[2]})})}),It.label=3;case 3:return[3,87];case 4:return p=null,t.code==="MEDI"?p=t.as(v0):t.code==="FEDI"?p=t.as(p0):t.code==="AEDI"&&(p=t.as(R4)),p?(_=p.message,g=p.mentionCountChange,C=q.of(this._iid),E=C.useMemberInfoInMessage,Vr=C.requestDeduplicator,_.threadInfo&&(_.threadInfo.unreadReplyCount=void 0),_.channelType!==Kt.GROUP?[3,6]:(ge=this._groupChannelCache.isCachedInMemory(_.channelUrl),[4,this.getChannel(_.channelUrl,!0)])):[3,6];case 5:if(y=It.sent(),L=!1,_ instanceof yr){L=_.sender.userId===this._sdkState.userId,y.isSuper&&this._upsertCachedUserInfo(_.sender,_.updatedAt);try{for(S=ye(y.members),I=S.next();!I.done;I=S.next())if((kr=I.value).userId===_.sender.userId){E&&(kr.nickname=_.sender.nickname,kr.plainProfileUrl=_.sender.plainProfileUrl,kr.metaData=_.sender.metaData,kr.isBlockedByMe=_.sender.isBlockedByMe);break}}catch(pe){Nf={error:pe}}finally{try{I&&!I.done&&(Em=S.return)&&Em.call(S)}finally{if(Nf)throw Nf.error}}}le=!1,L?(w=_.sender,(R=this._sessionManager.currentUser)&&(R.nickname=w.nickname,R.plainProfileUrl=w.plainProfileUrl,R.metaData=w.metaData)):y.isReadMessage(_)||g!==0&&!_.silent&&ge&&(y._updateUnreadCount(y.unreadMessageCount,y.unreadMentionCount+g),le=!0),y._updateLastMessage(_)?le=!0:!((i=y.lastMessage)===null||i===void 0)&&i.isIdentical(_)&&(ge?y._updateLastMessage(_)&&(le=!0):le=!0),A=!1,y.lastPinnedMessage&&y.lastPinnedMessage.messageId===_.messageId&&(y.lastPinnedMessage=_,le=!0,A=!0),le&&(Vr.updatePendingResponse(y,Date.now()),this._dispatcher.dispatch(new Vt({channels:[y],context:{source:A?oe.EVENT_PINNED_MESSAGE_UPDATED:oe.EVENT_MESSAGE_UPDATED}})),_.silent&&!L||ze(function(){return N(Dn,void 0,void 0,function(){var pe,ie,Lt,yt,Dt;return T(this,function(rr){try{for(pe=ye(this._groupChannelHandlers.values()),ie=pe.next();!ie.done;ie=pe.next())(Lt=ie.value).onChannelChanged&&Lt.onChannelChanged(y)}catch(Fn){yt={error:Fn}}finally{try{ie&&!ie.done&&(Dt=pe.return)&&Dt.call(pe)}finally{if(yt)throw yt.error}}return[2]})})}),A&&ze(function(){return N(Dn,void 0,void 0,function(){var pe,ie,Lt,yt,Dt;return T(this,function(rr){try{for(pe=ye(this._groupChannelHandlers.values()),ie=pe.next();!ie.done;ie=pe.next())(Lt=ie.value).onPinnedMessageUpdated&&Lt.onPinnedMessageUpdated(y)}catch(Fn){yt={error:Fn}}finally{try{ie&&!ie.done&&(Dt=pe.return)&&Dt.call(pe)}finally{if(yt)throw yt.error}}return[2]})})})),this._dispatcher.dispatch(new er({messages:[_],source:oe.EVENT_MESSAGE_UPDATED})),ze(function(){return N(Dn,void 0,void 0,function(){var pe,ie,Lt,yt,Dt;return T(this,function(rr){try{for(pe=ye(this._groupChannelHandlers.values()),ie=pe.next();!ie.done;ie=pe.next())(Lt=ie.value).onMessageUpdated&&Lt.onMessageUpdated(y,_),g>0&&Lt.onMentionReceived&&Lt.onMentionReceived(y,_)}catch(Fn){yt={error:Fn}}finally{try{ie&&!ie.done&&(Dt=pe.return)&&Dt.call(pe)}finally{if(yt)throw yt.error}}return[2]})})}),It.label=6;case 6:return[3,87];case 7:return U=t.as(Jk),xt=U.channelUrl,on=U.channelType,O=U.messageId,B=U.silent,F=U.messageCreatedAt,P=U.senderId,on!==Kt.GROUP?[3,9]:[4,this.getChannel(xt,!0)];case 8:G=It.sent(),L=P===this._sdkState.userId,B||L||F>0&&G.myLastRead<F&&G.unreadMessageCount>0&&(G._updateUnreadCount(G.unreadMessageCount-1,0),(Vr=q.of(this._iid).requestDeduplicator).updatePendingResponse(G,Date.now())),this._dispatcher.dispatch(new PN({messageIds:[O],source:oe.EVENT_MESSAGE_DELETED})),ze(function(){return N(Dn,void 0,void 0,function(){var pe,ie,Lt,yt,Dt;return T(this,function(rr){try{for(pe=ye(this._groupChannelHandlers.values()),ie=pe.next();!ie.done;ie=pe.next())(Lt=ie.value).onMessageDeleted&&Lt.onMessageDeleted(G,O)}catch(Fn){yt={error:Fn}}finally{try{ie&&!ie.done&&(Dt=pe.return)&&Dt.call(pe)}finally{if(yt)throw yt.error}}return[2]})})}),It.label=9;case 9:return[3,87];case 10:return($=t.as(Kx).readStatus).channelType!==Kt.GROUP?[3,12]:(ge=this._groupChannelCache.isCachedInMemory($.channelUrl),[4,this.getChannel($.channelUrl,!0)]);case 11:if(j=It.sent(),X=$.reader.userId===this._sdkState.userId,K=!0,ge&&(K=j._updateUnreadMemberState($.reader.userId,$.readAt,$.isExcluded)),$.isExcluded){if(K){try{for(Z=ye(this._groupChannelHandlers.values()),te=Z.next();!te.done;te=Z.next())(ne=te.value).onUserMarkedUnread!==vt?ne.onUserMarkedUnread(j,[$.reader.userId]):ne.onUnreadMemberStatusUpdated&&ne.onUnreadMemberStatusUpdated(j)}catch(pe){If={error:pe}}finally{try{te&&!te.done&&(ym=Z.return)&&ym.call(Z)}finally{if(If)throw If.error}}this._dispatcher.dispatch(new Vt({channels:[j],context:{source:oe.EVENT_CHANNEL_UNREAD,userIds:[$.reader.userId]}}))}}else le=!0,X&&(ge?j.unreadMentionCount>0||j.unreadMessageCount>0?j._updateUnreadCount(0,0):le=!1:j.unreadMessageCount!==0&&j.unreadMentionCount!==0&&(le=!1)),le&&(this._dispatcher.dispatch(new Vt({channels:[j],context:{source:K?oe.EVENT_CHANNEL_READ:oe.EVENT_CHANNEL_UPDATED,userIds:[$.reader.userId]}})),ze(function(){return N(Dn,void 0,void 0,function(){var pe,ie,Lt,yt,Dt;return T(this,function(rr){try{for(pe=ye(this._groupChannelHandlers.values()),ie=pe.next();!ie.done;ie=pe.next())Lt=ie.value,X?Lt.onChannelChanged!==vt&&Lt.onChannelChanged(j):K&&(Lt.onUserMarkedRead!==vt?Lt.onUserMarkedRead(j,[$.reader.userId]):Lt.onUnreadMemberStatusUpdated!==vt&&Lt.onUnreadMemberStatusUpdated(j))}catch(Fn){yt={error:Fn}}finally{try{ie&&!ie.done&&(Dt=pe.return)&&Dt.call(pe)}finally{if(yt)throw yt.error}}return[2]})})}));It.label=12;case 12:return[3,87];case 13:return Te=t.as(VY),xt=Te.channelUrl,Ze=Te.deliveredStateUpdate,ce=Ze===void 0?{}:Ze,ge=this._groupChannelCache.isCachedInMemory(xt),[4,this.getChannel(xt,!0)];case 14:return Qe=It.sent(),ge&&Object.keys(ce).forEach(function(pe){Qe._updateUndeliveredMemberState(pe,ce[pe])}),Object.keys(ce).some(function(pe){return pe!==Dn._sdkState.userId})&&(this._dispatcher.dispatch(new Vt({channels:[Qe],context:{source:oe.EVENT_CHANNEL_DELIVERED}})),ze(function(){return N(Dn,void 0,void 0,function(){var pe,ie,Lt,yt,Dt;return T(this,function(rr){try{for(pe=ye(this._groupChannelHandlers.values()),ie=pe.next();!ie.done;ie=pe.next())(Lt=ie.value).onUndeliveredMemberStatusUpdated&&Lt.onUndeliveredMemberStatusUpdated(Qe)}catch(Fn){yt={error:Fn}}finally{try{ie&&!ie.done&&(Dt=pe.return)&&Dt.call(pe)}finally{if(yt)throw yt.error}}return[2]})})})),[3,87];case 15:return xe=t.as(O4),xt=xe.channelUrl,on=xe.channelType,tt=xe.event,on!==Kt.GROUP?[3,26]:[4,this.getChannel(xt,!0)];case 16:return ht=It.sent(),[4,this.getMessageFromCache(tt.messageId)];case 17:if(Tt=It.sent(),!ht.isSuper)return[3,25];It.label=18;case 18:It.trys.push([18,23,24,25]),bt=ye(Object.keys(tt._sampledUserInfoList)),Rt=bt.next(),It.label=19;case 19:return Rt.done?[3,22]:(Ut=Rt.value,[4,this._userInfoCache.get(Ut)]);case 20:(lt=It.sent())?(lt.plainProfileUrl=tt._sampledUserInfoList[Ut].profile_url,lt.nickname=tt._sampledUserInfoList[Ut].nickname,this._upsertCachedUserInfo(lt,tt.updatedAt)):(kt=new Gt(this._iid,{user_id:Ut,nickname:tt._sampledUserInfoList[Ut].nickname,profile_url:tt._sampledUserInfoList[Ut].profile_url,require_auth_for_profile_image:tt._sampledUserInfoList[Ut].require_auth_for_profile_image}),this._upsertCachedUserInfo(kt,tt.updatedAt)),It.label=21;case 21:return Rt=bt.next(),[3,19];case 22:return[3,25];case 23:return $t=It.sent(),Mf={error:$t},[3,25];case 24:try{Rt&&!Rt.done&&(Af=bt.return)&&Af.call(bt)}finally{if(Mf)throw Mf.error}return[7];case 25:Tt?Tt instanceof Hi&&(Tt.applyReactionEvent(tt),this._dispatcher.dispatch(new er({messages:[Tt],source:oe.EVENT_MESSAGE_REACTION_UPDATED}))):this._dispatcher.dispatch(new Ux({event:tt,source:oe.EVENT_MESSAGE_REACTION_UPDATED})),ze(function(){return N(Dn,void 0,void 0,function(){var pe,ie,Lt,yt,Dt;return T(this,function(rr){try{for(pe=ye(this._groupChannelHandlers.values()),ie=pe.next();!ie.done;ie=pe.next())(Lt=ie.value).onReactionUpdated&&Lt.onReactionUpdated(ht,tt)}catch(Fn){yt={error:Fn}}finally{try{ie&&!ie.done&&(Dt=pe.return)&&Dt.call(pe)}finally{if(yt)throw yt.error}}return[2]})})}),It.label=26;case 26:return[3,87];case 27:return(mt=t.as(D4).event).channelType!==Kt.GROUP?[3,30]:[4,this.getChannel(mt.channelUrl,!0)];case 28:return zt=It.sent(),[4,this.getMessageFromCache(mt.targetMessageId)];case 29:if((Tt=It.sent())?Tt instanceof Hi&&(Tt.applyThreadInfoUpdateEvent(mt),this._dispatcher.dispatch(new er({messages:[Tt],source:oe.EVENT_MESSAGE_THREADINFO_UPDATED}))):this._dispatcher.dispatch(new Lx({event:mt,source:oe.EVENT_MESSAGE_THREADINFO_UPDATED})),zt.isSuper)try{for(Pt=ye(mt.threadInfo.mostRepliedUsers),Xe=Pt.next();!Xe.done;Xe=Pt.next())Jt=Xe.value,this._upsertCachedUserInfo(Jt,mt.threadInfo.updatedAt)}catch(pe){wf={error:pe}}finally{try{Xe&&!Xe.done&&(oi=Pt.return)&&oi.call(Pt)}finally{if(wf)throw wf.error}}ze(function(){return N(Dn,void 0,void 0,function(){var pe,ie,Lt,yt,Dt;return T(this,function(rr){try{for(pe=ye(this._groupChannelHandlers.values()),ie=pe.next();!ie.done;ie=pe.next())(Lt=ie.value).onThreadInfoUpdated&&Lt.onThreadInfoUpdated(zt,mt)}catch(Fn){yt={error:Fn}}finally{try{ie&&!ie.done&&(Dt=pe.return)&&Dt.call(pe)}finally{if(yt)throw yt.error}}return[2]})})}),It.label=30;case 30:return[3,87];case 31:je=t.as(U4).groupChannelMemberCounts,Ve=[],It.label=32;case 32:It.trys.push([32,37,38,39]),Ct=ye(je),ut=Ct.next(),It.label=33;case 33:return ut.done?[3,36]:(qe=ut.value,xt=qe.channelUrl,qt=qe.memberCount,Cn=qe.joinedMemberCount,pt=qe.updatedAt,[4,this.getChannelFromCache(xt)]);case 34:(jt=It.sent())&&jt._setLatestMemberCount(qt,Cn,pt)&&Ve.push(jt),It.label=35;case 35:return ut=Ct.next(),[3,33];case 36:return[3,39];case 37:return Ue=It.sent(),_c={error:Ue},[3,39];case 38:try{ut&&!ut.done&&(Ro=Ct.return)&&Ro.call(Ct)}finally{if(_c)throw _c.error}return[7];case 39:return Ve.length>0&&(this._dispatcher.dispatch(new Vt({channels:Ve,context:{source:oe.EVENT_CHANNEL_MEMBER_COUNT_UPDATED}})),ze(function(){return N(Dn,void 0,void 0,function(){var pe,ie,Lt,yt,Dt;return T(this,function(rr){try{for(pe=ye(this._groupChannelHandlers.values()),ie=pe.next();!ie.done;ie=pe.next())(Lt=ie.value).onChannelMemberCountChanged&&Lt.onChannelMemberCountChanged(Ve)}catch(Fn){yt={error:Fn}}finally{try{ie&&!ie.done&&(Dt=pe.return)&&Dt.call(pe)}finally{if(yt)throw yt.error}}return[2]})})})),[3,87];case 40:return hn=t.as(L4),un=hn.event,vn=hn.status,xt=hn.channelUrl,on=hn.channelType,xt&&on===Kt.GROUP?[4,this.getChannel(xt,!0)]:[3,42];case 41:Xt=It.sent(),this._dispatcher.dispatch(new FN({event:un,source:oe.EVENT_POLL_UPDATED})),ze(vn===Px?function(){return N(Dn,void 0,void 0,function(){var pe,ie,Lt,yt,Dt;return T(this,function(rr){try{for(pe=ye(this._groupChannelHandlers.values()),ie=pe.next();!ie.done;ie=pe.next())(Lt=ie.value).onPollDeleted&&Lt.onPollDeleted(Xt,un.pollId)}catch(Fn){yt={error:Fn}}finally{try{ie&&!ie.done&&(Dt=pe.return)&&Dt.call(pe)}finally{if(yt)throw yt.error}}return[2]})})}:function(){return N(Dn,void 0,void 0,function(){var pe,ie,Lt,yt,Dt;return T(this,function(rr){try{for(pe=ye(this._groupChannelHandlers.values()),ie=pe.next();!ie.done;ie=pe.next())(Lt=ie.value).onPollUpdated&&Lt.onPollUpdated(Xt,un)}catch(Fn){yt={error:Fn}}finally{try{ie&&!ie.done&&(Dt=pe.return)&&Dt.call(pe)}finally{if(yt)throw yt.error}}return[2]})})}),It.label=42;case 42:return[3,87];case 43:return Wt=t.as(qN),At=Wt.event,xt=Wt.channelUrl,on=Wt.channelType,xt&&on===Kt.GROUP?[4,this.getChannel(xt,!0)]:[3,45];case 44:xn=It.sent(),this._dispatcher.dispatch(new cE({event:At,source:oe.EVENT_POLL_VOTED})),ze(function(){return N(Dn,void 0,void 0,function(){var pe,ie,Lt,yt,Dt;return T(this,function(rr){try{for(pe=ye(this._groupChannelHandlers.values()),ie=pe.next();!ie.done;ie=pe.next())(Lt=ie.value).onPollVoted&&Lt.onPollVoted(xn,At)}catch(Fn){yt={error:Fn}}finally{try{ie&&!ie.done&&(Dt=pe.return)&&Dt.call(pe)}finally{if(yt)throw yt.error}}return[2]})})}),It.label=45;case 45:return[3,87];case 46:if(!(st=t.as(Yl).event).isGroupChannelEvent)return[3,85];switch(st.category){case wn.CHANNEL_JOIN:return[3,47];case wn.CHANNEL_LEAVE:return[3,49];case wn.CHANNEL_OPERATOR_UPDATE:return[3,53];case wn.CHANNEL_INVITE:return[3,55];case wn.CHANNEL_DECLINE_INVITE:return[3,57];case wn.TYPING_START:case wn.TYPING_END:return[3,59];case wn.USER_CHANNEL_MUTE:case wn.USER_CHANNEL_UNMUTE:return[3,61];case wn.USER_CHANNEL_BAN:return[3,63];case wn.USER_CHANNEL_UNBAN:return[3,67];case wn.CHANNEL_FREEZE:case wn.CHANNEL_UNFREEZE:return[3,69];case wn.CHANNEL_HIDE:return[3,71];case wn.CHANNEL_UNHIDE:return[3,73];case wn.CHANNEL_DELETED:return[3,75];case wn.CHANNEL_PROP_CHANGED:return[3,76];case wn.CHANNEL_META_DATA_CHANGED:return[3,79];case wn.CHANNEL_META_COUNTERS_CHANGED:return[3,81];case wn.PINNED_MESSAGE_CHANGED:return[3,83]}return[3,85];case 47:return[4,this.getChannel(st.channelUrl,!0)];case 48:if(ct=It.sent(),at=t.as(IY),Pe=at.memberCount,he=at.joinedMemberCount,He=at.members,ot=!1,He.forEach(function(pe){ct.isExclusive||ct.isSuper||ct.isBroadcast?ot=ot||ct._setLatestMemberCount(Pe,he,st.ts):(pe.state=Er.JOINED,ct.addMember(pe,st.ts),Dn._updateJoinedMemberCount(ct)),pe.userId===Dn._sdkState.userId&&(ct.myMemberState=Er.JOINED)}),ct.isSuper)try{for(nt=ye(He),Zt=nt.next();!Zt.done;Zt=nt.next())kr=Zt.value,this._upsertCachedUserInfo(kr,st.ts)}catch(pe){zd={error:pe}}finally{try{Zt&&!Zt.done&&(jd=nt.return)&&jd.call(nt)}finally{if(zd)throw zd.error}}return(Vr=q.of(this._iid).requestDeduplicator).updatePendingResponse(ct,Date.now()),this._dispatcher.dispatch(new Vt({channels:[ct],context:{source:oe.EVENT_CHANNEL_JOINED,users:He}})),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){var Lt,yt;try{for(var Dt=ye(He),rr=Dt.next();!rr.done;rr=Dt.next()){var Fn=rr.value;ie.onUserJoined&&ie.onUserJoined(ct,Fn)}}catch(Cr){Lt={error:Cr}}finally{try{rr&&!rr.done&&(yt=Dt.return)&&yt.call(Dt)}finally{if(Lt)throw Lt.error}}ct.isBroadcast&&ot&&ie.onChannelMemberCountChanged&&ie.onChannelMemberCountChanged([ct])}),[2]})})}),[3,85];case 49:return(Ws=this._leftChannels.get(st.channelUrl))?(On=Ws.channel,[3,52]):[3,50];case 50:return[4,this.getChannel(st.channelUrl,!0)];case 51:On=It.sent(),It.label=52;case 52:return dt=On,Yt=t.as(AY),qt=Yt.memberCount,Cn=Yt.joinedMemberCount,rn=Yt.member,Pn=!1,_n=q.of(this._iid),Tn=_n.appInfo,Vr=_n.requestDeduplicator,dt.isExclusive||dt.isSuper||dt.isBroadcast?Pn=dt._setLatestMemberCount(qt,Cn,st.ts):(Tn!=null&&Tn.enabledChannelMemberShipHistory?((qn=dt.members.find(function(pe){return pe.userId===rn.userId}))&&(qn.state=Er.LEFT),dt.memberCount=qt):dt.removeMember(rn),this._updateJoinedMemberCount(dt)),rn.userId===this._sdkState.userId?(dt.myMemberState=Er.NONE,dt.invitedAt=0,dt.joinedAt=0,dt._updateUnreadCount(0,0),dt.isPublic?this._dispatcher.dispatch(new Vt({channels:[dt],context:{source:oe.EVENT_CHANNEL_LEFT,user:rn}})):(this._markAsLeave(dt),this._dispatcher.dispatch(new vl({channelUrls:[dt.url],context:{source:oe.EVENT_CHANNEL_LEFT,user:rn}})))):this._dispatcher.dispatch(new Vt({channels:[dt],context:{source:oe.EVENT_CHANNEL_LEFT,user:rn}})),Vr.updatePendingResponse(dt,Date.now()),dt.isSuper&&this._upsertCachedUserInfo(rn,st.ts),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){ie.onUserLeft&&ie.onUserLeft(dt,rn),dt.isBroadcast&&Pn&&ie.onChannelMemberCountChanged&&ie.onChannelMemberCountChanged([dt])}),[2]})})}),[3,85];case 53:return[4,this.getChannel(st.channelUrl,!0)];case 54:Be=It.sent(),rt=t.as(I4).operators,et=rt.map(function(pe){return pe.userId});try{for(Nt=ye(Be.members),Et=Nt.next();!Et.done;Et=Nt.next())(kr=Et.value).role=et.includes(kr.userId)?hs.OPERATOR:hs.NONE}catch(pe){Wi={error:pe}}finally{try{Et&&!Et.done&&(Rf=Nt.return)&&Rf.call(Nt)}finally{if(Wi)throw Wi.error}}return Be.myRole=et.includes(this._sdkState.userId)?hs.OPERATOR:hs.NONE,(Vr=q.of(this._iid).requestDeduplicator).updatePendingResponse(Be,Date.now()),this._dispatcher.dispatch(new Vt({channels:[Be],context:{source:oe.EVENT_CHANNEL_OPERATOR_UPDATED,operators:rt}})),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){ie.onOperatorUpdated&&ie.onOperatorUpdated(Be,rt)}),[2]})})}),[3,85];case 55:return[4,this.getChannel(st.channelUrl,!0)];case 56:Ot=It.sent(),nn=t.as(OY),qt=nn.memberCount,Cn=nn.joinedMemberCount,Nn=nn.inviter,(Je=nn.invitees).forEach(function(pe){return pe.state=Er.INVITED});try{for(an=ye(Je),Ke=an.next();!Ke.done;Ke=an.next())J=Ke.value,Ot.isExclusive||Ot.isSuper||Ot.isBroadcast?(Ot.isSuper&&this._userInfoCache.upsert(J,st.ts),Ot._setLatestMemberCount(qt,Cn,st.ts)):Ot.addMember(J,st.ts),this._sdkState.userId===J.userId&&(Ot.hiddenState=ss.UNHIDDEN,Ot.myMemberState!==Er.JOINED&&(Ot.myMemberState=Er.INVITED),Ot.invitedAt=st.ts)}catch(pe){qd={error:pe}}finally{try{Ke&&!Ke.done&&(Of=an.return)&&Of.call(an)}finally{if(qd)throw qd.error}}return(Vr=q.of(this._iid).requestDeduplicator).updatePendingResponse(Ot,Date.now()),this._dispatcher.dispatch(new Vt({channels:[Ot],context:{source:oe.EVENT_CHANNEL_INVITED,inviter:Nn,invitees:Je}})),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){ie.onUserReceivedInvitation&&ie.onUserReceivedInvitation(Ot,Nn,Je)}),[2]})})}),[3,85];case 57:return[4,this.getChannel(st.channelUrl,!0)];case 58:return Se=It.sent(),We=t.as(UY),qt=We.memberCount,Cn=We.joinedMemberCount,yn=We.inviter,Wn=We.invitee,Se.isExclusive||Se.isSuper||Se.isBroadcast?(Se.isSuper&&this._userInfoCache.upsert(Wn,st.ts),Se._setLatestMemberCount(qt,Cn,st.ts)):Se.removeMember(Wn),this._sdkState.userId===Wn.userId?(Se.invitedAt=0,Se.myMemberState=Er.NONE,Se.isPublic?this._dispatcher.dispatch(new Vt({channels:[Se],context:{source:oe.EVENT_CHANNEL_DECLINED_INVITE,inviter:yn,invitee:Wn}})):this._dispatcher.dispatch(new vl({channelUrls:[Se.url],context:{source:oe.EVENT_CHANNEL_DECLINED_INVITE,inviter:yn,invitee:Wn}}))):this._dispatcher.dispatch(new Vt({channels:[Se],context:{source:oe.EVENT_CHANNEL_DECLINED_INVITE,inviter:yn,invitee:Wn}})),(Vr=q.of(this._iid).requestDeduplicator).updatePendingResponse(Se,Date.now()),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){ie.onUserDeclinedInvitation&&ie.onUserDeclinedInvitation(Se,yn,Wn)}),[2]})})}),[3,85];case 59:return[4,this.getChannel(st.channelUrl,!0)];case 60:return Xn=It.sent(),_t=st.category===wn.TYPING_START,Jt=t.as(_t?FY:HY).user,Xn._updateTypingStatus(Jt,_t?st.ts:0),(Vr=q.of(this._iid).requestDeduplicator).updatePendingResponse(Xn,Date.now()),this._dispatcher.dispatch(new Vt({channels:[Xn],context:{source:oe.EVENT_CHANNEL_TYPING_STATUS_UPDATE}})),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){ie.onTypingStatusUpdated&&ie.onTypingStatusUpdated(Xn)}),[2]})})}),[3,85];case 61:return[4,this.getChannel(st.channelUrl,!0)];case 62:gt=It.sent(),Qt=st.category===wn.USER_CHANNEL_MUTE,(Tr=t.as(Qt?i4:a4).user).userId===this._sdkState.userId&&(gt.myMutedState=Qt?xs.MUTED:xs.UNMUTED,gt._myMutedRemainingTime=Tr.restrictionInfo.remainingDuration);try{for(Qr=ye(gt.members),gi=Qr.next();!gi.done;gi=Qr.next())if((kr=gi.value).userId===Tr.userId){kr.isMuted=Qt;break}}catch(pe){Kd={error:pe}}finally{try{gi&&!gi.done&&(Df=Qr.return)&&Df.call(Qr)}finally{if(Kd)throw Kd.error}}return gt.isSuper&&this._userInfoCache.upsert(Tr,st.ts),(Vr=q.of(this._iid).requestDeduplicator).updatePendingResponse(gt,Date.now()),this._dispatcher.dispatch(new Vt({channels:[gt],context:{source:Qt?oe.EVENT_CHANNEL_MUTED:oe.EVENT_CHANNEL_UNMUTED,user:Tr}})),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){Qt?ie.onUserMuted&&ie.onUserMuted(gt,Tr):ie.onUserUnmuted&&ie.onUserUnmuted(gt,Tr)}),[2]})})}),[3,85];case 63:return(Ws=this._leftChannels.get(st.channelUrl))?(Ys=Ws.channel,[3,66]):[3,64];case 64:return[4,this.getChannel(st.channelUrl,!0)];case 65:Ys=It.sent(),It.label=66;case 66:return Cs=Ys,this._markAsLeave(Cs),oc=t.as(s4).user,uc=oc.userId===this._sdkState.userId,Cs.isSuper&&this._userInfoCache.upsert(oc,st.ts),uc&&this._dispatcher.dispatch(new vl({channelUrls:[Cs.url],context:{source:oe.EVENT_CHANNEL_BANNED,user:oc}})),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){ie.onUserBanned&&ie.onUserBanned(Cs,oc)}),[2]})})}),[3,85];case 67:return[4,this.getChannel(st.channelUrl,!0)];case 68:return lc=It.sent(),To=t.as(o4).user,uc=To.userId===this._sdkState.userId,lc.isSuper&&this._userInfoCache.upsert(To,st.ts),uc&&this._dispatcher.dispatch(new vl({channelUrls:[lc.url],context:{source:oe.EVENT_CHANNEL_UNBANNED,user:To}})),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){ie.onUserUnbanned&&ie.onUserUnbanned(lc,To)}),[2]})})}),[3,85];case 69:return[4,this.getChannel(st.channelUrl,!0)];case 70:return Zl=It.sent(),cc=t.as(l4).freeze,Zl.isFrozen=cc,(Vr=q.of(this._iid).requestDeduplicator).updatePendingResponse(Zl,Date.now()),this._dispatcher.dispatch(new Vt({channels:[Zl],context:{source:cc?oe.EVENT_CHANNEL_FROZEN:oe.EVENT_CHANNEL_UNFROZEN}})),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){cc?ie.onChannelFrozen&&ie.onChannelFrozen(Zl):ie.onChannelUnfrozen&&ie.onChannelUnfrozen(Zl)}),[2]})})}),[3,85];case 71:return[4,this.getChannel(st.channelUrl,!0)];case 72:return No=It.sent(),Jl=t.as(xY),yf=Jl.allowAutoUnhide,Hd=Jl.hidePreviousMessages,dc=Jl.messageOffsetTimestamp,yf!==null&&(No.hiddenState=yf?ss.HIDDEN_ALLOW_AUTO_UNHIDE:ss.HIDDEN_PREVENT_AUTO_UNHIDE),Hd!==null&&Hd&&No._updateUnreadCount(0,0),dc!==null&&(No.messageOffsetTimestamp=dc),(Vr=q.of(this._iid).requestDeduplicator).updatePendingResponse(No,Date.now()),this._dispatcher.dispatch(new Vt({channels:[No],context:{source:oe.EVENT_CHANNEL_HIDDEN}})),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){ie.onChannelHidden&&ie.onChannelHidden(No)}),[2]})})}),[3,85];case 73:return[4,this.getChannel(st.channelUrl,!0)];case 74:return(eu=It.sent()).hiddenState=ss.UNHIDDEN,(Vr=q.of(this._iid).requestDeduplicator).updatePendingResponse(eu,Date.now()),this._dispatcher.dispatch(new Vt({channels:[eu],context:{source:oe.EVENT_CHANNEL_UNHIDDEN}})),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){ie.onChannelChanged&&ie.onChannelChanged(eu)}),[2]})})}),[3,85];case 75:return this._dispatcher.dispatch(new vl({channelUrls:[st.channelUrl],context:{source:oe.EVENT_CHANNEL_DELETED}})),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){ie.onChannelDeleted&&ie.onChannelDeleted(st.channelUrl,Kt.GROUP)}),[2]})})}),[3,85];case 76:return[4,Bi(50)];case 77:return It.sent(),[4,this.getChannelWithoutCache(st.channelUrl,!0,!1)];case 78:return Io=It.sent(),this._dispatcher.dispatch(new Vt({channels:[Io],context:{source:oe.EVENT_CHANNEL_UPDATED}})),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){ie.onChannelChanged&&ie.onChannelChanged(Io)}),[2]})})}),[3,85];case 79:return[4,this.getChannel(st.channelUrl,!0)];case 80:return Ma=It.sent(),hc=t.as(n4),nl=hc.created,Mo=hc.updated,Ao=hc.deleted,nl&&(Ma._upsertCachedMetaData(nl,st.ts),this._dispatcher.dispatch(new Vt({channels:[Ma],context:{source:oe.EVENT_CHANNEL_METADATA_CREATED,metaData:nl},ts:st.ts}))),Mo&&(Ma._upsertCachedMetaData(Mo,st.ts),this._dispatcher.dispatch(new Vt({channels:[Ma],context:{source:oe.EVENT_CHANNEL_METADATA_UPDATED,metaData:Mo},ts:st.ts}))),Ao&&(Ma._removeFromCachedMetaData(Ao,st.ts),this._dispatcher.dispatch(new Vt({channels:[Ma],context:{source:oe.EVENT_CHANNEL_METADATA_DELETED,metaDataKeys:Ao},ts:st.ts}))),(nl||Mo||Ao)&&(Vr=q.of(this._iid).requestDeduplicator).updatePendingResponse(Ma,Date.now()),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){nl&&ie.onMetaDataCreated&&ie.onMetaDataCreated(Ma,nl),Mo&&ie.onMetaDataUpdated&&ie.onMetaDataUpdated(Ma,Mo),Ao&&ie.onMetaDataDeleted&&ie.onMetaDataDeleted(Ma,Ao)}),[2]})})}),[3,85];case 81:return[4,this.getChannel(st.channelUrl,!0)];case 82:return wo=It.sent(),fc=t.as(r4),vc=fc.created,pc=fc.updated,mc=fc.deleted,vc&&this._dispatcher.dispatch(new Vt({channels:[wo],context:{source:oe.EVENT_CHANNEL_METACOUNTER_CREATED,metaCounters:vc}})),pc&&this._dispatcher.dispatch(new Vt({channels:[wo],context:{source:oe.EVENT_CHANNEL_METACOUNTER_UPDATED,metaCounters:pc}})),mc&&this._dispatcher.dispatch(new Vt({channels:[wo],context:{source:oe.EVENT_CHANNEL_METACOUNTER_DELETED,metaCounterKeys:mc}})),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){vc&&ie.onMetaCounterCreated&&ie.onMetaCounterCreated(wo,vc),pc&&ie.onMetaCounterUpdated&&ie.onMetaCounterUpdated(wo,pc),mc&&ie.onMetaCounterDeleted&&ie.onMetaCounterDeleted(wo,mc)}),[2]})})}),[3,85];case 83:return[4,this.getChannel(st.channelUrl,!0)];case 84:return Ss=It.sent(),Gd=t.as(M4),bf=Gd.pinnedMessageIds,mm=Gd.latestPinnedMessage,(_m=Gd.ts)>Ss._pinnedMessagesUpdatedAt&&(Ss.pinnedMessageIds=bf??[],Ss.lastPinnedMessage=mm,Ss._pinnedMessagesUpdatedAt=_m,(Vr=q.of(this._iid).requestDeduplicator).updatePendingResponse(Ss,Date.now()),this._dispatcher.dispatch(new Vt({channels:[Ss],context:{source:oe.EVENT_PINNED_MESSAGE_UPDATED}})),ze(function(){return N(Dn,void 0,void 0,function(){var pe,ie,Lt,yt,Dt;return T(this,function(rr){try{for(pe=ye(this._groupChannelHandlers.values()),ie=pe.next();!ie.done;ie=pe.next())(Lt=ie.value).onChannelChanged&&Lt.onChannelChanged(Ss)}catch(Fn){yt={error:Fn}}finally{try{ie&&!ie.done&&(Dt=pe.return)&&Dt.call(pe)}finally{if(yt)throw yt.error}}return[2]})})}),ze(function(){return N(Dn,void 0,void 0,function(){return T(this,function(pe){return this._groupChannelHandlers.forEach(function(ie){ie.onPinnedMessageUpdated&&ie.onPinnedMessageUpdated(Ss)}),[2]})})})),[3,85];case 85:return[3,87];case 86:switch((Cf=t.as(T4).event).category){case Lp.USER_BLOCK:Sf=E0.getDataAsUserBlockEvent(this._iid,Cf),$d=Sf.blocker,Vd=Sf.blockee,this._groupChannelCache.block($d.userId,Vd.userId);break;case Lp.USER_UNBLOCK:Tf=E0.getDataAsUserBlockEvent(this._iid,Cf),$d=Tf.blocker,Vd=Tf.blockee,this._groupChannelCache.unblock($d.userId,Vd.userId)}return[3,87];case 87:return[3,89];case 88:if(ur=It.sent(),Vi(ur))throw ur;return[3,89];case 89:return[2]}})})},n.prototype._markAsLeave=function(t){var r,i=this,a=(r=this._leftChannels.get(t.url))!==null&&r!==void 0?r:{channel:t,ref:0};a.ref++,this._leftChannels.set(t.url,a),setTimeout(function(){a.ref--,a.ref===0&&i._leftChannels.delete(t.url)},1e4)},n.prototype.addHandler=function(t,r){this._groupChannelHandlers.set(t,r)},n.prototype.removeHandler=function(t){this._groupChannelHandlers.delete(t)},n.prototype.clearHandler=function(){this._groupChannelHandlers.clear()},n.prototype.subscribeChannelEvent=function(t,r){this._groupChannelBroadcast.subscribe(t,r)},n.prototype.unsubscribeChannelEvent=function(t){this._groupChannelBroadcast.unsubscribe(t)},n.prototype._updateJoinedMemberCount=function(t){t.joinedMemberCount=t.members.filter(function(r){return r.state===Er.JOINED}).length},n.prototype.getChannel=function(t,r){return r===void 0&&(r=!1),N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:me(Y("string",t)).throw(Q.invalidParameters),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.getChannelFromCache(t)];case 2:return(i=a.sent())?[2,i]:[3,4];case 3:return a.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(t,r)];case 5:return[2,a.sent()]}})})},n.prototype.getChannelWithoutCache=function(t,r,i){return r===void 0&&(r=!1),i===void 0&&(i=!0),N(this,void 0,void 0,function(){var a,s,o,l,u,c,h,f,p,_,g,C,E,y=this;return T(this,function(S){switch(S.label){case 0:return me(Y("string",t)).throw(Q.invalidParameters),a=q.of(this._iid).requestDeduplicator,s=new z1({channelUrl:t,isInternalCall:r}),[4,a.requestGetChannel(s.path,function(){return y._requestQueue.send(s)},s.params,i)];case 1:switch(o=S.sent(),l=o.as(j1).channel,u=l.unreadMessageCount,c=l.unreadMentionCount,l.myCountPreference){case as.UNREAD_MESSAGE_COUNT_ONLY:c=0;break;case as.UNREAD_MENTION_COUNT_ONLY:u=0;break;case as.OFF:u=0,c=0}l._updateUnreadCount(u,c),h=this._groupChannelCache.filterOffsetChanged([l]),S.label=2;case 2:S.trys.push([2,7,8,9]),f=ye(h),p=f.next(),S.label=3;case 3:return p.done?[3,6]:(_=p.value,[4,this._messageCache.removeUnderOffset(_.url,_.messageOffsetTimestamp)]);case 4:S.sent(),S.label=5;case 5:return p=f.next(),[3,3];case 6:return[3,9];case 7:return g=S.sent(),C={error:g},[3,9];case 8:try{p&&!p.done&&(E=f.return)&&E.call(f)}finally{if(C)throw C.error}return[7];case 9:return[4,this._groupChannelCache.upsert([l])];case 10:return[2,S.sent()[0]]}})})},n.prototype.refreshChannel=function(t,r,i,a){return r===void 0&&(r=!0),i===void 0&&(i=oe.REFRESH_CHANNEL),a===void 0&&(a=!1),N(this,void 0,void 0,function(){var s,o,l,u,c,h,f=this;return T(this,function(p){switch(p.label){case 0:return p.trys.push([0,5,,6]),s=q.of(this._iid).requestDeduplicator,o=new z1({channelUrl:t,isInternalCall:r,showLatestMessage:a}),[4,s.requestGetChannel(o.path,function(){return f._requestQueue.send(o)},o.params)];case 1:return l=p.sent(),(u=l.as(j1).channel).myMemberState!==Er.NONE?[3,2]:(this._dispatcher.dispatch(new vl({channelUrls:[u.url],context:{source:i}})),[3,4]);case 2:return[4,this.upsertChannelsToCache([u])];case 3:c=p.sent(),this._dispatcher.dispatch(new Vt({channels:c,context:{source:i}})),p.label=4;case 4:return[3,6];case 5:return(h=p.sent()).code!==Le.NON_AUTHORIZED&&h.code!==Le.NOT_FOUND_IN_DATABASE||this._dispatcher.dispatch(new vl({channelUrls:[t],context:{source:i}})),[3,6];case 6:return[2]}})})},n.prototype.getMyGroupChannels=function(t,r,i,a,s){return a===void 0&&(a=oe.REQUEST_CHANNEL),s===void 0&&(s=!1),N(this,void 0,void 0,function(){var o,l,u,c,h,f,p,_,g;return T(this,function(C){switch(C.label){case 0:return r.createdAfter&&(r.createdAfter=Math.floor(r.createdAfter/1e3)),r.createdBefore&&(r.createdBefore=Math.floor(r.createdBefore/1e3)),o=!1,s&&(l=q.of(this._iid),u=l.appInfo,(c=l.cacheContext)&&!c.localCacheEnabled&&(u!=null&&u.enabledChannelMemberShipHistory)&&(u!=null&&u.applicationAttributes.includes("left_user_view_support"))&&(o=!0)),h=new uY(z(z({},r),{userId:this._sdkState.userId,token:t,limit:i,includeLeftChannel:s&&o})),[4,this._requestQueue.send(h)];case 1:return f=C.sent(),p=f.as(cY),_=p.channels,g=p.token,this._dispatcher.dispatch(new Vt({channels:_,context:{source:a}})),[2,{channels:_,token:g}]}})})},n.prototype.getMyGroupChannelChangeLogs=function(t,r,i){return i===void 0&&(i=oe.REQUEST_CHANNEL_CHANGELOGS),N(this,void 0,void 0,function(){var a,s,o,l,u,c,h,f;return T(this,function(p){switch(p.label){case 0:return a=z(z({},b0),r),me((Y("string",t)||Y("number",t))&&V1(a)).throw(Q.invalidParameters),s=new oY($e({userId:this._sdkState.userId,ts:typeof t=="number"?t:null,token:typeof t=="string"?t:null,filter:a})),[4,this._requestQueue.send(s)];case 1:return o=p.sent(),l=o.as(lY),u=l.updatedChannels,c=l.deletedChannelUrls,h=l.hasMore,f=l.ts,u.length>0&&this._dispatcher.dispatch(new Vt({channels:u,context:{source:i},ts:f})),c.length>0&&this._dispatcher.dispatch(new vl({channelUrls:c,context:{source:i}})),[2,{updatedChannels:u,deletedChannelUrls:c,hasMore:h,token:l.token}]}})})},n.prototype.getGroupChannelCount=function(t){return N(this,void 0,void 0,function(){var r,i,a;return T(this,function(s){switch(s.label){case 0:return r=z(z({},x4),t),me(P4(r)).throw(Q.invalidParameters),i=new dY({userId:this._sdkState.userId,filter:r}),[4,this._requestQueue.send(i)];case 1:return a=s.sent(),[2,a.as(hY).groupChannelCount]}})})},n.prototype.getUnreadItemCount=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u,c,h,f,p,_,g,C,E,y;return T(this,function(S){switch(S.label){case 0:return r=z(z({},nY),t),me(function(I){return Ht(sr,I.keys)&&Ht("string",I.customTypeFilters,!0)&&Ht("string",I.customTypesFilter,!0)}(r)).throw(Q.invalidParameters),i=q.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new fY({userId:a.userId,filter:r}),[4,s.send(o)];case 1:return l=S.sent(),u=l.as(vY),c=u.groupChannelUnreadMentionCount,h=u.groupChannelUnreadMessageCount,f=u.groupChannelInvitationCount,p=u.superGroupChannelUnreadMentionCount,_=u.superGroupChannelUnreadMessageCount,g=u.superGroupChannelInvitationCount,C=u.nonSuperGroupChannelUnreadMentionCount,E=u.nonSuperGroupChannelUnreadMessageCount,y=u.nonSuperGroupChannelInvitationCount,[2,Ae({groupChannelUnreadMentionCount:c,groupChannelUnreadMessageCount:h,groupChannelInvitationCount:f,superGroupChannelUnreadMentionCount:p,superGroupChannelUnreadMessageCount:_,superGroupChannelInvitationCount:g,nonSuperGroupChannelUnreadMentionCount:C,nonSuperGroupChannelUnreadMessageCount:E,nonSuperGroupChannelInvitationCount:y})]}})})},n.prototype.getTotalUnreadChannelCount=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s;return T(this,function(o){switch(o.label){case 0:return t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new pY({userId:r.userId}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(mY).unreadCount]}})})},n.prototype.getTotalUnreadMessageCount=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:return r=z(z({},rY),t),me(iY(r)).throw(Q.invalidParameters),i=q.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new _Y({userId:a.userId,filter:r}),[4,s.send(o)];case 1:return l=u.sent(),[2,l.as(gY).unreadCount]}})})},n.prototype.getTotalScheduledMessageCount=function(t){return t===void 0&&(t={}),N(this,void 0,void 0,function(){var r,i,a,s;return T(this,function(o){switch(o.label){case 0:return r=z(z({},aY),t),me(function(l){return Y("string",l.channelUrl,!0)&&Ht(wu,l.scheduledStatus,!0)&&Bt(Mi,l.messageTypeFilter)}(r)).throw(Q.invalidParameters),i=q.of(this._iid).requestQueue,a=new EY(r),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(yY).count]}})})},n.prototype.getSubscribedTotalUnreadMessageCount=function(){var t=q.of(this._iid).subscribedUnreadMessageCount;return t.all>=0?t.all:0},n.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){var t=0,r=q.of(this._iid).subscribedUnreadMessageCount;return Object.keys(r.customTypes).forEach(function(i){t+=r.customTypes[i]}),t},n.prototype.getSubscribedCustomTypeUnreadMessageCount=function(t){var r;return(r=q.of(this._iid).subscribedUnreadMessageCount.customTypes[t])!==null&&r!==void 0?r:0},n.prototype.createChannel=function(t){return N(this,void 0,void 0,function(){var r,i,a,s;return T(this,function(o){switch(o.label){case 0:return r=z(z({},yg),t),me($1(r)).throw(Q.invalidParameters),r.isPublic||(r.accessCode=void 0),i=new CY(z({userId:this._sdkState.userId},r)),[4,this._requestQueue.send(i)];case 1:return a=o.sent(),s=a.as(SY).channel,[4,this.upsertChannelsToCache([s])];case 2:return o.sent(),[2,s]}})})},n.prototype.markAsReadAll=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return t=Date.now(),me(t-this._markAsReadAllLastSentAt>=1e3).throw(Q.markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=t,r=new bR({userId:this._sdkState.userId}),[4,this._requestQueue.send(r)];case 1:c.sent(),i=this._groupChannelCache.channels;try{for(a=ye(i),s=a.next();!s.done;s=a.next())(o=s.value)._updateUnreadMemberState(this._sdkState.userId,t),o._updateUnreadCount(0,0)}catch(h){l={error:h}}finally{try{s&&!s.done&&(u=a.return)&&u.call(a)}finally{if(l)throw l.error}}return i.length>0?[4,this.upsertChannelsToCache(i)]:[3,3];case 2:c.sent(),c.label=3;case 3:return[2]}})})},n.prototype.markAsReadWithChannelUrls=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u,c,h;return T(this,function(f){switch(f.label){case 0:return r=Date.now(),me(Ht("string",t)&&r-this._markAsReadAllLastSentAt>=1e3).throw(Q.markAsReadAllRateLimitExceeded),this._markAsReadAllLastSentAt=r,i=new bR({userId:this._sdkState.userId,channelUrls:t}),[4,this._requestQueue.send(i)];case 1:f.sent(),a=this._groupChannelCache.channels,s=[];try{for(o=ye(a),l=o.next();!l.done;l=o.next())u=l.value,t.includes(u.url)&&(u._updateUnreadMemberState(this._sdkState.userId,r),u._updateUnreadCount(0,0),s.push(u))}catch(p){c={error:p}}finally{try{l&&!l.done&&(h=o.return)&&h.call(o)}finally{if(c)throw c.error}}return s.length>0?[4,this.upsertChannelsToCache(s)]:[3,3];case 2:f.sent(),f.label=3;case 3:return[2]}})})},n.prototype.markAsDelivered=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,this.getChannel(t)];case 1:return[4,r.sent().markAsDelivered()];case 2:return r.sent(),[2]}})})},n.prototype.getMessageFromCache=function(t){var r;return N(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return[4,this._messageCache.get(t)];case 1:return[2,(r=i.sent())!==null&&r!==void 0?r:null]}})})},n.prototype.getExactlyMatchingMessagesForTokenFromCache=function(t,r,i,a){return N(this,void 0,void 0,function(){return T(this,function(s){switch(s.label){case 0:return[4,this._messageCache.fetch({channelUrl:t,token:r,filter:i,exactMatch:!0,isRestoreIndexedDB:a})];case 1:return[2,s.sent()]}})})},n.prototype.getMessagesFromCache=function(t,r,i,a,s,o,l){return s===void 0&&(s=h4),o===void 0&&(o=!0),l===void 0&&(l=!1),N(this,void 0,void 0,function(){return T(this,function(u){switch(u.label){case 0:return[4,this._messageCache.fetch({channelUrl:t,token:r,limit:s,filter:a,backward:i==="next",inclusive:o,isRestoreIndexedDB:l})];case 1:return[2,u.sent()]}})})},n.prototype.getPollMessagesFromCache=function(t,r,i,a){return N(this,void 0,void 0,function(){return T(this,function(s){switch(s.label){case 0:return[4,this._messageCache.fetch({channelUrl:t,token:r,limit:a,filter:i,backward:!1,isPollOnly:!0})];case 1:return[2,s.sent()]}})})},n.prototype.getCachedMessageCountBetween=function(t,r,i,a){return N(this,void 0,void 0,function(){return T(this,function(s){switch(s.label){case 0:return[4,this._messageCache.countBetween(t,r,new fo({top:i,bottom:a}))];case 1:return[2,s.sent()]}})})},n.prototype.getUnsentMessagesFromCache=function(t,r){return N(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return[4,this._unsentMessageCache.fetch({channelUrl:t,filter:r})];case 1:return[2,i.sent()]}})})},n.prototype.removeFailedMessageFromCache=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,this._unsentMessageCache.remove([t])];case 1:return r.sent(),[2]}})})},n}(A4),es=function(e,n){return n instanceof yr?e.findIndex(function(t){return t instanceof yr&&n.isIdentical(t)}):e.findIndex(function(t){return t.isIdentical(n)})},sv=function(e,n){return e.findIndex(function(t){return t instanceof Hi?t.messageId===n:t instanceof Cd?t.notificationId===n:void 0})},jb=function(e,n){if(e.length>0){for(var t=0,r=e.length-1,i=Math.floor((t+r)/2);t<r;){var a=e[i].createdAt-n.createdAt;if(a>0)r=i,i=Math.floor((t+r)/2);else{if(!(a<0))return i;t=i+1,i=Math.floor((t+r)/2)}}return e[i].createdAt>n.createdAt?i:i+1}return e.length},no={},qY=function(){function e(n){var t=n._iid,r=n.channel,i=n.includeParams,a=this;this.ref=0,this._iid=t,this._channel=r,this._includeParams=i;var s,o,l=q.of(this._iid),u=l.logger,c=l.sdkState,h=l.dispatcher;this._metadataKey=(s=c.userId,o=r.url,"sendbird:".concat(s,"@groupchannel/").concat(o,"/message/changelogs.meta"));var f=function(p,_){return"sendbird:".concat(p,"@groupchannel/").concat(_,"/message/changelogs")}(c.userId,this._channel.url);this._sync=new $l(f,function(){return N(a,void 0,void 0,function(){var p,_,g,C,E,y,S,I,w;return T(this,function(R){switch(R.label){case 0:return p={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:R.sent(),u.debug("message changelog sync from",(w=this._metadata)===null||w===void 0?void 0:w.token),R.label=2;case 2:return R.trys.push([2,5,,8]),[4,Wr.of(this._iid).getMessageChangelogs(this._channel.url,this._channel.channelType,this._metadata.token,z({replyType:Yr.ALL},this._includeParams),oe.SYNC_MESSAGE_CHANGELOGS)];case 3:return _=R.sent(),g=_.updatedMessages,C=_.deletedMessageIds,E=_.hasMore,y=_.token,S=_.forceUseNextToken,p.hasNext=E,p.nextToken=y,g.length>0||C.length>0?this._metadata&&(this._metadata.token=y):S&&this._metadata&&(this._metadata.token=y),u.debug("message changelog sync progress",p),[4,this.saveMetadata()];case 4:return R.sent(),[3,8];case 5:return I=R.sent(),u.debug("message changelog sync error",I),I instanceof Q&&I.isInvalidTokenError?[4,this.clearMetadata()]:[3,7];case 6:R.sent(),R.label=7;case 7:throw I;case 8:return[2,p]}})})}),this._connectionEventContext=h.on(function(p){p instanceof ja&&(p.stateType===gn.CONNECTED?a.resume():a.pause())})}return e.of=function(n,t,r){return no[n]||(no[n]={}),no[n][t.url]||(no[n][t.url]=new e({_iid:n,channel:t,includeParams:r})),no[n][t.url].ref++,no[n][t.url]},e.clear=function(n,t){no[n]&&no[n][t]&&(no[n][t].close(),delete no[n])},e.prototype.loadMetadata=function(){return N(this,void 0,void 0,function(){var n,t,r,i;return T(this,function(a){switch(a.label){case 0:return this._metadata?[3,2]:(n=q.of(this._iid),t=n.cacheContext,r=n.firstConnectedAt,[4,t.preference.get(this._metadataKey)]);case 1:i=a.sent(),this._metadata={token:i?i.token:r},a.label=2;case 2:return[2,this._metadata]}})})},e.prototype.saveMetadata=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this._metadata?[4,q.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}})})},e.prototype.clearMetadata=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,q.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}})})},e.prototype.resume=function(){var n=q.of(this._iid),t=n.logger;n.sessionManager.session.hasSession&&(t.debug("message changelog sync resume()"),this._sync.start(0))},e.prototype.pause=function(){q.of(this._iid).logger.debug("message changelog sync pause()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete no[this._iid][this._channel.url])},e}(),Ac={},KY=function(){function e(n){var t=n._iid,r=n.channel,i=n.hasPollMessage,a=this;this.ref=0,this._iid=t,this._channel=r;var s,o,l=q.of(this._iid),u=l.logger,c=l.sdkState,h=l.dispatcher;this._metadataKey=(s=c.userId,o=r.url,"sendbird:".concat(s,"@groupchannel/").concat(o,"/poll/changelogs.meta"));var f=function(p,_){return"sendbird:".concat(p,"@groupchannel/").concat(_,"/poll/changelogs")}(c.userId,this._channel.url);this._sync=new $l(f,function(){return N(a,void 0,void 0,function(){var p,_,g,C,E,y,S,I;return T(this,function(w){switch(w.label){case 0:return p={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:return w.sent(),u.debug("poll changelog sync from",(I=this._metadata)===null||I===void 0?void 0:I.token),(_=!this._metadata||!this._metadata.token)?[4,i()]:[3,3];case 2:_=!w.sent(),w.label=3;case 3:if(_)return[2,{hasNext:!1,nextToken:0}];this._metadata||(g=q.of(this._iid).firstConnectedAt,this._metadata={token:g}),w.label=4;case 4:return w.trys.push([4,7,,10]),[4,c0.of(this._iid).getPollChangeLogs(this._channel.url,this._channel.channelType,this._metadata.token)];case 5:return C=w.sent(),E=C.hasMore,y=C.token,p.hasNext=E,p.nextToken=y,this._metadata.token=y,u.debug("poll changelog sync progress",p),[4,this.saveMetadata()];case 6:return w.sent(),[3,10];case 7:return S=w.sent(),u.debug("poll changelog sync error",S),S instanceof Q&&S.isInvalidTokenError?[4,this.clearMetadata()]:[3,9];case 8:w.sent(),w.label=9;case 9:throw S;case 10:return[2,p]}})})}),this._connectionEventContext=h.on(function(p){p instanceof ja&&(p.stateType===gn.CONNECTED?a.resume():a.pause())})}return e.of=function(n,t,r){return Ac[n]||(Ac[n]={}),Ac[n][t.url]||(Ac[n][t.url]=new e({_iid:n,channel:t,hasPollMessage:r})),Ac[n][t.url].ref++,Ac[n][t.url]},e.prototype.loadMetadata=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,q.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:n=t.sent(),this._metadata=n?{token:n.token}:void 0,t.label=2;case 2:return[2]}})})},e.prototype.saveMetadata=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this._metadata?[4,q.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:n.sent(),n.label=2;case 2:return[2]}})})},e.prototype.clearMetadata=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,q.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}})})},e.prototype.resume=function(){q.of(this._iid).logger.debug("poll changelog sync resume()"),this._sync.start(0)},e.prototype.pause=function(){q.of(this._iid).logger.debug("poll changelog sync pause()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete Ac[this._iid][this._channel.url])},e}(),WY=function(e){function n(t){var r,i,a,s,o,l,u,c,h,f,p=this;return(p=e.call(this)||this).method=fe.GET,p.path="".concat(mn(t.channelType),"/").concat(t.channelUrl,"/messages_gap"),p.params=Ae({prev_start_ts:t.prevStart,prev_end_ts:t.prevEnd,prev_cache_count:t.prevCount,next_start_ts:t.nextStart,next_end_ts:t.nextEnd,next_cache_count:t.nextCount,huge_gap_threshold:(r=t.threshold)!==null&&r!==void 0?r:null,reverse:!0,custom_types:(i=t.customTypes)!==null&&i!==void 0?i:["*"],message_type:(a=t.messageType)!==null&&a!==void 0?a:null,include_reply_type:(s=t.replyType)!==null&&s!==void 0?s:Yr.NONE,include_reactions_summary:(o=t.includeReactions)===null||o===void 0||o,include_meta_array:(l=t.includeMetaArray)===null||l===void 0||l,include_thread_info:(u=t.includeThreadInfo)===null||u===void 0||u,include_parent_message_info:(c=t.includeParentMessageInfo)===null||c===void 0||c,with_sorted_meta_array:(h=t.includeMetaArray)===null||h===void 0||h,show_subchannel_messages_only:(f=t.showSubchannelMessagesOnly)!==null&&f!==void 0&&f,include_poll_details:!0,checking_continuous_messages:t.checkingContinuousMessages}),p}return k(n,e),n}(ve),YY=function(e){function n(t,r){var i,a,s,o,l,u,c=this;return(c=e.call(this,t,r)||this).isHugeGap=r.is_huge_gap,c.prevMessages=((i=r.prev_messages)!==null&&i!==void 0?i:[]).map(function(h){return Di(t,h)}),c.prevHasMore=(a=r.prev_hasmore)!==null&&a!==void 0&&a,c.isContinuousPrevMessages=(s=r.is_continuous_prev_messages)!==null&&s!==void 0&&s,c.nextMessages=((o=r.next_messages)!==null&&o!==void 0?o:[]).map(function(h){return Di(t,h)}),c.nextHasmore=(l=r.next_hasmore)!==null&&l!==void 0&&l,c.isContinuousNextMessages=(u=r.is_continuous_next_messages)!==null&&u!==void 0&&u,c}return k(n,e),n}(_e),CR={includeMetaArray:!0,includeReactions:!0,includeThreadInfo:!0,includeParentMessageInfo:!0};(function(e){e.CACHE_AND_REPLACE_BY_API="cache_and_replace_by_api"})(K1||(K1={}));var ap,sp,op,QY=function(){function e(){this._onCacheResult=vt,this._onApiResult=vt}return e.prototype._invokeResponse=function(n,t,r){var i=this;ze(function(){return N(i,void 0,void 0,function(){return T(this,function(a){switch(n){case"local":this._onCacheResult(t,r);break;case"remote":this._onApiResult(t,r)}return[2]})})})},e.prototype.onCacheResult=function(n){return this._onCacheResult=n,this},e.prototype.onApiResult=function(n){return this._onApiResult=n,this},e}(),XY=function(){function e(n,t){var r=t.filter,i=t.startingPoint,a=t.limit,s=t.prevResultLimit,o=t.nextResultLimit,l=t.channel,u=t.channelManager,c=t.disableBackgroundSync,h=c!==void 0&&c,f=this;this._messages=[],this._unsentMessages=[],this._isLoadingPrevious=!1,this._isLoadingNext=!1,this._iid=n,this._key="mc-".concat(_s()),this._isDisposed=!1,this.filter=r??new Wu,this._channel=l,this._syncRange=new fo({}),this._hasPrevious=!0,this._hasNext=!0,this._startingPoint=typeof i=="number"&&Number.isFinite(i)?i:Number.MAX_SAFE_INTEGER,this._limit=a||h4,this._prevResultLimit=s??Math.floor(this._limit/2),this._nextResultLimit=o??Math.floor(this._limit/2),this._channelManager=u;var p=q.of(this._iid).statManager;this._channelManager.subscribeChannelEvent(this._key,{onUpdate:function(y,S){var I=S.source,w=y.findIndex(function(R){return R.isIdentical(f.channel)});w>=0&&(f._replaceChannelOfCollection(y[w]),f.channel._runIfHandleableWithGroupChannel(function(R){switch(I){case oe.EVENT_CHANNEL_UPDATED:for(var A=!1,U=0;U<f._messages.length;U++)if(f._messages[U].createdAt>=R.messageOffsetTimestamp){A=!0;var O=U;if(O>0){var B=f._messages.splice(0,O);f._removeMessagesFromView(B.map(function(G){return f.keyOf(G)}),oe.EVENT_MESSAGE_OFFSET_UPDATED)}break}!A&&f._messages.length>0&&f._removeMessagesFromView(f._messages.map(function(G){return f.keyOf(G)}),oe.EVENT_MESSAGE_OFFSET_UPDATED);break;case oe.EVENT_CHANNEL_UNMUTED:var F=q.of(f._iid).sdkState,P=S.user;F.userId===P.userId&&f._clearCheckMyMutedTimer();break;case oe.EVENT_CHANNEL_MUTED:F=q.of(f._iid).sdkState,P=S.user,F.userId===P.userId&&R._myMutedRemainingTime!==-1&&f._startCheckMyMutedTimer(R._myMutedRemainingTime);break;case oe.EVENT_CHANNEL_LEFT:R.isPublic&&f._clearCheckMyMutedTimer()}ze(function(){return N(f,void 0,void 0,function(){var G;return T(this,function(L){return bg(I)&&(!((G=this._handler)===null||G===void 0)&&G.onChannelUpdated)&&this._handler.onChannelUpdated(S,this.channel),[2]})})})}),f._postprocessChannelUpdateEvent(y[w],I))},onRemove:function(y,S){var I=y.indexOf(f.channel.url);I>=0&&f._channel._runIfHandleableWithGroupChannel(function(w){w.myMemberState=Er.NONE,f._clearCheckMyMutedTimer(),ze(function(){return N(f,void 0,void 0,function(){var R;return T(this,function(A){return!((R=this._handler)===null||R===void 0)&&R.onChannelDeleted&&this._handler.onChannelDeleted(S,this.channel.url),[2]})})}),f._postprocessChannelRemoveEvent(y[I])})}}),this._channelManager.subscribeMessageEvent(this._key,{onUpdate:function(y,S){var I,w,R=[],A=[];try{for(var U=ye(y),O=U.next();!O.done;O=U.next()){var B=O.value;B.channelUrl===f._channel.url&&(f.filter.match(B)?R.push(B):A.push(f.keyOf(B)))}}catch(F){I={error:F}}finally{try{O&&!O.done&&(w=U.return)&&w.call(U)}finally{if(I)throw I.error}}if(gl(S)){if(R.length>0)switch(S){case oe.LOCAL_MESSAGE_CANCELED:case oe.LOCAL_MESSAGE_RESEND_STARTED:case oe.EVENT_MESSAGE_SENT_FAILED:case oe.EVENT_MESSAGE_SENT_SUCCESS:case oe.EVENT_MESSAGE_UPDATED:case oe.EVENT_MESSAGE_THREADINFO_UPDATED:case oe.EVENT_MESSAGE_REACTION_UPDATED:case oe.EVENT_MESSAGE_FEEDBACK_ADDED:case oe.EVENT_MESSAGE_FEEDBACK_UPDATED:case oe.EVENT_MESSAGE_FEEDBACK_DELETED:case oe.SYNC_MESSAGE_CHANGELOGS:f._updateMessagesToView(R,S);break;case oe.EVENT_MESSAGE_SENT_PENDING:f._addMessagesToView(R,S);break;case oe.EVENT_MESSAGE_RECEIVED:f.hasNext||f._addMessagesToView(R,S);break;case oe.SYNC_MESSAGE_FILL:f._addMessagesToView(R,S)}A.length>0&&f._removeMessagesFromView(A,S)}f._postprocessMessageUpdateEvent(y,S)},onRemove:function(y,S){f._removeMessagesFromView(y,S),f._postprocessMessageRemoveEvent(y)},onRemoveUnsent:function(y,S){f._removeUnsentMessageFromView(y,S)},onPollChangeLogUpdate:function(y,S){f._updatePollsToView(y,S)},onPollUpdate:function(y,S){f._applyPollUpdateEventToView(y,S)},onPollVote:function(y,S){f._applyPollVoteEventToView(y,S)},onReactionUpdate:function(y,S){f._applyReactionEventToView(y,S)},onThreadInfoUpdate:function(y,S){f._applyThreadInfoEventToView(y,S)},onDeletedByRetentionPolicy:function(y,S,I){S===f.channel.url&&f._messageRetention(y,I)}});var _=q.of(this._iid),g=_.cacheContext,C=_.dispatcher,E=_.messageBackgroundSyncThrottleController;this._channel._updateMessageCollectionLastAccessedAt(),C.dispatch(new Vt({channels:[this._channel],context:{source:oe.CHANNEL_LASTACCESSEDAT_UPDATED}})),this._backgroundSync=zY.of(this._iid,this._channel),!h&&this._shouldStartBackgroundSync()&&this._backgroundSync.resume(this._startingPoint),this._changelogSync=qY.of(this._iid,this._channel,this.changelogIncludeParams),this._changelogSync.resume(),this._pollChangelogSync=KY.of(this._iid,this._channel,this._hasPollMessage.bind(this)),this._pollChangelogSync.resume(),this._prevFill=new $l(this._key,function(y){return N(f,void 0,void 0,function(){var S=this;return T(this,function(I){switch(I.label){case 0:return[4,E.run("message-fill-sync-".concat(l.url,"-prev"),function(){return N(S,void 0,void 0,function(){var w,R,A,U,O,B,F;return T(this,function(P){switch(P.label){case 0:return[4,this._getRemoteMessages(y,{prevLimit:this._prevResultLimit,source:oe.SYNC_MESSAGE_FILL,checkingContinuousMessages:g.localCacheEnabled,sdkSource:Us.INTERNAL_FILL_GAP})];case 1:return w=P.sent(),R=w.messages,A=w.isContinuousMessages,R.length>0?(U=Math.min.apply(Math,it([],Ge(R.map(function(G){return G.createdAt})),!1)),this._syncRange.extends(U),A&&((O=this._backgroundSync)===null||O===void 0||O.range.extends(U)),[2,{hasNext:R.length>=this._prevResultLimit&&this.viewTop<U,nextToken:this._syncRange.top}]):(g.localCacheEnabled&&p.put(new Kn({type:kn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(F=(B=g.localCacheConfig)===null||B===void 0?void 0:B.maxSize)!==null&&F!==void 0?F:0,use_local_cache:g.localCacheEnabled,starting_point:0,message_init_policy:""}})),[2,{hasNext:!1,nextToken:0}])}})})})];case 1:return[2,I.sent()]}})})}),this._nextFill=new $l(this._key,function(y){return N(f,void 0,void 0,function(){var S=this;return T(this,function(I){switch(I.label){case 0:return[4,E.run("message-fill-sync-".concat(l.url,"-next"),function(){return N(S,void 0,void 0,function(){var w,R,A,U,O,B,F,P;return T(this,function(G){switch(G.label){case 0:return[4,this._getRemoteMessages(y,{nextLimit:this._nextResultLimit,source:oe.SYNC_MESSAGE_FILL,checkingHasNext:!0,checkingContinuousMessages:g.localCacheEnabled,sdkSource:Us.INTERNAL_FILL_GAP})];case 1:return w=G.sent(),R=w.messages,A=w.isContinuousMessages,U=w.hasNext,R.length>0?(O=Math.max.apply(Math,it([],Ge(R.map(function(L){return L.createdAt})),!1)),this._syncRange.extends(O),A&&((B=this._backgroundSync)===null||B===void 0||B.range.extends(O)),[2,{hasNext:U,nextToken:this._syncRange.bottom}]):(g.localCacheEnabled&&p.put(new Kn({type:kn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(P=(F=g.localCacheConfig)===null||F===void 0?void 0:F.maxSize)!==null&&P!==void 0?P:0,use_local_cache:g.localCacheEnabled,starting_point:0,message_init_policy:""}})),[2,{hasNext:!1,nextToken:0}])}})})})];case 1:return[2,I.sent()]}})})}),this._connectionEventContext=C.on(function(y){if(y instanceof ja)switch(y.stateType){case gn.CONNECTED:or(function(){return N(f,void 0,void 0,function(){return T(this,function(S){return this._activate(),[2]})})});break;case gn.LOGOUT:f.dispose();break;default:f._clearCheckMyMutedTimer(),f._prevFill.stop(),f._nextFill.stop()}})}return e.prototype.keyOf=function(n){return 0},Object.defineProperty(e.prototype,"changelogIncludeParams",{get:function(){return{includeReactions:!0,includeThreadInfo:!0,includeMetaArray:!0,includeParentMessageInfo:!0}},enumerable:!1,configurable:!0}),e.prototype._postprocessChannelUpdateEvent=function(n,t){},e.prototype._postprocessChannelRemoveEvent=function(n){},e.prototype._postprocessMessageUpdateEvent=function(n,t){},e.prototype._postprocessMessageRemoveEvent=function(n){},Object.defineProperty(e.prototype,"channel",{get:function(){return this._channel},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"succeededMessages",{get:function(){return it([],Ge(this._messages),!1)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"failedMessages",{get:function(){return this._unsentMessages.filter(function(n){return n.sendingStatus===sn.FAILED})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pendingMessages",{get:function(){return this._unsentMessages.filter(function(n){return n.sendingStatus===sn.PENDING})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasPrevious",{get:function(){return this._hasPrevious},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasNext",{get:function(){return this._hasNext},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewTop",{get:function(){return Math.min.apply(Math,it(it([],Ge(this._messages.map(function(n){return n.createdAt})),!1),[Number.MAX_SAFE_INTEGER],!1))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"viewBottom",{get:function(){return Math.max.apply(Math,it(it([],Ge(this._messages.map(function(n){return n.createdAt})),!1),[0],!1))},enumerable:!1,configurable:!0}),e.prototype._activate=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return q.of(this._iid).logger.debug("check huge gap"),this._checkHugeGap(),[4,this._refreshChannel(oe.SYNC_CHANNEL_CHANGELOGS)];case 1:return n.sent(),[2]}})})},e.prototype._replaceChannelOfCollection=function(n){this._channel.isGroupChannel()?this._channel=n:this._channel.isFeedChannel()&&(this._channel._groupChannel=n._groupChannel)},e.prototype._shouldStartBackgroundSync=function(){var n=q.of(this._iid).cacheContext;return this.channel.isGroupChannel()?n.localCacheEnabled&&!this.channel.isSuper:n.localCacheEnabled},e.prototype._setBaseMessageCollectionHandler=function(n){this._handler=n},e.prototype._filterUnderOffsetMessage=function(n){var t;return this._channel._runIfHandleableWithGroupChannel(function(r){t=n.filter(function(i){return i.createdAt>=r.messageOffsetTimestamp})}),t!==void 0?t:n},e.prototype._updateChildMessagesInView=function(n){var t=[];return this._messages.forEach(function(r){r instanceof Hi&&r.parentMessageId===n.messageId&&r.applyParentMessage(n)&&t.push(r)}),t},e.prototype._updatePollsToView=function(n,t){var r,i,a=this,s=[];try{for(var o=ye(n),l=o.next();!l.done;l=o.next()){var u=l.value,c=sv(this._messages,u.messageId);if(c>=0){var h=this._messages[c];h.isUserMessage()&&h.applyPoll(u),s.push(h)}}}catch(f){r={error:f}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}return s.length>0&&gl(t)&&ze(function(){return N(a,void 0,void 0,function(){var f,p,_;return T(this,function(g){return f={source:t},s.length>0&&((_=(p=this._handler).onMessagesUpdated)===null||_===void 0||_.call(p,f,this.channel,s)),[2]})})}),s},e.prototype._applyPollUpdateEventToView=function(n,t){var r=this,i=sv(this._messages,n.messageId);if(i>=0){var a=this._messages[i];a&&a.isUserMessage()&&a.poll&&a.poll.applyPollUpdateEvent(n)&&gl(t)&&ze(function(){return N(r,void 0,void 0,function(){var s,o,l;return T(this,function(u){return s={source:t},(l=(o=this._handler)===null||o===void 0?void 0:o.onMessagesUpdated)===null||l===void 0||l.call(o,s,this.channel,[a]),[2]})})})}},e.prototype._applyPollVoteEventToView=function(n,t){var r=this,i=sv(this._messages,n.messageId);if(i>=0){var a=this._messages[i];a&&a.isUserMessage()&&a.poll&&a.poll.applyPollVoteEvent(n)&&gl(t)&&ze(function(){return N(r,void 0,void 0,function(){var s,o,l;return T(this,function(u){return s={source:t},(l=(o=this._handler)===null||o===void 0?void 0:o.onMessagesUpdated)===null||l===void 0||l.call(o,s,this.channel,[a]),[2]})})})}},e.prototype._applyReactionEventToView=function(n,t){var r=this,i=sv(this._messages,n.messageId);if(i>=0){var a=this._messages[i];a&&(a.isUserMessage()||a.isFileMessage()||a.isMultipleFilesMessage())&&gl(t)&&(a.applyReactionEvent(n),ze(function(){return N(r,void 0,void 0,function(){var s,o,l;return T(this,function(u){return s={source:t},(l=(o=this._handler)===null||o===void 0?void 0:o.onMessagesUpdated)===null||l===void 0||l.call(o,s,this.channel,[a]),[2]})})}))}},e.prototype._applyThreadInfoEventToView=function(n,t){var r=this,i=sv(this._messages,n.targetMessageId);if(i>=0){var a=this._messages[i];a&&(a.isUserMessage()||a.isFileMessage()||a.isMultipleFilesMessage())&&gl(t)&&(a.applyThreadInfoUpdateEvent(n),ze(function(){return N(r,void 0,void 0,function(){var s,o,l;return T(this,function(u){return s={source:t},(l=(o=this._handler)===null||o===void 0?void 0:o.onMessagesUpdated)===null||l===void 0||l.call(o,s,this.channel,[a]),[2]})})}))}},e.prototype._removeMessagesFromView=function(n,t){var r,i,a=this,s=[],o=[],l=function(f){var p=u._messages.findIndex(function(g){return a.keyOf(g)===f});if(p>=0){var _=u._messages[p];s.push(u.keyOf(_)),o.push(_),u._messages.splice(p,1)}},u=this;try{for(var c=ye(n),h=c.next();!h.done;h=c.next())l(h.value)}catch(f){r={error:f}}finally{try{h&&!h.done&&(i=c.return)&&i.call(c)}finally{if(r)throw r.error}}return gl(t)&&o.length>0&&ze(function(){return N(a,void 0,void 0,function(){var f,p,_;return T(this,function(g){return f={source:t},(_=(p=this._handler)===null||p===void 0?void 0:p.onMessagesDeleted)===null||_===void 0||_.call(p,f,this.channel,s,o),[2]})})}),s},e.prototype._messageRetention=function(n,t){var r,i,a=[];try{for(var s=ye(this._messages),o=s.next();!o.done;o=s.next()){var l=o.value;l.createdAt<=n&&a.push(this.keyOf(l))}}catch(u){r={error:u}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}a.length>0&&this._removeMessagesFromView(a,t)},e.prototype._removeUnsentMessageFromView=function(n,t){var r=this._unsentMessages.findIndex(function(i){return i.reqId===n});r>=0&&this._unsentMessages.splice(r,1)},e.prototype._getLocalMessages=function(n,t){var r=t.prevLimit,i=r===void 0?0:r,a=t.nextLimit,s=a===void 0?0:a,o=t.inclusive,l=o===void 0||o,u=t.isRestoreIndexedDB,c=u!==void 0&&u;return N(this,void 0,void 0,function(){var h,f,p,_,g;return T(this,function(C){switch(C.label){case 0:return h=[],l?[4,this._channelManager.getExactlyMatchingMessagesForTokenFromCache(this._channel.url,n,this.filter,c)]:[3,2];case 1:h=C.sent(),C.label=2;case 2:return i>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,n,"prev",this.filter,i,!1,c)]:[3,4];case 3:return p=C.sent(),[3,5];case 4:p=[],C.label=5;case 5:return f=p,s>0?[4,this._channelManager.getMessagesFromCache(this._channel.url,n,"next",this.filter,s,!1,c)]:[3,7];case 6:return g=C.sent(),[3,8];case 7:g=[],C.label=8;case 8:return _=g,[2,{messages:it(it(it([],Ge(h),!1),Ge(f),!1),Ge(_),!1).sort(function(E,y){return y.createdAt-E.createdAt}),prevMessagesCount:f.length,nextMessagesCount:_.length}]}})})},e.prototype._getRemoteMessages=function(n,t){var r=t.prevLimit,i=r===void 0?0:r,a=t.nextLimit,s=a===void 0?0:a,o=t.source,l=o===void 0?oe.REQUEST_MESSAGE:o,u=t.reverse,c=u!==void 0&&u,h=t.checkingHasNext,f=h!==void 0&&h,p=t.checkingContinuousMessages,_=p!==void 0&&p,g=t.sdkSource;return N(this,void 0,void 0,function(){var C,E;return T(this,function(y){switch(y.label){case 0:return C=Wr.of(this._iid),i>0||s>0?[4,C._getMessagesByTimestampForCollection(this._channel.url,this._channel.channelType,n,$e(z(z(z({},this.filter),CR),{isInclusive:!0,reverse:c,prevResultSize:i,nextResultSize:s})),l,f,_,g)]:[3,2];case 1:return E=y.sent(),[3,3];case 2:E={messages:[],isContinuousMessages:!1},y.label=3;case 3:return[2,E]}})})},e.prototype._checkHugeGap=function(){var n,t,r,i,a;return N(this,void 0,void 0,function(){var s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w,R,A,U,O,B,F,P,G,L,$=this;return T(this,function(j){switch(j.label){case 0:return s=q.of(this._iid),o=s.dispatcher,l=s.requestQueue,u=s.cacheContext,c=s.statManager,h=s.logger,this._messages.length>0?(f=this._syncRange.top,p=this.viewTop,_=this._syncRange.bottom,g=this.hasNext?this.viewBottom:Number.MAX_SAFE_INTEGER,[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,p,f)]):[3,8];case 1:return C=j.sent(),[4,this._channelManager.getCachedMessageCountBetween(this._channel.url,this.filter,_,g)];case 2:E=j.sent(),j.label=3;case 3:return j.trys.push([3,5,6,7]),[4,sE(function(){return N($,void 0,void 0,function(){var X,K,Z,te,ne,le,Te,Ze,ce,ge,Qe,xe,tt,ht,bt,Rt,Ut,lt=this;return T(this,function(kt){switch(kt.label){case 0:return X=new WY(z(z({channelUrl:this._channel.url,channelType:this._channel.channelType,prevStart:p,prevEnd:f,prevCount:C,nextStart:_,nextEnd:g,nextCount:E,checkingContinuousMessages:u.localCacheEnabled},this.filter),CR)),[4,l.send(X)];case 1:return K=kt.sent(),Z=K.as(YY),te=Z.isHugeGap,ne=Z.prevMessages,le=ne===void 0?[]:ne,Te=Z.prevHasMore,Ze=Z.isContinuousPrevMessages,ce=Z.nextMessages,ge=ce===void 0?[]:ce,Qe=Z.nextHasmore,xe=Z.isContinuousNextMessages,te?ze(function(){return N(lt,void 0,void 0,function(){var $t;return T(this,function(mt){return!(($t=this._handler)===null||$t===void 0)&&$t.onHugeGapDetected&&this._handler.onHugeGapDetected(),[2]})})}):(tt=this.viewTop,ht=this.viewBottom,bt=Math.min.apply(Math,it([Number.MAX_SAFE_INTEGER,tt],Ge(le.map(function($t){return $t.createdAt})),!1)),Rt=Math.max.apply(Math,it([0,ht],Ge(ge.map(function($t){return $t.createdAt})),!1)),o.dispatch(new er({messages:le,source:oe.SYNC_MESSAGE_FILL})),o.dispatch(new er({messages:ge,source:oe.SYNC_MESSAGE_FILL})),this._syncRange.extends(bt,Rt),(Ze||xe)&&((Ut=this._backgroundSync)===null||Ut===void 0||Ut.range.extends(bt,Rt)),Te&&this._prevFill.start(bt),Qe&&this._nextFill.start(Rt)),[2]}})})},1)];case 4:return j.sent(),[3,7];case 5:return y=j.sent(),h.debug("Failed HugeGap Check ",y),[3,7];case 6:return u.localCacheEnabled&&c.put(new Kn({type:kn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(t=(n=u.localCacheConfig)===null||n===void 0?void 0:n.maxSize)!==null&&t!==void 0?t:0,use_local_cache:u.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 7:return[3,13];case 8:S=Date.now(),j.label=9;case 9:return j.trys.push([9,11,12,13]),[4,this._getRemoteMessages(S,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit,source:oe.SYNC_MESSAGE_FILL,checkingHasNext:!0,checkingContinuousMessages:u.localCacheEnabled,sdkSource:Us.INTERNAL_FILL_GAP})];case 10:if(I=j.sent(),w=I.messages,R=I.isContinuousMessages,A=I.hasNext,w.length>0){for(U=w.map(function(X){return X.createdAt}),O=0,B=0,F=0;F<U.length;F++)(P=U[F])<=S?O++:P>=S&&B++;this._hasPrevious=O>=this._prevResultLimit,this._hasNext=A??B>=this._nextResultLimit,(L=this._syncRange).extends.apply(L,it([],Ge(U),!1)),R&&((r=this._backgroundSync)===null||r===void 0||r.range.extends(this._syncRange.top,this._syncRange.bottom)),this._addMessagesToView(w,oe.SYNC_MESSAGE_FILL)}else this._hasPrevious=!1,this._hasNext=!1;return[3,13];case 11:return(G=j.sent())instanceof Q&&G.code===Le.NOT_FOUND_IN_DATABASE&&(this._hasPrevious=!1,this._hasNext=!1),[3,13];case 12:return u.localCacheEnabled&&c.put(new Kn({type:kn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,measured_on:"gap_check",event:"cache_fetch",max_db_size:(a=(i=u.localCacheConfig)===null||i===void 0?void 0:i.maxSize)!==null&&a!==void 0?a:0,use_local_cache:u.localCacheEnabled,starting_point:0,message_init_policy:""}})),[7];case 13:return[2]}})})},e.prototype._loadUnsentMessages=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){switch(t.label){case 0:return n=this,[4,this._channelManager.getUnsentMessagesFromCache(this._channel.url,this.filter)];case 1:return n._unsentMessages=t.sent(),[2]}})})},e.prototype._hasPollMessage=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,this._channelManager.getPollMessagesFromCache(this._channel.url,Date.now()+6e5,this.filter,1)];case 1:return n.sent().length>0?[2,!0]:[2,!1]}})})},e.prototype._refreshChannel=function(n,t){return t===void 0&&(t=!1),N(this,void 0,void 0,function(){var r,i,a=this;return T(this,function(s){switch(s.label){case 0:r=q.of(this._iid).logger,s.label=1;case 1:return s.trys.push([1,3,,4]),[4,this._channelManager.refreshChannel(this.channel.url,!0,n,t)];case 2:return s.sent(),this.channel._runIfHandleableWithGroupChannel(function(o){o.myMutedState===xs.MUTED&&or(function(){return N(a,void 0,void 0,function(){var l;return T(this,function(u){switch(u.label){case 0:return[4,this.channel.getMyMutedInfo()];case 1:return(l=u.sent()).isMuted&&l.remainingDuration!==-1&&this._startCheckMyMutedTimer(l.remainingDuration),[2]}})})})}),[3,4];case 3:return i=s.sent(),r.warn("Failed to refresh channel",i),[3,4];case 4:return[2]}})})},e.prototype._startCheckMyMutedTimer=function(n){var t=this;this._clearCheckMyMutedTimer(),this._checkMyMutedStateTimer=setTimeout(function(){return N(t,void 0,void 0,function(){var r,i,a,s=this;return T(this,function(o){switch(o.label){case 0:this._checkMyMutedStateTimer=void 0,r=!0,o.label=1;case 1:return o.trys.push([1,3,4,5]),[4,this._channel.getMyMutedInfo()];case 2:return i=o.sent(),r=!i.isMuted,[3,5];case 3:return o.sent(),r=!0,[3,5];case 4:return r&&(a=q.of(this._iid).sessionManager,this.channel._runIfHandleableWithGroupChannel(function(l){var u,c;l.myMutedState=xs.UNMUTED;var h={source:oe.EVENT_CHANNEL_UNMUTED,user:a.currentUser};(c=(u=s._handler)===null||u===void 0?void 0:u.onChannelUpdated)===null||c===void 0||c.call(u,h,s.channel)})),[7];case 5:return[2]}})})},n+1e3)},e.prototype._clearCheckMyMutedTimer=function(){this._checkMyMutedStateTimer&&(clearTimeout(this._checkMyMutedStateTimer),this._checkMyMutedStateTimer=void 0)},e.prototype._setHasNextAndHasPrevious=function(n,t){for(var r=n.map(function(l){return l.createdAt}),i=0,a=0,s=0;s<r.length;s++){var o=r[s];o<this._startingPoint?i++:o>this._startingPoint&&a++}this._hasPrevious=i>=this._prevResultLimit,this._hasNext=t??a>=this._nextResultLimit},e.prototype.initialize=function(n){var t=this,r=new QY;this._messages=[],this._unsentMessages=[],this._syncRange=new fo({}),this._hasNext=!0,this._hasPrevious=!0;var i=[],a={messages:[],prevMessagesCount:0,nextMessagesCount:0};return ze(function(){return N(t,void 0,void 0,function(){var s,o,l,u,c,h=this;return T(this,function(f){switch(f.label){case 0:return[4,(c=this._backgroundSync)===null||c===void 0?void 0:c.loadMetadata()];case 1:return s=f.sent(),o=q.of(this._iid),l=o.cacheContext,u=o.statManager,n===K1.CACHE_AND_REPLACE_BY_API&&this._getLocalMessages(this._startingPoint,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit,isRestoreIndexedDB:!0}).then(function(p){return N(h,void 0,void 0,function(){return T(this,function(_){switch(_.label){case 0:return a=p,i=this._filterUnderOffsetMessage(a.messages),this._addMessagesToView(i,oe.REQUEST_MESSAGE),[4,this._loadUnsentMessages()];case 1:return _.sent(),r._invokeResponse("local",null,i),[2]}})})}).catch(function(p){if(Vi(p))throw p;r._invokeResponse("local",p,null)}).finally(function(){return N(h,void 0,void 0,function(){var p,_,g,C,E,y,S,I=this;return T(this,function(w){switch(w.label){case 0:return p=q.of(this._iid).cacheContext,_=!0,g=!0,C=!1,p.localCacheEnabled&&(i.length>0&&(E=s.range).includes.apply(E,it([],Ge(i.map(function(R){return R.createdAt})),!1))?!s.previousComplete&&a.prevMessagesCount<this._prevResultLimit?g=!0:this._startingPoint>s.range.bottom||a.nextMessagesCount<this._nextResultLimit?C=!0:g=!1:i.length===0&&(C=!0)),[4,this._refreshChannel(oe.REFRESH_CHANNEL,C)];case 1:return w.sent(),C&&this._channel._runIfHandleableWithGroupChannel(function(R){var A=Math.max.apply(Math,it([],Ge(i.map(function(U){return U.createdAt})),!1));R._latestMessageInfo&&A>=R._latestMessageInfo.createdAt&&(g=!1)}),g?(_=!1,this._getRemoteMessages(this._startingPoint,{prevLimit:this._prevResultLimit,nextLimit:this._nextResultLimit,reverse:!0,checkingHasNext:!0,checkingContinuousMessages:p.localCacheEnabled,sdkSource:Us.EXTERNAL_COLLECTION}).then(function(R){var A,U,O,B=R.messages,F=R.isContinuousMessages,P=R.hasNext,G=I._filterUnderOffsetMessage(B);I._messages=[],G.length>0?(I._setHasNextAndHasPrevious(G,P),(A=I._syncRange).extends.apply(A,it([],Ge(G.map(function(L){return L.createdAt})),!1)),F&&(!((U=I._backgroundSync)===null||U===void 0)&&U.range.overlap(I._syncRange))&&((O=I._backgroundSync)===null||O===void 0||O.range.extends(I._syncRange.top,I._syncRange.bottom)),I._addMessagesToView(G,oe.REQUEST_MESSAGE)):(I._hasPrevious=!1,I._hasNext=!1),r._invokeResponse("remote",null,G)}).catch(function(R){if(Vi(R))throw R;r._invokeResponse("remote",R,null)})):(this._setHasNextAndHasPrevious(i),r._invokeResponse("remote",null,i)),p.localCacheEnabled&&u.put(new Kn({type:kn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"initial_load",event:_?"cache_hit":"cache_miss",max_db_size:(S=(y=p.localCacheConfig)===null||y===void 0?void 0:y.maxSize)!==null&&S!==void 0?S:0,message_init_policy:n,use_local_cache:p.localCacheEnabled,collection_id:this._key}})),[2]}})})}),u.put(new Dp({type:kn.FEATURE_LOCALCACHE,data:{use_local_cache:l.localCacheEnabled,collection_interface:{message_init_policy:n,message:!0}}})),[2]}})})}),r},e.prototype.loadPrevious=function(){var n,t,r;return N(this,void 0,void 0,function(){var i,a,s,o,l,u,c,h,f=this;return T(this,function(p){switch(p.label){case 0:if(this._isDisposed)throw new Q({code:Le.COLLECTION_DISPOSED,message:"Collection has been disposed."});return i=q.of(this._iid),a=i.cacheContext,s=i.statManager,o=i.logger,this._hasPrevious?this._isLoadingPrevious?(o.warn("Messages are already fetching."),[2,[]]):(this._isLoadingPrevious=!0,l=this.viewTop,u=[],[4,or(function(){return N(f,void 0,void 0,function(){var _;return T(this,function(g){switch(g.label){case 0:return[4,this._getLocalMessages(l,{prevLimit:this._prevResultLimit,inclusive:!1})];case 1:return _=g.sent(),u=this._filterUnderOffsetMessage(_.messages),[2]}})})})]):[2,[]];case 1:return p.sent(),c=u.length>=this._prevResultLimit,a.localCacheEnabled&&s.put(new Kn({type:kn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:c?"cache_hit":"cache_miss",max_db_size:(t=(n=a.localCacheConfig)===null||n===void 0?void 0:n.maxSize)!==null&&t!==void 0?t:0,use_local_cache:a.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),c&&(!((r=this._backgroundSync)===null||r===void 0)&&r.isWrappingMessages(u))?[3,3]:(h=!1,[4,or(function(){return N(f,void 0,void 0,function(){var _,g,C,E,y,S,I,w=this;return T(this,function(R){switch(R.label){case 0:return _=q.of(this._iid).cacheContext,[4,this._getRemoteMessages(l,{prevLimit:this._prevResultLimit,reverse:!0,checkingContinuousMessages:_.localCacheEnabled,sdkSource:Us.EXTERNAL_COLLECTION})];case 1:return g=R.sent(),(u=this._filterUnderOffsetMessage(g.messages)).length>0&&((C=this._syncRange).extends.apply(C,it([],Ge(u.map(function(A){return A.createdAt})),!1)),!((E=this._backgroundSync)===null||E===void 0)&&E.range.overlap(this._syncRange)&&g.isContinuousMessages&&(h=!0,(y=this._backgroundSync)===null||y===void 0||y.range.extends(this._syncRange.top))),u=u.filter(function(A){return es(w._messages,A)<0}),this._hasPrevious=u.length>=this._prevResultLimit,_.localCacheEnabled&&h&&s.put(new Kn({type:kn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_prev",event:"cache_fetch",max_db_size:(I=(S=_.localCacheConfig)===null||S===void 0?void 0:S.maxSize)!==null&&I!==void 0?I:0,use_local_cache:_.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),[2]}})})})]);case 2:return p.sent(),this._addMessagesToView(u,oe.REQUEST_MESSAGE),[3,4];case 3:this._hasPrevious=u.length>=this._prevResultLimit,u.length>0&&this._addMessagesToView(u,oe.REQUEST_MESSAGE),p.label=4;case 4:return this._isLoadingPrevious=!1,[2,u]}})})},e.prototype.loadNext=function(){var n,t,r;return N(this,void 0,void 0,function(){var i,a,s,o,l,u,c,h,f=this;return T(this,function(p){switch(p.label){case 0:if(this._isDisposed)throw new Q({code:Le.COLLECTION_DISPOSED,message:"Collection has been disposed."});return i=q.of(this._iid),a=i.cacheContext,s=i.statManager,o=i.logger,this._hasNext?this._isLoadingNext?(o.warn("Messages are already fetching."),[2,[]]):(this._isLoadingNext=!0,l=this.viewBottom,u=[],[4,or(function(){return N(f,void 0,void 0,function(){var _;return T(this,function(g){switch(g.label){case 0:return[4,this._getLocalMessages(l,{nextLimit:this._nextResultLimit,inclusive:!1})];case 1:return _=g.sent(),u=this._filterUnderOffsetMessage(_.messages),[2]}})})})]):[2,[]];case 1:return p.sent(),c=u.length>=this._nextResultLimit,a.localCacheEnabled&&s.put(new Kn({type:kn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:c?"cache_hit":"cache_miss",max_db_size:(t=(n=a.localCacheConfig)===null||n===void 0?void 0:n.maxSize)!==null&&t!==void 0?t:0,use_local_cache:a.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),c&&(!((r=this._backgroundSync)===null||r===void 0)&&r.isWrappingMessages(u))?[3,3]:(h=!1,[4,or(function(){return N(f,void 0,void 0,function(){var _,g,C,E,y,S,I,w,R=this;return T(this,function(A){switch(A.label){case 0:return _=q.of(this._iid).cacheContext,[4,this._getRemoteMessages(l,{nextLimit:this._nextResultLimit,reverse:!0,checkingHasNext:!0,checkingContinuousMessages:_.localCacheEnabled,sdkSource:Us.EXTERNAL_COLLECTION})];case 1:return g=A.sent(),(u=this._filterUnderOffsetMessage(g.messages)).length>0&&((C=this._syncRange).extends.apply(C,it([],Ge(u.map(function(U){return U.createdAt})),!1)),!((E=this._backgroundSync)===null||E===void 0)&&E.range.overlap(this._syncRange)&&g.isContinuousMessages&&(h=!0,(y=this._backgroundSync)===null||y===void 0||y.range.extends(this._syncRange.bottom))),u=u.filter(function(U){return es(R._messages,U)<0}),this._hasNext=(S=g.hasNext)!==null&&S!==void 0?S:u.length>=this._nextResultLimit,_.localCacheEnabled&&h&&s.put(new Kn({type:kn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:this.channel.url,starting_point:this._startingPoint,measured_on:"load_next",event:"cache_fetch",max_db_size:(w=(I=_.localCacheConfig)===null||I===void 0?void 0:I.maxSize)!==null&&w!==void 0?w:0,use_local_cache:_.localCacheEnabled,collection_id:this._key,message_init_policy:""}})),[2]}})})})]);case 2:return p.sent(),this._addMessagesToView(u,oe.REQUEST_MESSAGE),[3,4];case 3:this._hasNext=u.length>=this._nextResultLimit,u.length>0&&this._addMessagesToView(u,oe.REQUEST_MESSAGE),p.label=4;case 4:return this._isLoadingNext=!1,[2,u]}})})},e.prototype.removeFailedMessage=function(n){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:if(this._isDisposed)throw new Q({code:Le.COLLECTION_DISPOSED,message:"Collection has been disposed."});return[4,this._channelManager.removeFailedMessageFromCache(n)];case 1:return r.sent(),(t=this._unsentMessages.findIndex(function(i){return i.reqId===n}))>-1&&this._unsentMessages.splice(t,1),[2]}})})},e.prototype.dispose=function(){var n,t,r,i=this;if(!this._isDisposed){this._isDisposed=!0;var a=q.of(this._iid),s=a.cacheContext,o=a.dispatcher;this._messages=[],this._clearCheckMyMutedTimer(),this._channel._runIfHandleableWithGroupChannel(function(l){l.myMemberState!==Er.NONE&&(i._channel._updateMessageCollectionLastAccessedAt(),o.dispatch(new Vt({channels:[i._channel],context:{source:oe.CHANNEL_LASTACCESSEDAT_UPDATED}})))}),s.localCacheEnabled&&(this._prevFill.stop(),this._nextFill.stop()),(n=this._backgroundSync)===null||n===void 0||n.close(),(t=this._changelogSync)===null||t===void 0||t.close(),(r=this._pollChangelogSync)===null||r===void 0||r.close(),this._channelManager.unsubscribeChannelEvent(this._key),this._channelManager.unsubscribeMessageEvent(this._key),this._connectionEventContext&&this._connectionEventContext.close()}},e}(),ZY=function(e){function n(t,r){return e.call(this,t,z(z({},r),{channelManager:jr.of(t)}))||this}return k(n,e),n.prototype.keyOf=function(t){return t.messageId},n.prototype.initialize=function(t){return e.prototype.initialize.call(this,t)},n.prototype.setMessageCollectionHandler=function(t){this._setBaseMessageCollectionHandler(t)},n.prototype._addMessagesToView=function(t,r){var i,a,s=this,o=this._filterUnderOffsetMessage(t),l=[],u=[];try{for(var c=ye(o),h=c.next();!h.done;h=c.next()){var f=h.value;if(r===oe.SYNC_MESSAGE_FILL)if(f.messageId>0){if((C=es(this._messages,f))<0){es(this._unsentMessages,f)<0&&l.push(f);var p=jb(this._messages,f);this._messages.splice(p,0,f)}}else f instanceof yr&&(C=es(this._unsentMessages,f))<0&&es(this._messages,f)<0&&(this._unsentMessages.push(f),l.push(f));else if(f.messageId>0){if((C=es(this._messages,f))<0){var _=es(this._unsentMessages,f);_<0?l.push(f):(this._unsentMessages.splice(_,1),u.push(f)),p=jb(this._messages,f),this._messages.splice(p,0,f)}else u.push(f),this._messages[C]=f;if(f.updatedAt>0){var g=this._updateChildMessagesInView(f);u.push.apply(u,it([],Ge(g),!1))}}else if(f instanceof yr){var C;(C=es(this._unsentMessages,f))<0?es(this._messages,f)<0&&(this._unsentMessages.push(f),l.push(f)):(u.push(f),this._unsentMessages[C]=f)}}}catch(E){i={error:E}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}gl(r)&&ze(function(){return N(s,void 0,void 0,function(){var E,y,S,I,w;return T(this,function(R){return E={source:r},l.length>0&&((S=(y=this._handler)===null||y===void 0?void 0:y.onMessagesAdded)===null||S===void 0||S.call(y,E,this.channel,l)),u.length>0&&((w=(I=this._handler)===null||I===void 0?void 0:I.onMessagesUpdated)===null||w===void 0||w.call(I,E,this.channel,u)),[2]})})})},n.prototype._updateMessagesToView=function(t,r){var i,a,s=this,o=[],l=[],u=[];try{for(var c=ye(t),h=c.next();!h.done;h=c.next()){var f,p=h.value;if(p.messageId>0)if((f=es(this._messages,p))>=0)l.push(p),this._messages[f]=p;else{var _=es(this._unsentMessages,p);if(_>=0){var g=Ge(this._unsentMessages.splice(_,1),1)[0];if(this.hasNext&&g)u.push(g);else{l.push(p);var C=jb(this._messages,p);this._messages.splice(C,0,p)}}else{var E=this._messages.map(function(y){return y.createdAt});(p.createdAt<Math.min.apply(Math,it([],Ge(E),!1))&&!this._hasPrevious||p.createdAt>Math.max.apply(Math,it([],Ge(E),!1))&&!this._hasNext)&&o.push(p)}}else p instanceof yr&&(f=es(this._unsentMessages,p))>=0&&(l.push(p),this._unsentMessages[f]=p)}}catch(y){i={error:y}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return gl(r)&&ze(function(){return N(s,void 0,void 0,function(){var y,S,I,w,R;return T(this,function(A){return y={source:r},l.length>0?(I=(S=this._handler)===null||S===void 0?void 0:S.onMessagesUpdated)===null||I===void 0||I.call(S,y,this.channel,l):u.length>0?(R=(w=this._handler)===null||w===void 0?void 0:w.onMessagesDeleted)===null||R===void 0||R.call(w,y,this.channel,[],u):o.length>0&&this._addMessagesToView(o,r),[2]})})}),l},n}(XY),JY={coverUrl:void 0,coverImage:void 0,isDistinct:void 0,isPublic:void 0,isDiscoverable:void 0,accessCode:void 0,name:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,messageSurvivalSeconds:void 0},eQ=function(e){function n(t){var r=this,i=t.channelUrl,a=t.token,s=t.limit,o=t.order,l=t.mutedMemberFilter,u=t.memberStateFilter,c=t.nicknameStartsWithFilter,h=t.operatorFilter;return(r=e.call(this)||this).method=fe.GET,r.path="".concat(qi,"/").concat(encodeURIComponent(i),"/members"),r.params={token:a,limit:s,order:o,muted_member_filter:l,member_state_filter:u,nickname_startswith:c,operator_filter:h,show_member_is_muted:!0,show_read_receipt:!0,show_delivery_receipt:!0},r}return k(n,e),n}(ve),tQ=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.members=[];var a=r.next,s=r.members;return i.token=a,s&&s.length>0&&(i.members=s.map(function(o){return new us(t,o)})),i}return k(n,e),n}(_e);(function(e){e.ALL="all",e.MUTED="muted",e.UNMUTED="unmuted"})(ap||(ap={})),function(e){e.MEMBER_NICKNAME_ALPHABETICAL="member_nickname_alphabetical",e.OPERATOR_THEN_MEMBER_ALPHABETICAL="operator_then_member_alphabetical"}(sp||(sp={})),function(e){e.ALL="all",e.JOINED="joined_only",e.INVITED="invited_only",e.INVITED_BY_FRIEND="invited_by_friend",e.INVITED_BY_NON_FRIEND="invited_by_non_friend"}(op||(op={}));var nQ=function(e){function n(t,r,i){var a,s,o,l,u=this;return(u=e.call(this,t,r,Kt.GROUP,i)||this).mutedMemberFilter=ap.ALL,u.memberStateFilter=op.ALL,u.nicknameStartsWithFilter=null,u.operatorFilter=y0.ALL,u.order=sp.MEMBER_NICKNAME_ALPHABETICAL,u.mutedMemberFilter=(a=i.mutedMemberFilter)!==null&&a!==void 0?a:ap.ALL,u.memberStateFilter=(s=i.memberStateFilter)!==null&&s!==void 0?s:op.ALL,u.nicknameStartsWithFilter=(o=i.nicknameStartsWithFilter)!==null&&o!==void 0?o:null,u.order=(l=i.order)!==null&&l!==void 0?l:sp.MEMBER_NICKNAME_ALPHABETICAL,u}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Bt(ap,this.mutedMemberFilter)&&Bt(op,this.memberStateFilter)&&(Y("string",this.nicknameStartsWithFilter)||this.nicknameStartsWithFilter===null)&&Bt(y0,this.operatorFilter)&&Bt(sp,this.order)},n.prototype.next=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=q.of(this._iid).requestQueue,r=new eQ($e(z(z({},this),{token:this._token}))),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(tQ),s=a.members,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(el),rQ=function(e){function n(t){var r=this,i=t.channelUrl,a=t.userId,s=t.accessCode;return(r=e.call(this)||this).method=fe.PUT,r.path="".concat(qi,"/").concat(encodeURIComponent(i),"/accept"),r.params={user_id:a,access_code:s},r}return k(n,e),n}(ve),iQ=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new gs(t,r),i.channel.myMemberState=Er.JOINED,i}return k(n,e),n}(_e),aQ=function(e){function n(t){var r=this,i=t.channelUrl,a=t.isDistinct,s=t.isPublic,o=t.isDiscoverable,l=t.coverUrl,u=t.coverImage,c=t.accessCode,h=t.name,f=t.data,p=t.customType,_=t.operatorUserIds,g=t.messageSurvivalSeconds;return(r=e.call(this)||this).method=fe.PUT,r.path="".concat(qi,"/").concat(encodeURIComponent(i)),r.params=Ae({is_distinct:a,is_public:s,is_discoverable:o,name:h,data:f,custom_type:p,cover_url:l,cover_file:u,access_code:c,operator_ids:_,message_survival_seconds:g}),r}return k(n,e),n}(ve),sQ=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new gs(t,r),i}return k(n,e),n}(_e),oQ=function(e){function n(t){var r=this,i=t.channelUrl;return(r=e.call(this)||this).method=fe.DELETE,r.path="".concat(qi,"/").concat(encodeURIComponent(i)),r}return k(n,e),n}(ve);(function(e){function n(t,r){return e.call(this,t,r)||this}k(n,e)})(_e);var lQ=function(e){function n(t){var r=this,i=t.channelUrl;return(r=e.call(this)||this).method=fe.DELETE,r.path="".concat(qi,"/").concat(encodeURIComponent(i),"/hide"),r}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var uQ=function(e){function n(t){var r=t.userId,i=t.channelUrl,a=t.countPreference,s=e.call(this)||this;return s.method=fe.PUT,s.path="".concat(En,"/").concat(encodeURIComponent(r),"/count_preference/").concat(encodeURIComponent(i)),s.params={count_preference:a},s}return k(n,e),n}(ve),cQ=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.countPreference=r.count_preference,i}return k(n,e),n}(_e),dQ=function(e){function n(t){var r=this,i=t.channelUrl,a=t.locale;return(r=e.call(this)||this).method=fe.PUT,r.path="".concat(qi,"/").concat(encodeURIComponent(i),"/reset_user_history"),r.params=Ae({locale:a}),r}return k(n,e),n}(ve),hQ=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.ts_message_offset;return i.messageOffsetTimestamp=a,i}return k(n,e),n}(_e),fQ=z(z({},GN),{scheduledAt:void 0,file:void 0,fileUrl:void 0,fileName:void 0,mimeType:void 0,fileSize:void 0,thumbnailSizes:void 0,requireAuth:!1}),vQ=z(z({},e4),{scheduledAt:void 0}),pQ=function(e){function n(t){var r,i,a=this;a=e.call(this)||this;var s=[];t.mentionType===Oi.USERS&&(t.mentionedUserIds?s=t.mentionedUserIds:t.mentionedUsers&&(s=t.mentionedUsers.map(function(c){return c.userId})));var o=t.channelType,l=t.channelUrl,u=t.scheduledMessageId;return a.method=fe.PUT,a.path="".concat(mn(o),"/").concat(encodeURIComponent(l),"/scheduled_messages/").concat(encodeURIComponent(u)),a.params=Ae($e({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:Qh.FILE,url:t.fileUrl,file_name:t.fileName,file_size:t.fileSize,file_type:t.mimeType,thumbnails:(r=t._thumbnails)===null||r===void 0?void 0:r.map(function(c){return Wl.payloadify(c)}),custom_type:t.customType,data:t.data,require_auth:t.requireAuth,mention_type:t.mentionType,mentioned_user_ids:s,sorted_metaarray:(i=t.metaArrays)===null||i===void 0?void 0:i.map(function(c){return pi.payloadify(c)}),apple_critical_alert_options:t.appleCriticalAlertOptions?js.payloadify(t.appleCriticalAlertOptions):null,push_option:t.pushNotificationDeliveryOption})),a}return k(n,e),n}(ve),mQ=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=new Rr(t,r),i}return k(n,e),n}(_e),_Q=function(e){function n(t){var r,i=this;i=e.call(this)||this;var a=[];t.mentionType===Oi.USERS&&(t.mentionedUserIds?a=t.mentionedUserIds:t.mentionedUsers&&(a=t.mentionedUsers.map(function(u){return u.userId})));var s=t.channelType,o=t.channelUrl,l=t.scheduledMessageId;return i.method=fe.PUT,i.path="".concat(mn(s),"/").concat(encodeURIComponent(o),"/scheduled_messages/").concat(encodeURIComponent(l)),i.params=Ae($e({req_id:t.reqId,scheduled_at:t.scheduledAt,message_type:Qh.USER,message:t.message,custom_type:t.customType,data:t.data,mention_type:t.mentionType,mentioned_user_ids:a,sorted_metaarray:(r=t.metaArrays)===null||r===void 0?void 0:r.map(function(u){return pi.payloadify(u)}),apple_critical_alert_options:t.appleCriticalAlertOptions?js.payloadify(t.appleCriticalAlertOptions):null,target_langs:t.translationTargetLanguages,push_option:t.pushNotificationDeliveryOption})),i}return k(n,e),n}(ve);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.message=new Ni(t,r),i}k(n,e)})(_e);var SR,TR,gQ=function(e){function n(t){var r=e.call(this)||this,i=t.channelType,a=t.channelUrl,s=t.scheduledMessageId;return r.method=fe.DELETE,r.path="".concat(mn(i),"/").concat(encodeURIComponent(a),"/scheduled_messages/").concat(encodeURIComponent(s)),r}return k(n,e),n}(ve),EQ=function(e){function n(t){var r=e.call(this)||this,i=t.channelType,a=t.channelUrl,s=t.scheduledMessageId;return r.method=fe.POST,r.path="".concat(mn(i),"/").concat(encodeURIComponent(a),"/scheduled_messages/").concat(encodeURIComponent(s),"/send_now"),r}return k(n,e),n}(ve),yQ=function(e){function n(t){var r=t.userId,i=t.channelUrl,a=t.pushTriggerOption,s=e.call(this)||this;return s.method=fe.PUT,s.path="".concat(En,"/").concat(encodeURIComponent(r),"/push_preference/").concat(encodeURIComponent(i)),s.params={push_trigger_option:a},s}return k(n,e),n}(ve),bQ=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pushTriggerOption=r.push_trigger_option,i.enabled=r.enable,i}return k(n,e),n}(_e),CQ=function(e){function n(t){var r=t.userId,i=t.channelUrl,a=e.call(this)||this;return a.method=fe.GET,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/push_preference/").concat(encodeURIComponent(i)),a}return k(n,e),n}(ve),SQ=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pushTriggerOption=r.push_trigger_option,i.enabled=r.enable,i}return k(n,e),n}(_e),TQ=function(e){function n(t){var r=this,i=t.channelUrl,a=t.channelType;return(r=e.call(this)||this).method=fe.GET,r.path="".concat(mn(a),"/").concat(encodeURIComponent(i),"/message_purge_offset"),r}return k(n,e),n}(ve),NQ=function(e){function n(t,r){var i=e.call(this,t,r)||this,a=r.message_purge_offset;return i.messageDeletionTimestamp=a,i}return k(n,e),n}(_e),NR=function(){function e(n){this.url=n.channel_url,this.lastMessageTs=n.last_message_ts}return e.payloadify=function(n){return{channel_url:n.url,last_message_ts:n.lastMessageTs}},e}(),IR=function(){function e(n){var t,r,i,a;this.type=n.type,this.ticketId=(t=n.ticket_id)!==null&&t!==void 0?t:void 0,this.timestamp=(r=n.timestamp)!==null&&r!==void 0?r:void 0,this.estimatedAgentJoinAt=(i=n.estimated_agent_join_at)!==null&&i!==void 0?i:void 0,this.requestedAt=(a=n.requested_at)!==null&&a!==void 0?a:void 0}return e.payloadify=function(n){return Ae({type:n.type,ticket_id:n.ticketId,timestamp:n.timestamp,estimated_agent_join_at:n.estimatedAgentJoinAt,requested_at:n.requestedAt})},e}(),MR=function(){function e(n){this.isResolved=n.is_resolved,this.determinedBy=n.determined_by}return e.payloadify=function(n){return{is_resolved:n.isResolved,determined_by:n.determinedBy}},e}();(function(e){e.DEFAULT="default",e.PROACTIVE="proactive"})(SR||(SR={})),function(e){e.OPEN="open",e.CLOSED="closed"}(TR||(TR={}));var as,ss,xp=function(){function e(n){var t,r,i,a,s,o;this.id=n.id,this.aiAgentId=n.ai_agent_id,this.type=n.conversation_type,this.status=n.status,this.channelInfo=new NR(n.channel),this.summary=(t=n.summary_text)!==null&&t!==void 0?t:void 0,this.csat=(r=n.csat)!==null&&r!==void 0?r:void 0,this.csatReason=(i=n.csat_reason)!==null&&i!==void 0?i:void 0,this.csatExpireAt=(a=n.csat_expire_at)!==null&&a!==void 0?a:void 0,this.resolution=n.resolution?new MR(n.resolution):void 0,this.topics=(s=n.topics)!==null&&s!==void 0?s:[],this.handoff=n.handoff?new IR(n.handoff):void 0,this.handedOverAt=(o=n.handed_over_at)!==null&&o!==void 0?o:void 0}return e.payloadify=function(n){return Ae($e({id:n.id,ai_agent_id:n.aiAgentId,conversation_type:n.type,status:n.status,channel:NR.payloadify(n.channelInfo),summary_text:n.summary,csat:n.csat,csat_reason:n.csatReason,csat_expire_at:n.csatExpireAt,resolution:n.resolution&&MR.payloadify(n.resolution),topics:n.topics,handoff:n.handoff&&IR.payloadify(n.handoff),handed_over_at:n.handedOverAt}))},e}(),IQ=function(e){function n(t){var r=this,i=t.channelUrl;return(r=e.call(this)||this).method=fe.POST,r.path="".concat(IN,"/").concat(encodeURIComponent(i),"/submit_csat"),r.params=Ae({csat:t.csat,csat_reason:t.csatReason,csat_type:t.csatType,is_resolved:t.isResolved,resolution_score:t.resolutionScore,csat_started_at:t.csatStartedAt}),r}return k(n,e),n}(ve),MQ=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.conversation=new xp(r.conversation),i}return k(n,e),n}(_e),AQ=function(e){function n(t){var r=this,i=t.channelUrl;return(r=e.call(this)||this).method=fe.POST,r.path="".concat(IN,"/").concat(encodeURIComponent(i),"/handoff"),r.params={},r}return k(n,e),n}(ve),wQ=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.conversation=new xp(r.conversation),i}return k(n,e),n}(_e),RQ=function(e){function n(t){var r=this,i=t.channelUrl;return(r=e.call(this)||this).method=fe.POST,r.path="".concat(IN,"/").concat(encodeURIComponent(i),"/close_conversation"),r.params={},r}return k(n,e),n}(ve),OQ=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.conversation=new xp(r.conversation),i}return k(n,e),n}(_e),DQ=function(e){function n(t){var r=t.aiAgentId,i=t.channelUrl,a=t.context,s=e.call(this)||this;return s.method=fe.PUT,s.path="".concat(NN,"/ai_agents/").concat(encodeURIComponent(r),"/channels/").concat(encodeURIComponent(i),"/ai_agent_context"),s.params=Ae($e({context:a})),s}return k(n,e),n}(ve),UQ=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.contextObject=r,i}return k(n,e),n}(_e),LQ=function(e){function n(t){var r=t.aiAgentId,i=t.channelUrl,a=e.call(this)||this;return a.method=fe.GET,a.path="".concat(NN,"/ai_agents/").concat(encodeURIComponent(r),"/channels/").concat(encodeURIComponent(i),"/ai_agent_context"),a}return k(n,e),n}(ve),kQ=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.contextObject=r,i}return k(n,e),n}(_e),xQ=function(e){function n(t){var r=t.aiAgentId,i=t.channelUrl,a=t.context,s=e.call(this)||this;return s.method=fe.PATCH,s.path="".concat(NN,"/ai_agents/").concat(encodeURIComponent(r),"/channels/").concat(encodeURIComponent(i),"/ai_agent_context"),s.params=Ae($e({context:a})),s}return k(n,e),n}(ve),PQ=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.contextObject=r,i}return k(n,e),n}(_e),AR=function(){function e(n){this.type=n.type,this.ticketStatus=n.ticket_status}return e.payloadify=function(n){return Ae({type:n.type,ticket_status:n.ticketStatus})},e}();(function(e){e.ALL="all",e.UNREAD_MESSAGE_COUNT_ONLY="unread_message_count_only",e.UNREAD_MENTION_COUNT_ONLY="unread_mention_count_only",e.OFF="off"})(as||(as={})),function(e){e.UNHIDDEN="unhidden",e.HIDDEN_ALLOW_AUTO_UNHIDE="hidden_allow_auto_unhide",e.HIDDEN_PREVENT_AUTO_UNHIDE="hidden_prevent_auto_unhide"}(ss||(ss={}));var lp,gs=function(e){function n(t,r){var i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w,R,A,U,O=this;return(O=e.call(this,t,r)||this)._unreadMemberStateMap=new Map,O._undeliveredMemberStateMap=new Map,O._typingStatus=new Map,O._lastMemberCountUpdated=0,O._typingStarted=0,O._typingEnded=0,O._aiAgentAdditionalData={},O.isDistinct=!1,O.isSuper=!1,O.isBroadcast=!1,O.isExclusive=!1,O.isPublic=!1,O.isDiscoverable=!0,O.isChatNotification=!1,O.isAccessCodeRequired=!1,O.isPushEnabled=!1,O.unreadMessageCount=0,O.unreadMentionCount=0,O.totalUnreadReplyCount=0,O.members=[],O.memberCount=0,O.joinedMemberCount=0,O.hiddenState=ss.UNHIDDEN,O.lastMessage=null,O.messageOffsetTimestamp=0,O.messageSurvivalSeconds=-1,O.myMemberState=Er.NONE,O.myRole=hs.NONE,O.myMutedState=xs.UNMUTED,O.myLastRead=0,O.myCountPreference=as.ALL,O.myPushTriggerOption=Zc.DEFAULT,O.inviter=null,O.invitedAt=0,O.joinedAt=0,O.lastPinnedMessage=null,O.conversation=null,O.helpdeskInfo=null,O._latestMessageInfo=null,O._pinnedMessagesUpdatedAt=0,O._myMutedRemainingTime=-1,O._messageDeletionTimestamp=0,O.channelType=Kt.GROUP,O.isDistinct=(a=r.is_distinct)!==null&&a!==void 0&&a,O.isSuper=(s=r.is_super)!==null&&s!==void 0&&s,O.isBroadcast=(o=r.is_broadcast)!==null&&o!==void 0&&o,O.isExclusive=(l=r.is_exclusive)!==null&&l!==void 0&&l,O.isPublic=(u=r.is_public)!==null&&u!==void 0&&u,O.isDiscoverable=(c=r.is_discoverable)!==null&&c!==void 0?c:O.isPublic,O.isChatNotification=(h=r.is_chat_notification)!==null&&h!==void 0&&h,O.isAccessCodeRequired=(f=r.is_access_code_required)!==null&&f!==void 0&&f,O.isPushEnabled=(p=r.is_push_enabled)!==null&&p!==void 0&&p,Array.isArray(r.members)&&(i=O.members).push.apply(i,it([],Ge(r.members.map(function(B){return new us(O._iid,B)})),!1)),O.memberCount=(_=r.member_count)!==null&&_!==void 0?_:0,O.joinedMemberCount=(g=r.joined_member_count)!==null&&g!==void 0?g:0,O.hiddenState=Bt(ss,r.hidden_state)?r.hidden_state:ss.UNHIDDEN,O.messageOffsetTimestamp=(C=r.ts_message_offset)!==null&&C!==void 0?C:0,O.messageSurvivalSeconds=(E=r.message_survival_seconds)!==null&&E!==void 0?E:-1,O.lastMessage=r.last_message?Di(O._iid,z({channel_type:O.channelType},r.last_message)):null,r.read_receipt&&Object.keys(r.read_receipt).forEach(function(B){Y("number",r.read_receipt[B])&&O._updateUnreadMemberState(B,r.read_receipt[B])}),r.delivery_receipt&&Object.keys(r.delivery_receipt).forEach(function(B){Y("number",r.delivery_receipt[B])&&O._updateUndeliveredMemberState(B,r.delivery_receipt[B])}),O.myMemberState=Bt(Er,r.member_state)?r.member_state:Er.NONE,O.myRole=Bt(hs,r.my_role)?r.my_role:hs.NONE,Bt(xs,r.is_muted)?O.myMutedState=r.is_muted:Y("boolean",r.is_muted)?O.myMutedState=r.is_muted?xs.MUTED:xs.UNMUTED:O.myMutedState=xs.UNMUTED,O.myCountPreference=Bt(as,r.count_preference)?r.count_preference:as.ALL,O.myPushTriggerOption=Bt(Zc,r.push_trigger_option)?r.push_trigger_option:Zc.ALL,O.myLastRead=(y=r.user_last_read)!==null&&y!==void 0?y:0,O.inviter=r.inviter?new Gt(O._iid,r.inviter):null,O.invitedAt=(S=r.invited_at)!==null&&S!==void 0?S:0,O.joinedAt=(I=r.joined_ts)!==null&&I!==void 0?I:0,O._updateUnreadCount((w=r.unread_message_count)!==null&&w!==void 0?w:0,(R=r.unread_mention_count)!==null&&R!==void 0?R:0),O.totalUnreadReplyCount=(A=r.total_unread_thread_message_count)!==null&&A!==void 0?A:0,O.lastPinnedMessage=r.latest_pinned_message?Di(O._iid,z({channel_type:O.channelType},r.latest_pinned_message)):null,O.conversation=r.conversation?new xp(r.conversation):null,O.helpdeskInfo=r.helpdesk_info?new AR(r.helpdesk_info):null,r.latest_message&&(O._latestMessageInfo={messageId:r.latest_message.message_id,createdAt:r.latest_message.created_at}),O._aiAgentAdditionalData={hasBot:r.has_bot,hasAIBot:r.has_ai_bot,isAIAgent:r.is_ai_agent_channel,isDesk:r.is_desk_channel},O._messageDeletionTimestamp=(U=r.message_purge_offset)!==null&&U!==void 0?U:0,O}return k(n,e),Object.defineProperty(n.prototype,"isHidden",{get:function(){return this.hiddenState!==ss.UNHIDDEN},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isTyping",{get:function(){return this._typingStatus.size>0},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cachedUnreadMemberState",{get:function(){var t,r,i={};try{for(var a=ye(this._unreadMemberStateMap),s=a.next();!s.done;s=a.next()){var o=Ge(s.value,2),l=o[0],u=o[1];i[l]=u}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"cachedUndeliveredMemberState",{get:function(){var t,r,i={};try{for(var a=ye(this._undeliveredMemberStateMap),s=a.next();!s.done;s=a.next()){var o=Ge(s.value,2),l=o[0],u=o[1];i[l]=u}}catch(c){t={error:c}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(t)throw t.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasBot",{get:function(){return!!this._aiAgentAdditionalData.hasBot},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"hasAiBot",{get:function(){return!!this._aiAgentAdditionalData.hasAIBot},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isDesk",{get:function(){return!!this._aiAgentAdditionalData.isDesk},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAIAgent",{get:function(){return!!this._aiAgentAdditionalData.isAIAgent},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"messageDeletionTimestamp",{get:function(){return this._messageDeletionTimestamp},enumerable:!1,configurable:!0}),n.payloadify=function(t,r){var i,a,s,o;r===void 0&&(r=!1);var l=z(z({},e.payloadify.call(this,t,r)),{is_access_code_required:t.isAccessCodeRequired,is_distinct:t.isDistinct,is_super:t.isSuper,is_broadcast:t.isBroadcast,is_exclusive:t.isExclusive,is_public:t.isPublic,is_discoverable:t.isDiscoverable,is_muted:t.myMutedState,is_push_enabled:t.isPushEnabled,unread_message_count:t.unreadMessageCount,unread_mention_count:t.unreadMentionCount,total_unread_thread_message_count:t.totalUnreadReplyCount,push_trigger_option:t.myPushTriggerOption,count_preference:t.myCountPreference,hidden_state:t.hiddenState,member_count:t.memberCount,joined_member_count:t.joinedMemberCount,member_state:t.myMemberState,my_role:t.myRole,user_last_read:t.myLastRead,ts_message_offset:t.messageOffsetTimestamp,message_survival_seconds:t.messageSurvivalSeconds,read_receipt:t.cachedUnreadMemberState,delivery_receipt:t.cachedUndeliveredMemberState,members:t.members.map(function(u){return us.payloadify(u)}),last_message:t.lastMessage?L1(t.lastMessage):null,inviter:t.inviter?Gt.payloadify(t.inviter):null,invited_at:t.invitedAt,joined_ts:t.joinedAt,latest_pinned_message:t.lastPinnedMessage?L1(t.lastPinnedMessage):null,latest_message:t._latestMessageInfo?{message_id:t._latestMessageInfo.messageId,created_at:t._latestMessageInfo.createdAt}:null,has_bot:(i=t._aiAgentAdditionalData)===null||i===void 0?void 0:i.hasBot,has_ai_bot:(a=t._aiAgentAdditionalData)===null||a===void 0?void 0:a.hasAIBot,is_desk_channel:(s=t._aiAgentAdditionalData)===null||s===void 0?void 0:s.isDesk,is_ai_agent_channel:(o=t._aiAgentAdditionalData)===null||o===void 0?void 0:o.isAIAgent,message_purge_offset:t.messageDeletionTimestamp,conversation:t.conversation?xp.payloadify(t.conversation):null,helpdesk_info:t.helpdeskInfo?AR.payloadify(t.helpdeskInfo):null});return r?l:Ae($e(l))},n.prototype._shouldUpdateLastMessageWith=function(t){if(t.silent)return!1;var r=q.of(this._iid).appInfo;switch(r==null?void 0:r.lastMessageThreadingPolicy){case nd.NONE:case nd.INCLUDE_REPLY:break;case nd.EXCLUDE_REPLY:if(t.parentMessageId>0)return!1;break;case nd.INCLUDE_REPLY_TO_CHANNEL:if(t instanceof yr&&t.parentMessageId>0&&!t.replyToChannel)return!1}return!this.lastMessage||this.lastMessage.createdAt<t.createdAt||this.lastMessage.createdAt===t.createdAt&&this.lastMessage.messageId===t.messageId&&this.lastMessage.updatedAt<=t.updatedAt},n.prototype._tryUpdateLastMessageAndCallEvents=function(t,r){var i=q.of(this._iid).dispatcher,a=jr.of(this._iid);this._updateLastMessage(r),a.handlers.map(function(s){s.onChannelChanged&&s.onChannelChanged(t)}),i.dispatch(new Vt({channels:[t],context:{source:oe.EVENT_MESSAGE_SENT}}))},n.prototype._shouldUpdateUnreadCountWith=function(t){var r=q.of(this._iid).appInfo;switch(r==null?void 0:r.unreadCountThreadingPolicy){case td.NONE:case td.INCLUDE_REPLY:break;case td.EXCLUDE_REPLY:if(t.parentMessageId>0)return!1;break;case td.INCLUDE_REPLY_TO_CHANNEL:if(t instanceof yr&&t.parentMessageId>0&&!t.replyToChannel)return!1}return!0},n.prototype._updateLastMessage=function(t){return!!this._shouldUpdateLastMessageWith(t)&&(this.lastMessage=t,!0)},n.prototype._updateUnreadCount=function(t,r){if(typeof t=="number"&&t>=0)if(this.myCountPreference===as.ALL||this.myCountPreference===as.UNREAD_MESSAGE_COUNT_ONLY)if(this.isExclusive||this.isSuper||this.isBroadcast){var i=q.of(this._iid).maxSuperGroupChannelUnreadCount;this.unreadMessageCount=i&&t>=i?i:t}else this.unreadMessageCount=t;else this.unreadMessageCount=0;else this.unreadMessageCount=0;typeof r=="number"&&r>=0&&(this.myCountPreference===as.ALL||this.myCountPreference===as.UNREAD_MENTION_COUNT_ONLY)?this.unreadMentionCount=r:this.unreadMentionCount=0},n.prototype._updateUnreadMemberState=function(t,r,i){i===void 0&&(i=!1);var a=this._unreadMemberStateMap.get(t);return!!(!a||i||!i&&a<r)&&a!==r&&(this._unreadMemberStateMap.set(t,r),q.of(this._iid).sdkState.userId===t&&(this.myLastRead=r),!0)},n.prototype._updateUndeliveredMemberState=function(t,r){var i=this._undeliveredMemberStateMap.get(t);return(!i||i<r)&&(this._undeliveredMemberStateMap.set(t,r),!0)},n.prototype._updateTypingStatus=function(t,r){r===void 0&&(r=new Date().getTime()),r>0?this._typingStatus.set(t.userId,{user:t,ts:r}):this._typingStatus.delete(t.userId)},n.prototype._clearTypingStatus=function(){this._typingStatus.clear(),this._typingStarted=0,this._typingEnded=0},n.prototype._update=function(t){t._typingStatus=this._typingStatus,t._typingStarted=this._typingStarted,t._typingEnded=this._typingEnded,e.prototype._update.call(this,t)},n.prototype._setLatestMemberCount=function(t,r,i){var a=!1;return i>=this._lastMemberCountUpdated&&(this._lastMemberCountUpdated=i,a=t!==this.memberCount||r!==this.joinedMemberCount,this.memberCount=t,this.joinedMemberCount=r),a},n.prototype.isReadMessage=function(t){var r=q.of(this._iid).sdkState,i=this._unreadMemberStateMap.get(r.userId);return!!i&&i>=t.createdAt},n.prototype.serialize=function(){var t=this;return hf(this,function(r){r.cachedUnreadMemberState=t.cachedUnreadMemberState,r.cachedUndeliveredMemberState=t.cachedUndeliveredMemberState,Object.assign(r,t._serializeCachedMetaData())})},n.prototype.createMessageCollection=function(t){return t===void 0&&(t={}),new ZY(this._iid,z(z({},t),{channel:this}))},n.prototype.createMemberListQuery=function(t){return t===void 0&&(t={}),new nQ(this._iid,this.url,t)},n.prototype.createThreadedParentMessageListQuery=function(t){return t===void 0&&(t={}),new WW(this._iid,this.url,this.channelType,t)},n.prototype.addMember=function(t,r){if(r===void 0&&(r=0),!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var i=this.members.findIndex(function(s){return s.userId===t.userId});if(i>-1){var a=this.members[i];a.state===Er.JOINED&&(t.state=a.state),this.members.splice(i,1),this.memberCount--}this.members.push(t),this.memberCount++,this._updateUnreadMemberState(t.userId,r),this._updateUndeliveredMemberState(t.userId,r)}},n.prototype.removeMember=function(t){if(!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var r=t instanceof us?t.userId:t,i=this.members.findIndex(function(a){return a.userId===r});if(i>-1)return this.members.splice(i,1),this.memberCount--,!0}return!1},n.prototype.getUnreadMemberCount=function(t){var r,i;if(t instanceof yr&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var a=q.of(this._iid).sdkState,s=t.createdAt,o=0;try{for(var l=ye(this.members),u=l.next();!u.done;u=l.next()){var c=u.value;a.userId!==c.userId&&c.state===Er.JOINED&&t.sender.userId!==c.userId&&(this.cachedUnreadMemberState[c.userId]||0)<s&&o++}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return o}return 0},n.prototype.getUndeliveredMemberCount=function(t){var r,i;if(t instanceof yr&&!this.isExclusive&&!this.isSuper&&!this.isBroadcast){var a=q.of(this._iid).sdkState,s=t.createdAt,o=0;try{for(var l=ye(this.members),u=l.next();!u.done;u=l.next()){var c=u.value;a.userId!==c.userId&&c.state===Er.JOINED&&t.sender.userId!==c.userId&&(this.cachedUndeliveredMemberState[c.userId]||0)<s&&o++}}catch(h){r={error:h}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(r)throw r.error}}return o}return 0},n.prototype.getReadMembers=function(t,r){var i=this;r===void 0&&(r=!1);var a=q.of(this._iid).sdkState;if(!a.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var s=t instanceof yr?t.sender:null,o=[];return this.members.forEach(function(l){if(r||l.userId!==a.userId&&l.userId!==(s==null?void 0:s.userId)){var u=i._unreadMemberStateMap.get(l.userId);u&&u>=t.createdAt&&o.push(l)}}),o},n.prototype.getUnreadMembers=function(t,r){var i=this;r===void 0&&(r=!1);var a=q.of(this._iid).sdkState;if(!a.userId||this.isExclusive||this.isSuper||this.isBroadcast)return[];var s=t instanceof yr?t.sender:null,o=[];return this.members.forEach(function(l){if(r||l.userId!==a.userId&&l.userId!==(s==null?void 0:s.userId)){var u=i._unreadMemberStateMap.get(l.userId);u&&u<t.createdAt&&o.push(l)}}),o},n.prototype.getReadStatus=function(t){var r=this;t===void 0&&(t=!1);var i=q.of(this._iid).sdkState;if(!i.userId||this.isExclusive||this.isSuper||this.isBroadcast)return null;var a={};return this.members.forEach(function(s){if(t||s.userId!==i.userId){var o=r._unreadMemberStateMap.get(s.userId);a[s.userId]=new qx(r._iid,{channel_url:r.url,channel_type:r.channelType,user:us.payloadify(s),ts:o??0})}}),a},n.prototype.getDeliveryStatus=function(t){var r=this;t===void 0&&(t=!0);var i=q.of(this._iid).sdkState;if(!i.userId||this.isExclusive||this.isSuper||this.isBroadcast)return null;var a={};return this.members.forEach(function(s){if(t||s.userId!==i.userId){var o=r._undeliveredMemberStateMap.get(s.userId);a[s.userId]=new eY(r._iid,{channel_url:r.url,channel_type:r.channelType,user:us.payloadify(s),ts:o??0})}}),a},n.prototype.getTypingUsers=function(){var t=[];return this._typingStatus.forEach(function(r){var i=r.user;t.push(i)}),t},n.prototype.invalidateTypingStatus=function(){var t=this;if(!this.isTyping)return!1;var r=q.of(this._iid).typingIndicatorInvalidateTime,i=Date.now(),a=!1;return this._typingStatus.forEach(function(s,o){var l=s.ts;i-l>=r&&(t._typingStatus.delete(o),a=!0)}),a},n.prototype.refresh=function(){return N(this,void 0,void 0,function(){return T(this,function(t){return[2,this._refresh()]})})},n.prototype._refresh=function(t){return t===void 0&&(t=!1),N(this,void 0,void 0,function(){var r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:return r=q.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new z1({channelUrl:this.url}),[4,i.send(s)];case 1:return o=u.sent(),l=o.as(j1).channel,this._update(l),t||a.dispatch(new Vt({channels:[l],context:{source:oe.REFRESH_CHANNEL}})),[2,this]}})})},n.prototype.freeze=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,e.prototype.freeze.call(this)];case 1:return t.sent(),q.of(this._iid).dispatcher.dispatch(new Vt({channels:[this],context:{source:oe.EVENT_CHANNEL_FROZEN},isWebSocketEventComing:!0})),[2]}})})},n.prototype.unfreeze=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,e.prototype.unfreeze.call(this)];case 1:return t.sent(),q.of(this._iid).dispatcher.dispatch(new Vt({channels:[this],context:{source:oe.EVENT_CHANNEL_UNFROZEN},isWebSocketEventComing:!0})),[2]}})})},n.prototype.updateChannel=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return r=z(z({},JY),t),me(function(h){return Y("string",h.coverUrl,!0)&&(ai(h.coverImage)||Y("string",h.coverImage,!0))&&Y("boolean",h.isDistinct,!0)&&Y("boolean",h.isPublic,!0)&&Y("boolean",h.isDiscoverable,!0)&&Y("string",h.accessCode,!0)&&Y("string",h.name,!0)&&Y("string",h.data,!0)&&Y("string",h.customType,!0)&&Ht("string",h.operatorUserIds,!0)&&Y("number",h.messageSurvivalSeconds,!0)}(r)).throw(Q.invalidParameters),i=q.of(this._iid),a=i.dispatcher,s=i.requestQueue,o=new aQ(z({channelUrl:this.url},r)),[4,s.send(o)];case 1:return l=c.sent(),u=l.as(sQ).channel,this._update(u),a.dispatch(new Vt({channels:[u],context:{source:oe.EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.invite=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){return me(t.every(function(i){return i instanceof Gt})).throw(Q.invalidParameters),[2,this.inviteWithUserIds(t.map(function(i){return i.userId}))]})})},n.prototype.inviteWithUserIds=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return me(Ht("string",t)).throw(Q.invalidParameters),r=q.of(this._iid),i=r.dispatcher,a=r.requestQueue,s=r.sessionManager,o=new wY({channelUrl:this.url,userIds:t}),[4,a.send(o)];case 1:return l=c.sent(),u=l.as(RY).channel,this._update(u),i.dispatch(new Vt({channels:[u],context:{source:oe.EVENT_CHANNEL_INVITED,inviter:s.currentUser,invitees:[]},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.join=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return me(Y("string",t,!0)).throw(Q.invalidParameters),r=q.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,o=new TY({channelUrl:this.url,userId:a.userId,accessCode:t}),[4,s.send(o)];case 1:return l=c.sent(),(u=l.as(NY).channel).myMemberState=this.myMemberState=Er.JOINED,this._update(u),i.dispatch(new Vt({channels:[u],context:{source:oe.EVENT_CHANNEL_JOINED,users:[]},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.leave=function(t){return t===void 0&&(t=!1),N(this,void 0,void 0,function(){var r,i,a,s;return T(this,function(o){switch(o.label){case 0:return r=q.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new MY({channelUrl:this.url,userId:i.userId,shouldRemoveOperatorStatus:t}),[4,a.send(s)];case 1:return o.sent(),this.myMemberState=Er.NONE,[2]}})})},n.prototype.acceptInvitation=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return me(Y("string",t,!0)).throw(Q.invalidParameters),r=q.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,o=new rQ({channelUrl:this.url,userId:a.userId,accessCode:t}),[4,s.send(o)];case 1:return l=c.sent(),(u=l.as(iQ).channel).myMemberState=this.myMemberState=Er.JOINED,this._update(u),i.dispatch(new Vt({channels:[u],context:{source:oe.EVENT_CHANNEL_ACCEPTED_INVITE},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.declineInvitation=function(){return N(this,void 0,void 0,function(){var t,r,i,a;return T(this,function(s){switch(s.label){case 0:return t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new DY({channelUrl:this.url,userId:r.userId}),[4,i.send(a)];case 1:return s.sent(),this.myMemberState=Er.NONE,[2,this]}})})},n.prototype.sendUserMessage=function(t){var r=this,i=new Da,a=q.of(this._iid).dispatcher,s=Av.of(this._iid);return e.prototype.sendUserMessage.call(this,t).onPending(function(o){s.completeCurrentAndProcessNextAutoResend(o),i._trigger(o)}).onFailed(function(o,l){l&&s.completeCurrentAndProcessNextAutoResend(l),i._triggerFailed(o,l)}).onSucceeded(function(o){s.completeCurrentAndProcessNextAutoResend(o),r._updateLastMessage(o),jr.of(r._iid).handlers.map(function(l){l.onChannelChanged&&l.onChannelChanged(r)}),a.dispatch(new Vt({channels:[r],context:{source:oe.EVENT_MESSAGE_SENT}})),i._trigger(o)}),i},n.prototype.updateUserMessage=function(t,r){return N(this,void 0,void 0,function(){var i,a,s,o,l=this;return T(this,function(u){switch(u.label){case 0:return i=q.of(this._iid).dispatcher,[4,e.prototype.updateUserMessage.call(this,t,r)];case 1:return a=u.sent(),s=this._updateLastMessage(a),o=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===a.messageId&&(this.lastPinnedMessage=a,s=!0,o=!0),s&&(jr.of(this._iid).handlers.map(function(c){c.onChannelChanged&&c.onChannelChanged(l)}),i.dispatch(new Vt({channels:[this],context:{source:o?oe.EVENT_PINNED_MESSAGE_UPDATED:oe.EVENT_MESSAGE_UPDATED}}))),o&&jr.of(this._iid).handlers.map(function(c){c.onPinnedMessageUpdated&&c.onPinnedMessageUpdated(l)}),i.dispatch(new er({messages:[a],source:oe.EVENT_MESSAGE_UPDATED})),[2,a]}})})},n.prototype._autoResendUserMessage=function(t){var r=this,i=new Da,a=q.of(this._iid).dispatcher,s=Av.of(this._iid);return e.prototype._autoResendUserMessage.call(this,t).onPending(function(o){s.completeCurrentAndProcessNextAutoResend(o),i._trigger(o)}).onFailed(function(o,l){s.completeCurrentAndProcessNextAutoResend(l),i._triggerFailed(o,l)}).onSucceeded(function(o){var l=jr.of(r._iid);s.completeCurrentAndProcessNextAutoResend(o),r._updateLastMessage(o),l.handlers.map(function(u){u.onChannelChanged&&u.onChannelChanged(r)}),a.dispatch(new Vt({channels:[r],context:{source:oe.EVENT_MESSAGE_SENT}})),i._trigger(o)}),i},n.prototype.sendFileMessage=function(t){var r=this,i=new Da,a=q.of(this._iid).dispatcher,s=Av.of(this._iid);return e.prototype.sendFileMessage.call(this,t).onPending(function(o){s.completeCurrentAndProcessNextAutoResend(o),i._trigger(o)}).onFailed(function(o,l){l&&s.completeCurrentAndProcessNextAutoResend(l),i._triggerFailed(o,l)}).onSucceeded(function(o){var l=jr.of(r._iid);s.completeCurrentAndProcessNextAutoResend(o),r._updateLastMessage(o),l.handlers.map(function(u){u.onChannelChanged&&u.onChannelChanged(r)}),a.dispatch(new Vt({channels:[r],context:{source:oe.EVENT_MESSAGE_SENT}})),i._trigger(o)}),i},n.prototype.sendMultipleFilesMessage=function(t){var r=this,i=new gg,a=q.of(this._iid).dispatcher;return e.prototype.sendMultipleFilesMessage.call(this,t).onPending(function(s){i._trigger(s)}).onFailed(function(s,o){i._triggerFailed(s,o)}).onSucceeded(function(s){var o=jr.of(r._iid);r._updateLastMessage(s),o.handlers.map(function(l){l.onChannelChanged&&l.onChannelChanged(r)}),a.dispatch(new Vt({channels:[r],context:{source:oe.EVENT_MESSAGE_SENT}})),i._trigger(s)}).onFileUploaded(function(s,o,l,u){i._triggerOnFileUploaded(s,o,l,u)}),i},n.prototype.updateFileMessage=function(t,r){return N(this,void 0,void 0,function(){var i,a,s,o,l=this;return T(this,function(u){switch(u.label){case 0:return i=q.of(this._iid).dispatcher,[4,e.prototype.updateFileMessage.call(this,t,r)];case 1:return a=u.sent(),s=this._updateLastMessage(a),o=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===a.messageId&&(this.lastPinnedMessage=a,s=!0,o=!0),s&&(jr.of(this._iid).handlers.map(function(c){c.onChannelChanged&&c.onChannelChanged(l)}),i.dispatch(new Vt({channels:[this],context:{source:o?oe.EVENT_PINNED_MESSAGE_UPDATED:oe.EVENT_MESSAGE_UPDATED}}))),o&&jr.of(this._iid).handlers.map(function(c){c.onPinnedMessageUpdated&&c.onPinnedMessageUpdated(l)}),i.dispatch(new er({messages:[a],source:oe.EVENT_MESSAGE_UPDATED})),[2,a]}})})},n.prototype._autoResendFileMessage=function(t){var r=this,i=new Da,a=q.of(this._iid).dispatcher,s=Av.of(this._iid);return e.prototype._autoResendFileMessage.call(this,t).onPending(function(o){s.completeCurrentAndProcessNextAutoResend(o),i._trigger(o)}).onFailed(function(o,l){s.completeCurrentAndProcessNextAutoResend(l),i._triggerFailed(o,l)}).onSucceeded(function(o){var l=jr.of(r._iid);s.completeCurrentAndProcessNextAutoResend(o),r._updateLastMessage(o),l.handlers.map(function(u){u.onChannelChanged&&u.onChannelChanged(r)}),a.dispatch(new Vt({channels:[r],context:{source:oe.EVENT_MESSAGE_SENT}})),i._trigger(o)}),i},n.prototype.deleteMessage=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,e.prototype.deleteMessage.call(this,t)];case 1:return r.sent(),t.messageId===0&&t instanceof yr&&q.of(this._iid).dispatcher.dispatch(new kx({reqId:t.reqId,source:oe.EVENT_MESSAGE_DELETED})),[2]}})})},n.prototype.hide=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u,c;return T(this,function(h){switch(h.label){case 0:return r=z(z({},q1),t),me(function(f){return Y("boolean",f.hidePreviousMessages,!0)&&Y("boolean",f.allowAutoUnhide,!0)}(r)).throw(Q.invalidParameters),i=q.of(this._iid),a=i.dispatcher,s=i.sdkState,o=i.requestQueue,l=new LY(z({channelUrl:this.url,userId:s.userId},r)),[4,o.send(l)];case 1:return u=h.sent(),c=u.as(kY).messageOffsetTimestamp,this.hiddenState=r.allowAutoUnhide?ss.HIDDEN_ALLOW_AUTO_UNHIDE:ss.HIDDEN_PREVENT_AUTO_UNHIDE,r.hidePreviousMessages&&this._updateUnreadCount(0,0),c&&(this.messageOffsetTimestamp=c),a.dispatch(new Vt({channels:[this],context:{source:oe.EVENT_CHANNEL_HIDDEN},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.unhide=function(){return N(this,void 0,void 0,function(){var t,r,i,a;return T(this,function(s){switch(s.label){case 0:return t=q.of(this._iid),r=t.dispatcher,i=t.requestQueue,a=new lQ({channelUrl:this.url}),[4,i.send(a)];case 1:return s.sent(),this.hiddenState=ss.UNHIDDEN,r.dispatch(new Vt({channels:[this],context:{source:oe.EVENT_CHANNEL_UNHIDDEN},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype.delete=function(){return N(this,void 0,void 0,function(){var t,r;return T(this,function(i){switch(i.label){case 0:return t=q.of(this._iid).requestQueue,r=new oQ({channelUrl:this.url}),[4,t.send(r)];case 1:return i.sent(),[2]}})})},n.prototype.markAsRead=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u=this;return T(this,function(c){switch(c.label){case 0:return t=q.of(this._iid),r=t.dispatcher,i=t.requestQueue,a=new Sq({channelUrl:this.url}),[4,i.send(a)];case 1:return s=c.sent(),o=s.as(Kx).readStatus,this._updateUnreadMemberState(o.reader.userId,o.readAt),l=!1,(this.unreadMessageCount>0||this.unreadMentionCount>0)&&(this._updateUnreadCount(0,0),l=!0),jr.of(this._iid).handlers.map(function(h){l&&h.onChannelChanged&&h.onChannelChanged(u),h.onUserMarkedRead&&h.onUserMarkedRead(u,[o.reader.userId])}),r.dispatch(new Vt({channels:[this],context:{source:oe.EVENT_CHANNEL_READ,userIds:[o.reader.userId]}})),[2]}})})},n.prototype.markAsUnread=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u,c,h,f,p,_,g=this;return T(this,function(C){switch(C.label){case 0:return r=q.of(this._iid),i=r.sdkState,a=r.dispatcher,s=r.requestQueue,o=new Tq({channelUrl:this.url,channelType:this.channelType,messageId:t.messageId,userId:i.userId,isExcluded:!0,uniqueId:"read-".concat(_s())}),[4,s.send(o)];case 1:return l=C.sent(),u=l.as(Nq),c=u.readAt,h=u.unreadMessageCount,f=u.userId,p=u.isExcluded,_=u.totalUnreadCount,this._updateUnreadMemberState(f,c,p),this._updateUnreadCount(h,this.unreadMentionCount),a.dispatch(new UN(_)),jr.of(this._iid).handlers.map(function(E){E.onChannelChanged&&E.onChannelChanged(g),E.onUserMarkedUnread&&E.onUserMarkedUnread(g,[f])}),a.dispatch(new Vt({channels:[this],context:{source:oe.EVENT_CHANNEL_UNREAD,userIds:[f]}})),[2]}})})},n.prototype.markAsDelivered=function(){return N(this,void 0,void 0,function(){var t,r,i,a;return T(this,function(s){switch(s.label){case 0:return t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new $Y({channelUrl:this.url,userId:r.userId}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},n.prototype.startTyping=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s;return T(this,function(o){switch(o.label){case 0:return t=q.of(this._iid),r=t.requestQueue,i=t.typingIndicatorThrottle,(a=new Date().getTime())-this._typingStarted>=i?(this._typingStarted=a,this._typingEnded=0,s=new PY({channelUrl:this.url,time:this._typingStarted}),[4,r.send(s)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},n.prototype.endTyping=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s;return T(this,function(o){switch(o.label){case 0:return t=q.of(this._iid),r=t.requestQueue,i=t.typingIndicatorThrottle,(a=new Date().getTime())-this._typingEnded>=i?(this._typingStarted=0,this._typingEnded=a,s=new BY({channelUrl:this.url,time:this._typingStarted}),[4,r.send(s)]):[3,2];case 1:o.sent(),o.label=2;case 2:return[2]}})})},n.prototype.createScheduledUserMessage=function(t){t=z(z({},DW),t),me(UW(t)).throw(Q.invalidParameters);var r=new Da;return this._createScheduledUserMessage(t,r),r},n.prototype.updateScheduledUserMessage=function(t,r){return N(this,void 0,void 0,function(){var i,a,s,o;return T(this,function(l){switch(l.label){case 0:return i=z(z({},vQ),r),me(function(u){return t4(u)&&Y("number",u.scheduledAt,!0)}(i)).throw(Q.invalidParameters),a=q.of(this._iid).requestQueue,s=new _Q(z({reqId:this._generateRequestId(),scheduledMessageId:t,channelType:this.channelType,channelUrl:this.url},i)),[4,a.send(s)];case 1:return o=l.sent(),[2,o.as(u4).message]}})})},n.prototype.createScheduledFileMessage=function(t){var r=this;t=z(z({},LW),t),me(kW(t)).throw(Q.invalidParameters);var i=Date.now(),a=this._generateRequestId(),s=new Da;return Bi(uW).then(function(){var o=r._createPendingScheduledFileMessage(t,a,i);ze(function(){return N(r,void 0,void 0,function(){return T(this,function(l){return[2,s._trigger(o)]})})})}),ai(t.file)?this._uploadFileAndUpdateParams(t).then(function(){return r._createScheduledFileMessage(t,s,a,i)}):this._createScheduledFileMessage(t,s,a,i),s},n.prototype.updateScheduledFileMessage=function(t,r){return N(this,void 0,void 0,function(){var i,a,s;return T(this,function(o){switch(o.label){case 0:return i=z(z({},fQ),r),me(function(l){return $N(l)&&Y("number",l.scheduledAt,!0)&&(ai(l.file)||Y("string",l.fileUrl))&&Y("string",l.fileName,!0)&&Y("string",l.mimeType,!0)&&Y("number",l.fileSize,!0)&&(l.thumbnailSizes===null||l.thumbnailSizes===void 0||l.thumbnailSizes.every(function(u){return Y("object",u)&&u.maxWidth>0&&u.maxHeight>0}))}(i)).throw(Q.invalidParameters),ai(i.file)?[4,this._uploadFileAndUpdateParams(i)]:[3,2];case 1:o.sent(),o.label=2;case 2:return a=new pQ(z({reqId:this._generateRequestId(),scheduledMessageId:t,channelType:this.channelType,channelUrl:this.url},i)),[4,q.of(this._iid).requestQueue.send(a)];case 3:return s=o.sent(),[2,s.as(mQ).message]}})})},n.prototype.cancelScheduledMessage=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return r=new gQ({scheduledMessageId:t,channelType:this.channelType,channelUrl:this.url}),[4,q.of(this._iid).requestQueue.send(r)];case 1:return i.sent(),[2]}})})},n.prototype.sendScheduledMessageNow=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){switch(i.label){case 0:return r=new EQ({scheduledMessageId:t,channelType:this.channelType,channelUrl:this.url}),[4,q.of(this._iid).requestQueue.send(r)];case 1:return i.sent(),[2]}})})},n.prototype.getMyPushTriggerOption=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new CQ({userId:r.userId,channelUrl:this.url}),[4,i.send(a)];case 1:return s=l.sent(),o=s.as(SQ).pushTriggerOption,this.myPushTriggerOption=o,[2,o]}})})},n.prototype.setMyPushTriggerOption=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return me(Bt(Zc,t)).throw(Q.invalidParameters),r=q.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,o=new yQ({userId:a.userId,channelUrl:this.url,pushTriggerOption:t}),[4,s.send(o)];case 1:return l=c.sent(),u=l.as(bQ).pushTriggerOption,this.myPushTriggerOption=u,i.dispatch(new Vt({channels:[this],context:{source:oe.EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,u]}})})},n.prototype.setMyCountPreference=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return me(Bt(as,t)).throw(Q.invalidParameters),r=q.of(this._iid),i=r.dispatcher,a=r.sdkState,s=r.requestQueue,o=new uQ({channelUrl:this.url,userId:a.userId,countPreference:t}),[4,s.send(o)];case 1:return l=c.sent(),u=l.as(cQ).countPreference,this.myCountPreference=u,this._updateUnreadCount(this.unreadMessageCount,this.unreadMentionCount),i.dispatch(new Vt({channels:[this],context:{source:oe.EVENT_CHANNEL_UPDATED},isWebSocketEventComing:!0})),[2,u]}})})},n.prototype.resetMyHistory=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return t=q.of(this._iid),r=t.dispatcher,i=t.requestQueue,a=new dQ({channelUrl:this.url}),[4,i.send(a)];case 1:return s=l.sent(),o=s.as(hQ).messageOffsetTimestamp,this.messageOffsetTimestamp=o,this.lastMessage&&this.lastMessage.createdAt<o&&(this.lastMessage=null),this._updateUnreadCount(0,0),this.totalUnreadReplyCount=0,r.dispatch(new Vt({channels:[this],context:{source:oe.EVENT_CHANNEL_RESET_HISTORY},isWebSocketEventComing:!0})),[2,this]}})})},n.prototype._uploadFileAndUpdateParams=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u,c,h,f;return T(this,function(p){switch(p.label){case 0:return ai(t.file)?(r=q.of(this._iid).requestQueue,i=new d0({file:t.file,channelUrl:this.url,thumbnailSizes:t.thumbnailSizes,requestId:this._generateRequestId()}),[4,r.send(i)]):[3,2];case 1:a=p.sent(),s=a.as(h0),o=s.url,l=s.fileSize,u=l===void 0?t.fileSize:l,c=s.thumbnails,h=s.requireAuth,f=h!==void 0&&h,t.fileUrl=o,t.fileSize=u,t.requireAuth=f,t._thumbnails=c,p.label=2;case 2:return[2]}})})},n.prototype.resendMessage=function(t,r){var i,a=this;if(me(t instanceof yr&&!t.scheduledInfo&&t.isResendable).throw(Q.invalidParameters),t.isUserMessage()){var s=(i=t.messageParams)!==null&&i!==void 0?i:P1(t),o=new Da;return this._sendUserMessage(s,Ci.RESEND,t.reqId).onPending(function(h){o._trigger(h)}).onFailed(function(h,f){o._triggerFailed(h,f)}).onSucceeded(function(h){a._tryUpdateLastMessageAndCallEvents(a,h),o._trigger(h)}),o}if(t.isFileMessage()){var l=this._validateFailedFileMessageHasFile(t,r);me(l).throw(Q.invalidParameters),s=F1(t,r);var u=new Da;return this._sendFileMessage(s,Ci.RESEND,t.reqId).onPending(function(h){u._trigger(h)}).onFailed(function(h,f){u._triggerFailed(h,f)}).onSucceeded(function(h){a._tryUpdateLastMessageAndCallEvents(a,h),u._trigger(h)}),u}if(t.isMultipleFilesMessage()){s=t.messageParams;var c=new gg;return this._sendMultipleFilesMessage(s,Ci.RESEND,t.reqId).onPending(function(h){c._trigger(h)}).onFailed(function(h,f){c._triggerFailed(h,f)}).onSucceeded(function(h){a._tryUpdateLastMessageAndCallEvents(a,h),c._trigger(h)}).onFileUploaded(function(h,f,p,_){c._triggerOnFileUploaded(h,f,p,_)}),c}},n.prototype.copyMessage=function(t,r){var i=this;if(me(t instanceof m0&&r instanceof yr&&r.sendingStatus===sn.SUCCEEDED&&this.url===r.channelUrl&&!r.scheduledInfo).throw(Q.invalidParameters),r.isUserMessage()){me(!r.poll).throw(Q.notSupportedError);var a=Xx(r),s=new Da;return t._sendUserMessage(a).onPending(function(u){s._trigger(u)}).onFailed(function(u,c){s._triggerFailed(u,c)}).onSucceeded(function(u){t.isGroupChannel()&&i._tryUpdateLastMessageAndCallEvents(t,u),s._trigger(u)}),s}if(r.isFileMessage()){a=Jx(r);var o=new Da;return t._sendFileMessage(a).onPending(function(u){o._trigger(u)}).onFailed(function(u,c){o._triggerFailed(u,c)}).onSucceeded(function(u){t.isGroupChannel()&&i._tryUpdateLastMessageAndCallEvents(t,u),o._trigger(u)}),o}if(r.isMultipleFilesMessage()){if(t.isGroupChannel()){a=eW(r);var l=new gg;return t._sendMultipleFilesMessage(a,Ci.COPY).onPending(function(u){l._trigger(u)}).onFailed(function(u,c){l._triggerFailed(u,c)}).onSucceeded(function(u){i._tryUpdateLastMessageAndCallEvents(t,u),l._trigger(u)}).onFileUploaded(function(u,c,h,f){l._triggerOnFileUploaded(u,c,h,f)}),l}throw Q.channelTypeNotSupportedError}},n.prototype.getMessageDeletionTimestamp=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return t=q.of(this._iid),r=t.requestQueue,i=t.dispatcher,a=new TQ({channelUrl:this.url,channelType:this.channelType}),[4,r.send(a)];case 1:return s=l.sent(),o=s.as(NQ).messageDeletionTimestamp,this._messageDeletionTimestamp=o,i.dispatch(new F4({channel:this})),[2,o]}})})},n.prototype.submitCSAT=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:return me(Y("number",t.csat)&&Y("string",t.csatType)&&Y("string",t.csatReason,!0)&&Y("boolean",t.isResolved,!0)&&Y("number",t.resolutionScore,!0)&&Y("number",t.csatStartedAt,!0)).throw(Q.invalidParameters),r=q.of(this._iid),i=r.requestQueue,a=r.dispatcher,s=new IQ(z({channelUrl:this.url},t)),[4,i.send(s)];case 1:return o=u.sent(),l=o.as(MQ).conversation,this.conversation=l,a.dispatch(new Vt({channels:[this],context:{source:oe.EVENT_CHANNEL_CSAT_SUBMITTED}})),[2,l]}})})},n.prototype.markConversationAsHandoff=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return t=q.of(this._iid),r=t.requestQueue,i=t.dispatcher,a=new AQ({channelUrl:this.url}),[4,r.send(a)];case 1:return s=l.sent(),o=s.as(wQ).conversation,this.conversation=o,i.dispatch(new Vt({channels:[this],context:{source:oe.EVENT_CHANNEL_CONVERSATION_HANDEDOFF}})),[2,o]}})})},n.prototype.closeConversation=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return t=q.of(this._iid),r=t.requestQueue,i=t.dispatcher,a=new RQ({channelUrl:this.url}),[4,r.send(a)];case 1:return s=l.sent(),o=s.as(OQ).conversation,this.conversation=o,i.dispatch(new Vt({channels:[this],context:{source:oe.EVENT_CHANNEL_UPDATED}})),[2,o]}})})},n.prototype.getContextObject=function(t){return N(this,void 0,void 0,function(){var r,i,a;return T(this,function(s){switch(s.label){case 0:return r=q.of(this._iid).requestQueue,i=new LQ({aiAgentId:t,channelUrl:this.url}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(kQ).contextObject]}})})},n.prototype.updateContext=function(t,r){return N(this,void 0,void 0,function(){var i,a,s;return T(this,function(o){switch(o.label){case 0:return i=q.of(this._iid).requestQueue,a=new DQ({aiAgentId:t,channelUrl:this.url,context:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(UQ).contextObject]}})})},n.prototype.patchContext=function(t,r){return N(this,void 0,void 0,function(){var i,a,s;return T(this,function(o){switch(o.label){case 0:return i=q.of(this._iid).requestQueue,a=new xQ({aiAgentId:t,channelUrl:this.url,context:r}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(PQ).contextObject]}})})},n}(m0),du={},FQ=function(){function e(n){var t=n._iid,r=n.limit,i=r===void 0?100:r,a=this;this.ref=0,this._iid=t,this._limit=i;var s,o=q.of(this._iid),l=o.sdkState,u=o.dispatcher,c=o.logger,h=o.cacheContext,f=o.statManager;this._metadataKey=(s=l.userId,"sendbird:".concat(s,"@groupchannel/sync.meta"));var p=function(_){return"sendbird:".concat(_,"@groupchannel/sync")}(l.userId);this._sync=new $l(p,function(){return N(a,void 0,void 0,function(){var _,g,C,E,y,S,I,w,R,A,U,O,B,F,P,G;return T(this,function(L){switch(L.label){case 0:return _={hasNext:!0,nextToken:""},[4,this.loadMetadata()];case 1:if(L.sent(),c.debug("channel background sync from",(R=this._metadata)===null||R===void 0?void 0:R.token),(A=this._metadata)===null||A===void 0?void 0:A.completed)return[3,14];g={includeEmpty:!0,includeMetaData:!0,hiddenChannelFilter:Fs.ALL,order:mr.CHRONOLOGICAL},L.label=2;case 2:if(L.trys.push([2,9,12,13]),g.order!==mr.LATEST_LAST_MESSAGE)return[3,6];L.label=3;case 3:return L.trys.push([3,5,,6]),[4,h.preference.get(LN(l.appId))];case 4:return C=L.sent(),g.includeChatNotification=!!C,[3,6];case 5:return L.sent(),g.includeChatNotification=!1,[3,6];case 6:return[4,jr.of(this._iid).getMyGroupChannels((O=(U=this._metadata)===null||U===void 0?void 0:U.token)!==null&&O!==void 0?O:"",g,this._limit,oe.SYNC_CHANNEL_BACKGROUND)];case 7:return E=L.sent(),y=E.channels,S=E.token,_.hasNext=y.length>=this._limit&&!!S,_.nextToken=S,this._metadata&&(this._metadata.token=S,(w=this._metadata.range).extends.apply(w,it([],Ge(y.map(function($){return $.createdAt})),!1)),this._metadata.completed=!_.hasNext),c.debug("channel background sync progress",_),[4,this.saveMetadata()];case 8:return L.sent(),[3,13];case 9:return I=L.sent(),c.debug("channel background sync error",I),I instanceof Q&&I.isInvalidTokenError?[4,this.clearMetaData()]:[3,11];case 10:L.sent(),L.label=11;case 11:throw I;case 12:return f.put(new Kn({type:kn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:"",measured_on:"channel_back_sync",event:"cache_fetch",max_db_size:(F=(B=h.localCacheConfig)===null||B===void 0?void 0:B.maxSize)!==null&&F!==void 0?F:0,use_local_cache:h.localCacheEnabled,starting_point:0,message_init_policy:(G=(P=g.order)===null||P===void 0?void 0:P.toString())!==null&&G!==void 0?G:"",collection_id:l.userId}})),[7];case 13:return[3,15];case 14:_.hasNext=!1,_.nextToken="",L.label=15;case 15:return[2,_]}})})}),this._connectionEventContext=u.on(function(_){_ instanceof ja&&(_.stateType===gn.CONNECTED?a.resume():a.pause())})}return e.of=function(n){return du[n]||(du[n]=new e({_iid:n})),du[n].ref++,du[n]},e.clear=function(n){du[n]&&(du[n].close(),delete du[n])},Object.defineProperty(e.prototype,"range",{get:function(){var n,t;return(t=(n=this._metadata)===null||n===void 0?void 0:n.range)!==null&&t!==void 0?t:new fo({})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"completed",{get:function(){var n;return!!(!((n=this._metadata)===null||n===void 0)&&n.completed)},enumerable:!1,configurable:!0}),e.prototype.loadMetadata=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){switch(t.label){case 0:return this._metadata?[3,2]:[4,q.of(this._iid).cacheContext.preference.get(this._metadataKey)];case 1:n=t.sent(),this._metadata={token:n?n.token:"",range:new fo(n?n.range:{top:Number.MAX_SAFE_INTEGER,bottom:0}),completed:!!n&&n.completed},t.label=2;case 2:return[2,this._metadata]}})})},e.prototype.saveMetadata=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this._metadata?[4,q.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}})})},e.prototype.clearMetaData=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,q.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}})})},e.prototype.resume=function(){var n,t,r=q.of(this._iid),i=r.logger;r.sessionManager.session.hasSession&&(i.debug("channel background sync resume()"),this._sync.start((t=(n=this._metadata)===null||n===void 0?void 0:n.token)!==null&&t!==void 0?t:""))},e.prototype.pause=function(){q.of(this._iid).logger.debug("channel background sync stop()"),this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete du[this._iid])},e}(),hu={},BQ=function(){function e(n){var t=n._iid,r=this;this.ref=0,this._iid=t;var i,a=q.of(this._iid),s=a.logger,o=a.sdkState,l=a.dispatcher,u=a.cacheContext,c=a.statManager;this._metadataKey=(i=o.userId,"sendbird:".concat(i,"@groupchannel/changelogs.meta")),this._subscribers=new Dd;var h=function(f){return"sendbird:".concat(f,"@groupchannel/changelogs")}(o.userId);this._sync=new $l(h,function(){return N(r,void 0,void 0,function(){var f,p,_,g,C,E,y,S,I,w,R,A,U;return T(this,function(O){switch(O.label){case 0:return f={hasNext:!0,nextToken:0},[4,this.loadMetadata()];case 1:O.sent(),s.debug("channel changelog sync from",(R=this._metadata)===null||R===void 0?void 0:R.token),p=jr.of(this._iid),O.label=2;case 2:O.trys.push([2,9,12,16]),_={includeEmpty:!0,includeMetaData:!0},O.label=3;case 3:return O.trys.push([3,5,,6]),[4,u.preference.get(LN(o.appId))];case 4:return g=O.sent(),_.includeChatNotification=!!g,[3,6];case 5:return O.sent(),_.includeChatNotification=!1,[3,6];case 6:return[4,p.getMyGroupChannelChangeLogs((U=(A=this._metadata)===null||A===void 0?void 0:A.token)!==null&&U!==void 0?U:"",_,oe.SYNC_CHANNEL_CHANGELOGS)];case 7:return C=O.sent(),E=C.updatedChannels,y=C.deletedChannelUrls,S=C.hasMore,I=C.token,this._subscribers.dispatch("progress",{updatedChannels:E,deletedChannelUrls:y,hasMore:S,token:I}),f.hasNext=S,f.nextToken=I,this._metadata&&(this._metadata.token=I),s.debug("channel changelog sync progress",f),[4,this.saveMetadata()];case 8:return O.sent(),u.localCacheEnabled&&c.put(new Kn({type:kn.FEATURE_LOCALCACHE_EVENT,ts:Date.now(),data:{channel_url:"",measured_on:"channel_change_log_sync",event:E.length>0||y.length>0?"cache_miss":"cache_hit",max_db_size:E.length,use_local_cache:u.localCacheEnabled,starting_point:0,message_init_policy:y.length.toString(),collection_id:o.userId}})),[3,16];case 9:return w=O.sent(),s.debug("channel changelog sync error",w),w instanceof Q&&w.isInvalidTokenError?[4,this.clearMetadata()]:[3,11];case 10:O.sent(),O.label=11;case 11:throw w;case 12:return f.hasNext?[3,15]:[4,Bi(500)];case 13:return O.sent(),[4,p.removeChannelsByRotation()];case 14:O.sent(),O.label=15;case 15:return[7];case 16:return[2,f]}})})}),this._sync.on("stop",function(){r._subscribers.dispatch("pause")}),this._connectionEventContext=l.on(function(f){f instanceof ja&&(f.stateType===gn.CONNECTED?r.resume():r.pause())})}return e.of=function(n){return hu[n]||(hu[n]=new e({_iid:n})),hu[n].ref++,hu[n]},e.clear=function(n){hu[n]&&(hu[n].close(),delete hu[n])},Object.defineProperty(e.prototype,"isRunning",{get:function(){return this._sync.isRunning},enumerable:!1,configurable:!0}),e.prototype.loadMetadata=function(){return N(this,void 0,void 0,function(){var n,t,r,i;return T(this,function(a){switch(a.label){case 0:return this._metadata?[3,2]:(n=q.of(this._iid),t=n.cacheContext,r=n.firstConnectedAt,[4,t.preference.get(this._metadataKey)]);case 1:i=a.sent(),this._metadata={token:i?i.token:r},a.label=2;case 2:return[2,this._metadata]}})})},e.prototype.saveMetadata=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return this._metadata?[4,q.of(this._iid).cacheContext.preference.set(this._metadataKey,this._metadata)]:[3,2];case 1:return n.sent(),[2,!0];case 2:return[2,!1]}})})},e.prototype.clearMetadata=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,q.of(this._iid).cacheContext.preference.remove(this._metadataKey)];case 1:return n.sent(),this._metadata=void 0,[2]}})})},e.prototype.on=function(n,t){return this._subscribers.on(n,t)},e.prototype.resume=function(){q.of(this._iid).sessionManager.session.hasSession&&this._sync.start(0)},e.prototype.pause=function(){this._sync.stop()},e.prototype.close=function(){this.ref--,this.ref<=0&&(this.ref=0,this.pause(),this._connectionEventContext.close(),delete hu[this._iid])},e}(),Cg=function(e,n){return e.findIndex(function(t){return t.isIdentical(n)})},wR=function(e,n,t){if(e.length>0){for(var r=Cg(e,n),i=0,a=e.length-1,s=Math.floor((i+a)/2);i<a;){var o=RR(e[s],n,t);if(o>0)a=s,s=Math.floor((i+a)/2);else{if(!(o<0))return{place:s,oldPosition:r};i=s+1,s=Math.floor((i+a)/2)}}return{place:RR(e[s],n,t)>=0?s:s+1,oldPosition:r}}return{place:e.length,oldPosition:-1}},RR=function(e,n,t){switch(t){case mr.LATEST_LAST_MESSAGE:return e.lastMessage&&n.lastMessage?(r=n.lastMessage.createdAt-e.lastMessage.createdAt)===0?n.createdAt-e.createdAt:r:e.lastMessage?-1:n.lastMessage?1:n.createdAt-e.createdAt;case mr.CHRONOLOGICAL:return n.createdAt-e.createdAt;case mr.CHANNEL_NAME_ALPHABETICAL:var r;return(r=e.name.localeCompare(n.name))===0?e.createdAt-n.createdAt:r;default:return 0}},HQ=function(){function e(n,t){var r=t.filter,i=r===void 0?new pE:r,a=t.order,s=a===void 0?mr.LATEST_LAST_MESSAGE:a,o=t.limit,l=o===void 0?c4:o,u=t.includeChangesOnInitialLoad,c=u!==void 0&&u,h=this;this.channels=[],this._isInitialized=!1,this._iid=n,this._key="gcc-".concat(_s()),this._isDisposed=!1,this._isGetRemoteChannelsSucceeded=!0,this._includeChangesOnInitialLoad=c,this.filter=i,this.order=s,this._hasMore=!0,this._token="",this._limit=l;var f=q.of(this._iid),p=f.sdkState,_=f.cacheContext,g=f.dispatcher;_.localCacheEnabled&&(this._backgroundSync=FQ.of(n),this._backgroundSync.resume()),this._changelogSync=BQ.of(n),this._changelogSync.resume(),jr.of(this._iid).subscribeChannelEvent(this._key,{onUpdate:function(C,E){var y=E.source;if(bg(y)){var S=C.filter(function(w){return h.filter.match(w,p.userId)}),I=C.filter(function(w){return!h.filter.match(w,p.userId)}).map(function(w){return w.url});S.length>0&&h._addChannelsToView(S,E),I.length>0&&h._removeChannelsFromView(I,E)}},onRemove:function(C,E){h._removeChannelsFromView(C,E)}}),g.on(function(C){C instanceof ja&&(C.stateType===gn.CONNECTED?h._isGetRemoteChannelsSucceeded||N(h,void 0,void 0,function(){return T(this,function(E){switch(E.label){case 0:return[4,this._revokeLoadMore()];case 1:return E.sent(),[2]}})}):C.stateType===gn.LOGOUT&&h.dispose())})}return Object.defineProperty(e.prototype,"hasMore",{get:function(){return!this._isDisposed&&this._hasMore},enumerable:!1,configurable:!0}),e.prototype.setGroupChannelCollectionHandler=function(n){this._handler=n},e.prototype._addChannelsToView=function(n,t,r){var i,a,s,o,l=this;r===void 0&&(r=!1);var u=[],c=[],h=[];try{for(var f=ye(n),p=f.next();!p.done;p=f.next()){var _=p.value,g=Cg(this.channels,_);g>=0&&this.channels.splice(g,1);var C=wR(this.channels,_,this.order).place;if(g<0)C===this.channels.length?!r&&this._hasMore||(u.push(_),this.channels.push(_)):(u.push(_),this.channels.splice(C,0,_));else switch(t.source){case oe.EVENT_CHANNEL_UPDATED:case oe.EVENT_MESSAGE_RECEIVED:case oe.SYNC_CHANNEL_CHANGELOGS:case oe.EVENT_MESSAGE_SENT:this.order===mr.CHANNEL_NAME_ALPHABETICAL&&this._hasMore&&C===this.channels.length?h.push(_):(this.channels.splice(C,0,_),c.push(_));break;default:this.channels.splice(C,0,_),c.push(_)}}}catch(I){i={error:I}}finally{try{p&&!p.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}if(h.length>0)try{for(var E=ye(h),y=E.next();!y.done;y=E.next()){_=y.value;var S=Cg(this.channels,_);S!==-1&&this.channels.splice(S,1)}}catch(I){s={error:I}}finally{try{y&&!y.done&&(o=E.return)&&o.call(E)}finally{if(s)throw s.error}}bg(t.source)&&ze(function(){return N(l,void 0,void 0,function(){var I,w,R;return T(this,function(A){return u.length>0&&(!((I=this._handler)===null||I===void 0)&&I.onChannelsAdded)&&this._handler.onChannelsAdded(t,u),c.length>0&&(!((w=this._handler)===null||w===void 0)&&w.onChannelsUpdated)&&this._handler.onChannelsUpdated(t,c),h.length>0&&(!((R=this._handler)===null||R===void 0)&&R.onChannelsDeleted)&&this._handler.onChannelsDeleted(t,h.map(function(U){return U.url})),[2]})})})},e.prototype._removeChannelsFromView=function(n,t){var r,i,a=this,s=[],o=function(h){var f=l.channels.findIndex(function(p){return p.url===h});f>=0&&(s.push(l.channels[f].url),l.channels.splice(f,1))},l=this;try{for(var u=ye(n),c=u.next();!c.done;c=u.next())o(c.value)}catch(h){r={error:h}}finally{try{c&&!c.done&&(i=u.return)&&i.call(u)}finally{if(r)throw r.error}}return bg(t.source)&&s.length>0&&ze(function(){return N(a,void 0,void 0,function(){var h;return T(this,function(f){return!((h=this._handler)===null||h===void 0)&&h.onChannelsDeleted&&this._handler.onChannelsDeleted(t,s),[2]})})}),s},e.prototype._getLocalChannels=function(){return N(this,void 0,void 0,function(){var n,t;return T(this,function(r){switch(r.label){case 0:return n=jr.of(this._iid),t=this.channels.length>0?function(i,a){var s,o,l,u;switch(a){case mr.LATEST_LAST_MESSAGE:return(o=(s=i.lastMessage)===null||s===void 0?void 0:s.createdAt)!==null&&o!==void 0?o:i.createdAt;case mr.CHRONOLOGICAL:return i.createdAt;case mr.CHANNEL_NAME_ALPHABETICAL:return i.name;default:return(u=(l=i.lastMessage)===null||l===void 0?void 0:l.createdAt)!==null&&u!==void 0?u:i.createdAt}}(this.channels[this.channels.length-1],this.order):null,[4,n.getChannelsFromCache(t,this.filter,this.order,this._limit,t?this.channels[this.channels.length-1].url:void 0)];case 1:return[2,r.sent()]}})})},e.prototype._getRemoteChannels=function(){return N(this,void 0,void 0,function(){var n,t,r;return T(this,function(i){switch(i.label){case 0:return[4,jr.of(this._iid).getMyGroupChannels(this._token,$e(z(z({},this.filter),{userIdsFilter:this.filter.userIdsFilter,searchFilter:this.filter.searchFilter,order:this.order})),this._limit)];case 1:return n=i.sent(),t=n.channels,r=n.token,this._token=r,this._hasMore=!!r,[2,t]}})})},e.prototype._revokeLoadMore=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){switch(t.label){case 0:if(this._isDisposed)return[2];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this._getRemoteChannels()];case 2:return n=t.sent(),this._isGetRemoteChannelsSucceeded=!0,this._addChannelsToView(n,{source:oe.REQUEST_CHANNEL},!0),[3,4];case 3:return t.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,4];case 4:return[2]}})})},e.prototype.loadMore=function(){var n;return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w,R,A=this;return T(this,function(U){switch(U.label){case 0:if(this._isDisposed)throw new Q({code:Le.COLLECTION_DISPOSED,message:"Collection has been disposed."});return t=null,this._includeChangesOnInitialLoad&&this.channels.length===0&&this._changelogSync.isRunning?[4,new Promise(function(O){A._changelogSyncSubscriberContext=A._changelogSync.on("progress",function(B){return O(B)}).on("pause",function(){return O(null)})})]:[3,2];case 1:t=U.sent(),(n=this._changelogSyncSubscriberContext)===null||n===void 0||n.close(),U.label=2;case 2:return r=q.of(this._iid),i=r.cacheContext,a=r.connectionManager,s=r.statManager,this._isInitialized?[3,5]:(this._isInitialized=!0,i.localCacheEnabled?[4,this._backgroundSync.loadMetadata()]:[3,4]);case 3:U.sent(),U.label=4;case 4:s.put(new Dp({type:kn.FEATURE_LOCALCACHE,data:{use_local_cache:i.localCacheEnabled,collection_interface:{group_channel:!0}}})),U.label=5;case 5:return o=[],this._hasMore?!i.localCacheEnabled||a.isConnected&&!this._backgroundSync.completed?[3,7]:[4,or(function(){return N(A,void 0,void 0,function(){return T(this,function(O){switch(O.label){case 0:return[4,this._getLocalChannels()];case 1:return o=O.sent(),[2]}})})})]:[3,11];case 6:return U.sent(),this._hasMore=o.length>=this._limit,[3,10];case 7:return U.trys.push([7,9,,10]),[4,this._getRemoteChannels()];case 8:return o=U.sent(),this._isGetRemoteChannelsSucceeded=!0,[3,10];case 9:return U.sent(),this._isGetRemoteChannelsSucceeded=!1,[3,10];case 10:this._addChannelsToView(o,{source:oe.REQUEST_CHANNEL},!0),U.label=11;case 11:if(t){l=q.of(this._iid).sdkState,u=t.updatedChannels.filter(function(O){return A.filter.match(O,l.userId)});try{for(c=ye(u),h=c.next();!h.done;h=c.next())f=h.value,(y=Cg(o,f))>=0?o[y]=f:(p=wR(o,f,this.order).place,o.splice(p,0,f)),this._addChannelsToView([f],{source:oe.REQUEST_CHANNEL},!0)}catch(O){S={error:O}}finally{try{h&&!h.done&&(I=c.return)&&I.call(c)}finally{if(S)throw S.error}}_=o.map(function(O){return O.url});try{for(g=ye(t.deletedChannelUrls),C=g.next();!C.done;C=g.next())E=C.value,(y=_.indexOf(E))>=0&&(o.splice(y,1),_.splice(y,1))}catch(O){w={error:O}}finally{try{C&&!C.done&&(R=g.return)&&R.call(g)}finally{if(w)throw w.error}}this._removeChannelsFromView(t.deletedChannelUrls,{source:oe.REQUEST_CHANNEL})}return[2,o]}})})},e.prototype.dispose=function(){var n,t,r;this._isDisposed||(this._isDisposed=!0,this.channels.length>0&&this.channels.splice(0,this.channels.length),(n=this._backgroundSync)===null||n===void 0||n.close(),(t=this._changelogSync)===null||t===void 0||t.close(),(r=this._changelogSyncSubscriberContext)===null||r===void 0||r.close(),jr.of(this._iid).unsubscribeChannelEvent(this._key))},e}(),GQ=function(e){function n(t){var r=this,i=t.token,a=t.limit,s=t.order,o=t.includeEmpty,l=t.membershipFilter,u=t.channelNameContainsFilter,c=t.channelUrlsFilter,h=t.customTypesFilter,f=t.customTypeStartsWithFilter,p=t.superChannelFilter,_=t.metadataOrderKeyFilter,g=t.metadataKey,C=t.metadataValues,E=t.metadataValueStartsWith,y=t.includeFrozen,S=t.includeMetaData;return(r=e.call(this)||this).method=fe.GET,r.path=qi,r.params=Ae($e({token:i,limit:a,order:s,show_member:!0,show_read_receipt:!0,show_delivery_receipt:!0,show_empty:o,public_mode:Yo.PUBLIC,public_membership_mode:l,name_contains:u,channel_urls:c,custom_types:h,custom_type_startswith:f,super_mode:p,metadata_order_key:_,metadata_key:g,metadata_values:C,metadata_value_startswith:E,show_frozen:y,show_metadata:S})),r}return k(n,e),n}(ve),$Q=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.channels=[];var a=r.next,s=r.channels,o=r.ts;return i.token=a,s&&s.length>0&&(i.channels=s.map(function(l){return l.ts=o,new gs(t,l)})),i.ts=typeof o=="number"?o:0,i}return k(n,e),n}(_e);(function(e){e.ALL="all",e.JOINED="joined"})(lp||(lp={}));var VQ=function(e){function n(t,r){var i,a,s,o,l,u,c,h,f,p,_,g,C,E,y=this;return(y=e.call(this,t,r)||this).includeEmpty=!1,y.includeFrozen=!0,y.includeMetaData=!0,y.channelUrlsFilter=null,y.customTypesFilter=null,y.customTypeStartsWithFilter=null,y.channelNameContainsFilter=null,y.membershipFilter=lp.ALL,y.superChannelFilter=pa.ALL,y.metadataKey=null,y.metadataValues=null,y.metadataOrderKeyFilter=null,y.metadataValueStartsWith=null,y.order=ip.CHRONOLOGICAL,y.includeEmpty=(i=r.includeEmpty)!==null&&i!==void 0&&i,y.includeFrozen=(a=r.includeFrozen)===null||a===void 0||a,y.includeMetaData=(s=r.includeMetaData)===null||s===void 0||s,y.channelUrlsFilter=(o=r.channelUrlsFilter)!==null&&o!==void 0?o:null,y.customTypesFilter=(l=r.customTypesFilter)!==null&&l!==void 0?l:null,y.customTypeStartsWithFilter=(u=r.customTypeStartsWithFilter)!==null&&u!==void 0?u:null,y.channelNameContainsFilter=(c=r.channelNameContainsFilter)!==null&&c!==void 0?c:null,y.membershipFilter=(h=r.membershipFilter)!==null&&h!==void 0?h:lp.ALL,y.superChannelFilter=(f=r.superChannelFilter)!==null&&f!==void 0?f:pa.ALL,y.metadataKey=(p=r.metadataKey)!==null&&p!==void 0?p:null,y.metadataValues=(_=r.metadataValues)!==null&&_!==void 0?_:null,y.metadataOrderKeyFilter=(g=r.metadataOrderKeyFilter)!==null&&g!==void 0?g:null,y.metadataValueStartsWith=(C=r.metadataValueStartsWith)!==null&&C!==void 0?C:null,y.order=(E=r.order)!==null&&E!==void 0?E:ip.CHRONOLOGICAL,y}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Y("boolean",this.includeEmpty)&&Y("boolean",this.includeFrozen)&&Y("boolean",this.includeMetaData)&&Y("string",this.channelNameContainsFilter,!0)&&Ht("string",this.channelUrlsFilter,!0)&&Ht("string",this.customTypesFilter,!0)&&Y("string",this.customTypeStartsWithFilter,!0)&&Bt(lp,this.membershipFilter)&&Bt(pa,this.superChannelFilter)&&Bt(ip,this.order)&&Y("string",this.metadataOrderKeyFilter,!0)&&Y("string",this.metadataKey,!0)&&Ht("string",this.metadataValues,!0)&&Y("string",this.metadataValueStartsWith,!0)},n.prototype.next=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:return this._validate()?this._isLoading?[3,3]:(t=[],this._hasNext?(this._isLoading=!0,r=q.of(this._iid).requestQueue,i=new GQ($e(z(z({},this),{token:this._token}))),[4,r.send(i)]):[3,2]):[3,5];case 1:return a=u.sent(),s=a.as($Q),o=s.channels,l=s.token,this._token=l,this._hasNext=!!l,this._isLoading=!1,[2,o];case 2:return[2,t];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(Kl),mE=function(e){function n(t){t===void 0&&(t={});var r=e.call(this)||this;return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)&&(r[i]=t[i])}),r}return k(n,e),n}(function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.onUserJoined=vt,t.onUserLeft=vt,t.onUserReceivedInvitation=vt,t.onUserDeclinedInvitation=vt,t.onChannelHidden=vt,t.onUnreadMemberStatusUpdated=vt,t.onUserMarkedRead=vt,t.onUserMarkedUnread=vt,t.onUndeliveredMemberStatusUpdated=vt,t.onTypingStatusUpdated=vt,t.onPollUpdated=vt,t.onPollVoted=vt,t.onPollDeleted=vt,t.onPinnedMessageUpdated=vt,t}return k(n,e),n}(k4)),zQ=function(e){function n(t){var r=this,i=t.token,a=t.limit,s=t.order,o=t.reverse,l=t.channelUrl,u=t.messageTypeFilter,c=t.scheduledStatus;return(r=e.call(this)||this).method=fe.GET,r.path="".concat(Kk),r.params=Ae($e({token:i,limit:a,reverse:o,channel_url:l,order:s,message_type:u,status:c})),r}return k(n,e),n}(ve),jQ=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.scheduledMessages=[];var a=r.next,s=r.scheduled_messages;return i.token=a,i.scheduledMessages=s.map(function(o){return Di(t,o)}),i}return k(n,e),n}(_e),qQ=function(e){function n(t,r){var i,a,s,o,l,u=this;return(u=e.call(this,t,r)||this).channelUrl=null,u.order=null,u.reverse=!1,u.scheduledStatus=null,u.messageTypeFilter=Mi.ALL,u.channelUrl=(i=r.channelUrl)!==null&&i!==void 0?i:null,u.order=(a=r.order)!==null&&a!==void 0?a:null,u.reverse=(s=r.reverse)!==null&&s!==void 0&&s,u.scheduledStatus=(o=r.scheduledStatus)!==null&&o!==void 0?o:null,u.messageTypeFilter=(l=r.messageTypeFilter)!==null&&l!==void 0?l:Mi.ALL,u}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Y("string",this.channelUrl,!0)&&(Bt(G1,this.order)||this.order===null)&&Y("boolean",this.reverse)&&(Ht(wu,this.scheduledStatus)||this.scheduledStatus===null)&&Bt(Mi,this.messageTypeFilter)},n.prototype.next=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=q.of(this._iid).requestQueue,r=new zQ($e(z(z({},this),{token:this._token}))),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(jQ),s=a.scheduledMessages,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(Kl),_E=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.name="groupChannel",t}return k(n,e),n.prototype.init=function(t,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,o=r.requestQueue,l=r.logger,u=r.onlineDetector,c=r.cacheContext;e.prototype.init.call(this,t,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:l,onlineDetector:u,cacheContext:c}),this._manager=new jr(t,{sdkState:i,cacheContext:c,dispatcher:a,sessionManager:s,requestQueue:o,logger:l})},n.prototype.createGroupChannelCollection=function(t){return t===void 0&&(t={}),new HQ(this._iid,t)},n.prototype.createMyGroupChannelListQuery=function(t){return t===void 0&&(t={}),new B4(this._iid,t)},n.prototype.createPublicGroupChannelListQuery=function(t){return t===void 0&&(t={}),new VQ(this._iid,t)},n.prototype.createScheduledMessageListQuery=function(t){return t===void 0&&(t={}),new qQ(this._iid,t)},n.prototype.addGroupChannelHandler=function(t,r){me(Y("string",t)&&r instanceof mE).throw(Q.invalidParameters),this._manager.addHandler(t,r)},n.prototype.removeGroupChannelHandler=function(t){me(Y("string",t)).throw(Q.invalidParameters),this._manager.removeHandler(t)},n.prototype.removeAllGroupChannelHandlers=function(){this._manager.clearHandler()},n.prototype.buildGroupChannelFromSerializedData=function(t){return this._manager.buildGroupChannelFromSerializedData(t)},n.prototype.buildGroupChannelListQueryFromSerializedData=function(t){return this._manager.buildGroupChannelListQueryFromSerializedData(t)},n.prototype.buildMemberFromSerializedData=function(t){return this._manager.buildMemberFromSerializedData(t)},n.prototype.getChannel=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){return me(Y("string",t)).throw(Q.invalidParameters),[2,this._manager.getChannel(t)]})})},n.prototype.getChannelWithoutCache=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){return me(Y("string",t)).throw(Q.invalidParameters),[2,this._manager.getChannelWithoutCache(t)]})})},n.prototype.getMyGroupChannelChangeLogsByToken=function(t,r){return r===void 0&&(r={}),N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return i=z(z({},b0),r),me(Y("string",t)&&V1(i)).throw(Q.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(t,i)];case 1:return[2,a.sent()]}})})},n.prototype.getMyGroupChannelChangeLogsByTimestamp=function(t,r){return r===void 0&&(r={}),N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:return i=z(z({},b0),r),me(Y("number",t)&&V1(i)).throw(Q.invalidParameters),[4,this._manager.getMyGroupChannelChangeLogs(t,i)];case 1:return[2,a.sent()]}})})},n.prototype.getGroupChannelCount=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){return r=z(z({},x4),t),me(P4(r)).throw(Q.invalidParameters),[2,this._manager.getGroupChannelCount(r)]})})},n.prototype.getUnreadItemCount=function(t){return t===void 0&&(t={}),N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,this._manager.getUnreadItemCount(t)];case 1:return[2,r.sent()]}})})},n.prototype.getTotalUnreadChannelCount=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,this._manager.getTotalUnreadChannelCount()];case 1:return[2,t.sent()]}})})},n.prototype.getTotalUnreadMessageCount=function(t){return t===void 0&&(t={}),N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,this._manager.getTotalUnreadMessageCount(t)];case 1:return[2,r.sent()]}})})},n.prototype.getTotalScheduledMessageCount=function(t){return t===void 0&&(t={}),N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,this._manager.getTotalScheduledMessageCount(t)];case 1:return[2,r.sent()]}})})},n.prototype.getSubscribedTotalUnreadMessageCount=function(){return this._manager.getSubscribedTotalUnreadMessageCount()},n.prototype.getSubscribedCustomTypeTotalUnreadMessageCount=function(){return this._manager.getSubscribedCustomTypeTotalUnreadMessageCount()},n.prototype.getSubscribedCustomTypeUnreadMessageCount=function(t){return this._manager.getSubscribedCustomTypeUnreadMessageCount(t)},n.prototype.createChannel=function(t){return t===void 0&&(t={}),N(this,void 0,void 0,function(){var r;return T(this,function(i){return r=z(z({},yg),t),me($1(r)).throw(Q.invalidParameters),[2,this._manager.createChannel(r)]})})},n.prototype.createDistinctChannelIfNotExist=function(t){return t===void 0&&(t={}),N(this,void 0,void 0,function(){var r;return T(this,function(i){return r=z(z({},yg),t),me($1(r)).throw(Q.invalidParameters),r&&(r.isDistinct=!0),[2,this.createChannel(r)]})})},n.prototype.createChannelWithUserIds=function(t,r,i,a,s,o){return r===void 0&&(r=!1),s===void 0&&(s=""),o===void 0&&(o=""),N(this,void 0,void 0,function(){var l;return T(this,function(u){return l=z(z({},yg),{invitedUserIds:t,isDistinct:r,name:i,data:s,customType:o}),typeof a=="string"?l.coverUrl=a:l.coverImage=a,[2,this.createChannel(l)]})})},n.prototype.markAsReadAll=function(){return N(this,void 0,void 0,function(){return T(this,function(t){return this._manager.markAsReadAll(),[2]})})},n.prototype.markAsReadWithChannelUrls=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){return me(Ht("string",t)).throw(Q.invalidParameters),this._manager.markAsReadWithChannelUrls(t),[2]})})},n.prototype.markAsDelivered=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return me(Y("string",t)).throw(Q.invalidParameters),[4,this.getChannel(t)];case 1:return[4,r.sent().markAsDelivered()];case 2:return r.sent(),[2]}})})},n}(uE);const qb={collection:{groupChannel:{defaultLimit:20,defaultOrder:mr.LATEST_LAST_MESSAGE,defaultIncludeEmpty:!1}}};var KQ=function(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{u(r.next(c))}catch(h){s(h)}}function l(c){try{u(r.throw(c))}catch(h){s(h)}}function u(c){c.done?a(c.value):i(c.value).then(o,l)}u((r=r.apply(e,n||[])).next())})};const WQ=(e,n)=>{M.useEffect(YQ(e),n)},Kb=e=>typeof e=="function"&&e(),YQ=e=>()=>{const n=Kb(e);return()=>{n&&(n instanceof Promise?Kb(()=>KQ(void 0,void 0,void 0,function*(){const t=yield n;typeof t=="function"&&t()})):typeof n=="function"&&Kb(n))}};let QQ=0;function XQ(){return M.useState(()=>`${QQ++}`)[0]}const G4=(e,n,t)=>{const r=M.useRef(n),a=XQ();r.current=n,M.useEffect(()=>{var s;const o=l=>(Object.keys(l).forEach(c=>{l[c]=(...h)=>{var f,p;return(p=(f=r.current)===null||f===void 0?void 0:f[c])===null||p===void 0?void 0:p.call(f,...h)}}),l);return(s=e==null?void 0:e.groupChannel)===null||s===void 0||s.addGroupChannelHandler(a,o(new mE)),()=>{var l;(l=e==null?void 0:e.groupChannel)===null||l===void 0||l.removeGroupChannelHandler(a)}},[e==null?void 0:e.groupChannel,a])};function zu(e){const n=M.useRef(e);return n.current=e,M.useCallback((...t)=>n.current(...t),[n])}var ZQ=function(e,n){var t={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(e);i<r.length;i++)n.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(t[r[i]]=e[r[i]]);return t};const JQ=(e,n)=>{var t=ZQ(e,[]);const r=OR(t.order);switch(n.type){case"update_refreshing":{t.refreshing=n.value.status;break}case"update_initialized":{t.initialized=n.value.status;break}case"update_channels":{DR(n.value.channels).forEach(i=>{const a=t.groupChannels.findIndex(s=>s.url===i.url);a>-1&&(t.groupChannels[a]=i)}),r&&(t.groupChannels=t.groupChannels.sort(r));break}case"delete_channels":{n.value.channelUrls.forEach(i=>{const a=t.groupChannels.findIndex(s=>s.url===i);a>-1&&t.groupChannels.splice(a,1)}),r&&(t.groupChannels=t.groupChannels.sort(r));break}case"append_channels":{const i=DR(n.value.channels);n.value.clearBeforeAction?t.groupChannels=i:t.groupChannels=tX(t.groupChannels,i,"url"),r&&(t.groupChannels=t.groupChannels.sort(r));break}case"update_order":{t.order=n.value.order;const i=OR(t.order);i&&(t.groupChannels=t.groupChannels.sort(i));break}}return t},eX=e=>{const[{initialized:n,refreshing:t,groupChannels:r},i]=M.useReducer(JQ,{initialized:!1,refreshing:!1,groupChannels:[],order:e});return{updateInitialized:h=>{i({type:"update_initialized",value:{status:h}})},updateRefreshing:h=>{i({type:"update_refreshing",value:{status:h}})},updateChannels:h=>{i({type:"update_channels",value:{channels:h}})},deleteChannels:h=>{i({type:"delete_channels",value:{channelUrls:h}})},appendChannels:(h,f)=>{i({type:"append_channels",value:{channels:h,clearBeforeAction:f}})},updateOrder:h=>{i({type:"update_order",value:{order:h}})},initialized:n,refreshing:t,groupChannels:r}},OR=e=>{if(e)return(n,t)=>{switch(e){case"latest_last_message":return n.lastMessage&&t.lastMessage?t.lastMessage.createdAt-n.lastMessage.createdAt:n.lastMessage?-1:t.lastMessage?1:t.createdAt-n.createdAt;case"chronological":return t.createdAt-n.createdAt;case"channel_name_alphabetical":return n.name.localeCompare(t.name);default:return 0}}};function tX(e,n,t){const r=new Set(e.map(a=>a[t])),i=[...e];for(let a=0;a<n.length;a++)r.has(n[a][t])||(i.push(n[a]),r.add(n[a][t]));return i}function DR(e){return e.filter(n=>n.isGroupChannel())}var H_=function(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{u(r.next(c))}catch(h){s(h)}}function l(c){try{u(r.throw(c))}catch(h){s(h)}}function u(c){c.done?a(c.value):i(c.value).then(o,l)}u((r=r.apply(e,n||[])).next())})};const nX=(e,n)=>{const t={includeEmpty:qb.collection.groupChannel.defaultIncludeEmpty,limit:qb.collection.groupChannel.defaultLimit,order:qb.collection.groupChannel.defaultOrder},r=n==null?void 0:n(t);return r||e.groupChannel.createGroupChannelCollection(Object.assign(Object.assign({},t),{filter:new pE(t)}))},rX=(e,n)=>{var t,r,i;const a=!!(!((r=(t=e.appInfo)===null||t===void 0?void 0:t.premiumFeatureList)===null||r===void 0)&&r.includes(ZV.delivery_receipt)),s=M.useRef(),o=M.useRef(n);o.current=n;const{initialized:l,groupChannels:u,refreshing:c,appendChannels:h,deleteChannels:f,updateRefreshing:p,updateInitialized:_}=eX(),g=(S,I,w)=>{var R,A,U,O;const B=(A=(R=s.current)===null||R===void 0?void 0:R.channels)!==null&&A!==void 0?A:[];if(h(B,!0),S&&a)switch(I){case B_.EVENT_MESSAGE_RECEIVED:case B_.EVENT_MESSAGE_SENT:case B_.SYNC_CHANNEL_BACKGROUND:case B_.SYNC_CHANNEL_CHANGELOGS:case void 0:(O=(U=o.current)===null||U===void 0?void 0:U.markAsDelivered)===null||O===void 0||O.call(U,w??B);break}},C=zu(S=>H_(void 0,void 0,void 0,function*(){var I,w,R,A;s.current&&((I=s.current)===null||I===void 0||I.dispose()),S&&(s.current=nX(e,n==null?void 0:n.collectionCreator),(w=s.current)===null||w===void 0||w.setGroupChannelCollectionHandler({onChannelsAdded:(U,O)=>{var B,F;const P=O.filter(G=>G.isGroupChannel());g(!0,U.source,P),(F=(B=o.current)===null||B===void 0?void 0:B.onChannelsAdded)===null||F===void 0||F.call(B,P)},onChannelsUpdated:(U,O)=>{var B,F;const P=O.filter(G=>G.isGroupChannel());g(!0,U.source,P),(F=(B=o.current)===null||B===void 0?void 0:B.onChannelsUpdated)===null||F===void 0||F.call(B,P)},onChannelsDeleted:(U,O)=>{var B,F;g(!1),(F=(B=o.current)===null||B===void 0?void 0:B.onChannelsDeleted)===null||F===void 0||F.call(B,O)}}),!((R=s.current)===null||R===void 0)&&R.hasMore&&(yield(A=s.current)===null||A===void 0?void 0:A.loadMore(),g(!0)))}));M.useEffect(()=>()=>{var S;s.current&&((S=s.current)===null||S===void 0||S.dispose())},[]),WQ(()=>H_(void 0,void 0,void 0,function*(){_(!1),e.currentUser&&(yield C(e.currentUser.userId),_(!0))}),[e,(i=e.currentUser)===null||i===void 0?void 0:i.userId]),G4(e,{onUserBanned:(S,I)=>{var w,R,A;I.userId===((w=e.currentUser)===null||w===void 0?void 0:w.userId)?(f([S.url]),(A=(R=o.current)===null||R===void 0?void 0:R.onChannelsDeleted)===null||A===void 0||A.call(R,[S.url])):g(!1)}});const E=zu(()=>H_(void 0,void 0,void 0,function*(){e.currentUser&&(p(!0),yield C(e.currentUser.userId),p(!1))})),y=zu(()=>H_(void 0,void 0,void 0,function*(){var S,I;!((S=s.current)===null||S===void 0)&&S.hasMore&&(yield(I=s.current)===null||I===void 0?void 0:I.loadMore(),g(!0))}));return{initialized:l,groupChannels:u,refresh:E,refreshing:c,loadMore:y}};var iX=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.name="poll",t}return k(n,e),n.prototype.init=function(t,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,o=r.requestQueue,l=r.logger,u=r.onlineDetector,c=r.cacheContext;e.prototype.init.call(this,t,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:l,onlineDetector:u,cacheContext:c}),this._manager=new c0(t,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:l,onlineDetector:u,cacheContext:c})},n.prototype.create=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){return r=z(z({},mq),t),me(Bx(r)).throw(Q.invalidParameters),[2,this._manager.create(r)]})})},n.prototype.get=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){return r=z(z({},gq),t),me(Gx(r)).throw(Q.invalidParameters),[2,this._manager.get(r)]})})},n.prototype.getOption=function(t){return N(this,void 0,void 0,function(){var r;return T(this,function(i){return r=z(z({},_q),t),me(Hx(r)).throw(Q.invalidParameters),[2,this._manager.getOption(r)]})})},n.prototype.buildPollFromSerializedData=function(t){return this._manager.buildPollFromSerializedData(t)},n}(uE),aX=function(e){return["-lastMessageUpdatedAt","-createdAt","syncIndex"]},UR=function(e){function n(){return e!==null&&e.apply(this,arguments)||this}return k(n,e),n}(Gn),$4=function(e){this.key=e.key,this.url=e.url},V4=function(e){this.id=e.id,this.name=e.name,this.url=e.url,this.emojis=e.emojis?e.emojis.map(function(n){return new $4(n)}):[]},sX=function(e){this.emojiHash=e.emoji_hash||"",this.emojiCategories=e.emoji_categories?e.emoji_categories.map(function(n){return new V4(n)}):[]},oX={profileImage:void 0,profileUrl:void 0,nickname:void 0},LR=function(e){return{v2:function(){return N(void 0,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,e.commitSchema([{collectionName:d4,keyName:qK,index:[Eg(mr.LATEST_LAST_MESSAGE),Eg(mr.CHRONOLOGICAL),Eg(mr.CHANNEL_NAME_ALPHABETICAL)]},{collectionName:KN,keyName:KK,index:[Vo(vi.CHANNEL_LATEST),Vo(vi.NEWEST_CHILD_MESSAGE)]},{collectionName:_4,keyName:xW,index:[Vo(vi.CHANNEL_LATEST),Vo(vi.NEWEST_CHILD_MESSAGE)]},{collectionName:YK,keyName:QK}])];case 1:return[2,n.sent()]}})})},v3:function(){return N(void 0,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,e.commitSchema([{collectionName:XK,keyName:ZK,index:[aX()]}])];case 1:return[2,n.sent()]}})})},v4:function(){return N(void 0,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,e.commitSchema([{collectionName:f4,keyName:WK,index:[OW()]}])];case 1:return[2,n.sent()]}})})},v5:function(){return N(void 0,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,e.commitSchema([{collectionName:v4,keyName:JK,index:[["-userId","-updatedAt"]]}])];case 1:return[2,n.sent()]}})})}}},kR=function(e){var n=new m4;return function(t,r){return N(void 0,void 0,void 0,function(){var i,a,s,o;return T(this,function(l){switch(l.label){case 0:switch(t){case 1:case 2:case 3:case 4:return[3,1];case 5:return[3,2];case 6:return[3,4];case 7:return[3,11]}return[3,15];case 1:return r(),[3,16];case 2:return[4,e.reset()];case 3:return l.sent(),r(),[3,16];case 4:return l.trys.push([4,9,,10]),i=LR(e),a=i.v2,s=i.v3,o=i.v4,[4,a()];case 5:return l.sent(),[4,s()];case 6:return l.sent(),[4,o()];case 7:return l.sent(),[4,e.collection(KN).removeIf({where:{channelType:Kt.OPEN}})];case 8:return l.sent(),[3,10];case 9:return l.sent(),n.warn("Failed to migrate to v2, v3, v4"),[3,10];case 10:return r(),[3,16];case 11:return l.trys.push([11,13,,14]),[4,(0,LR(e).v5)()];case 12:return l.sent(),[3,14];case 13:return l.sent(),n.warn("Failed to migrate to v5"),[3,14];case 14:return r(),[3,16];case 15:r(),l.label=16;case 16:return[2]}})})}},lX=function(){return typeof document<"u"?document.visibilityState:"visible"},uX=function(e){function n(t){var r=t.getVisibilityState,i=r===void 0?lX:r,a=t.initialState,s=a===void 0?"visible":a,o=t.isEnabled,l=o===void 0||o,u=t.pauseCheckDelay,c=u===void 0?3e4:u,h=e.call(this)||this;return h._pauseCheckDelay=3e4,h._currentState="visible",h._getVisibilityState=i,h._pauseCheckDelay=c,h._currentState=s,h._isEnabled=l,h._boundToggleState=h._toggleState.bind(h),h}return k(n,e),Object.defineProperty(n.prototype,"currentState",{get:function(){return this._currentState},enumerable:!1,configurable:!0}),Object.defineProperty(n.prototype,"isAvailable",{get:function(){return typeof window<"u"&&!!window.addEventListener&&!!window.removeEventListener},enumerable:!1,configurable:!0}),n.prototype._toggleState=function(){var t=this,r=this._getVisibilityState();r!=="hidden"?this._currentState==="hidden"&&(this._pauseDelayTimer&&(clearTimeout(this._pauseDelayTimer),this._pauseDelayTimer=void 0),this.dispatch("resume")):this._currentState!=="hidden"&&(this._pauseDelayTimer=setTimeout(function(){t._pauseDelayTimer=void 0,t.dispatch("pause")},this._pauseCheckDelay)),this._currentState=r},n.prototype.start=function(){this._isEnabled&&this.isAvailable&&(this._boundToggleState=this._toggleState.bind(this),window.addEventListener("visibilitychange",this._boundToggleState,{capture:!0}))},n.prototype.stop=function(){this._isEnabled&&this.isAvailable&&this._boundToggleState&&window.removeEventListener("visibilitychange",this._boundToggleState,{capture:!0})},n}(Dd),cX=function(){function e(n){var t=n.logger,r=n.connectionDelegate,i=r===void 0?null:r,a=this;this._onlineWorker=function(){var s;return(s=a.connectionDelegate)===null||s===void 0?void 0:s.reconnect()},this._offlineWorker=function(){var s;return(s=a.connectionDelegate)===null||s===void 0?void 0:s.disconnect()},this.unsubscribes=[],this._onlineListener=function(s){if(a.isAvailableOnWeb)return window.addEventListener("online",s),function(){return window.removeEventListener("online",s,!1)}},this._offlineListener=function(s){if(a.isAvailableOnWeb)return window.addEventListener("offline",s),function(){return window.removeEventListener("offline",s,!1)}},this.logger=t,i&&(this.connectionDelegate=i)}return Object.defineProperty(e.prototype,"isAvailableOnWeb",{get:function(){return typeof window<"u"&&!!window.addEventListener&&"ononline"in window&&"onoffline"in window&&typeof navigator<"u"&&navigator.onLine!==void 0},enumerable:!1,configurable:!0}),e.prototype.setOnlineListener=function(n){n&&typeof n=="function"&&(this._onlineListener=n)},e.prototype.setOfflineListener=function(n){n&&typeof n=="function"&&(this._offlineListener=n)},e.prototype.start=function(){this.unsubscribes=[this._onlineListener(this._onlineWorker),this._offlineListener(this._offlineWorker)]},e.prototype.stop=function(){var n=this;this.unsubscribes.forEach(function(t){try{t==null||t()}catch(r){n.logger.warn(r.message)}}),this.unsubscribes=[]},e.prototype.isOnline=function(){return N(this,void 0,void 0,function(){return T(this,function(n){return this.isAvailableOnWeb?[2,navigator.onLine]:[2,new Promise(function(t){fetch("https://www.google.com",{method:fe.GET,mode:"no-cors"}).then(function(){return t(!0)}).catch(function(){return t(!1)})})]})})},e}(),dX=function(e){function n(t){var r,i=this;return(i=e.call(this)||this).method=fe.GET,i.path=Sz,i.params=Ae($e({ts:typeof t.token=="number"?t.token:void 0,token:typeof t.token=="string"?t.token:void 0,limit:(r=t.limit)!==null&&r!==void 0?r:100})),i}return k(n,e),n}(ve),hX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.configs=r.configs,i.hasMore=r.has_more,i.nextToken=r.next,i.ts=r.ts,i}return k(n,e),n}(_e),xR=function(e){function n(t){var r=t.userId,i=t.nickname,a=t.profileUrl,s=t.profileImage,o=t.preferredLanguages,l=e.call(this)||this;return l.method=fe.PUT,l.path="".concat(En,"/").concat(encodeURIComponent(r)),l.params=Ae($e({nickname:i,profile_url:a,profile_file:s,preferred_languages:o})),l}return k(n,e),n}(ve),PR=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.user=new Gt(t,z({},r)),i}return k(n,e),n}(_e),fX=function(e){function n(t){var r=t.userId,i=t.token,a=t.deviceOS,s=t.deviceManufacturer,o=t.systemPushEnabled,l=e.call(this)||this;return l.method=fe.POST,l.path="".concat(En,"/").concat(encodeURIComponent(r),"/push/apns"),l.params=Ae({apns_device_token:i,always_push:!0,device_os:a,device_manufacturer:s,system_push_enabled:o}),l}return k(n,e),n}(ve);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.token=r.token,i.type=r.type?ri[r.type.toLowerCase()]:ri.UNKNOWN,i.user=new Gt(t,r.user),i}k(n,e)})(_e);var vX=function(e){function n(t){var r=t.userId,i=t.token,a=t.deviceOS,s=t.deviceManufacturer,o=t.systemPushEnabled,l=e.call(this)||this;return l.method=fe.POST,l.path="".concat(En,"/").concat(encodeURIComponent(r),"/push/gcm"),l.params=Ae({gcm_reg_token:i,always_push:!0,device_os:a,device_manufacturer:s,system_push_enabled:o}),l}return k(n,e),n}(ve);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.token=r.token,i.type=r.type?ri[r.type.toLowerCase()]:ri.UNKNOWN,i.user=new Gt(t,r.user),i}k(n,e)})(_e);var pX=function(e){function n(t){var r=t.userId,i=t.token,a=e.call(this)||this;return a.method=fe.DELETE,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/push/apns/").concat(encodeURIComponent(i)),a}return k(n,e),n}(ve),mX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.token=r.token,i.user=new Gt(t,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}return k(n,e),n}(_e),_X=function(e){function n(t){var r=t.userId,i=t.token,a=e.call(this)||this;return a.method=fe.DELETE,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/push/gcm/").concat(encodeURIComponent(i)),a}return k(n,e),n}(ve),gX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.token=r.token,i.user=new Gt(t,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}return k(n,e),n}(_e),EX=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=fe.DELETE,i.path="".concat(En,"/").concat(encodeURIComponent(r),"/push/apns"),i}return k(n,e),n}(ve),yX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.type=r.type?ri[r.type.toLowerCase()]:ri.UNKNOWN,i.user=new Gt(t,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}return k(n,e),n}(_e),bX=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=fe.DELETE,i.path="".concat(En,"/").concat(encodeURIComponent(r),"/push/gcm"),i}return k(n,e),n}(ve),CX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.type=r.type?ri[r.type.toLowerCase()]:ri.UNKNOWN,i.user=new Gt(t,r.user),i.lastDeletedAt=r.device_token_last_deleted_at,i}return k(n,e),n}(_e),SX=function(e){function n(t){var r=t.userId,i=t.type,a=t.token,s=t.ts,o=e.call(this)||this;return o.method=fe.GET,o.path="".concat(En,"/").concat(encodeURIComponent(r),"/push/").concat(encodeURIComponent(i),"/device_tokens"),o.params={created_ts:s,token:a},o}return k(n,e),n}(ve),TX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pushTokens={type:r.type?ri[r.type.toLowerCase()]:ri.UNKNOWN,deviceTokens:r.device_tokens,hasMore:r.has_more,token:r.token},i}return k(n,e),n}(_e),NX=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=fe.GET,i.path="".concat(En,"/").concat(encodeURIComponent(r),"/channel_invitation_preference"),i}return k(n,e),n}(ve),IX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.autoAccept=r.auto_accept,i}return k(n,e),n}(_e),MX=function(e){function n(t){var r=t.userId,i=t.willAutoAccept,a=e.call(this)||this;return a.method=fe.PUT,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/channel_invitation_preference"),a.params={auto_accept:i},a}return k(n,e),n}(ve),AX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.autoAccept=r.auto_accept,i}return k(n,e),n}(_e),wX=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=fe.GET,i.path="".concat(En,"/").concat(encodeURIComponent(r),"/push_preference"),i}return k(n,e),n}(ve),RX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.preference={doNotDisturbOn:r.do_not_disturb,startHour:r.start_hour,startMin:r.start_min,endHour:r.end_hour,endMin:r.end_min,timezone:r.timezone},i}return k(n,e),n}(_e),OX=function(e){function n(t){var r=t.userId,i=t.doNotDisturbOn,a=t.startHour,s=t.startMin,o=t.endHour,l=t.endMin,u=t.timezone,c=e.call(this)||this;return c.method=fe.PUT,c.path="".concat(En,"/").concat(encodeURIComponent(r),"/push_preference"),c.params={do_not_disturb:i,start_hour:a,start_min:s,end_hour:o,end_min:l,timezone:u},c}return k(n,e),n}(ve),DX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.preference={doNotDisturbOn:r.do_not_disturb,startHour:r.start_hour,startMin:r.start_min,endHour:r.end_hour,endMin:r.end_min,timezone:r.timezone},i}return k(n,e),n}(_e),UX=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=fe.GET,i.path="".concat(En,"/").concat(encodeURIComponent(r),"/push_preference"),i}return k(n,e),n}(ve),LX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.snoozePeriod={isSnoozeOn:r.snooze_enabled},typeof r.snooze_start_ts=="number"&&(i.snoozePeriod.startTs=r.snooze_start_ts),typeof r.snooze_end_ts=="number"&&(i.snoozePeriod.endTs=r.snooze_end_ts),i}return k(n,e),n}(_e),kX=function(e){function n(t){var r=t.userId,i=t.snoozeOn,a=t.startTs,s=t.endTs,o=e.call(this)||this;return o.method=fe.PUT,o.path="".concat(En,"/").concat(encodeURIComponent(r),"/push_preference"),o.params={snooze_enabled:i,snooze_start_ts:a,snooze_end_ts:s},o}return k(n,e),n}(ve),xX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.snoozePeriod={isSnoozeOn:r.snooze_enabled},typeof r.snooze_start_ts=="number"&&(i.snoozePeriod.startTs=r.snooze_start_ts),typeof r.snooze_end_ts=="number"&&(i.snoozePeriod.endTs=r.snooze_end_ts),i}return k(n,e),n}(_e),PX=function(e){function n(t){var r=t.userId,i=t.blockedUserId,a=e.call(this)||this;return a.method=fe.POST,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/block"),a.params={target_id:i},a}return k(n,e),n}(ve);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.user=new Gt(t,r),i}k(n,e)})(_e);var FX=function(e){function n(t){var r=t.userId,i=t.unblockedUserId,a=e.call(this)||this;return a.method=fe.DELETE,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/block/").concat(encodeURIComponent(i)),a}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var BX=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=fe.GET,i.path="".concat(En,"/").concat(encodeURIComponent(r),"/push_preference"),i}return k(n,e),n}(ve),HX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pushTriggerOption=r.push_trigger_option,i}return k(n,e),n}(_e),GX=function(e){function n(t){var r=t.userId,i=t.pushTriggerOption,a=e.call(this)||this;return a.method=fe.PUT,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/push_preference"),a.params={push_trigger_option:i},a}return k(n,e),n}(ve),$X=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.pushTriggerOption=r.push_trigger_option,i}return k(n,e),n}(_e),VX=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=fe.GET,i.path="".concat(En,"/").concat(encodeURIComponent(r),"/push/template"),i}return k(n,e),n}(ve),zX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.name=r.name,i}return k(n,e),n}(_e),jX=function(e){function n(t){var r=t.userId,i=t.templateName,a=e.call(this)||this;return a.method=fe.PUT,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/push/template"),a.params={name:i},a}return k(n,e),n}(ve),qX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.name=r.name,i}return k(n,e),n}(_e),KX=function(e){function n(t){var r=t.userId,i=t.token,a=e.call(this)||this;return a.method=fe.GET,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/friends/changelogs"),a.params={token:i},a}return k(n,e),n}(ve),WX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.changelogs={addedUsers:r.added.map(function(a){return new Gt(t,a)}),updatedUsers:r.updated.map(function(a){return new Gt(t,a)}),deletedUserIds:r.deleted,hasMore:r.has_more,token:r.next},i}return k(n,e),n}(_e),YX=function(e){function n(t){var r=t.userId,i=t.discoveries,a=e.call(this)||this;return a.method=fe.PUT,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/friend_discoveries"),a.params={friend_discoveries:i.map(function(s){return{friend_discovery_key:s.friendDiscoveryKey,friend_name:s.friendName}})},a}return k(n,e),n}(ve),QX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.friendDiscoveryRequestId=r.friend_discovery_request_id,i}return k(n,e),n}(_e),XX=function(e){function n(t){var r=t.userId,i=t.discoveryKeys,a=e.call(this)||this;return a.method=fe.DELETE,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/friend_discoveries"),a.params={friend_discovery_keys:i},a}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var ZX=function(e){function n(t){var r=t.userId,i=t.userIds,a=e.call(this)||this;return a.method=fe.POST,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/friends"),a.params={user_ids:i},a}return k(n,e),n}(ve),JX=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.users=r.users.map(function(a){return new Gt(t,a)}),i}return k(n,e),n}(_e),eZ=function(e){function n(t){var r=t.userId,i=t.userIds,a=e.call(this)||this;return a.method=fe.DELETE,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/friends"),a.params={user_ids:i},a}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var tZ=function(e){function n(t){var r=t.userId,i=e.call(this)||this;return i.method=fe.GET,i.path="".concat(En,"/").concat(encodeURIComponent(r),"/allow_friend_discovery"),i.params={},i}return k(n,e),n}(ve),nZ=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.allowFriendDiscovery=r.allow_friend_discovery,i}return k(n,e),n}(_e),rZ=function(e){function n(t){var r=t.userId,i=t.allowFriendDiscovery,a=e.call(this)||this;return a.method=fe.PUT,a.path="".concat(En,"/").concat(encodeURIComponent(r),"/allow_friend_discovery"),a.params={allow_friend_discovery:i},a}return k(n,e),n}(ve);(function(e){function n(){return e!==null&&e.apply(this,arguments)||this}k(n,e)})(_e);var C0,iZ=function(e){function n(){var t=e.call(this)||this;return t.method=fe.GET,t.path=qk,t}return k(n,e),n}(ve),aZ=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.emojiContainer=new sX(r),i}return k(n,e),n}(_e),sZ=function(e){function n(t){var r=t.categoryId,i=e.call(this)||this;return i.method=fe.GET,i.path="".concat(qk,"/").concat(r),i}return k(n,e),n}(ve),oZ=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.emojiCategory=new V4(r),i}return k(n,e),n}(_e),lZ=function(e){function n(t){var r=t.key,i=e.call(this)||this;return i.method=fe.GET,i.path="".concat(mz,"/").concat(r),i}return k(n,e),n}(ve),uZ=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.emoji=new $4(r),i}return k(n,e),n}(_e),cZ=function(e){function n(){var t=e.call(this)||this;return t.method=fe.GET,t.path="".concat(_z),t}return k(n,e),n}(ve),dZ=function(e){function n(t,r){var i,a=this,s=r??{};return(a=e.call(this,t,r)||this).uikitConfiguration={string:JSON.stringify(s),json:s},a.updatedAt=(i=r==null?void 0:r.updated_at)!==null&&i!==void 0?i:0,a}return k(n,e),n}(_e);(function(e){e.DELIVERED="DELIVERED",e.CLICKED="CLICKED"})(C0||(C0={}));var ov,FR=function(e){function n(t){var r=t.deviceToken,i=t.pushTrackingId,a=t.messageId,s=t.allowedPushNotification,o=t.channelKey,l=t.templateKey,u=t.eventType,c=t.notificationEventDeadline,h=e.call(this)||this;return h.method=fe.POST,h.path=yz,h.params=Ae({device_token:r,push_tracking_id:i,message_id:a,allowed_push_notification:s,channel_key:o,template_key:l,event_type:u,notification_event_deadline:c}),h}return k(n,e),n}(ve),gE=function(){function e(n,t,r){var i=this;this._storeInitialized=!1,this._iid=n,this.options=t;var a=q.of(n),s=a.sdkState,o=a.cacheContext,l=a.dispatcher,u=a.sessionManager,c=a.requestQueue,h=a.logger,f=a.userEventHandlers,p=a.appStateToggleEnabled;this._onlineDetector=new cX({logger:h,connectionDelegate:{reconnect:function(){return N(i,void 0,void 0,function(){var g,C,E,y,S,I;return T(this,function(w){switch(w.label){case 0:if(g=q.of(n),C=g.sdkState,E=g.connectionManager,(y=g.sessionManager).session.hasSession)return[3,5];w.label=1;case 1:return w.trys.push([1,3,,4]),[4,E.connect(y.session.authToken)];case 2:return w.sent(),[3,4];case 3:if(S=w.sent(),Vi(S))throw S;return h.debug("connect failed by reconnect event = ",S),[3,4];case 4:return[3,9];case 5:if(C.appState!=="foreground")return[3,9];w.label=6;case 6:return w.trys.push([6,8,,9]),[4,E.resetAndReconnect()];case 7:return w.sent(),[3,9];case 8:if(I=w.sent(),Vi(I))throw I;return h.debug("resetAndReconnect failed by reconnect event = ",I),[3,9];case 9:return l.dispatch(new UR),[2]}})})},disconnect:function(){or(function(){return N(i,void 0,void 0,function(){var g,C,E;return T(this,function(y){switch(y.label){case 0:return g=q.of(n),C=g.connectionManager,E=g.dispatcher,[4,C.disconnect()];case 1:return y.sent(),E.dispatch(new Ol(new Kn({type:kn.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:Le.NETWORK_ERROR,error_description:"cause=network_closed"}}))),[2]}})})})}}});var _=new Av(n,{localCacheEnabled:o.localCacheEnabled,enableAutoResend:o.localCacheConfig.enableAutoResend,dispatcher:l,sdkState:s,logger:h});r.forEach(function(g){g.init(n,{sdkState:s,cacheContext:o,dispatcher:l,sessionManager:u,requestQueue:c,logger:h,onlineDetector:i._onlineDetector}),i[g.name]=g}),this._appStateChangeDetector=new uX({isEnabled:p}),this._appStateChangeDetector.on("resume",function(){h.debug("the page resumes from freeze"),i.setForegroundState()}).on("pause",function(){h.debug("the page freezes"),i.setBackgroundState()}),l.on(function(g){var C;if(g instanceof ja)g.stateType===gn.CONNECTED&&_.processNonAutoResendRegisteredPendingMessages();else if(g instanceof Qn){if(g.code==="USEV"){var E=g.as(T4).event;if(E.category===Lp.FRIEND_DISCOVERED){var y=E0.getDataAsFriendDiscoveredEvent(n,E).friendDiscoveries;ze(function(){return N(i,void 0,void 0,function(){return T(this,function(R){return[2,f.forEach(function(A){A.onFriendsDiscovered&&A.onFriendsDiscovered(y)})]})})})}}}else if(g instanceof UN){var S=q.of(i._iid).subscribedUnreadMessageCount,I=!1,w=g.ts;typeof w=="number"&&w>S.ts&&(S.all!==g.all&&(I=!0),S.all=g.all>=0?g.all:0,g.customTypes&&Object.keys(g.customTypes).forEach(function(R){S.customTypes[R]!==g.customTypes[R]&&(I=!0),S.customTypes[R]=g.customTypes[R]}),I=I&&S.ts>0,S.ts=w),I&&ze(function(){return N(i,void 0,void 0,function(){return T(this,function(R){return[2,f.forEach(function(A){A.onTotalUnreadMessageCountChanged&&A.onTotalUnreadMessageCountChanged({groupChannelCount:S.all,feedChannelCount:S.feed,customTypeUnreadCount:S.customTypes}),A.onTotalUnreadMessageCountUpdated&&A.onTotalUnreadMessageCountUpdated(S.all,S.customTypes)})]})})})}else g instanceof Sx?(o.preference.set(i._getUserProfileCacheKey(s.userId),O1.payloadify(g.userProfile)),!((C=g.userProfile.appInfo.notificationInfo)===null||C===void 0)&&C.isEnabled&&o.preference.set(LN(i.appId),{value:!0})):g instanceof Nx?g.configSyncNeeded&&or(function(){return N(i,void 0,void 0,function(){return T(this,function(R){switch(R.label){case 0:return[4,this._getAppConfigsInfo()];case 1:return R.sent(),[2]}})})}):g instanceof S4?o.preference.set(l0(i.appId),{configTs:g.configTs}):g instanceof Zh&&g.error&&g.error.isSessionInvalidatedError&&(h.debug("session revoked."),i._internalDisconnect(g.error))})}return e.init=function(n){var t=n.appId,r=n.appVersion,i=n.modules,a=i===void 0?[]:i,s=n.options,o=s===void 0?new Vk:s,l=n.debugMode,u=l!==void 0&&l,c=n.customApiHost,h=n.customWebSocketHost,f=n.newInstance,p=f!==void 0&&f,_=n.logLevel,g=n.localCacheEnabled,C=g!==void 0&&g,E=n.localCacheConfig,y=E===void 0?new jk:E,S=n.localCacheEncryption,I=n.useAsyncStorageStore,w=I===void 0?null:I,R=n.useMMKVStorageStore,A=R===void 0?null:R,U=n.appStateToggleEnabled,O=U===void 0||U;if(!ov||p){var B="su-".concat(_s()),F=S??{encrypt:function(j){return j},decrypt:function(j){return j}},P=new m4;P.level=_??Sl.WARN;var G=new Vc({encryption:F});u||(I1()?A?G=new wW({MMKV:A,encryption:F}):w&&(G=new AW({AsyncStorage:w,encryption:F}),P.warn("AsyncStorage store is deprecated due to the small size limit. Please use MMKVStorage store instead.")):G=new MW({encryption:F})),new q(B,{appId:t,appVersion:r,options:o,apiHost:c??"https://api-".concat(t,".sendbird.com"),websocketHost:h??"wss://ws-".concat(t,".sendbird.com"),store:G,encryption:F,logger:P,localCacheEnabled:C,localCacheConfig:y,debugMode:u,appStateToggleEnabled:O});var L=[new XW,new iX],$=new e(B,o,it(it([],Ge(a),!1),Ge(L),!1));return ov||(ov=$),$}return ov},Object.defineProperty(e,"instance",{get:function(){return ov},enumerable:!1,configurable:!0}),Object.defineProperty(e,"version",{get:function(){return Gk},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appId",{get:function(){return q.of(this._iid).sdkState.appId},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appInfo",{get:function(){var n=q.of(this._iid).appInfo;return n??null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"appVersion",{get:function(){var n;return(n=q.of(this._iid).sdkState.appVersion)!==null&&n!==void 0?n:""},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"debugMode",{get:function(){return!!q.of(this._iid).debugMode},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"logLevel",{get:function(){return q.of(this._iid).logger.level},set:function(n){q.of(this._iid).logger.level=n},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isCacheEnabled",{get:function(){return q.of(this._iid).cacheContext.localCacheEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localCacheConfig",{get:function(){var n=q.of(this._iid).cacheContext;return n.localCacheEnabled?n.localCacheConfig:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ekey",{get:function(){return q.of(this._iid).sessionManager.ekey},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentUser",{get:function(){var n;return(n=q.of(this._iid).sessionManager.currentUser)!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connectionState",{get:function(){var n=q.of(this._iid).connectionManager;return n.isConnected?co.OPEN:n.isConnecting?co.CONNECTING:co.CLOSED},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lastConnectedAt",{get:function(){var n=q.of(this._iid),t=n.connectedAt;return n.connectionManager.isConnected?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fcmPushToken",{get:function(){var n;return(n=this._fcmPushToken)!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"apnsPushToken",{get:function(){var n;return(n=this._apnsPushToken)!==null&&n!==void 0?n:null},enumerable:!1,configurable:!0}),e.prototype._getNestDBVersion=function(){return 8},e.prototype._getPreferenceVersion=function(){return 9},e.prototype._getPreferenceCacheKey=function(n){return"sendbird@".concat(this.appId,"/").concat(n,".pref")},e.prototype._getUserProfileCacheKey=function(n){return"sendbird@".concat(this.appId,"/").concat(n,".profile")},e.prototype._internalDisconnect=function(n){return N(this,void 0,void 0,function(){var t,r,i,a;return T(this,function(s){switch(s.label){case 0:return t=q.of(this._iid),r=t.connectionManager,i=t.sdkState,a=t.requestQueue,this._appStateChangeDetector.stop(),this._onlineDetector.stop(),a.cancelAll(),[4,r.logout(n)];case 1:return s.sent(),[4,this.clearCachedData()];case 2:return s.sent(),i.appState="foreground",[2]}})})},e.prototype._getAppConfigsInfo=function(){return N(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l,u=this;return T(this,function(c){switch(c.label){case 0:return n=q.of(this._iid),t=n.requestQueue,r=n.dispatcher,i=n.cacheContext,a=n.sdkState,s={},[4,i.preference.get(l0(a.appId))];case 1:return(l=c.sent())&&(o=l.configTs),new $l("appConfigsInfo",function(h){return N(u,void 0,void 0,function(){var f,p,_,g,C,E,y,S;return T(this,function(I){switch(I.label){case 0:return f={hasNext:!0,nextToken:h},p=new dX({token:h}),[4,t.send(p)];case 1:return _=I.sent(),g=_.as(hX),C=g.configs,E=g.hasMore,y=g.nextToken,S=g.ts,Object.keys(C).forEach(function(w){s[w]=C[w]}),f.hasNext=E,f.nextToken=y,E||r.dispatch(new N4({appConfigsInfo:s,configTs:S})),[2,f]}})})}).start(o),[2]}})})},e.prototype.getMemoryStoreForDebugging=function(){var n=q.of(this._iid),t=n.debugMode,r=n.cacheContext;if(t)return r.store instanceof Vc?r.store:null;throw Q.debugModeRequired},e.prototype.addExtension=function(n,t){var r=q.of(this._iid).sdkState;["sb_uikit","sb_syncmanager","device-os-platform"].indexOf(n)>-1&&r.extensions&&(r.extensions[n]=t)},e.prototype.addSendbirdExtensions=function(n,t,r){var i,a,s=q.of(this._iid),o=s.logger,l=s.sdkState,u=new RegExp(Az);if(n.length===0)return o.debug("sb.addSendbirdExtensions() has failed because the given sendbirdExtensions is empty."),!1;if(n.find(function(g){return!u.test(g.version)}))return o.debug("sb.addSendbirdExtensions() has failed because the given version did not satisfy the SemVer specification."),!1;if(r)try{for(var c=ye(Object.entries(r)),h=c.next();!h.done;h=c.next()){var f=Ge(h.value,2),p=f[0],_=f[1];if(/&|=/.test(p)||/&|=/.test(_))return o.debug("sb.addSendbirdExtensions() has failed because the given customData includes at least one invalid character: = or &."),!1}}catch(g){i={error:g}}finally{try{h&&!h.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return l.sendbirdRuntimeEnvironment={sendbirdExtensions:n,deviceOS:t,customData:r},!0},e.prototype.setOnlineListener=function(n){this._onlineDetector.setOnlineListener(n)},e.prototype.setOfflineListener=function(n){this._onlineDetector.setOfflineListener(n)},e.prototype._safeInitializeStore=function(n){return N(this,void 0,void 0,function(){var t;return T(this,function(r){switch(r.label){case 0:t=q.of(this._iid).cacheContext,r.label=1;case 1:return r.trys.push([1,3,,5]),[4,t.store.init(n)];case 2:return r.sent(),this._storeInitialized=!0,[3,5];case 3:return r.sent(),t.replaceStore(new Vc),[4,this._safeInitializeStore(n)];case 4:return r.sent(),[3,5];case 5:return[2]}})})},e.prototype.initializeCache=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u,c;return T(this,function(h){switch(h.label){case 0:if(t=q.of(this._iid),r=t.sdkState,i=t.cacheContext,a=t.dispatcher,s=t.logger,r.userId&&r.userId===n)return[3,13];o="sendbird@".concat(r.appId,"/").concat(n,".db"),h.label=1;case 1:return h.trys.push([1,9,11,13]),i.localCacheEnabled?i.nestdb&&i.nestdb.state!==ho.CLOSED&&i.nestdb.name===o?[3,3]:(l="sendbird@".concat(r.appId,"/").concat(n,".db"),(u=i.nestdb=new RW({name:l,version:this._getNestDBVersion(),store:i.store,config:new rm({dbname:l,cacheLimit:64,itemSizeLimit:61440})})).on("upgrade",kR(u)),u.on("storeReplaced",function(f){i.replaceStore(f),i.localCacheEnabled=!1,u.on("upgrade",kR(u))}),[4,u.open()]):[3,6];case 2:return h.sent(),this._storeInitialized=!0,a.dispatch(new b4(this._iid,{userId:n})),[3,5];case 3:return[4,this._safeInitializeStore(o)];case 4:h.sent(),h.label=5;case 5:return r.userId=n,[3,8];case 6:return[4,this._safeInitializeStore(o)];case 7:h.sent(),r.userId=n,h.label=8;case 8:return[3,13];case 9:return c=h.sent(),s.warn("Nest DB Open Failed. ",c),i.store instanceof Vc||(i.replaceStore(new Vc),i.localCacheEnabled=!1),[4,this._safeInitializeStore(o)];case 10:throw h.sent(),r.userId=n,Q.databaseError;case 11:return[4,this._setupPreference(n)];case 12:return h.sent(),[7];case 13:return[2]}})})},e.prototype.getCacheDataSize=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){switch(t.label){case 0:return(n=q.of(this._iid).cacheContext).localCacheEnabled&&n.nestdb?[4,n.nestdb.estimateUsage()]:[3,2];case 1:return[2,t.sent()];case 2:return[2,0]}})})},e.prototype.clearCachedData=function(){return N(this,void 0,void 0,function(){var n;return T(this,function(t){switch(t.label){case 0:return(n=q.of(this._iid).cacheContext).localCacheEnabled&&n.nestdb?[4,n.nestdb.clear()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this._storeInitialized?[4,n.preference.clear()]:[3,4];case 3:t.sent(),t.label=4;case 4:return[2]}})})},e.prototype.clearCachedMessages=function(n){return N(this,void 0,void 0,function(){var t,r,i=this;return T(this,function(a){switch(a.label){case 0:return me(Ht("string",n)).throw(Q.invalidParameters),t=ad.of(this._iid),r=Td.of(this._iid),t&&r?[4,Promise.all(n.map(function(s){return N(i,void 0,void 0,function(){return T(this,function(o){switch(o.label){case 0:return[4,t.removeMessagesOfChannel(s)];case 1:return o.sent(),[4,r.removeMessagesOfChannel(s)];case 2:return o.sent(),[2]}})})}))]:[3,2];case 1:a.sent(),a.label=2;case 2:return[2]}})})},e.prototype._setupPreference=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s;return T(this,function(o){switch(o.label){case 0:return t=q.of(this._iid),r=t.sdkState,i=t.cacheContext,a=t.statManager,[4,i.preference.init(this._getPreferenceCacheKey(n),this._getPreferenceVersion())];case 1:return o.sent(),[4,i.preference.get(this._getUserProfileCacheKey(n))];case 2:return(s=o.sent())&&new O1(this._iid,s).apply(),[4,a.init("sendbird@".concat(r.appId,"/").concat(n,".statlog"))];case 3:return o.sent(),[2]}})})},e.prototype._ready=function(n,t,r){return r===void 0&&(r={}),N(this,void 0,void 0,function(){var i,a,s,o,l,u;return T(this,function(c){switch(c.label){case 0:return me(Y("string",n)&&Y("string",t,!0)).throw(Q.invalidParameters),i=q.of(this._iid),a=i.sdkState,s=i.cacheContext,o=i.connectionManager,l=r.errorForOtherUser,a.userId&&a.userId!==n?l?[3,2]:[4,o.logout()]:[3,3];case 1:return c.sent(),[3,3];case 2:throw l;case 3:return c.trys.push([3,5,,6]),[4,this.initializeCache(n)];case 4:return c.sent(),q.of(this._iid).dispatcher.dispatch(new C4),[3,6];case 5:return c.sent(),u=q.of(this._iid).logger,s.localCacheEnabled=!1,u.warn("Cache initialization failed - cache is not available."),[3,6];case 6:return[2]}})})},e.prototype.authenticateFeed=function(n,t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,this.authenticate(n,t)];case 1:return[2,r.sent()]}})})},e.prototype.authenticate=function(n,t,r){var i;return r===void 0&&(r=e0.SESSION_TOKEN),N(this,void 0,void 0,function(){var a,s,o;return T(this,function(l){switch(l.label){case 0:return a=q.of(this._iid),s=a.sessionManager,o=a.connectionManager,[4,this._ready(n,t,{errorForOtherUser:o.isConnected?Q.alreadyConnectedAsAnotherUser:void 0})];case 1:return l.sent(),!((i=s.session.services)===null||i===void 0)&&i.includes(n0.CHAT)?[3,3]:(s.handler||t&&r!==e0.ACCESS_TOKEN||this.setSessionHandler(new uR),[4,s.authenticate(n,t)]);case 2:l.sent(),l.label=3;case 3:return[2,this.currentUser]}})})},e.prototype.connect=function(n,t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,this._ready(n,t)];case 1:r.sent(),r.label=2;case 2:return r.trys.push([2,,4,5]),[4,q.of(this._iid).connectionManager.connect(t)];case 3:return r.sent(),[3,5];case 4:return this._onlineDetector.start(),this._appStateChangeDetector.start(),[7];case 5:return[2,this.currentUser]}})})},e.prototype.reconnect=function(){var n=q.of(this._iid),t=n.connectionManager,r=n.sdkState,i=n.sessionManager,a=n.dispatcher,s=i.session.hasSession;return s&&(a.dispatch(new Ol(new Kn({type:kn.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:0,error_description:"cause=explicit_reconnect"}}))),this._appStateChangeDetector.start(),this._onlineDetector.start(),t.resetAndReconnect().then(function(){r.appState="foreground"}).catch(function(){})),s},e.prototype.disconnect=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,this._internalDisconnect()];case 1:return n.sent(),[2]}})})},e.prototype.disconnectWebSocket=function(){return N(this,void 0,void 0,function(){var n,t,r;return T(this,function(i){switch(i.label){case 0:return n=q.of(this._iid),t=n.connectionManager,r=n.requestQueue,n.dispatcher.dispatch(new Ol(new Kn({type:kn.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:0,error_description:"cause=explicit_disconnect_websocket"}}))),this._appStateChangeDetector.stop(),this._onlineDetector.stop(),r.cancelAll(),[4,t.disconnectWebSocket(!0)];case 1:return i.sent(),[2]}})})},e.prototype.setBackgroundState=function(){var n=q.of(this._iid),t=n.connectionManager,r=n.sdkState,i=n.logger,a=n.dispatcher;r.appState==="foreground"&&(r.appState="background",i.debug("going background state"),a.dispatch(new Ol(new Kn({type:kn.WEBSOCKET_DISCONNECT,data:{success:!0,error_code:Le.WEBSOCKET_CONNECTION_CLOSED,error_description:"cause=background"}}))),t.background().catch(function(s){i.debug("setBackgroundState error = ",s)}))},e.prototype.setForegroundState=function(){var n=q.of(this._iid),t=n.connectionManager,r=n.sdkState,i=n.dispatcher,a=n.logger;r.appState==="background"&&(r.appState="foreground",a.debug("going foreground state"),t.resetAndReconnect().catch(function(s){a.debug("setForgroundState error = ",s)}),i.dispatch(new UR))},e.prototype.setSessionHandler=function(n){me(n instanceof uR).throw(Q.invalidParameters),q.of(this._iid).sessionManager.handler=n},e.prototype.addUserEventHandler=function(n,t){me(Y("string",n)&&t instanceof cW).throw(Q.invalidParameters),q.of(this._iid).userEventHandlers.set(n,t)},e.prototype.removeUserEventHandler=function(n){q.of(this._iid).userEventHandlers.delete(n)},e.prototype.removeAllUserEventHandler=function(){q.of(this._iid).userEventHandlers.clear()},e.prototype.addConnectionHandler=function(n,t){me(Y("string",n)&&t instanceof p4).throw(Q.invalidParameters),q.of(this._iid).connectionHandlers.set(n,t)},e.prototype.removeConnectionHandler=function(n){q.of(this._iid).connectionHandlers.delete(n)},e.prototype.removeAllConnectionHandler=function(){q.of(this._iid).connectionHandlers.clear()},e.prototype.createApplicationUserListQuery=function(n){return n===void 0&&(n={}),new fW(this._iid,n)},e.prototype.createBlockedUserListQuery=function(n){return n===void 0&&(n={}),new mW(this._iid,n)},e.prototype.createFriendListQuery=function(n){return n===void 0&&(n={}),new EW(this._iid,n)},e.prototype.createMessageSearchQuery=function(n){return new jW(this._iid,n)},e.prototype.createPollListQuery=function(n){return new $x(this._iid,z({},n))},e.prototype.createPollVoterListQuery=function(n){return new Vx(this._iid,z({},n))},e.prototype.buildUserFromSerializedData=function(n){var t=Ll(n);return new Gt(this._iid,Gt.payloadify(t))},e.prototype.updateCurrentUserInfo=function(n){return n===void 0&&(n={}),N(this,void 0,void 0,function(){var t,r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:return t=z(z({},oX),n),me(function(c){return ai(c.profileImage,!0)&&Y("string",c.profileUrl,!0)&&Y("string",c.nickname,!0)}(t)).throw(Q.invalidParameters),this.currentUser?(r=q.of(this._iid),i=r.sdkState,a=r.requestQueue,s=new xR(z({userId:i.userId},t)),[4,a.send(s)]):[3,2];case 1:return o=u.sent(),l=o.as(PR).user,this.currentUser&&(t.nickname&&(this.currentUser.nickname=l.nickname),(t.profileUrl||t.profileImage)&&(this.currentUser.plainProfileUrl=l.profileUrl)),[2,l];case 2:throw Q.connectionRequired}})})},e.prototype.updateCurrentUserInfoWithPreferredLanguages=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return me(Ht("string",n)).throw(Q.invalidParameters),this.currentUser?(t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new xR({userId:r.userId,preferredLanguages:n}),[4,i.send(a)]):[3,2];case 1:return s=l.sent(),o=s.as(PR).user,this.currentUser&&(this.currentUser.preferredLanguages=o.preferredLanguages),[2,o];case 2:throw Q.connectionRequired}})})},e.prototype.registerFCMPushTokenForCurrentUser=function(n,t){var r,i;return N(this,void 0,void 0,function(){var a,s,o,l,u,c,h=this;return T(this,function(f){switch(f.label){case 0:if(me(Y("string",n)&&Y("string",t==null?void 0:t.deviceManufacturer,!0)).throw(Q.invalidParameters),t!=null&&t.deviceOS&&me(Bt(Au,t.deviceOS.platform,!0)&&Y("string",t.deviceOS.version,!0)).throw(Q.invalidParameters),!this.currentUser)return[3,6];a={deviceOS:"".concat(((r=t==null?void 0:t.deviceOS)===null||r===void 0?void 0:r.platform)||Au.ANDROID,"-").concat(((i=t==null?void 0:t.deviceOS)===null||i===void 0?void 0:i.version)||"unknown"),deviceManufacturer:t==null?void 0:t.deviceManufacturer,systemPushEnabled:t==null?void 0:t.systemPushEnabled},f.label=1;case 1:return f.trys.push([1,4,,5]),s=q.of(this._iid),o=s.sessionManager,l=s.sdkState,u=s.requestQueue,o.hasDeviceToken(ri.FCM,n)?[2,Ji.SUCCESS]:(c=new vX({userId:l.userId,token:n,deviceOS:a.deviceOS,deviceManufacturer:a.deviceManufacturer,systemPushEnabled:a.systemPushEnabled}),[4,u.send(c)]);case 2:return f.sent(),[4,or(function(){return N(h,void 0,void 0,function(){return T(this,function(p){switch(p.label){case 0:return o.setDeviceToken(ri.FCM,n,a),[4,o.saveDeviceToken()];case 1:return p.sent(),[2]}})})})];case 3:return f.sent(),this._fcmPushToken="",[2,Ji.SUCCESS];case 4:return f.sent(),[2,Ji.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=n,[2,Ji.PENDING];case 7:return[2]}})})},e.prototype.unregisterFCMPushTokenForCurrentUser=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u=this;return T(this,function(c){switch(c.label){case 0:if(me(Y("string",n)).throw(Q.invalidParameters),!this.currentUser)return[3,6];c.label=1;case 1:return c.trys.push([1,4,,5]),t=q.of(this._iid),r=t.sessionManager,i=t.sdkState,a=t.requestQueue,s=new _X({userId:i.userId,token:n}),[4,a.send(s)];case 2:return o=c.sent(),l=o.as(gX).lastDeletedAt,[4,or(function(){return N(u,void 0,void 0,function(){return T(this,function(h){switch(h.label){case 0:return r.unsetDeviceToken(ri.FCM,n),r.setDeviceTokenDeletedAt(l),[4,r.saveDeviceToken()];case 1:return h.sent(),[2]}})})})];case 3:return c.sent(),this._fcmPushToken="",[2,Ji.SUCCESS];case 4:return c.sent(),[2,Ji.ERROR];case 5:return[3,7];case 6:return this._fcmPushToken=n,[2,Ji.PENDING];case 7:return[2]}})})},e.prototype.unregisterFCMPushTokenAllForCurrentUser=function(){return N(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l=this;return T(this,function(u){switch(u.label){case 0:return this.currentUser?(n=q.of(this._iid),t=n.sessionManager,r=n.sdkState,i=n.requestQueue,a=new bX({userId:r.userId}),[4,i.send(a)]):[3,3];case 1:return s=u.sent(),o=s.as(CX).lastDeletedAt,[4,or(function(){return N(l,void 0,void 0,function(){return T(this,function(c){switch(c.label){case 0:return t.unsetDeviceTokens(ri.FCM),t.setDeviceTokenDeletedAt(o),[4,t.saveDeviceToken()];case 1:return c.sent(),[2]}})})})];case 2:u.sent(),u.label=3;case 3:return[2]}})})},e.prototype.registerAPNSPushTokenForCurrentUser=function(n,t){var r,i;return N(this,void 0,void 0,function(){var a,s,o,l,u,c,h=this;return T(this,function(f){switch(f.label){case 0:if(me(Y("string",n)&&Y("string",t==null?void 0:t.deviceManufacturer,!0)).throw(Q.invalidParameters),t!=null&&t.deviceOS&&me(Bt(Au,t.deviceOS.platform,!0)&&Y("string",t.deviceOS.version,!0)).throw(Q.invalidParameters),!this.currentUser)return[3,6];a={deviceOS:"".concat(((r=t==null?void 0:t.deviceOS)===null||r===void 0?void 0:r.platform)||Au.IOS,"-").concat(((i=t==null?void 0:t.deviceOS)===null||i===void 0?void 0:i.version)||"unknown"),deviceManufacturer:t==null?void 0:t.deviceManufacturer,systemPushEnabled:t==null?void 0:t.systemPushEnabled},f.label=1;case 1:return f.trys.push([1,4,,5]),s=q.of(this._iid),o=s.sessionManager,l=s.sdkState,u=s.requestQueue,o.hasDeviceToken(ri.APNS,n)?[2,Ji.SUCCESS]:(c=new fX({userId:l.userId,token:n,deviceOS:a.deviceOS,deviceManufacturer:a.deviceManufacturer,systemPushEnabled:a.systemPushEnabled}),[4,u.send(c)]);case 2:return f.sent(),[4,or(function(){return N(h,void 0,void 0,function(){return T(this,function(p){switch(p.label){case 0:return o.setDeviceToken(ri.APNS,n,a),[4,o.saveDeviceToken()];case 1:return p.sent(),[2]}})})})];case 3:return f.sent(),this._apnsPushToken="",[2,Ji.SUCCESS];case 4:return f.sent(),[2,Ji.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=n,[2,Ji.PENDING];case 7:return[2]}})})},e.prototype.unregisterAPNSPushTokenForCurrentUser=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s,o,l,u=this;return T(this,function(c){switch(c.label){case 0:if(me(Y("string",n)).throw(Q.invalidParameters),!this.currentUser)return[3,6];c.label=1;case 1:return c.trys.push([1,4,,5]),t=q.of(this._iid),r=t.sessionManager,i=t.sdkState,a=t.requestQueue,s=new pX({userId:i.userId,token:n}),[4,a.send(s)];case 2:return o=c.sent(),l=o.as(mX).lastDeletedAt,[4,or(function(){return N(u,void 0,void 0,function(){return T(this,function(h){switch(h.label){case 0:return r.unsetDeviceToken(ri.APNS,n),r.setDeviceTokenDeletedAt(l),[4,r.saveDeviceToken()];case 1:return h.sent(),[2]}})})})];case 3:return c.sent(),this._apnsPushToken="",[2,Ji.SUCCESS];case 4:return c.sent(),[2,Ji.ERROR];case 5:return[3,7];case 6:return this._apnsPushToken=n,[2,Ji.PENDING];case 7:return[2]}})})},e.prototype.unregisterAPNSPushTokenAllForCurrentUser=function(){return N(this,void 0,void 0,function(){var n,t,r,i,a,s,o,l=this;return T(this,function(u){switch(u.label){case 0:return this.currentUser?(n=q.of(this._iid),t=n.sessionManager,r=n.sdkState,i=n.requestQueue,a=new EX({userId:r.userId}),[4,i.send(a)]):[3,3];case 1:return s=u.sent(),o=s.as(yX).lastDeletedAt,[4,or(function(){return N(l,void 0,void 0,function(){return T(this,function(c){switch(c.label){case 0:return t.unsetDeviceTokens(ri.APNS),t.setDeviceTokenDeletedAt(o),[4,t.saveDeviceToken()];case 1:return c.sent(),[2]}})})})];case 2:u.sent(),u.label=3;case 3:return[2]}})})},e.prototype.markPushNotificationAsDelivered=function(n,t){var r;return t===void 0&&(t=!0),N(this,void 0,void 0,function(){var i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w,R;return T(this,function(A){switch(A.label){case 0:if(i=q.of(this._iid),a=i.logger,s=i.sessionManager,o=i.requestQueue,l=i.pushNotificationAckManager,a.debug("markPushNotificationAsDelivered:",n),u=C0.DELIVERED,c=l.parseData(n),h=c.pushTrackingId,f=c.sessionTopics,p=c.sessionKey,_=c.messageId,g=c.channelKey,C=c.templateKey,E=c.notificationEventDeadline,!p||!f.includes(u0.PUSH_ACKNOWLEDGEMENT))throw a.info("Can't use markPushNotificationAsDelivered() feature."),Q.malformedDataError;if(l.isAcked(h,u))return a.info("already delivered push notification:",h),[2];y=!!g,S=t&&y,I=(r=s.deviceTokens[0])===null||r===void 0?void 0:r.token,w=new FR({deviceToken:I??"",pushTrackingId:h,eventType:u,messageId:_,channelKey:g,templateKey:C,notificationEventDeadline:E,allowedPushNotification:S}),p&&(w.headers["Session-Key"]=p),A.label=1;case 1:return A.trys.push([1,3,,4]),[4,o.send(w)];case 2:return A.sent(),l.markAsAcked(h,u),[3,4];case 3:throw R=A.sent(),a.debug("failed to mark push notification as delivered. push tracking id: ".concat(h,". error: ").concat(R)),R;case 4:return[2]}})})},e.prototype.markPushNotificationAsClicked=function(n){var t;return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S;return T(this,function(I){switch(I.label){case 0:if(r=q.of(this._iid),i=r.logger,a=r.sessionManager,s=r.requestQueue,o=r.pushNotificationAckManager,i.debug("markPushNotificationAsClicked:",n),l=C0.CLICKED,u=o.parseData(n),c=u.pushTrackingId,h=u.sessionTopics,f=u.sessionKey,p=u.messageId,_=u.channelKey,g=u.templateKey,C=u.notificationEventDeadline,!f||!h.includes(u0.PUSH_ACKNOWLEDGEMENT))throw i.info("Can't use markPushNotificationAsClicked() feature."),Q.malformedDataError;if(o.isAcked(c,l))return i.info("already clicked push notification:",c),[2];E=(t=a.deviceTokens[0])===null||t===void 0?void 0:t.token,y=new FR({deviceToken:E??"",pushTrackingId:c,eventType:l,messageId:p,channelKey:_,templateKey:g,notificationEventDeadline:C}),f&&(y.headers["Session-Key"]=f),I.label=1;case 1:return I.trys.push([1,3,,4]),[4,s.send(y)];case 2:return I.sent(),o.markAsAcked(c,l),[3,4];case 3:throw S=I.sent(),i.debug("failed to mark push notification as clicked. push tracking id: ".concat(c,". error: ").concat(S)),S;case 4:return[2]}})})},e.prototype.getChannelInvitationPreference=function(){return N(this,void 0,void 0,function(){var n,t,r,i,a;return T(this,function(s){switch(s.label){case 0:return n=q.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new NX({userId:t.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,{autoAccept:a.as(IX).autoAccept}]}})})},e.prototype.setChannelInvitationPreference=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s;return T(this,function(o){switch(o.label){case 0:return me(Y("boolean",n)).throw(Q.invalidParameters),t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new MX({userId:r.userId,willAutoAccept:n}),[4,i.send(a)];case 1:return s=o.sent(),[2,{autoAccept:s.as(AX).autoAccept}]}})})},e.prototype.getDoNotDisturb=function(){return N(this,void 0,void 0,function(){var n,t,r,i,a;return T(this,function(s){switch(s.label){case 0:return n=q.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new wX({userId:t.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(RX).preference]}})})},e.prototype.setDoNotDisturb=function(n,t,r,i,a,s){return t===void 0&&(t=0),r===void 0&&(r=0),i===void 0&&(i=0),a===void 0&&(a=0),s===void 0&&(s=""),N(this,void 0,void 0,function(){var o,l,u,c,h;return T(this,function(f){switch(f.label){case 0:return me(Y("boolean",n)&&Y("number",t)&&Y("number",r)&&Y("number",i)&&Y("number",a)&&Y("string",s)).throw(Q.invalidParameters),o=q.of(this._iid),l=o.sdkState,u=o.requestQueue,c=new OX({userId:l.userId,doNotDisturbOn:n,startHour:t,startMin:r,endHour:i,endMin:a,timezone:s}),[4,u.send(c)];case 1:return h=f.sent(),[2,h.as(DX).preference]}})})},e.prototype.getSnoozePeriod=function(){return N(this,void 0,void 0,function(){var n,t,r,i,a;return T(this,function(s){switch(s.label){case 0:return n=q.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new UX({userId:t.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(LX).snoozePeriod]}})})},e.prototype.setSnoozePeriod=function(n,t,r){return t===void 0&&(t=0),r===void 0&&(r=0),N(this,void 0,void 0,function(){var i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:return me(Y("boolean",n)&&Y("number",t)&&Y("number",r)).throw(Q.invalidParameters),i=q.of(this._iid),a=i.sdkState,s=i.requestQueue,o=new kX({userId:a.userId,snoozeOn:n,startTs:t,endTs:r}),[4,s.send(o)];case 1:return l=u.sent(),[2,l.as(xX).snoozePeriod]}})})},e.prototype.getMyPushTokensByToken=function(n,t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u,c,h,f,p,_;return T(this,function(g){switch(g.label){case 0:return me(Y("string",n)&&Bt(ri,t)).throw(Q.invalidParameters),r=q.of(this._iid),i=r.sdkState,a=r.requestQueue,s=r.sessionManager,o=new SX({userId:i.userId,type:t,token:n}),[4,a.send(o)];case 1:l=g.sent(),u=l.as(TX).pushTokens;try{for(c=ye(u.deviceTokens),h=c.next();!h.done;h=c.next())f=h.value,s.setDeviceToken(u.type,f)}catch(C){p={error:C}}finally{try{h&&!h.done&&(_=c.return)&&_.call(c)}finally{if(p)throw p.error}}return[4,s.saveDeviceToken()];case 2:return g.sent(),[2,u]}})})},e.prototype.getPushTriggerOption=function(){return N(this,void 0,void 0,function(){var n,t,r,i;return T(this,function(a){switch(a.label){case 0:return n=q.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new BX({userId:t.userId}),[4,r.send(i)];case 1:return[2,a.sent().as(HX).pushTriggerOption]}})})},e.prototype.setPushTriggerOption=function(n){return N(this,void 0,void 0,function(){var t,r,i,a;return T(this,function(s){switch(s.label){case 0:return me(Bt(Zc,n)).throw(Q.invalidParameters),t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new GX({userId:r.userId,pushTriggerOption:n}),[4,i.send(a)];case 1:return[2,s.sent().as($X).pushTriggerOption]}})})},e.prototype.getPushTemplate=function(){return N(this,void 0,void 0,function(){var n,t,r,i;return T(this,function(a){switch(a.label){case 0:return n=q.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new VX({userId:t.userId}),[4,r.send(i)];case 1:return[2,a.sent().as(zX).name]}})})},e.prototype.setPushTemplate=function(n){return N(this,void 0,void 0,function(){var t,r,i,a;return T(this,function(s){switch(s.label){case 0:return me(Bt(b1,n)).throw(Q.invalidParameters),t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new jX({userId:r.userId,templateName:n}),[4,i.send(a)];case 1:return[2,s.sent().as(qX).name]}})})},e.prototype.blockUser=function(n){return N(this,void 0,void 0,function(){var t,r,i,a;return T(this,function(s){switch(s.label){case 0:return me(n instanceof Gt||Y("string",n)).throw(Q.invalidParameters),t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new PX({userId:r.userId,blockedUserId:n instanceof Gt?n.userId:n}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},e.prototype.blockUserWithUserId=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){return[2,this.blockUser(n)]})})},e.prototype.unblockUser=function(n){return N(this,void 0,void 0,function(){var t,r,i,a;return T(this,function(s){switch(s.label){case 0:return me(n instanceof Gt||Y("string",n)).throw(Q.invalidParameters),t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new FX({userId:r.userId,unblockedUserId:n instanceof Gt?n.userId:n}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},e.prototype.unblockUserWithUserId=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){return[2,this.unblockUser(n)]})})},e.prototype.getFriendChangeLogsByToken=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s;return T(this,function(o){switch(o.label){case 0:return me(Y("string",n)).throw(Q.invalidParameters),t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new KX({userId:r.userId,token:n}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(WX).changelogs]}})})},e.prototype.getAllowFriendDiscovery=function(){return N(this,void 0,void 0,function(){var n,t,r,i,a;return T(this,function(s){switch(s.label){case 0:return n=q.of(this._iid),t=n.sdkState,r=n.requestQueue,i=new tZ({userId:t.userId}),[4,r.send(i)];case 1:return a=s.sent(),[2,a.as(nZ).allowFriendDiscovery]}})})},e.prototype.setAllowFriendDiscovery=function(n){return N(this,void 0,void 0,function(){var t,r,i,a;return T(this,function(s){switch(s.label){case 0:return me(Y("boolean",n)).throw(Q.invalidParameters),t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new rZ({userId:r.userId,allowFriendDiscovery:n}),[4,i.send(a)];case 1:return s.sent(),[2,n]}})})},e.prototype.uploadFriendDiscoveries=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s;return T(this,function(o){switch(o.label){case 0:return t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new YX({userId:r.userId,discoveries:n}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(QX).friendDiscoveryRequestId]}})})},e.prototype.deleteFriendDiscovery=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){return[2,this.deleteFriendDiscoveries([n])]})})},e.prototype.deleteFriendDiscoveries=function(n){return N(this,void 0,void 0,function(){var t,r,i,a;return T(this,function(s){switch(s.label){case 0:return me(Ht("string",n)).throw(Q.invalidParameters),t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new XX({userId:r.userId,discoveryKeys:n}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},e.prototype.addFriends=function(n){return N(this,void 0,void 0,function(){var t,r,i,a,s;return T(this,function(o){switch(o.label){case 0:return me(Ht("string",n)).throw(Q.invalidParameters),t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new ZX({userId:r.userId,userIds:n}),[4,i.send(a)];case 1:return s=o.sent(),[2,s.as(JX).users]}})})},e.prototype.deleteFriend=function(n){return N(this,void 0,void 0,function(){return T(this,function(t){return[2,this.deleteFriends([n])]})})},e.prototype.deleteFriends=function(n){return N(this,void 0,void 0,function(){var t,r,i,a;return T(this,function(s){switch(s.label){case 0:return me(Ht("string",n)).throw(Q.invalidParameters),t=q.of(this._iid),r=t.sdkState,i=t.requestQueue,a=new eZ({userId:r.userId,userIds:n}),[4,i.send(a)];case 1:return s.sent(),[2]}})})},e.prototype.getAllEmoji=function(){return N(this,void 0,void 0,function(){var n,t,r;return T(this,function(i){switch(i.label){case 0:return n=q.of(this._iid).requestQueue,t=new iZ,[4,n.send(t)];case 1:return r=i.sent(),[2,r.as(aZ).emojiContainer]}})})},e.prototype.getEmojiCategory=function(n){return N(this,void 0,void 0,function(){var t,r,i;return T(this,function(a){switch(a.label){case 0:return t=q.of(this._iid).requestQueue,r=new sZ({categoryId:n}),[4,t.send(r)];case 1:return i=a.sent(),[2,i.as(oZ).emojiCategory]}})})},e.prototype.getEmoji=function(n){return N(this,void 0,void 0,function(){var t,r,i;return T(this,function(a){switch(a.label){case 0:return t=q.of(this._iid).requestQueue,r=new lZ({key:n}),[4,t.send(r)];case 1:return i=a.sent(),[2,i.as(uZ).emoji]}})})},e.prototype.getUIKitConfiguration=function(){return N(this,void 0,void 0,function(){var n,t,r,i;return T(this,function(a){switch(a.label){case 0:return n=q.of(this._iid),me(n.hasExtension("sb_uikit")).throw(Q.notSupportedError),t=n.requestQueue,r=new cZ,[4,t.send(r)];case 1:return i=a.sent(),[2,i.as(dZ).uikitConfiguration]}})})},e.prototype.getReportCategoryInfoList=function(){return N(this,void 0,void 0,function(){return T(this,function(n){switch(n.label){case 0:return[4,q.of(this._iid).reportCategoryManager.categories()];case 1:return[2,n.sent()]}})})},e}();function pn(e){return typeof e=="boolean"}function ch(e,n){return n.includes(e)}function hZ(e){return e instanceof Set}function fZ(e,n){return Object.prototype.toString.call(e)===Object.prototype.toString.call(n)}function W1(e){if(typeof e!="object"||e===null)return e;if(Array.isArray(e))return e.map(t=>W1(t));const n={};return Object.keys(e).forEach(t=>{const r=t.replace(/_\w/g,i=>i[1].toUpperCase());n[r]=W1(e[t])}),n}function z4(e,n){const t=Object.assign({},e);return Object.keys(n).forEach(r=>{Object.prototype.hasOwnProperty.call(t,r)&&fZ(t[r],n[r])&&(typeof n[r]=="object"&&!Array.isArray(n[r])?t[r]=z4(t[r],n[r]):t[r]=n[r])}),t}const QN=()=>({common:{enableUsingDefaultUserProfile:!1},groupChannel:{channel:{enableMention:!1,enableOgtag:!0,enableReactions:!0,enableReactionsSupergroup:!1,enableTypingIndicator:!0,enableVoiceMessage:!1,input:{camera:{enablePhoto:!0,enableVideo:!0},enableDocument:!0,gallery:{enablePhoto:!0,enableVideo:!0}},replyType:"quote_reply",threadReplySelectType:"thread",typingIndicatorTypes:new Set(["text"]),enableFeedback:!1,enableSuggestedReplies:!1,showSuggestedRepliesFor:"last_message_only",suggestedRepliesDirection:"vertical",enableMarkdownForUserMessage:!1,enableFormTypeMessage:!1,enableMarkAsUnread:!1},channelList:{enableMessageReceiptStatus:!1,enableTypingIndicator:!1},setting:{enableMessageSearch:!1}},openChannel:{channel:{enableOgtag:!0,input:{camera:{enablePhoto:!0,enableVideo:!0},enableDocument:!0,gallery:{enablePhoto:!0,enableVideo:!0}}}}});function vZ(e){return delete e.groupChannel.channel.typingIndicatorTypes,delete e.groupChannel.channel.enableFeedback,delete e.groupChannel.channel.enableSuggestedReplies,delete e.groupChannel.channel.showSuggestedRepliesFor,delete e.groupChannel.channel.suggestedRepliesDirection,delete e.groupChannel.channel.enableMarkdownForUserMessage,delete e.groupChannel.channel.enableFormTypeMessage,e}const j4=()=>{const e=QN();return vZ(e)},BR=QN(),pZ=j4();var S0=function(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{u(r.next(c))}catch(h){s(h)}}function l(c){try{u(r.throw(c))}catch(h){s(h)}}function u(c){c.done?a(c.value):i(c.value).then(o,l)}u((r=r.apply(e,n||[])).next())})};const Y1={items:{},getItem(e){var n;return S0(this,void 0,void 0,function*(){return(n=Y1.items[e])!==null&&n!==void 0?n:null})},setItem(e,n){return S0(this,void 0,void 0,function*(){Y1.items[e]=n})}};class mZ{constructor(n){this.storage=n??Y1}init(n){return this.key=`sbu@${n}.uikitConfiguration`,this.get()}get safeKey(){if(!this.key)throw new Error("Please UIKitConfigManager.init() first");return this.key}update(n){return S0(this,void 0,void 0,function*(){const t=yield this.get(),r={updatedAt:n.updatedAt,configuration:z4(t.configuration,n.configuration)};return yield this.storage.setItem(this.safeKey,JSON.stringify(r)),r})}get(){return S0(this,void 0,void 0,function*(){const n={updatedAt:0,configuration:pZ};try{const t=yield this.storage.getItem(this.safeKey);return t?JSON.parse(t):n}catch{return n}})}}function _Z(e,n,t){var r,i;t.common&&pn((r=t.common)===null||r===void 0?void 0:r.enableUsingDefaultUserProfile)&&(e.enableUsingDefaultUserProfile=t.common.enableUsingDefaultUserProfile),n.common&&pn((i=n.common)===null||i===void 0?void 0:i.enableUsingDefaultUserProfile)&&(e.enableUsingDefaultUserProfile=n.common.enableUsingDefaultUserProfile)}function gZ(e,n,t){EZ(e,n,t),yZ(e,n,t),bZ(e,n,t),CZ(e,n,t)}function EZ(e,n,t){var r,i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w,R,A,U,O,B,F,P,G,L,$,j,X,K,Z,te,ne,le,Te,Ze,ce,ge,Qe,xe,tt,ht,bt,Rt,Ut,lt,kt,$t,mt,zt,Tt,Pt,Xe,je,Ve,Ct,ut,qe,pt,jt,Ue,hn,un,vn,Xt,Wt,At,xt,on,xn,st,ct,at,Pe,he,He,ot,nt,Zt,dt,On,Yt,rn,Pn,_n,Tn,qn,Be,rt,et,Nt,Et,Ot,nn,Nn,Je,an,Ke,J,Se,We,qt,Cn,yn,Wn,Xn,_t,Jt,gt,Qt,Tr,Qr,gi,kr,Ws,Cs,Ys;!((r=t.groupChannel)===null||r===void 0)&&r.channel&&pn((a=(i=t.groupChannel)===null||i===void 0?void 0:i.channel)===null||a===void 0?void 0:a.enableOgtag)&&(e.channel.enableOgtag=t.groupChannel.channel.enableOgtag),!((s=n.groupChannel)===null||s===void 0)&&s.channel&&pn((l=(o=n.groupChannel)===null||o===void 0?void 0:o.channel)===null||l===void 0?void 0:l.enableOgtag)&&(e.channel.enableOgtag=(c=(u=n.groupChannel)===null||u===void 0?void 0:u.channel)===null||c===void 0?void 0:c.enableOgtag),!((h=t.groupChannel)===null||h===void 0)&&h.channel&&pn((p=(f=t.groupChannel)===null||f===void 0?void 0:f.channel)===null||p===void 0?void 0:p.enableTypingIndicator)&&(e.channel.enableTypingIndicator=(g=(_=t.groupChannel)===null||_===void 0?void 0:_.channel)===null||g===void 0?void 0:g.enableTypingIndicator),!((C=n.groupChannel)===null||C===void 0)&&C.channel&&pn((y=(E=n.groupChannel)===null||E===void 0?void 0:E.channel)===null||y===void 0?void 0:y.enableTypingIndicator)&&(e.channel.enableTypingIndicator=(I=(S=n.groupChannel)===null||S===void 0?void 0:S.channel)===null||I===void 0?void 0:I.enableTypingIndicator),!((w=t.groupChannel)===null||w===void 0)&&w.channel&&pn((A=(R=t.groupChannel)===null||R===void 0?void 0:R.channel)===null||A===void 0?void 0:A.enableReactions)&&(e.channel.enableReactions=(O=(U=t.groupChannel)===null||U===void 0?void 0:U.channel)===null||O===void 0?void 0:O.enableReactions),!((B=n.groupChannel)===null||B===void 0)&&B.channel&&pn((P=(F=n.groupChannel)===null||F===void 0?void 0:F.channel)===null||P===void 0?void 0:P.enableReactions)&&(e.channel.enableReactions=(L=(G=n.groupChannel)===null||G===void 0?void 0:G.channel)===null||L===void 0?void 0:L.enableReactions),!(($=t.groupChannel)===null||$===void 0)&&$.channel&&pn((X=(j=t.groupChannel)===null||j===void 0?void 0:j.channel)===null||X===void 0?void 0:X.enableReactionsSupergroup)&&(e.channel.enableReactionsSupergroup=(Z=(K=t.groupChannel)===null||K===void 0?void 0:K.channel)===null||Z===void 0?void 0:Z.enableReactionsSupergroup),!((te=n.groupChannel)===null||te===void 0)&&te.channel&&pn((le=(ne=n.groupChannel)===null||ne===void 0?void 0:ne.channel)===null||le===void 0?void 0:le.enableReactionsSupergroup)&&console.warn("Currently, EnableReactionsSupergroup feature is turned off by default. If you wish to use this feature, contact us: https://dashboard.sendbird.com/settings/contact_us?category=feedback_and_feature_requests&product=UIKit"),!((Te=t.groupChannel)===null||Te===void 0)&&Te.channel&&pn((ce=(Ze=t.groupChannel)===null||Ze===void 0?void 0:Ze.channel)===null||ce===void 0?void 0:ce.enableMention)&&(e.channel.enableMention=(Qe=(ge=t.groupChannel)===null||ge===void 0?void 0:ge.channel)===null||Qe===void 0?void 0:Qe.enableMention),!((xe=n.groupChannel)===null||xe===void 0)&&xe.channel&&pn((ht=(tt=n.groupChannel)===null||tt===void 0?void 0:tt.channel)===null||ht===void 0?void 0:ht.enableMention)&&(e.channel.enableMention=(Rt=(bt=n.groupChannel)===null||bt===void 0?void 0:bt.channel)===null||Rt===void 0?void 0:Rt.enableMention),!((Ut=t.groupChannel)===null||Ut===void 0)&&Ut.channel&&pn((kt=(lt=t.groupChannel)===null||lt===void 0?void 0:lt.channel)===null||kt===void 0?void 0:kt.enableMarkAsUnread)&&(e.channel.enableMarkAsUnread=t.groupChannel.channel.enableMarkAsUnread),!(($t=n.groupChannel)===null||$t===void 0)&&$t.channel&&pn((zt=(mt=n.groupChannel)===null||mt===void 0?void 0:mt.channel)===null||zt===void 0?void 0:zt.enableMarkAsUnread)&&(e.channel.enableMarkAsUnread=(Pt=(Tt=n.groupChannel)===null||Tt===void 0?void 0:Tt.channel)===null||Pt===void 0?void 0:Pt.enableMarkAsUnread),!((Xe=t.groupChannel)===null||Xe===void 0)&&Xe.channel&&ch((Ve=(je=t.groupChannel)===null||je===void 0?void 0:je.channel)===null||Ve===void 0?void 0:Ve.replyType,["none","quote_reply","thread"])&&(e.channel.replyType=(ut=(Ct=t.groupChannel)===null||Ct===void 0?void 0:Ct.channel)===null||ut===void 0?void 0:ut.replyType),!((qe=n.groupChannel)===null||qe===void 0)&&qe.channel&&ch((jt=(pt=n.groupChannel)===null||pt===void 0?void 0:pt.channel)===null||jt===void 0?void 0:jt.replyType,["none","quote_reply","thread"])&&(e.channel.replyType=(hn=(Ue=n.groupChannel)===null||Ue===void 0?void 0:Ue.channel)===null||hn===void 0?void 0:hn.replyType),!((un=t.groupChannel)===null||un===void 0)&&un.channel&&ch((Xt=(vn=t.groupChannel)===null||vn===void 0?void 0:vn.channel)===null||Xt===void 0?void 0:Xt.threadReplySelectType,["thread","parent"])&&(e.channel.threadReplySelectType=(At=(Wt=t.groupChannel)===null||Wt===void 0?void 0:Wt.channel)===null||At===void 0?void 0:At.threadReplySelectType),!((xt=n.groupChannel)===null||xt===void 0)&&xt.channel&&ch((xn=(on=n.groupChannel)===null||on===void 0?void 0:on.channel)===null||xn===void 0?void 0:xn.threadReplySelectType,["thread","parent"])&&(e.channel.threadReplySelectType=(ct=(st=n.groupChannel)===null||st===void 0?void 0:st.channel)===null||ct===void 0?void 0:ct.threadReplySelectType),!((at=t.groupChannel)===null||at===void 0)&&at.channel&&pn((he=(Pe=t.groupChannel)===null||Pe===void 0?void 0:Pe.channel)===null||he===void 0?void 0:he.enableVoiceMessage)&&(e.channel.enableVoiceMessage=(ot=(He=t.groupChannel)===null||He===void 0?void 0:He.channel)===null||ot===void 0?void 0:ot.enableVoiceMessage),!((nt=n.groupChannel)===null||nt===void 0)&&nt.channel&&pn((dt=(Zt=n.groupChannel)===null||Zt===void 0?void 0:Zt.channel)===null||dt===void 0?void 0:dt.enableVoiceMessage)&&(e.channel.enableVoiceMessage=(Yt=(On=n.groupChannel)===null||On===void 0?void 0:On.channel)===null||Yt===void 0?void 0:Yt.enableVoiceMessage),!((rn=n.groupChannel)===null||rn===void 0)&&rn.channel&&hZ((_n=(Pn=n.groupChannel)===null||Pn===void 0?void 0:Pn.channel)===null||_n===void 0?void 0:_n.typingIndicatorTypes)&&(e.channel.typingIndicatorTypes=(qn=(Tn=n.groupChannel)===null||Tn===void 0?void 0:Tn.channel)===null||qn===void 0?void 0:qn.typingIndicatorTypes),!((Be=n.groupChannel)===null||Be===void 0)&&Be.channel&&pn((et=(rt=n.groupChannel)===null||rt===void 0?void 0:rt.channel)===null||et===void 0?void 0:et.enableFeedback)&&(e.channel.enableFeedback=(Et=(Nt=n.groupChannel)===null||Nt===void 0?void 0:Nt.channel)===null||Et===void 0?void 0:Et.enableFeedback),!((Ot=n.groupChannel)===null||Ot===void 0)&&Ot.channel&&pn((Nn=(nn=n.groupChannel)===null||nn===void 0?void 0:nn.channel)===null||Nn===void 0?void 0:Nn.enableSuggestedReplies)&&(e.channel.enableSuggestedReplies=(an=(Je=n.groupChannel)===null||Je===void 0?void 0:Je.channel)===null||an===void 0?void 0:an.enableSuggestedReplies),!((Ke=n.groupChannel)===null||Ke===void 0)&&Ke.channel&&ch((Se=(J=n.groupChannel)===null||J===void 0?void 0:J.channel)===null||Se===void 0?void 0:Se.showSuggestedRepliesFor,["all_messages","last_message_only"])&&(e.channel.showSuggestedRepliesFor=(qt=(We=n.groupChannel)===null||We===void 0?void 0:We.channel)===null||qt===void 0?void 0:qt.showSuggestedRepliesFor),!((Cn=n.groupChannel)===null||Cn===void 0)&&Cn.channel&&ch((Wn=(yn=n.groupChannel)===null||yn===void 0?void 0:yn.channel)===null||Wn===void 0?void 0:Wn.suggestedRepliesDirection,["vertical","horizontal"])&&(e.channel.suggestedRepliesDirection=(_t=(Xn=n.groupChannel)===null||Xn===void 0?void 0:Xn.channel)===null||_t===void 0?void 0:_t.suggestedRepliesDirection),!((Jt=n.groupChannel)===null||Jt===void 0)&&Jt.channel&&pn((Qt=(gt=n.groupChannel)===null||gt===void 0?void 0:gt.channel)===null||Qt===void 0?void 0:Qt.enableMarkdownForUserMessage)&&(e.channel.enableMarkdownForUserMessage=(Qr=(Tr=n.groupChannel)===null||Tr===void 0?void 0:Tr.channel)===null||Qr===void 0?void 0:Qr.enableMarkdownForUserMessage),!((gi=n.groupChannel)===null||gi===void 0)&&gi.channel&&pn((Ws=(kr=n.groupChannel)===null||kr===void 0?void 0:kr.channel)===null||Ws===void 0?void 0:Ws.enableFormTypeMessage)&&(e.channel.enableFormTypeMessage=(Ys=(Cs=n.groupChannel)===null||Cs===void 0?void 0:Cs.channel)===null||Ys===void 0?void 0:Ys.enableFormTypeMessage)}function yZ(e,n,t){var r,i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w,R,A,U,O,B,F,P,G,L,$,j,X,K,Z,te,ne,le,Te,Ze,ce,ge,Qe,xe,tt,ht,bt,Rt,Ut,lt,kt,$t,mt,zt,Tt,Pt,Xe,je,Ve,Ct,ut,qe,pt,jt,Ue,hn,un,vn,Xt,Wt,At,xt,on,xn,st,ct,at,Pe,he,He,ot,nt,Zt,dt,On,Yt,rn,Pn,_n,Tn,qn,Be,rt,et,Nt,Et,Ot,nn,Nn,Je,an,Ke,J,Se,We,qt;!((i=(r=t.groupChannel)===null||r===void 0?void 0:r.channel)===null||i===void 0)&&i.input&&pn((o=(s=(a=t.groupChannel)===null||a===void 0?void 0:a.channel)===null||s===void 0?void 0:s.input)===null||o===void 0?void 0:o.enableDocument)&&(e.channel.input.enableDocument=(c=(u=(l=t.groupChannel)===null||l===void 0?void 0:l.channel)===null||u===void 0?void 0:u.input)===null||c===void 0?void 0:c.enableDocument),!((f=(h=n.groupChannel)===null||h===void 0?void 0:h.channel)===null||f===void 0)&&f.input&&pn((g=(_=(p=n.groupChannel)===null||p===void 0?void 0:p.channel)===null||_===void 0?void 0:_.input)===null||g===void 0?void 0:g.enableDocument)&&(e.channel.input.enableDocument=(y=(E=(C=n.groupChannel)===null||C===void 0?void 0:C.channel)===null||E===void 0?void 0:E.input)===null||y===void 0?void 0:y.enableDocument),!((w=(I=(S=t.groupChannel)===null||S===void 0?void 0:S.channel)===null||I===void 0?void 0:I.input)===null||w===void 0)&&w.camera&&pn((O=(U=(A=(R=t.groupChannel)===null||R===void 0?void 0:R.channel)===null||A===void 0?void 0:A.input)===null||U===void 0?void 0:U.camera)===null||O===void 0?void 0:O.enablePhoto)&&(e.channel.input.camera.enablePhoto=(G=(P=(F=(B=t.groupChannel)===null||B===void 0?void 0:B.channel)===null||F===void 0?void 0:F.input)===null||P===void 0?void 0:P.camera)===null||G===void 0?void 0:G.enablePhoto),!((j=($=(L=n.groupChannel)===null||L===void 0?void 0:L.channel)===null||$===void 0?void 0:$.input)===null||j===void 0)&&j.camera&&pn((te=(Z=(K=(X=n.groupChannel)===null||X===void 0?void 0:X.channel)===null||K===void 0?void 0:K.input)===null||Z===void 0?void 0:Z.camera)===null||te===void 0?void 0:te.enablePhoto)&&(e.channel.input.camera.enablePhoto=(Ze=(Te=(le=(ne=n.groupChannel)===null||ne===void 0?void 0:ne.channel)===null||le===void 0?void 0:le.input)===null||Te===void 0?void 0:Te.camera)===null||Ze===void 0?void 0:Ze.enablePhoto),!((Qe=(ge=(ce=t.groupChannel)===null||ce===void 0?void 0:ce.channel)===null||ge===void 0?void 0:ge.input)===null||Qe===void 0)&&Qe.camera&&pn((bt=(ht=(tt=(xe=t.groupChannel)===null||xe===void 0?void 0:xe.channel)===null||tt===void 0?void 0:tt.input)===null||ht===void 0?void 0:ht.camera)===null||bt===void 0?void 0:bt.enableVideo)&&(e.channel.input.camera.enableVideo=(kt=(lt=(Ut=(Rt=t.groupChannel)===null||Rt===void 0?void 0:Rt.channel)===null||Ut===void 0?void 0:Ut.input)===null||lt===void 0?void 0:lt.camera)===null||kt===void 0?void 0:kt.enableVideo),!((zt=(mt=($t=n.groupChannel)===null||$t===void 0?void 0:$t.channel)===null||mt===void 0?void 0:mt.input)===null||zt===void 0)&&zt.camera&&pn((je=(Xe=(Pt=(Tt=n.groupChannel)===null||Tt===void 0?void 0:Tt.channel)===null||Pt===void 0?void 0:Pt.input)===null||Xe===void 0?void 0:Xe.camera)===null||je===void 0?void 0:je.enableVideo)&&(e.channel.input.camera.enableVideo=(qe=(ut=(Ct=(Ve=n.groupChannel)===null||Ve===void 0?void 0:Ve.channel)===null||Ct===void 0?void 0:Ct.input)===null||ut===void 0?void 0:ut.camera)===null||qe===void 0?void 0:qe.enableVideo),!((Ue=(jt=(pt=t.groupChannel)===null||pt===void 0?void 0:pt.channel)===null||jt===void 0?void 0:jt.input)===null||Ue===void 0)&&Ue.gallery&&pn((Xt=(vn=(un=(hn=t.groupChannel)===null||hn===void 0?void 0:hn.channel)===null||un===void 0?void 0:un.input)===null||vn===void 0?void 0:vn.gallery)===null||Xt===void 0?void 0:Xt.enablePhoto)&&(e.channel.input.gallery.enablePhoto=(on=(xt=(At=(Wt=t.groupChannel)===null||Wt===void 0?void 0:Wt.channel)===null||At===void 0?void 0:At.input)===null||xt===void 0?void 0:xt.gallery)===null||on===void 0?void 0:on.enablePhoto),!((ct=(st=(xn=n.groupChannel)===null||xn===void 0?void 0:xn.channel)===null||st===void 0?void 0:st.input)===null||ct===void 0)&&ct.gallery&&pn((He=(he=(Pe=(at=n.groupChannel)===null||at===void 0?void 0:at.channel)===null||Pe===void 0?void 0:Pe.input)===null||he===void 0?void 0:he.gallery)===null||He===void 0?void 0:He.enablePhoto)&&(e.channel.input.gallery.enablePhoto=(dt=(Zt=(nt=(ot=n.groupChannel)===null||ot===void 0?void 0:ot.channel)===null||nt===void 0?void 0:nt.input)===null||Zt===void 0?void 0:Zt.gallery)===null||dt===void 0?void 0:dt.enablePhoto),!((rn=(Yt=(On=t.groupChannel)===null||On===void 0?void 0:On.channel)===null||Yt===void 0?void 0:Yt.input)===null||rn===void 0)&&rn.gallery&&pn((qn=(Tn=(_n=(Pn=t.groupChannel)===null||Pn===void 0?void 0:Pn.channel)===null||_n===void 0?void 0:_n.input)===null||Tn===void 0?void 0:Tn.gallery)===null||qn===void 0?void 0:qn.enableVideo)&&(e.channel.input.gallery.enableVideo=(Nt=(et=(rt=(Be=t.groupChannel)===null||Be===void 0?void 0:Be.channel)===null||rt===void 0?void 0:rt.input)===null||et===void 0?void 0:et.gallery)===null||Nt===void 0?void 0:Nt.enableVideo),!((nn=(Ot=(Et=n.groupChannel)===null||Et===void 0?void 0:Et.channel)===null||Ot===void 0?void 0:Ot.input)===null||nn===void 0)&&nn.gallery&&pn((Ke=(an=(Je=(Nn=n.groupChannel)===null||Nn===void 0?void 0:Nn.channel)===null||Je===void 0?void 0:Je.input)===null||an===void 0?void 0:an.gallery)===null||Ke===void 0?void 0:Ke.enableVideo)&&(e.channel.input.gallery.enableVideo=(qt=(We=(Se=(J=n.groupChannel)===null||J===void 0?void 0:J.channel)===null||Se===void 0?void 0:Se.input)===null||We===void 0?void 0:We.gallery)===null||qt===void 0?void 0:qt.enableVideo)}function bZ(e,n,t){var r,i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I;!((r=t.groupChannel)===null||r===void 0)&&r.channelList&&pn((a=(i=t.groupChannel)===null||i===void 0?void 0:i.channelList)===null||a===void 0?void 0:a.enableTypingIndicator)&&(e.channelList.enableTypingIndicator=t.groupChannel.channelList.enableTypingIndicator),!((s=n.groupChannel)===null||s===void 0)&&s.channelList&&pn((l=(o=n.groupChannel)===null||o===void 0?void 0:o.channelList)===null||l===void 0?void 0:l.enableTypingIndicator)&&(e.channelList.enableTypingIndicator=(c=(u=n.groupChannel)===null||u===void 0?void 0:u.channelList)===null||c===void 0?void 0:c.enableTypingIndicator),!((h=t.groupChannel)===null||h===void 0)&&h.channelList&&pn((p=(f=t.groupChannel)===null||f===void 0?void 0:f.channelList)===null||p===void 0?void 0:p.enableMessageReceiptStatus)&&(e.channelList.enableMessageReceiptStatus=(g=(_=t.groupChannel)===null||_===void 0?void 0:_.channelList)===null||g===void 0?void 0:g.enableMessageReceiptStatus),!((C=n.groupChannel)===null||C===void 0)&&C.channelList&&pn((y=(E=n.groupChannel)===null||E===void 0?void 0:E.channelList)===null||y===void 0?void 0:y.enableMessageReceiptStatus)&&(e.channelList.enableMessageReceiptStatus=(I=(S=n.groupChannel)===null||S===void 0?void 0:S.channelList)===null||I===void 0?void 0:I.enableMessageReceiptStatus)}function CZ(e,n,t){var r,i,a,s,o,l,u,c;!((r=t.groupChannel)===null||r===void 0)&&r.setting&&pn((a=(i=t.groupChannel)===null||i===void 0?void 0:i.setting)===null||a===void 0?void 0:a.enableMessageSearch)&&(e.setting.enableMessageSearch=t.groupChannel.setting.enableMessageSearch),!((s=n.groupChannel)===null||s===void 0)&&s.setting&&pn((l=(o=n.groupChannel)===null||o===void 0?void 0:o.setting)===null||l===void 0?void 0:l.enableMessageSearch)&&(e.setting.enableMessageSearch=(c=(u=n.groupChannel)===null||u===void 0?void 0:u.setting)===null||c===void 0?void 0:c.enableMessageSearch)}function SZ(e,n,t){TZ(e,n,t),NZ(e,n,t)}function TZ(e,n,t){var r,i,a,s,o,l,u,c;!((r=t.openChannel)===null||r===void 0)&&r.channel&&pn((a=(i=t.openChannel)===null||i===void 0?void 0:i.channel)===null||a===void 0?void 0:a.enableOgtag)&&(e.channel.enableOgtag=t.openChannel.channel.enableOgtag),!((s=n.openChannel)===null||s===void 0)&&s.channel&&pn((l=(o=n.openChannel)===null||o===void 0?void 0:o.channel)===null||l===void 0?void 0:l.enableOgtag)&&(e.channel.enableOgtag=(c=(u=n.openChannel)===null||u===void 0?void 0:u.channel)===null||c===void 0?void 0:c.enableOgtag)}function NZ(e,n,t){var r,i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w,R,A,U,O,B,F,P,G,L,$,j,X,K,Z,te,ne,le,Te,Ze,ce,ge,Qe,xe,tt,ht,bt,Rt,Ut,lt,kt,$t,mt,zt,Tt,Pt,Xe,je,Ve,Ct,ut,qe,pt,jt,Ue,hn,un,vn,Xt,Wt,At,xt,on,xn,st,ct,at,Pe,he,He,ot,nt,Zt,dt,On,Yt,rn,Pn,_n,Tn,qn,Be,rt,et,Nt,Et,Ot,nn,Nn,Je,an,Ke,J,Se,We,qt;!((i=(r=t.openChannel)===null||r===void 0?void 0:r.channel)===null||i===void 0)&&i.input&&pn((o=(s=(a=t.openChannel)===null||a===void 0?void 0:a.channel)===null||s===void 0?void 0:s.input)===null||o===void 0?void 0:o.enableDocument)&&(e.channel.input.enableDocument=(c=(u=(l=t.openChannel)===null||l===void 0?void 0:l.channel)===null||u===void 0?void 0:u.input)===null||c===void 0?void 0:c.enableDocument),!((f=(h=n.openChannel)===null||h===void 0?void 0:h.channel)===null||f===void 0)&&f.input&&pn((g=(_=(p=n.openChannel)===null||p===void 0?void 0:p.channel)===null||_===void 0?void 0:_.input)===null||g===void 0?void 0:g.enableDocument)&&(e.channel.input.enableDocument=(y=(E=(C=n.openChannel)===null||C===void 0?void 0:C.channel)===null||E===void 0?void 0:E.input)===null||y===void 0?void 0:y.enableDocument),!((w=(I=(S=t.openChannel)===null||S===void 0?void 0:S.channel)===null||I===void 0?void 0:I.input)===null||w===void 0)&&w.camera&&pn((O=(U=(A=(R=t.openChannel)===null||R===void 0?void 0:R.channel)===null||A===void 0?void 0:A.input)===null||U===void 0?void 0:U.camera)===null||O===void 0?void 0:O.enablePhoto)&&(e.channel.input.camera.enablePhoto=(G=(P=(F=(B=t.openChannel)===null||B===void 0?void 0:B.channel)===null||F===void 0?void 0:F.input)===null||P===void 0?void 0:P.camera)===null||G===void 0?void 0:G.enablePhoto),!((j=($=(L=n.openChannel)===null||L===void 0?void 0:L.channel)===null||$===void 0?void 0:$.input)===null||j===void 0)&&j.camera&&pn((te=(Z=(K=(X=n.openChannel)===null||X===void 0?void 0:X.channel)===null||K===void 0?void 0:K.input)===null||Z===void 0?void 0:Z.camera)===null||te===void 0?void 0:te.enablePhoto)&&(e.channel.input.camera.enablePhoto=(Ze=(Te=(le=(ne=n.openChannel)===null||ne===void 0?void 0:ne.channel)===null||le===void 0?void 0:le.input)===null||Te===void 0?void 0:Te.camera)===null||Ze===void 0?void 0:Ze.enablePhoto),!((Qe=(ge=(ce=t.openChannel)===null||ce===void 0?void 0:ce.channel)===null||ge===void 0?void 0:ge.input)===null||Qe===void 0)&&Qe.camera&&pn((bt=(ht=(tt=(xe=t.openChannel)===null||xe===void 0?void 0:xe.channel)===null||tt===void 0?void 0:tt.input)===null||ht===void 0?void 0:ht.camera)===null||bt===void 0?void 0:bt.enableVideo)&&(e.channel.input.camera.enableVideo=(kt=(lt=(Ut=(Rt=t.openChannel)===null||Rt===void 0?void 0:Rt.channel)===null||Ut===void 0?void 0:Ut.input)===null||lt===void 0?void 0:lt.camera)===null||kt===void 0?void 0:kt.enableVideo),!((zt=(mt=($t=n.openChannel)===null||$t===void 0?void 0:$t.channel)===null||mt===void 0?void 0:mt.input)===null||zt===void 0)&&zt.camera&&pn((je=(Xe=(Pt=(Tt=n.openChannel)===null||Tt===void 0?void 0:Tt.channel)===null||Pt===void 0?void 0:Pt.input)===null||Xe===void 0?void 0:Xe.camera)===null||je===void 0?void 0:je.enableVideo)&&(e.channel.input.camera.enableVideo=(qe=(ut=(Ct=(Ve=n.openChannel)===null||Ve===void 0?void 0:Ve.channel)===null||Ct===void 0?void 0:Ct.input)===null||ut===void 0?void 0:ut.camera)===null||qe===void 0?void 0:qe.enableVideo),!((Ue=(jt=(pt=t.openChannel)===null||pt===void 0?void 0:pt.channel)===null||jt===void 0?void 0:jt.input)===null||Ue===void 0)&&Ue.gallery&&pn((Xt=(vn=(un=(hn=t.openChannel)===null||hn===void 0?void 0:hn.channel)===null||un===void 0?void 0:un.input)===null||vn===void 0?void 0:vn.gallery)===null||Xt===void 0?void 0:Xt.enablePhoto)&&(e.channel.input.gallery.enablePhoto=(on=(xt=(At=(Wt=t.openChannel)===null||Wt===void 0?void 0:Wt.channel)===null||At===void 0?void 0:At.input)===null||xt===void 0?void 0:xt.gallery)===null||on===void 0?void 0:on.enablePhoto),!((ct=(st=(xn=n.openChannel)===null||xn===void 0?void 0:xn.channel)===null||st===void 0?void 0:st.input)===null||ct===void 0)&&ct.gallery&&pn((He=(he=(Pe=(at=n.openChannel)===null||at===void 0?void 0:at.channel)===null||Pe===void 0?void 0:Pe.input)===null||he===void 0?void 0:he.gallery)===null||He===void 0?void 0:He.enablePhoto)&&(e.channel.input.gallery.enablePhoto=(dt=(Zt=(nt=(ot=n.openChannel)===null||ot===void 0?void 0:ot.channel)===null||nt===void 0?void 0:nt.input)===null||Zt===void 0?void 0:Zt.gallery)===null||dt===void 0?void 0:dt.enablePhoto),!((rn=(Yt=(On=t.openChannel)===null||On===void 0?void 0:On.channel)===null||Yt===void 0?void 0:Yt.input)===null||rn===void 0)&&rn.gallery&&pn((qn=(Tn=(_n=(Pn=t.openChannel)===null||Pn===void 0?void 0:Pn.channel)===null||_n===void 0?void 0:_n.input)===null||Tn===void 0?void 0:Tn.gallery)===null||qn===void 0?void 0:qn.enableVideo)&&(e.channel.input.gallery.enableVideo=(Nt=(et=(rt=(Be=t.openChannel)===null||Be===void 0?void 0:Be.channel)===null||rt===void 0?void 0:rt.input)===null||et===void 0?void 0:et.gallery)===null||Nt===void 0?void 0:Nt.enableVideo),!((nn=(Ot=(Et=n.openChannel)===null||Et===void 0?void 0:Et.channel)===null||Ot===void 0?void 0:Ot.input)===null||nn===void 0)&&nn.gallery&&pn((Ke=(an=(Je=(Nn=n.openChannel)===null||Nn===void 0?void 0:Nn.channel)===null||Je===void 0?void 0:Je.input)===null||an===void 0?void 0:an.gallery)===null||Ke===void 0?void 0:Ke.enableVideo)&&(e.channel.input.gallery.enableVideo=(qt=(We=(Se=(J=n.openChannel)===null||J===void 0?void 0:J.channel)===null||Se===void 0?void 0:Se.input)===null||We===void 0?void 0:We.gallery)===null||qt===void 0?void 0:qt.enableVideo)}function IZ(e,n){const t=QN();return _Z(t.common,e,n),gZ(t.groupChannel,e,n),SZ(t.openChannel,e,n),t}function MZ(e){return typeof e=="object"&&"configuration"in e&&"updated_at"in e}var AZ=function(e,n,t,r){function i(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function o(c){try{u(r.next(c))}catch(h){s(h)}}function l(c){try{u(r.throw(c))}catch(h){s(h)}}function u(c){c.done?a(c.value):i(c.value).then(o,l)}u((r=r.apply(e,n||[])).next())})};function lv(e){var n,t;return(t=(n=e.appInfo)===null||n===void 0?void 0:n.applicationAttributes)!==null&&t!==void 0?t:[]}const q4=M.createContext({initDashboardConfigs:()=>Promise.resolve(),configs:BR,configsWithAppAttr:()=>BR}),K4=({storage:e,children:n,localConfigs:t={}})=>{const[r,i]=M.useState(j4),[a]=M.useState(()=>new mZ(e)),s=M.useCallback(u=>AZ(void 0,void 0,void 0,function*(){const c=yield a.init(u.appId);if(u.appInfo&&u.appInfo.uikitConfigInfo.lastUpdatedAt===c.updatedAt)i(c.configuration);else try{const h=yield u.getUIKitConfiguration();if(MZ(h.json)){const f=W1(h.json),p=yield a.update(f);i(p.configuration)}}catch{i(c.configuration)}}),[a]),o=IZ(t,r),l=zu(u=>({groupChannel:{channel:{get enableReactions(){return o.groupChannel.channel.enableReactions&&lv(u).includes(nv.reactions)},get enableReactionsSupergroup(){return o.groupChannel.channel.enableReactionsSupergroup&&lv(u).includes(nv.reactions)},get enableOgtag(){return o.groupChannel.channel.enableOgtag&&lv(u).includes(nv.enable_og_tag)}},setting:{get enableMessageSearch(){return o.groupChannel.setting.enableMessageSearch&&lv(u).includes(nv.message_search_v3)}}},openChannel:{channel:{get enableOgtag(){return o.openChannel.channel.enableOgtag&&lv(u).includes(nv.enable_og_tag)}}}}));return m.createElement(q4.Provider,{value:{initDashboardConfigs:s,configs:o,configsWithAppAttr:l}},n)},W4=()=>M.useContext(q4);function XN(e){return{lowerCase:e.toLowerCase(),upperCase:e.toUpperCase()}}function wZ(e){return{lowerCase:e.toLowerCase(),upperCase:e.toUpperCase()}}var Y4={getItem:function(e){return vr(this,void 0,void 0,function(){var n;return pr(this,function(t){return[2,(n=localStorage.getItem(e))!==null&&n!==void 0?n:null]})})},setItem:function(e,n){return vr(this,void 0,void 0,function(){return pr(this,function(t){return[2,localStorage.setItem(e,n)]})})}},RZ=1024*1024,zo=10,Yu=100,Q4=100,Wb=250,ZN=1e3,X4=6e5,OZ=12e3,V_e=11025,HR=["audio/webm","audio/mp4","audio/mpeg","audio/ogg"],Sg="sendbird-voice-player-provider-root",Q1="sendbird-global-audio-player-id",Pp="Voice_message.mp3",DZ="Voice_message.m4a",ju="audio/mp3;sbu_type=voice",UZ="audio/x-m4a;sbu_type=voice",Z4="KEY_VOICE_MESSAGE_DURATION",J4="KEY_INTERNAL_MESSAGE_TYPE",e6="voice/mp3",G_="32px",t6=10,X1=25*1024*1024,Yb="sendbird_message_templates_token_key",dh="sendbird_message_templates_key",im="message_template",LZ=function(e){return/iPhone|iPad|iPod/i.test(e)},kZ=function(e){return/WebKit/i.test(e)},xZ=function(e){return/Chrome/i.test(e)},JN=function(e){return!xZ(e)&&/Safari/i.test(e)},GR=function(e){return LZ(e)&&(kZ(e)||JN(e))},Il=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function PZ(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var n6={exports:{}},Qb={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $R;function FZ(){if($R)return Qb;$R=1;var e=m;function n(h,f){return h===f&&(h!==0||1/h===1/f)||h!==h&&f!==f}var t=typeof Object.is=="function"?Object.is:n,r=e.useState,i=e.useEffect,a=e.useLayoutEffect,s=e.useDebugValue;function o(h,f){var p=f(),_=r({inst:{value:p,getSnapshot:f}}),g=_[0].inst,C=_[1];return a(function(){g.value=p,g.getSnapshot=f,l(g)&&C({inst:g})},[h,p,f]),i(function(){return l(g)&&C({inst:g}),h(function(){l(g)&&C({inst:g})})},[h]),s(p),p}function l(h){var f=h.getSnapshot;h=h.value;try{var p=f();return!t(h,p)}catch{return!0}}function u(h,f){return f()}var c=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?u:o;return Qb.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:c,Qb}n6.exports=FZ();var am=n6.exports;function BZ(){this.__data__=[],this.size=0}var HZ=BZ;function GZ(e,n){return e===n||e!==e&&n!==n}var r6=GZ,$Z=r6;function VZ(e,n){for(var t=e.length;t--;)if($Z(e[t][0],n))return t;return-1}var EE=VZ,zZ=EE,jZ=Array.prototype,qZ=jZ.splice;function KZ(e){var n=this.__data__,t=zZ(n,e);if(t<0)return!1;var r=n.length-1;return t==r?n.pop():qZ.call(n,t,1),--this.size,!0}var WZ=KZ,YZ=EE;function QZ(e){var n=this.__data__,t=YZ(n,e);return t<0?void 0:n[t][1]}var XZ=QZ,ZZ=EE;function JZ(e){return ZZ(this.__data__,e)>-1}var eJ=JZ,tJ=EE;function nJ(e,n){var t=this.__data__,r=tJ(t,e);return r<0?(++this.size,t.push([e,n])):t[r][1]=n,this}var rJ=nJ,iJ=HZ,aJ=WZ,sJ=XZ,oJ=eJ,lJ=rJ;function ff(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}ff.prototype.clear=iJ;ff.prototype.delete=aJ;ff.prototype.get=sJ;ff.prototype.has=oJ;ff.prototype.set=lJ;var yE=ff,uJ=yE;function cJ(){this.__data__=new uJ,this.size=0}var dJ=cJ;function hJ(e){var n=this.__data__,t=n.delete(e);return this.size=n.size,t}var fJ=hJ;function vJ(e){return this.__data__.get(e)}var pJ=vJ;function mJ(e){return this.__data__.has(e)}var _J=mJ,gJ=typeof Il=="object"&&Il&&Il.Object===Object&&Il,i6=gJ,EJ=i6,yJ=typeof self=="object"&&self&&self.Object===Object&&self,bJ=EJ||yJ||Function("return this")(),Ql=bJ,CJ=Ql,SJ=CJ.Symbol,eI=SJ,VR=eI,a6=Object.prototype,TJ=a6.hasOwnProperty,NJ=a6.toString,uv=VR?VR.toStringTag:void 0;function IJ(e){var n=TJ.call(e,uv),t=e[uv];try{e[uv]=void 0;var r=!0}catch{}var i=NJ.call(e);return r&&(n?e[uv]=t:delete e[uv]),i}var MJ=IJ,AJ=Object.prototype,wJ=AJ.toString;function RJ(e){return wJ.call(e)}var OJ=RJ,zR=eI,DJ=MJ,UJ=OJ,LJ="[object Null]",kJ="[object Undefined]",jR=zR?zR.toStringTag:void 0;function xJ(e){return e==null?e===void 0?kJ:LJ:jR&&jR in Object(e)?DJ(e):UJ(e)}var bE=xJ;function PJ(e){var n=typeof e;return e!=null&&(n=="object"||n=="function")}var s6=PJ,FJ=bE,BJ=s6,HJ="[object AsyncFunction]",GJ="[object Function]",$J="[object GeneratorFunction]",VJ="[object Proxy]";function zJ(e){if(!BJ(e))return!1;var n=FJ(e);return n==GJ||n==$J||n==HJ||n==VJ}var o6=zJ,jJ=Ql,qJ=jJ["__core-js_shared__"],KJ=qJ,Xb=KJ,qR=function(){var e=/[^.]+$/.exec(Xb&&Xb.keys&&Xb.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function WJ(e){return!!qR&&qR in e}var YJ=WJ,QJ=Function.prototype,XJ=QJ.toString;function ZJ(e){if(e!=null){try{return XJ.call(e)}catch{}try{return e+""}catch{}}return""}var l6=ZJ,JJ=o6,eee=YJ,tee=s6,nee=l6,ree=/[\\^$.*+?()[\]{}|]/g,iee=/^\[object .+?Constructor\]$/,aee=Function.prototype,see=Object.prototype,oee=aee.toString,lee=see.hasOwnProperty,uee=RegExp("^"+oee.call(lee).replace(ree,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function cee(e){if(!tee(e)||eee(e))return!1;var n=JJ(e)?uee:iee;return n.test(nee(e))}var dee=cee;function hee(e,n){return e==null?void 0:e[n]}var fee=hee,vee=dee,pee=fee;function mee(e,n){var t=pee(e,n);return vee(t)?t:void 0}var vf=mee,_ee=vf,gee=Ql,Eee=_ee(gee,"Map"),tI=Eee,yee=vf,bee=yee(Object,"create"),CE=bee,KR=CE;function Cee(){this.__data__=KR?KR(null):{},this.size=0}var See=Cee;function Tee(e){var n=this.has(e)&&delete this.__data__[e];return this.size-=n?1:0,n}var Nee=Tee,Iee=CE,Mee="__lodash_hash_undefined__",Aee=Object.prototype,wee=Aee.hasOwnProperty;function Ree(e){var n=this.__data__;if(Iee){var t=n[e];return t===Mee?void 0:t}return wee.call(n,e)?n[e]:void 0}var Oee=Ree,Dee=CE,Uee=Object.prototype,Lee=Uee.hasOwnProperty;function kee(e){var n=this.__data__;return Dee?n[e]!==void 0:Lee.call(n,e)}var xee=kee,Pee=CE,Fee="__lodash_hash_undefined__";function Bee(e,n){var t=this.__data__;return this.size+=this.has(e)?0:1,t[e]=Pee&&n===void 0?Fee:n,this}var Hee=Bee,Gee=See,$ee=Nee,Vee=Oee,zee=xee,jee=Hee;function pf(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}pf.prototype.clear=Gee;pf.prototype.delete=$ee;pf.prototype.get=Vee;pf.prototype.has=zee;pf.prototype.set=jee;var qee=pf,WR=qee,Kee=yE,Wee=tI;function Yee(){this.size=0,this.__data__={hash:new WR,map:new(Wee||Kee),string:new WR}}var Qee=Yee;function Xee(e){var n=typeof e;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?e!=="__proto__":e===null}var Zee=Xee,Jee=Zee;function ete(e,n){var t=e.__data__;return Jee(n)?t[typeof n=="string"?"string":"hash"]:t.map}var SE=ete,tte=SE;function nte(e){var n=tte(this,e).delete(e);return this.size-=n?1:0,n}var rte=nte,ite=SE;function ate(e){return ite(this,e).get(e)}var ste=ate,ote=SE;function lte(e){return ote(this,e).has(e)}var ute=lte,cte=SE;function dte(e,n){var t=cte(this,e),r=t.size;return t.set(e,n),this.size+=t.size==r?0:1,this}var hte=dte,fte=Qee,vte=rte,pte=ste,mte=ute,_te=hte;function mf(e){var n=-1,t=e==null?0:e.length;for(this.clear();++n<t;){var r=e[n];this.set(r[0],r[1])}}mf.prototype.clear=fte;mf.prototype.delete=vte;mf.prototype.get=pte;mf.prototype.has=mte;mf.prototype.set=_te;var u6=mf,gte=yE,Ete=tI,yte=u6,bte=200;function Cte(e,n){var t=this.__data__;if(t instanceof gte){var r=t.__data__;if(!Ete||r.length<bte-1)return r.push([e,n]),this.size=++t.size,this;t=this.__data__=new yte(r)}return t.set(e,n),this.size=t.size,this}var Ste=Cte,Tte=yE,Nte=dJ,Ite=fJ,Mte=pJ,Ate=_J,wte=Ste;function _f(e){var n=this.__data__=new Tte(e);this.size=n.size}_f.prototype.clear=Nte;_f.prototype.delete=Ite;_f.prototype.get=Mte;_f.prototype.has=Ate;_f.prototype.set=wte;var Rte=_f,Ote="__lodash_hash_undefined__";function Dte(e){return this.__data__.set(e,Ote),this}var Ute=Dte;function Lte(e){return this.__data__.has(e)}var kte=Lte,xte=u6,Pte=Ute,Fte=kte;function T0(e){var n=-1,t=e==null?0:e.length;for(this.__data__=new xte;++n<t;)this.add(e[n])}T0.prototype.add=T0.prototype.push=Pte;T0.prototype.has=Fte;var Bte=T0;function Hte(e,n){for(var t=-1,r=e==null?0:e.length;++t<r;)if(n(e[t],t,e))return!0;return!1}var Gte=Hte;function $te(e,n){return e.has(n)}var Vte=$te,zte=Bte,jte=Gte,qte=Vte,Kte=1,Wte=2;function Yte(e,n,t,r,i,a){var s=t&Kte,o=e.length,l=n.length;if(o!=l&&!(s&&l>o))return!1;var u=a.get(e),c=a.get(n);if(u&&c)return u==n&&c==e;var h=-1,f=!0,p=t&Wte?new zte:void 0;for(a.set(e,n),a.set(n,e);++h<o;){var _=e[h],g=n[h];if(r)var C=s?r(g,_,h,n,e,a):r(_,g,h,e,n,a);if(C!==void 0){if(C)continue;f=!1;break}if(p){if(!jte(n,function(E,y){if(!qte(p,y)&&(_===E||i(_,E,t,r,a)))return p.push(y)})){f=!1;break}}else if(!(_===g||i(_,g,t,r,a))){f=!1;break}}return a.delete(e),a.delete(n),f}var c6=Yte,Qte=Ql,Xte=Qte.Uint8Array,Zte=Xte;function Jte(e){var n=-1,t=Array(e.size);return e.forEach(function(r,i){t[++n]=[i,r]}),t}var ene=Jte;function tne(e){var n=-1,t=Array(e.size);return e.forEach(function(r){t[++n]=r}),t}var nne=tne,YR=eI,QR=Zte,rne=r6,ine=c6,ane=ene,sne=nne,one=1,lne=2,une="[object Boolean]",cne="[object Date]",dne="[object Error]",hne="[object Map]",fne="[object Number]",vne="[object RegExp]",pne="[object Set]",mne="[object String]",_ne="[object Symbol]",gne="[object ArrayBuffer]",Ene="[object DataView]",XR=YR?YR.prototype:void 0,Zb=XR?XR.valueOf:void 0;function yne(e,n,t,r,i,a,s){switch(t){case Ene:if(e.byteLength!=n.byteLength||e.byteOffset!=n.byteOffset)return!1;e=e.buffer,n=n.buffer;case gne:return!(e.byteLength!=n.byteLength||!a(new QR(e),new QR(n)));case une:case cne:case fne:return rne(+e,+n);case dne:return e.name==n.name&&e.message==n.message;case vne:case mne:return e==n+"";case hne:var o=ane;case pne:var l=r&one;if(o||(o=sne),e.size!=n.size&&!l)return!1;var u=s.get(e);if(u)return u==n;r|=lne,s.set(e,n);var c=ine(o(e),o(n),r,i,a,s);return s.delete(e),c;case _ne:if(Zb)return Zb.call(e)==Zb.call(n)}return!1}var bne=yne;function Cne(e,n){for(var t=-1,r=n.length,i=e.length;++t<r;)e[i+t]=n[t];return e}var Sne=Cne,Tne=Array.isArray,nI=Tne,Nne=Sne,Ine=nI;function Mne(e,n,t){var r=n(e);return Ine(e)?r:Nne(r,t(e))}var Ane=Mne;function wne(e,n){for(var t=-1,r=e==null?0:e.length,i=0,a=[];++t<r;){var s=e[t];n(s,t,e)&&(a[i++]=s)}return a}var Rne=wne;function One(){return[]}var Dne=One,Une=Rne,Lne=Dne,kne=Object.prototype,xne=kne.propertyIsEnumerable,ZR=Object.getOwnPropertySymbols,Pne=ZR?function(e){return e==null?[]:(e=Object(e),Une(ZR(e),function(n){return xne.call(e,n)}))}:Lne,Fne=Pne;function Bne(e,n){for(var t=-1,r=Array(e);++t<e;)r[t]=n(t);return r}var Hne=Bne;function Gne(e){return e!=null&&typeof e=="object"}var TE=Gne,$ne=bE,Vne=TE,zne="[object Arguments]";function jne(e){return Vne(e)&&$ne(e)==zne}var qne=jne,JR=qne,Kne=TE,d6=Object.prototype,Wne=d6.hasOwnProperty,Yne=d6.propertyIsEnumerable,Qne=JR(function(){return arguments}())?JR:function(e){return Kne(e)&&Wne.call(e,"callee")&&!Yne.call(e,"callee")},Xne=Qne,N0={exports:{}};function Zne(){return!1}var Jne=Zne;N0.exports;(function(e,n){var t=Ql,r=Jne,i=n&&!n.nodeType&&n,a=i&&!0&&e&&!e.nodeType&&e,s=a&&a.exports===i,o=s?t.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||r;e.exports=u})(N0,N0.exports);var h6=N0.exports,ere=9007199254740991,tre=/^(?:0|[1-9]\d*)$/;function nre(e,n){var t=typeof e;return n=n??ere,!!n&&(t=="number"||t!="symbol"&&tre.test(e))&&e>-1&&e%1==0&&e<n}var rre=nre,ire=9007199254740991;function are(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=ire}var f6=are,sre=bE,ore=f6,lre=TE,ure="[object Arguments]",cre="[object Array]",dre="[object Boolean]",hre="[object Date]",fre="[object Error]",vre="[object Function]",pre="[object Map]",mre="[object Number]",_re="[object Object]",gre="[object RegExp]",Ere="[object Set]",yre="[object String]",bre="[object WeakMap]",Cre="[object ArrayBuffer]",Sre="[object DataView]",Tre="[object Float32Array]",Nre="[object Float64Array]",Ire="[object Int8Array]",Mre="[object Int16Array]",Are="[object Int32Array]",wre="[object Uint8Array]",Rre="[object Uint8ClampedArray]",Ore="[object Uint16Array]",Dre="[object Uint32Array]",Ir={};Ir[Tre]=Ir[Nre]=Ir[Ire]=Ir[Mre]=Ir[Are]=Ir[wre]=Ir[Rre]=Ir[Ore]=Ir[Dre]=!0;Ir[ure]=Ir[cre]=Ir[Cre]=Ir[dre]=Ir[Sre]=Ir[hre]=Ir[fre]=Ir[vre]=Ir[pre]=Ir[mre]=Ir[_re]=Ir[gre]=Ir[Ere]=Ir[yre]=Ir[bre]=!1;function Ure(e){return lre(e)&&ore(e.length)&&!!Ir[sre(e)]}var Lre=Ure;function kre(e){return function(n){return e(n)}}var xre=kre,I0={exports:{}};I0.exports;(function(e,n){var t=i6,r=n&&!n.nodeType&&n,i=r&&!0&&e&&!e.nodeType&&e,a=i&&i.exports===r,s=a&&t.process,o=function(){try{var l=i&&i.require&&i.require("util").types;return l||s&&s.binding&&s.binding("util")}catch{}}();e.exports=o})(I0,I0.exports);var Pre=I0.exports,Fre=Lre,Bre=xre,eO=Pre,tO=eO&&eO.isTypedArray,Hre=tO?Bre(tO):Fre,v6=Hre,Gre=Hne,$re=Xne,Vre=nI,zre=h6,jre=rre,qre=v6,Kre=Object.prototype,Wre=Kre.hasOwnProperty;function Yre(e,n){var t=Vre(e),r=!t&&$re(e),i=!t&&!r&&zre(e),a=!t&&!r&&!i&&qre(e),s=t||r||i||a,o=s?Gre(e.length,String):[],l=o.length;for(var u in e)(n||Wre.call(e,u))&&!(s&&(u=="length"||i&&(u=="offset"||u=="parent")||a&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||jre(u,l)))&&o.push(u);return o}var Qre=Yre,Xre=Object.prototype;function Zre(e){var n=e&&e.constructor,t=typeof n=="function"&&n.prototype||Xre;return e===t}var Jre=Zre;function eie(e,n){return function(t){return e(n(t))}}var tie=eie,nie=tie,rie=nie(Object.keys,Object),iie=rie,aie=Jre,sie=iie,oie=Object.prototype,lie=oie.hasOwnProperty;function uie(e){if(!aie(e))return sie(e);var n=[];for(var t in Object(e))lie.call(e,t)&&t!="constructor"&&n.push(t);return n}var cie=uie,die=o6,hie=f6;function fie(e){return e!=null&&hie(e.length)&&!die(e)}var vie=fie,pie=Qre,mie=cie,_ie=vie;function gie(e){return _ie(e)?pie(e):mie(e)}var Eie=gie,yie=Ane,bie=Fne,Cie=Eie;function Sie(e){return yie(e,Cie,bie)}var Tie=Sie,nO=Tie,Nie=1,Iie=Object.prototype,Mie=Iie.hasOwnProperty;function Aie(e,n,t,r,i,a){var s=t&Nie,o=nO(e),l=o.length,u=nO(n),c=u.length;if(l!=c&&!s)return!1;for(var h=l;h--;){var f=o[h];if(!(s?f in n:Mie.call(n,f)))return!1}var p=a.get(e),_=a.get(n);if(p&&_)return p==n&&_==e;var g=!0;a.set(e,n),a.set(n,e);for(var C=s;++h<l;){f=o[h];var E=e[f],y=n[f];if(r)var S=s?r(y,E,f,n,e,a):r(E,y,f,e,n,a);if(!(S===void 0?E===y||i(E,y,t,r,a):S)){g=!1;break}C||(C=f=="constructor")}if(g&&!C){var I=e.constructor,w=n.constructor;I!=w&&"constructor"in e&&"constructor"in n&&!(typeof I=="function"&&I instanceof I&&typeof w=="function"&&w instanceof w)&&(g=!1)}return a.delete(e),a.delete(n),g}var wie=Aie,Rie=vf,Oie=Ql,Die=Rie(Oie,"DataView"),Uie=Die,Lie=vf,kie=Ql,xie=Lie(kie,"Promise"),Pie=xie,Fie=vf,Bie=Ql,Hie=Fie(Bie,"Set"),Gie=Hie,$ie=vf,Vie=Ql,zie=$ie(Vie,"WeakMap"),jie=zie,Z1=Uie,J1=tI,eS=Pie,tS=Gie,nS=jie,p6=bE,gf=l6,rO="[object Map]",qie="[object Object]",iO="[object Promise]",aO="[object Set]",sO="[object WeakMap]",oO="[object DataView]",Kie=gf(Z1),Wie=gf(J1),Yie=gf(eS),Qie=gf(tS),Xie=gf(nS),Pc=p6;(Z1&&Pc(new Z1(new ArrayBuffer(1)))!=oO||J1&&Pc(new J1)!=rO||eS&&Pc(eS.resolve())!=iO||tS&&Pc(new tS)!=aO||nS&&Pc(new nS)!=sO)&&(Pc=function(e){var n=p6(e),t=n==qie?e.constructor:void 0,r=t?gf(t):"";if(r)switch(r){case Kie:return oO;case Wie:return rO;case Yie:return iO;case Qie:return aO;case Xie:return sO}return n});var Zie=Pc,Jb=Rte,Jie=c6,eae=bne,tae=wie,lO=Zie,uO=nI,cO=h6,nae=v6,rae=1,dO="[object Arguments]",hO="[object Array]",$_="[object Object]",iae=Object.prototype,fO=iae.hasOwnProperty;function aae(e,n,t,r,i,a){var s=uO(e),o=uO(n),l=s?hO:lO(e),u=o?hO:lO(n);l=l==dO?$_:l,u=u==dO?$_:u;var c=l==$_,h=u==$_,f=l==u;if(f&&cO(e)){if(!cO(n))return!1;s=!0,c=!1}if(f&&!c)return a||(a=new Jb),s||nae(e)?Jie(e,n,t,r,i,a):eae(e,n,l,t,r,i,a);if(!(t&rae)){var p=c&&fO.call(e,"__wrapped__"),_=h&&fO.call(n,"__wrapped__");if(p||_){var g=p?e.value():e,C=_?n.value():n;return a||(a=new Jb),i(g,C,t,r,a)}}return f?(a||(a=new Jb),tae(e,n,t,r,i,a)):!1}var sae=aae,oae=sae,vO=TE;function m6(e,n,t,r,i){return e===n?!0:e==null||n==null||!vO(e)&&!vO(n)?e!==e&&n!==n:oae(e,n,t,r,m6,i)}var lae=m6,uae=lae;function cae(e,n){return uae(e,n)}var dae=cae,_6=PZ(dae);function g6(e,n){return Object.entries(n).some(function(t){var r=t[0],i=t[1];return typeof e[r]=="function"&&typeof i=="function"?!1:!_6(e[r],i)})}function rI(e){var n=H({},e),t=[],r=new Set,i=function(){var s=t.shift();if(s){var o=s.partial,l=s.force,u=typeof o=="function"?o(n):o,c=g6(n,u);(l||c)&&(n=H(H({},n),u),r.forEach(function(h){return h()}))}},a=function(s,o){t.push({partial:s,force:o}),i()};return{getState:function(){return n},setState:a,subscribe:function(s){return r.add(s),function(){return r.delete(s)}}}}var hae={onUserProfileMessage:void 0,disableUserProfile:!1,isReactionEnabled:!0,isMentionEnabled:!1,isVoiceMessageEnabled:!0,replyType:"NONE",showSearchIcon:!0,isTypingIndicatorEnabledOnChannelList:!1,isMessageReceiptStatusEnabledOnChannelList:!1,setCurrenttheme:function(){}},fae=H(H({},hae),{appId:"",userId:"",accessToken:void 0,theme:"light",isOnline:!1,allowProfileEdit:!0,forceLeftToRightMessageLayout:!1,disableMarkAsDelivered:!1,isMultipleFilesMessageEnabled:!1,autoscrollMessageOverflowToTop:!1,htmlTextDirection:"ltr",uikitUploadSizeLimit:X1,uikitMultipleFilesMessageLimit:t6,imageCompression:void 0,voiceRecord:void 0,userMention:void 0,renderUserProfile:void 0,onStartDirectMessage:void 0,setCurrentTheme:void 0,userListQuery:void 0,pubSub:void 0,logger:void 0,markAsReadScheduler:void 0,markAsDeliveredScheduler:void 0,common:{enableUsingDefaultUserProfile:!1},groupChannel:{enableOgtag:!0,enableTypingIndicator:!0,enableReactions:!0,enableMention:!1,replyType:"none",threadReplySelectType:"thread",enableVoiceMessage:!0,typingIndicatorTypes:void 0,enableDocument:!1,enableFeedback:!1,enableSuggestedReplies:!1,showSuggestedRepliesFor:"all_messages",suggestedRepliesDirection:"vertical",enableMarkdownForUserMessage:!1,enableFormTypeMessage:!1,enableMarkAsUnread:!1,enableReactionsSupergroup:void 0},groupChannelList:{enableTypingIndicator:!1,enableMessageReceiptStatus:!1},groupChannelSettings:{enableMessageSearch:!1},openChannel:{enableOgtag:!0,enableDocument:!1}}),vae={sdkStore:{sdk:{},initialized:!1,loading:!1,error:void 0},userStore:{user:{},initialized:!1,loading:!1},appInfoStore:{messageTemplatesInfo:void 0,waitingTemplateKeysMap:{}}},_h={config:fae,stores:vae,emojiManager:void 0,eventHandlers:{reaction:{onPressUserProfile:function(){}},connection:{onConnected:function(){},onFailed:function(){}},modal:{onMounted:function(){}},message:{onSendMessageFailed:function(){},onUpdateMessageFailed:function(){},onFileUploadFailed:function(){}}},utils:{updateMessageTemplatesInfo:function(){return new Promise(function(){})},getCachedTemplate:function(){return null}}};function iI(e,n,t){var r=M.useContext(e);if(!r)throw new Error("useStore must be used within a StoreProvider");var i=M.useRef(n);i.current=n;var a=am.useSyncExternalStore(r.subscribe,function(){return i.current(r.getState())},function(){return i.current(t)}),s=M.useCallback(function(o){var l=r.getState();g6(l,o)&&r.setState(function(u){return H(H({},u),o)})},[r]);return M.useMemo(function(){return{state:a,updateState:s}},[a,s])}var aI=m.createContext(null),pae=function(e){return rI({config:H(H({},_h.config),e==null?void 0:e.config),stores:H(H({},_h.stores),e==null?void 0:e.stores),eventHandlers:H(H({},_h.eventHandlers),e==null?void 0:e.eventHandlers),emojiManager:_h.emojiManager,utils:H(H({},_h.utils),e==null?void 0:e.utils)})},mae=function(){return iI(aI,function(e){return e},_h)},_ae=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t._channels=new Map,t._enteredChannelUrls=[],t}return k(n,e),Object.defineProperty(n.prototype,"enteredChannels",{get:function(){var t=this;return this._enteredChannelUrls.map(function(r){return t._channels.get(r)}).filter(function(r){return!!r})},enumerable:!1,configurable:!0}),n.prototype.isEnteredChannel=function(t){return this._enteredChannelUrls.includes(t)},n.prototype.enter=function(t){this._enteredChannelUrls.indexOf(t)<0&&this._enteredChannelUrls.push(t)},n.prototype.exit=function(t){var r=this._enteredChannelUrls.indexOf(t);r>=0&&this._enteredChannelUrls.splice(r,1)},n.prototype.exitAll=function(){this._enteredChannelUrls=[]},n.prototype.get=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){return[2,this._channels.get(t)]})})},n.prototype.upsert=function(t){return N(this,void 0,void 0,function(){var r,i=this;return T(this,function(a){return r=[],t.forEach(function(s){if(i._channels.has(s.url)){var o=i._channels.get(s.url);Object.assign(o,s),r.push(o)}else i._channels.set(s.url,s),r.push(s)}),[2,r]})})},n.prototype.remove=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){return this._channels.delete(t),this.exit(t),[2]})})},n.prototype.clear=function(){return N(this,void 0,void 0,function(){return T(this,function(t){return this._channels.clear(),this._enteredChannelUrls=[],[2]})})},n}(Ur),E6={channelUrl:void 0,name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0,isEphemeral:void 0},gae=function(e){function n(t){var r=t.channelUrl,i=t.isInternalCall,a=e.call(this)||this;return a.method=fe.GET,a.path="".concat(i?vz:Ud,"/").concat(encodeURIComponent(r)),a.params={show_pinned_messages:!0},a}return k(n,e),n}(ve),pO=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new rf(t,r),i}return k(n,e),n}(_e),Eae=function(e){function n(t){var r=this,i=t.channelUrl,a=t.coverUrlOrImage,s=t.name,o=t.data,l=t.customType,u=t.operatorUserIds,c=t.isEphemeral;return(r=e.call(this)||this).method=fe.POST,r.path=Ud,r.params=Ae($e({channel_url:i,cover_url:Y("string",a)?a:null,cover_file:ai(a)?a:null,name:s,data:o,custom_type:l,operators:u,is_ephemeral:c})),r}return k(n,e),n}(ve);(function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new rf(t,r),i}k(n,e)})(_e);var yae=function(e){function n(t){var r=t.channelUrl;return e.call(this,{code:"ENTR",payload:{channel_url:r},ackRequired:!0})||this}return k(n,e),n}(Ri),y6=function(e){function n(t,r,i){var a,s,o=this;return o=e.call(this,t,"SYEV",i)||this,i.data&&(o.participantCount=(a=i.data.participant_count)!==null&&a!==void 0?a:0,o.user=new Gt(t,i.data),o.ts=(s=i.data.edge_ts)!==null&&s!==void 0?s:0),o}return k(n,e),n}(Yl),bae=function(e){function n(t){var r=t.channelUrl;return e.call(this,{code:"EXIT",payload:{channel_url:r},ackRequired:!0})||this}return k(n,e),n}(Ri),b6=function(e){function n(t,r,i){var a,s,o=this;return o=e.call(this,t,"EXIT",i)||this,i.data&&(o.participantCount=(a=i.data.participant_count)!==null&&a!==void 0?a:0,o.user=new Gt(t,i.data),o.ts=(s=i.data.edge_ts)!==null&&s!==void 0?s:0),o}return k(n,e),n}(Yl),eC={},io=function(e){function n(t,r){var i=e.call(this,t,z(z({},r),{channelType:Kt.OPEN}))||this;return i.subscribeChannelEvent=vt,i.unsubscribeChannelEvent=vt,i.refreshChannel=function(){return N(i,void 0,void 0,function(){return T(this,function(a){return[2,vt()]})})},i._openChannelCache=new _ae(t),i._openChannelHandlers=new Map,i._dispatcher.on(function(a){var s,o;if(a instanceof Qn)i._handleEvent(a).catch(function(h){if(Vi(h)&&i._sdkState.appState==="foreground")throw h});else if(a instanceof ja&&a.stateType===gn.CONNECTED){var l=i._openChannelCache.enteredChannels;try{for(var u=ye(l),c=u.next();!c.done;c=u.next())c.value.enter()}catch(h){s={error:h}}finally{try{c&&!c.done&&(o=u.return)&&o.call(u)}finally{if(s)throw s.error}}}}),eC[t]||(eC[t]=i),i}return k(n,e),n.of=function(t){return eC[t]},n.prototype.buildOpenChannelFromSerializedData=function(t){var r=Ll(t);return new rf(this._iid,rf.payloadify(r))},n.prototype.getChannelFromCache=function(t){var r;return N(this,void 0,void 0,function(){return T(this,function(i){switch(i.label){case 0:return[4,this._openChannelCache.get(t)];case 1:return[2,(r=i.sent())!==null&&r!==void 0?r:null]}})})},n.prototype.upsertChannelsToCache=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){switch(r.label){case 0:return[4,this._openChannelCache.upsert(t)];case 1:return[2,r.sent()]}})})},n.prototype.removeChannelsFromCache=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l;return T(this,function(u){switch(u.label){case 0:u.trys.push([0,5,6,7]),r=ye(t),i=r.next(),u.label=1;case 1:return i.done?[3,4]:(a=i.value,[4,this._openChannelCache.remove(a)]);case 2:u.sent(),u.label=3;case 3:return i=r.next(),[3,1];case 4:return[3,7];case 5:return s=u.sent(),o={error:s},[3,7];case 6:try{i&&!i.done&&(l=r.return)&&l.call(r)}finally{if(o)throw o.error}return[7];case 7:return[2]}})})},n.prototype.setEnteredToCache=function(t){this._openChannelCache.enter(t.url)},n.prototype.setExitedToCache=function(t){this._openChannelCache.exit(t.url)},Object.defineProperty(n.prototype,"handlers",{get:function(){return it([],Ge(this._openChannelHandlers.values()),!1)},enumerable:!1,configurable:!0}),n.prototype._handleEvent=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w,R,A,U,O,B,F,P,G,L,$,j,X,K,Z,te,ne,le,Te,Ze,ce,ge,Qe,xe,tt,ht,bt,Rt,Ut,lt,kt,$t,mt,zt,Tt,Pt,Xe,je,Ve,Ct,ut,qe,pt,jt,Ue,hn,un,vn,Xt,Wt,At,xt,on,xn,st,ct=this;return T(this,function(at){switch(at.label){case 0:switch(at.trys.push([0,62,,63]),t.code){case"MESG":case"FILE":case"ADMM":case"BRDM":return[3,1];case"MEDI":case"FEDI":case"AEDI":return[3,4];case"DELM":return[3,7];case"MRCT":return[3,10];case"MTHD":return[3,13];case"MCNT":return[3,16];case"PEDI":return[3,27];case"VOTE":return[3,30];case"SYEV":return[3,33]}return[3,61];case 1:return s=null,t.code==="MESG"?s=t.as(jN):t.code==="FILE"?s=t.as(HN):t.code!=="ADMM"&&t.code!="BRDM"||(s=t.as(w4)),s?(r=s.message,i=s.isMentioned,r.channelType!==Kt.OPEN?[3,3]:[4,this.getChannel(r.channelUrl,!0)]):[3,3];case 2:a=at.sent(),ze(function(){return N(ct,void 0,void 0,function(){var Pe,he,He,ot,nt;return T(this,function(Zt){try{for(Pe=ye(this._openChannelHandlers.values()),he=Pe.next();!he.done;he=Pe.next())He=he.value,this._openChannelCache.isEnteredChannel(a.url)&&(He.onMessageReceived&&He.onMessageReceived(a,r),i&&He.onMentionReceived&&He.onMentionReceived(a,r))}catch(dt){ot={error:dt}}finally{try{he&&!he.done&&(nt=Pe.return)&&nt.call(Pe)}finally{if(ot)throw ot.error}}return[2]})})}),at.label=3;case 3:return[3,61];case 4:return s=null,t.code==="MEDI"?s=t.as(v0):t.code==="FEDI"?s=t.as(p0):t.code==="AEDI"&&(s=t.as(R4)),s?(o=s.message,l=s.mentionCountChange,o.channelType!==Kt.OPEN?[3,6]:[4,this.getChannel(o.channelUrl,!0)]):[3,6];case 5:u=at.sent(),c=!1,u.lastPinnedMessage&&u.lastPinnedMessage.messageId===o.messageId&&u.lastPinnedMessage.updatedAt<o.updatedAt&&(u.lastPinnedMessage=o,c=!0,q.of(this._iid).requestDeduplicator.updatePendingResponse(u,Date.now())),ze(function(){return N(ct,void 0,void 0,function(){var Pe,he,He,ot,nt,Zt,dt;return T(this,function(On){try{for(Pe=ye(this._openChannelHandlers.values()),he=Pe.next();!he.done;he=Pe.next())He=he.value,this._openChannelCache.isEnteredChannel(u.url)&&(c&&((Zt=He.onPinnedMessageUpdated)===null||Zt===void 0||Zt.call(He,u),(dt=He.onChannelChanged)===null||dt===void 0||dt.call(He,u)),He.onMessageUpdated&&He.onMessageUpdated(u,o),l>0&&He.onMentionReceived&&He.onMentionReceived(u,o))}catch(Yt){ot={error:Yt}}finally{try{he&&!he.done&&(nt=Pe.return)&&nt.call(Pe)}finally{if(ot)throw ot.error}}return[2]})})}),at.label=6;case 6:return[3,61];case 7:return h=t.as(Jk),K=h.channelUrl,Z=h.channelType,f=h.messageId,Z!==Kt.OPEN?[3,9]:[4,this.getChannel(K,!0)];case 8:p=at.sent(),ze(function(){return N(ct,void 0,void 0,function(){var Pe,he,He,ot,nt;return T(this,function(Zt){try{for(Pe=ye(this._openChannelHandlers.values()),he=Pe.next();!he.done;he=Pe.next())He=he.value,this._openChannelCache.isEnteredChannel(p.url)&&He.onMessageDeleted&&He.onMessageDeleted(p,f)}catch(dt){ot={error:dt}}finally{try{he&&!he.done&&(nt=Pe.return)&&nt.call(Pe)}finally{if(ot)throw ot.error}}return[2]})})}),at.label=9;case 9:return[3,61];case 10:return _=t.as(O4),K=_.channelUrl,Z=_.channelType,g=_.event,Z!==Kt.OPEN?[3,12]:[4,this.getChannel(K,!0)];case 11:C=at.sent(),ze(function(){return N(ct,void 0,void 0,function(){var Pe,he,He,ot,nt;return T(this,function(Zt){try{for(Pe=ye(this._openChannelHandlers.values()),he=Pe.next();!he.done;he=Pe.next())He=he.value,this._openChannelCache.isEnteredChannel(C.url)&&He.onReactionUpdated&&He.onReactionUpdated(C,g)}catch(dt){ot={error:dt}}finally{try{he&&!he.done&&(nt=Pe.return)&&nt.call(Pe)}finally{if(ot)throw ot.error}}return[2]})})}),at.label=12;case 12:return[3,61];case 13:return(E=t.as(D4).event).channelType!==Kt.OPEN?[3,15]:[4,this.getChannel(E.channelUrl,!0)];case 14:y=at.sent(),ze(function(){return N(ct,void 0,void 0,function(){var Pe,he,He,ot,nt;return T(this,function(Zt){try{for(Pe=ye(this._openChannelHandlers.values()),he=Pe.next();!he.done;he=Pe.next())He=he.value,this._openChannelCache.isEnteredChannel(y.url)&&He.onThreadInfoUpdated&&He.onThreadInfoUpdated(y,E)}catch(dt){ot={error:dt}}finally{try{he&&!he.done&&(nt=Pe.return)&&nt.call(Pe)}finally{if(ot)throw ot.error}}return[2]})})}),at.label=15;case 15:return[3,61];case 16:S=t.as(U4).openChannelMemberCounts,I=[],at.label=17;case 17:at.trys.push([17,22,23,24]),w=ye(S),R=w.next(),at.label=18;case 18:return R.done?[3,21]:(A=R.value,K=A.channelUrl,xe=A.participantCount,U=A.updatedAt,[4,this.getChannelFromCache(K)]);case 19:(O=at.sent())&&O._updateParticipantCount(xe,U)&&I.push(O),at.label=20;case 20:return R=w.next(),[3,18];case 21:return[3,24];case 22:return B=at.sent(),xn={error:B},[3,24];case 23:try{R&&!R.done&&(st=w.return)&&st.call(w)}finally{if(xn)throw xn.error}return[7];case 24:return I.length>0?[4,this.upsertChannelsToCache(I)]:[3,26];case 25:F=at.sent(),ze(function(){return N(ct,void 0,void 0,function(){var Pe,he,He,ot,nt;return T(this,function(Zt){try{for(Pe=ye(this._openChannelHandlers.values()),he=Pe.next();!he.done;he=Pe.next())(He=he.value).onChannelMemberCountChanged&&He.onChannelMemberCountChanged(F)}catch(dt){ot={error:dt}}finally{try{he&&!he.done&&(nt=Pe.return)&&nt.call(Pe)}finally{if(ot)throw ot.error}}return[2]})})}),at.label=26;case 26:return[3,61];case 27:return P=t.as(L4),G=P.event,L=P.status,K=P.channelUrl,Z=P.channelType,K&&Z===Kt.OPEN?[4,this.getChannel(K,!0)]:[3,29];case 28:$=at.sent(),this._dispatcher.dispatch(new FN({event:G,source:oe.EVENT_POLL_UPDATED})),ze(L===Px?function(){return N(ct,void 0,void 0,function(){var Pe,he,He,ot,nt;return T(this,function(Zt){try{for(Pe=ye(this._openChannelHandlers.values()),he=Pe.next();!he.done;he=Pe.next())(He=he.value).onPollDeleted&&He.onPollDeleted($,G.pollId)}catch(dt){ot={error:dt}}finally{try{he&&!he.done&&(nt=Pe.return)&&nt.call(Pe)}finally{if(ot)throw ot.error}}return[2]})})}:function(){return N(ct,void 0,void 0,function(){var Pe,he,He,ot,nt;return T(this,function(Zt){try{for(Pe=ye(this._openChannelHandlers.values()),he=Pe.next();!he.done;he=Pe.next())(He=he.value).onPollUpdated&&He.onPollUpdated($,G)}catch(dt){ot={error:dt}}finally{try{he&&!he.done&&(nt=Pe.return)&&nt.call(Pe)}finally{if(ot)throw ot.error}}return[2]})})}),at.label=29;case 29:return[3,61];case 30:return j=t.as(qN),X=j.event,K=j.channelUrl,Z=j.channelType,K&&Z===Kt.OPEN?[4,this.getChannel(K,!0)]:[3,32];case 31:te=at.sent(),this._dispatcher.dispatch(new cE({event:X,source:oe.EVENT_POLL_VOTED})),ze(function(){return N(ct,void 0,void 0,function(){var Pe,he,He,ot,nt;return T(this,function(Zt){try{for(Pe=ye(this._openChannelHandlers.values()),he=Pe.next();!he.done;he=Pe.next())(He=he.value).onPollVoted&&He.onPollVoted(te,X)}catch(dt){ot={error:dt}}finally{try{he&&!he.done&&(nt=Pe.return)&&nt.call(Pe)}finally{if(ot)throw ot.error}}return[2]})})}),at.label=32;case 32:return[3,61];case 33:if(!(ne=t.as(Yl).event).isOpenChannelEvent)return[3,60];switch(ne.category){case wn.CHANNEL_ENTER:return[3,34];case wn.CHANNEL_EXIT:return[3,36];case wn.CHANNEL_OPERATOR_UPDATE:return[3,38];case wn.USER_CHANNEL_MUTE:case wn.USER_CHANNEL_UNMUTE:return[3,41];case wn.USER_CHANNEL_BAN:case wn.USER_CHANNEL_UNBAN:return[3,43];case wn.CHANNEL_FREEZE:case wn.CHANNEL_UNFREEZE:return[3,45];case wn.CHANNEL_DELETED:return[3,48];case wn.CHANNEL_PROP_CHANGED:return[3,50];case wn.CHANNEL_META_DATA_CHANGED:return[3,52];case wn.CHANNEL_META_COUNTERS_CHANGED:return[3,54];case wn.PINNED_MESSAGE_CHANGED:return[3,56]}return[3,60];case 34:return[4,this.getChannel(ne.channelUrl,!0)];case 35:return le=at.sent(),Te=t.as(y6),xe=Te.participantCount,Ze=Te.user,ce=le._updateParticipantCount(xe,ne.ts),q.of(this._iid).requestDeduplicator.updatePendingResponse(le,Date.now()),ze(function(){return N(ct,void 0,void 0,function(){return T(this,function(Pe){return this._openChannelHandlers.forEach(function(he){he.onUserEntered&&he.onUserEntered(le,Ze),ce&&he.onChannelParticipantCountChanged&&he.onChannelParticipantCountChanged(le)}),[2]})})}),[3,60];case 36:return[4,this.getChannel(ne.channelUrl,!0)];case 37:return ge=at.sent(),Qe=t.as(b6),xe=Qe.participantCount,tt=Qe.user,ht=ge._updateParticipantCount(xe,ne.ts),q.of(this._iid).requestDeduplicator.updatePendingResponse(ge,Date.now()),ze(function(){return N(ct,void 0,void 0,function(){return T(this,function(Pe){return this._openChannelHandlers.forEach(function(he){he.onUserExited&&he.onUserExited(ge,tt),ht&&he.onChannelParticipantCountChanged&&he.onChannelParticipantCountChanged(ge)}),[2]})})}),[3,60];case 38:return[4,this.getChannel(ne.channelUrl,!0)];case 39:return bt=at.sent(),Rt=t.as(I4).operators,bt.operators=Rt,q.of(this._iid).requestDeduplicator.updatePendingResponse(bt,Date.now()),[4,this.upsertChannelsToCache([bt])];case 40:return at.sent(),ze(function(){return N(ct,void 0,void 0,function(){return T(this,function(Pe){return this._openChannelHandlers.forEach(function(he){he.onOperatorUpdated&&he.onOperatorUpdated(bt,Rt)}),[2]})})}),[3,60];case 41:return[4,this.getChannel(ne.channelUrl,!0)];case 42:return Ut=at.sent(),lt=ne.category===wn.USER_CHANNEL_MUTE,kt=t.as(lt?i4:a4).user,ze(function(){return N(ct,void 0,void 0,function(){return T(this,function(Pe){return this._openChannelHandlers.forEach(function(he){lt?he.onUserMuted&&he.onUserMuted(Ut,kt):he.onUserUnmuted&&he.onUserUnmuted(Ut,kt)}),[2]})})}),[3,60];case 43:return[4,this.getChannel(ne.channelUrl,!0)];case 44:return $t=at.sent(),mt=ne.category===wn.USER_CHANNEL_BAN,zt=t.as(mt?s4:o4).user,ze(function(){return N(ct,void 0,void 0,function(){return T(this,function(Pe){return this._openChannelHandlers.forEach(function(he){mt?he.onUserBanned&&he.onUserBanned($t,zt):he.onUserUnbanned&&he.onUserUnbanned($t,zt)}),[2]})})}),[3,60];case 45:return[4,this.getChannel(ne.channelUrl,!0)];case 46:return Tt=at.sent(),Pt=t.as(l4).freeze,Tt.isFrozen=Pt,q.of(this._iid).requestDeduplicator.updatePendingResponse(Tt,Date.now()),[4,this.upsertChannelsToCache([Tt])];case 47:return at.sent(),ze(function(){return N(ct,void 0,void 0,function(){return T(this,function(Pe){return this._openChannelHandlers.forEach(function(he){Pt?he.onChannelFrozen&&he.onChannelFrozen(Tt):he.onChannelUnfrozen&&he.onChannelUnfrozen(Tt)}),[2]})})}),[3,60];case 48:return[4,this.removeChannelsFromCache([ne.channelUrl])];case 49:return at.sent(),ze(function(){return N(ct,void 0,void 0,function(){return T(this,function(Pe){return this._openChannelHandlers.forEach(function(he){he.onChannelDeleted&&he.onChannelDeleted(ne.channelUrl,Kt.OPEN)}),[2]})})}),[3,60];case 50:return[4,this.getChannelWithoutCache(ne.channelUrl,!0,!1)];case 51:return Xe=at.sent(),ze(function(){return N(ct,void 0,void 0,function(){return T(this,function(Pe){return this._openChannelHandlers.forEach(function(he){he.onChannelChanged&&he.onChannelChanged(Xe)}),[2]})})}),[3,60];case 52:return[4,this.getChannel(ne.channelUrl,!0)];case 53:return je=at.sent(),Ve=t.as(n4),Ct=Ve.created,ut=Ve.updated,qe=Ve.deleted,Ct&&je._upsertCachedMetaData(Ct,ne.ts),ut&&je._upsertCachedMetaData(ut,ne.ts),qe&&je._removeFromCachedMetaData(qe,ne.ts),(Ct||ut||qe)&&q.of(this._iid).requestDeduplicator.updatePendingResponse(je,Date.now()),ze(function(){return N(ct,void 0,void 0,function(){return T(this,function(Pe){return this._openChannelHandlers.forEach(function(he){Ct&&he.onMetaDataCreated&&he.onMetaDataCreated(je,Ct),ut&&he.onMetaDataUpdated&&he.onMetaDataUpdated(je,ut),qe&&he.onMetaDataDeleted&&he.onMetaDataDeleted(je,qe)}),[2]})})}),[3,60];case 54:return[4,this.getChannel(ne.channelUrl,!0)];case 55:return pt=at.sent(),jt=t.as(r4),Ue=jt.created,hn=jt.updated,un=jt.deleted,ze(function(){return N(ct,void 0,void 0,function(){return T(this,function(Pe){return this._openChannelHandlers.forEach(function(he){Ue&&he.onMetaCounterCreated&&he.onMetaCounterCreated(pt,Ue),hn&&he.onMetaCounterUpdated&&he.onMetaCounterUpdated(pt,hn),un&&he.onMetaCounterDeleted&&he.onMetaCounterDeleted(pt,un)}),[2]})})}),[3,60];case 56:return[4,this.getChannel(ne.channelUrl,!0)];case 57:return vn=at.sent(),Xt=t.as(M4),Wt=Xt.pinnedMessageIds,At=Xt.latestPinnedMessage,(xt=Xt.ts)>vn._pinnedMessagesUpdatedAt?(vn.pinnedMessageIds=Wt,vn.lastPinnedMessage=At,vn._pinnedMessagesUpdatedAt=xt,q.of(this._iid).requestDeduplicator.updatePendingResponse(vn,Date.now()),[4,this.upsertChannelsToCache([vn])]):[3,59];case 58:at.sent(),ze(function(){return N(ct,void 0,void 0,function(){var Pe,he,He,ot,nt;return T(this,function(Zt){try{for(Pe=ye(this._openChannelHandlers.values()),he=Pe.next();!he.done;he=Pe.next())(He=he.value).onChannelChanged&&He.onChannelChanged(vn)}catch(dt){ot={error:dt}}finally{try{he&&!he.done&&(nt=Pe.return)&&nt.call(Pe)}finally{if(ot)throw ot.error}}return[2]})})}),ze(function(){return N(ct,void 0,void 0,function(){return T(this,function(Pe){return this._openChannelHandlers.forEach(function(he){he.onPinnedMessageUpdated&&he.onPinnedMessageUpdated(vn)}),[2]})})}),at.label=59;case 59:return[3,60];case 60:return[3,61];case 61:return[3,63];case 62:if(on=at.sent(),Vi(on))throw on;return[3,63];case 63:return[2]}})})},n.prototype.addHandler=function(t,r){this._openChannelHandlers.set(t,r)},n.prototype.removeHandler=function(t){this._openChannelHandlers.delete(t)},n.prototype.clearHandler=function(){this._openChannelHandlers.clear()},n.prototype.getChannel=function(t,r){return r===void 0&&(r=!1),N(this,void 0,void 0,function(){var i;return T(this,function(a){switch(a.label){case 0:me(Y("string",t)).throw(Q.invalidParameters),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,this.getChannelFromCache(t)];case 2:return(i=a.sent())?[2,i]:[3,4];case 3:return a.sent(),[3,4];case 4:return[4,this.getChannelWithoutCache(t,r)];case 5:return[2,a.sent()]}})})},n.prototype.getChannelWithoutCache=function(t,r,i){return r===void 0&&(r=!1),i===void 0&&(i=!0),N(this,void 0,void 0,function(){var a,s,o,l,u=this;return T(this,function(c){switch(c.label){case 0:return me(Y("string",t)).throw(Q.invalidParameters),a=q.of(this._iid).requestDeduplicator,s=new gae({channelUrl:t,isInternalCall:r}),[4,a.requestGetChannel(s.path,function(){return u._requestQueue.send(s)},s.params,i)];case 1:return o=c.sent(),l=o.as(pO).channel,[4,this.upsertChannelsToCache([l])];case 2:return[2,c.sent()[0]]}})})},n.prototype.createChannel=function(t){return N(this,void 0,void 0,function(){var r,i,a,s;return T(this,function(o){switch(o.label){case 0:return r=z(z({},E6),t),me(function(l){return Ht("string",l.operatorUserIds,!0)&&(Y("string",l.coverUrlOrImage,!0)||ai(l.coverUrlOrImage,!0))&&Y("string",l.name,!0)&&Y("string",l.data,!0)&&Y("string",l.customType,!0)&&(Y("string",l.channelUrl)&&/^\w+$/.test(l.channelUrl)||l.channelUrl===null||l.channelUrl===void 0)&&Y("boolean",l.isEphemeral,!0)}(r)).throw(Q.invalidParameters),i=new Eae(r),[4,this._requestQueue.send(i)];case 1:return a=o.sent(),s=a.as(pO).channel,[4,this.upsertChannelsToCache([s])];case 2:return o.sent(),[2,s]}})})},n}(A4),mO={name:void 0,coverUrlOrImage:void 0,data:void 0,customType:void 0,operatorUserIds:void 0},Cae=function(e){function n(t){var r=this,i=t.channelUrl,a=t.token,s=t.limit;return(r=e.call(this)||this).method=fe.GET,r.path="".concat(Ud,"/").concat(encodeURIComponent(i),"/participants"),r.params={token:a,limit:s},r}return k(n,e),n}(ve),Sae=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.participants=[];var a=r.next,s=r.participants;return i.token=a,i.participants=s.map(function(o){return new zq(t,o)}),i}return k(n,e),n}(_e),Tae=function(e){function n(t,r,i){return e.call(this,t,r,Kt.OPEN,i)||this}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)},n.prototype.next=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,3]:this._hasNext?(this._isLoading=!0,t=q.of(this._iid).requestQueue,r=new Cae(z(z({},this),{token:this._token})),[4,t.send(r)]):[3,2]:[3,5];case 1:return i=l.sent(),a=i.as(Sae),s=a.participants,o=a.token,this._token=o,this._hasNext=!!o,this._isLoading=!1,[2,s];case 2:return[2,[]];case 3:throw Q.queryInProgress;case 4:return[3,6];case 5:throw Q.invalidParameters;case 6:return[2]}})})},n}(el),Nae=function(e){function n(t){var r=this,i=t.channelUrl,a=t.coverUrlOrImage,s=t.name,o=t.data,l=t.customType,u=t.operatorUserIds;return(r=e.call(this)||this).method=fe.PUT,r.path="".concat(Ud,"/").concat(encodeURIComponent(i)),r.params=Ae($e({cover_url:Y("string",a)?a:null,cover_file:ai(a)?a:null,name:s,data:o,custom_type:l,operators:u})),r}return k(n,e),n}(ve),Iae=function(e){function n(t,r){var i=e.call(this,t,r)||this;return i.channel=new rf(t,r),i}return k(n,e),n}(_e),Mae=function(e){function n(t){var r=this,i=t.channelUrl;return(r=e.call(this)||this).method=fe.DELETE,r.path="".concat(Ud,"/").concat(encodeURIComponent(i)),r}return k(n,e),n}(ve);(function(e){function n(t,r){return e.call(this,t,r)||this}k(n,e)})(_e);var rf=function(e){function n(t,r){var i,a=this;return(a=e.call(this,t,r)||this)._lastParticipantCountUpdated=0,a.participantCount=0,a.operators=[],a.lastPinnedMessage=null,a._pinnedMessagesUpdatedAt=0,a.channelType=Kt.OPEN,a.participantCount=(i=r.participant_count)!==null&&i!==void 0?i:0,a.operators=Array.isArray(r.operators)?r.operators.map(function(s){return new Gt(t,s)}):[],a.lastPinnedMessage=r.latest_pinned_message?Di(a._iid,z({channel_type:a.channelType},r.latest_pinned_message)):null,a}return k(n,e),n.payloadify=function(t,r){r===void 0&&(r=!1);var i=z(z({},m0.payloadify(t,r)),{participant_count:t.participantCount,operators:t.operators.map(function(a){return Gt.payloadify(a)}),latest_pinned_message:t.lastPinnedMessage?L1(t.lastPinnedMessage):null});return r?i:Ae($e(i))},n.prototype.serialize=function(){return hf(this)},n.prototype.isOperator=function(t){return t instanceof Gt?this.isOperator(t.userId):this.operators.some(function(r){return r.userId===t})},n.prototype._updateParticipantCount=function(t,r){return r>this._lastParticipantCountUpdated&&(this.participantCount=t,this._lastParticipantCountUpdated=r,!0)},n.prototype.createParticipantListQuery=function(t){return new Tae(this._iid,this.url,t)},n.prototype.refresh=function(){return N(this,void 0,void 0,function(){return T(this,function(t){switch(t.label){case 0:return[4,io.of(this._iid).getChannelWithoutCache(this.url)];case 1:return[2,t.sent()]}})})},n.prototype.enter=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return t=q.of(this._iid).requestQueue,r=new yae({channelUrl:this.url}),[4,t.send(r)];case 1:return i=l.sent(),a=i.as(y6),s=a.participantCount,o=a.ts,this._updateParticipantCount(s,o),io.of(this._iid).setEnteredToCache(this),[2]}})})},n.prototype.exit=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return t=q.of(this._iid).requestQueue,r=new bae({channelUrl:this.url}),[4,t.send(r)];case 1:return i=l.sent(),a=i.as(b6),s=a.participantCount,o=a.ts,this._updateParticipantCount(s,o),io.of(this._iid).setExitedToCache(this),Wr.of(this._iid).fileMessageQueue.cancel(this),[2]}})})},n.prototype.updateChannel=function(t){return N(this,void 0,void 0,function(){var r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return r=z(z({},mO),t),me(function(u){return Ht("string",u.operatorUserIds,!0)&&(Y("string",u.coverUrlOrImage,!0)||ai(u.coverUrlOrImage,!0))&&Y("string",u.name,!0)&&Y("string",u.data,!0)&&Y("string",u.customType,!0)}(r)).throw(Q.invalidParameters),i=q.of(this._iid).requestQueue,a=new Nae(z({channelUrl:this.url},r)),[4,i.send(a)];case 1:return s=l.sent(),o=s.as(Iae).channel,this._update(o),[4,io.of(this._iid).upsertChannelsToCache([o])];case 2:return l.sent(),[2,this]}})})},n.prototype.updateChannelWithOperatorUserIds=function(t,r,i,a,s){return N(this,void 0,void 0,function(){var o;return T(this,function(l){return o=z(z({},mO),{name:t,coverUrlOrImage:r,data:i,operatorUserIds:a,customType:s}),[2,this.updateChannel(o)]})})},n.prototype.delete=function(){return N(this,void 0,void 0,function(){var t,r;return T(this,function(i){switch(i.label){case 0:return t=q.of(this._iid).requestQueue,r=new Mae({channelUrl:this.url}),[4,t.send(r)];case 1:return i.sent(),[4,io.of(this._iid).removeChannelsFromCache([this.url])];case 2:return i.sent(),[2]}})})},n.prototype.updateUserMessage=function(t,r){return N(this,void 0,void 0,function(){var i,a,s,o=this;return T(this,function(l){switch(l.label){case 0:return[4,e.prototype.updateUserMessage.call(this,t,r)];case 1:return i=l.sent(),a=!1,s=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===i.messageId&&(this.lastPinnedMessage=i,a=!0,s=!0),a&&io.of(this._iid).handlers.map(function(u){u.onChannelChanged&&u.onChannelChanged(o)}),s&&io.of(this._iid).handlers.map(function(u){u.onPinnedMessageUpdated&&u.onPinnedMessageUpdated(o)}),[2,i]}})})},n.prototype.updateFileMessage=function(t,r){return N(this,void 0,void 0,function(){var i,a,s,o=this;return T(this,function(l){switch(l.label){case 0:return[4,e.prototype.updateFileMessage.call(this,t,r)];case 1:return i=l.sent(),a=!1,s=!1,this.lastPinnedMessage&&this.lastPinnedMessage.messageId===i.messageId&&(this.lastPinnedMessage=i,a=!0,s=!0),a&&io.of(this._iid).handlers.map(function(u){u.onChannelChanged&&u.onChannelChanged(o)}),s&&io.of(this._iid).handlers.map(function(u){u.onPinnedMessageUpdated&&u.onPinnedMessageUpdated(o)}),[2,i]}})})},n}(m0);(function(e){function n(t){t===void 0&&(t={});var r=e.call(this)||this;return Object.keys(t).forEach(function(i){r.hasOwnProperty(i)&&(r[i]=t[i])}),r}return k(n,e),n})(function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.onUserEntered=vt,t.onUserExited=vt,t.onChannelParticipantCountChanged=vt,t.onPollUpdated=vt,t.onPollVoted=vt,t.onPollDeleted=vt,t.onPinnedMessageUpdated=vt,t}return k(n,e),n}(k4));var Aae=function(e){function n(t){var r=this,i=t.token,a=t.limit,s=t.nameKeyword,o=t.urlKeyword,l=t.customTypes,u=t.includeFrozen,c=t.includeMetaData;return(r=e.call(this)||this).method=fe.GET,r.path=Ud,r.params=Ae({token:i,limit:a,name_contains:s,url_contains:o,custom_types:l,show_frozen:u,show_metadata:c,show_pinned_messages:!0}),r}return k(n,e),n}(ve),wae=function(e){function n(t,r){var i=e.call(this,t,r)||this;i.channels=[];var a=r.next,s=r.channels,o=r.ts;return i.token=a,s&&s.length>0&&(i.channels=s.map(function(l){return new rf(t,l)})),i.ts=typeof o=="number"?o:null,i}return k(n,e),n}(_e),Rae=function(e){function n(t,r){var i,a,s,o,l,u=this;return(u=e.call(this,t,r)||this).includeFrozen=!0,u.includeMetaData=!0,u.nameKeyword=null,u.urlKeyword=null,u.customTypes=null,u.includeFrozen=(i=r.includeFrozen)===null||i===void 0||i,u.includeMetaData=(a=r.includeMetaData)===null||a===void 0||a,u.nameKeyword=(s=r.nameKeyword)!==null&&s!==void 0?s:null,u.urlKeyword=(o=r.urlKeyword)!==null&&o!==void 0?o:null,u.customTypes=(l=r.customTypes)!==null&&l!==void 0?l:null,u}return k(n,e),n.prototype._validate=function(){return e.prototype._validate.call(this)&&Y("boolean",this.includeFrozen)&&Y("boolean",this.includeMetaData)&&Y("string",this.nameKeyword,!0)&&Y("string",this.urlKeyword,!0)&&Ht("string",this.customTypes,!0)},n.prototype.next=function(){return N(this,void 0,void 0,function(){var t,r,i,a,s,o;return T(this,function(l){switch(l.label){case 0:return this._validate()?this._isLoading?[3,4]:this._hasNext?(this._isLoading=!0,t=q.of(this._iid).requestQueue,r=new Aae($e(z(z({},this),{token:this._token}))),[4,t.send(r)]):[3,3]:[3,6];case 1:return i=l.sent(),a=i.as(wae),s=a.channels,o=a.token,this._token=o,this._hasNext=!!o,[4,io.of(this._iid).upsertChannelsToCache(s)];case 2:return l.sent(),this._isLoading=!1,[2,s];case 3:return[2,[]];case 4:throw Q.queryInProgress;case 5:return[3,7];case 6:throw Q.invalidParameters;case 7:return[2]}})})},n}(Kl),Oae=function(e){function n(){var t=e!==null&&e.apply(this,arguments)||this;return t.name="openChannel",t}return k(n,e),n.prototype.init=function(t,r){var i=r.sdkState,a=r.dispatcher,s=r.sessionManager,o=r.requestQueue,l=r.logger,u=r.onlineDetector,c=r.cacheContext;e.prototype.init.call(this,t,{sdkState:i,dispatcher:a,sessionManager:s,requestQueue:o,logger:l,onlineDetector:u,cacheContext:c}),this._manager=new io(t,{sdkState:i,dispatcher:a,requestQueue:o,logger:l,cacheContext:c,sessionManager:s})},n.prototype.createOpenChannelListQuery=function(t){return t===void 0&&(t={}),new Rae(this._iid,t)},n.prototype.addOpenChannelHandler=function(t,r){this._manager.addHandler(t,r)},n.prototype.removeOpenChannelHandler=function(t){this._manager.removeHandler(t)},n.prototype.removeAllOpenChannelHandlers=function(){this._manager.clearHandler()},n.prototype.buildOpenChannelFromSerializedData=function(t){return this._manager.buildOpenChannelFromSerializedData(t)},n.prototype.getChannel=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){return[2,this._manager.getChannel(t)]})})},n.prototype.getChannelWithoutCache=function(t){return N(this,void 0,void 0,function(){return T(this,function(r){return[2,this._manager.getChannelWithoutCache(t)]})})},n.prototype.createChannel=function(t){return t===void 0&&(t={}),N(this,void 0,void 0,function(){return T(this,function(r){return[2,this._manager.createChannel(t)]})})},n.prototype.createChannelWithOperatorUserIds=function(t,r,i,a,s){return N(this,void 0,void 0,function(){var o;return T(this,function(l){return(o=z({},E6)).name=t,o.coverUrlOrImage=r,o.data=i,o.operatorUserIds=a,o.customType=s,[2,this._manager.createChannel(o)]})})},n}(uE),V_=function(e,n){return H(H({},e),{stores:H(H({},e.stores),{appInfoStore:H(H({},e.stores.appInfoStore),n)})})},z_=function(e,n){return H(H({},e),{stores:H(H({},e.stores),{sdkStore:H(H({},e.stores.sdkStore),n)})})},tC=function(e,n){return H(H({},e),{stores:H(H({},e.stores),{userStore:H(H({},e.stores.userStore),n)})})};function Dae(e){var n=e.appId,t=e.customApiHost,r=e.customWebSocketHost,i=e.sdkInitParams,a=i===void 0?{}:i,s=Object.assign(a,{appId:n,modules:[new _E,new Oae],localCacheEnabled:typeof a.localCacheEnabled<"u"?a.localCacheEnabled:!0});return t&&(s.customApiHost=t),r&&(s.customWebSocketHost=r),gE.init(s)}var nC="3.17.7";function Uae(e,n){var t,r,i=n.logger,a=n.sessionHandler,s=n.isMobile,o=n.customExtensionParams;(t=i.info)===null||t===void 0||t.call(i,"SendbirdProvider | useConnect/setupConnection/setVersion",{version:nC}),e.addExtension("sb_uikit",nC),e.addSendbirdExtensions([{product:N1.UIKIT_CHAT,version:nC,platform:ld==null?void 0:ld.JS}],{platform:s?Au.MOBILE_WEB:Au.WEB},o),a&&((r=i.info)===null||r===void 0||r.call(i,"SendbirdProvider | useConnect/setupConnection/configureSession",a),e.setSessionHandler(a))}var Lae="No sendbird state value available. Make sure you are rendering `<SendbirdProvider>` at the top of your app.",en=function(){var e,n=M.useContext(aI);if(!n)throw new Error(Lae);var t=am.useSyncExternalStore(n.subscribe,n.getState),r={initMessageTemplateInfo:M.useCallback(function(u){var c=u.payload;n.setState(function(h){return V_(h,{messageTemplatesInfo:c,waitingTemplateKeysMap:{}})})},[n]),upsertMessageTemplates:M.useCallback(function(u){var c=u.payload,h=t.stores.appInfoStore,f=h.messageTemplatesInfo;if(!f)return t;var p=H({},h.waitingTemplateKeysMap);c.forEach(function(_){var g=_.key,C=_.template;f.templatesMap[g]=C,delete p[g]}),n.setState(function(_){return V_(_,{waitingTemplateKeysMap:p,messageTemplatesInfo:f})})},[n,t.stores.appInfoStore]),upsertWaitingTemplateKeys:M.useCallback(function(u){var c=u.payload,h=t.stores.appInfoStore,f=c.keys,p=c.requestedAt,_=H({},h.waitingTemplateKeysMap);f.forEach(function(g){var C,E;_[g]={erroredMessageIds:(E=(C=_[g])===null||C===void 0?void 0:C.erroredMessageIds)!==null&&E!==void 0?E:[],requestedAt:p}}),n.setState(function(g){return V_(g,{waitingTemplateKeysMap:_})})},[n,t.stores.appInfoStore]),markErrorWaitingTemplateKeys:M.useCallback(function(u){var c=u.payload,h=t.stores.appInfoStore,f=c.keys,p=c.messageId,_=H({},h.waitingTemplateKeysMap);f.forEach(function(g){var C=_[g];C&&C.erroredMessageIds.indexOf(p)===-1&&C.erroredMessageIds.push(p)}),n.setState(function(g){return V_(g,{waitingTemplateKeysMap:_})})},[n,t.stores.appInfoStore])},i={setSdkLoading:M.useCallback(function(u){n.setState(function(c){return z_(c,{initialized:!1,loading:u})})},[n]),sdkError:M.useCallback(function(){n.setState(function(u){return z_(u,{initialized:!1,loading:!1,error:!0})})},[n]),initSdk:M.useCallback(function(u){n.setState(function(c){return z_(c,{sdk:u,initialized:!0,loading:!1,error:!1})})},[n]),resetSdk:M.useCallback(function(){n.setState(function(u){return z_(u,{sdk:{},initialized:!1,loading:!1,error:!1})})},[n])},a={initUser:M.useCallback(function(u){n.setState(function(c){return tC(c,{initialized:!0,loading:!1,user:u})})},[n]),resetUser:M.useCallback(function(){n.setState(function(u){return tC(u,{initialized:!1,loading:!1,user:{}})})},[n]),updateUserInfo:M.useCallback(function(u){n.setState(function(c){return tC(c,{user:u})})},[n])},s=M.useCallback(function(u){return vr(void 0,[u],void 0,function(c){var h,f,p=c.logger;return pr(this,function(_){switch(_.label){case 0:return i.setSdkLoading(!0),h=t.stores.sdkStore.sdk,h!=null&&h.disconnectWebSocket?[4,h.disconnectWebSocket()]:[3,2];case 1:_.sent(),_.label=2;case 2:return i.resetSdk(),a.resetUser(),(f=p.info)===null||f===void 0||f.call(p,"SendbirdProvider | useSendbird/disconnect completed"),[2]}})})},[n,(e=t.stores.sdkStore)===null||e===void 0?void 0:e.sdk,i,a]),o=M.useCallback(function(u){return vr(void 0,void 0,void 0,function(){var c,h,f,p,_,g,C,E,y,S,I,w,R,A,U,O,B,F,P,G,L,$,j,X;return pr(this,function(K){switch(K.label){case 0:return c=u.logger,h=u.userId,f=u.appId,p=u.accessToken,_=u.nickname,g=u.profileUrl,C=u.isMobile,E=u.sdkInitParams,y=u.customApiHost,S=u.customWebSocketHost,I=u.customExtensionParams,w=u.eventHandlers,R=u.initializeMessageTemplatesInfo,A=u.configureSession,U=u.initDashboardConfigs,[4,s({logger:c})];case 1:K.sent(),O=Dae({appId:f,customApiHost:y,customWebSocketHost:S,sdkInitParams:E}),Uae(O,{logger:c,isMobile:C,customExtensionParams:I,sessionHandler:A?A(O):void 0}),i.setSdkLoading(!0),K.label=2;case 2:return K.trys.push([2,8,,9]),[4,O.connect(h,p)];case 3:return B=K.sent(),a.initUser(B),_||g?[4,O.updateCurrentUserInfo({nickname:_||B.nickname||"",profileUrl:g||B.profileUrl})]:[3,5];case 4:K.sent(),K.label=5;case 5:return[4,R==null?void 0:R(O)];case 6:return K.sent(),[4,U==null?void 0:U(O)];case 7:return K.sent(),i.initSdk(O),(L=(G=w==null?void 0:w.connection)===null||G===void 0?void 0:G.onConnected)===null||L===void 0||L.call(G,B),[3,9];case 8:return F=K.sent(),P=F,i.resetSdk(),a.resetUser(),($=c.error)===null||$===void 0||$.call(c,"SendbirdProvider | useSendbird/connect failed",P),(X=(j=w==null?void 0:w.connection)===null||j===void 0?void 0:j.onFailed)===null||X===void 0||X.call(j,P),[3,9];case 9:return[2]}})})},[n,i,a,s]),l=M.useMemo(function(){return H(H(H(H({},r),i),a),{disconnect:s,connect:o})},[r,i,a,s,o]);return{state:t,actions:l}},C6="INITIALIZE_AUDIO_UNIT",rS="RESET_AUDIO_UNIT",S6="SET_CURRENT_PLAYER",T6="ON_VOICE_PLAYER_PLAY",N6="ON_VOICE_PLAYER_PAUSE",I6="ON_CURRENT_TIME_UPDATE",vo={IDLE:"IDLE",PREPARING:"PREPARING",PLAYING:"PLAYING",PAUSED:"PAUSED"},zc=function(){return{audioFile:null,playbackTime:0,duration:1e3,playingStatus:vo.IDLE}},kae={currentPlayer:null,currentGroupKey:"",audioStorage:{}};function xae(e,n){var t,r,i,a,s,o,l,u,c;switch(n.type){case C6:{var h=n.payload.groupKey,f=!((o=e.audioStorage)===null||o===void 0)&&o[h]?e.audioStorage[h]:zc();return f.playingStatus=vo.PREPARING,H(H({},e),{audioStorage:H(H({},e.audioStorage),(t={},t[h]=f,t))})}case rS:{var h=n.payload.groupKey;return H(H({},e),{audioStorage:H(H({},e.audioStorage),(r={},r[h]=zc(),r))})}case S6:{var p=n.payload,_=p.audioPlayer,h=p.groupKey;return H(H({},e),{currentPlayer:_,currentGroupKey:h})}case T6:{var g=n.payload,h=g.groupKey,C=g.audioFile,f=!((l=e.audioStorage)===null||l===void 0)&&l[h]?e.audioStorage[h]:zc();return f.audioFile=C,f.playingStatus=vo.PLAYING,H(H({},e),{audioStorage:H(H({},e.audioStorage),(i={},i[h]=f,i))})}case N6:{var E=n.payload,h=E.groupKey,y=E.duration,S=E.currentTime,f=!((u=e.audioStorage)===null||u===void 0)&&u[h]?e.audioStorage[h]:zc();return f.playingStatus=vo.PAUSED,y===S&&(f.playbackTime=0),H(H({},e),{audioStorage:H(H({},e.audioStorage),(a={},a[h]=f,a))})}case I6:{var h=n.payload.groupKey,I=e.currentPlayer,S=I.currentTime,y=I.duration,f=!((c=e.audioStorage)===null||c===void 0)&&c[h]?e.audioStorage[h]:zc();return f.playbackTime===f.duration&&f.playingStatus===vo.PAUSED?f.playbackTime=0:S>0&&y>0&&(f.playbackTime=S,f.duration=y),H(H({},e),{audioStorage:H(H({},e.audioStorage),(s={},s[h]=f,s))})}default:return e}}var Pae=function(e,n){return e===void 0&&(e=""),n===void 0&&(n=""),"".concat(e,"-").concat(n)},_O=function(e){return JN(navigator.userAgent)&&e.includes("m4a")?{name:DZ,mimeType:UZ}:{name:Pp,mimeType:ju}},Fae="ALL",rC=function(){},Bae={currentGroupKey:"",currentPlayer:null,audioStorage:{}},M6=M.createContext({play:rC,pause:rC,stop:rC,voicePlayerStore:Bae}),Hae=function(e){var n=e.children,t=M.useReducer(xae,kae),r=t[0],i=t[1],a=r.currentGroupKey,s=r.currentPlayer,o=r.audioStorage,l=en().state,u=l.config,c=u.logger,h=function(_){_===void 0&&(_=""),a.includes(_)&&(c.info("VoicePlayer: Pause playing(by text)."),f(a))},f=function(_){s?_===a?(c.info("VoicePlayer: Pause playing(by group key)."),s.pause()):_===Fae&&(c.info("VoicePlayer: Pause playing(all)."),s.pause()):c.warning("VoicePlayer: No currentPlayer to pause.")},p=function(_){var g=_.groupKey,C=_.audioFile,E=_.audioFileUrl,y=E===void 0?"":E,S=_.audioFileMimeType,I=S===void 0?ju:S;g!==a&&f(a);var w=document.getElementById(Sg),R=document.getElementById(Q1);w&&R&&w.removeChild(R),c.info("VoicePlayer: Start getting audio file."),new Promise(function(A,U){var O;if(i({type:C6,payload:{groupKey:g}}),C){c.info("VoicePlayer: Use the audioFile instance."),A(C);return}var B=(O=o==null?void 0:o[g])===null||O===void 0?void 0:O.audioFile;if(B){c.info("VoicePlayer: Get from the audioStorage."),A(B);return}fetch(y).then(function(F){return F.blob()}).then(function(F){var P=new File([F],_O(I).name,{lastModified:new Date().getTime(),type:_O(I).mimeType});A(P),c.info("VoicePlayer: Get the audioFile from URL.")}).catch(U)}).then(function(A){var U,O=document.getElementById(Sg);c.info("VoicePlayer: Succeeded getting audio file.",{audioFile:A});var B=o[g]||zc(),F=new Audio((U=URL==null?void 0:URL.createObjectURL)===null||U===void 0?void 0:U.call(URL,A));F.id=Q1,F.currentTime=B.playbackTime,F.volume=1,F.loop=!1,F.onplaying=function(){c.info("VoicePlayer: OnPlaying event is called from audioPlayer",{groupKey:g,audioPlayer:F}),i({type:T6,payload:{groupKey:g,audioFile:A}})},F.onpause=function(){c.info("VoicePlayer: OnPause event is called from audioPlayer",{groupKey:g,audioPlayer:F}),i({type:N6,payload:{groupKey:g,duration:F.duration,currentTime:F.currentTime}})},F.ontimeupdate=function(){i({type:I6,payload:{groupKey:g}})},F.onerror=function(P){c.error("VoicePlayer: Failed to load the audioFile on the audio player.",P),i({type:rS,payload:{groupKey:g}})},F.dataset.sbGroupId=g;try{O==null||O.childNodes.forEach(function(P){var G,L,$=P,j=(G=$.dataset)===null||G===void 0?void 0:G.sbGroupKey;j!==g&&((L=$==null?void 0:$.pause)===null||L===void 0||L.call($),O.removeChild($),c.info("VoicePlayer: Removed other player.",{element:$}))})}finally{F==null||F.play(),O==null||O.appendChild(F),i({type:S6,payload:{groupKey:g,audioPlayer:F}}),c.info("VoicePlayer: Succeeded playing audio player.",{groupKey:g,audioPlayer:F})}}).catch(function(A){c.warning("VoicePlayer: Failed loading audio file with URL.",A),i({type:rS,payload:{groupKey:g}})})};return m.createElement(M6.Provider,{value:{play:p,pause:f,stop:h,voicePlayerStore:r}},m.createElement("div",{id:Sg,style:{display:"none"}}),n)},Gae=function(){return M.useContext(M6)},$ae={en:{MESSAGE_STATUS__YESTERDAY:"Yesterday",CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE:"new message",CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE_S:"new messages",CHANNEL__MESSAGE_LIST__NOTIFICATION__UNREAD_MESSAGE:"unread message",CHANNEL__MESSAGE_LIST__NOTIFICATION__UNREAD_MESSAGE_S:"unread messages",CHANNEL__MESSAGE_LIST__NOTIFICATION__ON:"on",CHANNEL_PREVIEW_MOBILE_LEAVE:"Leave channel",CHANNEL_SETTING__HEADER__TITLE:"Channel information",CHANNEL_SETTING__PROFILE__EDIT:"Edit",CHANNEL_SETTING__MEMBERS__TITLE:"Members",CHANNEL_SETTING__MEMBERS__SEE_ALL_MEMBERS:"All members",CHANNEL_SETTING__MEMBERS__INVITE_MEMBER:"Invite users",CHANNEL_SETTING__MEMBERS__YOU:" (You)",CHANNEL_SETTING__MEMBERS__SELECT_TITLE:"Select members",CHANNEL_SETTING__MEMBERS__OPERATOR:"Operator",CHANNEL_SETTING__LEAVE_CHANNEL__TITLE:"Leave channel",CHANNEL_SETTING__OPERATORS__TITLE:"Operators",CHANNEL_SETTING__OPERATORS__TITLE_ALL:"All operators",CHANNEL_SETTING__OPERATORS__TITLE_ADD:"Add operator",CHANNEL_SETTING__OPERATORS__ADD_BUTTON:"Add",CHANNEL_SETTING__MUTED_MEMBERS__TITLE:"Muted members",CHANNEL_SETTING__MUTED_MEMBERS__TITLE_ALL:"All muted members",CHANNEL_SETTING__NO_UNMUTED:"No muted members yet",CHANNEL_SETTING__BANNED_MEMBERS__TITLE:"Banned users",CHANNEL_SETTING__FREEZE_CHANNEL:"Freeze Channel",CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR:"Register as operator",CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR:"Unregister operator",CHANNEL_SETTING__MODERATION__MUTE:"Mute",CHANNEL_SETTING__MODERATION__UNMUTE:"Unmute",CHANNEL_SETTING__MODERATION__BAN:"Ban",CHANNEL_SETTING__MODERATION__UNBAN:"Unban",CHANNEL_SETTING__MODERATION__EMPTY_BAN:"No banned members yet",CHANNEL_SETTING__MODERATION__ALL_BAN:"All banned members",OPEN_CHANNEL_CONVERSATION__TITLE_PARTICIPANTS:"participants",OPEN_CHANNEL_CONVERSATION__SELECT_PARTICIPANTS:"Select participants",OPEN_CHANNEL_LIST__TITLE:"Channels",CREATE_OPEN_CHANNEL_LIST__TITLE:"New channel profile",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_SECTION:"Channel image",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__IMG_UPLOAD:"Upload",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_SECTION:"Channel name",CREATE_OPEN_CHANNEL_LIST__SUBTITLE__TEXT_PLACE_HOLDER:"Enter channel name",CREATE_OPEN_CHANNEL_LIST__SUBMIT:"Create",OPEN_CHANNEL_SETTINGS__OPERATOR_TITLE:"Channel Information",OPEN_CHANNEL_SETTINGS__OPERATOR_URL:"URL",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_ACCORDION_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_PANEL:"Delete channel",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_TITLE:"Delete channel?",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_CONTEXT:"Once deleted, this channel can't be restored.",OPEN_CHANNEL_SETTINGS__DELETE_CHANNEL_SUBMIT:"Delete",OPEN_CHANNEL_SETTINGS__OPERATORS_TITLE:"Operators",OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ADD:"Add operator",OPEN_CHANNEL_SETTINGS__OPERATORS__TITLE_ALL:"All operators",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE:"Muted participants",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__TITLE_ALL:"All muted participants",OPEN_CHANNEL_SETTINGS__MUTED_MEMBERS__NO_ONE:"No muted participants yet",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE:"Banned users",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__TITLE_ALL:"All banned users",OPEN_CHANNEL_SETTINGS__BANNED_MEMBERS__NO_ONE:"No banned users yet",OPEN_CHANNEL_SETTINGS__MEMBERS__YOU:" (You)",OPEN_CHANNEL_SETTINGS__MEMBERS__OPERATOR:"Operator",OPEN_CHANNEL_SETTINGS__PARTICIPANTS_TITLE:"Participants",OPEN_CHANNEL_SETTINGS__EMPTY_LIST:"No participants yet",OPEN_CHANNEL_SETTINGS__SEE_ALL:"See all participants",OPEN_CHANNEL_SETTINGS__ALL_PARTICIPANTS_TITLE:"All participants",OPEN_CHANNEL_SETTINGS__NO_TITLE:"(No title)",OPEN_CHANNEL_SETTING__MODERATION__REGISTER_AS_OPERATOR:"Register as operator",OPEN_CHANNEL_SETTING__MODERATION__UNREGISTER_OPERATOR:"Unregister operator",OPEN_CHANNEL_SETTING__MODERATION__MUTE:"Mute",OPEN_CHANNEL_SETTING__MODERATION__UNMUTE:"Unmute",OPEN_CHANNEL_SETTING__MODERATION__BAN:"Ban",OPEN_CHANNEL_SETTING__MODERATION__UNBAN:"Unban",TRYING_TO_CONNECT:"Trying to connect",TYPING_INDICATOR__IS_TYPING:"is typing...",TYPING_INDICATOR__AND:"and",TYPING_INDICATOR__ARE_TYPING:"are typing...",TYPING_INDICATOR__MULTIPLE_TYPING:"Several people are typing...",CHANNEL_FROZEN:"Channel is frozen",PLACE_HOLDER__NO_CHANNEL:"No channels",PLACE_HOLDER__WRONG:"Something went wrong",PLACE_HOLDER__RETRY_TO_CONNECT:"Retry",PLACE_HOLDER__NO_MESSAGES:"No messages",TOOLTIP__AND_YOU:", and you",TOOLTIP__YOU:"you",TOOLTIP__UNKNOWN_USER:"(no name)",UNKNOWN__UNKNOWN_MESSAGE_TYPE:"(Unknown message type)",UNKNOWN__CANNOT_READ_MESSAGE:"Cannot read this message.",UNKNOWN__TEMPLATE_ERROR:"(Template error)",FORM_VERSION_ERROR:"Form type messages are not available in this version.",UNKNOWN__CANNOT_READ_TEMPLATE:"Cannot read this template.",MESSAGE_EDITED:"(edited)",MODAL__DELETE_MESSAGE__TITLE:"Delete this message?",MODAL__CHANNEL_INFORMATION__TITLE:"Edit channel information",MODAL__CHANNEL_INFORMATION__CHANNEL_IMAGE:"Channel image",MODAL__CHANNEL_INFORMATION__UPLOAD:"Upload",MODAL__CHANNEL_INFORMATION__CHANNEL_NAME:"Channel name",MODAL__CHANNEL_INFORMATION__INPUT__PLACE_HOLDER:"Enter name",MODAL__INVITE_MEMBER__TITLE:"Invite member",MODAL__INVITE_MEMBER__SELECTED:"selected",MODAL__CHOOSE_CHANNEL_TYPE__TITLE:"New channel",MODAL__CHOOSE_CHANNEL_TYPE__GROUP:"Group",MODAL__CHOOSE_CHANNEL_TYPE__SUPER_GROUP:"Super group",MODAL__CHOOSE_CHANNEL_TYPE__BROADCAST:"Broadcast",MODAL__CREATE_CHANNEL__TITLE:"New channel",MODAL__CREATE_CHANNEL__GROUP:"Group",MODAL__CREATE_CHANNEL__SUPER:"Super group",MODAL__CREATE_CHANNEL__BROADCAST:"Broadcast",MODAL__CREATE_CHANNEL__SELECTED:"selected",MODAL__LEAVE_CHANNEL__TITLE:"Leave this channel?",MODAL__LEAVE_CHANNEL__FOOTER:"Leave",MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED:"You're muted by the operator.",MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN:"Channel is frozen.",USER_PROFILE__MESSAGE:"Message",USER_PROFILE__USER_ID:"User ID",EDIT_PROFILE__TITLE:"My profile",EDIT_PROFILE__IMAGE_LABEL:"Profile image",EDIT_PROFILE__IMAGE_UPLOAD:"Upload",EDIT_PROFILE__NICKNAME_LABEL:"Nickname",EDIT_PROFILE__NICKNAME_PLACEHOLDER:"Enter your nickname",EDIT_PROFILE__USERID_LABEL:"User ID",EDIT_PROFILE__THEME_LABEL:"Dark theme",MESSAGE_INPUT__PLACE_HOLDER:"Enter message",MESSAGE_INPUT__PLACE_HOLDER__DISABLED:"Chat is unavailable in this channel",MESSAGE_INPUT__PLACE_HOLDER__SUGGESTED_REPLIES:"Please choose one from above",MESSAGE_INPUT__PLACE_HOLDER__MESSAGE_FORM:"Please fill out the message form.",MESSAGE_INPUT__PLACE_HOLDER__FROZEN:"Chat is unavailable in this channel",MESSAGE_INPUT__PLACE_HOLDER__MUTED:"Chat is unavailable because you're muted",MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT:"You're muted",MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER:"Reply to message",BUTTON__SUBMIT:"Submit",BUTTON__CANCEL:"Cancel",BUTTON__DELETE:"Delete",BUTTON__SAVE:"Save",BUTTON__CREATE:"Create",BUTTON__INVITE:"Invite",BUTTON__OK:"OK",BADGE__OVER:"+",NO_TITLE:"No title",NO_NAME:"(No name)",NO_MEMBERS:"(No members)",LABEL__OPERATOR:"Operator",MESSAGE_MENU__COPY:"Copy",MESSAGE_MENU__REPLY:"Reply",MESSAGE_MENU__THREAD:"Reply in thread",MESSAGE_MENU__OPEN_IN_CHANNEL:"Open in channel",MESSAGE_MENU__EDIT:"Edit",MESSAGE_MENU__RESEND:"Resend",MESSAGE_MENU__DELETE:"Delete",MESSAGE_MENU__SAVE:"Save",MESSAGE_MENU__MARK_AS_UNREAD:"Mark as unread",CONTEXT_MENU_DROPDOWN__COPY:"Copy",CONTEXT_MENU_DROPDOWN__EDIT:"Edit",CONTEXT_MENU_DROPDOWN__RESEND:"Resend",CONTEXT_MENU_DROPDOWN__DELETE:"Delete",CONTEXT_MENU_DROPDOWN__SAVE:"Save",SEARCH:"Search",SEARCH_IN_CHANNEL:"Search in channel",SEARCH_IN:"Search in",SEARCHING:"Searching for messages...",NO_SEARCHED_MESSAGE:"No results found.",QUOTE_MESSAGE_INPUT__REPLY_TO:"Reply to",QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE:"Photo",QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF:"GIF",QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO:"Video",QUOTED_MESSAGE__REPLIED_TO:"replied to",QUOTED_MESSAGE__CURRENT_USER:"You",QUOTED_MESSAGE__UNAVAILABLE:"Message unavailable",THREAD__HEADER_TITLE:"Thread",CHANNEL__THREAD_REPLY:"reply",CHANNEL__THREAD_REPLIES:"replies",CHANNEL__THREAD_OVER_MAX:"99+",THREAD__THREAD_REPLY:"reply",THREAD__THREAD_REPLIES:"replies",THREAD__INPUT__REPLY_TO_THREAD:"Reply to thread",THREAD__INPUT__REPLY_IN_THREAD:"Reply in thread",MENTION_NAME__NO_NAME:"(No name)",MENTION_COUNT__OVER_LIMIT:"You can mention up to %d times at a time.",UI__FILE_VIEWER__UNSUPPORT:"Unsupported message",VOICE_RECORDING_PERMISSION_DENIED:`You cannot record the voice since
        voice recording is not permitted in your device system setting`,VOICE_MESSAGE:"Voice Message",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GIF:"GIF",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO:"Photo",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VIDEO:"Video",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_AUDIO:"Audio",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VOICE_MESSAGE:"Voice message",CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GENERAL:"File",CHANNEL_PREVIEW_LAST_MESSAGE_TEMPLATE_MESSAGE:"Message",DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE:"p 'on' MMM dd",DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR:"MMMM dd, yyyy",DATE_FORMAT__THREAD_LIST__DATE_SEPARATOR:"MMM dd, yyyy",DATE_FORMAT__MESSAGE_CREATED_AT:"p",DATE_FORMAT__UNREAD_SINCE:"p MMM dd",DATE_FORMAT__LAST_MESSAGE_CREATED_AT__TODAY:"p",DATE_FORMAT__LAST_MESSAGE_CREATED_AT__THIS_YEAR:"MMM d",DATE_FORMAT__LAST_MESSAGE_CREATED_AT__PREVIOUS_YEAR:"yyyy/M/d",FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT:"Up to %d files can be attached.",FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT:"The maximum size per file is %d MB.",FEEDBACK_LIKE:"Like",FEEDBACK_DISLIKE:"Dislike",EDIT_COMMENT:"Edit comment",REMOVE_FEEDBACK:"Remove Feedback",FEEDBACK_MODAL_TITLE:"Provide additional feedback (optional)",FEEDBACK_CONTENT_PLACEHOLDER:"Leave a comment",BUTTON__REMOVE_FEEDBACK:"Remove feedback",FEEDBACK_FAILED_SUBMIT:"Couldnt submit. Try again.",FEEDBACK_FAILED_SAVE:"Couldnt save. Try again.",FEEDBACK_FAILED_DELETE:"Couldnt delete. Try again.",FORM_ITEM_REQUIRED:"This field is required",FORM_ITEM_INVALID:"Please check the value",FORM_ITEM_OPTIONAL_EMPTY:"No Response"}},NE=function(e){return e===void 0&&(e="en"),$ae[e]},Vae={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},zae=function(n,t,r){var i,a=Vae[n];return typeof a=="string"?i=a:t===1?i=a.one:i=a.other.replace("{{count}}",t.toString()),r!=null&&r.addSuffix?r.comparison&&r.comparison>0?"in "+i:i+" ago":i};function iC(e){return function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=n.width?String(n.width):e.defaultWidth,r=e.formats[t]||e.formats[e.defaultWidth];return r}}var jae={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},qae={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},Kae={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},Wae={date:iC({formats:jae,defaultWidth:"full"}),time:iC({formats:qae,defaultWidth:"full"}),dateTime:iC({formats:Kae,defaultWidth:"full"})},Yae={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},Qae=function(n,t,r,i){return Yae[n]};function cv(e){return function(n,t){var r=t!=null&&t.context?String(t.context):"standalone",i;if(r==="formatting"&&e.formattingValues){var a=e.defaultFormattingWidth||e.defaultWidth,s=t!=null&&t.width?String(t.width):a;i=e.formattingValues[s]||e.formattingValues[a]}else{var o=e.defaultWidth,l=t!=null&&t.width?String(t.width):e.defaultWidth;i=e.values[l]||e.values[o]}var u=e.argumentCallback?e.argumentCallback(n):n;return i[u]}}var Xae={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},Zae={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},Jae={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},ese={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},tse={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},nse={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},rse=function(n,t){var r=Number(n),i=r%100;if(i>20||i<10)switch(i%10){case 1:return r+"st";case 2:return r+"nd";case 3:return r+"rd"}return r+"th"},ise={ordinalNumber:rse,era:cv({values:Xae,defaultWidth:"wide"}),quarter:cv({values:Zae,defaultWidth:"wide",argumentCallback:function(n){return n-1}}),month:cv({values:Jae,defaultWidth:"wide"}),day:cv({values:ese,defaultWidth:"wide"}),dayPeriod:cv({values:tse,defaultWidth:"wide",formattingValues:nse,defaultFormattingWidth:"wide"})};function dv(e){return function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=t.width,i=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],a=n.match(i);if(!a)return null;var s=a[0],o=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],l=Array.isArray(o)?sse(o,function(h){return h.test(s)}):ase(o,function(h){return h.test(s)}),u;u=e.valueCallback?e.valueCallback(l):l,u=t.valueCallback?t.valueCallback(u):u;var c=n.slice(s.length);return{value:u,rest:c}}}function ase(e,n){for(var t in e)if(e.hasOwnProperty(t)&&n(e[t]))return t}function sse(e,n){for(var t=0;t<e.length;t++)if(n(e[t]))return t}function ose(e){return function(n){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.match(e.matchPattern);if(!r)return null;var i=r[0],a=n.match(e.parsePattern);if(!a)return null;var s=e.valueCallback?e.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;var o=n.slice(i.length);return{value:s,rest:o}}}var lse=/^(\d+)(th|st|nd|rd)?/i,use=/\d+/i,cse={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},dse={any:[/^b/i,/^(a|c)/i]},hse={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},fse={any:[/1/i,/2/i,/3/i,/4/i]},vse={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},pse={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},mse={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},_se={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},gse={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},Ese={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},yse={ordinalNumber:ose({matchPattern:lse,parsePattern:use,valueCallback:function(n){return parseInt(n,10)}}),era:dv({matchPatterns:cse,defaultMatchWidth:"wide",parsePatterns:dse,defaultParseWidth:"any"}),quarter:dv({matchPatterns:hse,defaultMatchWidth:"wide",parsePatterns:fse,defaultParseWidth:"any",valueCallback:function(n){return n+1}}),month:dv({matchPatterns:vse,defaultMatchWidth:"wide",parsePatterns:pse,defaultParseWidth:"any"}),day:dv({matchPatterns:mse,defaultMatchWidth:"wide",parsePatterns:_se,defaultParseWidth:"any"}),dayPeriod:dv({matchPatterns:gse,defaultMatchWidth:"any",parsePatterns:Ese,defaultParseWidth:"any"})},A6={code:"en-US",formatDistance:zae,formatLong:Wae,formatRelative:Qae,localize:ise,match:yse,options:{weekStartsOn:0,firstWeekContainsDate:1}},w6={stringSet:NE("en"),dateLocale:A6},lr=m.createContext(w6),bse=function(e){var n=e.children;return m.createElement(lr.Provider,{value:H(H({},w6),e)},n)},tn=function(){var e=m.useContext(lr);if(!e)throw new Error("`useLocalization` hook must be used within `SendbirdProvider` that includes `LocalizationProvider`.");return e},Mn=function(){},rc=function(e){var n={};return Object.entries(e).forEach(function(t){var r=t[0],i=t[1];i!=null&&(n[r]=i)}),n};function sm(e){var n=e;n&&(!n.startsWith("http://")&&!n.startsWith("https://")&&(n="https://"+n),window.open(n,"_blank","noopener,noreferrer"))}function fn(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return e.filter(Boolean).join(" ")}var Cse=!1,R6="sendbird--mobile-mode",O6=m.createContext({breakpoint:Cse,isMobile:!1}),gO=function(){try{var e=document.querySelector("body");e==null||e.classList.add(R6)}catch{}},EO=function(){try{var e=document.querySelector("body");e==null||e.classList.remove(R6)}catch{}},Sse=function(e){var n=e.children,t=e.logger,r=(e==null?void 0:e.breakpoint)||!1,i=M.useState(!1),a=i[0],s=i[1];return M.useEffect(function(){var o,l=function(){var u;if(typeof r=="boolean")s(r),r?gO():EO();else{var c=window.matchMedia("(max-width: ".concat(r,")"));(u=t==null?void 0:t.info)===null||u===void 0||u.call(t,"MediaQueryProvider: Screensize updated to ".concat(r)),c.matches?(s(!0),gO()):(s(!1),EO())}};return l(),window.addEventListener("resize",l),(o=t==null?void 0:t.info)===null||o===void 0||o.call(t,"MediaQueryProvider: addEventListener",{updateSize:l}),function(){var u;window.removeEventListener("resize",l),(u=t==null?void 0:t.info)===null||u===void 0||u.call(t,"MediaQueryProvider: removeEventListener",{updateSize:l})}},[r]),m.createElement(O6.Provider,{value:{breakpoint:r,isMobile:a}},n)},si=function(){return m.useContext(O6)},ps=m.forwardRef(function(e,n){var t=e.className,r=t===void 0?"":t,i=e.children,a=e.disabled,s=a===void 0?!1:a,o=e.width,l=o===void 0?"56px":o,u=e.height,c=u===void 0?"56px":u,h=e.type,f=h===void 0?"button":h,p=e.style,_=p===void 0?{}:p,g=e.onBlur,C=g===void 0?function(){}:g,E=e.onClick,y=E===void 0?function(){}:E,S=e.testID,I=M.useState(!1),w=I[0],R=I[1];return m.createElement("button",{"data-testid":S,className:we(we([],Array.isArray(r)?r:[r],!0),["sendbird-iconbutton",w?"sendbird-iconbutton--pressed":""],!1).join(" "),disabled:s,ref:n,type:f,style:H(H({},_),{height:c,width:l}),onClick:function(A){s||(R(!0),y==null||y(A))},onBlur:function(A){R(!1),C==null||C(A)}},m.createElement("span",{className:"sendbird-iconbutton__inner"},i))}),Za={H_1:"H_1",H_2:"H_2",SUBTITLE_1:"SUBTITLE_1",SUBTITLE_2:"SUBTITLE_2",BODY_1:"BODY_1",BODY_2:"BODY_2",BUTTON_1:"BUTTON_1",BUTTON_2:"BUTTON_2",BUTTON_3:"BUTTON_3",CAPTION_1:"CAPTION_1",CAPTION_2:"CAPTION_2",CAPTION_3:"CAPTION_3"},Ja={ONBACKGROUND_1:"ONBACKGROUND_1",ONBACKGROUND_2:"ONBACKGROUND_2",ONBACKGROUND_3:"ONBACKGROUND_3",ONBACKGROUND_4:"ONBACKGROUND_4",ONCONTENT_1:"ONCONTENT_1",ONCONTENT_2:"ONCONTENT_2",ONCONTENT_3:"ONCONTENT_3",ONCONTENT_INVERSE_1:"ONCONTENT_INVERSE_1",ONCONTENT_INVERSE_3:"ONCONTENT_INVERSE_3",PRIMARY:"PRIMARY",ERROR:"ERROR",SECONDARY_3:"SECONDARY_3"};function Tse(e){switch(e){case Za.H_1:return"sendbird-label--h-1";case Za.H_2:return"sendbird-label--h-2";case Za.SUBTITLE_1:return"sendbird-label--subtitle-1";case Za.SUBTITLE_2:return"sendbird-label--subtitle-2";case Za.BODY_1:return"sendbird-label--body-1";case Za.BODY_2:return"sendbird-label--body-2";case Za.BUTTON_1:return"sendbird-label--button-1";case Za.BUTTON_2:return"sendbird-label--button-2";case Za.BUTTON_3:return"sendbird-label--button-3";case Za.CAPTION_1:return"sendbird-label--caption-1";case Za.CAPTION_2:return"sendbird-label--caption-2";case Za.CAPTION_3:return"sendbird-label--caption-3";default:return""}}function D6(e){switch(e){case Ja.ONBACKGROUND_1:return"sendbird-label--color-onbackground-1";case Ja.ONBACKGROUND_2:return"sendbird-label--color-onbackground-2";case Ja.ONBACKGROUND_3:return"sendbird-label--color-onbackground-3";case Ja.ONBACKGROUND_4:return"sendbird-label--color-onbackground-4";case Ja.ONCONTENT_1:return"sendbird-label--color-oncontent-1";case Ja.ONCONTENT_2:return"sendbird-label--color-oncontent-2";case Ja.ONCONTENT_3:return"sendbird-label--color-oncontent-3";case Ja.ONCONTENT_INVERSE_1:return"sendbird-label--color-oncontent-inverse-1";case Ja.ONCONTENT_INVERSE_3:return"sendbird-label--color-oncontent-inverse-3";case Ja.PRIMARY:return"sendbird-label--color-primary";case Ja.ERROR:return"sendbird-label--color-error";case Ja.SECONDARY_3:return"sendbird-label--color-secondary-3";default:return""}}var Ce=M.forwardRef(function(e,n){var t=e.className,r=t===void 0?[]:t,i=e.type,a=e.color,s=e.children,o=s===void 0?null:s,l=e.testID;return m.createElement("span",{className:we(we([],Array.isArray(r)?r:[r],!0),["sendbird-label",Tse(i),D6(a)],!1).join(" "),ref:n,"data-testid":l},o)}),be=Za,ue=Ja,kd=NE("en"),br;(function(e){e.PRIMARY="PRIMARY",e.SECONDARY="SECONDARY",e.DANGER="DANGER",e.DISABLED="DISABLED",e.WARNING="WARNING"})(br||(br={}));var Qu;(function(e){e.BIG="BIG",e.SMALL="SMALL"})(Qu||(Qu={}));function Nse(e){switch(e){case br.PRIMARY:return"sendbird-button--primary";case br.SECONDARY:return"sendbird-button--secondary";case br.DANGER:return"sendbird-button--danger";case br.DISABLED:return"sendbird-button--disabled";case br.WARNING:return"sendbird-button--warning";default:return""}}function Ise(e){switch(e){case Qu.BIG:return"sendbird-button--big";case Qu.SMALL:return"sendbird-button--small";default:return""}}function go(e){var n=e.className,t=e.type,r=t===void 0?br.PRIMARY:t,i=e.size,a=i===void 0?Qu.BIG:i,s=e.children,o=s===void 0?"Button":s,l=e.disabled,u=l===void 0?!1:l,c=e.onClick,h=c===void 0?function(){}:c,f=e.labelType,p=f===void 0?be.BUTTON_1:f,_=e.labelColor,g=_===void 0?ue.ONCONTENT_1:_,C=we(we([],Array.isArray(n)?n:[n],!0),["sendbird-button",u?"sendbird-button__disabled":"",Nse(r),Ise(a)],!1).join(" ");return m.createElement("button",{className:C,type:"button",onClick:h,disabled:u},m.createElement(Ce,{className:"sendbird-button__text",type:p,color:g},o))}var Me={ADD:"ADD",ARROW_LEFT:"ARROW_LEFT",ATTACH:"ATTACH",AUDIO_ON_LINED:"AUDIO_ON_LINED",BAN:"BAN",BROADCAST:"BROADCAST",CAMERA:"CAMERA",CHANNELS:"CHANNELS",CHAT:"CHAT",CHAT_FILLED:"CHAT_FILLED",CHEVRON_DOWN:"CHEVRON_DOWN",CHEVRON_RIGHT:"CHEVRON_RIGHT",CLOSE:"CLOSE",COLLAPSE:"COLLAPSE",COPY:"COPY",CREATE:"CREATE",DELETE:"DELETE",DISCONNECTED:"DISCONNECTED",DOCUMENT:"DOCUMENT",DONE:"DONE",DONE_ALL:"DONE_ALL",DOWNLOAD:"DOWNLOAD",EDIT:"EDIT",EMOJI_MORE:"EMOJI_MORE",ERROR:"ERROR",EXPAND:"EXPAND",FILE_AUDIO:"FILE_AUDIO",FILE_DOCUMENT:"FILE_DOCUMENT",FREEZE:"FREEZE",GIF:"GIF",INFO:"INFO",LEAVE:"LEAVE",MARK_AS_UNREAD:"MARK_AS_UNREAD",MEMBERS:"MEMBERS",MESSAGE:"MESSAGE",MODERATIONS:"MODERATIONS",MORE:"MORE",MUTE:"MUTE",NOTIFICATIONS:"NOTIFICATIONS",NOTIFICATIONS_OFF_FILLED:"NOTIFICATIONS_OFF_FILLED",OPERATOR:"OPERATOR",PHOTO:"PHOTO",PLAY:"PLAY",PLUS:"PLUS",QUESTION:"QUESTION",REFRESH:"REFRESH",REPLY:"REPLY",REMOVE:"REMOVE",SEARCH:"SEARCH",SEND:"SEND",SETTINGS_FILLED:"SETTINGS_FILLED",SLIDE_LEFT:"SLIDE_LEFT",SPINNER:"SPINNER",SUPERGROUP:"SUPERGROUP",THREAD:"THREAD",THUMBNAIL_NONE:"THUMBNAIL_NONE",TOGGLE_OFF:"TOGGLE_OFF",TOGGLE_ON:"TOGGLE_ON",USER:"USER",FEEDBACK_LIKE:"FEEDBACK_LIKE",FEEDBACK_DISLIKE:"FEEDBACK_DISLIKE",FLOATING_BUTTON_CLOSE:"FLOATING_BUTTON_CLOSE"},li={DEFAULT:"DEFAULT",PRIMARY:"PRIMARY",PRIMARY_2:"PRIMARY_2",SECONDARY:"SECONDARY",SECONDARY_2:"SECONDARY_2",CONTENT:"CONTENT",CONTENT_INVERSE:"CONTENT_INVERSE",CONTENT_INVERSE_3:"CONTENT_INVERSE_3",WHITE:"WHITE",GRAY:"GRAY",THUMBNAIL_ICON:"THUMBNAIL_ICON",SENT:"SENT",READ:"READ",ON_BACKGROUND_1:"ON_BACKGROUND_1",ON_BACKGROUND_2:"ON_BACKGROUND_2",ON_BACKGROUND_3:"ON_BACKGROUND_3",ON_BACKGROUND_4:"ON_BACKGROUND_4",BACKGROUND_3:"BACKGROUND_3",ERROR:"ERROR"};function Mse(e){switch(e){case li.PRIMARY:return"sendbird-icon-color--primary";case li.PRIMARY_2:return"sendbird-icon-color--primary-2";case li.SECONDARY:return"sendbird-icon-color--secondary";case li.SECONDARY_2:return"sendbird-icon-color--secondary-2";case li.CONTENT:return"sendbird-icon-color--content";case li.CONTENT_INVERSE:return"sendbird-icon-color--content-inverse";case li.CONTENT_INVERSE_3:return"sendbird-icon-color--content-inverse-3";case li.WHITE:return"sendbird-icon-color--white";case li.GRAY:return"sendbird-icon-color--gray";case li.THUMBNAIL_ICON:return"sendbird-icon-color--thumbnail-icon";case li.SENT:return"sendbird-icon-color--sent";case li.READ:return"sendbird-icon-color--read";case li.ON_BACKGROUND_1:return"sendbird-icon-color--on-background-1";case li.ON_BACKGROUND_2:return"sendbird-icon-color--on-background-2";case li.ON_BACKGROUND_3:return"sendbird-icon-color--on-background-3";case li.ON_BACKGROUND_4:return"sendbird-icon-color--on-background-4";case li.BACKGROUND_3:return"sendbird-icon-color--background-3";case li.ERROR:return"sendbird-icon-color--error";default:return""}}function Ase(e){switch(e){case Me.ADD:return"sendbird-icon-add";case Me.ARROW_LEFT:return"sendbird-icon-arrow-left";case Me.ATTACH:return"sendbird-icon-attach";case Me.AUDIO_ON_LINED:return"sendbird-icon-audio-on-lined";case Me.BAN:return"sendbird-icon-ban";case Me.BROADCAST:return"sendbird-icon-broadcast";case Me.CAMERA:return"sendbird-icon-camera";case Me.CHANNELS:return"sendbird-icon-channels";case Me.CHAT:return"sendbird-icon-chat";case Me.CHAT_FILLED:return"sendbird-icon-chat-filled";case Me.CHEVRON_DOWN:return"sendbird-icon-chevron-down";case Me.CHEVRON_RIGHT:return"sendbird-icon-chevron-right";case Me.CLOSE:return"sendbird-icon-close";case Me.COLLAPSE:return"sendbird-icon-collapse";case Me.COPY:return"sendbird-icon-copy";case Me.CREATE:return"sendbird-icon-create";case Me.DELETE:return"sendbird-icon-delete";case Me.DISCONNECTED:return"sendbird-icon-disconnected";case Me.DOCUMENT:return"sendbird-icon-document";case Me.DONE:return"sendbird-icon-done";case Me.DONE_ALL:return"sendbird-icon-done-all";case Me.DOWNLOAD:return"sendbird-icon-down-load";case Me.EDIT:return"sendbird-icon-edit";case Me.EMOJI_MORE:return"sendbird-icon-emoji-more";case Me.ERROR:return"sendbird-icon-error";case Me.EXPAND:return"sendbird-icon-expand";case Me.FILE_AUDIO:return"sendbird-icon-file-audio";case Me.FILE_DOCUMENT:return"sendbird-icon-file-document";case Me.FREEZE:return"sendbird-icon-freeze";case Me.GIF:return"sendbird-icon-gif";case Me.INFO:return"sendbird-icon-info";case Me.LEAVE:return"sendbird-icon-leave";case Me.MARK_AS_UNREAD:return"sendbird-icon-mark-as-unread";case Me.MEMBERS:return"sendbird-icon-members";case Me.MESSAGE:return"sendbird-icon-message";case Me.MODERATIONS:return"sendbird-icon-moderations";case Me.MORE:return"sendbird-icon-more";case Me.MUTE:return"sendbird-icon-mute";case Me.NOTIFICATIONS:return"sendbird-icon-notifications";case Me.NOTIFICATIONS_OFF_FILLED:return"sendbird-icon-notifications-off-filled";case Me.OPERATOR:return"sendbird-icon-operator";case Me.PHOTO:return"sendbird-icon-photo";case Me.PLAY:return"sendbird-icon-play";case Me.PLUS:return"sendbird-iconn-plus";case Me.QUESTION:return"sendbird-icon-question";case Me.REFRESH:return"sendbird-icon-refresh";case Me.REMOVE:return"sendbird-icon-remove";case Me.REPLY:return"sendbird-icon-reply";case Me.SEARCH:return"sendbird-icon-search";case Me.SEND:return"sendbird-icon-send";case Me.SETTINGS_FILLED:return"sendbird-icon-settings-filled";case Me.SPINNER:return"sendbird-icon-spinner";case Me.SUPERGROUP:return"sendbird-icon-supergroup";case Me.THREAD:return"sendbird-icon-thread";case Me.THUMBNAIL_NONE:return"sendbird-icon-thumbnail-none";case Me.TOGGLE_OFF:return"sendbird-icon-toggle-off";case Me.TOGGLE_ON:return"sendbird-icon-toggle-on";case Me.USER:return"sendbird-icon-user";case Me.FEEDBACK_LIKE:return"sendbird-icon-feedback-like";case Me.FEEDBACK_DISLIKE:return"sendbird-icon-feedback-dislike";default:return"sendbird-icon-unknown"}}var yO;function iS(){return iS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},iS.apply(null,arguments)}const wse=e=>M.createElement("svg",iS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),yO||(yO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M50.667 5.333a8 8 0 0 1 8 8v37.334a8 8 0 0 1-8 8H13.333a8 8 0 0 1-8-8V13.333a8 8 0 0 1 8-8zm0 5.334H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334a2.667 2.667 0 0 0 2.666 2.666h37.334a2.667 2.667 0 0 0 2.666-2.666V13.333a2.667 2.667 0 0 0-2.666-2.666m-18.667 8a2.667 2.667 0 0 1 2.649 2.355l.018.311v8h8a2.667 2.667 0 0 1 .311 5.316l-.311.018h-8v8a2.667 2.667 0 0 1-5.316.311l-.018-.311v-8h-8a2.667 2.667 0 0 1-.311-5.316l.311-.018h8v-8A2.667 2.667 0 0 1 32 18.667",className:"icon-add_svg__fill"})));var bO;function aS(){return aS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},aS.apply(null,arguments)}const Rse=e=>M.createElement("svg",aS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),bO||(bO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M33.886 8.781a2.67 2.67 0 0 1 .221 3.52l-.221.251-16.78 16.781H56a2.667 2.667 0 0 1 .311 5.316l-.311.018-38.895-.001 16.78 16.782a2.666 2.666 0 0 1 .222 3.52l-.221.251a2.67 2.67 0 0 1-3.52.222l-.252-.222L8.781 33.886a2.67 2.67 0 0 1-.222-3.52l.222-.252L30.114 8.781a2.67 2.67 0 0 1 3.772 0",className:"icon-arrow-left_svg__fill"})));var CO;function sS(){return sS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},sS.apply(null,arguments)}const Ose=e=>M.createElement("svg",sS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),CO||(CO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m55.334 28.926-24.506 23.34c-5.222 4.973-13.74 4.973-18.962 0-5.149-4.903-5.149-12.797 0-17.7l24.506-23.34c3.138-2.988 8.278-2.988 11.416 0 3.064 2.919 3.064 7.594 0 10.513L23.255 45.077c-1.055 1.005-2.815 1.005-3.87.001-.98-.933-.98-2.39 0-3.325l22.64-21.535a2.667 2.667 0 0 0-3.676-3.864L15.709 37.89a7.58 7.58 0 0 0-.001 11.05c3.113 2.966 8.11 2.966 11.224 0l24.533-23.338c5.272-5.021 5.272-13.217 0-18.238-5.197-4.95-13.573-4.95-18.77 0L8.187 30.704c-7.356 7.005-7.356 18.419 0 25.424 7.281 6.935 19.036 6.935 26.318 0l24.506-23.34a2.666 2.666 0 1 0-3.678-3.862z",className:"icon-attach_svg__fill"})));var SO,TO;function oS(){return oS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},oS.apply(null,arguments)}const Dse=e=>M.createElement("svg",oS({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 64 64"},e),SO||(SO=M.createElement("g",{clipPath:"url(#icon-audio-on-lined_svg__a)"},M.createElement("path",{d:"M32 0C26.11 0 21.333 4.776 21.333 10.667V32c0 5.891 4.776 10.667 10.667 10.667S42.667 37.89 42.667 32V10.667C42.667 4.776 37.89 0 32 0m-5.333 10.667a5.333 5.333 0 0 1 10.666 0V32a5.333 5.333 0 0 1-10.666 0z",className:"icon-audio-on-lined_svg__fill",clipRule:"evenodd"}),M.createElement("path",{d:"M16 26.667a2.667 2.667 0 1 0-5.333 0V32c0 10.879 8.143 19.856 18.666 21.168v5.499h-8a2.667 2.667 0 0 0 0 5.333h21.334a2.667 2.667 0 1 0 0-5.333h-8v-5.499C45.19 51.856 53.333 42.88 53.333 32v-5.333a2.667 2.667 0 1 0-5.333 0V32c0 8.837-7.163 16-16 16s-16-7.163-16-16z",className:"icon-audio-on-lined_svg__fill"}))),TO||(TO=M.createElement("defs",null,M.createElement("clipPath",{id:"icon-audio-on-lined_svg__a"},M.createElement("path",{fill:"#fff",d:"M0 0h64v64H0z"})))));var NO;function lS(){return lS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},lS.apply(null,arguments)}const Use=e=>M.createElement("svg",lS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),NO||(NO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8m12.333 21.333a1 1 0 0 1 1 1v3.334a1 1 0 0 1-1 1H19.667a1 1 0 0 1-1-1v-3.334a1 1 0 0 1 1-1z",className:"icon-ban_svg__fill"})));var IO;function uS(){return uS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},uS.apply(null,arguments)}const Lse=e=>M.createElement("svg",uS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),IO||(IO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M58.545 5.498q.121.389.122.796v46.079a2.666 2.666 0 0 1-3.462 2.546l-17.951-5.61c-.645 5.273-5.14 9.358-10.587 9.358C20.776 58.667 16 53.89 16 48v-5.334h-5.333a8 8 0 0 1-7.997-7.75l-.003-.25V24a8 8 0 0 1 8-8H16L55.205 3.749a2.665 2.665 0 0 1 3.34 1.75zM21.333 44.587V48a5.333 5.333 0 0 0 10.652.398L32 47.92zm32-34.667-32 9.997v18.83l32 9.997zM16 21.333h-5.333a2.67 2.67 0 0 0-2.65 2.356L8 24v10.667a2.667 2.667 0 0 0 2.667 2.666H16z",className:"icon-broadcast_svg__fill"})));var MO;function cS(){return cS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cS.apply(null,arguments)}const kse=e=>M.createElement("svg",cS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),MO||(MO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M40 5.333c.892 0 1.724.446 2.219 1.188l4.541 6.812H56a8 8 0 0 1 7.986 7.53l.014.47v29.334a8 8 0 0 1-8 8H8a8 8 0 0 1-8-8V21.333a8 8 0 0 1 8-8h9.237l4.544-6.812a2.67 2.67 0 0 1 1.888-1.167l.331-.02zm-1.43 5.334H25.428l-4.542 6.812a2.66 2.66 0 0 1-1.887 1.167l-.331.02H8a2.67 2.67 0 0 0-2.667 2.667v29.334A2.667 2.667 0 0 0 8 53.333h48a2.667 2.667 0 0 0 2.667-2.666V21.333A2.667 2.667 0 0 0 56 18.667H45.333a2.67 2.67 0 0 1-2.218-1.188zM32 21.333c7.364 0 13.333 5.97 13.333 13.334S39.363 48 32 48s-13.333-5.97-13.333-13.333S24.637 21.333 32 21.333m0 5.334a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-camera_svg__fill"})));var AO;function dS(){return dS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},dS.apply(null,arguments)}const xse=e=>M.createElement("svg",dS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),AO||(AO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m42.65 5.333.311.017a2.666 2.666 0 0 1 2.373 2.633l-.017.311-1.45 13.04h9.466a2.667 2.667 0 0 1 .311 5.315l-.31.018H43.271l-1.184 10.666h11.245a2.667 2.667 0 0 1 .312 5.316l-.31.018H41.495l-1.512 13.627a2.667 2.667 0 0 1-5.318-.277l.017-.311 1.448-13.04H25.496l-1.512 13.628a2.667 2.667 0 0 1-5.318-.277l.017-.311 1.448-13.04h-9.464a2.667 2.667 0 0 1-.311-5.315l.31-.018h10.057l1.186-10.667H10.667a2.667 2.667 0 0 1-.311-5.315l.31-.018h11.835l1.515-13.627a2.67 2.67 0 0 1 2.634-2.373l.311.017a2.666 2.666 0 0 1 2.373 2.633l-.017.311-1.45 13.04H38.5l1.515-13.628a2.67 2.67 0 0 1 2.634-2.373zm-5.927 32 1.186-10.667H27.272l-1.184 10.667z",className:"icon-channels_svg__fill"})));var wO;function hS(){return hS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},hS.apply(null,arguments)}const Pse=e=>M.createElement("svg",hS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),wO||(wO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8",className:"icon-chat_svg__fill"})));var RO;function fS(){return fS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},fS.apply(null,arguments)}const Fse=e=>M.createElement("svg",fS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),RO||(RO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667",className:"icon-chat-filled_svg__fill"})));var OO;function vS(){return vS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},vS.apply(null,arguments)}const Bse=e=>M.createElement("svg",vS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),OO||(OO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16.121 21.879a3 3 0 0 0-4.242 0 3 3 0 0 0 0 4.242l18 18a3 3 0 0 0 4.242 0l18-18a3 3 0 0 0 0-4.242 3 3 0 0 0-4.242 0L32 37.757z",className:"icon-chevron-down_svg__fill"})));var DO;function pS(){return pS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},pS.apply(null,arguments)}const Hse=e=>M.createElement("svg",pS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),DO||(DO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M22.114 46.114a2.668 2.668 0 0 0 3.772 3.772l16-16a2.67 2.67 0 0 0 0-3.772l-16-16a2.668 2.668 0 0 0-3.772 3.772L36.23 32z",className:"icon-chevron-right_svg__fill"})));var UO;function mS(){return mS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},mS.apply(null,arguments)}const Gse=e=>M.createElement("svg",mS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),UO||(UO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M52.552 11.448a2.666 2.666 0 0 1 .222 3.52l-.222.251-16.781 16.78 16.781 16.782a2.665 2.665 0 0 1 0 3.771 2.666 2.666 0 0 1-3.52.222l-.251-.222L32 35.771 15.219 52.552a2.665 2.665 0 0 1-3.771 0 2.666 2.666 0 0 1-.222-3.52l.222-.251L28.228 32l-16.78-16.781a2.665 2.665 0 0 1 0-3.771 2.666 2.666 0 0 1 3.52-.222l.251.222 16.78 16.78 16.782-16.78a2.665 2.665 0 0 1 3.771 0",className:"icon-close_svg__fill"})));var LO;function _S(){return _S=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},_S.apply(null,arguments)}const $se=e=>M.createElement("svg",_S({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),LO||(LO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16 8a2.667 2.667 0 0 0-2.649 2.356l-.018.31v42.667a2.667 2.667 0 0 0 5.316.311l.018-.31V34.666h25.56l-6.113 6.114a2.67 2.67 0 0 0-.221 3.52l.221.251a2.666 2.666 0 0 0 3.52.222l.252-.222 10.666-10.666a2.666 2.666 0 0 0 .222-3.52l-.222-.252-10.666-10.666a2.666 2.666 0 0 0-3.993 3.52l.221.251 6.113 6.114h-25.56V10.667A2.667 2.667 0 0 0 16 8",className:"icon-collapse_svg__fill"})));var kO;function gS(){return gS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},gS.apply(null,arguments)}const Vse=e=>M.createElement("svg",gS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),kO||(kO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M53.333 21.333a8 8 0 0 1 8 8v24a8 8 0 0 1-8 8h-24a8 8 0 0 1-8-8v-24a8 8 0 0 1 8-8zm0 5.334h-24a2.667 2.667 0 0 0-2.666 2.666v24A2.667 2.667 0 0 0 29.333 56h24A2.667 2.667 0 0 0 56 53.333v-24a2.667 2.667 0 0 0-2.667-2.666m-18.666-24a8 8 0 0 1 7.986 7.53l.014.47v2.666a2.667 2.667 0 0 1-5.316.311l-.018-.31v-2.667a2.67 2.67 0 0 0-2.355-2.65L34.667 8h-24a2.67 2.67 0 0 0-2.65 2.356l-.017.31v24a2.67 2.67 0 0 0 2.356 2.65l.31.017h2.667a2.667 2.667 0 0 1 .311 5.316l-.31.018h-2.667a8 8 0 0 1-7.987-7.53l-.013-.47v-24c0-4.26 3.33-7.743 7.53-7.987l.47-.013z",className:"icon-copy_svg__fill"})));var xO;function ES(){return ES=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ES.apply(null,arguments)}const zse=e=>M.createElement("svg",ES({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),xO||(xO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8m2.667 16v5.333H40c3.556 0 3.556 5.334 0 5.334h-5.333V40c0 3.556-5.334 3.556-5.334 0v-5.333H24c-3.556 0-3.556-5.334 0-5.334h5.333V24c0-3.556 5.334-3.556 5.334 0",className:"icon-create_svg__fill"})));var PO;function yS(){return yS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},yS.apply(null,arguments)}const jse=e=>M.createElement("svg",yS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),PO||(PO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M37.333 2.667c4.26 0 7.743 3.33 7.987 7.53l.013.47v2.666H56a2.667 2.667 0 0 1 .311 5.316l-.311.018h-2.668l.001 34.666c0 4.26-3.33 7.743-7.53 7.987l-.47.013H18.667a8 8 0 0 1-7.987-7.53l-.013-.47V18.667H8a2.667 2.667 0 0 1-.311-5.316L8 13.333h10.666v-2.666a8 8 0 0 1 7.53-7.987l.47-.013zm10.666 16H16v34.666a2.67 2.67 0 0 0 2.356 2.65l.31.017h26.667a2.67 2.67 0 0 0 2.65-2.356l.017-.31zm-21.332 8a2.667 2.667 0 0 1 2.648 2.355l.018.311v16a2.667 2.667 0 0 1-5.316.311l-.017-.31v-16a2.667 2.667 0 0 1 2.667-2.667m10.666 0a2.67 2.67 0 0 1 2.65 2.355l.017.311v16a2.667 2.667 0 0 1-5.315.311l-.018-.31v-16a2.667 2.667 0 0 1 2.666-2.667m0-18.667H26.667a2.67 2.67 0 0 0-2.65 2.356l-.017.31v2.667h16v-2.666a2.67 2.67 0 0 0-2.356-2.65L37.334 8z",className:"icon-delete_svg__fill"})));var FO;function bS(){return bS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},bS.apply(null,arguments)}const qse=e=>M.createElement("svg",bS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),FO||(FO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m54.534 6.069-.248.217-9.736 9.735-.04.04-9.573 9.573q-.226.178-.405.404L6.286 54.286a2.423 2.423 0 0 0 3.18 3.645l.248-.217 13.374-13.373a2.42 2.42 0 0 0 1.88-.401 12.12 12.12 0 0 1 14.04 0 2.424 2.424 0 1 0 2.808-3.952 16.95 16.95 0 0 0-11.303-3.072l6.743-6.744a24.1 24.1 0 0 1 10.159 5.021 2.424 2.424 0 0 0 3.11-3.719 29 29 0 0 0-9.34-5.23l5.633-5.634a36.2 36.2 0 0 1 9.225 5.934 2.425 2.425 0 0 0 3.211-3.633 41 41 0 0 0-8.796-5.941l7.256-7.256a2.423 2.423 0 0 0-3.18-3.645m-35.04 21.474a29 29 0 0 0-6.032 3.942 2.424 2.424 0 0 0 3.137 3.697 24 24 0 0 1 5.022-3.282 2.425 2.425 0 0 0-2.127-4.357M4.748 22.909a2.424 2.424 0 0 0 3.207 3.636 36.36 36.36 0 0 1 26.978-8.977 2.424 2.424 0 0 0 .389-4.832A41.2 41.2 0 0 0 4.748 22.909",className:"icon-disconnected_svg__fill"})));var BO;function CS(){return CS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},CS.apply(null,arguments)}const Kse=e=>M.createElement("svg",CS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),BO||(BO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M37.333 2.667a3 3 0 0 1 .274.014l.085.01.058.008q.07.01.141.026l.029.007q.075.016.146.037l.034.01q.357.107.663.303l.034.022q.053.034.104.072l.057.043q.045.033.085.068.091.075.176.16l-.126-.117q.075.065.143.135L55.21 19.438q.07.07.134.143l.035.04q.04.047.076.096l.04.054.07.1.024.038c.16.253.279.535.347.836l.01.048q.014.064.024.13l.006.048.007.051.004.041q.014.135.014.27v32a8 8 0 0 1-8 8H16a8 8 0 0 1-8-8V10.667a8 8 0 0 1 8-8zM34.666 8H16a2.667 2.667 0 0 0-2.667 2.667v42.666A2.667 2.667 0 0 0 16 56h32a2.667 2.667 0 0 0 2.667-2.667L50.666 24H37.333a2.667 2.667 0 0 1-2.648-2.356l-.018-.31zm12.227 10.667-6.894-6.894.001 6.894z",className:"icon-document_svg__fill"})));var HO;function SS(){return SS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},SS.apply(null,arguments)}const Wse=e=>M.createElement("svg",SS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),HO||(HO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M12.552 31.448a2.665 2.665 0 1 0-3.771 3.771l13.333 13.333a2.666 2.666 0 0 0 3.772 0L55.219 19.22a2.667 2.667 0 0 0-3.771-3.771L24 42.895z",className:"icon-done_svg__fill"})));var GO;function TS(){return TS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},TS.apply(null,arguments)}const Yse=e=>M.createElement("svg",TS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),GO||(GO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M5.886 31.448 19.219 44.78a2.667 2.667 0 0 1-3.771 3.771L2.114 35.22a2.667 2.667 0 0 1 3.772-3.771zm52.228-16a2.666 2.666 0 1 1 3.772 3.771L32.552 48.552a2.665 2.665 0 0 1-3.771 0L15.448 35.22a2.665 2.665 0 0 1 0-3.771 2.665 2.665 0 0 1 3.771 0l11.448 11.447zm-9.562 0a2.665 2.665 0 0 1 0 3.771L32.556 35.215a2.665 2.665 0 0 1-3.771 0 2.664 2.664 0 0 1 0-3.77L44.78 15.447a2.665 2.665 0 0 1 3.771 0z",className:"icon-done-all_svg__fill"})));var $O;function NS(){return NS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},NS.apply(null,arguments)}const Qse=e=>M.createElement("svg",NS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),$O||($O=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M56 42.667a2.667 2.667 0 0 1 2.649 2.355l.018.311v8c0 4.26-3.33 7.743-7.53 7.987l-.47.013H13.333a8 8 0 0 1-7.986-7.53l-.014-.47v-8a2.667 2.667 0 0 1 5.316-.311l.018.311v8a2.67 2.67 0 0 0 2.355 2.65l.311.017h37.334a2.667 2.667 0 0 0 2.648-2.356l.018-.31v-8A2.667 2.667 0 0 1 56 42.667m-36.552-8.781a2.666 2.666 0 0 1 3.52-3.993l.251.221 6.114 6.114V5.333a2.667 2.667 0 0 1 5.316-.311l.018.311v30.894l6.114-6.113a2.67 2.67 0 0 1 3.52-.221l.251.221a2.666 2.666 0 0 1 .222 3.52l-.222.252-10.658 10.657a2 2 0 0 1-.135.128l.127-.119a3 3 0 0 1-.195.176l-.056.045-.086.064-.056.04-.086.056-.06.036-.081.046-.079.04a3 3 0 0 1-.14.065l-.09.036q-.034.014-.067.025l-.09.03-.063.019q-.064.018-.13.034l-.013.003-.144.028-.064.01q-.045.008-.092.012l-.084.008-.103.006-.069.002h-.095q-.042 0-.082-.003l.139.003q-.126 0-.249-.011l-.061-.007-.092-.012-.09-.015-.118-.025-.04-.01a3 3 0 0 1-.34-.11l-.015-.006q-.074-.03-.145-.063l-.042-.02L30.71 45l-.067-.039q-.045-.026-.087-.054l-.062-.041q-.045-.03-.088-.063l-.04-.03-.008-.007a3 3 0 0 1-.251-.223z",className:"icon-download_svg__fill"})));var VO;function IS(){return IS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},IS.apply(null,arguments)}const Xse=e=>M.createElement("svg",IS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 65 65"},e),VO||(VO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M56 56a2.667 2.667 0 0 1 .311 5.315l-.311.018H8a2.667 2.667 0 0 1-.311-5.316L8 56zM35.448 3.448a2.665 2.665 0 0 1 3.771 0l10.667 10.666a2.67 2.67 0 0 1 0 3.772L20.552 47.219c-.5.5-1.178.781-1.885.781H8a2.667 2.667 0 0 1-2.667-2.667V34.667c0-.708.281-1.386.781-1.886zm1.885 5.659L10.667 35.77v6.896h6.89L44.227 16z",className:"icon-edit_svg__fill"})));var zO;function MS(){return MS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},MS.apply(null,arguments)}const Zse=e=>M.createElement("svg",MS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),zO||(zO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32.097 3.22c2.65 0 5.255.357 7.763 1.054a2.134 2.134 0 0 1-1.144 4.111 24.7 24.7 0 0 0-6.619-.899c-13.603 0-24.63 11.027-24.63 24.63s11.027 24.63 24.63 24.63 24.63-11.027 24.63-24.63c0-2.227-.295-4.413-.87-6.518a2.13 2.13 0 0 1 1.494-2.62 2.13 2.13 0 0 1 2.62 1.494 29 29 0 0 1 1.023 7.644c0 15.96-12.938 28.897-28.897 28.897-15.96 0-28.897-12.937-28.897-28.897S16.138 3.22 32.097 3.22m10.705 34.792a2.133 2.133 0 0 1 2.024 2.808c-1.873 5.623-6.937 9.488-12.729 9.488s-10.856-3.865-12.73-9.488a2.134 2.134 0 0 1 1.875-2.803l.15-.005zm-3.477 4.266H24.867l.294.382c1.539 1.887 3.718 3.113 6.115 3.342l.314.024.507.015c2.617 0 5.037-1.188 6.743-3.151l.193-.23zM21.392 21.954c1.087 0 1.985.814 2.116 1.866l.017.267v5.353a2.133 2.133 0 0 1-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.134-2.133m21.41 0c1.088 0 1.985.814 2.117 1.866l.017.267v5.353a2.133 2.133 0 0 1-4.25.268l-.017-.268v-5.353c0-1.178.955-2.133 2.133-2.133M54.853 0a.8.8 0 0 1 .8.8v7.786h7.76a.8.8 0 0 1 .8.8v2.667a.8.8 0 0 1-.8.8h-7.76v7.758a.8.8 0 0 1-.8.8h-2.666a.8.8 0 0 1-.8-.8v-7.758h-7.785a.8.8 0 0 1-.8-.8V9.387a.8.8 0 0 1 .8-.8l7.784-.001V.8a.8.8 0 0 1 .8-.8z",className:"icon-emoji-more_svg__fill"})));var jO;function AS(){return AS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},AS.apply(null,arguments)}const Jse=e=>M.createElement("svg",AS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),jO||(jO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 5.06a8 8 0 0 1 6.561 3.424l.287.439 22.608 37.744a8 8 0 0 1 .022 7.962 8 8 0 0 1-6.356 4.014l-.535.024H9.384a8 8 0 0 1-6.862-4.038 8.01 8.01 0 0 1-.226-7.493l.27-.506L25.16 8.91A8 8 0 0 1 32 5.06m0 5.333c-.816 0-1.58.372-2.076.99l-.196.28-22.565 37.67a2.67 2.67 0 0 0 1.909 3.973l.341.027h45.144a2.67 2.67 0 0 0 2.45-3.659l-.148-.304L34.28 11.676A2.67 2.67 0 0 0 32 10.393m0 32.274A2.667 2.667 0 1 1 32 48a2.667 2.667 0 0 1 0-5.333m0-21.334a2.667 2.667 0 0 1 2.649 2.356l.018.311v10.667a2.667 2.667 0 0 1-5.316.311l-.018-.311V24A2.667 2.667 0 0 1 32 21.333",className:"icon-error_svg__fill"})));var qO;function wS(){return wS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},wS.apply(null,arguments)}const eoe=e=>M.createElement("svg",wS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),qO||(qO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M48 8a2.667 2.667 0 0 1 2.649 2.356l.018.31V32l-.001.027v21.306a2.667 2.667 0 0 1-5.315.311l-.018-.31V34.665H19.772l6.114 6.115a2.67 2.67 0 0 1 .221 3.52l-.221.251a2.666 2.666 0 0 1-3.52.222l-.252-.222-10.666-10.666a2.666 2.666 0 0 1-.222-3.52l.222-.252 10.666-10.666a2.666 2.666 0 0 1 3.993 3.52l-.221.251-6.113 6.114h25.56V10.667A2.667 2.667 0 0 1 48 8",className:"icon-expand_svg__fill"})));var KO;function RS(){return RS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},RS.apply(null,arguments)}const toe=e=>M.createElement("svg",RS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),KO||(KO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M30.52 12.51c1.685-1.226 4.139-.103 4.139 1.893v35.194c0 1.996-2.454 3.119-4.138 1.893l-12.45-9.909H7.898c-1.416 0-2.564-1.074-2.564-2.399V24.818c0-1.325 1.148-2.4 2.564-2.4h10.175zm20.427.163c10.293 10.667 10.293 27.987 0 38.654a2.137 2.137 0 0 1-3.156-.047c-.86-.942-.84-2.448.044-3.364 8.49-8.799 8.49-23.033 0-31.832-.884-.916-.904-2.422-.044-3.364a2.137 2.137 0 0 1 3.156-.047m-8.492 8.799c5.597 5.8 5.597 15.231 0 21.031a2.136 2.136 0 0 1-3.156-.046c-.86-.942-.84-2.448.044-3.364 3.794-3.932 3.794-10.279 0-14.211-.884-.916-.904-2.422-.044-3.363a2.136 2.136 0 0 1 3.156-.047",className:"icon-file-audio_svg__fill"})));var WO;function OS(){return OS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},OS.apply(null,arguments)}const noe=e=>M.createElement("svg",OS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),WO||(WO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M39.414 6.4a2.4 2.4 0 0 1 1.71.701l12.642 12.75c.407.41.634.953.634 1.516v29.765c0 3.542-4.342 6.468-8 6.468H16.16c-3.658 0-6.4-2.926-6.4-6.468L9.6 12.868c0-3.542 2.902-6.468 6.56-6.468zm3.331 35.173-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16m0-8.533-21.49.027-.147.005c-1.066.08-1.908 1.014-1.908 2.155 0 1.193.92 2.16 2.055 2.16l21.49-.027.147-.005c1.066-.08 1.908-1.014 1.908-2.155 0-1.193-.92-2.16-2.055-2.16m-11.807-8.507h-9.6l-.153.006a2.15 2.15 0 0 0-1.985 2.154c0 1.193.957 2.16 2.138 2.16h9.6l.152-.005a2.15 2.15 0 0 0 1.985-2.155c0-1.193-.957-2.16-2.137-2.16",className:"icon-file-document_svg__fill"})));var YO;function DS(){return DS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},DS.apply(null,arguments)}const roe=e=>M.createElement("svg",DS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),YO||(YO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m41.636 3.226.251.222a2.67 2.67 0 0 1 .222 3.52l-.222.251-7.219 7.218V27.38l11.209-6.472 2.643-9.86a2.667 2.667 0 0 1 5.218 1.051l-.067.329-2.237 8.35 8.352 2.24a2.67 2.67 0 0 1 1.952 2.938l-.067.328a2.67 2.67 0 0 1-2.937 1.952l-.329-.066-9.861-2.643L37.334 32l11.209 6.47 9.862-2.64.329-.067a2.67 2.67 0 0 1 2.937 1.952l.067.328a2.67 2.67 0 0 1-1.952 2.938l-8.353 2.237 2.238 8.353.067.329a2.666 2.666 0 0 1-5.218 1.052l-2.643-9.861-11.209-6.472v12.944l7.219 7.218a2.667 2.667 0 0 1-3.52 3.993l-.251-.222L32 54.437l-6.114 6.115a2.666 2.666 0 0 1-3.52.222l-.251-.222a2.666 2.666 0 0 1-.222-3.52l.222-.251 7.218-7.22V36.62l-11.209 6.47-2.642 9.863a2.666 2.666 0 0 1-5.218-1.052l.067-.329 2.236-8.351-8.35-2.24a2.665 2.665 0 0 1-1.953-2.937l.067-.328a2.665 2.665 0 0 1 2.937-1.952l.329.066 9.861 2.642L26.667 32l-11.209-6.472-9.86 2.643-.329.066a2.665 2.665 0 0 1-2.937-1.952l-.067-.328a2.67 2.67 0 0 1 1.952-2.938l8.35-2.239-2.235-8.351-.067-.329a2.667 2.667 0 0 1 5.218-1.052l2.642 9.862 11.209 6.47V14.439L22.116 7.22a2.665 2.665 0 0 1 0-3.771 2.666 2.666 0 0 1 3.52-.222l.251.222 6.114 6.112 6.115-6.112a2.666 2.666 0 0 1 3.52-.222z",className:"icon-freeze_svg__fill"})));var QO;function US(){return US=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},US.apply(null,arguments)}const ioe=e=>M.createElement("svg",US({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),QO||(QO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M16.664 45.333q3.233 0 5.89-.953 2.658-.954 4.113-2.683V31.34h-10.29v3.94h4.902v4.474q-1.292 1.284-4.327 1.283-3.017 0-4.58-2.085-1.561-2.085-1.562-6.168v-1.657q.018-4.047 1.455-6.097t4.184-2.05q2.155 0 3.385 1.034t1.59 3.262h5.243q-.486-4.206-3.107-6.408t-7.273-2.201q-3.34 0-5.827 1.506t-3.807 4.35q-1.32 2.843-1.32 6.728v1.765q.036 3.78 1.428 6.578 1.392 2.797 3.95 4.269 2.56 1.47 5.953 1.47m20.67 0V18.667H32v26.666h5.333zm10.396 0V34.436h9.721v-4.432H47.73v-6.887h10.937v-4.45h-16v26.666z",className:"icon-gif_svg__fill"})));var XO;function LS(){return LS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},LS.apply(null,arguments)}const aoe=e=>M.createElement("svg",LS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),XO||(XO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32s10.745 24 24 24 24-10.745 24-24S45.255 8 32 8m1.667 21.333a1 1 0 0 1 1 1v14a1 1 0 0 1-1 1h-3.334a1 1 0 0 1-1-1v-14a1 1 0 0 1 1-1zm-1.667-8a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334",className:"icon-info_svg__fill"})));var ZO;function kS(){return kS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},kS.apply(null,arguments)}const soe=e=>M.createElement("svg",kS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),ZO||(ZO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 5.333a2.667 2.667 0 0 1 .311 5.316l-.311.018H10.667a2.67 2.67 0 0 0-2.65 2.355L8 13.333v37.334a2.667 2.667 0 0 0 2.356 2.648l.31.018H32a2.667 2.667 0 0 1 .311 5.316l-.311.018H10.667a8 8 0 0 1-7.987-7.53l-.013-.47V13.333a8 8 0 0 1 7.53-7.986l.47-.014zm17.634 13.893.252.222 10.666 10.666a2.666 2.666 0 0 1 .222 3.52l-.222.252-10.666 10.666a2.666 2.666 0 0 1-3.993-3.52l.221-.251 4.78-4.782L20 36a2.667 2.667 0 0 1-.311-5.315l.311-.018h33.56l-7.446-7.448a2.67 2.67 0 0 1-.221-3.52l.221-.251a2.666 2.666 0 0 1 3.52-.222",className:"icon-leave_svg__fill"})));var JO;function xS(){return xS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},xS.apply(null,arguments)}const ooe=e=>M.createElement("svg",xS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),JO||(JO=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M34.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L42.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H13.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.316.311L0 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013zM54 37.765a13.33 13.33 0 0 1 9.986 12.297l.014.605V56a2.667 2.667 0 0 1-5.315.311L58.667 56v-5.331a8 8 0 0 0-6-7.74A2.667 2.667 0 1 1 54 37.765M24 5.333c7.364 0 13.333 5.97 13.333 13.334S31.363 32 24 32s-13.333-5.97-13.333-13.333S16.637 5.333 24 5.333m19.328.43a13.333 13.333 0 0 1 0 25.834 2.667 2.667 0 1 1-1.323-5.167 8 8 0 0 0 0-15.5 2.667 2.667 0 1 1 1.323-5.167M24 10.667a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-members_svg__fill"})));var e3;function PS(){return PS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},PS.apply(null,arguments)}const loe=e=>M.createElement("svg",PS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),e3||(e3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333c-4.455 0-8.679-.993-12.461-2.77l-1.753.58q-8.947 2.868-12.504 1.981-4.198-1.047-1.657-3.663 1.757-2.094 2.928-5.234.934-2.502-.737-7A29.15 29.15 0 0 1 2.666 32C2.667 15.8 15.8 2.667 32 2.667M32 8C18.745 8 8 18.745 8 32c0 3.5.747 6.88 2.168 9.978l.405.837.137.271.106.285c1.517 4.085 1.89 7.622.734 10.72l-.382.972-.192.433.235-.05a62 62 0 0 0 4.886-1.363l1.721-.568 2.04-.696 1.95.917A23.9 23.9 0 0 0 32 56c13.255 0 24-10.745 24-24S45.255 8 32 8M18.667 29.333a2.667 2.667 0 1 1-.001 5.333 2.667 2.667 0 0 1 .001-5.333m13.333 0a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334m13.333 0a2.667 2.667 0 1 1 0 5.334 2.667 2.667 0 0 1 0-5.334",className:"icon-message_svg__fill"})));var t3;function FS(){return FS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},FS.apply(null,arguments)}const uoe=e=>M.createElement("svg",FS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),t3||(t3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M18.667 34.667a2.667 2.667 0 0 1 .311 5.316l-.311.017h-5.334v16a2.667 2.667 0 0 1-5.316.311L8 56V40H2.667a2.667 2.667 0 0 1-.311-5.315l.31-.018h16zM32 29.333a2.667 2.667 0 0 1 2.649 2.356l.018.311v24a2.667 2.667 0 0 1-5.316.311L29.333 56V32A2.667 2.667 0 0 1 32 29.333M61.333 40a2.667 2.667 0 0 1 .311 5.315l-.31.018h-5.335L56 56a2.667 2.667 0 0 1-5.315.311L50.667 56l-.001-10.668-5.333.001a2.667 2.667 0 0 1-.311-5.316l.311-.017zm-8-34.667a2.67 2.67 0 0 1 2.65 2.356L56 8v24a2.667 2.667 0 0 1-5.315.311L50.667 32V8a2.667 2.667 0 0 1 2.666-2.667m-42.666 0a2.667 2.667 0 0 1 2.648 2.356l.018.311v18.667a2.667 2.667 0 0 1-5.316.311L8 26.667V8a2.667 2.667 0 0 1 2.667-2.667m21.333 0a2.667 2.667 0 0 1 2.649 2.356l.018.311-.001 10.666H40a2.668 2.668 0 0 1 .311 5.317L40 24H24a2.667 2.667 0 0 1-.311-5.315l.311-.018h5.333V8A2.667 2.667 0 0 1 32 5.333",className:"icon-moderations_svg__fill"})));var n3;function BS(){return BS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},BS.apply(null,arguments)}const coe=e=>M.createElement("svg",BS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),n3||(n3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 45.333a5.333 5.333 0 1 1 0 10.666 5.333 5.333 0 0 1 0-10.666M32 28a5.333 5.333 0 1 1 0 10.668A5.333 5.333 0 0 1 32 28m0-17.333c2.946 0 5.333 2.387 5.333 5.333S34.946 21.333 32 21.333 26.667 18.946 26.667 16s2.387-5.333 5.333-5.333",className:"icon-more_svg__fill"})));var r3;function HS(){return HS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},HS.apply(null,arguments)}const doe=e=>M.createElement("svg",HS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),r3||(r3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m55.62 19.616.067.123A26.55 26.55 0 0 1 58.667 32c0 4.326-1.03 8.41-2.864 12.025q-1.518 4.089-.67 6.363 1.066 2.855 2.662 4.758 2.31 2.379-1.506 3.33-3.135.782-10.879-1.646l-.488-.155-1.594-.527A26.6 26.6 0 0 1 32 58.667a26.55 26.55 0 0 1-12.326-3.014l-.059-.03 4-4A21.2 21.2 0 0 0 32 53.333c2.993 0 5.89-.614 8.562-1.786l.498-.226 1.925-.905 3.613 1.196.695.219q1.093.337 2.054.595l.472.125.485.121-.167-.42-.2-.594c-.814-2.685-.484-5.681.713-9.065l.154-.425.106-.284.528-1.084a21.2 21.2 0 0 0 1.895-8.8 21.2 21.2 0 0 0-1.71-8.385zm2.266-13.502a2.67 2.67 0 0 1 .221 3.52l-.221.252-48 48a2.668 2.668 0 0 1-3.993-3.52l.221-.252 5.238-5.237a26.56 26.56 0 0 1-6.015-16.412L5.333 32C5.333 17.272 17.273 5.333 32 5.333a26.55 26.55 0 0 1 16.877 6.02l5.237-5.239a2.67 2.67 0 0 1 3.772 0M32 10.667c-11.782 0-21.333 9.55-21.333 21.333 0 4.836 1.614 9.401 4.48 13.084l29.936-29.938A21.25 21.25 0 0 0 32 10.666z",className:"icon-mute_svg__fill"})));var i3;function GS(){return GS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},GS.apply(null,arguments)}const hoe=e=>M.createElement("svg",GS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),i3||(i3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 0 1-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017zM32 2.667c11.56 0 20.972 9.194 21.323 20.669l.01.664v13.333a5.334 5.334 0 0 0 4.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H5.333l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 0 0 4.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333M32 8c-8.636 0-15.674 6.842-15.989 15.4L16 24v13.333c0 1.562-.336 3.046-.939 4.383l-.275.564-.218.387h34.861l-.215-.387a10.6 10.6 0 0 1-1.146-3.74l-.055-.674-.013-.533V24c0-8.837-7.163-16-16-16",className:"icon-notifications_svg__fill"})));var a3;function $S(){return $S=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},$S.apply(null,arguments)}const foe=e=>M.createElement("svg",$S({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),a3||(a3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M36.613 53.333c2.056 0 3.338 2.227 2.307 4.005a8 8 0 0 1-13.84 0c-.98-1.689.129-3.783 2.004-3.988l.303-.017zM32 2.667c7.173 0 13.52 3.54 17.387 8.97l5.686-5.687a2.105 2.105 0 0 1 2.85-.117l.127.117a2.105 2.105 0 0 1 0 2.977L8.927 58.05c-.78.781-2.023.82-2.85.117l-.127-.117a2.105 2.105 0 0 1 0-2.977L13.023 48h-7.69l-.355-.019c-3.082-.33-3.082-4.965 0-5.296l.753-.033a5.335 5.335 0 0 0 4.92-4.9l.016-.419V24c0-11.782 9.55-21.333 21.333-21.333m20.85 16.795c.271 1.253.433 2.548.473 3.874l.01.664v13.333a5.334 5.334 0 0 0 4.936 5.319l.753.033c2.963.318 3.077 4.616.342 5.24l-.342.056-.355.019H24.31z",className:"icon-notifications-off-filled_svg__fill"})));var s3;function VS(){return VS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},VS.apply(null,arguments)}const voe=e=>M.createElement("svg",VS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),s3||(s3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M29.83 6.45a2.667 2.667 0 0 1 4.34 0l11.697 16.374L57 13.918c1.88-1.504 4.573.054 4.32 2.35l-.047.29-8 37.334A2.666 2.666 0 0 1 50.666 56H13.333a2.666 2.666 0 0 1-2.607-2.108l-8-37.333c-.525-2.452 2.315-4.207 4.273-2.641l11.132 8.906zM32 12.587l-11.163 15.63a2.667 2.667 0 0 1-3.836.532l-7.497-5.997 5.984 27.915h33.021l5.984-27.915L47 28.749a2.667 2.667 0 0 1-3.632-.281l-.204-.251zM32 32a5.333 5.333 0 1 1 0 10.668A5.333 5.333 0 0 1 32 32",className:"icon-operator_svg__fill"})));var o3;function zS(){return zS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},zS.apply(null,arguments)}const poe=e=>M.createElement("svg",zS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),o3||(o3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M50.667 5.333a8 8 0 0 1 8 8v37.334a8 8 0 0 1-8 8H13.333a8 8 0 0 1-8-8V13.333a8 8 0 0 1 8-8zm-8 25.107L19.77 53.332l30.896.001a2.667 2.667 0 0 0 2.661-2.498l.005-.168v-9.564L42.666 30.44zm8-19.773H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334c0 1.143.72 2.119 1.731 2.498L40.781 24.78a2.67 2.67 0 0 1 3.52-.222l.251.222 8.78 8.78.001-20.228a2.667 2.667 0 0 0-2.498-2.661zm-28 5.333a6.666 6.666 0 1 1 0 13.333 6.666 6.666 0 0 1 0-13.333m0 5.333a1.334 1.334 0 1 0 0 2.667 1.334 1.334 0 0 0 0-2.667",className:"icon-photo_svg__fill"})));var l3;function jS(){return jS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},jS.apply(null,arguments)}const moe=e=>M.createElement("svg",jS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),l3||(l3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M51.908 34.75c1.9-1.233 1.896-3.26.013-4.514L19.376 8.577c-1.893-1.26-3.404-.391-3.376 1.968l.522 42.888c.028 2.347 1.596 3.247 3.493 2.016z",className:"icon-play_svg__fill"})));var u3;function qS(){return qS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},qS.apply(null,arguments)}const _oe=e=>M.createElement("svg",qS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),u3||(u3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M34.667 29.333h18.666c3.556 0 3.556 5.334 0 5.334H34.667v18.666c0 3.556-5.334 3.556-5.334 0V34.667H10.667c-3.556 0-3.556-5.334 0-5.334h18.666V10.667c0-3.556 5.334-3.556 5.334 0z",className:"icon-plus_svg__fill"})));var c3;function KS(){return KS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},KS.apply(null,arguments)}const goe=e=>M.createElement("svg",KS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),c3||(c3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 61.333C15.8 61.333 2.667 48.2 2.667 32S15.8 2.667 32 2.667 61.333 15.8 61.333 32 48.2 61.333 32 61.333M32 56c13.255 0 24-10.745 24-24S45.255 8 32 8 8 18.745 8 32s10.745 24 24 24m2.213-18.63a2.667 2.667 0 1 1-5.333 0v-2.69c0-1.148.734-2.168 1.823-2.53.173-.058.532-.195 1.01-.407.809-.36 1.616-.79 2.354-1.282 1.835-1.223 2.813-2.528 2.813-3.786a5.333 5.333 0 0 0-10.364-1.777 2.667 2.667 0 0 1-5.032-1.77 10.668 10.668 0 0 1 20.729 3.551c0 3.413-2.022 6.109-5.187 8.22a21 21 0 0 1-2.813 1.578zm-5.333 7.523a2.667 2.667 0 1 1 5.333 0v.44a2.667 2.667 0 1 1-5.333 0v-.44",className:"icon-question_svg__fill"})));var d3;function WS(){return WS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},WS.apply(null,arguments)}const Eoe=e=>M.createElement("svg",WS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),d3||(d3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"m46.14 14.43.562.537 6.631 6.167v-7.8a2.67 2.67 0 0 1 2.356-2.65l.311-.017a2.667 2.667 0 0 1 2.649 2.355l.018.311v16a2.67 2.67 0 0 1-2.356 2.65L56 32H40a2.667 2.667 0 0 1-.311-5.315l.311-.018h11.452l-8.44-7.85c-5.964-5.893-15.168-7.182-22.563-3.156-7.38 4.018-11.172 12.357-9.314 20.455 1.859 8.107 8.935 14.032 17.362 14.518 8.43.487 16.162-4.585 18.967-12.426a2.667 2.667 0 0 1 5.022 1.797C48.88 50.082 38.973 56.582 28.19 55.959c-10.785-.623-19.862-8.222-22.254-18.65C3.542 26.872 8.426 16.135 17.9 10.977c9.227-5.024 20.65-3.579 28.241 3.453z",className:"icon-refresh_svg__fill"})));var h3;function YS(){return YS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},YS.apply(null,arguments)}const yoe=e=>M.createElement("svg",YS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),h3||(h3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667C48.2 2.667 61.333 15.8 61.333 32S48.2 61.333 32 61.333 2.667 48.2 2.667 32 15.8 2.667 32 2.667m9.886 19.447a2.67 2.67 0 0 0-3.772 0L32 28.23l-6.114-6.115-.134-.124a2.667 2.667 0 0 0-3.638.124l-.124.134a2.667 2.667 0 0 0 .124 3.638L28.23 32l-6.115 6.114-.124.134a2.667 2.667 0 0 0 .124 3.638l.134.124a2.667 2.667 0 0 0 3.638-.124L32 35.77l6.114 6.115.134.124a2.667 2.667 0 0 0 3.638-.124l.124-.134a2.667 2.667 0 0 0-.124-3.638L35.77 32l6.115-6.114.124-.134a2.667 2.667 0 0 0-.124-3.638z",className:"icon-remove_svg__fill"})));var f3;function QS(){return QS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},QS.apply(null,arguments)}const boe=e=>M.createElement("svg",QS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 12 12"},e),f3||(f3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M11.774 10.5c.062 0 .12-.025.164-.07a.22.22 0 0 0 .062-.164c-.069-1.447-.495-2.678-1.268-3.66-.618-.785-1.455-1.409-2.49-1.855a9.3 9.3 0 0 0-2.406-.655 10 10 0 0 0-.862-.078V2.225a.23.23 0 0 0-.128-.203.23.23 0 0 0-.24.028L.084 5.692A.22.22 0 0 0 0 5.865c0 .068.03.132.082.175l4.523 3.737c.067.056.16.068.24.03a.22.22 0 0 0 .13-.202v-1.95c1.134-.08 2.178.003 3.107.25a6.4 6.4 0 0 1 2.087.96c1.018.724 1.398 1.5 1.401 1.507a.23.23 0 0 0 .204.128",className:"icon-reply-filled_svg__fill"})));var v3;function XS(){return XS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},XS.apply(null,arguments)}const Coe=e=>M.createElement("svg",XS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),v3||(v3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M26.667 48C14.885 48 5.333 38.449 5.333 26.667S14.885 5.333 26.667 5.333 48 14.885 48 26.667c0 4.93-1.672 9.469-4.48 13.081l13.67 13.67a2.668 2.668 0 0 1-3.772 3.772l-13.67-13.67A21.24 21.24 0 0 1 26.667 48m0-5.333c8.836 0 16-7.164 16-16s-7.164-16-16-16-16 7.163-16 16 7.163 16 16 16",className:"icon-search_svg__fill"})));var p3;function ZS(){return ZS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},ZS.apply(null,arguments)}const Soe=e=>M.createElement("svg",ZS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),p3||(p3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M59.795 29.43 7.329 2.979C4.691 1.802 1.76 4.153 2.932 6.798l6.925 18.609a2 2 0 0 0 1.544 1.275l32.273 5.394L11.4 37.47a2 2 0 0 0-1.544 1.275L2.932 57.353c-.879 2.645 1.76 4.997 4.397 3.527l52.466-26.453c2.051-.882 2.051-3.82 0-4.996z",className:"icon-send_svg__fill"})));var m3;function JS(){return JS=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},JS.apply(null,arguments)}const Toe=e=>M.createElement("svg",JS({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),m3||(m3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 2.667A5.33 5.33 0 0 1 37.333 8v.24A4.4 4.4 0 0 0 40 12.267a4.4 4.4 0 0 0 4.853-.88l.16-.16a5.33 5.33 0 0 1 7.547 0 5.333 5.333 0 0 1 0 7.546l-.16.16a4.4 4.4 0 0 0-.88 4.854V24a4.4 4.4 0 0 0 4.027 2.667H56c2.946 0 5.333 2.387 5.333 5.333S58.946 37.333 56 37.333h-.24A4.4 4.4 0 0 0 51.733 40a4.4 4.4 0 0 0 .88 4.853l.16.16a5.33 5.33 0 0 1 0 7.547 5.333 5.333 0 0 1-7.546 0l-.16-.16a4.4 4.4 0 0 0-4.854-.88 4.4 4.4 0 0 0-2.666 4.027V56a5.333 5.333 0 0 1-10.667 0v-.24A4.4 4.4 0 0 0 24 51.733a4.4 4.4 0 0 0-4.853.88l-.16.16a5.33 5.33 0 0 1-7.547 0 5.333 5.333 0 0 1 0-7.546l.16-.16a4.4 4.4 0 0 0 .88-4.854 4.4 4.4 0 0 0-4.027-2.666H8A5.333 5.333 0 0 1 8 26.88h.24A4.4 4.4 0 0 0 12.267 24a4.4 4.4 0 0 0-.88-4.853l-.16-.16a5.33 5.33 0 0 1 0-7.547 5.333 5.333 0 0 1 7.546 0l.16.16a4.4 4.4 0 0 0 4.854.88H24a4.4 4.4 0 0 0 2.667-4.027V8A5.33 5.33 0 0 1 32 2.667M32 24a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-settings-filled_svg__fill"})));var _3;function eT(){return eT=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},eT.apply(null,arguments)}const Noe=e=>M.createElement("svg",eT({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 32 32"},e),_3||(_3=M.createElement("path",{d:"M21.943 24.39a1.333 1.333 0 0 1-1.886 1.886l-9.333-9.333a1.333 1.333 0 0 1 0-1.886l9.333-9.333a1.333 1.333 0 1 1 1.886 1.885L13.553 16z",className:"icon-slide-left_svg__fill",clipRule:"evenodd"})));var g3;function tT(){return tT=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},tT.apply(null,arguments)}const Ioe=e=>M.createElement("svg",tT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),g3||(g3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M32 61.333C48.2 61.333 61.333 48.2 61.333 32S48.2 2.667 32 2.667 2.667 15.8 2.667 32a2.838 2.838 0 1 0 5.678 0C8.344 18.935 18.934 8.344 32 8.344c13.065 0 23.656 10.591 23.656 23.656S45.065 55.656 32 55.656a2.838 2.838 0 1 0 0 5.677",className:"icon-spinner_svg__fill"})));var E3;function nT(){return nT=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},nT.apply(null,arguments)}const Moe=e=>M.createElement("svg",nT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),E3||(E3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M36.889 43.013c6.608 0 12.121 4.685 12.43 10.734l.014.537V58a2.667 2.667 0 0 1-5.316.311L44 58v-3.716c0-3.07-2.87-5.718-6.636-5.925l-.475-.013H27.11c-3.838 0-6.86 2.525-7.096 5.557l-.015.381V58a2.667 2.667 0 0 1-5.315.311L14.667 58v-3.716c0-6.126 5.324-10.986 11.864-11.26l.58-.011zm18.578-17.291q.401 0 .784.118c4.632 1.426 7.518 4.801 7.736 9.688l.013.594v12.8a2.667 2.667 0 0 1-5.315.311l-.018-.311V36.124c-.002-2.595-1.163-4.171-3.528-5.034l-.104-.037-2.502.002a2.667 2.667 0 0 1-2.648-2.356l-.018-.31a2.67 2.67 0 0 1 2.355-2.65l.311-.017zm-44 0 .31.018a2.666 2.666 0 0 1 2.356 2.648l-.018.311a2.666 2.666 0 0 1-2.648 2.356l-2.51-.002-.119.042c-2.246.85-3.503 2.574-3.505 5.147v12.68l-.018.31A2.666 2.666 0 0 1 0 48.922V36.24l.014-.591c.225-4.874 3.203-8.415 7.712-9.809q.384-.117.788-.118zM32 19.958c5.512 0 10 4.409 10 9.871s-4.488 9.872-10 9.872-10-4.41-10-9.872 4.488-9.871 10-9.871m0 5.333c-2.588 0-4.667 2.043-4.667 4.538s2.08 4.538 4.667 4.538c2.588 0 4.667-2.042 4.667-4.538 0-2.495-2.08-4.538-4.667-4.538M17.333 2.667c5.513 0 10 4.409 10 9.871s-4.487 9.871-10 9.871c-5.512 0-10-4.409-10-9.871s4.488-9.871 10-9.871m29.334 0c5.512 0 10 4.409 10 9.871s-4.488 9.871-10 9.871c-5.513 0-10-4.409-10-9.871s4.487-9.871 10-9.871M17.333 8c-2.587 0-4.666 2.042-4.666 4.538s2.079 4.538 4.666 4.538S22 15.034 22 12.538 19.921 8 17.333 8m29.334 0C44.079 8 42 10.042 42 12.538s2.079 4.538 4.667 4.538 4.666-2.042 4.666-4.538S49.254 8 46.667 8",className:"icon-supergroup_svg__fill"})));var y3,b3;function rT(){return rT=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},rT.apply(null,arguments)}const Aoe=e=>M.createElement("svg",rT({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 64 64"},e),y3||(y3=M.createElement("path",{d:"M38.824 25.895a2.95 2.95 0 0 1 4.16-.074L57.1 39.378a2.92 2.92 0 0 1 .002 4.213L42.985 57.177a2.95 2.95 0 0 1-4.158-.07 2.92 2.92 0 0 1 .07-4.14l11.928-11.48-11.926-11.451a2.92 2.92 0 0 1-.075-4.14",className:"icon-thread_svg__fill",clipRule:"evenodd"})),b3||(b3=M.createElement("path",{d:"M8.866 6c1.583 0 2.866 1.216 2.866 2.716V25.5c0 7.672 6.846 14.068 15.475 14.068h22.927c1.583 0 2.866 1.216 2.866 2.716S51.717 45 50.134 45H27.207C15.604 45 6 36.35 6 25.5V8.716C6 7.216 7.283 6 8.866 6",className:"icon-thread_svg__fill",clipRule:"evenodd"})));var C3;function iT(){return iT=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},iT.apply(null,arguments)}const woe=e=>M.createElement("svg",iT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),C3||(C3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M34.667 5.333a2.667 2.667 0 0 1 0 5.334H13.333a2.667 2.667 0 0 0-2.666 2.666v37.334c0 1.143.72 2.118 1.73 2.497l28.384-28.383a2.667 2.667 0 0 1 3.771 0l8.781 8.78v-4.228a2.667 2.667 0 0 1 2.498-2.661l.169-.005a2.667 2.667 0 0 1 2.667 2.666v21.334a8 8 0 0 1-8 8H13.33a8 8 0 0 1-7.998-8V13.333a8 8 0 0 1 8-8zm8 25.105L19.77 53.333h30.897a2.667 2.667 0 0 0 2.661-2.498l.005-.168v-9.563zM22.667 16a6.666 6.666 0 1 1 0 13.333 6.666 6.666 0 0 1 0-13.333m0 5.333a1.334 1.334 0 1 0 0 2.667 1.334 1.334 0 0 0 0-2.667M56.78 3.448a2.665 2.665 0 0 1 3.771 0 2.665 2.665 0 0 1 0 3.771l-4.782 4.78 4.782 4.782c.998.998 1.04 2.59.125 3.638l-.125.133a2.665 2.665 0 0 1-3.771 0l-4.782-4.781-4.78 4.781a2.667 2.667 0 0 1-3.638.125l-.133-.125a2.665 2.665 0 0 1 0-3.771L48.228 12l-4.78-4.781a2.667 2.667 0 0 1-.125-3.638l.125-.133a2.665 2.665 0 0 1 3.771 0l4.78 4.78z",className:"icon-thumbnail-none_svg__fill"})));var S3;function aT(){return aT=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},aT.apply(null,arguments)}const Roe=e=>M.createElement("svg",aT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},e),S3||(S3=M.createElement("g",{fill:"none",fillRule:"evenodd"},M.createElement("rect",{width:80,height:40,x:4,y:4,fill:"#000",className:"icon-toggleoff_svg__fill",rx:20}),M.createElement("circle",{cx:24,cy:24,r:12,fill:"#FFF"}),M.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992z"}),M.createElement("path",{fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0m0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4z",className:"icon-toggleoff_svg__fill"}))));var T3;function sT(){return sT=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},sT.apply(null,arguments)}const Ooe=e=>M.createElement("svg",sT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 88 48"},e),T3||(T3=M.createElement("g",{fill:"none",fillRule:"evenodd"},M.createElement("rect",{width:80,height:40,x:4,y:4,fill:"#000",className:"icon-toggleon_svg__fill",rx:20}),M.createElement("circle",{cx:64,cy:24,r:12,fill:"#FFF"}),M.createElement("path",{fill:"#FFF",d:"M64 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4zm0 2H24C14.059 6 6 14.059 6 24c0 9.764 7.774 17.712 17.47 17.992L24 42h40c9.941 0 18-8.059 18-18 0-9.764-7.774-17.712-17.47-17.992z"}),M.createElement("path",{fill:"#000",d:"M64 0H24C10.745 0 0 10.745 0 24s10.745 24 24 24h40c13.255 0 24-10.745 24-24S77.255 0 64 0m0 4c11.046 0 20 8.954 20 20s-8.954 20-20 20H24C12.954 44 4 35.046 4 24S12.954 4 24 4z",className:"icon-toggleon_svg__fill"}))));var N3;function oT(){return oT=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},oT.apply(null,arguments)}const Doe=e=>M.createElement("svg",oT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),N3||(N3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M42.667 37.333c7.17 0 13.018 5.66 13.32 12.755l.013.579V56a2.667 2.667 0 0 1-5.315.311L50.667 56v-5.333c0-4.26-3.33-7.743-7.53-7.987l-.47-.013H21.333a8 8 0 0 0-7.986 7.53l-.014.47V56a2.667 2.667 0 0 1-5.316.311L8 56v-5.333c0-7.17 5.66-13.019 12.755-13.321l.578-.013zM32 5.333c7.364 0 13.333 5.97 13.333 13.334S39.363 32 32 32s-13.333-5.97-13.333-13.333S24.637 5.333 32 5.333m0 5.334a8 8 0 1 0 0 16 8 8 0 0 0 0-16",className:"icon-user_svg__fill"})));var I3;function lT(){return lT=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},lT.apply(null,arguments)}const Uoe=e=>M.createElement("svg",lT({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),I3||(I3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M12.346 5.336v-.001c.405-.523 1.182-.524 1.58-.037.162.2.25.443.25.69v3.678c0 .518.42.938.938.938H18.6c.359 0 .7.179.911.488l.001.001.369.548.003.004c.174.256.226.583.134.895l-1.532 5.316c-.131.459-.559.782-1.044.782h-7.075c-.3 0-.593-.127-.8-.345l-1.13-1.222v-6.647zm-4.73 3.078 3.245-4.223.002-.002c1.125-1.456 3.339-1.521 4.517-.075.421.52.671 1.177.671 1.874v2.74h2.55c.99 0 1.908.496 2.462 1.31l.002.004.368.547.002.002a2.93 2.93 0 0 1 .382 2.475v.003l-1.528 5.302a2.96 2.96 0 0 1-2.847 2.142h-7.075a2.99 2.99 0 0 1-2.166-.935l-.007-.007-.066-.072a2.13 2.13 0 0 1-1.821 1.025H4.192a2.13 2.13 0 0 1-2.13-2.13v-8.3a2.13 2.13 0 0 1 2.13-2.13h2.115c.493 0 .948.168 1.31.45m-3.678 1.68c0-.141.114-.255.254-.255h2.115c.14 0 .254.114.254.255v8.3c0 .14-.114.255-.254.255H4.192a.255.255 0 0 1-.255-.255z",clipRule:"evenodd"})));var M3;function uT(){return uT=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},uT.apply(null,arguments)}const Loe=e=>M.createElement("svg",uT({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),M3||(M3=M.createElement("path",{fill:"#000",fillRule:"evenodd",d:"M11.654 18.664v.001c-.405.523-1.182.524-1.58.037-.162-.2-.25-.444-.25-.69v-3.678a.94.94 0 0 0-.938-.938H5.4c-.359 0-.7-.179-.911-.488l-.001-.001-.369-.548-.003-.004a1.05 1.05 0 0 1-.134-.895l1.532-5.316c.131-.459.559-.782 1.044-.782h7.075c.3 0 .593.127.8.345l1.13 1.222v6.647zm4.73-3.078-3.245 4.223-.002.002c-1.125 1.456-3.339 1.521-4.517.075a2.98 2.98 0 0 1-.671-1.874v-2.74h-2.55c-.99 0-1.908-.496-2.462-1.31l-.002-.004-.368-.547-.002-.002a2.93 2.93 0 0 1-.382-2.475v-.003L3.711 5.63a2.96 2.96 0 0 1 2.847-2.142h7.075c.823 0 1.608.345 2.166.935l.007.007.066.072a2.13 2.13 0 0 1 1.821-1.025h2.115a2.13 2.13 0 0 1 2.13 2.13v8.3a2.13 2.13 0 0 1-2.13 2.13h-2.115a2.12 2.12 0 0 1-1.31-.45m3.678-1.68c0 .141-.114.255-.254.255h-2.115a.255.255 0 0 1-.255-.255v-8.3c0-.14.115-.255.255-.255h2.115c.14 0 .255.114.255.255z",clipRule:"evenodd"})));var A3;function cT(){return cT=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},cT.apply(null,arguments)}const koe=e=>M.createElement("svg",cT({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 64 64"},e),A3||(A3=M.createElement("g",{fill:"#000",fillRule:"evenodd"},M.createElement("path",{d:"M40 5.333C38.835 6.879 37.003 8.33 36.266 9.6H12c-.597 0-1.067.469-1.067 1.067v36.458l2.863-4.458H52c.597 0 1.067-.469 1.067-1.067V26.398c1.917-.402 3.779-1.178 5.333-2.398v17.6c0 3.542-2.891 6.4-6.4 6.4H16L5.333 58.667V12c0-3.542 2.891-6.4 6.4-6.4H40Z",className:"icon-mark-as-unread_svg__fill"}),M.createElement("circle",{cx:50.667,cy:13.333,r:9.333,className:"icon-mark-as-unread_svg__fill"}))));var w3;function dT(){return dT=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)({}).hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},dT.apply(null,arguments)}const xoe=e=>M.createElement("svg",dT({xmlns:"http://www.w3.org/2000/svg",width:14,height:16,fill:"none"},e),w3||(w3=M.createElement("path",{fill:"#742DDD",fillRule:"evenodd",d:"M11.496 4.504c.21.21.226.541.048.77l-.048.055L7.825 9l3.671 3.672a.583.583 0 0 1-.77.873l-.055-.048-3.67-3.671-3.672 3.67a.583.583 0 0 1-.873-.77l.048-.054L6.175 9l-3.67-3.67a.583.583 0 0 1 .77-.874l.054.048L7 8.174l3.671-3.67a.583.583 0 0 1 .825 0",clipRule:"evenodd"})));function Poe(e){switch(e){case Me.ADD:return m.createElement(wse,null);case Me.ARROW_LEFT:return m.createElement(Rse,null);case Me.ATTACH:return m.createElement(Ose,null);case Me.AUDIO_ON_LINED:return m.createElement(Dse,null);case Me.BAN:return m.createElement(Use,null);case Me.BROADCAST:return m.createElement(Lse,null);case Me.CAMERA:return m.createElement(kse,null);case Me.CHANNELS:return m.createElement(xse,null);case Me.CHAT:return m.createElement(Pse,null);case Me.CHAT_FILLED:return m.createElement(Fse,null);case Me.CHEVRON_DOWN:return m.createElement(Bse,null);case Me.CHEVRON_RIGHT:return m.createElement(Hse,null);case Me.CLOSE:return m.createElement(Gse,null);case Me.COLLAPSE:return m.createElement($se,null);case Me.COPY:return m.createElement(Vse,null);case Me.CREATE:return m.createElement(zse,null);case Me.DELETE:return m.createElement(jse,null);case Me.DISCONNECTED:return m.createElement(qse,null);case Me.DOCUMENT:return m.createElement(Kse,null);case Me.DONE:return m.createElement(Wse,null);case Me.DONE_ALL:return m.createElement(Yse,null);case Me.DOWNLOAD:return m.createElement(Qse,null);case Me.EDIT:return m.createElement(Xse,null);case Me.EMOJI_MORE:return m.createElement(Zse,null);case Me.ERROR:return m.createElement(Jse,null);case Me.EXPAND:return m.createElement(eoe,null);case Me.FILE_AUDIO:return m.createElement(toe,null);case Me.FILE_DOCUMENT:return m.createElement(noe,null);case Me.FREEZE:return m.createElement(roe,null);case Me.GIF:return m.createElement(ioe,null);case Me.INFO:return m.createElement(aoe,null);case Me.LEAVE:return m.createElement(soe,null);case Me.MEMBERS:return m.createElement(ooe,null);case Me.MESSAGE:return m.createElement(loe,null);case Me.MODERATIONS:return m.createElement(uoe,null);case Me.MORE:return m.createElement(coe,null);case Me.MUTE:return m.createElement(doe,null);case Me.NOTIFICATIONS:return m.createElement(hoe,null);case Me.NOTIFICATIONS_OFF_FILLED:return m.createElement(foe,null);case Me.OPERATOR:return m.createElement(voe,null);case Me.PHOTO:return m.createElement(poe,null);case Me.PLAY:return m.createElement(moe,null);case Me.PLUS:return m.createElement(_oe,null);case Me.QUESTION:return m.createElement(goe,null);case Me.REFRESH:return m.createElement(Eoe,null);case Me.REMOVE:return m.createElement(yoe,null);case Me.REPLY:return m.createElement(boe,null);case Me.SEARCH:return m.createElement(Coe,null);case Me.SEND:return m.createElement(Soe,null);case Me.SETTINGS_FILLED:return m.createElement(Toe,null);case Me.SLIDE_LEFT:return m.createElement(Noe,null);case Me.SPINNER:return m.createElement(Ioe,null);case Me.SUPERGROUP:return m.createElement(Moe,null);case Me.THREAD:return m.createElement(Aoe,null);case Me.THUMBNAIL_NONE:return m.createElement(woe,null);case Me.TOGGLE_OFF:return m.createElement(Roe,null);case Me.TOGGLE_ON:return m.createElement(Ooe,null);case Me.USER:return m.createElement(Doe,null);case Me.FEEDBACK_LIKE:return m.createElement(Uoe,null);case Me.FEEDBACK_DISLIKE:return m.createElement(Loe,null);case Me.MARK_AS_UNREAD:return m.createElement(koe,null);case Me.FLOATING_BUTTON_CLOSE:return m.createElement(xoe,null);default:return"icon"}}function ke(e){var n=e.className,t=n===void 0?"":n,r=e.type,i=e.fillColor,a=i===void 0?li.DEFAULT:i,s=e.width,o=s===void 0?26:s,l=e.height,u=l===void 0?26:l,c=e.onClick,h=c===void 0?Mn:c,f=e.children,p=f===void 0?null:f,_=e.testID,g={width:typeof o=="string"?o:"".concat(o,"px"),minWidth:typeof o=="string"?o:"".concat(o,"px"),height:typeof u=="string"?u:"".concat(u,"px"),minHeight:typeof u=="string"?u:"".concat(u,"px")};return m.createElement("div",{className:we(we([],Array.isArray(t)?t:[t],!0),["sendbird-icon",Ase(r),Mse(a)],!1).join(" "),"data-testid":_,role:"button",onClick:h,onKeyDown:h,tabIndex:0,style:g},p||Poe(r))}var Ne=Me,Oe=li,qs=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var n=Math.random()*16|0,t=e==="x"?n:n&3|8;return t.toString(16)})},Nd="sendbird-modal-root",Foe=function(){return m.createElement("div",{id:Nd,className:Nd})},Boe=function(e){var n=e.titleText,t=e.onCloseClick;return m.createElement("div",{className:"sendbird-modal__header"},m.createElement(Ce,{type:be.H_1,color:ue.ONBACKGROUND_1},n),m.createElement("div",{className:"sendbird-modal__close"},m.createElement(ps,{width:"32px",height:"32px",onClick:t},m.createElement(ke,{type:Ne.CLOSE,fillColor:Oe.DEFAULT,width:"24px",height:"24px"}))))},Hoe=function(e){var n=e.children;return m.createElement("div",{className:"sendbird-modal__body"},m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_2},n))},af=function(e){var n=e.submitText,t=e.disabled,r=t===void 0?!1:t,i=e.hideCancelButton,a=i===void 0?!1:i,s=e.type,o=s===void 0?br.DANGER:s,l=e.onSubmit,u=e.onCancel,c=M.useContext(lr).stringSet;return m.createElement("div",{className:"sendbird-modal__footer"},!a&&m.createElement(go,{type:br.SECONDARY,onClick:u},m.createElement(Ce,{type:be.BUTTON_1,color:ue.ONBACKGROUND_1},c.BUTTON__CANCEL)),m.createElement(go,{type:o,disabled:r,onClick:l},n))};function qa(e){var n,t=e.children,r=t===void 0?null:t,i=e.className,a=i===void 0?"":i,s=e.contentClassName,o=s===void 0?"":s,l=e.isCloseOnClickOutside,u=l===void 0?!1:l,c=e.isFullScreenOnMobile,h=c===void 0?!1:c,f=e.titleText,p=e.submitText,_=e.disabled,g=_===void 0?!1:_,C=e.hideFooter,E=C===void 0?!1:C,y=e.type,S=y===void 0?br.DANGER:y,I=e.renderHeader,w=e.onSubmit,R=w===void 0?Mn:w,A=e.onClose,U=e.onCancel,O=e.customFooter,B=(n=A??U)!==null&&n!==void 0?n:Mn,F=en().state.eventHandlers,P=M.useState(function(){return"sbu-modal-".concat(qs())})[0];M.useEffect(function(){var L,$;return($=(L=F==null?void 0:F.modal)===null||L===void 0?void 0:L.onMounted)===null||$===void 0?void 0:$.call(L,{close:B,id:P})},[]);var G=si().isMobile;return Od.createPortal(m.createElement("div",{className:fn("sendbird-modal",a,h&&G&&"sendbird-modal--full-mobile")},m.createElement("div",{className:fn.apply(void 0,we(["sendbird-modal__content"],Array.isArray(o)?o:[o],!1))},(I==null?void 0:I())||m.createElement(Boe,{titleText:f??"",onCloseClick:B}),m.createElement(Hoe,null,r),!E&&(O??m.createElement(af,{disabled:g,onCancel:B,onSubmit:R,submitText:p??"",type:S}))),m.createElement("div",{className:fn("sendbird-modal__backdrop",u&&"sendbird-modal__backdrop--clickoutside"),onClick:function(L){L==null||L.stopPropagation(),u&&B()}})),document.getElementById(Nd))}var U6=M.createContext({start:Mn,stop:Mn,isRecordable:!1}),Goe=function(e){var n,t=e.children,r=en().state,i=r.config,a=i.logger,s=i.groupChannel,o=M.useState(null),l=o[0],u=o[1],c=M.useState(!1),h=c[0],f=c[1],p=M.useState(!1),_=p[0],g=p[1],C=tn().stringSet,E=s.enableVoiceMessage,y=M.useState(null),S=y[0],I=y[1],w=(n=HR.find(function(U){return MediaRecorder.isTypeSupported(U)}))!==null&&n!==void 0?n:"";E&&!w&&a.error("VoiceRecorder: Browser does not support mimeType",{mimmeTypes:HR}),M.useEffect(function(){E&&!S&&Gv(()=>import("./bundle-0quF7cIk-B38DdVC0.js"),[]).then(function(U){return I(U)})},[E,S]);var R=M.useCallback(function(U){var O,B;if(E&&!S){a.error("VoiceRecorder: Recording audio processor is being loaded.");return}var F=function(){try{navigator.permissions.query({name:"microphone"}).then(function(P){P.state==="denied"&&(a.warning("VoiceRecorder: Permission denied."),g(!0))})}catch(P){a.warning("VoiceRecorder: Failed to check permission.",P)}};a.info("VoiceRecorder: Start recording."),l&&(A(),a.info("VoiceRecorder: Previous mediaRecorder is stopped.")),F(),(B=(O=navigator==null?void 0:navigator.mediaDevices)===null||O===void 0?void 0:O.getUserMedia)===null||B===void 0||B.call(O,{audio:!0}).then(function(P){var G;a.info("VoiceRecorder: Succeeded getting media stream.",P),f(!0);var L=new MediaRecorder(P,{mimeType:w,audioBitsPerSecond:OZ});L.ondataavailable=function($){a.info("VoiceRecorder: Succeeded getting an available data.",$.data);var j=new File([$.data],Pp,{lastModified:new Date().getTime(),type:ju});S==null||S.downsampleToWav(j,function(K){var Z,te=S==null?void 0:S.encodeMp3(K),ne=new Blob(te,{type:ju}),le=new File([ne],Pp,{lastModified:new Date().getTime(),type:ju});(Z=U==null?void 0:U.onRecordingEnded)===null||Z===void 0||Z.call(U,le),a.info("VoiceRecorder: Succeeded converting audio file.",le)});var X=P.getAudioTracks();X.forEach(function(K){return K.stop()}),f(!1)},L.onstart=(G=U==null?void 0:U.onRecordingStarted)!==null&&G!==void 0?G:Mn,L==null||L.start(),u(L)}).catch(function(P){a.error("VoiceRecorder: Failed getting media stream.",P),u(null)})},[l,S]),A=M.useCallback(function(){l==null||l.stop(),u(null),f(!1),a.info("VoiceRecorder: Stop recording.")},[l]);return m.createElement(U6.Provider,{value:{start:R,stop:A,isRecordable:h}},t,_&&m.createElement(qa,{hideFooter:!0,onClose:function(){return g(!1)}},m.createElement(m.Fragment,null,C.VOICE_RECORDING_PERMISSION_DENIED)))},L6=function(){return M.useContext(U6)},bo=Symbol("@ts-pattern/matcher"),M0="@ts-pattern/anonymous-select-key",hT=function(e){return!!(e&&typeof e=="object")},Tg=function(e){return e&&!!e[bo]},xd=function e(n,t,r){if(hT(n)){if(Tg(n)){var i=n[bo]().match(t),a=i.matched,s=i.selections;return a&&s&&Object.keys(s).forEach(function(l){return r(l,s[l])}),a}if(!hT(t))return!1;if(Array.isArray(n))return!!Array.isArray(t)&&n.length===t.length&&n.every(function(l,u){return e(l,t[u],r)});if(n instanceof Map)return t instanceof Map&&Array.from(n.keys()).every(function(l){return e(n.get(l),t.get(l),r)});if(n instanceof Set){if(!(t instanceof Set))return!1;if(n.size===0)return t.size===0;if(n.size===1){var o=Array.from(n.values())[0];return Tg(o)?Array.from(t.values()).every(function(l){return e(o,l,r)}):t.has(o)}return Array.from(n.values()).every(function(l){return t.has(l)})}return Object.keys(n).every(function(l){var u,c=n[l];return(l in t||Tg(u=c)&&u[bo]().matcherType==="optional")&&e(c,t[l],r)})}return Object.is(t,n)},Xu=function e(n){var t,r,i;return hT(n)?Tg(n)?(t=(r=(i=n[bo]()).getSelectionKeys)==null?void 0:r.call(i))!=null?t:[]:Array.isArray(n)?Fp(n,e):Fp(Object.values(n),e):[]},Fp=function(e,n){return e.reduce(function(t,r){return t.concat(n(r))},[])};function R3(e){var n;return(n={})[bo]=function(){return{match:function(t){var r={},i=function(a,s){r[a]=s};return t===void 0?(Xu(e).forEach(function(a){return i(a,void 0)}),{matched:!0,selections:r}):{matched:xd(e,t,i),selections:r}},getSelectionKeys:function(){return Xu(e)},matcherType:"optional"}},n}function O3(e){var n;return(n={})[bo]=function(){return{match:function(t){if(!Array.isArray(t))return{matched:!1};var r={};if(t.length===0)return Xu(e).forEach(function(a){r[a]=[]}),{matched:!0,selections:r};var i=function(a,s){r[a]=(r[a]||[]).concat([s])};return{matched:t.every(function(a){return xd(e,a,i)}),selections:r}},getSelectionKeys:function(){return Xu(e)}}},n}function D3(){var e,n=[].slice.call(arguments);return(e={})[bo]=function(){return{match:function(t){var r={},i=function(a,s){r[a]=s};return{matched:n.every(function(a){return xd(a,t,i)}),selections:r}},getSelectionKeys:function(){return Fp(n,Xu)},matcherType:"and"}},e}function U3(){var e,n=[].slice.call(arguments);return(e={})[bo]=function(){return{match:function(t){var r={},i=function(a,s){r[a]=s};return Fp(n,Xu).forEach(function(a){return i(a,void 0)}),{matched:n.some(function(a){return xd(a,t,i)}),selections:r}},getSelectionKeys:function(){return Fp(n,Xu)},matcherType:"or"}},e}function L3(e){var n;return(n={})[bo]=function(){return{match:function(t){return{matched:!xd(e,t,function(){})}},getSelectionKeys:function(){return[]},matcherType:"not"}},n}function Qo(e){var n;return(n={})[bo]=function(){return{match:function(t){return{matched:!!e(t)}}}},n}function k3(){var e,n=[].slice.call(arguments),t=typeof n[0]=="string"?n[0]:void 0,r=n.length===2?n[1]:typeof n[0]=="string"?void 0:n[0];return(e={})[bo]=function(){return{match:function(i){var a,s=((a={})[t??M0]=i,a);return{matched:r===void 0||xd(r,i,function(o,l){s[o]=l}),selections:s}},getSelectionKeys:function(){return[t??M0].concat(r===void 0?[]:Xu(r))}}},e}var k6=Qo(function(e){return!0}),$oe=k6,Voe=Qo(function(e){return typeof e=="string"}),zoe=Qo(function(e){return typeof e=="number"}),joe=Qo(function(e){return typeof e=="boolean"}),qoe=Qo(function(e){return typeof e=="bigint"}),Koe=Qo(function(e){return typeof e=="symbol"}),Woe=Qo(function(e){return e==null}),Yoe={__proto__:null,optional:R3,array:O3,intersection:D3,union:U3,not:L3,when:Qo,select:k3,any:k6,_:$oe,string:Voe,number:zoe,boolean:joe,bigint:qoe,symbol:Koe,nullish:Woe,instanceOf:function(e){return Qo(function(n){return function(t){return t instanceof n}}(e))},typed:function(){return{array:O3,optional:R3,intersection:D3,union:U3,not:L3,select:k3,when:Qo}}};function Es(e){return new Qoe(e,[])}var Qoe=function(){function e(t,r){this.value=void 0,this.cases=void 0,this.value=t,this.cases=r}var n=e.prototype;return n.with=function(){var t=[].slice.call(arguments),r=t[t.length-1],i=[t[0]],a=[];return t.length===3&&typeof t[1]=="function"?(i.push(t[0]),a.push(t[1])):t.length>2&&i.push.apply(i,t.slice(1,t.length-1)),new e(this.value,this.cases.concat([{match:function(s){var o={},l=!!(i.some(function(u){return xd(u,s,function(c,h){o[c]=h})})&&a.every(function(u){return u(s)}));return{matched:l,value:l&&Object.keys(o).length?M0 in o?o[M0]:o:s}},handler:r}]))},n.when=function(t,r){return new e(this.value,this.cases.concat([{match:function(i){return{matched:!!t(i),value:i}},handler:r}]))},n.otherwise=function(t){return new e(this.value,this.cases.concat([{match:function(r){return{matched:!0,value:r}},handler:t}])).run()},n.exhaustive=function(){return this.run()},n.run=function(){for(var t=this.value,r=void 0,i=0;i<this.cases.length;i++){var a=this.cases[i],s=a.match(this.value);if(s.matched){t=s.value,r=a.handler;break}}if(!r){var o;try{o=JSON.stringify(this.value)}catch{o=this.value}throw new Error("Pattern matching error: no pattern matches value "+o)}return r(t,this.value)},e}(),x6=M.createContext({openModal:Mn}),Xoe=function(e){var n=e.children,t=M.useState([]),r=t[0],i=t[1],a=M.useCallback(function(l){i(function(u){return we(we([],u,!0),[l],!1)})},[]),s=M.useCallback(function(){i(function(l){return l.slice(1)})},[]),o=M.useMemo(function(){return function(){return Es(r).when(function(l){return l.length===0},function(){return m.createElement(m.Fragment,null)}).otherwise(function(){var l=r[0],u=l.modalProps,c=l.childElement;return m.createElement(qa,H({},u,{className:fn("sendbird-global-modal",u==null?void 0:u.className),onClose:function(){var h;(h=u==null?void 0:u.onClose)===null||h===void 0||h.call(u),s()}}),c({closeModal:s}))})}},[r]);return m.createElement(x6.Provider,{value:{openModal:a}},m.createElement(o,null),n)},sI=function(){return M.useContext(x6)},Zoe=function(e){var n={};return{__getTopics:function(){return n},subscribe:function(t,r){var i;return(i=n[t])!==null&&i!==void 0||(n[t]=new Set),n[t].add(r),{remove:function(){n[t].delete(r)}}},publish:function(t,r){n[t]&&n[t].forEach(function(i){setTimeout(function(){return i(r!==void 0?r:{})},0)})}}},Joe=function(){function e(n){var t=this,r,i=n.sdk,a=n.logger;(r=i==null?void 0:i.getAllEmoji)===null||r===void 0||r.call(i).then(function(s){t._emojiContainer=s,a==null||a.info("EmojiManager | Succeeded getting all emojis. ",s)}).catch(function(){a==null||a.warning("EmojiManager | Failed getting all emojis.")})}return Object.defineProperty(e.prototype,"AllEmojisAsArray",{get:function(){return this._emojiContainer.emojiCategories.flatMap(function(n){return n.emojis})},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"AllEmojisAsMap",{get:function(){return this._emojiContainer.emojiCategories.flatMap(function(n){return n.emojis}).reduce(function(n,t){return n.set(t.key,t.url),n},new Map)},enumerable:!1,configurable:!0}),e.prototype.getAllEmojis=function(n){var t=this;return Es(n).when(function(r){return["array","arr"].includes(r)},function(){return t.AllEmojisAsArray}).when(function(r){return["map"].includes(r)},function(){return t.AllEmojisAsMap}).otherwise(function(){return t.AllEmojisAsArray})},e.prototype.getEmojiUrl=function(n){var t,r;return(r=(t=this.AllEmojisAsArray.find(function(i){return i.key===n}))===null||t===void 0?void 0:t.url)!==null&&r!==void 0?r:""},Object.defineProperty(e.prototype,"emojiContainer",{get:function(){return this._emojiContainer},enumerable:!1,configurable:!0}),e}(),P6={100:"extra-light",200:"light",300:"main",400:"dark",500:"extra-dark","overlay-01":"overlay-dark","overlay-02":"overlay-light","onlight-01":"onlight-text-high-emphasis","onlight-02":"onlight-text-mid-emphasis","onlight-03":"onlight-text-low-emphasis","onlight-04":"onlight-text-disabled","ondark-01":"ondark-text-high-emphasis","ondark-02":"ondark-text-mid-emphasis","ondark-03":"ondark-text-low-emphasis","ondark-04":"ondark-text-disabled"},ele=Object.values(P6).sort(function(e,n){return n.length-e.length}),tle=new Map(Object.entries(P6).map(function(e){var n=e[0],t=e[1];return[t,n]})),nle=function(e){var n={};return Object.entries(e).forEach(function(t){for(var r=t[0],i=t[1],a=r,s=0,o=ele;s<o.length;s++){var l=o[s],u=new RegExp("-".concat(l,"$"));if(u.test(r)){var c=tle.get(l);if(c){a=r.replace(u,"-".concat(c));break}}}n[a]=i}),n};/*!
 * css-vars-ponyfill
 * v2.4.9
 * https://jhildenbiddle.github.io/css-vars-ponyfill/
 * (c) 2018-2024 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function Ua(){return Ua=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e},Ua.apply(this,arguments)}/*!
 * get-css-data
 * v2.1.0
 * https://github.com/jhildenbiddle/get-css-data
 * (c) 2018-2022 John Hildenbiddle <http://hildenbiddle.com>
 * MIT license
 */function x3(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={mimeType:n.mimeType||null,onBeforeSend:n.onBeforeSend||Function.prototype,onSuccess:n.onSuccess||Function.prototype,onError:n.onError||Function.prototype,onComplete:n.onComplete||Function.prototype},r=Array.isArray(e)?e:[e],i=Array.apply(null,Array(r.length)).map(function(u){return null});function a(u){var c=typeof u=="string",h=c&&u.trim().charAt(0)==="<";return c&&!h}function s(u,c){t.onError(u,r[c],c)}function o(u,c){var h=t.onSuccess(u,r[c],c);u=h===!1?"":h||u,i[c]=u,i.indexOf(null)===-1&&t.onComplete(i)}var l=document.createElement("a");r.forEach(function(u,c){l.setAttribute("href",u),l.href=String(l.href);var h=!!(document.all&&!window.atob),f=h&&l.host.split(":")[0]!==location.host.split(":")[0];if(f){var p=l.protocol===location.protocol;if(p){var _=new XDomainRequest;_.open("GET",u),_.timeout=0,_.onprogress=Function.prototype,_.ontimeout=Function.prototype,_.onload=function(){var C=_.responseText;a(C)?o(C,c):s(_,c)},_.onerror=function(C){s(_,c)},setTimeout(function(){_.send()},0)}else console.warn("Internet Explorer 9 Cross-Origin (CORS) requests must use the same protocol (".concat(u,")")),s(null,c)}else{var g=new XMLHttpRequest;g.open("GET",u),t.mimeType&&g.overrideMimeType&&g.overrideMimeType(t.mimeType),t.onBeforeSend(g,u,c),g.onreadystatechange=function(){if(g.readyState===4){var C=g.responseText;g.status<400&&a(C)||g.status===0&&a(C)?o(C,c):s(g,c)}},g.send()}})}/**
 * Gets CSS data from <style> and <link> nodes (including @imports), then
 * returns data in order processed by DOM. Allows specifying nodes to
 * include/exclude and filtering CSS data using RegEx.
 *
 * @preserve
 * @param {object}   [options] The options object
 * @param {object}   [options.rootElement=document] Root element to traverse for
 *                   <link> and <style> nodes.
 * @param {string}   [options.include] CSS selector matching <link> and <style>
 *                   nodes to include
 * @param {string}   [options.exclude] CSS selector matching <link> and <style>
 *                   nodes to exclude
 * @param {object}   [options.filter] Regular expression used to filter node CSS
 *                   data. Each block of CSS data is tested against the filter,
 *                   and only matching data is included.
 * @param {boolean}  [options.skipDisabled=true] Determines if disabled
 *                   stylesheets will be skipped while collecting CSS data.
 * @param {boolean}  [options.useCSSOM=false] Determines if CSS data will be
 *                   collected from a stylesheet's runtime values instead of its
 *                   text content. This is required to get accurate CSS data
 *                   when a stylesheet has been modified using the deleteRule()
 *                   or insertRule() methods because these modifications will
 *                   not be reflected in the stylesheet's text content.
 * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
 *                   1) the XHR object, 2) source node reference, and 3) the
 *                   source URL as arguments.
 * @param {function} [options.onSuccess] Callback on each CSS node read. Passes
 *                   1) CSS text, 2) source node reference, and 3) the source
 *                   URL as arguments.
 * @param {function} [options.onError] Callback on each error. Passes 1) the XHR
 *                   object for inspection, 2) soure node reference, and 3) the
 *                   source URL that failed (either a <link> href or an @import)
 *                   as arguments
 * @param {function} [options.onComplete] Callback after all nodes have been
 *                   processed. Passes 1) concatenated CSS text, 2) an array of
 *                   CSS text in DOM order, and 3) an array of nodes in DOM
 *                   order as arguments.
 *
 * @example
 *
 *   getCssData({
 *     rootElement : document,
 *     include     : 'style,link[rel="stylesheet"]',
 *     exclude     : '[href="skip.css"]',
 *     filter      : /red/,
 *     skipDisabled: true,
 *     useCSSOM    : false,
 *     onBeforeSend(xhr, node, url) {
 *       // ...
 *     }
 *     onSuccess(cssText, node, url) {
 *       // ...
 *     }
 *     onError(xhr, node, url) {
 *       // ...
 *     },
 *     onComplete(cssText, cssArray, nodeArray) {
 *       // ...
 *     }
 *   });
 */function P3(e){var n={cssComments:/\/\*[\s\S]+?\*\//g,cssImports:/(?:@import\s*)(?:url\(\s*)?(?:['"])([^'"]*)(?:['"])(?:\s*\))?(?:[^;]*;)/g},t={rootElement:e.rootElement||document,include:e.include||'style,link[rel="stylesheet"]',exclude:e.exclude||null,filter:e.filter||null,skipDisabled:e.skipDisabled!==!1,useCSSOM:e.useCSSOM||!1,onBeforeSend:e.onBeforeSend||Function.prototype,onSuccess:e.onSuccess||Function.prototype,onError:e.onError||Function.prototype,onComplete:e.onComplete||Function.prototype},r=Array.apply(null,t.rootElement.querySelectorAll(t.include)).filter(function(u){return!rle(u,t.exclude)}),i=Array.apply(null,Array(r.length)).map(function(u){return null});function a(){var u=i.indexOf(null)===-1;if(u){i.reduce(function(h,f,p){return f===""&&h.push(p),h},[]).reverse().forEach(function(h){return[r,i].forEach(function(f){return f.splice(h,1)})});var c=i.join("");t.onComplete(c,i,r)}}function s(u,c,h,f){var p=t.onSuccess(u,h,f);u=p!==void 0&&!p?"":p||u,l(u,h,f,function(_,g){i[c]===null&&(g.forEach(function(C){return t.onError(C.xhr,h,C.url)}),!t.filter||t.filter.test(_)?i[c]=_:i[c]="",a())})}function o(u,c){var h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],f={};return f.rules=(u.replace(n.cssComments,"").match(n.cssImports)||[]).filter(function(p){return h.indexOf(p)===-1}),f.urls=f.rules.map(function(p){return p.replace(n.cssImports,"$1")}),f.absoluteUrls=f.urls.map(function(p){return aC(p,c)}),f.absoluteRules=f.rules.map(function(p,_){var g=f.urls[_],C=aC(f.absoluteUrls[_],c);return p.replace(g,C)}),f}function l(u,c,h,f){var p=arguments.length>4&&arguments[4]!==void 0?arguments[4]:[],_=arguments.length>5&&arguments[5]!==void 0?arguments[5]:[],g=o(u,h,_);g.rules.length?x3(g.absoluteUrls,{onBeforeSend:function(E,y,S){t.onBeforeSend(E,c,y)},onSuccess:function(E,y,S){var I=t.onSuccess(E,c,y);E=I===!1?"":I||E;var w=o(E,y,_);return w.rules.forEach(function(R,A){E=E.replace(R,w.absoluteRules[A])}),E},onError:function(E,y,S){p.push({xhr:E,url:y}),_.push(g.rules[S]),l(u,c,h,f,p,_)},onComplete:function(E){E.forEach(function(y,S){u=u.replace(g.rules[S],y)}),l(u,c,h,f,p,_)}}):f(u,p)}r.length?r.forEach(function(u,c){var h=u.getAttribute("href"),f=u.getAttribute("rel"),p=u.nodeName.toLowerCase()==="link"&&h&&f&&f.toLowerCase().indexOf("stylesheet")!==-1,_=t.skipDisabled===!1?!1:u.disabled,g=u.nodeName.toLowerCase()==="style";if(p&&!_){var C=h.indexOf("data:text/css")!==-1;if(C){var E=decodeURIComponent(h.substring(h.indexOf(",")+1));t.useCSSOM&&(E=Array.apply(null,u.sheet.cssRules).map(function(S){return S.cssText}).join("")),s(E,c,u,location.href)}else x3(h,{mimeType:"text/css",onBeforeSend:function(I,w,R){t.onBeforeSend(I,u,w)},onSuccess:function(I,w,R){var A=aC(h);s(I,c,u,A)},onError:function(I,w,R){i[c]="",t.onError(I,u,w),a()}})}else if(g&&!_){var y=u.textContent;t.useCSSOM&&(y=Array.apply(null,u.sheet.cssRules).map(function(S){return S.cssText}).join("")),s(y,c,u,location.href)}else i[c]="",a()}):t.onComplete("",[])}function aC(e,n){var t=document.implementation.createHTMLDocument(""),r=t.createElement("base"),i=t.createElement("a");return t.head.appendChild(r),t.body.appendChild(i),r.href=n||document.baseURI||(document.querySelector("base")||{}).href||location.href,i.href=e,i.href}function rle(e,n){var t=e.matches||e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector;return t.call(e,n)}var F6=B6;function B6(e,n,t){e instanceof RegExp&&(e=F3(e,t)),n instanceof RegExp&&(n=F3(n,t));var r=H6(e,n,t);return r&&{start:r[0],end:r[1],pre:t.slice(0,r[0]),body:t.slice(r[0]+e.length,r[1]),post:t.slice(r[1]+n.length)}}function F3(e,n){var t=n.match(e);return t?t[0]:null}B6.range=H6;function H6(e,n,t){var r,i,a,s,o,l=t.indexOf(e),u=t.indexOf(n,l+1),c=l;if(l>=0&&u>0){if(e===n)return[l,u];for(r=[],a=t.length;c>=0&&!o;)c==l?(r.push(c),l=t.indexOf(e,c+1)):r.length==1?o=[r.pop(),u]:(i=r.pop(),i<a&&(a=i,s=u),u=t.indexOf(n,c+1)),c=l<u&&l>=0?l:u;r.length&&(o=[a,s])}return o}function oI(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={preserveStatic:!0,removeComments:!1},r=Ua({},t,n),i=[];function a(G){throw new Error("CSS parse error: ".concat(G))}function s(G){var L=G.exec(e);if(L)return e=e.slice(L[0].length),L}function o(){return s(/^{\s*/)}function l(){return s(/^}/)}function u(){s(/^\s*/)}function c(){if(u(),!(e[0]!=="/"||e[1]!=="*")){for(var G=2;e[G]&&(e[G]!=="*"||e[G+1]!=="/");)G++;if(!e[G])return a("end of comment is missing");var L=e.slice(2,G);return e=e.slice(G+2),{type:"comment",comment:L}}}function h(){for(var G=[],L;L=c();)G.push(L);return r.removeComments?[]:G}function f(){for(u();e[0]==="}";)a("extra closing bracket");var G=s(/^(("(?:\\"|[^"])*"|'(?:\\'|[^'])*'|[^{])+)/);if(G){var L=G[0].trim(),$,j=/\/\*/.test(L);j&&(L=L.replace(/\/\*([^*]|[\r\n]|(\*+([^*/]|[\r\n])))*\*\/+/g,""));var X=/["']\w*,\w*["']/.test(L);X&&(L=L.replace(/"(?:\\"|[^"])*"|'(?:\\'|[^'])*'/g,function(Z){return Z.replace(/,/g,"")}));var K=/,/.test(L);return K?$=L.split(/\s*(?![^(]*\)),\s*/):$=[L],X&&($=$.map(function(Z){return Z.replace(/\u200C/g,",")})),$}}function p(){if(e[0]==="@")return B();s(/^([;\s]*)+/);var G=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,L=s(/^(\*?[-#/*\\\w.]+(\[[0-9a-z_-]+\])?)\s*/);if(L){if(L=L[0].trim(),!s(/^:\s*/))return a("property missing ':'");var $=s(/^((?:\/\*.*?\*\/|'(?:\\'|.)*?'|"(?:\\"|.)*?"|\((\s*'(?:\\'|.)*?'|"(?:\\"|.)*?"|[^)]*?)\s*\)|[^};])+)/),j={type:"declaration",property:L.replace(G,""),value:$?$[0].replace(G,"").trim():""};return s(/^[;\s]*/),j}}function _(){if(!o())return a("missing '{'");for(var G,L=h();G=p();)L.push(G),L=L.concat(h());return l()?L:a("missing '}'")}function g(){u();for(var G=[],L;L=s(/^((\d+\.\d+|\.\d+|\d+)%?|[a-z]+)\s*/);)G.push(L[1]),s(/^,\s*/);if(G.length)return{type:"keyframe",values:G,declarations:_()}}function C(){var G=s(/^@([-\w]+)?keyframes\s*/);if(G){var L=G[1];if(G=s(/^([-\w]+)\s*/),!G)return a("@keyframes missing name");var $=G[1];if(!o())return a("@keyframes missing '{'");for(var j,X=h();j=g();)X.push(j),X=X.concat(h());return l()?{type:"keyframes",name:$,vendor:L,keyframes:X}:a("@keyframes missing '}'")}}function E(){var G=s(/^@page */);if(G){var L=f()||[];return{type:"page",selectors:L,declarations:_()}}}function y(){var G=s(/@(top|bottom|left|right)-(left|center|right|top|middle|bottom)-?(corner)?\s*/);if(G){var L="".concat(G[1],"-").concat(G[2])+(G[3]?"-".concat(G[3]):"");return{type:"page-margin-box",name:L,declarations:_()}}}function S(){var G=s(/^@font-face\s*/);if(G)return{type:"font-face",declarations:_()}}function I(){var G=s(/^@supports *([^{]+)/);if(G)return{type:"supports",supports:G[1].trim(),rules:P()}}function w(){var G=s(/^@host\s*/);if(G)return{type:"host",rules:P()}}function R(){var G=s(/^@media([^{]+)*/);if(G)return{type:"media",media:(G[1]||"").trim(),rules:P()}}function A(){var G=s(/^@custom-media\s+(--[^\s]+)\s*([^{;]+);/);if(G)return{type:"custom-media",name:G[1].trim(),media:G[2].trim()}}function U(){var G=s(/^@([-\w]+)?document *([^{]+)/);if(G)return{type:"document",document:G[2].trim(),vendor:G[1]?G[1].trim():null,rules:P()}}function O(){var G=s(/^@(import|charset|namespace)\s*([^;]+);/);if(G)return{type:G[1],name:G[2].trim()}}function B(){if(u(),e[0]==="@"){var G=O()||S()||R()||C()||I()||U()||A()||w()||E()||y();if(G&&!r.preserveStatic){var L=!1;if(G.declarations)L=G.declarations.some(function(j){return/var\(/.test(j.value)});else{var $=G.keyframes||G.rules||[];L=$.some(function(j){return(j.declarations||[]).some(function(X){return/var\(/.test(X.value)})})}return L?G:{}}return G}}function F(){if(!r.preserveStatic){var G=F6("{","}",e);if(G){var L=/:(?:root|host)(?![.:#(])/.test(G.pre)&&/--\S*\s*:/.test(G.body),$=/var\(/.test(G.body);if(!L&&!$)return e=e.slice(G.end+1),{}}}var j=f()||[],X=r.preserveStatic?_():_().filter(function(K){var Z=j.some(function(ne){return/:(?:root|host)(?![.:#(])/.test(ne)})&&/^--\S/.test(K.property),te=/var\(/.test(K.value);return Z||te});return j.length||a("selector missing"),{type:"rule",selectors:j,declarations:X}}function P(G){if(!G&&!o())return a("missing '{'");for(var L,$=h();e.length&&(G||e[0]!=="}")&&(L=B()||F());)L.type&&$.push(L),$=$.concat(h());return!G&&!l()?a("missing '}'"):$}return{type:"stylesheet",stylesheet:{rules:P(!0),errors:i}}}function B3(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={parseHost:!1,store:{},onWarning:function(){}},r=Ua({},t,n),i=new RegExp(":".concat(r.parseHost?"host":"root","$"));return typeof e=="string"&&(e=oI(e,r)),e.stylesheet.rules.forEach(function(a){a.type!=="rule"||!a.selectors.some(function(s){return i.test(s)})||a.declarations.forEach(function(s,o){var l=s.property,u=s.value;l&&l.indexOf("--")===0&&(r.store[l]=u)})}),r.store}function G6(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",t=arguments.length>2?arguments[2]:void 0,r={charset:function(s){return"@charset "+s.name+";"},comment:function(s){return s.comment.indexOf("__CSSVARSPONYFILL")===0?"/*"+s.comment+"*/":""},"custom-media":function(s){return"@custom-media "+s.name+" "+s.media+";"},declaration:function(s){return s.property+":"+s.value+";"},document:function(s){return"@"+(s.vendor||"")+"document "+s.document+"{"+i(s.rules)+"}"},"font-face":function(s){return"@font-face{"+i(s.declarations)+"}"},host:function(s){return"@host{"+i(s.rules)+"}"},import:function(s){return"@import "+s.name+";"},keyframe:function(s){return s.values.join(",")+"{"+i(s.declarations)+"}"},keyframes:function(s){return"@"+(s.vendor||"")+"keyframes "+s.name+"{"+i(s.keyframes)+"}"},media:function(s){return"@media "+s.media+"{"+i(s.rules)+"}"},namespace:function(s){return"@namespace "+s.name+";"},page:function(s){return"@page "+(s.selectors.length?s.selectors.join(", "):"")+"{"+i(s.declarations)+"}"},"page-margin-box":function(s){return"@"+s.name+"{"+i(s.declarations)+"}"},rule:function(s){var o=s.declarations;if(o.length)return s.selectors.join(",")+"{"+i(o)+"}"},supports:function(s){return"@supports "+s.supports+"{"+i(s.rules)+"}"}};function i(a){for(var s="",o=0;o<a.length;o++){var l=a[o];t&&t(l);var u=r[l.type](l);u&&(s+=u,u.length&&l.selectors&&(s+=n))}return s}return i(e.stylesheet.rules)}function $6(e,n){e.rules.forEach(function(t){if(t.rules){$6(t,n);return}if(t.keyframes){t.keyframes.forEach(function(r){r.type==="keyframe"&&n(r.declarations,t)});return}t.declarations&&n(t.declarations,e)})}var ile="--",ale="var";function sle(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t={preserveStatic:!0,preserveVars:!1,variables:{},onWarning:function(){}},r=Ua({},t,n);return typeof e=="string"&&(e=oI(e,r)),$6(e.stylesheet,function(i,a){for(var s=0;s<i.length;s++){var o=i[s],l=o.type,u=o.property,c=o.value;if(l==="declaration"){if(!r.preserveVars&&u&&u.indexOf(ile)===0){i.splice(s,1),s--;continue}if(c.indexOf(ale+"(")!==-1){var h=wv(c,r);h!==o.value&&(h=ole(h),r.preserveVars?(i.splice(s,0,{type:l,property:u,value:h}),s++):o.value=h)}}}}),G6(e)}function ole(e){var n=/calc\(([^)]+)\)/g;return(e.match(n)||[]).forEach(function(t){var r="calc".concat(t.split("calc").join(""));e=e.replace(t,r)}),e}function wv(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=arguments.length>2?arguments[2]:void 0;if(e.indexOf("var(")===-1)return e;var r=F6("(",")",e);function i(s){var o=s.split(",")[0].replace(/[\s\n\t]/g,""),l=(s.match(/(?:\s*,\s*){1}(.*)?/)||[])[1],u=Object.prototype.hasOwnProperty.call(n.variables,o)?String(n.variables[o]):void 0,c=u||(l?String(l):void 0),h=t||s;return u||n.onWarning('variable "'.concat(o,'" is undefined')),c&&c!=="undefined"&&c.length>0?wv(c,n,h):"var(".concat(h,")")}if(r)if(r.pre.slice(-3)==="var"){var a=r.body.trim().length===0;return a?(n.onWarning("var() must contain a non-whitespace string"),e):r.pre.slice(0,-3)+i(r.body)+wv(r.post,n)}else return r.pre+"(".concat(wv(r.body,n),")")+wv(r.post,n);else return e.indexOf("var(")!==-1&&n.onWarning('missing closing ")" in the value "'.concat(e,'"')),e}var IE=typeof window<"u",H3=IE&&window.CSS&&window.CSS.supports&&window.CSS.supports("(--a: 0)"),jc={group:0,job:0},j_={rootElement:IE?document:null,shadowDOM:!1,include:"style,link[rel=stylesheet]",exclude:"",variables:{},onlyLegacy:!0,preserveStatic:!0,preserveVars:!1,silent:!1,updateDOM:!0,updateURLs:!0,watch:null,onBeforeSend:function(){},onError:function(){},onWarning:function(){},onSuccess:function(){},onComplete:function(){},onFinally:function(){}},Ho={cssComments:/\/\*[\s\S]+?\*\//g,cssKeyframes:/@(?:-\w*-)?keyframes/,cssMediaQueries:/@media[^{]+\{([\s\S]+?})\s*}/g,cssUrls:/url\((?!['"]?(?:data|http|\/\/):)['"]?([^'")]*)['"]?\)/g,cssVarDeclRules:/(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^}]*})/g,cssVarDecls:/(?:[\s;]*)(-{2}\w[\w-]*)(?:\s*:\s*)([^;]*);/g,cssVarFunc:/var\(\s*--[\w-]/,cssVars:/(?:(?::(?:root|host)(?![.:#(])[\s,]*[^{]*{\s*[^;]*;*\s*)|(?:var\(\s*))(--[^:)]+)(?:\s*[:)])/},ni={dom:{},job:{},user:{}},Ng=!1,cs=null,Rv=0,fT=null,vT=!1;/**
 * Fetches, parses, and transforms CSS custom properties from specified
 * <style> and <link> elements into static values, then appends a new <style>
 * element with static values to the DOM to provide CSS custom property
 * compatibility for legacy browsers. Also provides a single interface for
 * live updates of runtime values in both modern and legacy browsers.
 *
 * @preserve
 * @param {object}   [options] Options object
 * @param {object}   [options.rootElement=document] Root element to traverse for
 *                   <link> and <style> nodes
 * @param {boolean}  [options.shadowDOM=false] Determines if shadow DOM <link>
 *                   and <style> nodes will be processed.
 * @param {string}   [options.include="style,link[rel=stylesheet]"] CSS selector
 *                   matching <link re="stylesheet"> and <style> nodes to
 *                   process
 * @param {string}   [options.exclude] CSS selector matching <link
 *                   rel="stylehseet"> and <style> nodes to exclude from those
 *                   matches by options.include
 * @param {object}   [options.variables] A map of custom property name/value
 *                   pairs. Property names can omit or include the leading
 *                   double-hyphen (), and values specified will override
 *                   previous values
 * @param {boolean}  [options.onlyLegacy=true] Determines if the ponyfill will
 *                   only generate legacy-compatible CSS in browsers that lack
 *                   native support (i.e., legacy browsers)
 * @param {boolean}  [options.preserveStatic=true] Determines if CSS
 *                   declarations that do not reference a custom property will
 *                   be preserved in the transformed CSS
 * @param {boolean}  [options.preserveVars=false] Determines if CSS custom
 *                   property declarations will be preserved in the transformed
 *                   CSS
 * @param {boolean}  [options.silent=false] Determines if warning and error
 *                   messages will be displayed on the console
 * @param {boolean}  [options.updateDOM=true] Determines if the ponyfill will
 *                   update the DOM after processing CSS custom properties
 * @param {boolean}  [options.updateURLs=true] Determines if relative url()
 *                   paths will be converted to absolute urls in external CSS
 * @param {boolean}  [options.watch=false] Determines if a MutationObserver will
 *                   be created that will execute the ponyfill when a <link> or
 *                   <style> DOM mutation is observed
 * @param {function} [options.onBeforeSend] Callback before XHR is sent. Passes
 *                   1) the XHR object, 2) source node reference, and 3) the
 *                   source URL as arguments
 * @param {function} [options.onError] Callback after a CSS parsing error has
 *                   occurred or an XHR request has failed. Passes 1) an error
 *                   message, and 2) source node reference, 3) xhr, and 4 url as
 *                   arguments.
 * @param {function} [options.onWarning] Callback after each CSS parsing warning
 *                   has occurred. Passes 1) a warning message as an argument.
 * @param {function} [options.onSuccess] Callback after CSS data has been
 *                   collected from each node and before CSS custom properties
 *                   have been transformed. Allows modifying the CSS data before
 *                   it is transformed by returning any string value (or false
 *                   to skip). Passes 1) CSS text, 2) source node reference, and
 *                   3) the source URL as arguments.
 * @param {function} [options.onComplete] Callback after all CSS has been
 *                   processed, legacy-compatible CSS has been generated, and
 *                   (optionally) the DOM has been updated. Passes 1) a CSS
 *                   string with CSS variable values resolved, 2) an array of
 *                   output <style> node references that have been appended to
 *                   the DOM, 3) an object containing all custom properies names
 *                   and values, and 4) the ponyfill execution time in
 *                   milliseconds.
 * @param {function} [options.onFinally] Callback in modern and legacy browsers
 *                   after the ponyfill has finished all tasks. Passes 1) a
 *                   boolean indicating if the last ponyfill call resulted in a
 *                   style change, 2) a boolean indicating if the current
 *                   browser provides native support for CSS custom properties,
 *                   and 3) the ponyfill execution time in milliseconds.
 * @example
 *
 *   cssVars({
 *     rootElement   : document,
 *     shadowDOM     : false,
 *     include       : 'style,link[rel="stylesheet"]',
 *     exclude       : '',
 *     variables     : {},
 *     onlyLegacy    : true,
 *     preserveStatic: true,
 *     preserveVars  : false,
 *     silent        : false,
 *     updateDOM     : true,
 *     updateURLs    : true,
 *     watch         : false,
 *     onBeforeSend(xhr, node, url) {},
 *     onError(message, node, xhr, url) {},
 *     onWarning(message) {},
 *     onSuccess(cssText, node, url) {},
 *     onComplete(cssText, styleNode, cssVariables, benchmark) {},
 *     onFinally(hasChanged, hasNativeSupport, benchmark)
 *   });
 */function Ml(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n="cssVars(): ",t=Ua({},j_,e);function r(c,h,f,p){!t.silent&&window.console&&console.error("".concat(n).concat(c,`
`),h),t.onError(c,h,f,p)}function i(c){!t.silent&&window.console&&console.warn("".concat(n).concat(c)),t.onWarning(c)}function a(c){t.onFinally(!!c,H3,sC()-t.__benchmark)}if(IE){if(t.watch){t.watch=j_.watch,lle(t),Ml(t);return}else t.watch===!1&&cs&&(cs.disconnect(),cs=null);if(!t.__benchmark){if(Ng===t.rootElement){ule(e);return}var s=[].slice.call(t.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])'));if(t.__benchmark=sC(),t.exclude=[cs?'[data-cssvars]:not([data-cssvars=""])':'[data-cssvars="out"]',"link[disabled]:not([data-cssvars])",t.exclude].filter(function(c){return c}).join(","),t.variables=hle(t.variables),s.forEach(function(c){var h=c.nodeName.toLowerCase()==="style"&&c.__cssVars.text,f=h&&c.textContent!==c.__cssVars.text;h&&f&&(c.sheet&&(c.sheet.disabled=!1),c.setAttribute("data-cssvars",""))}),!cs){var o=[].slice.call(t.rootElement.querySelectorAll('[data-cssvars="out"]'));o.forEach(function(c){var h=c.getAttribute("data-cssvars-group"),f=h?t.rootElement.querySelector('[data-cssvars="src"][data-cssvars-group="'.concat(h,'"]')):null;f||c.parentNode.removeChild(c)}),Rv&&s.length<Rv&&(Rv=s.length,ni.dom={})}}if(document.readyState!=="loading")if(H3&&t.onlyLegacy){var l=!1;if(t.updateDOM){var u=t.rootElement.host||(t.rootElement===document?document.documentElement:t.rootElement);Object.keys(t.variables).forEach(function(c){var h=t.variables[c];l=l||h!==getComputedStyle(u).getPropertyValue(c),u.style.setProperty(c,h)})}a(l)}else!vT&&(t.shadowDOM||t.rootElement.shadowRoot||t.rootElement.host)?P3({rootElement:j_.rootElement,include:j_.include,exclude:t.exclude,skipDisabled:!1,onSuccess:function(h,f,p){var _=(f.sheet||{}).disabled&&!f.__cssVars;return _?!1:(h=h.replace(Ho.cssComments,"").replace(Ho.cssMediaQueries,""),h=(h.match(Ho.cssVarDeclRules)||[]).join(""),h||!1)},onComplete:function(h,f,p){B3(h,{store:ni.dom,onWarning:i}),vT=!0,Ml(t)}}):(Ng=t.rootElement,P3({rootElement:t.rootElement,include:t.include,exclude:t.exclude,skipDisabled:!1,onBeforeSend:t.onBeforeSend,onError:function(h,f,p){var _=h.responseURL||V6(p,location.href),g=h.statusText?"(".concat(h.statusText,")"):"Unspecified Error"+(h.status===0?" (possibly CORS related)":""),C="CSS XHR Error: ".concat(_," ").concat(h.status," ").concat(g);r(C,f,h,_)},onSuccess:function(h,f,p){var _=(f.sheet||{}).disabled&&!f.__cssVars;if(_)return!1;var g=f.nodeName.toLowerCase()==="link",C=f.nodeName.toLowerCase()==="style"&&h!==f.textContent,E=t.onSuccess(h,f,p);return h=E!==void 0&&!E?"":E||h,t.updateURLs&&(g||C)&&(h=dle(h,p)),h},onComplete:function(h,f){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:[],_=Ua({},ni.dom,ni.user),g=!1;if(ni.job={},p.forEach(function(A,U){var O=f[U];if(A.__cssVars=A.__cssVars||{},A.__cssVars.text=O,Ho.cssVars.test(O))try{var B=oI(O,{preserveStatic:t.preserveStatic,removeComments:!0});B3(B,{parseHost:!!t.rootElement.host,store:ni.dom,onWarning:i}),A.__cssVars.tree=B}catch(F){r(F.message,A)}}),Ua(ni.job,ni.dom),t.updateDOM?(Ua(ni.user,t.variables),Ua(ni.job,ni.user)):(Ua(ni.job,ni.user,t.variables),Ua(_,t.variables)),g=jc.job>0&&!!(Object.keys(ni.job).length>Object.keys(_).length||Object.keys(_).length&&Object.keys(ni.job).some(function(A){return ni.job[A]!==_[A]})),g)pT(t.rootElement),Ml(t);else{var C=[],E=[],y=!1;if(t.updateDOM&&jc.job++,p.forEach(function(A,U){var O=!A.__cssVars.tree;if(A.__cssVars.tree)try{sle(A.__cssVars.tree,Ua({},t,{variables:ni.job,onWarning:i}));var B=G6(A.__cssVars.tree);if(t.updateDOM){var F=f[U],P=Ho.cssVarFunc.test(F);if(A.getAttribute("data-cssvars")||A.setAttribute("data-cssvars","src"),B.length&&P){var G=A.getAttribute("data-cssvars-group")||++jc.group,L=B.replace(/\s/g,""),$=t.rootElement.querySelector('[data-cssvars="out"][data-cssvars-group="'.concat(G,'"]'))||document.createElement("style");y=y||Ho.cssKeyframes.test(B),t.preserveStatic&&A.sheet&&(A.sheet.disabled=!0),$.hasAttribute("data-cssvars")||$.setAttribute("data-cssvars","out"),L===A.textContent.replace(/\s/g,"")?(O=!0,$&&$.parentNode&&(A.removeAttribute("data-cssvars-group"),$.parentNode.removeChild($))):L!==$.textContent.replace(/\s/g,"")&&([A,$].forEach(function(j){j.setAttribute("data-cssvars-job",jc.job),j.setAttribute("data-cssvars-group",G)}),$.textContent=B,C.push(B),E.push($),$.parentNode||A.parentNode.insertBefore($,A.nextSibling))}}else A.textContent.replace(/\s/g,"")!==B&&C.push(B)}catch(j){r(j.message,A)}O&&A.setAttribute("data-cssvars","skip"),A.hasAttribute("data-cssvars-job")||A.setAttribute("data-cssvars-job",jc.job)}),Rv=t.rootElement.querySelectorAll('[data-cssvars]:not([data-cssvars="out"])').length,t.shadowDOM){for(var S=[].concat(t.rootElement).concat([].slice.call(t.rootElement.querySelectorAll("*"))),I=0,w;w=S[I];++I)if(w.shadowRoot&&w.shadowRoot.querySelector("style")){var R=Ua({},t,{rootElement:w.shadowRoot});Ml(R)}}t.updateDOM&&y&&cle(t.rootElement),Ng=!1,t.onComplete(C.join(""),E,JSON.parse(JSON.stringify(ni.job)),sC()-t.__benchmark),a(E.length)}}}));else document.addEventListener("DOMContentLoaded",function c(h){Ml(e),document.removeEventListener("DOMContentLoaded",c)})}}Ml.reset=function(){jc.job=0,jc.group=0,Ng=!1,cs&&(cs.disconnect(),cs=null),Rv=0,fT=null,vT=!1;for(var e in ni)ni[e]={}};function lle(e){function n(l){var u=t(l)&&l.hasAttribute("disabled"),c=(l.sheet||{}).disabled;return u||c}function t(l){var u=l.nodeName.toLowerCase()==="link"&&(l.getAttribute("rel")||"").indexOf("stylesheet")!==-1;return u}function r(l){return l.nodeName.toLowerCase()==="style"}function i(l){var u=!1;if(l.type==="attributes"&&t(l.target)&&!n(l.target)){var c=l.attributeName==="disabled",h=l.attributeName==="href",f=l.target.getAttribute("data-cssvars")==="skip",p=l.target.getAttribute("data-cssvars")==="src";c?u=!f&&!p:h&&(f?l.target.setAttribute("data-cssvars",""):p&&pT(e.rootElement,!0),u=!0)}return u}function a(l){var u=!1;if(l.type==="childList"){var c=r(l.target),h=l.target.getAttribute("data-cssvars")==="out";u=c&&!h}return u}function s(l){var u=!1;return l.type==="childList"&&(u=[].slice.call(l.addedNodes).some(function(c){var h=c.nodeType===1,f=h&&c.hasAttribute("data-cssvars"),p=r(c)&&Ho.cssVars.test(c.textContent),_=!f&&(t(c)||p);return _&&!n(c)})),u}function o(l){var u=!1;return l.type==="childList"&&(u=[].slice.call(l.removedNodes).some(function(c){var h=c.nodeType===1,f=h&&c.getAttribute("data-cssvars")==="out",p=h&&c.getAttribute("data-cssvars")==="src",_=p;if(p||f){var g=c.getAttribute("data-cssvars-group"),C=e.rootElement.querySelector('[data-cssvars-group="'.concat(g,'"]'));p&&pT(e.rootElement,!0),C&&C.parentNode.removeChild(C)}return _})),u}window.MutationObserver&&(cs&&(cs.disconnect(),cs=null),cs=new MutationObserver(function(l){var u=l.some(function(c){return i(c)||a(c)||s(c)||o(c)});u&&Ml(e)}),cs.observe(document.documentElement,{attributes:!0,attributeFilter:["disabled","href"],childList:!0,subtree:!0}))}function ule(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:100;clearTimeout(fT),fT=setTimeout(function(){e.__benchmark=null,Ml(e)},n)}function cle(e){var n=["animation-name","-moz-animation-name","-webkit-animation-name"].filter(function(f){return getComputedStyle(document.body)[f]})[0];if(n){for(var t=[].slice.call(e.querySelectorAll("*")),r=[],i="__CSSVARSPONYFILL-KEYFRAMES__",a=0,s=t.length;a<s;a++){var o=t[a],l=getComputedStyle(o)[n];l!=="none"&&(o.style[n]+=i,r.push(o))}document.body.offsetHeight;for(var u=0,c=r.length;u<c;u++){var h=r[u].style;h[n]=h[n].replace(i,"")}}}function dle(e,n){var t=e.replace(Ho.cssComments,"").match(Ho.cssUrls)||[];return t.forEach(function(r){var i=r.replace(Ho.cssUrls,"$1"),a=V6(i,n);e=e.replace(r,r.replace(i,a))}),e}function hle(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=/^-{2}/;return Object.keys(e).reduce(function(t,r){var i=n.test(r)?r:"--".concat(r.replace(/^-+/,""));return t[i]=e[r],t},{})}function V6(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:location.href,t=document.implementation.createHTMLDocument(""),r=t.createElement("base"),i=t.createElement("a");return t.head.appendChild(r),t.body.appendChild(i),r.href=n,i.href=e,i.href}function sC(){return IE&&(window.performance||{}).now?window.performance.now():new Date().getTime()}function pT(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,t=[].slice.call(e.querySelectorAll('[data-cssvars="skip"],[data-cssvars="src"]'));t.forEach(function(r){return r.setAttribute("data-cssvars","")}),n&&(ni.dom={})}function lI(e){var n=M.useRef(e);n.current=e,M.useLayoutEffect(function(){return function(){n.current()}},[])}function z6(e,n){var t,r,i=M.useState(typeof window<"u"&&(r=(t=window==null?void 0:window.navigator)===null||t===void 0?void 0:t.onLine)!==null&&r!==void 0?r:!0),a=i[0],s=i[1];return M.useEffect(function(){var o=qs();try{n.warning("sdk changed",o);var l=new p4({onDisconnected:function(){s(!1),n.warning("onDisconnected",{isOnline:a})},onReconnectStarted:function(){s(!1),n.warning("onReconnectStarted",{isOnline:a})},onReconnectSucceeded:function(){s(!0),n.warning("onReconnectSucceeded",{isOnline:a})},onReconnectFailed:function(){e.reconnect(),n.warning("onReconnectFailed")}});e!=null&&e.addConnectionHandler&&(e.addConnectionHandler(o,l),n.info("Added ConnectionHandler",o))}catch{}return function(){try{e.removeConnectionHandler(o),n.info("Removed ConnectionHandler",o)}catch{}}},[e]),M.useEffect(function(){var o=function(){try{n.warning("Try reconnecting SDK"),e.connectionState!=="OPEN"&&e.reconnect()}catch{}};return window.addEventListener("online",o),function(){window.removeEventListener("online",o)}},[e]),M.useEffect(function(){var o=document.querySelector("body");if(!a&&!(e!=null&&e.isCacheEnabled))try{o==null||o.classList.add("sendbird__offline"),n.info("Added class sendbird__offline to body")}catch{}else try{o==null||o.classList.remove("sendbird__offline"),n.info("Removed class sendbird__offline from body")}catch{}},[a,e==null?void 0:e.isCacheEnabled]),a}var fle=2e3;function j6(e){var n=e.logger,t=e.timeout,r=e.cb,i=[],a=null,s=function(l){var u=i.find(function(h){return h.url===l.url});if(u?n.info("Channel: Mark as read already in queue",{channel:l}):i.push(l),!a){var c=i.shift();c&&r(c),a=setInterval(function(){if(i.length===0&&a){clearInterval(a),a=null;return}var h=i.shift();h&&r(h)},t||fle)}},o=function(){i=[],a&&(clearInterval(a),a=null)};return{push:s,clear:o,getQueue:function(){return i}}}function q6(e,n){var t=this,r=e.isConnected,i=n.logger,a=M.useMemo(function(){return j6({logger:i,cb:function(s){return vr(t,void 0,void 0,function(){var o;return pr(this,function(l){switch(l.label){case 0:return l.trys.push([0,2,,3]),[4,s.markAsDelivered()];case 1:return l.sent(),[3,3];case 2:return o=l.sent(),i==null||i.warning("Channel: Mark as delivered failed",{channel:s,error:o}),[3,3];case 3:return[2]}})})}})},[]);return M.useEffect(function(){r||a.clear()},[r]),lI(function(){a.clear()}),a}var G3="sendbird-sort-by-row";function vle(e){var n=e.className,t=n===void 0?"":n,r=e.maxItemCount,i=e.itemWidth,a=e.itemHeight,s=e.children;if(Array.isArray(s)&&s.length>r){for(var o=[],l=0;l<s.length;l+=r)o.push(m.createElement("div",{className:we(we([],Array.isArray(t)?t:[t],!0),[G3],!1).join(" "),key:qs(),style:{width:i*r,height:a}},s.slice(l,l+r)));return m.createElement(m.Fragment,null,o)}return m.createElement("div",{className:we(we([],Array.isArray(t)?t:[t],!0),[G3],!1).join(" "),style:{width:i*(Array.isArray(s)?s.length:1),height:a}},s)}var hr;(function(e){e.NONE="NONE",e.PENDING="PENDING",e.SENT="SENT",e.FAILED="FAILED",e.DELIVERED="DELIVERED",e.READ="READ"})(hr||(hr={}));var K6=function(e,n){var t,r,i,a,s;if(!n||!("sendingStatus"in n))return hr.NONE;if(n.sendingStatus==="pending")return hr.PENDING;if(n.sendingStatus==="failed")return hr.FAILED;if(!((t=e==null?void 0:e.isGroupChannel)===null||t===void 0)&&t.call(e)){if(((i=(r=e).getUnreadMemberCount)===null||i===void 0?void 0:i.call(r,n))===0)return hr.READ;if(((s=(a=e).getUndeliveredMemberCount)===null||s===void 0?void 0:s.call(a,n))===0)return hr.DELIVERED}return n.sendingStatus==="succeeded"?hr.SENT:hr.NONE};function A0(e){"@babel/helpers - typeof";return A0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(n){return typeof n}:function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},A0(e)}function $r(e,n){if(n.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+n.length+" present")}function za(e){$r(1,arguments);var n=Object.prototype.toString.call(e);return e instanceof Date||A0(e)==="object"&&n==="[object Date]"?new Date(e.getTime()):typeof e=="number"||n==="[object Number]"?new Date(e):((typeof e=="string"||n==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}var oC,Nu={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/svg+xml","image/webp","image/bmp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"],AUDIO:["audio/aac","audio/midi","audio/x-midi","audio/mpeg","audio/ogg","audio/opus","audio/wav","audio/webm","audio/3gpp","audio/3gpp2","audio/mp3"],DOCUMENT:["text/plain","text/css","text/csv","text/html","text/calendar","text/javascript","text/xml","text/x-log","video/quicktime"],APPLICATION:["application/x-abiword","application/x-freearc","application/vnd.amazon.ebook","application/octet-stream","application/x-bzip","application/x-bzip2","application/x-cdf","application/x-csh","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-fontobject","application/epub+zip","application/gzip","application/java-archive","application/json","application/ld+json","application/vnd.apple.installer+xml","application/vnd.oasis.opendocument.presentation","application/vnd.oasis.opendocument.spreadsheet","application/vnd.oasis.opendocument.text","application/ogg","application/pdf","application/x-httpd-php","application/vnd.ms-powerpoint","application/vnd.openxmlformats-officedocument.presentationml.presentation","application/vnd.rar","application/rtf","application/x-sh","application/x-tar","application/vnd.visio","application/xhtml+xml","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","application/xml","application/vnd.mozilla.xul+xml","application/zip","application/x-7z-compressed"],ARCHIVE:["application/zip","application/x-rar-compressed","application/x-7z-compressed","application/x-tar","application/gzip","application/x-bzip","application/x-bzip2","application/x-xz","application/x-iso9660-image"]},hv={IMAGE:[".apng",".avif",".gif",".jpg",".jpeg",".jfif",".pjpeg",".pjp",".png",".svg",".webp",".bmp",".ico",".cur",".tif",".tiff",".heic",".heif"],VIDEO:[".mp4",".webm",".ogv",".3gp",".3g2",".avi",".mov",".wmv",".mpg",".mpeg",".m4v",".mkv"],AUDIO:[".aac",".midi",".mp3",".oga",".opus",".wav",".weba",".3gp",".3g2"],DOCUMENT:[".txt",".log",".csv",".rtf",".pdf",".doc",".docx",".xls",".xlsx",".ppt",".pptx"],ARCHIVE:[".zip",".rar",".7z",".tar",".gz",".bz2",".xz",".iso"]},ple=function(e){if(Array.isArray(e)&&e.length>0){var n=e.reduce(function(t,r){var i=r.toLowerCase();switch(i){case"image":{t.push.apply(t,we(we([],Nu.IMAGE,!1),hv.IMAGE,!1));break}case"video":{t.push.apply(t,we(we([],Nu.VIDEO,!1),hv.VIDEO,!1));break}case"audio":{t.push.apply(t,we(we([],Nu.AUDIO,!1),hv.AUDIO,!1));break}case"archive":{t.push.apply(t,we(we([],Nu.ARCHIVE,!1),hv.ARCHIVE,!1));break}default:{t.push(r);break}}return t},[]);return Array.from(new Set(n)).join(",")}return we(we([],Object.values(Nu).flat(),!0),Object.values(hv).flat(),!0).join(",")},Bo={ADMIN:"ADMIN",TEXT:"TEXT",FILE:"FILE",MULTIPLE_FILES:"MULTIPLE_FILES",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},qc={IMAGE:"IMAGE",AUDIO:"AUDIO",VIDEO:"VIDEO",GIF:"GIF",VOICE:"VOICE",OTHERS:"OTHERS"},mle=function(e){return e==="video/quicktime"},_le=function(e){return JN(navigator.userAgent)&&mle(e)},So=function(e){return Nu.IMAGE.indexOf(e)>=0},Vl=function(e){return Nu.VIDEO.indexOf(e)>=0||_le(e)},Pd=function(e){return e==="image/gif"},Bp=function(e){return So(e)||Vl(e)},uI=function(e){return Nu.AUDIO.indexOf(e)>=0},gle=function(){return H({},qc)},W6=function(e){return Pd(e)?qc.GIF:So(e)?qc.IMAGE:Vl(e)?qc.VIDEO:uI(e)?qc.AUDIO:qc.OTHERS},Hp=function(e){return e.sendingStatus==="succeeded"},$3=function(e,n){return K6(e,n)===hr.READ},na=function(e){return(e==null?void 0:e.sendingStatus)==="failed"},Fa=function(e){return(e==null?void 0:e.sendingStatus)==="pending"},Ele=function(e){return e===hr.SENT||e===hr.DELIVERED||e===hr.READ},cI=function(e){return e&&(e.isAdminMessage&&typeof e.isAdminMessage=="function"?e.isAdminMessage():(e==null?void 0:e.messageType)==="admin")},Ea=function(e){return e&&(e.isUserMessage&&typeof e.isUserMessage=="function"?e.isUserMessage():(e==null?void 0:e.messageType)==="user")},aa=function(e){return!!e&&(e.isFileMessage&&typeof e.isFileMessage=="function"?e.isFileMessage():(e==null?void 0:e.messageType)==="file")},ma=function(e){return e&&(e.isMultipleFilesMessage&&typeof e.isMultipleFilesMessage=="function"?e.isMultipleFilesMessage():e.messageType==="file"&&Object.prototype.hasOwnProperty.call(e,"fileInfoList"))},Y6=function(e){return!!e.parentMessageId&&!!e.parentMessage},Q6=function(e){return!!e.messageForm},w0=function(e){var n;return!!(e&&(!((n=e.extendedMessagePayload)===null||n===void 0)&&n[im]))},X6=function(e){var n=e.type;return!(n&&!Z6[n])},Z6={default:"default"},yle=(oC={},oC[Z6.default]="ui_container_type__default",oC),dI=function(e){return!e||!Ea(e)?!1:!!e.ogMetaData&&!!(e.ogMetaData.url||e.ogMetaData.title||e.ogMetaData.description||e.ogMetaData.defaultImage)},ble=function(e){return Ea(e)},ic=function(e){return!e||!aa(e)?!1:Bp(e.type)},J6=function(e){return!e||!aa(e)?!1:ic(e)&&So(e.type)},Hh=function(e){return!e||!aa(e)?!1:ic(e)&&Vl(e.type)},mT=function(e){return!e||!aa(e)?!1:ic(e)&&Pd(e.type)},Cle=function(e){return!e||!aa(e)?!1:uI(e.type)},Sle=function(e){return e?!!e.mimeType&&(So(e.mimeType)||Pd(e.mimeType)):!1},Tle=function(e){return/^audio\//.test(e)},eP=function(e){return/^voice\//.test(e)},Zo=function(e){var n,t,r,i;if(!e||!aa(e)||!e.type)return!1;var a=e.type.split(";"),s=a[0],o=a[1];if(!Tle(s))return!1;if(o){var l=o.split("="),u=l[0],c=l[1];return u==="sbu_type"&&c==="voice"}return eP((i=(r=(t=(n=e==null?void 0:e.metaArrays)===null||n===void 0?void 0:n.find(function(h){return h.key==="KEY_INTERNAL_MESSAGE_TYPE"}))===null||t===void 0?void 0:t.value)===null||r===void 0?void 0:r[0])!==null&&i!==void 0?i:"")},hI=function(e){return Ea(e)&&(e==null?void 0:e.updatedAt)>0},Nle=function(){return H({},Bo)},fI=function(e){return cI(e)?Bo.ADMIN:Ea(e)?dI(e)?Bo.OG:Bo.TEXT:ma(e)?Bo.MULTIPLE_FILES:aa(e)?ic(e)?Bo.THUMBNAIL:Zo(e)?qc.VOICE:Bo.FILE:Bo.UNKNOWN},Ile=function(e,n){return Array.isArray(n)?we(we([],e,!0),n,!0):(e.push(n),e)},Ia=function(e){return Array.isArray(e)?e.reduce(Ile,[]).join(" "):e},tP=function(e,n){return n.userIds.some(function(t){return t===e})},Mle=function(e,n,t,r){var i="";return tP(n,e)&&(i=e.userIds.length===1?r.TOOLTIP__YOU:r.TOOLTIP__AND_YOU),"".concat(e.userIds.filter(function(a){return a!==n}).map(function(a){return t.get(a)||r.TOOLTIP__UNKNOWN_USER}).join(", ")).concat(i)};function nP(e){var n;return e!=null&&e.extendedMessagePayload&&Array.isArray((n=e==null?void 0:e.extendedMessagePayload)===null||n===void 0?void 0:n.suggested_replies)?e.extendedMessagePayload.suggested_replies:[]}var rP=function(e,n){if(n||(n=40),e==null)return"";if(e.length<=n)return e;var t="...",r=t.length,i=n-r,a=Math.ceil(i/2),s=Math.floor(i/2);return e.substr(0,a)+t+e.substr(e.length-s)},vI=function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=e,n.style.position="fixed",document.body.appendChild(n),n.select();try{return document.execCommand("copy")}catch{return!1}finally{document.body.removeChild(n)}}return!1},pI=function(e){var n;return(n=e==null?void 0:e.emojiCategories)===null||n===void 0?void 0:n.map(function(t){return t.emojis}).reduce(function(t,r){return t.concat(r)},[])},Ale=function(e){var n,t=new Map;return(n=e==null?void 0:e.emojiCategories)===null||n===void 0||n.forEach(function(r){var i;(i=r==null?void 0:r.emojis)===null||i===void 0||i.forEach(function(a){a&&a.key&&t.set(a.key,a)})}),t},_T=function(e,n){var t;return n?((t=e==null?void 0:e.emojiCategories)===null||t===void 0?void 0:t.filter(function(r){return n.includes(r.id)}).flatMap(function(r){return r.emojis}))||[]:pI(e)||[]},wle=function(e){return function(n){var t=n.key;return t===e}},Rle=function(e,n){var t,r,i=wle(n??"");return((r=(t=e==null?void 0:e.emojiCategories.find(function(a){return a.emojis.some(i)}))===null||t===void 0?void 0:t.emojis.find(i))===null||r===void 0?void 0:r.url)||""},Ole=function(e){return(e==null?void 0:e.friendName)||(e==null?void 0:e.nickname)||(e==null?void 0:e.userId)},Dle=function(e){return(e==null?void 0:e.sender)&&Ole(e==null?void 0:e.sender)},V3=function(e,n){var t,r,i,a,s=e.customTypesFilter,o=s===void 0?[]:s;if(e!=null&&e.messageTypeFilter&&e.messageTypeFilter!==n.messageType)return!1;if((o==null?void 0:o.length)>0){var l=o.filter(function(c){return c!=="*"});if(l.length>0&&!l.includes(n.customType))return!1}if(e!=null&&e.senderUserIdsFilter&&((t=e==null?void 0:e.senderUserIdsFilter)===null||t===void 0?void 0:t.length)>0)if(!((r=n==null?void 0:n.isUserMessage)===null||r===void 0)&&r.call(n)||!((i=n==null?void 0:n.isFileMessage)===null||i===void 0)&&i.call(n)){var u=n.sender||n._sender;if(!(!((a=e==null?void 0:e.senderUserIdsFilter)===null||a===void 0)&&a.includes(u==null?void 0:u.userId)))return!1}else return!1;return!(!(e!=null&&e.includeParentMessageInfo)&&(n!=null&&n.parentMessageId||n!=null&&n.parentMessage))},z3;(function(e){e.normal="normal",e.mention="mention",e.url="url"})(z3||(z3={}));var Ule=function(e,n){if(Array.isArray(e)&&Array.isArray(n)&&e.length===n.length){for(var t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}return!1},om=function(e){return!!e&&"sender"in e},Lle=function(e,n){return n?"ltr":e},kle="Group Channel",xle="AI Chatbot Widget Channel",iP=function(e){return!(e!=null&&e.name)||e.name===kle||e.name===xle},aP="sendbird-app__layout",Ple=60,Fle=function(e){Bk(n,e);function n(t){var r=e.call(this,t)||this;return r.menuRef=m.createRef(),r.setupEvents=function(){var i=r.props.closeDropdown,a=r.menuRef,s=function(o){var l,u;a!=null&&a.current&&!(!((u=(l=a==null?void 0:a.current)===null||l===void 0?void 0:l.contains)===null||u===void 0)&&u.call(l,o.target))&&(i==null||i())};r.setState({handleClickOutside:s}),document.addEventListener("mousedown",s)},r.cleanUpEvents=function(){var i=r.state.handleClickOutside;document.removeEventListener("mousedown",i)},r.getMenuPosition=function(){var i,a,s,o=r.props,l=o.parentRef,u=o.openLeft,c=document.getElementById(aP),h=((i=c==null?void 0:c.getBoundingClientRect)===null||i===void 0?void 0:i.call(c))||{top:0,left:0,width:window.innerWidth,height:window.innerHeight},f=(s=(a=l==null?void 0:l.current)===null||a===void 0?void 0:a.getBoundingClientRect)===null||s===void 0?void 0:s.call(a),p=((f==null?void 0:f.x)||(f==null?void 0:f.left)||0)-h.left,_=((f==null?void 0:f.y)||(f==null?void 0:f.top)||0)-h.top,g={top:_,left:p};if(!r.menuRef.current)return g;var C=r.menuRef.current.getBoundingClientRect();if(_+C.height+Ple>h.height&&(g.top-=C.height),p+C.width>h.width&&!u&&(g.left-=C.width),g.top<0&&(g.top=C.height<h.height?(h.height-C.height)/2:0),g.top+=32,u){var E=Number.isNaN(C.width-30)?108:C.width-30;g.left-=E}return g.left<0&&(g.left=C.width<h.width?(h.width-C.width)/2:0),r.setState({menuStyle:g}),g},r.state={menuStyle:{top:0,left:0},handleClickOutside:function(){}},r}return n.prototype.componentDidMount=function(){this.setupEvents(),this.getMenuPosition()},n.prototype.componentWillUnmount=function(){this.cleanUpEvents()},n.prototype.render=function(){var t=document.getElementById(R0);if(!t)return m.createElement(m.Fragment,null);var r=this.state.menuStyle,i=this.props,a=i.children,s=i.style,o=i.className,l=o===void 0?"":o,u=i.testID,c=i.id;return Od.createPortal(m.createElement("div",{className:fn(_I,l),"data-testid":u,id:c},m.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),m.createElement("ul",{className:"".concat(l," sendbird-dropdown__menu"),ref:this.menuRef,style:H({display:"inline-block",position:"fixed",left:"".concat(Math.round(r.left),"px"),top:"".concat(Math.round(r.top),"px")},s),"data-testid":"sendbird-dropdown-menu"},a)),t)},n}(m.Component),Ble={x:0,y:0,left:0,top:0,height:0},Hle=function(e){var n=e.id,t=e.children,r=e.parentRef,i=e.parentContainRef,a=e.spaceFromTrigger,s=a===void 0?{x:0,y:0}:a,o=e.closeDropdown,l=M.useState({left:0,top:0}),u=l[0],c=l[1],h=M.useRef(null);M.useEffect(function(){return i&&(i!=null&&i.current)&&i.current.classList.add("sendbird-reactions--pressed"),function(){i&&(i!=null&&i.current)&&i.current.classList.remove("sendbird-reactions--pressed")}},[]),M.useEffect(function(){var p=function(_){var g,C;h!=null&&h.current&&!(!((C=(g=h==null?void 0:h.current)===null||g===void 0?void 0:g.contains)===null||C===void 0)&&C.call(g,_.target))&&o()};return document.addEventListener("mousedown",p),function(){document.removeEventListener("mousedown",p)}},[]),M.useEffect(function(){var p,_,g,C,E=(s==null?void 0:s.x)||0,y=(s==null?void 0:s.y)||0,S=document.getElementById(aP),I=((p=S==null?void 0:S.getBoundingClientRect)===null||p===void 0?void 0:p.call(S))||{top:0,left:0,width:window.innerWidth},w=(g=(_=r==null?void 0:r.current)===null||_===void 0?void 0:_.getBoundingClientRect())!==null&&g!==void 0?g:Ble,R=((w==null?void 0:w.x)||(w==null?void 0:w.left)||0)-I.left,A=((w==null?void 0:w.y)||(w==null?void 0:w.top)||0)-I.top,U={top:A,left:R};if(!(h!=null&&h.current))c(U);else{var O=(C=h==null?void 0:h.current)===null||C===void 0?void 0:C.getBoundingClientRect();U.top<O.height?(U.top+=w.height,U.top+=y):(U.top-=O.height,U.top-=y),U.left-=O.width/2,U.left+=w.height/2-2,U.left+=E;var B=I.width-O.width;B<U.left&&(U.left=B),U.left<0&&(U.left=0),c(U)}},[t]);var f=document.getElementById(EI);return f?Od.createPortal(m.createElement("div",{className:_I,id:n},m.createElement("div",{className:"sendbird-dropdown__menu-backdrop"}),m.createElement("ul",{className:"sendbird-dropdown__reaction-bar","data-testid":"sendbird-dropdown__reaction-bar",ref:h,style:{display:"inline-block",position:"fixed",left:"".concat(Math.round(u.left),"px"),top:"".concat(Math.round(u.top),"px")}},M.Children.count(t)<=0?m.createElement(Ce,{className:"sendbird-dropdown__reaction-bar__emptyLabel",type:be.BODY_1,color:ue.ONBACKGROUND_1},"Emojis is not loaded yet."):m.createElement(vle,{className:"sendbird-dropdown__reaction-bar__row",maxItemCount:8,itemWidth:44,itemHeight:40},t))),f):null},sP=M.createContext(void 0),mI=function(e){var n=e.children,t=e.value;return m.createElement(sP.Provider,{value:t},n)},Lr=function(){var e=M.useContext(sP);if(!e)throw new Error("useMessageMenuContext must be used within a MessageMenuProvider.");return e},Ki=function(e){var n=e.className,t=e.disabled,r=e.tabIndex,i=r===void 0?0:r,a=e.testID,s=e.onClick,o=e.children,l=function(u){!t&&s&&s(u)};return m.createElement("li",{className:fn("sendbird-menu-item",n),role:"menuitem","aria-disabled":t,"data-testid":a,tabIndex:i,onClick:l,onKeyDown:function(u){u.code==="Enter"&&l(u)}},m.createElement(Ce,{className:"sendbird-menu-item__text",type:be.SUBTITLE_2,color:t?ue.ONBACKGROUND_4:ue.ONBACKGROUND_1},o))},ac=function(e){var n=e.className,t=e.disabled,r=t===void 0?!1:t,i=e.tabIndex,a=i===void 0?0:i,s=e.testID,o=e.onClick,l=e.children;return m.createElement("div",{className:fn("sendbird-message__bottomsheet--action",n),role:"menuitem",tabIndex:a,"aria-disabled":r,onClick:o,"data-testid":s},l)},_I="sendbird-observing-message-menu",gI=function(e){return"m_".concat(e)},ya=Fle,oP=Hle,Ii=function(e){var n=e.className,t=n===void 0?"":n,r=e.children,i=e.onClick,a=e.disable,s=a===void 0?!1:a,o=e.dataSbId,l=o===void 0?"":o,u=e.testID;return m.createElement(Ki,{className:fn.apply(void 0,we(we([],Array.isArray(t)?t:[t],!1),["sendbird-dropdown__menu-item",s?"disable":""],!1)),disabled:s,testID:u??l,onClick:i},r)},R0="sendbird-dropdown-portal",Gle=function(){return m.createElement("div",{id:R0,className:R0})},EI="sendbird-emoji-list-portal",$le=function(){return m.createElement("div",{id:EI})};function ba(e){var n=e.menuTrigger,t=e.menuItems,r=e.isOpen,i=e.onClick,a=M.useState(!1),s=a[0],o=a[1];return m.createElement("div",{className:"sendbird-context-menu",onClick:i},n==null?void 0:n(function(){return o(!s)}),(s||r)&&t(function(){return o(!1)}))}function Vle(e){var n=M.useRef(e);return _6(e,n.current)||(n.current=e),n.current}function lP(e,n){M.useEffect(e,n.map(Vle))}function zle(e){var n,t,r,i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I,w,R,A,U,O,B,F,P,G,L,$,j,X,K=e.legacyConfig,Z=e.uikitOptions,te=Z===void 0?{}:Z,ne=K.replyType,le=K.isMentionEnabled,Te=K.isReactionEnabled,Ze=K.disableUserProfile,ce=K.isVoiceMessageEnabled,ge=K.isTypingIndicatorEnabledOnChannelList,Qe=K.isMessageReceiptStatusEnabledOnChannelList,xe=K.showSearchIcon;return{common:{enableUsingDefaultUserProfile:(t=(n=te.common)===null||n===void 0?void 0:n.enableUsingDefaultUserProfile)!==null&&t!==void 0?t:typeof Ze=="boolean"?!Ze:void 0},groupChannel:{enableOgtag:(r=te.groupChannel)===null||r===void 0?void 0:r.enableOgtag,enableMention:(a=(i=te.groupChannel)===null||i===void 0?void 0:i.enableMention)!==null&&a!==void 0?a:le,enableReactions:(o=(s=te.groupChannel)===null||s===void 0?void 0:s.enableReactions)!==null&&o!==void 0?o:Te,enableReactionsSupergroup:(l=te.groupChannel)===null||l===void 0?void 0:l.enableReactionsSupergroup,enableTypingIndicator:(u=te.groupChannel)===null||u===void 0?void 0:u.enableTypingIndicator,enableVoiceMessage:(h=(c=te.groupChannel)===null||c===void 0?void 0:c.enableVoiceMessage)!==null&&h!==void 0?h:ce,replyType:(p=(f=te.groupChannel)===null||f===void 0?void 0:f.replyType)!==null&&p!==void 0?p:ne!=null?XN(ne).lowerCase:void 0,threadReplySelectType:(_=te.groupChannel)===null||_===void 0?void 0:_.threadReplySelectType,input:{enableDocument:(C=(g=te.groupChannel)===null||g===void 0?void 0:g.input)===null||C===void 0?void 0:C.enableDocument},typingIndicatorTypes:(E=te.groupChannel)===null||E===void 0?void 0:E.typingIndicatorTypes,enableFeedback:(y=te.groupChannel)===null||y===void 0?void 0:y.enableFeedback,enableSuggestedReplies:(S=te.groupChannel)===null||S===void 0?void 0:S.enableSuggestedReplies,showSuggestedRepliesFor:(I=te.groupChannel)===null||I===void 0?void 0:I.showSuggestedRepliesFor,suggestedRepliesDirection:(w=te.groupChannel)===null||w===void 0?void 0:w.suggestedRepliesDirection,enableMarkdownForUserMessage:(R=te.groupChannel)===null||R===void 0?void 0:R.enableMarkdownForUserMessage,enableFormTypeMessage:(A=te.groupChannel)===null||A===void 0?void 0:A.enableFormTypeMessage,enableMarkAsUnread:(U=te.groupChannel)===null||U===void 0?void 0:U.enableMarkAsUnread},groupChannelList:{enableTypingIndicator:(B=(O=te.groupChannelList)===null||O===void 0?void 0:O.enableTypingIndicator)!==null&&B!==void 0?B:ge,enableMessageReceiptStatus:(P=(F=te.groupChannelList)===null||F===void 0?void 0:F.enableMessageReceiptStatus)!==null&&P!==void 0?P:Qe},groupChannelSettings:{enableMessageSearch:(L=(G=te.groupChannelSettings)===null||G===void 0?void 0:G.enableMessageSearch)!==null&&L!==void 0?L:xe},openChannel:{enableOgtag:($=te.openChannel)===null||$===void 0?void 0:$.enableOgtag,input:{enableDocument:(X=(j=te.openChannel)===null||j===void 0?void 0:j.input)===null||X===void 0?void 0:X.enableDocument}}}}var jle=function(e){var n=e.children;return m.createElement(Hae,null,m.createElement(Goe,null,n))},ts={DEBUG:"debug",WARNING:"warning",ERROR:"error",INFO:"info",ALL:"all"},qle=function(e){switch(e){case ts.WARNING:return"color: Orange";case ts.ERROR:return"color: Red";default:return"color: Gray"}},Kle=function(e){var n=e.level,t=e.title,r=e.description,i=r===void 0?"":r,a=e.payload,s=a===void 0?[]:a;console.log.apply(console,we(["%c SendbirdUIKit | ".concat(n," | ").concat(new Date().toISOString()," | ").concat(t," ").concat(i&&"|"),qle(n),i],s,!1))},Wle=function(){return{info:Mn,error:Mn,warning:Mn}},j3=function(e,n){var t=Kle,r=Array.isArray(e)?e:[e],i=function(a){return function(s,o){for(var l=[],u=2;u<arguments.length;u++)l[u-2]=arguments[u];return t({level:a,title:s,description:o,payload:l})}};return r.reduce(function(a,s){return s===ts.DEBUG||s===ts.ALL?H(H({},a),{info:i(ts.INFO),error:i(ts.ERROR),warning:i(ts.WARNING)}):s===ts.INFO?H(H({},a),{info:i(ts.INFO)}):s===ts.ERROR?H(H({},a),{error:i(ts.ERROR)}):s===ts.WARNING?H(H({},a),{warning:i(ts.WARNING)}):H({},a)},Wle())},Yle={"--sendbird-dark-primary-500":"#4d2aa6","--sendbird-dark-primary-400":"#6440C4","--sendbird-dark-primary-300":"#7B53EF","--sendbird-dark-primary-200":"#9E8CF5","--sendbird-dark-primary-100":"#E2DFFF","--sendbird-dark-secondary-500":"#007A7A","--sendbird-dark-secondary-400":"#189A8D","--sendbird-dark-secondary-300":"#2EBA9F","--sendbird-dark-secondary-200":"#6FD6BE","--sendbird-dark-secondary-100":"#AEF2DC","--sendbird-dark-information-100":"#b2d9ff","--sendbird-dark-error-500":"#A30E2D","--sendbird-dark-error-400":"#C11F41","--sendbird-dark-error-300":"#E53157","--sendbird-dark-error-200":"#FF6183","--sendbird-dark-error-100":"#FFABBD","--sendbird-dark-background-700":"#000000","--sendbird-dark-background-600":"#161616","--sendbird-dark-background-500":"#2C2C2C","--sendbird-dark-background-400":"#393939","--sendbird-dark-background-300":"#A8A8A8","--sendbird-dark-background-200":"#D9D9D9","--sendbird-dark-background-100":"#F0F0F0","--sendbird-dark-background-50":"#FFFFFF","--sendbird-dark-overlay":"rgba(0, 0, 0, 0.32)","--sendbird-dark-onlight-01":"rgba(0, 0, 0, 0.88)","--sendbird-dark-onlight-02":"rgba(0, 0, 0, 0.50)","--sendbird-dark-onlight-03":"rgba(0, 0, 0, 0.38)","--sendbird-dark-onlight-04":"rgba(0, 0, 0, 0.12)","--sendbird-dark-ondark-01":"rgba(255, 255, 255, 0.88)","--sendbird-dark-ondark-02":"rgba(255, 255, 255, 0.50)","--sendbird-dark-ondark-03":"rgba(255, 255, 255, 0.38)","--sendbird-dark-ondark-04":"rgba(255, 255, 255, 0.12)","--sendbird-dark-shadow-01":"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-02":"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-03":"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-04":"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)","--sendbird-dark-shadow-message-input":"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)","--sendbird-light-primary-500":"#4d2aa6","--sendbird-light-primary-400":"#6440C4","--sendbird-light-primary-300":"#7B53EF","--sendbird-light-primary-200":"#9E8CF5","--sendbird-light-primary-100":"#E2DFFF","--sendbird-light-secondary-500":"#007A7A","--sendbird-light-secondary-400":"#189A8D","--sendbird-light-secondary-300":"#2EBA9F","--sendbird-light-secondary-200":"#6FD6BE","--sendbird-light-secondary-100":"#AEF2DC","--sendbird-light-information-100":"#b2d9ff","--sendbird-light-error-500":"#A30E2D","--sendbird-light-error-400":"#C11F41","--sendbird-light-error-300":"#E53157","--sendbird-light-error-200":"#FF6183","--sendbird-light-error-100":"#FFABBD","--sendbird-light-background-700":"#000000","--sendbird-light-background-600":"#161616","--sendbird-light-background-500":"#2C2C2C","--sendbird-light-background-400":"#393939","--sendbird-light-background-300":"#A8A8A8","--sendbird-light-background-200":"#D9D9D9","--sendbird-light-background-100":"#F0F0F0","--sendbird-light-background-50":" #FFFFFF","--sendbird-light-overlay":"rgba(0, 0, 0, 0.32)","--sendbird-light-onlight-01":"rgba(0, 0, 0, 0.88)","--sendbird-light-onlight-02":"rgba(0, 0, 0, 0.50)","--sendbird-light-onlight-03":"rgba(0, 0, 0, 0.38)","--sendbird-light-onlight-04":"rgba(0, 0, 0, 0.12)","--sendbird-light-ondark-01":"rgba(255, 255, 255, 0.88)","--sendbird-light-ondark-02":"rgba(255, 255, 255, 0.50)","--sendbird-light-ondark-03":"rgba(255, 255, 255, 0.38)","--sendbird-light-ondark-04":"rgba(255, 255, 255, 0.12)","--sendbird-light-shadow-01":"0 1px 5px 0 rgba(33, 34, 66, 0.04), 0 0 3px 0 rgba(0, 0, 0, 0.08), 0 2px 1px 0 rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-02":"0 3px 5px -3px rgba(33, 34, 66, 0.04), 0 3px 14px 2px rgba(0, 0, 0, 0.08), 0 8px 10px 1px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-03":"0 6px 10px -5px rgba(0, 0, 0, 0.04), 0 6px 30px 5px rgba(0, 0, 0, 0.08), 0 16px 24px 2px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-04":"0 9px 15px -7px rgba(0, 0, 0, 0.04), 0 9px 46px 8px rgba(0, 0, 0, 0.08), 0 24px 38px 3px rgba(0, 0, 0, 0.12)","--sendbird-light-shadow-message-input":"0 1px 5px 0 rgba(33, 34, 66, 0.12), 0 0 1px 0 rgba(33, 34, 66, 0.16), 0 2px 1px 0 rgba(33, 34, 66, 0.08), 0 1px 5px 0 rgba(0, 0, 0, 0.12)"},Qle=function(e){if(e==null)return!0;for(var n in e)if(e.hasOwnProperty(n))return!1;return JSON.stringify(e)===JSON.stringify({})},Xle=function(e){M.useLayoutEffect(function(){if(!Qle(e)){var n=H(H({},Yle),nle(e));Ml({variables:n})}},[e])},Zle=20,uP=function(e){return{version:Number(e.ui_template.version),uiTemplate:JSON.stringify(e.ui_template.body.items),colorVariables:e.color_variables}},q3=function(e){var n={};return e.forEach(function(t){n[t.key]=uP(t)}),n};function Jle(e){var n=this,t,r=e.sdk,i=e.logger,a=e.appInfoStore,s=e.actions,o=a==null?void 0:a.messageTemplatesInfo,l=M.useCallback(function(f){var p,_;if(!o)return null;var g=null,C=(p=o==null?void 0:o.templatesMap)!==null&&p!==void 0?p:null;return C&&(g=(_=C[f])!==null&&_!==void 0?_:null),g},[a==null?void 0:a.messageTemplatesInfo]),u=function(f){return vr(n,void 0,void 0,function(){var p,_,g,C;return pr(this,function(E){switch(E.label){case 0:p=!0,_=null,g=[],E.label=1;case 1:return p?[4,f.message.getMessageTemplatesByToken(_,{limit:Zle})]:[3,3];case 2:return C=E.sent(),p=C.hasMore,_=C.token,C.templates.forEach(function(y){g.push(JSON.parse(y.template))}),[3,1];case 3:return[2,g]}})})},c=function(f){return vr(n,void 0,void 0,function(){var p,_,g,C,E,C,E,y;return pr(this,function(S){switch(S.label){case 0:return p=(y=f.appInfo)===null||y===void 0?void 0:y.messageTemplateInfo.token,p?(_=localStorage.getItem(Yb),g=localStorage.getItem(dh),!_||_!==p?[4,u(f)]:[3,2]):(localStorage.removeItem(Yb),localStorage.removeItem(dh),[2]);case 1:return C=S.sent(),E={token:p,templatesMap:q3(C)},s.initMessageTemplateInfo({payload:E}),localStorage.setItem(Yb,p),localStorage.setItem(dh,JSON.stringify(C)),[3,3];case 2:_&&_===p&&g&&(C=JSON.parse(g),E={token:p,templatesMap:q3(C)},s.initMessageTemplateInfo({payload:E})),S.label=3;case 3:return[2]}})})},h=M.useCallback(function(f,p,_){return vr(n,void 0,void 0,function(){var g,C,E,y,S,I,w,R,A;return pr(this,function(U){switch(U.label){case 0:s.upsertWaitingTemplateKeys({keys:f,requestedAt:_}),g=[],U.label=1;case 1:U.trys.push([1,5,,6]),C=!0,E=null,U.label=2;case 2:return C?[4,r.message.getMessageTemplatesByToken(E,{keys:f})]:[3,4];case 3:return y=U.sent(),y.templates.forEach(function(O){g.push(JSON.parse(O.template))}),C=y.hasMore,E=y.token,[3,2];case 4:return[3,6];case 5:return S=U.sent(),(A=i==null?void 0:i.error)===null||A===void 0||A.call(i,"Sendbird | fetchProcessedMessageTemplates failed",S,f),[3,6];case 6:return g.length>0?(I=localStorage.getItem(dh),I?(w=JSON.parse(I),R=w.map(function(O){return O.key}),g.forEach(function(O){R.includes(O.key)||w.push(O)}),localStorage.setItem(dh,JSON.stringify(w))):localStorage.setItem(dh,JSON.stringify([g])),s.upsertMessageTemplates({payload:g.map(function(O){return{key:O.key,template:uP(O)}})})):s.markErrorWaitingTemplateKeys({keys:f,messageId:p}),[2]}})})},[s.upsertMessageTemplates,s.upsertWaitingTemplateKeys,(t=r==null?void 0:r.message)===null||t===void 0?void 0:t.getMessageTemplatesByToken]);return{getCachedTemplate:l,updateMessageTemplatesInfo:h,initializeMessageTemplatesInfo:c}}var eue=function(e){M.useEffect(function(){var n=document.getElementById(Sg);n.parentElement.dir=e},[e])};function tue(e,n){var t=e.isConnected,r=n.logger,i=M.useMemo(function(){return j6({logger:r,cb:function(a){try{a.markAsRead()}catch(s){r.warning("Channel: Mark as delivered failed",{channel:a,error:s})}}})},[]);return M.useEffect(function(){t||i.clear()},[t]),lI(function(){i.clear()}),i}var nue=function(e){var n,t=e.appId,r=e.userId,i=e.accessToken,a=e.customApiHost,s=e.customWebSocketHost,o=e.configureSession,l=e.theme,u=l===void 0?"light":l,c=e.logger,h=e.config,f=h===void 0?{}:h,p=e.nickname,_=p===void 0?"":p,g=e.colorSet,C=e.profileUrl,E=C===void 0?"":C,y=e.voiceRecord,S=e.userListQuery,I=e.imageCompression,w=I===void 0?{}:I,R=e.allowProfileEdit,A=R===void 0?!1:R,U=e.disableMarkAsDelivered,O=U===void 0?!1:U,B=e.renderUserProfile,F=e.onUserProfileMessage,P=e.onStartDirectMessage,G=e.isUserIdUsedForNickname,L=G===void 0?!0:G,$=e.sdkInitParams,j=e.customExtensionParams,X=e.isMultipleFilesMessageEnabled,K=X===void 0?!1:X,Z=e.autoscrollMessageOverflowToTop,te=Z===void 0?!1:Z,ne=e.eventHandlers,le=e.htmlTextDirection,Te=le===void 0?"ltr":le,Ze=e.forceLeftToRightMessageLayout,ce=Ze===void 0?!1:Ze,ge=P??F,Qe=f.userMention,xe=Qe===void 0?{}:Qe,tt=f.isREMUnitEnabled,ht=tt===void 0?!1:tt,bt=f.pubSub,Rt=si().isMobile,Ut=M.useState(bt??Zoe())[0],lt=mae(),kt=lt.state,$t=lt.updateState,mt=en().actions,zt=kt.stores,Tt=zt.sdkStore,Pt=zt.appInfoStore,Xe=W4(),je=Xe.configs,Ve=Xe.configsWithAppAttr,Ct=Xe.initDashboardConfigs,ut=Tt.initialized,qe=Tt==null?void 0:Tt.sdk,pt=(n=qe==null?void 0:qe.appInfo)!==null&&n!==void 0?n:{},jt=pt.uploadSizeLimit,Ue=pt.multipleFilesMessageFileCountLimit;Xle(g);var hn=Jle({sdk:qe,logger:c,appInfoStore:Pt,actions:mt}),un=hn.getCachedTemplate,vn=hn.updateMessageTemplatesInfo,Xt=hn.initializeMessageTemplatesInfo;M.useEffect(function(){mt.connect({appId:t,userId:r,accessToken:i,isUserIdUsedForNickname:L,isMobile:Rt,logger:c,nickname:_,profileUrl:E,configureSession:o,customApiHost:a,customWebSocketHost:s,sdkInitParams:$,customExtensionParams:j,initDashboardConfigs:Ct,eventHandlers:ne,initializeMessageTemplatesInfo:Xt})},[t,r]),lI(function(){mt.disconnect({logger:c})});var Wt=M.useState(u),At=Wt[0],xt=Wt[1];M.useEffect(function(){xt(u)},[u]),M.useEffect(function(){var Yt=document.querySelector("body");Yt==null||Yt.classList.remove("sendbird-experimental__rem__units"),ht&&(Yt==null||Yt.classList.add("sendbird-experimental__rem__units"))},[ht]),M.useEffect(function(){c.info("Setup theme","Theme: ".concat(At));try{var Yt=document.querySelector("body");Yt==null||Yt.classList.remove("sendbird-theme--light"),Yt==null||Yt.classList.remove("sendbird-theme--dark"),Yt==null||Yt.classList.add("sendbird-theme--".concat(At||"light")),c.info("Finish setup theme")}catch(rn){c.warning("Setup theme failed","".concat(rn))}return function(){try{var rn=document.querySelector("body");rn==null||rn.classList.remove("sendbird-theme--light"),rn==null||rn.classList.remove("sendbird-theme--dark")}catch{}}},[At]),eue(Te);var on=z6(Tt.sdk,c),xn=tue({isConnected:on},{logger:c}),st=q6({isConnected:on},{logger:c}),ct=M.useMemo(function(){return Math.min(t6,Ue??Number.MAX_SAFE_INTEGER)},[Ue]),at=M.useMemo(function(){if(Tt.initialized)return new Joe({sdk:qe,logger:c})},[Tt.initialized]),Pe=M.useMemo(function(){return{common:{enableUsingDefaultUserProfile:je.common.enableUsingDefaultUserProfile},groupChannel:{enableOgtag:ut&&Ve(qe).groupChannel.channel.enableOgtag,enableTypingIndicator:je.groupChannel.channel.enableTypingIndicator,enableReactions:ut&&Ve(qe).groupChannel.channel.enableReactions,enableMention:je.groupChannel.channel.enableMention,replyType:je.groupChannel.channel.replyType,threadReplySelectType:je.groupChannel.channel.threadReplySelectType,enableVoiceMessage:je.groupChannel.channel.enableVoiceMessage,enableDocument:je.groupChannel.channel.input.enableDocument,typingIndicatorTypes:je.groupChannel.channel.typingIndicatorTypes,enableFeedback:je.groupChannel.channel.enableFeedback,enableSuggestedReplies:je.groupChannel.channel.enableSuggestedReplies,showSuggestedRepliesFor:je.groupChannel.channel.showSuggestedRepliesFor,suggestedRepliesDirection:je.groupChannel.channel.suggestedRepliesDirection,enableMarkdownForUserMessage:je.groupChannel.channel.enableMarkdownForUserMessage,enableFormTypeMessage:je.groupChannel.channel.enableFormTypeMessage,enableMarkAsUnread:je.groupChannel.channel.enableMarkAsUnread,enableReactionsSupergroup:ut&&Ve(qe).groupChannel.channel.enableReactionsSupergroup},groupChannelList:{enableTypingIndicator:je.groupChannel.channelList.enableTypingIndicator,enableMessageReceiptStatus:je.groupChannel.channelList.enableMessageReceiptStatus},groupChannelSettings:{enableMessageSearch:ut&&Ve(qe).groupChannel.setting.enableMessageSearch},openChannel:{enableOgtag:ut&&Ve(qe).openChannel.channel.enableOgtag,enableDocument:je.openChannel.channel.input.enableDocument}}},[ut,je.common,je.groupChannel.channel,je.groupChannel.channelList,je.groupChannel.setting,je.openChannel.channel]),he=M.useMemo(function(){return jt??X1},[jt,X1]),He=M.useMemo(function(){return H({compressionRate:.7,outputFormat:"preserve"},w)},[w]),ot=M.useMemo(function(){var Yt,rn;return{maxRecordingTime:(Yt=y==null?void 0:y.maxRecordingTime)!==null&&Yt!==void 0?Yt:X4,minRecordingTime:(rn=y==null?void 0:y.minRecordingTime)!==null&&rn!==void 0?rn:ZN}},[y==null?void 0:y.maxRecordingTime,y==null?void 0:y.minRecordingTime]),nt=M.useMemo(function(){return{maxMentionCount:(xe==null?void 0:xe.maxMentionCount)||10,maxSuggestionCount:(xe==null?void 0:xe.maxSuggestionCount)||15}},[xe==null?void 0:xe.maxMentionCount,xe==null?void 0:xe.maxSuggestionCount]),Zt=M.useMemo(function(){return{disableUserProfile:!je.common.enableUsingDefaultUserProfile,isReactionEnabled:ut&&Ve(qe).groupChannel.channel.enableReactions,isMentionEnabled:je.groupChannel.channel.enableMention,isVoiceMessageEnabled:je.groupChannel.channel.enableVoiceMessage,replyType:XN(je.groupChannel.channel.replyType).upperCase,isTypingIndicatorEnabledOnChannelList:je.groupChannel.channelList.enableTypingIndicator,isMessageReceiptStatusEnabledOnChannelList:je.groupChannel.channelList.enableMessageReceiptStatus,showSearchIcon:ut&&Ve(qe).groupChannel.setting.enableMessageSearch}},[ut,Ve,je.common.enableUsingDefaultUserProfile,je.groupChannel.channel.enableReactions,je.groupChannel.channel.enableMention,je.groupChannel.channel.enableVoiceMessage,je.groupChannel.channel.replyType,je.groupChannel.channelList.enableTypingIndicator,je.groupChannel.channelList.enableMessageReceiptStatus,je.groupChannel.setting.enableMessageSearch]),dt=M.useMemo(function(){return{config:H(H({disableMarkAsDelivered:O,renderUserProfile:B,onStartDirectMessage:ge,onUserProfileMessage:ge,allowProfileEdit:A,isOnline:on,userId:r,appId:t,accessToken:i,theme:At,setCurrentTheme:xt,setCurrenttheme:xt,isMultipleFilesMessageEnabled:K,autoscrollMessageOverflowToTop:te,uikitMultipleFilesMessageLimit:ct,logger:c,pubSub:Ut,userListQuery:S,htmlTextDirection:Te,forceLeftToRightMessageLayout:ce,markAsReadScheduler:xn,markAsDeliveredScheduler:st,uikitUploadSizeLimit:he,imageCompression:He,voiceRecord:ot,userMention:nt},Pe),Zt)}},[O,B,ge,A,on,r,t,i,At,xt,K,te,ct,c,Ut,S,Te,ce,xn,st,he,He,ot,nt,Pe,Zt]),On=M.useMemo(function(){return{utils:{updateMessageTemplatesInfo:vn,getCachedTemplate:un}}},[vn,un]);return lP(function(){$t(H(H(H({},On),dt),{eventHandlers:ne,emojiManager:at}))},[dt,ne,at,On]),null},rue=function(e){var n,t,r,i,a,s,o,l,u,c=e.children,h=e.stringSet,f=e.breakpoint,p=e.dateLocale,_=rc({config:{renderUserProfile:e==null?void 0:e.renderUserProfile,onStartDirectMessage:e==null?void 0:e.onStartDirectMessage,allowProfileEdit:e==null?void 0:e.allowProfileEdit,appId:e==null?void 0:e.appId,userId:e==null?void 0:e.userId,accessToken:e==null?void 0:e.accessToken,theme:e==null?void 0:e.theme,htmlTextDirection:e==null?void 0:e.htmlTextDirection,forceLeftToRightMessageLayout:e==null?void 0:e.forceLeftToRightMessageLayout,pubSub:(n=e==null?void 0:e.config)===null||n===void 0?void 0:n.pubSub,logger:e==null?void 0:e.logger,userListQuery:e==null?void 0:e.userListQuery,voiceRecord:{maxRecordingTime:(r=(t=e==null?void 0:e.voiceRecord)===null||t===void 0?void 0:t.maxRecordingTime)!==null&&r!==void 0?r:X4,minRecordingTime:(a=(i=e==null?void 0:e.voiceRecord)===null||i===void 0?void 0:i.minRecordingTime)!==null&&a!==void 0?a:ZN},userMention:{maxMentionCount:((o=(s=e==null?void 0:e.config)===null||s===void 0?void 0:s.userMention)===null||o===void 0?void 0:o.maxMentionCount)||10,maxSuggestionCount:((u=(l=e==null?void 0:e.config)===null||l===void 0?void 0:l.userMention)===null||u===void 0?void 0:u.maxSuggestionCount)||15},imageCompression:H({compressionRate:.7,outputFormat:"preserve"},e==null?void 0:e.imageCompression),disableMarkAsDelivered:e==null?void 0:e.disableMarkAsDelivered,isMultipleFilesMessageEnabled:e==null?void 0:e.isMultipleFilesMessageEnabled,autoscrollMessageOverflowToTop:e==null?void 0:e.autoscrollMessageOverflowToTop},eventHandlers:e==null?void 0:e.eventHandlers}),g=M.useRef(pae(_)),C=M.useMemo(function(){return H(H({},NE("en")),h)},[h]);return m.createElement(aI.Provider,{value:g.current},m.createElement(Sse,{logger:g.current.getState().config.logger,breakpoint:f},m.createElement(bse,{stringSet:C,dateLocale:p},m.createElement(jle,null,m.createElement(Xoe,null,c)))),m.createElement($le,null),m.createElement(Foe,null),m.createElement(Gle,null))},iue=function(e){var n=e.children,t=e.config,r=t==null?void 0:t.logLevel,i=M.useState(j3(r)),a=i[0],s=i[1];return M.useEffect(function(){s(j3(r))},[r]),m.createElement(rue,H({},e,{logger:a}),m.createElement(nue,H({},e,{logger:a})),n)},aue=function(e){var n=zle({legacyConfig:{replyType:e.replyType,isMentionEnabled:e.isMentionEnabled,isReactionEnabled:e.isReactionEnabled,disableUserProfile:e.disableUserProfile,isVoiceMessageEnabled:e.isVoiceMessageEnabled,isTypingIndicatorEnabledOnChannelList:e.isTypingIndicatorEnabledOnChannelList,isMessageReceiptStatusEnabledOnChannelList:e.isMessageReceiptStatusEnabledOnChannelList,showSearchIcon:e.showSearchIcon},uikitOptions:e.uikitOptions});return m.createElement(K4,{storage:Y4,localConfigs:{common:n==null?void 0:n.common,groupChannel:{channel:n==null?void 0:n.groupChannel,channelList:n==null?void 0:n.groupChannelList,setting:n==null?void 0:n.groupChannelSettings},openChannel:{channel:n==null?void 0:n.openChannel}}},m.createElement(iue,H({},e)))};const Gh={APP_ID:"CDB015BB-B6AE-4A81-BA48-D0F10547185A",IMAGE_COMPRESSION:{compressionRate:.7,resizingWidth:1e3,resizingHeight:1e3},THEME:"light"};function sue({userId:e,nickname:n,children:t}){return de.jsx(aue,{appId:Gh.APP_ID,userId:e,nickname:n,theme:Gh.THEME,imageCompression:Gh.IMAGE_COMPRESSION,config:{logLevel:"warn",userMention:{maxMentionCount:10,maxSuggestionCount:15}},children:t})}var cP=m.createContext({disableUserProfile:!0,isOpenChannel:!1}),Fd=function(){return M.useContext(cP)},dP=function(e){var n,t=e.isOpenChannel,r=t===void 0?!1:t,i=e.disableUserProfile,a=i===void 0?!1:i,s=e.renderUserProfile,o=e.onUserProfileMessage,l=e.onStartDirectMessage,u=e.children,c=en().state,h=c.config,f=(n=l??o)!==null&&n!==void 0?n:h.onStartDirectMessage;return m.createElement(cP.Provider,{value:{isOpenChannel:r,disableUserProfile:a??!h.common.enableUsingDefaultUserProfile,renderUserProfile:s??h.renderUserProfile,onStartDirectMessage:f,onUserProfileMessage:f}},u)},ME=function(){var e=M.useContext(yI);if(!e)throw new Error("useGroupChannelList must be used within a GroupChannelListProvider");var n=M.useCallback(function(i){e.setState(function(a){return H(H({},a),{groupChannels:i})},!0)},[]),t=am.useSyncExternalStore(e.subscribe,e.getState),r=M.useMemo(function(){return{setGroupChannels:n}},[n]);return{state:t,actions:r}},yI=m.createContext(null),hP=function(){return{className:"",selectedChannelUrl:"",disableAutoSelect:!1,allowProfileEdit:!1,isTypingIndicatorEnabled:!1,isMessageReceiptStatusEnabled:!1,onChannelSelect:function(){},onChannelCreated:function(){},onThemeChange:Mn,onCreateChannelClick:Mn,onBeforeCreateChannel:null,onUserProfileUpdated:Mn,typingChannelUrls:[],refreshing:!1,initialized:!1,groupChannels:[],refresh:null,loadMore:null,scrollRef:{current:null}}},oue=function(){return iI(yI,function(e){return e},hP())},lue=function(e){var n,t,r,i,a,s,o=e.className,l=o===void 0?"":o,u=e.selectedChannelUrl,c=u===void 0?"":u,h=e.disableAutoSelect,f=h===void 0?!1:h,p=e.channelListQueryParams,_=e.onThemeChange,g=e.onChannelSelect,C=e.onChannelCreated,E=e.onCreateChannelClick,y=e.onBeforeCreateChannel,S=e.onUserProfileUpdated,I=Hk(e,["className","selectedChannelUrl","disableAutoSelect","channelListQueryParams","onThemeChange","onChannelSelect","onChannelCreated","onCreateChannelClick","onBeforeCreateChannel","onUserProfileUpdated"]),w=en().state,R=w.config,A=w.stores,U=ME(),O=U.state,B=U.actions,F=oue().updateState,P=A.sdkStore,G=P.sdk,L=z6(G,R.logger),$=q6({isConnected:L},R),j=M.useRef(null),X=rX(G,{collectionCreator:hue(G,p),markAsDelivered:function(tt){R.disableMarkAsDelivered||tt.forEach($.push)},onChannelsDeleted:function(tt){tt.forEach(function(ht){ht===c&&g(null)})},onChannelsUpdated:function(){B.setGroupChannels(te)}}),K=X.refreshing,Z=X.initialized,te=X.groupChannels,ne=X.refresh,le=X.loadMore;M.useEffect(function(){var tt;!f&&A.sdkStore.initialized&&Z&&(c||g((tt=te[0])!==null&&tt!==void 0?tt:null))},[f,A.sdkStore.initialized,Z,c]),M.useEffect(function(){ne==null||ne()},[Object.keys(p??{}).sort().map(function(tt){return"".concat(tt,"=").concat(encodeURIComponent(JSON.stringify(p[tt])))}).join("&")]);var Te=O.typingChannelUrls;G4(G,{onTypingStatusUpdated:function(tt){var ht,bt=Te.filter(function(Rt){return Rt!==tt.url});((ht=tt.getTypingUsers())===null||ht===void 0?void 0:ht.length)>0?F({typingChannelUrls:bt.concat(tt.url)}):F({typingChannelUrls:bt})}});var Ze=(t=(n=I.allowProfileEdit)!==null&&n!==void 0?n:R.allowProfileEdit)!==null&&t!==void 0?t:!0,ce=(i=(r=I.isTypingIndicatorEnabled)!==null&&r!==void 0?r:R.groupChannelList.enableTypingIndicator)!==null&&i!==void 0?i:!1,ge=(s=(a=I.isMessageReceiptStatusEnabled)!==null&&a!==void 0?a:R.groupChannelList.enableMessageReceiptStatus)!==null&&s!==void 0?s:!1,Qe=M.useMemo(function(){return{onChannelSelect:g,onChannelCreated:C,onThemeChange:_,onCreateChannelClick:E,onBeforeCreateChannel:y,onUserProfileUpdated:S}},[g,C,_,E,y,S]),xe=M.useMemo(function(){return{className:l,selectedChannelUrl:c,disableAutoSelect:f,allowProfileEdit:Ze,isTypingIndicatorEnabled:ce,isMessageReceiptStatusEnabled:ge,typingChannelUrls:Te,refreshing:K,initialized:Z,refresh:ne,loadMore:le}},[l,c,f,Ze,ce,ge,Te,K,Z,j]);return lP(function(){F(H(H(H({},Qe),xe),{groupChannels:te}))},[xe,Qe,te.map(function(tt){return tt.serialize()})]),null},uue=function(e){return rI(H(H({},hP()),e))},cue=function(e){var n=e.children,t=rc({onChannelSelect:e==null?void 0:e.onChannelSelect,onChannelCreated:e==null?void 0:e.onChannelCreated,className:e==null?void 0:e.className,selectedChannelUrl:e==null?void 0:e.selectedChannelUrl,allowProfileEdit:e==null?void 0:e.allowProfileEdit,disableAutoSelect:e==null?void 0:e.disableAutoSelect,isTypingIndicatorEnabled:e==null?void 0:e.isTypingIndicatorEnabled,isMessageReceiptStatusEnabled:e==null?void 0:e.isMessageReceiptStatusEnabled,channelListQueryParams:e==null?void 0:e.channelListQueryParams,onThemeChange:e==null?void 0:e.onThemeChange,onCreateChannelClick:e==null?void 0:e.onCreateChannelClick,onBeforeCreateChannel:e==null?void 0:e.onBeforeCreateChannel,onUserProfileUpdated:e==null?void 0:e.onUserProfileUpdated}),r=M.useRef(uue(t));return m.createElement(yI.Provider,{value:r.current},n)},due=function(e){var n=e.children,t=e.className;return m.createElement(cue,H({},e),m.createElement(lue,H({},e)),m.createElement(dP,H({},e),m.createElement("div",{className:"sendbird-channel-list ".concat(t)},n)))};function hue(e,n){return function(t){var r=H(H({},t),n);return e.groupChannel.createGroupChannelCollection(H(H({},r),{filter:new pE(r)}))}}var fP=10,vP=15,up="@",fue=1,oo;(function(e){e.PARENT="PARENT",e.THREAD="THREAD"})(oo||(oo={}));var O0=function(e){return e?e.isFrozen&&e.myRole!=="operator":!1},Gp=function(e){return e?e.myMutedState==="muted":!1},K3=function(e,n){var t,r,i,a;return n&&Array.isArray((r=(t=e==null?void 0:e.lastMessage)===null||t===void 0?void 0:t.extendedMessagePayload)===null||r===void 0?void 0:r.suggested_replies)&&!!(!((a=(i=e==null?void 0:e.lastMessage)===null||i===void 0?void 0:i.extendedMessagePayload)===null||a===void 0)&&a.disable_chat_input)},pP=function(e){return e<=fue},W3=function(e,n){return n&&e.some(function(t){var r;return!!t.messageForm&&!t.messageForm.isSubmitted&&!!(!((r=t.extendedMessagePayload)===null||r===void 0)&&r.disable_chat_input)&&pP(t.messageForm.version)})};function mP(e){var n=e.channel,t=e.config,r=e.moduleLevel;return!n||n.isBroadcast||n.isEphemeral?!1:n.isSuper?r??t.groupChannel.enableReactionsSupergroup:r??t.groupChannel.enableReactions}var _i;(function(e){e.CHANNEL="CHANNEL",e.THREAD="THREAD"})(_i||(_i={}));var _P=function(e,n){return!n||n.length===0?!0:n.includes(e)};function Ig(e){return _P(_i.CHANNEL,e)}function vue(e){return _P(_i.THREAD,e)}var Pi;(function(e){e.USER_UPDATED="USER_UPDATED",e.SEND_MESSAGE_START="SEND_MESSAGE_START",e.SEND_MESSAGE_FAILED="SEND_MESSAGE_FAILED",e.SEND_USER_MESSAGE="SEND_USER_MESSAGE",e.SEND_FILE_MESSAGE="SEND_FILE_MESSAGE",e.ON_FILE_INFO_UPLOADED="ON_FILE_INFO_UPLOADED",e.UPDATE_USER_MESSAGE="UPDATE_USER_MESSAGE",e.DELETE_MESSAGE="DELETE_MESSAGE",e.LEAVE_CHANNEL="LEAVE_CHANNEL",e.CREATE_CHANNEL="CREATE_CHANNEL",e.UPDATE_OPEN_CHANNEL="UPDATE_OPEN_CHANNEL"})(Pi||(Pi={}));var Ai=Pi;M.createContext(null);var gP=function(e){var n=e.members;function t(){var r=M.useContext(lr).stringSet;return!n||n.length===0?"":n&&n.length===1?"".concat(n[0].nickname," ").concat(r.TYPING_INDICATOR__IS_TYPING):n&&n.length===2?"".concat(n[0].nickname," ").concat(r.TYPING_INDICATOR__AND," ").concat(n[1].nickname," ").concat(r.TYPING_INDICATOR__ARE_TYPING):r.TYPING_INDICATOR__MULTIPLE_TYPING}return m.createElement(m.Fragment,null,t())},pue=function(e){var n,t,r,i=e.channelUrl,a=en().state,s=(t=(n=a==null?void 0:a.stores)===null||n===void 0?void 0:n.sdkStore)===null||t===void 0?void 0:t.sdk,o=(r=a==null?void 0:a.config)===null||r===void 0?void 0:r.logger,l=M.useState(qs()),u=l[0],c=l[1],h=M.useState([]),f=h[0],p=h[1];return M.useEffect(function(){var _;if(!((_=s==null?void 0:s.groupChannel)===null||_===void 0)&&_.addGroupChannelHandler){s.groupChannel.removeGroupChannelHandler(u);var g=qs(),C=new mE({onTypingStatusUpdated:function(E){if(o.info("Channel > Typing Indicator: onTypingStatusUpdated",E),E.url===i){var y=E.getTypingUsers();p(y)}}});s.groupChannel.addGroupChannelHandler(g,C),c(g)}return function(){var E;p([]),!((E=s==null?void 0:s.groupChannel)===null||E===void 0)&&E.removeGroupChannelHandler&&s.groupChannel.removeGroupChannelHandler(u)}},[i]),m.createElement(Ce,{className:"sendbird-conversation__footer__typing-indicator__text",type:be.CAPTION_2,color:ue.ONBACKGROUND_2},m.createElement(gP,{members:f}))},D0;(function(e){e.Text="text",e.Bubble="bubble"})(D0||(D0={}));function mue(){var e=M.useContext(lr).stringSet;return m.createElement("div",{className:"sendbird-connection-status"},m.createElement(Ce,{type:be.BODY_2,color:ue.ONBACKGROUND_2},e.TRYING_TO_CONNECT),m.createElement(ke,{type:Ne.DISCONNECTED,fillColor:Oe.SENT,width:"14px",height:"14px"}))}function sc(e){var n=e.className,t=n===void 0?"":n,r=e.width,i=r===void 0?"26px":r,a=e.height,s=a===void 0?"26px":a,o=e.children,l=e.testID;return m.createElement("div",{className:we(we([],Array.isArray(t)?t:[t],!0),["sendbird-loader"],!1).join(" "),"data-testid":l,style:{width:typeof i=="string"?i:"".concat(i,"px"),height:typeof s=="string"?s:"".concat(s,"px")}},o||m.createElement(ke,{type:Ne.SPINNER,width:"26px",height:"26px"}))}var gr={LOADING:"LOADING",NO_CHANNELS:"NO_CHANNELS",NO_MESSAGES:"NO_MESSAGES",WRONG:"WRONG",SEARCH_IN:"SEARCH_IN",SEARCHING:"SEARCHING",NO_RESULTS:"NO_RESULTS"};function po(e){var n=e.className,t=n===void 0?"":n,r=e.type,i=e.iconSize,a=e.searchInString,s=a===void 0?"":a,o=e.retryToConnect,l=M.useContext(lr).stringSet;return m.createElement("div",{className:we(we([],Array.isArray(t)?t:[t],!0),["sendbird-place-holder"],!1).join(" ")},r===gr.LOADING&&m.createElement(sc,{width:i||"48px",height:i||"48px"},m.createElement(ke,{type:Ne.SPINNER,fillColor:Oe.PRIMARY,width:i||"48px",height:i||"48px"})),(r===gr.NO_CHANNELS||r===gr.NO_MESSAGES||r===gr.WRONG)&&m.createElement("div",{className:"sendbird-place-holder__body"},r===gr.NO_CHANNELS&&m.createElement(ke,{className:"sendbird-place-holder__body__icon",type:Ne.CHAT,fillColor:Oe.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),r===gr.WRONG&&m.createElement(ke,{className:"sendbird-place-holder__body__icon",type:Ne.ERROR,fillColor:Oe.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),r===gr.NO_MESSAGES&&m.createElement(ke,{className:"sendbird-place-holder__body__icon",type:Ne.MESSAGE,fillColor:Oe.ON_BACKGROUND_3,width:i||"64px",height:i||"64px"}),m.createElement(Ce,{className:"sendbird-place-holder__body__text",type:be.BODY_1,color:ue.ONBACKGROUND_2},r===gr.NO_CHANNELS&&l.PLACE_HOLDER__NO_CHANNEL,r===gr.WRONG&&l.PLACE_HOLDER__WRONG,r===gr.NO_MESSAGES&&l.PLACE_HOLDER__NO_MESSAGES),o&&m.createElement("div",{className:"sendbird-place-holder__body__reconnect",role:"button",onClick:o,onKeyPress:o,tabIndex:0},m.createElement(ke,{className:"sendbird-place-holder__body__reconnect__icon",type:Ne.REFRESH,fillColor:Oe.PRIMARY,width:"20px",height:"20px"}),m.createElement(Ce,{className:"sendbird-place-holder__body__reconnect__text",type:be.BUTTON_1,color:ue.PRIMARY},l.PLACE_HOLDER__RETRY_TO_CONNECT))),(r===gr.NO_RESULTS||r===gr.SEARCH_IN||r===gr.SEARCHING)&&m.createElement("div",{className:"sendbird-place-holder__body--align-top"},r===gr.SEARCH_IN&&m.createElement("div",{className:"sendbird-place-holder__body--align-top__text"},m.createElement(Ce,{className:"sendbird-place-holder__body--align-top__text__search-in",type:be.BUTTON_2,color:ue.ONBACKGROUND_2},l.SEARCH_IN),m.createElement(Ce,{className:"sendbird-place-holder__body--align-top__text__channel-name",type:be.BUTTON_2,color:ue.PRIMARY},"'".concat(s)),m.createElement(Ce,{className:"sendbird-place-holder__body--align-top__text__quote",type:be.BUTTON_2,color:ue.PRIMARY},"'")),r===gr.SEARCHING&&m.createElement(Ce,{className:"sendbird-place-hlder__body--align-top__searching",type:be.BODY_1,color:ue.ONBACKGROUND_2},l.SEARCHING),r===gr.NO_RESULTS&&m.createElement(Ce,{className:"sendbird-place-hlder__body--align-top__no-result",type:be.BODY_1,color:ue.ONBACKGROUND_2},l.NO_SEARCHED_MESSAGE)))}var _ue=function(e){var n,t,r,i,a=e.isLoading,s=e.isInvalid,o=e.channelUrl,l=rc(e),u=l.renderChannelHeader,c=l.renderMessageList,h=l.renderMessageInput,f=l.renderTypingIndicator,p=l.renderPlaceholderLoader,_=l.renderPlaceholderInvalid,g=en().state,C=g.stores,E=g.config,y=(n=C==null?void 0:C.sdkStore)===null||n===void 0?void 0:n.error,S=E.logger,I=E.isOnline;return a?m.createElement("div",{className:"sendbird-conversation"},(p==null?void 0:p())||m.createElement(po,{type:gr.LOADING})):o?s?m.createElement("div",{className:"sendbird-conversation"},(_==null?void 0:_())||m.createElement(po,{type:gr.WRONG})):y?m.createElement("div",{className:"sendbird-conversation"},(_==null?void 0:_())||m.createElement(po,{type:gr.WRONG,retryToConnect:function(){S.info("Channel: reconnecting")}})):m.createElement("div",{className:"sendbird-conversation"},u==null?void 0:u({className:"sendbird-conversation__channel-header"}),c==null?void 0:c(H({},e)),m.createElement("div",{className:"sendbird-conversation__footer"},h==null?void 0:h(),m.createElement("div",{className:"sendbird-conversation__footer__typing-indicator"},(f==null?void 0:f())||((t=E==null?void 0:E.groupChannel)===null||t===void 0?void 0:t.enableTypingIndicator)&&((i=(r=E==null?void 0:E.groupChannel)===null||r===void 0?void 0:r.typingIndicatorTypes)===null||i===void 0?void 0:i.has(D0.Text))&&m.createElement(pue,{channelUrl:o}),!I&&m.createElement(mue,null)))):m.createElement("div",{className:"sendbird-conversation"},(_==null?void 0:_())||m.createElement(po,{type:gr.NO_CHANNELS}))},EP=function(e){if(e!==null)return typeof e=="number"?"".concat(e,"px"):e};function Y3(e,n,t){var r;return"min(".concat(n??t,", ").concat((r=EP(e))!==null&&r!==void 0?r:t,")")}function gue(e){var n=e.width,t=e.height,r=e.maxSideLength,i=e.defaultMinLength,a=M.useMemo(function(){return Y3(n,r,i)},[n]),s=M.useMemo(function(){return Y3(t,r,i)},[t]);return[a,s]}var Eue=function(){var e=M.useState(!1),n=e[0],t=e[1],r=M.useState(null),i=r[0],a=r[1],s=M.useCallback(function(o){o!==null&&a(o)},[]);return M.useEffect(function(){if(i){var o=new IntersectionObserver(function(l){var u=l[0];t(u.isIntersecting)});return o.observe(i),function(){o.disconnect()}}},[i]),[s,n]},yue=function(){var e=M.useRef(!1),n=Eue(),t=n[0],r=n[1];return r&&(e.current=!0),[t,e.current]};function Q3(e,n){return e===void 0&&(e=!1),n===void 0&&(n=null),e?"50%":EP(n)}function bue(e,n,t){var r=typeof e=="string"?parseInt(e,10):e,i=t-1,a=n===0?r*2:r,s=n===1?r*2:r,o=n===i?r*2:r,l=n===i-1?r*2:r;return"".concat(a,"px ").concat(s,"px ").concat(o,"px ").concat(l,"px")}var wr=function(e){var n=e.className,t=n===void 0?"":n,r=e.url,i=e.alt,a=i===void 0?"":i,s=e.width,o=s===void 0?null:s,l=e.maxSideLength,u=l===void 0?null:l,c=e.height,h=c===void 0?null:c,f=e.circle,p=f===void 0?!1:f,_=e.fixedSize,g=_===void 0?!1:_,C=e.placeHolder,E=C===void 0?null:C,y=e.defaultComponent,S=y===void 0?null:y,I=e.borderRadius,w=I===void 0?null:I,R=e.onLoad,A=R===void 0?Mn:R,U=e.onError,O=U===void 0?Mn:U,B=e.shadeOnHover,F=e.isUploaded,P=F===void 0?!0:F,G=yue(),L=G[0],$=G[1],j=$?r:null,X=M.useState(!1),K=X[0],Z=X[1],te=M.useState(!0),ne=te[0],le=te[1],Te=gue({width:o,height:h,maxSideLength:u,defaultMinLength:"400px"}),Ze=Te[0],ce=Te[1],ge=function(){return typeof E=="function"?E({style:{width:"100%",minWidth:Ze,maxWidth:g?Ze:"400px",height:ce,position:"absolute",display:"flex",justifyContent:"center",alignItems:"center"}}):E},Qe=function(){return typeof S=="function"?S():S},xe=function(){var tt=j?{backgroundRepeat:"no-repeat",backgroundPosition:"center",backgroundSize:"cover",backgroundImage:"url(".concat(j,")")}:{};return m.createElement("div",{className:"sendbird-image-renderer__image",style:H({width:"100%",minWidth:Ze,maxWidth:g?Ze:"400px",height:ce,position:"absolute",borderRadius:Q3(p,w)},tt)})};return Ze&&ce&&m.createElement("div",{ref:L,className:we(we([],Array.isArray(t)?t:[t],!0),["sendbird-image-renderer"],!1).join(" "),style:{width:"100%",minWidth:Ze,maxWidth:g?Ze:"400px",height:ce}},ne&&ge(),!j||K?Qe():xe(),B&&m.createElement("div",{className:"sendbird-multiple-files-image-renderer__image-cover",style:H({borderRadius:Q3(p,w)},P?{}:{display:"inline-flex"})}),j&&m.createElement(Cue,{src:j,alt:a,onLoadStart:function(){le(!0),Z(!1)},onLoad:function(){le(!1),Z(!1),A()},onError:function(){le(!1),Z(!0),O()}}))},Cue=function(e){var n=e.src,t=e.alt,r=e.onLoadStart,i=r===void 0?Mn:r,a=e.onLoad,s=a===void 0?Mn:a,o=e.onError,l=o===void 0?Mn:o,u=M.useRef({currSrc:n,prevSrc:n,loadFailure:!1});return u.current.currSrc!==n&&(u.current.prevSrc=u.current.currSrc,u.current.currSrc=n),M.useLayoutEffect(function(){if(n){var c=u.current.prevSrc!==u.current.currSrc,h=u.current.loadFailure;(c||h)&&i()}},[n,navigator.onLine]),m.createElement("img",{className:"sendbird-image-renderer__hidden-image-loader",src:n,alt:t,onLoad:function(){u.current.loadFailure=!1,s()},onError:function(){u.current.loadFailure=!0,l()}})},sf=function(e){if(typeof e=="number")return e;if(typeof e=="string"){var n=Number.parseFloat(e);if(!Number.isNaN(n))return n}return NaN},yP=function(e){var n=e.width,t=e.height,r=e.text,i=sf(n),a=sf(t);return typeof i=="number"&&!Number.isNaN(i)&&(i*=.575),typeof a=="number"&&!Number.isNaN(a)&&(a*=.575),m.createElement("div",{className:fn("sendbird-avatar-img--default",r&&"text"),style:{width:n,height:t}},r?m.createElement("div",{className:"sendbird-avatar-text"},r):m.createElement(ke,{type:Ne.USER,fillColor:Oe.CONTENT,width:i,height:a}))},fl="sendbird-avatar-img",Sue=function(e){var n=e.src,t=n===void 0?"":n,r=e.alt,i=r===void 0?"":r,a=e.height,s=e.width,o=e.customDefaultComponent,l=function(){return o?o({width:s,height:a}):m.createElement(yP,{width:s,height:a})};return typeof t=="string"?m.createElement(wr,{className:fl,url:t,height:a,width:s,alt:i,defaultComponent:l}):t&&t.length?t.length===1?m.createElement(wr,{className:fl,url:t[0],height:a,width:s,alt:i,defaultComponent:l}):t.length===2?m.createElement("div",{className:"sendbird-avatar--inner__two-child"},m.createElement(wr,{className:fl,url:t[0],height:a,width:s,alt:i,defaultComponent:l}),m.createElement(wr,{className:fl,url:t[1],height:a,width:s,alt:i,defaultComponent:l})):t.length===3?m.createElement(m.Fragment,null,m.createElement("div",{className:"sendbird-avatar--inner__three-child--upper"},m.createElement(wr,{className:fl,url:t[0],height:a,width:s,alt:i,defaultComponent:l})),m.createElement("div",{className:"sendbird-avatar--inner__three-child--lower"},m.createElement(wr,{className:fl,url:t[1],height:a,width:s,alt:i,defaultComponent:l}),m.createElement(wr,{className:fl,url:t[2],height:a,width:s,alt:i,defaultComponent:l}))):m.createElement("div",{className:"sendbird-avatar--inner__four-child"},t.slice(0,4).map(function(u,c){return m.createElement(wr,{className:fl,url:u,height:a,width:s,alt:i,key:"".concat(u,"-").concat(c),defaultComponent:l})})):m.createElement(wr,{className:fl,url:"",height:a,width:s,alt:i,defaultComponent:l})};function Tue(e,n){var t=e.className,r=t===void 0?"":t,i=e.src,a=i===void 0?"":i,s=e.alt,o=s===void 0?"":s,l=e.width,u=l===void 0?"56px":l,c=e.height,h=c===void 0?"56px":c,f=e.zIndex,p=f===void 0?0:f,_=e.left,g=_===void 0?"":_,C=e.bottom,E=C===void 0?"":C,y=e.onClick,S=e.customDefaultComponent;return m.createElement("div",{className:we(we([],Array.isArray(r)?r:[r],!0),["sendbird-avatar"],!1).join(" "),role:"button",ref:n,style:{height:h,width:u,zIndex:p,left:g,bottom:E},onClick:y,onKeyDown:y,tabIndex:0},m.createElement(Sue,{src:a,width:u,height:h,alt:o,customDefaultComponent:S}))}var Ui=m.forwardRef(Tue),bP="https://static.sendbird.com/sample/cover/cover_",lC=function(e,n){return e!=null&&e.coverUrl&&!new RegExp("^".concat(bP)).test(e.coverUrl)?e.coverUrl:((e==null?void 0:e.members)||[]).filter(function(t){return t.userId!==n}).map(function(t){var r=t.profileUrl;return r})},Nue=function(e){return e!=null&&e.coverUrl?!!new RegExp("^".concat(bP)).test(e.coverUrl):!0};function CP(e){var n=e.channel,t=e.userId,r=e.theme,i=e.width,a=i===void 0?56:i,s=e.height,o=s===void 0?56:s,l=n==null?void 0:n.isBroadcast,u=M.useMemo(function(){return l?Nue(n)?m.createElement("div",{className:"sendbird-chat-header--default-avatar",style:{width:a,height:o,display:"flex",justifyContent:"center",alignItems:"center"}},m.createElement(ke,{type:Ne.BROADCAST,fillColor:Oe.CONTENT,width:a*.575,height:o*.575})):m.createElement(Ui,{className:"sendbird-chat-header--avatar--broadcast-channel",src:lC(n,t),width:a,height:o,alt:n==null?void 0:n.name}):m.createElement(Ui,{className:"sendbird-chat-header--avatar--group-channel",src:lC(n,t),width:"".concat(a,"px"),height:"".concat(o,"px"),alt:n==null?void 0:n.name})},[lC(n,t),r]);return m.createElement(m.Fragment,null,u)}var Iue=function(e,n,t){var r,i=t||kd;return!(e!=null&&e.name)&&!(e!=null&&e.members)?i.NO_TITLE:iP(e)?((r=e==null?void 0:e.members)===null||r===void 0?void 0:r.length)===1?i.NO_MEMBERS:e==null?void 0:e.members.filter(function(a){var s=a.userId;return s!==n}).map(function(a){var s=a.nickname;return s||i.NO_NAME}).join(", "):e.name},La;(function(e){e.ONBACKGROUND_1="ONBACKGROUND_1",e.ONBACKGROUND_2="ONBACKGROUND_2",e.ONBACKGROUND_3="ONBACKGROUND_3",e.ONBACKGROUND_4="ONBACKGROUND_4",e.ONCONTENT_1="ONCONTENT_1",e.PRIMARY="PRIMARY",e.ERROR="ERROR"})(La||(La={}));var $p=function(e){switch(e){case La.ONBACKGROUND_1:return"sendbird-color--onbackground-1";case La.ONBACKGROUND_2:return"sendbird-color--onbackground-2";case La.ONBACKGROUND_3:return"sendbird-color--onbackground-3";case La.ONBACKGROUND_4:return"sendbird-color--onbackground-4";case La.ONCONTENT_1:return"sendbird-color--oncontent-1";case La.PRIMARY:return"sendbird-color--primary";case La.ERROR:return"sendbird-color--error";default:return""}},Ef=function(e){var n=e.className,t=n===void 0?"":n,r=e.color,i=r===void 0?La.ONBACKGROUND_1:r,a=e.disabled,s=a===void 0?!1:a,o=e.disableUnderline,l=o===void 0?!1:o,u=e.onClick,c=u===void 0?function(){}:u,h=e.children;return m.createElement("div",{className:we(we([],Array.isArray(t)?t:[t],!0),[$p(i),l?"sendbird-textbutton--not-underline":"sendbird-textbutton",s?"sendbird-textbutton--disabled":""],!1).join(" "),role:"button",tabIndex:0,onClick:function(f){return c(f)},onKeyPress:function(f){return c(f)}},h)},Mue=function(e){var n,t=e.className,r=e.renderLeft,i=e.renderRight,a=e.renderMiddle,s=!1;try{s=(n=si==null?void 0:si())===null||n===void 0?void 0:n.isMobile}catch{}return m.createElement("div",{className:fn("sendbird-ui-header",t),"data-testid":"sendbird-ui-header"},r?m.createElement("div",{className:fn("sendbird-ui-header__left",s?"sendbird-ui-header--is-mobile":"sendbird-ui-header--is-desktop")},r==null?void 0:r()):null,m.createElement("div",{className:"sendbird-ui-header__middle"},a==null?void 0:a()),i?m.createElement("div",{className:fn("sendbird-ui-header__right",s?"sendbird-ui-header--is-mobile":"sendbird-ui-header--is-desktop")},i==null?void 0:i()):null)},Aue=function(e){var n=e.title,t=e.subtitle,r=e.onClickSubtitle;return m.createElement("div",{className:"sendbird-ui-header__middle"},n&&m.createElement(Ce,{className:"sendbird-ui-header__middle__title",type:be.H_2,color:ue.ONBACKGROUND_1},n),t&&(r?m.createElement(Ef,{className:"sendbird-ui-header__middle__subtitle__container",onClick:r,disableUnderline:!0},m.createElement(Ce,{className:"sendbird-ui-header__middle__subtitle",type:be.CAPTION_3,color:ue.ONBACKGROUND_2},t)):m.createElement(Ce,{className:"sendbird-ui-header__middle__subtitle",type:be.BODY_1,color:ue.ONBACKGROUND_2},t)))},wue=function(e){var n=e.className,t=e.onClick,r=e.type,i=e.color,a=e.width,s=a===void 0?"32px":a,o=e.height,l=o===void 0?"32px":o,u=e.renderIcon,c=u===void 0?function(h){return m.createElement(SP,H({},h))}:u;return m.createElement(ps,{className:n,width:s,height:l,onClick:t},c({type:r,color:i}))},SP=function(e){var n=e.className,t=e.type,r=e.color,i=e.width,a=i===void 0?"22px":i,s=e.height,o=s===void 0?"22px":s,l=e.onClick,u=l===void 0?Mn:l;return m.createElement(ke,{className:n,type:t,fillColor:r,width:a,height:o,onClick:function(c){return u==null?void 0:u(c)}})},pl=Object.assign(Mue,{Title:Aue,IconButton:wue,Icon:SP}),Rue=function(e){var n=e.className,t=e.currentChannel,r=e.showSearchIcon,i=e.onBackClick,a=e.onSearchClick,s=e.onChatHeaderActionClick,o=e.renderLeft,l=e.renderMiddle,u=e.renderRight,c=en().state,h=c.config,f=h.userId,p=h.theme,_=si().isMobile,g=tn().stringSet,C=(t==null?void 0:t.myMutedState)==="muted",E=Iue(t,f,g);return m.createElement(pl,{className:fn("sendbird-chat-header",n),renderLeft:o??function(){return m.createElement(m.Fragment,null,_&&m.createElement(pl.Icon,{className:"sendbird-chat-header__icon_back",onClick:i,type:Ne.ARROW_LEFT,color:Oe.PRIMARY,width:"24px",height:"24px"}),m.createElement(CP,{theme:p,channel:t,userId:f,height:32,width:32}))},renderMiddle:l??function(){return m.createElement(pl.Title,{title:E})},renderRight:u??function(){return m.createElement(m.Fragment,null,C&&m.createElement(pl.Icon,{className:"sendbird-chat-header__right__mute",type:Ne.NOTIFICATIONS_OFF_FILLED,color:Oe.ON_BACKGROUND_2,width:"24px",height:"24px"}),r&&!(t!=null&&t.isEphemeral)&&m.createElement(pl.IconButton,{className:"sendbird-chat-header__right__search",onClick:a,type:Ne.SEARCH,color:Oe.PRIMARY,renderIcon:function(y){return m.createElement(pl.Icon,H({},y,{width:"24px",height:"24px"}))}}),m.createElement(pl.IconButton,{className:"sendbird-chat-header__right__info",onClick:s,type:Ne.INFO,color:Oe.PRIMARY,renderIcon:function(y){return m.createElement(pl.Icon,H({},y,{width:"24px",height:"24px"}))}}))}})};function Oue(e){return $r(1,arguments),e instanceof Date||A0(e)==="object"&&Object.prototype.toString.call(e)==="[object Date]"}function Due(e){if($r(1,arguments),!Oue(e)&&typeof e!="number")return!1;var n=za(e);return!isNaN(Number(n))}function zl(e){if(e===null||e===!0||e===!1)return NaN;var n=Number(e);return isNaN(n)?n:n<0?Math.ceil(n):Math.floor(n)}function Uue(e,n){$r(2,arguments);var t=za(e).getTime(),r=zl(n);return new Date(t+r)}function Lue(e,n){$r(2,arguments);var t=zl(n);return Uue(e,-t)}var kue=864e5;function xue(e){$r(1,arguments);var n=za(e),t=n.getTime();n.setUTCMonth(0,1),n.setUTCHours(0,0,0,0);var r=n.getTime(),i=t-r;return Math.floor(i/kue)+1}function U0(e){$r(1,arguments);var n=1,t=za(e),r=t.getUTCDay(),i=(r<n?7:0)+r-n;return t.setUTCDate(t.getUTCDate()-i),t.setUTCHours(0,0,0,0),t}function TP(e){$r(1,arguments);var n=za(e),t=n.getUTCFullYear(),r=new Date(0);r.setUTCFullYear(t+1,0,4),r.setUTCHours(0,0,0,0);var i=U0(r),a=new Date(0);a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0);var s=U0(a);return n.getTime()>=i.getTime()?t+1:n.getTime()>=s.getTime()?t:t-1}function Pue(e){$r(1,arguments);var n=TP(e),t=new Date(0);t.setUTCFullYear(n,0,4),t.setUTCHours(0,0,0,0);var r=U0(t);return r}var Fue=6048e5;function Bue(e){$r(1,arguments);var n=za(e),t=U0(n).getTime()-Pue(n).getTime();return Math.round(t/Fue)+1}var Hue={};function AE(){return Hue}function L0(e,n){var t,r,i,a,s,o,l,u;$r(1,arguments);var c=AE(),h=zl((t=(r=(i=(a=n==null?void 0:n.weekStartsOn)!==null&&a!==void 0?a:n==null||(s=n.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.weekStartsOn)!==null&&i!==void 0?i:c.weekStartsOn)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.weekStartsOn)!==null&&t!==void 0?t:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var f=za(e),p=f.getUTCDay(),_=(p<h?7:0)+p-h;return f.setUTCDate(f.getUTCDate()-_),f.setUTCHours(0,0,0,0),f}function NP(e,n){var t,r,i,a,s,o,l,u;$r(1,arguments);var c=za(e),h=c.getUTCFullYear(),f=AE(),p=zl((t=(r=(i=(a=n==null?void 0:n.firstWeekContainsDate)!==null&&a!==void 0?a:n==null||(s=n.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:f.firstWeekContainsDate)!==null&&r!==void 0?r:(l=f.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var _=new Date(0);_.setUTCFullYear(h+1,0,p),_.setUTCHours(0,0,0,0);var g=L0(_,n),C=new Date(0);C.setUTCFullYear(h,0,p),C.setUTCHours(0,0,0,0);var E=L0(C,n);return c.getTime()>=g.getTime()?h+1:c.getTime()>=E.getTime()?h:h-1}function Gue(e,n){var t,r,i,a,s,o,l,u;$r(1,arguments);var c=AE(),h=zl((t=(r=(i=(a=n==null?void 0:n.firstWeekContainsDate)!==null&&a!==void 0?a:n==null||(s=n.locale)===null||s===void 0||(o=s.options)===null||o===void 0?void 0:o.firstWeekContainsDate)!==null&&i!==void 0?i:c.firstWeekContainsDate)!==null&&r!==void 0?r:(l=c.locale)===null||l===void 0||(u=l.options)===null||u===void 0?void 0:u.firstWeekContainsDate)!==null&&t!==void 0?t:1),f=NP(e,n),p=new Date(0);p.setUTCFullYear(f,0,h),p.setUTCHours(0,0,0,0);var _=L0(p,n);return _}var $ue=6048e5;function Vue(e,n){$r(1,arguments);var t=za(e),r=L0(t,n).getTime()-Gue(t,n).getTime();return Math.round(r/$ue)+1}function dr(e,n){for(var t=e<0?"-":"",r=Math.abs(e).toString();r.length<n;)r="0"+r;return t+r}var fu={y:function(n,t){var r=n.getUTCFullYear(),i=r>0?r:1-r;return dr(t==="yy"?i%100:i,t.length)},M:function(n,t){var r=n.getUTCMonth();return t==="M"?String(r+1):dr(r+1,2)},d:function(n,t){return dr(n.getUTCDate(),t.length)},a:function(n,t){var r=n.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.toUpperCase();case"aaa":return r;case"aaaaa":return r[0];case"aaaa":default:return r==="am"?"a.m.":"p.m."}},h:function(n,t){return dr(n.getUTCHours()%12||12,t.length)},H:function(n,t){return dr(n.getUTCHours(),t.length)},m:function(n,t){return dr(n.getUTCMinutes(),t.length)},s:function(n,t){return dr(n.getUTCSeconds(),t.length)},S:function(n,t){var r=t.length,i=n.getUTCMilliseconds(),a=Math.floor(i*Math.pow(10,r-3));return dr(a,t.length)}},hh={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},zue={G:function(n,t,r){var i=n.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return r.era(i,{width:"abbreviated"});case"GGGGG":return r.era(i,{width:"narrow"});case"GGGG":default:return r.era(i,{width:"wide"})}},y:function(n,t,r){if(t==="yo"){var i=n.getUTCFullYear(),a=i>0?i:1-i;return r.ordinalNumber(a,{unit:"year"})}return fu.y(n,t)},Y:function(n,t,r,i){var a=NP(n,i),s=a>0?a:1-a;if(t==="YY"){var o=s%100;return dr(o,2)}return t==="Yo"?r.ordinalNumber(s,{unit:"year"}):dr(s,t.length)},R:function(n,t){var r=TP(n);return dr(r,t.length)},u:function(n,t){var r=n.getUTCFullYear();return dr(r,t.length)},Q:function(n,t,r){var i=Math.ceil((n.getUTCMonth()+1)/3);switch(t){case"Q":return String(i);case"QQ":return dr(i,2);case"Qo":return r.ordinalNumber(i,{unit:"quarter"});case"QQQ":return r.quarter(i,{width:"abbreviated",context:"formatting"});case"QQQQQ":return r.quarter(i,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(i,{width:"wide",context:"formatting"})}},q:function(n,t,r){var i=Math.ceil((n.getUTCMonth()+1)/3);switch(t){case"q":return String(i);case"qq":return dr(i,2);case"qo":return r.ordinalNumber(i,{unit:"quarter"});case"qqq":return r.quarter(i,{width:"abbreviated",context:"standalone"});case"qqqqq":return r.quarter(i,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(i,{width:"wide",context:"standalone"})}},M:function(n,t,r){var i=n.getUTCMonth();switch(t){case"M":case"MM":return fu.M(n,t);case"Mo":return r.ordinalNumber(i+1,{unit:"month"});case"MMM":return r.month(i,{width:"abbreviated",context:"formatting"});case"MMMMM":return r.month(i,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(i,{width:"wide",context:"formatting"})}},L:function(n,t,r){var i=n.getUTCMonth();switch(t){case"L":return String(i+1);case"LL":return dr(i+1,2);case"Lo":return r.ordinalNumber(i+1,{unit:"month"});case"LLL":return r.month(i,{width:"abbreviated",context:"standalone"});case"LLLLL":return r.month(i,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(i,{width:"wide",context:"standalone"})}},w:function(n,t,r,i){var a=Vue(n,i);return t==="wo"?r.ordinalNumber(a,{unit:"week"}):dr(a,t.length)},I:function(n,t,r){var i=Bue(n);return t==="Io"?r.ordinalNumber(i,{unit:"week"}):dr(i,t.length)},d:function(n,t,r){return t==="do"?r.ordinalNumber(n.getUTCDate(),{unit:"date"}):fu.d(n,t)},D:function(n,t,r){var i=xue(n);return t==="Do"?r.ordinalNumber(i,{unit:"dayOfYear"}):dr(i,t.length)},E:function(n,t,r){var i=n.getUTCDay();switch(t){case"E":case"EE":case"EEE":return r.day(i,{width:"abbreviated",context:"formatting"});case"EEEEE":return r.day(i,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(i,{width:"short",context:"formatting"});case"EEEE":default:return r.day(i,{width:"wide",context:"formatting"})}},e:function(n,t,r,i){var a=n.getUTCDay(),s=(a-i.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return dr(s,2);case"eo":return r.ordinalNumber(s,{unit:"day"});case"eee":return r.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return r.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(a,{width:"short",context:"formatting"});case"eeee":default:return r.day(a,{width:"wide",context:"formatting"})}},c:function(n,t,r,i){var a=n.getUTCDay(),s=(a-i.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return dr(s,t.length);case"co":return r.ordinalNumber(s,{unit:"day"});case"ccc":return r.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return r.day(a,{width:"narrow",context:"standalone"});case"cccccc":return r.day(a,{width:"short",context:"standalone"});case"cccc":default:return r.day(a,{width:"wide",context:"standalone"})}},i:function(n,t,r){var i=n.getUTCDay(),a=i===0?7:i;switch(t){case"i":return String(a);case"ii":return dr(a,t.length);case"io":return r.ordinalNumber(a,{unit:"day"});case"iii":return r.day(i,{width:"abbreviated",context:"formatting"});case"iiiii":return r.day(i,{width:"narrow",context:"formatting"});case"iiiiii":return r.day(i,{width:"short",context:"formatting"});case"iiii":default:return r.day(i,{width:"wide",context:"formatting"})}},a:function(n,t,r){var i=n.getUTCHours(),a=i/12>=1?"pm":"am";switch(t){case"a":case"aa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function(n,t,r){var i=n.getUTCHours(),a;switch(i===12?a=hh.noon:i===0?a=hh.midnight:a=i/12>=1?"pm":"am",t){case"b":case"bb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function(n,t,r){var i=n.getUTCHours(),a;switch(i>=17?a=hh.evening:i>=12?a=hh.afternoon:i>=4?a=hh.morning:a=hh.night,t){case"B":case"BB":case"BBB":return r.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return r.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function(n,t,r){if(t==="ho"){var i=n.getUTCHours()%12;return i===0&&(i=12),r.ordinalNumber(i,{unit:"hour"})}return fu.h(n,t)},H:function(n,t,r){return t==="Ho"?r.ordinalNumber(n.getUTCHours(),{unit:"hour"}):fu.H(n,t)},K:function(n,t,r){var i=n.getUTCHours()%12;return t==="Ko"?r.ordinalNumber(i,{unit:"hour"}):dr(i,t.length)},k:function(n,t,r){var i=n.getUTCHours();return i===0&&(i=24),t==="ko"?r.ordinalNumber(i,{unit:"hour"}):dr(i,t.length)},m:function(n,t,r){return t==="mo"?r.ordinalNumber(n.getUTCMinutes(),{unit:"minute"}):fu.m(n,t)},s:function(n,t,r){return t==="so"?r.ordinalNumber(n.getUTCSeconds(),{unit:"second"}):fu.s(n,t)},S:function(n,t){return fu.S(n,t)},X:function(n,t,r,i){var a=i._originalDate||n,s=a.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return Z3(s);case"XXXX":case"XX":return Fc(s);case"XXXXX":case"XXX":default:return Fc(s,":")}},x:function(n,t,r,i){var a=i._originalDate||n,s=a.getTimezoneOffset();switch(t){case"x":return Z3(s);case"xxxx":case"xx":return Fc(s);case"xxxxx":case"xxx":default:return Fc(s,":")}},O:function(n,t,r,i){var a=i._originalDate||n,s=a.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+X3(s,":");case"OOOO":default:return"GMT"+Fc(s,":")}},z:function(n,t,r,i){var a=i._originalDate||n,s=a.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+X3(s,":");case"zzzz":default:return"GMT"+Fc(s,":")}},t:function(n,t,r,i){var a=i._originalDate||n,s=Math.floor(a.getTime()/1e3);return dr(s,t.length)},T:function(n,t,r,i){var a=i._originalDate||n,s=a.getTime();return dr(s,t.length)}};function X3(e,n){var t=e>0?"-":"+",r=Math.abs(e),i=Math.floor(r/60),a=r%60;if(a===0)return t+String(i);var s=n;return t+String(i)+s+dr(a,2)}function Z3(e,n){if(e%60===0){var t=e>0?"-":"+";return t+dr(Math.abs(e)/60,2)}return Fc(e,n)}function Fc(e,n){var t=n||"",r=e>0?"-":"+",i=Math.abs(e),a=dr(Math.floor(i/60),2),s=dr(i%60,2);return r+a+t+s}var J3=function(n,t){switch(n){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},IP=function(n,t){switch(n){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},jue=function(n,t){var r=n.match(/(P+)(p+)?/)||[],i=r[1],a=r[2];if(!a)return J3(n,t);var s;switch(i){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",J3(i,t)).replace("{{time}}",IP(a,t))},que={p:IP,P:jue};function Kue(e){var n=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()));return n.setUTCFullYear(e.getFullYear()),e.getTime()-n.getTime()}var Wue=["D","DD"],Yue=["YY","YYYY"];function Que(e){return Wue.indexOf(e)!==-1}function Xue(e){return Yue.indexOf(e)!==-1}function eD(e,n,t){if(e==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(n,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(n,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(n,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(e==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(n,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var Zue=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,Jue=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,ece=/^'([^]*?)'?$/,tce=/''/g,nce=/[a-zA-Z]/;function _a(e,n,t){var r,i,a,s,o,l,u,c,h,f,p,_,g,C,E,y,S,I;$r(2,arguments);var w=String(n),R=AE(),A=(r=(i=t==null?void 0:t.locale)!==null&&i!==void 0?i:R.locale)!==null&&r!==void 0?r:A6,U=zl((a=(s=(o=(l=t==null?void 0:t.firstWeekContainsDate)!==null&&l!==void 0?l:t==null||(u=t.locale)===null||u===void 0||(c=u.options)===null||c===void 0?void 0:c.firstWeekContainsDate)!==null&&o!==void 0?o:R.firstWeekContainsDate)!==null&&s!==void 0?s:(h=R.locale)===null||h===void 0||(f=h.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(U>=1&&U<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var O=zl((p=(_=(g=(C=t==null?void 0:t.weekStartsOn)!==null&&C!==void 0?C:t==null||(E=t.locale)===null||E===void 0||(y=E.options)===null||y===void 0?void 0:y.weekStartsOn)!==null&&g!==void 0?g:R.weekStartsOn)!==null&&_!==void 0?_:(S=R.locale)===null||S===void 0||(I=S.options)===null||I===void 0?void 0:I.weekStartsOn)!==null&&p!==void 0?p:0);if(!(O>=0&&O<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!A.localize)throw new RangeError("locale must contain localize property");if(!A.formatLong)throw new RangeError("locale must contain formatLong property");var B=za(e);if(!Due(B))throw new RangeError("Invalid time value");var F=Kue(B),P=Lue(B,F),G={firstWeekContainsDate:U,weekStartsOn:O,locale:A,_originalDate:B},L=w.match(Jue).map(function($){var j=$[0];if(j==="p"||j==="P"){var X=que[j];return X($,A.formatLong)}return $}).join("").match(Zue).map(function($){if($==="''")return"'";var j=$[0];if(j==="'")return rce($);var X=zue[j];if(X)return!(t!=null&&t.useAdditionalWeekYearTokens)&&Xue($)&&eD($,n,String(e)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&Que($)&&eD($,n,String(e)),X(P,$,A.localize,G);if(j.match(nce))throw new RangeError("Format string contains an unescaped latin alphabet character `"+j+"`");return $}).join("");return L}function rce(e){var n=e.match(ece);return n?n[1].replace(tce,"'"):e}function tD(e){if(e){var n=e.querySelectorAll("[data-sb-mention='true']"),t=Array.from(n);return t}return[]}function bI(e,n){var t=e.ref,r=n.logger,i=t.current,a=M.useState([]),s=a[0],o=a[1];return M.useLayoutEffect(function(){if(i){var l=tD(i);o(l)}},[i]),M.useEffect(function(){var l={childList:!0,subtree:!0},u=function(h){var f=h.length>0;f&&o(tD(i))},c=new MutationObserver(u);return i&&c.observe(i,l),function(){try{c.disconnect()}catch{r.error("useDirtyGetMentions: observer disconnect failed",{observer:c})}}},[i]),s}var MP=function(e){var n=e.children,t=n===void 0?void 0:n,r=e.className,i=r===void 0?"":r,a=e.separatorColor,s=a===void 0?La.ONBACKGROUND_4:a;return m.createElement("div",{className:we(we([],Array.isArray(i)?i:[i],!0),["sendbird-separator"],!1).join(" ")},m.createElement("div",{className:["sendbird-separator__left","".concat($p(s),"--background-color")].join(" ")}),m.createElement("div",{className:"sendbird-separator__text"},t||m.createElement(Ce,{type:be.CAPTION_2,color:ue.ONBACKGROUND_2},"Date Separator")),m.createElement("div",{className:["sendbird-separator__right","".concat($p(s),"--background-color")].join(" ")}))},Va={Enter:"Enter",ArrowUp:"ArrowUp",ArrowDown:"ArrowDown",Backspace:"Backspace"},gT={ElementNode:1,TextNode:3},uC={Span:"SPAN",Br:"BR",Div:"DIV"};/*! @license DOMPurify 3.3.1 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.1/LICENSE */const{entries:AP,setPrototypeOf:nD,isFrozen:ice,getPrototypeOf:ace,getOwnPropertyDescriptor:sce}=Object;let{freeze:Ca,seal:Ks,create:ET}=Object,{apply:yT,construct:bT}=typeof Reflect<"u"&&Reflect;Ca||(Ca=function(n){return n});Ks||(Ks=function(n){return n});yT||(yT=function(n,t){for(var r=arguments.length,i=new Array(r>2?r-2:0),a=2;a<r;a++)i[a-2]=arguments[a];return n.apply(t,i)});bT||(bT=function(n){for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return new n(...r)});const q_=Sa(Array.prototype.forEach),oce=Sa(Array.prototype.lastIndexOf),rD=Sa(Array.prototype.pop),fv=Sa(Array.prototype.push),lce=Sa(Array.prototype.splice),Mg=Sa(String.prototype.toLowerCase),cC=Sa(String.prototype.toString),dC=Sa(String.prototype.match),vv=Sa(String.prototype.replace),uce=Sa(String.prototype.indexOf),cce=Sa(String.prototype.trim),ao=Sa(Object.prototype.hasOwnProperty),ca=Sa(RegExp.prototype.test),pv=dce(TypeError);function Sa(e){return function(n){n instanceof RegExp&&(n.lastIndex=0);for(var t=arguments.length,r=new Array(t>1?t-1:0),i=1;i<t;i++)r[i-1]=arguments[i];return yT(e,n,r)}}function dce(e){return function(){for(var n=arguments.length,t=new Array(n),r=0;r<n;r++)t[r]=arguments[r];return bT(e,t)}}function Ln(e,n){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Mg;nD&&nD(e,null);let r=n.length;for(;r--;){let i=n[r];if(typeof i=="string"){const a=t(i);a!==i&&(ice(n)||(n[r]=a),i=a)}e[i]=!0}return e}function hce(e){for(let n=0;n<e.length;n++)ao(e,n)||(e[n]=null);return e}function xo(e){const n=ET(null);for(const[t,r]of AP(e))ao(e,t)&&(Array.isArray(r)?n[t]=hce(r):r&&typeof r=="object"&&r.constructor===Object?n[t]=xo(r):n[t]=r);return n}function mv(e,n){for(;e!==null;){const r=sce(e,n);if(r){if(r.get)return Sa(r.get);if(typeof r.value=="function")return Sa(r.value)}e=ace(e)}function t(){return null}return t}const iD=Ca(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),hC=Ca(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),fC=Ca(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),fce=Ca(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),vC=Ca(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),vce=Ca(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),aD=Ca(["#text"]),sD=Ca(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),pC=Ca(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),oD=Ca(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),K_=Ca(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),pce=Ks(/\{\{[\w\W]*|[\w\W]*\}\}/gm),mce=Ks(/<%[\w\W]*|[\w\W]*%>/gm),_ce=Ks(/\$\{[\w\W]*/gm),gce=Ks(/^data-[\-\w.\u00B7-\uFFFF]+$/),Ece=Ks(/^aria-[\-\w]+$/),wP=Ks(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),yce=Ks(/^(?:\w+script|data):/i),bce=Ks(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),RP=Ks(/^html$/i),Cce=Ks(/^[a-z][.\w]*(-[.\w]+)+$/i);var lD=Object.freeze({__proto__:null,ARIA_ATTR:Ece,ATTR_WHITESPACE:bce,CUSTOM_ELEMENT:Cce,DATA_ATTR:gce,DOCTYPE_NAME:RP,ERB_EXPR:mce,IS_ALLOWED_URI:wP,IS_SCRIPT_OR_DATA:yce,MUSTACHE_EXPR:pce,TMPLIT_EXPR:_ce});const _v={element:1,text:3,progressingInstruction:7,comment:8,document:9},Sce=function(){return typeof window>"u"?null:window},Tce=function(n,t){if(typeof n!="object"||typeof n.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";t&&t.hasAttribute(i)&&(r=t.getAttribute(i));const a="dompurify"+(r?"#"+r:"");try{return n.createPolicy(a,{createHTML(s){return s},createScriptURL(s){return s}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},uD=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function OP(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Sce();const n=Ke=>OP(Ke);if(n.version="3.3.1",n.removed=[],!e||!e.document||e.document.nodeType!==_v.document||!e.Element)return n.isSupported=!1,n;let{document:t}=e;const r=t,i=r.currentScript,{DocumentFragment:a,HTMLTemplateElement:s,Node:o,Element:l,NodeFilter:u,NamedNodeMap:c=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:h,DOMParser:f,trustedTypes:p}=e,_=l.prototype,g=mv(_,"cloneNode"),C=mv(_,"remove"),E=mv(_,"nextSibling"),y=mv(_,"childNodes"),S=mv(_,"parentNode");if(typeof s=="function"){const Ke=t.createElement("template");Ke.content&&Ke.content.ownerDocument&&(t=Ke.content.ownerDocument)}let I,w="";const{implementation:R,createNodeIterator:A,createDocumentFragment:U,getElementsByTagName:O}=t,{importNode:B}=r;let F=uD();n.isSupported=typeof AP=="function"&&typeof S=="function"&&R&&R.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:P,ERB_EXPR:G,TMPLIT_EXPR:L,DATA_ATTR:$,ARIA_ATTR:j,IS_SCRIPT_OR_DATA:X,ATTR_WHITESPACE:K,CUSTOM_ELEMENT:Z}=lD;let{IS_ALLOWED_URI:te}=lD,ne=null;const le=Ln({},[...iD,...hC,...fC,...vC,...aD]);let Te=null;const Ze=Ln({},[...sD,...pC,...oD,...K_]);let ce=Object.seal(ET(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ge=null,Qe=null;const xe=Object.seal(ET(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let tt=!0,ht=!0,bt=!1,Rt=!0,Ut=!1,lt=!0,kt=!1,$t=!1,mt=!1,zt=!1,Tt=!1,Pt=!1,Xe=!0,je=!1;const Ve="user-content-";let Ct=!0,ut=!1,qe={},pt=null;const jt=Ln({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ue=null;const hn=Ln({},["audio","video","img","source","image","track"]);let un=null;const vn=Ln({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Xt="http://www.w3.org/1998/Math/MathML",Wt="http://www.w3.org/2000/svg",At="http://www.w3.org/1999/xhtml";let xt=At,on=!1,xn=null;const st=Ln({},[Xt,Wt,At],cC);let ct=Ln({},["mi","mo","mn","ms","mtext"]),at=Ln({},["annotation-xml"]);const Pe=Ln({},["title","style","font","a","script"]);let he=null;const He=["application/xhtml+xml","text/html"],ot="text/html";let nt=null,Zt=null;const dt=t.createElement("form"),On=function(J){return J instanceof RegExp||J instanceof Function},Yt=function(){let J=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Zt&&Zt===J)){if((!J||typeof J!="object")&&(J={}),J=xo(J),he=He.indexOf(J.PARSER_MEDIA_TYPE)===-1?ot:J.PARSER_MEDIA_TYPE,nt=he==="application/xhtml+xml"?cC:Mg,ne=ao(J,"ALLOWED_TAGS")?Ln({},J.ALLOWED_TAGS,nt):le,Te=ao(J,"ALLOWED_ATTR")?Ln({},J.ALLOWED_ATTR,nt):Ze,xn=ao(J,"ALLOWED_NAMESPACES")?Ln({},J.ALLOWED_NAMESPACES,cC):st,un=ao(J,"ADD_URI_SAFE_ATTR")?Ln(xo(vn),J.ADD_URI_SAFE_ATTR,nt):vn,Ue=ao(J,"ADD_DATA_URI_TAGS")?Ln(xo(hn),J.ADD_DATA_URI_TAGS,nt):hn,pt=ao(J,"FORBID_CONTENTS")?Ln({},J.FORBID_CONTENTS,nt):jt,ge=ao(J,"FORBID_TAGS")?Ln({},J.FORBID_TAGS,nt):xo({}),Qe=ao(J,"FORBID_ATTR")?Ln({},J.FORBID_ATTR,nt):xo({}),qe=ao(J,"USE_PROFILES")?J.USE_PROFILES:!1,tt=J.ALLOW_ARIA_ATTR!==!1,ht=J.ALLOW_DATA_ATTR!==!1,bt=J.ALLOW_UNKNOWN_PROTOCOLS||!1,Rt=J.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ut=J.SAFE_FOR_TEMPLATES||!1,lt=J.SAFE_FOR_XML!==!1,kt=J.WHOLE_DOCUMENT||!1,zt=J.RETURN_DOM||!1,Tt=J.RETURN_DOM_FRAGMENT||!1,Pt=J.RETURN_TRUSTED_TYPE||!1,mt=J.FORCE_BODY||!1,Xe=J.SANITIZE_DOM!==!1,je=J.SANITIZE_NAMED_PROPS||!1,Ct=J.KEEP_CONTENT!==!1,ut=J.IN_PLACE||!1,te=J.ALLOWED_URI_REGEXP||wP,xt=J.NAMESPACE||At,ct=J.MATHML_TEXT_INTEGRATION_POINTS||ct,at=J.HTML_INTEGRATION_POINTS||at,ce=J.CUSTOM_ELEMENT_HANDLING||{},J.CUSTOM_ELEMENT_HANDLING&&On(J.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(ce.tagNameCheck=J.CUSTOM_ELEMENT_HANDLING.tagNameCheck),J.CUSTOM_ELEMENT_HANDLING&&On(J.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(ce.attributeNameCheck=J.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),J.CUSTOM_ELEMENT_HANDLING&&typeof J.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(ce.allowCustomizedBuiltInElements=J.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ut&&(ht=!1),Tt&&(zt=!0),qe&&(ne=Ln({},aD),Te=[],qe.html===!0&&(Ln(ne,iD),Ln(Te,sD)),qe.svg===!0&&(Ln(ne,hC),Ln(Te,pC),Ln(Te,K_)),qe.svgFilters===!0&&(Ln(ne,fC),Ln(Te,pC),Ln(Te,K_)),qe.mathMl===!0&&(Ln(ne,vC),Ln(Te,oD),Ln(Te,K_))),J.ADD_TAGS&&(typeof J.ADD_TAGS=="function"?xe.tagCheck=J.ADD_TAGS:(ne===le&&(ne=xo(ne)),Ln(ne,J.ADD_TAGS,nt))),J.ADD_ATTR&&(typeof J.ADD_ATTR=="function"?xe.attributeCheck=J.ADD_ATTR:(Te===Ze&&(Te=xo(Te)),Ln(Te,J.ADD_ATTR,nt))),J.ADD_URI_SAFE_ATTR&&Ln(un,J.ADD_URI_SAFE_ATTR,nt),J.FORBID_CONTENTS&&(pt===jt&&(pt=xo(pt)),Ln(pt,J.FORBID_CONTENTS,nt)),J.ADD_FORBID_CONTENTS&&(pt===jt&&(pt=xo(pt)),Ln(pt,J.ADD_FORBID_CONTENTS,nt)),Ct&&(ne["#text"]=!0),kt&&Ln(ne,["html","head","body"]),ne.table&&(Ln(ne,["tbody"]),delete ge.tbody),J.TRUSTED_TYPES_POLICY){if(typeof J.TRUSTED_TYPES_POLICY.createHTML!="function")throw pv('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof J.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw pv('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');I=J.TRUSTED_TYPES_POLICY,w=I.createHTML("")}else I===void 0&&(I=Tce(p,i)),I!==null&&typeof w=="string"&&(w=I.createHTML(""));Ca&&Ca(J),Zt=J}},rn=Ln({},[...hC,...fC,...fce]),Pn=Ln({},[...vC,...vce]),_n=function(J){let Se=S(J);(!Se||!Se.tagName)&&(Se={namespaceURI:xt,tagName:"template"});const We=Mg(J.tagName),qt=Mg(Se.tagName);return xn[J.namespaceURI]?J.namespaceURI===Wt?Se.namespaceURI===At?We==="svg":Se.namespaceURI===Xt?We==="svg"&&(qt==="annotation-xml"||ct[qt]):!!rn[We]:J.namespaceURI===Xt?Se.namespaceURI===At?We==="math":Se.namespaceURI===Wt?We==="math"&&at[qt]:!!Pn[We]:J.namespaceURI===At?Se.namespaceURI===Wt&&!at[qt]||Se.namespaceURI===Xt&&!ct[qt]?!1:!Pn[We]&&(Pe[We]||!rn[We]):!!(he==="application/xhtml+xml"&&xn[J.namespaceURI]):!1},Tn=function(J){fv(n.removed,{element:J});try{S(J).removeChild(J)}catch{C(J)}},qn=function(J,Se){try{fv(n.removed,{attribute:Se.getAttributeNode(J),from:Se})}catch{fv(n.removed,{attribute:null,from:Se})}if(Se.removeAttribute(J),J==="is")if(zt||Tt)try{Tn(Se)}catch{}else try{Se.setAttribute(J,"")}catch{}},Be=function(J){let Se=null,We=null;if(mt)J="<remove></remove>"+J;else{const yn=dC(J,/^[\r\n\t ]+/);We=yn&&yn[0]}he==="application/xhtml+xml"&&xt===At&&(J='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+J+"</body></html>");const qt=I?I.createHTML(J):J;if(xt===At)try{Se=new f().parseFromString(qt,he)}catch{}if(!Se||!Se.documentElement){Se=R.createDocument(xt,"template",null);try{Se.documentElement.innerHTML=on?w:qt}catch{}}const Cn=Se.body||Se.documentElement;return J&&We&&Cn.insertBefore(t.createTextNode(We),Cn.childNodes[0]||null),xt===At?O.call(Se,kt?"html":"body")[0]:kt?Se.documentElement:Cn},rt=function(J){return A.call(J.ownerDocument||J,J,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT|u.SHOW_PROCESSING_INSTRUCTION|u.SHOW_CDATA_SECTION,null)},et=function(J){return J instanceof h&&(typeof J.nodeName!="string"||typeof J.textContent!="string"||typeof J.removeChild!="function"||!(J.attributes instanceof c)||typeof J.removeAttribute!="function"||typeof J.setAttribute!="function"||typeof J.namespaceURI!="string"||typeof J.insertBefore!="function"||typeof J.hasChildNodes!="function")},Nt=function(J){return typeof o=="function"&&J instanceof o};function Et(Ke,J,Se){q_(Ke,We=>{We.call(n,J,Se,Zt)})}const Ot=function(J){let Se=null;if(Et(F.beforeSanitizeElements,J,null),et(J))return Tn(J),!0;const We=nt(J.nodeName);if(Et(F.uponSanitizeElement,J,{tagName:We,allowedTags:ne}),lt&&J.hasChildNodes()&&!Nt(J.firstElementChild)&&ca(/<[/\w!]/g,J.innerHTML)&&ca(/<[/\w!]/g,J.textContent)||J.nodeType===_v.progressingInstruction||lt&&J.nodeType===_v.comment&&ca(/<[/\w]/g,J.data))return Tn(J),!0;if(!(xe.tagCheck instanceof Function&&xe.tagCheck(We))&&(!ne[We]||ge[We])){if(!ge[We]&&Nn(We)&&(ce.tagNameCheck instanceof RegExp&&ca(ce.tagNameCheck,We)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(We)))return!1;if(Ct&&!pt[We]){const qt=S(J)||J.parentNode,Cn=y(J)||J.childNodes;if(Cn&&qt){const yn=Cn.length;for(let Wn=yn-1;Wn>=0;--Wn){const Xn=g(Cn[Wn],!0);Xn.__removalCount=(J.__removalCount||0)+1,qt.insertBefore(Xn,E(J))}}}return Tn(J),!0}return J instanceof l&&!_n(J)||(We==="noscript"||We==="noembed"||We==="noframes")&&ca(/<\/no(script|embed|frames)/i,J.innerHTML)?(Tn(J),!0):(Ut&&J.nodeType===_v.text&&(Se=J.textContent,q_([P,G,L],qt=>{Se=vv(Se,qt," ")}),J.textContent!==Se&&(fv(n.removed,{element:J.cloneNode()}),J.textContent=Se)),Et(F.afterSanitizeElements,J,null),!1)},nn=function(J,Se,We){if(Xe&&(Se==="id"||Se==="name")&&(We in t||We in dt))return!1;if(!(ht&&!Qe[Se]&&ca($,Se))){if(!(tt&&ca(j,Se))){if(!(xe.attributeCheck instanceof Function&&xe.attributeCheck(Se,J))){if(!Te[Se]||Qe[Se]){if(!(Nn(J)&&(ce.tagNameCheck instanceof RegExp&&ca(ce.tagNameCheck,J)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(J))&&(ce.attributeNameCheck instanceof RegExp&&ca(ce.attributeNameCheck,Se)||ce.attributeNameCheck instanceof Function&&ce.attributeNameCheck(Se,J))||Se==="is"&&ce.allowCustomizedBuiltInElements&&(ce.tagNameCheck instanceof RegExp&&ca(ce.tagNameCheck,We)||ce.tagNameCheck instanceof Function&&ce.tagNameCheck(We))))return!1}else if(!un[Se]){if(!ca(te,vv(We,K,""))){if(!((Se==="src"||Se==="xlink:href"||Se==="href")&&J!=="script"&&uce(We,"data:")===0&&Ue[J])){if(!(bt&&!ca(X,vv(We,K,"")))){if(We)return!1}}}}}}}return!0},Nn=function(J){return J!=="annotation-xml"&&dC(J,Z)},Je=function(J){Et(F.beforeSanitizeAttributes,J,null);const{attributes:Se}=J;if(!Se||et(J))return;const We={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:Te,forceKeepAttr:void 0};let qt=Se.length;for(;qt--;){const Cn=Se[qt],{name:yn,namespaceURI:Wn,value:Xn}=Cn,_t=nt(yn),Jt=Xn;let gt=yn==="value"?Jt:cce(Jt);if(We.attrName=_t,We.attrValue=gt,We.keepAttr=!0,We.forceKeepAttr=void 0,Et(F.uponSanitizeAttribute,J,We),gt=We.attrValue,je&&(_t==="id"||_t==="name")&&(qn(yn,J),gt=Ve+gt),lt&&ca(/((--!?|])>)|<\/(style|title|textarea)/i,gt)){qn(yn,J);continue}if(_t==="attributename"&&dC(gt,"href")){qn(yn,J);continue}if(We.forceKeepAttr)continue;if(!We.keepAttr){qn(yn,J);continue}if(!Rt&&ca(/\/>/i,gt)){qn(yn,J);continue}Ut&&q_([P,G,L],Tr=>{gt=vv(gt,Tr," ")});const Qt=nt(J.nodeName);if(!nn(Qt,_t,gt)){qn(yn,J);continue}if(I&&typeof p=="object"&&typeof p.getAttributeType=="function"&&!Wn)switch(p.getAttributeType(Qt,_t)){case"TrustedHTML":{gt=I.createHTML(gt);break}case"TrustedScriptURL":{gt=I.createScriptURL(gt);break}}if(gt!==Jt)try{Wn?J.setAttributeNS(Wn,yn,gt):J.setAttribute(yn,gt),et(J)?Tn(J):rD(n.removed)}catch{qn(yn,J)}}Et(F.afterSanitizeAttributes,J,null)},an=function Ke(J){let Se=null;const We=rt(J);for(Et(F.beforeSanitizeShadowDOM,J,null);Se=We.nextNode();)Et(F.uponSanitizeShadowNode,Se,null),Ot(Se),Je(Se),Se.content instanceof a&&Ke(Se.content);Et(F.afterSanitizeShadowDOM,J,null)};return n.sanitize=function(Ke){let J=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},Se=null,We=null,qt=null,Cn=null;if(on=!Ke,on&&(Ke="<!-->"),typeof Ke!="string"&&!Nt(Ke))if(typeof Ke.toString=="function"){if(Ke=Ke.toString(),typeof Ke!="string")throw pv("dirty is not a string, aborting")}else throw pv("toString is not a function");if(!n.isSupported)return Ke;if($t||Yt(J),n.removed=[],typeof Ke=="string"&&(ut=!1),ut){if(Ke.nodeName){const Xn=nt(Ke.nodeName);if(!ne[Xn]||ge[Xn])throw pv("root node is forbidden and cannot be sanitized in-place")}}else if(Ke instanceof o)Se=Be("<!---->"),We=Se.ownerDocument.importNode(Ke,!0),We.nodeType===_v.element&&We.nodeName==="BODY"||We.nodeName==="HTML"?Se=We:Se.appendChild(We);else{if(!zt&&!Ut&&!kt&&Ke.indexOf("<")===-1)return I&&Pt?I.createHTML(Ke):Ke;if(Se=Be(Ke),!Se)return zt?null:Pt?w:""}Se&&mt&&Tn(Se.firstChild);const yn=rt(ut?Ke:Se);for(;qt=yn.nextNode();)Ot(qt),Je(qt),qt.content instanceof a&&an(qt.content);if(ut)return Ke;if(zt){if(Tt)for(Cn=U.call(Se.ownerDocument);Se.firstChild;)Cn.appendChild(Se.firstChild);else Cn=Se;return(Te.shadowroot||Te.shadowrootmode)&&(Cn=B.call(r,Cn,!0)),Cn}let Wn=kt?Se.outerHTML:Se.innerHTML;return kt&&ne["!doctype"]&&Se.ownerDocument&&Se.ownerDocument.doctype&&Se.ownerDocument.doctype.name&&ca(RP,Se.ownerDocument.doctype.name)&&(Wn="<!DOCTYPE "+Se.ownerDocument.doctype.name+`>
`+Wn),Ut&&q_([P,G,L],Xn=>{Wn=vv(Wn,Xn," ")}),I&&Pt?I.createHTML(Wn):Wn},n.setConfig=function(){let Ke=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Yt(Ke),$t=!0},n.clearConfig=function(){Zt=null,$t=!1},n.isValidAttribute=function(Ke,J,Se){Zt||Yt({});const We=nt(Ke),qt=nt(J);return nn(We,qt,Se)},n.addHook=function(Ke,J){typeof J=="function"&&fv(F[Ke],J)},n.removeHook=function(Ke,J){if(J!==void 0){const Se=oce(F[Ke],J);return Se===-1?void 0:lce(F[Ke],Se,1)[0]}return rD(F[Ke])},n.removeHooks=function(Ke){F[Ke]=[]},n.removeAllHooks=function(){F=uD()},n}var DP=OP(),UP="sendbird-mention-user-label",CI="sendbird-text-message-item-body",LP="sendbird-og-message-item-body__text-bubble";function CT(e){var n=e.userId,t=e.nickname,r='<span data-userid="'.concat(n,'" data-sb-mention="true" class="').concat(UP,'">').concat(t,"</span>"),i=DP(window),a=i.sanitize(r),s=a.split(" "),o=s[0],l=s.slice(1),u=we([o,'contenteditable="false"'],l,!0).join(" ");return u}var Vp=function(e){return e===void 0&&(e=""),e?e.replace(/[<>]/g,function(n){return n==="<"?"&#60;":"&#62;"}):""},Ag=function(e){return e?Array.from(e):[]};function Nce(e){var n;return e&&((n=e.isGroupChannel)===null||n===void 0?void 0:n.call(e))&&!e.isBroadcast&&!e.isSuper}function mC(e){return e.nodeType===gT.ElementNode}function cD(e){var n="",t="",r=!1;return e.forEach(function(i){if(mC(i)&&i.nodeName===uC.Span){var a=i.innerText,s=i.dataset,o=s===void 0?{}:s,l=o.userid,u=l===void 0?"":l;u&&(r=!0),n+=a,t+="".concat(up,"{").concat(u,"}")}else if(mC(i)&&i.nodeName===uC.Br)n+=`
`,t+=`
`;else if(mC(i)&&i.nodeName===uC.Div){var c=i.textContent,h=c===void 0?"":c;n+=`
`.concat(h),t+=`
`.concat(h)}else{var f=i.textContent,h=f===void 0?"":f;n+=h,t+=h}}),{messageText:n,mentionTemplate:t,isMentionedMessage:r}}function Ice(e){var n=e.map(function(t){var r=t.text,i=t.userId;return i?CT({userId:i,nickname:r}):Vp(r)}).join(" ").concat(" ");document.execCommand("insertHTML",!1,n)}var kP="sendbird-word__mention",xP="sendbird-mention-user-label",PP=".".concat(kP,", .").concat(xP);function dD(e,n){var t=we([e],Array.from(e.querySelectorAll(n)),!0).find(function(r){return r.matches(n)});return t}function Mce(e){var n=dD(e,".".concat(LP));if(n)return Ag(n.childNodes);var t=dD(e,".".concat(CI));return Ag(t?t.childNodes:e.childNodes)}function Ace(e){return!!(e!=null&&e.querySelector(PP))}function wce(e){var n=e==null?void 0:e.reduce(function(t,r){var i,a,s,o=r==null?void 0:r.innerText;if(r instanceof Text&&(s=!1,o=(i=r.textContent)!==null&&i!==void 0?i:""),r instanceof HTMLElement&&(s=r.classList.contains(kP)||r.classList.contains(xP)?r:r.querySelector(PP)),s){var l=r==null?void 0:r.innerText,u=(a=s.dataset)===null||a===void 0?void 0:a.userid;return we(we([],t,!0),[{text:l,userId:u}],!1)}return we(we([],t,!0),[{text:o}],!1)},[]);return n}function Rce(e,n){var t={},r=n.members;return e.forEach(function(i){if(i.userId){var a=r.find(function(s){return s.userId===i.userId});a&&(t[i.userId]=a)}}),Object.values(t)}function hD(e){var n=window.getSelection();if(n&&n.rangeCount>0){var t=n.getRangeAt(n.rangeCount-1);t.deleteContents();var r=document.createTextNode(e+"");t.insertNode(r),t.setStart(r,r.length),t.collapse(!0),n.removeAllRanges(),n.addRange(t)}}function Oce(e){var n=document.createElement("div");return n.innerHTML=e,n}function Dce(e){var n=e.ref,t=e.setIsInput,r=e.channel,i=e.setMentionedUsers;return M.useCallback(function(a){a.preventDefault();var s=a.clipboardData.getData("text/html"),o=a.clipboardData.getData("text")||Uce(a);if(!s){hD(Vp(o)),t(!0);return}var l=DP(window),u=l.sanitize(s),c=Oce(u);if(!Ace(c)){hD(Vp(o)),c.remove(),t(!0);return}var h=Mce(c),f=wce(h),p=r.isGroupChannel()?Rce(f,r):[];i(p),Ice(f),c.remove(),t(!0)},[n,t,r,i])}function Uce(e){var n=e.clipboardData.getData("text/uri-list");return n.length===0?"":n.split(`
`).reduce(function(t,r){var i=r.trim();return i!==""&&!i.startsWith("#")&&(t+=i+`
`),t},"")}var lm="@",Fr={string:"string",mention:"mention",url:"url",undetermined:"undetermined",markdown:"markdown"},Lce=/\[(.*?)\]\((.*?)\)|\*\*(.*?)\*\*/g;function kce(e,n){var t=n||lm;return RegExp("(".concat(e.map(function(r){var i=r.userId.replace(/([.*+?^${}()|[\]\\])/g,"\\$1");return"".concat(t,"\\{").concat(i,"\\}")}).join("|"),")"),"g")}function xce(e){var n=e.tokens,t=e.mentionedUsers,r=t===void 0?[]:t,i=e.templatePrefix,a=i===void 0?lm:i;if(!(r!=null&&r.length))return n;var s=kce(r,a),o=n.map(function(l){if(l.type!==Fr.undetermined)return l;var u=l.value,c=u.split(s),h=c.map(function(f){if(f.match(s)){var p=r.find(function(g){return"@{".concat(g==null?void 0:g.userId,"}")===f}),_=(p==null?void 0:p.nickname)||"(No name)";return{value:_,type:Fr.mention,userId:p==null?void 0:p.userId}}else return{value:f,type:Fr.undetermined}});return h}).flat();return o}function Pce(e){var n=/(?:https?:\/\/|www\.)?[-a-zA-Z0-9@:%._+~#=]{1,256}\.(xn--)?[a-z]{2,20}\b([-a-zA-Z0-9@:%_+[\],.~#?&/=]*[-a-zA-Z0-9@:%_+~#?&/=])*/g,t=e.map(function(r){if(r.type!==Fr.undetermined)return r;var i=r.value,a=i===void 0?"":i,s=Array.from(a.matchAll(n)),o=s.map(function(c){var h,f=c[0],p=(h=c.index)!==null&&h!==void 0?h:0,_=p+f.length;return{text:f,start:p,end:_}}),l=[{value:a,type:Fr.string}],u=0;return o.forEach(function(c){var h=c.text,f=c.start,p=c.end,_=l.pop().value,g=_.slice(0,f-u),C=h,E=_.slice(p-u);g.length>0&&l.push({value:g,type:Fr.string}),l.push({value:C,type:Fr.url}),E.length>0&&l.push({value:E,type:Fr.string}),u=p}),l}).flat();return t}function SI(e){var n=e,t=[];return n.forEach(function(r){if(r.type===Fr.mention||r.type===Fr.markdown){t.push(r);return}var i=r.value,a=Array.from(i.matchAll(Lce)),s=a.map(function(c){var h,f=c[0],p=(h=c.index)!==null&&h!==void 0?h:0,_=p+f.length;return{text:f,start:p,end:_,groups:c.filter(function(g){return typeof g=="string"})}}),o=i,l=0;if(s.forEach(function(c){var h=c.text,f=c.start,p=c.end,_=c.groups,g={type:Fr.undetermined,value:o.slice(0,f-l)};t.push(g);var C;h.startsWith("[")?C="url":h.startsWith("**")&&(C="bold");var E={type:Fr.markdown,markdownType:C,value:h,groups:_};t.push(E),o=i.slice(p),l=p}),o){var u={type:Fr.undetermined,value:o};t.push(u)}}),t}function FP(e){var n=e.reduce(function(t,r){var i=t[t.length-1];return(i==null?void 0:i.type)===Fr.string&&r.type===Fr.string?(i.value="".concat(i.value).concat(r.value),t):we(we([],t,!0),[r],!1)},[]);return n}function of(e){var n=e.messageText,t=e.mentionedUsers,r=t===void 0?[]:t,i=e.templatePrefix,a=i===void 0?lm:i,s=e.includeMarkdown,o=s===void 0?!1:s,l=[{type:Fr.undetermined,value:n}],u=xce({tokens:l,mentionedUsers:r,templatePrefix:a}),c=Pce(o?SI(u):u),h=FP(c);return h}function Fce(e){var n=[{type:Fr.undetermined,value:e}],t=SI(n);return BP(t)}function BP(e){var n=e.map(function(t){return t.type===Fr.markdown?BP(ST({messageText:t.groups[1]})):t.value});return n.join("")}function ST(e){var n=e.messageText,t=[{type:Fr.undetermined,value:n}],r=FP(SI(t));return r}function Bce(e){var n="",t=e.split(`
`),r=t.map(function(a){var s,o,l=((s=a.match(/^\s*/))===null||s===void 0?void 0:s[0])||"",u=((o=a.match(/\s*$/))===null||o===void 0?void 0:o[0])||"",c=l.replace(/ /g,n),h=u.replace(/ /g,n);return c+a.trim()+h}),i=r.join(`
`);return i}var k0;(function(e){e.BASE="base",e.GROUP="group",e.OPEN="open"})(k0||(k0={}));var Hce=function(e){var n=e.channel,t=e.config,r=Es(n==null?void 0:n.channelType).with(k0.GROUP,function(){var i;return(i=t==null?void 0:t.groupChannel)===null||i===void 0?void 0:i.enableDocument}).with(k0.OPEN,function(){var i;return(i=t==null?void 0:t.openChannel)===null||i===void 0?void 0:i.enableDocument}).otherwise(function(){return!0});return r},Gce="sendbird-message-input-text-field",da=function(){return null},_C=function(e){e&&e.current&&(e.current.innerHTML="")},fD={targetString:"",startNodeIndex:null,startOffsetIndex:null,endNodeIndex:null,endOffsetIndex:null},um=m.forwardRef(function(e,n){var t,r,i,a,s,o=e.channel,l=e.className,u=l===void 0?"":l,c=e.messageFieldId,h=c===void 0?"":c,f=e.isEdit,p=f===void 0?!1:f,_=e.isMobile,g=_===void 0?!1:_,C=e.isMentionEnabled,E=C===void 0?!1:C,y=e.isVoiceMessageEnabled,S=y===void 0?!0:y,I=e.isSelectingMultipleFilesEnabled,w=I===void 0?!1:I,R=e.disabled,A=R===void 0?!1:R,U=e.message,O=U===void 0?null:U,B=e.placeholder,F=B===void 0?"":B,P=e.maxLength,G=P===void 0?5e3:P,L=e.onFileUpload,$=L===void 0?da:L,j=e.onSendMessage,X=j===void 0?da:j,K=e.onUpdateMessage,Z=K===void 0?da:K,te=e.onCancelEdit,ne=te===void 0?da:te,le=e.onStartTyping,Te=le===void 0?da:le,Ze=e.channelUrl,ce=Ze===void 0?"":Ze,ge=e.mentionSelectedUser,Qe=ge===void 0?null:ge,xe=e.onUserMentioned,tt=xe===void 0?da:xe,ht=e.onMentionStringChange,bt=ht===void 0?da:ht,Rt=e.onMentionedUserIdsUpdated,Ut=Rt===void 0?da:Rt,lt=e.onVoiceMessageIconClick,kt=lt===void 0?da:lt,$t=e.onKeyUp,mt=$t===void 0?da:$t,zt=e.onKeyDown,Tt=zt===void 0?da:zt,Pt=e.renderFileUploadIcon,Xe=Pt===void 0?da:Pt,je=e.renderVoiceMessageIcon,Ve=je===void 0?da:je,Ct=e.renderSendMessageIcon,ut=Ct===void 0?da:Ct,qe=e.setMentionedUsers,pt=qe===void 0?da:qe,jt=e.acceptableMimeTypes,Ue=n&&"current"in n?n:M.useRef(null),hn=M.useRef(null),un=h||Gce,vn=tn().stringSet,Xt=en().state,Wt=Xt.config,At=Xt.eventHandlers,xt=Hce({channel:o,config:Wt}),on=M.useRef(),xn=M.useState(!1),st=xn[0],ct=xn[1],at=M.useState([]),Pe=at[0],he=at[1],He=M.useState(H({},fD)),ot=He[0],nt=He[1],Zt=e==null?void 0:e.value;M.useEffect(function(){var Be=Ue==null?void 0:Ue.current;he([]),ct(Be!=null&&Be.textContent?Be.textContent.trim().length>0:!1)},[Zt]),M.useEffect(function(){p||(ct(!1),_C(Ue))},[ce]),M.useEffect(function(){var Be,rt;if(p&&(O!=null&&O.messageId)){var et=Ue==null?void 0:Ue.current;if(E&&(O!=null&&O.mentionedUsers)&&O.mentionedUsers.length>0&&(O!=null&&O.mentionedMessageTemplate)&&O.mentionedMessageTemplate.length>0){var Nt=O.mentionedUsers,Et=Nt===void 0?[]:Nt,Ot=of({messageText:O==null?void 0:O.mentionedMessageTemplate,mentionedUsers:Et,includeMarkdown:o.isGroupChannel()&&Wt.groupChannel.enableMarkdownForUserMessage});et&&(et.innerHTML=Ot.map(function(nn){if(nn.type===Fr.mention){var Nn=Et.find(function(an){return an.userId===nn.userId}),Je="".concat(lm).concat((Nn==null?void 0:Nn.nickname)||nn.value||vn.MENTION_NAME__NO_NAME);return CT({userId:nn.userId,nickname:Je})}return Vp(nn.value)}).join(""))}else{try{et&&(et.innerHTML=(Be=Vp(O==null?void 0:O.message))!==null&&Be!==void 0?Be:"")}catch{}he([])}ct(et!=null&&et.textContent?((rt=et==null?void 0:et.textContent)===null||rt===void 0?void 0:rt.trim().length)>0:!1)}},[p,O]);var dt=M.useCallback(function(){var Be,rt=Ue==null?void 0:Ue.current;if(E&&rt){var et=Array.from(rt.getElementsByClassName("sendbird-mention-user-label")).map(function(Nt){var Et;return(Et=Nt==null?void 0:Nt.dataset)===null||Et===void 0?void 0:Et.userid});(!Ule(Pe,et)||et.length===0)&&(Ut(et),he(et))}ct(rt!=null&&rt.textContent?((Be=rt.textContent)===null||Be===void 0?void 0:Be.trim().length)>0:!1)},[ot,E]);M.useEffect(function(){var Be,rt,et,Nt;if(E&&Qe){var Et=ot.targetString,Ot=ot.startNodeIndex,nn=ot.startOffsetIndex,Nn=ot.endNodeIndex,Je=ot.endOffsetIndex,an=Ue==null?void 0:Ue.current;if(Et&&Ot!==null&&nn!==null&&Je!==null&&Nn!==null&&an){var Ke=Ag(an==null?void 0:an.childNodes),J=(rt=(Be=Ke[Ot])===null||Be===void 0?void 0:Be.textContent)!==null&&rt!==void 0?rt:"",Se=document.createTextNode(J.slice(0,nn)),We=(Nt=(et=Ke[Nn])===null||et===void 0?void 0:et.textContent)!==null&&Nt!==void 0?Nt:"",qt=Je&&document.createTextNode("".concat(We.slice(Je))),Cn=CT({userId:Qe==null?void 0:Qe.userId,nickname:"".concat(up).concat((Qe==null?void 0:Qe.nickname)||vn.MENTION_NAME__NO_NAME)}),yn=document.createElement("div");yn.innerHTML=Cn;var Wn=we(we(we([],Ke.slice(0,Ot),!0),[Se,yn.childNodes[0],qt],!1),Ke.slice(Nn+1),!0);if(an&&(an.innerHTML="",Wn.forEach(function(Jt){Jt&&an.appendChild(Jt)})),tt(Qe),window.getSelection||document.getSelection){var Xn=window.getSelection()||document.getSelection();Xn==null||Xn.removeAllRanges();var _t=new Range;_t.selectNodeContents(an),_t.setStart(an.childNodes[Ot+2],1),_t.setEnd(an.childNodes[Ot+2],1),_t.collapse(!1),Xn==null||Xn.addRange(_t),an.focus()}nt(H({},fD)),dt()}}},[Qe,E]);var On=M.useCallback(function(){var Be,rt,et=((Be=window==null?void 0:window.getSelection)===null||Be===void 0?void 0:Be.call(window))||((rt=document==null?void 0:document.getSelection)===null||rt===void 0?void 0:rt.call(document)),Nt=Ue==null?void 0:Ue.current;if((et==null?void 0:et.anchorNode)===Nt&&bt(""),E&&Nt&&et&&et.anchorNode===et.focusNode&&et.anchorOffset===et.focusOffset)for(var Et="",Ot=null,nn=null,Nn=function(Ke){var J=Nt.childNodes[Ke];if(J.nodeType===gT.TextNode){var Se=function(){var yn;return J===et.anchorNode?J!=null&&J.textContent?J==null?void 0:J.textContent.slice(0,et.anchorOffset):"":(yn=J==null?void 0:J.textContent)!==null&&yn!==void 0?yn:""}();if(Et.length>0)Et+=Se;else{for(var We=Se.lastIndexOf(up),qt=We-1;qt>-1&&Se[qt]===up;qt-=1)We=qt;We>-1&&(Et=Se,Ot=Ke,nn=We)}}else Et="",Ot=null,nn=null;if(J===et.anchorNode){var Cn=Et&&nn!==null?Et.slice(nn):"";return nt({targetString:Cn,startNodeIndex:Ot,startOffsetIndex:nn,endNodeIndex:Ke,endOffsetIndex:et.anchorOffset}),bt(Cn),{value:void 0}}},Je=0;Je<Nt.childNodes.length;Je+=1){var an=Nn(Je);if(typeof an=="object")return an.value}},[E]),Yt=function(){var Be,rt;try{var et=Ue==null?void 0:Ue.current;if(!p&&(et!=null&&et.textContent)){var Nt=cD(et.childNodes),Et=Nt.messageText,Ot=Nt.mentionTemplate,nn=Nt.isMentionedMessage,Nn={message:Et,mentionTemplate:Ot};nn||(Nn.mentionTemplate=""),X(Nn),_C(Ue),GR(navigator.userAgent)?(hn.current&&hn.current.focus(),requestAnimationFrame(function(){return et.focus()})):et.focus(),ct(!1)}}catch(Je){(rt=(Be=At==null?void 0:At.message)===null||Be===void 0?void 0:Be.onSendMessageFailed)===null||rt===void 0||rt.call(Be,O,Je)}},rn=!(!((r=(t=Ue==null?void 0:Ue.current)===null||t===void 0?void 0:t.textContent)===null||r===void 0)&&r.trim()),Pn=function(){var Be,rt;try{var et=Ue==null?void 0:Ue.current,Nt=O==null?void 0:O.messageId;if(p&&Nt&&et){var Et=cD(et.childNodes),Ot=Et.messageText,nn=Et.mentionTemplate,Nn={messageId:Nt,message:Ot,mentionTemplate:nn};Z(Nn),_C(Ue)}}catch(Je){(rt=(Be=At==null?void 0:At.message)===null||Be===void 0?void 0:Be.onUpdateMessageFailed)===null||rt===void 0||rt.call(Be,O,Je)}},_n=Dce({ref:Ue,setMentionedUsers:pt,channel:o,setIsInput:ct}),Tn=function(Be){var rt,et,Nt=Be.currentTarget.files;try{Nt&&$(Array.from(Nt))}catch(Et){(et=(rt=At==null?void 0:At.message)===null||rt===void 0?void 0:rt.onFileUploadFailed)===null||et===void 0||et.call(rt,Et)}finally{Be.target.value=""}},qn=function(){var Be,rt=Ue,et=window.getSelection();if(!(!et||et.rangeCount===0)){var Nt=et.getRangeAt(et.rangeCount-1),Et=Nt.getBoundingClientRect(),Ot=(Be=rt.current)===null||Be===void 0?void 0:Be.getBoundingClientRect();if(!(!Ot||!rt.current)){if(Et.bottom>Ot.bottom){var nn=Math.min(Et.bottom-Ot.bottom,rt.current.scrollHeight-rt.current.clientHeight);rt.current.scrollTop+=nn}else if(Et.top<Ot.top){var nn=Math.min(Ot.top-Et.top,rt.current.scrollTop);rt.current.scrollTop-=nn}}}};return m.createElement("form",{className:fn.apply(void 0,we(we([],Array.isArray(u)?u:[u],!1),[p&&"sendbird-message-input__edit",A&&"sendbird-message-input-form__disabled"],!1))},m.createElement("div",{className:fn("sendbird-message-input",A&&"sendbird-message-input__disabled"),"data-testid":"sendbird-message-input"},GR(navigator.userAgent)&&m.createElement("input",{id:"ghost-input-reset-ime-cjk",ref:hn,style:{opacity:0,padding:0,margin:0,height:0,border:"none",position:"absolute",top:-9999},defaultValue:"_"}),m.createElement("div",{id:"".concat(un).concat(p?O==null?void 0:O.messageId:""),className:"sendbird-message-input--textarea ".concat(un),contentEditable:!A,role:"textbox","aria-label":"Text Input",ref:Ue,disabled:A,maxLength:G,onKeyDown:function(Be){var rt,et,Nt,Et,Ot=Tt(Be);Ot?Be.preventDefault():(!Be.shiftKey&&Be.key===Va.Enter&&!g&&(!((rt=Ue==null?void 0:Ue.current)===null||rt===void 0)&&rt.textContent)&&Ue.current.textContent.trim().length>0&&((et=Be==null?void 0:Be.nativeEvent)===null||et===void 0?void 0:et.isComposing)!==!0&&(Be.preventDefault(),Yt()),Be.key===Va.Backspace&&((Et=(Nt=Ue==null?void 0:Ue.current)===null||Nt===void 0?void 0:Nt.childNodes)===null||Et===void 0?void 0:Et.length)===2&&!Ue.current.childNodes[0].textContent&&Ue.current.childNodes[1].nodeType===gT.ElementNode&&Ue.current.removeChild(Ue.current.childNodes[1]))},onKeyUp:function(Be){var rt=mt(Be);rt?Be.preventDefault():On()},onClick:function(){On()},onInput:function(){var Be;Te(),ct(!((Be=Ue==null?void 0:Ue.current)===null||Be===void 0)&&Be.textContent?Ue.current.textContent.trim().length>0:!1),dt()},onPaste:function(Be){_n(Be),setTimeout(qn)}}),((s=(a=(i=Ue==null?void 0:Ue.current)===null||i===void 0?void 0:i.textContent)===null||a===void 0?void 0:a.length)!==null&&s!==void 0?s:0)===0&&m.createElement(Ce,{className:"sendbird-message-input--placeholder",type:be.BODY_1,color:A?ue.ONBACKGROUND_4:ue.ONBACKGROUND_3},F||vn.MESSAGE_INPUT__PLACE_HOLDER),!p&&st&&m.createElement(ps,{className:"sendbird-message-input--send",height:"32px",width:"32px",onClick:function(){return Yt()},testID:"sendbird-message-input-send-button"},(ut==null?void 0:ut())||m.createElement(ke,{type:Ne.SEND,fillColor:A?Oe.ON_BACKGROUND_4:Oe.PRIMARY,width:"20px",height:"20px"})),!p&&!st&&((Xe==null?void 0:Xe())||xt&&m.createElement(ps,{className:fn("sendbird-message-input--attach",S&&"is-voice-message-enabled"),height:"32px",width:"32px",onClick:function(){var Be,rt;(rt=(Be=on==null?void 0:on.current)===null||Be===void 0?void 0:Be.click)===null||rt===void 0||rt.call(Be)}},m.createElement(ke,{type:Ne.ATTACH,fillColor:A?Oe.ON_BACKGROUND_4:Oe.CONTENT_INVERSE,width:"20px",height:"20px"}),m.createElement("input",{className:"sendbird-message-input--attach-input",type:"file",ref:on,onChange:function(Be){return Tn(Be)},accept:ple(jt),multiple:w&&Nce(o)}))),S&&!p&&!st&&m.createElement(ps,{className:"sendbird-message-input--voice-message",width:"32px",height:"32px",onClick:kt},(Ve==null?void 0:Ve())||m.createElement(ke,{type:Ne.AUDIO_ON_LINED,fillColor:A?Oe.ON_BACKGROUND_4:Oe.CONTENT_INVERSE,width:"20px",height:"20px"}))),p&&m.createElement("div",{className:"sendbird-message-input--edit-action","data-testid":"sendbird-message-input--edit-action"},m.createElement(go,{className:"sendbird-message-input--edit-action__cancel",type:br.SECONDARY,size:Qu.SMALL,onClick:ne},vn.BUTTON__CANCEL),m.createElement(go,{className:"sendbird-message-input--edit-action__save",type:br.PRIMARY,size:Qu.SMALL,disabled:rn,onClick:function(){return Pn()}},vn.BUTTON__SAVE)))});function vD(e){$r(1,arguments);var n=za(e);return n.setHours(0,0,0,0),n}function wE(e,n){$r(2,arguments);var t=vD(e),r=vD(n);return t.getTime()===r.getTime()}function $ce(e){return $r(1,arguments),wE(e,Date.now())}function Vce(e,n){$r(2,arguments);var t=za(e),r=za(n);return t.getFullYear()===r.getFullYear()}function zce(e){return $r(1,arguments),Vce(e,Date.now())}function jce(e,n){$r(2,arguments);var t=za(e),r=zl(n);return isNaN(r)?new Date(NaN):(r&&t.setDate(t.getDate()+r),t)}function qce(e,n){$r(2,arguments);var t=zl(n);return jce(e,-t)}function Kce(e){return $r(1,arguments),wE(e,qce(Date.now(),1))}var Wce=function(e,n,t){var r;return t===void 0&&(t=kd),!(e!=null&&e.name)&&!(e!=null&&e.members)?t.NO_TITLE:iP(e)?((r=e==null?void 0:e.members)===null||r===void 0?void 0:r.length)===1?t.NO_MEMBERS:((e==null?void 0:e.members)||[]).filter(function(i){var a=i.userId;return a!==n}).map(function(i){var a=i.nickname;return a||t.NO_NAME}).join(", "):e.name},HP=function(e){var n,t=e.channel,r=e.locale,i=e.stringSet,a=i===void 0?kd:i,s=(n=t==null?void 0:t.lastMessage)===null||n===void 0?void 0:n.createdAt,o=r?{locale:r}:null;return s?$ce(s)?_a(s,a.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__TODAY,o):Kce(s)?a.MESSAGE_STATUS__YESTERDAY||"Yesterday":zce(s)?_a(s,a.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__THIS_YEAR,o):_a(s,a.DATE_FORMAT__LAST_MESSAGE_CREATED_AT__PREVIOUS_YEAR,o):""},Yce=function(e){return e!=null&&e.memberCount?e.memberCount:0},pD=function(e,n){var t,r,i,a,s,o;return n===void 0&&(n=kd),Pd(e)?(t=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GIF)!==null&&t!==void 0?t:"":So(e)?(r=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO)!==null&&r!==void 0?r:"":Vl(e)?(i=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VIDEO)!==null&&i!==void 0?i:"":uI(e)?(a=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_AUDIO)!==null&&a!==void 0?a:"":eP(e)?(s=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_VOICE_MESSAGE)!==null&&s!==void 0?s:"":(o=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_GENERAL)!==null&&o!==void 0?o:""},Qce=function(e,n){var t,r,i,a;if(e===void 0&&(e=null),n===void 0&&(n=kd),!e)return"";if(w0(e))return n.CHANNEL_PREVIEW_LAST_MESSAGE_TEMPLATE_MESSAGE;if(e.isFileMessage())return pD(e.type,n);if(e.isMultipleFilesMessage()){var s=(r=(t=e.fileInfoList)===null||t===void 0?void 0:t[0])===null||r===void 0?void 0:r.mimeType;return So(s)||Pd(s)?(i=n==null?void 0:n.CHANNEL_PREVIEW_LAST_MESSAGE_FILE_TYPE_PHOTO)!==null&&i!==void 0?i:"":pD(s,n)}return(a=e.message)!==null&&a!==void 0?a:""},Xce=function(e,n){return n===void 0&&(n=kd),e!=null&&e.lastMessage?Qce(e==null?void 0:e.lastMessage,n):""},mD=function(e){return e!=null&&e.unreadMessageCount?e.unreadMessageCount:0},vu,pu,Zce=(vu={},vu[hr.SENT]=Ne.DONE,vu[hr.DELIVERED]=Ne.DONE_ALL,vu[hr.READ]=Ne.DONE_ALL,vu[hr.FAILED]=Ne.ERROR,vu[hr.PENDING]=void 0,vu[hr.NONE]=void 0,vu),Jce=(pu={},pu[hr.SENT]=Oe.SENT,pu[hr.DELIVERED]=Oe.SENT,pu[hr.READ]=Oe.READ,pu[hr.FAILED]=Oe.ERROR,pu[hr.PENDING]=void 0,pu[hr.NONE]=void 0,pu);function GP(e){var n,t=e.className,r=e.message,i=e.channel,a=e.isDateSeparatorConsidered,s=a===void 0?!0:a,o=tn(),l=o.stringSet,u=o.dateLocale,c=K6(i,r),h=((n=i==null?void 0:i.isGroupChannel)===null||n===void 0?void 0:n.call(i))&&(i.isSuper||i.isBroadcast)&&!(c===hr.PENDING||c===hr.FAILED);return m.createElement("div",{className:we(we([],Array.isArray(t)?t:[t],!0),["sendbird-message-status"],!1).join(" ")},c===hr.PENDING?m.createElement(sc,{className:"sendbird-message-status__icon",testID:"sendbird-message-status-icon",width:"16px",height:"16px"},m.createElement(ke,{type:Ne.SPINNER,fillColor:Oe.PRIMARY,width:"16px",height:"16px"})):m.createElement(ke,{className:fn("sendbird-message-status__icon",h&&"hide-icon",c!==hr.FAILED&&"sendbird-message-status--sent"),testID:"sendbird-message-status-icon",type:Zce[c]||Ne.ERROR,fillColor:Jce[c],width:"16px",height:"16px"}),Ele(c)&&m.createElement(Ce,{className:"sendbird-message-status__text",testID:"sendbird-message-status-text",type:be.CAPTION_3,color:ue.ONBACKGROUND_2},s?_a((r==null?void 0:r.createdAt)||0,l.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:u}):HP({channel:i,locale:u,stringSet:l})))}var ede=function(e){var n=e.ref,t=e.onClick,r=t===void 0?Mn:t,i=e.onBlur,a=i===void 0?Mn:i,s=e.renderIcon,o=s===void 0?function(l){return m.createElement(ke,H({},l))}:s;return m.createElement(ps,{ref:n,width:"32px",height:"32px",onClick:r,onBlur:a},o({type:Ne.MORE,fillColor:Oe.CONTENT_INVERSE,width:"24px",height:"24px"}))},_D=function(e){var n,t=tn().stringSet,r=Lr(),i=r.message,a=r.hideMenu;return m.createElement(Ki,H({},e,{onClick:function(s){var o;Ea(i)&&vI(i.message),a(),(o=e.onClick)===null||o===void 0||o.call(e,s)}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__COPY)},gD=function(e){var n,t=tn().stringSet,r=Lr(),i=r.message,a=r.hideMenu,s=r.setQuoteMessage;return m.createElement(Ki,H({},e,{disabled:i.parentMessageId>0,onClick:function(o){var l;s(i),a(),(l=e.onClick)===null||l===void 0||l.call(e,o)}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__REPLY)},ED=function(e){var n,t=tn().stringSet,r=Lr(),i=r.message,a=r.hideMenu,s=r.onReplyInThread;return m.createElement(Ki,H({},e,{onClick:function(o){var l;s({message:i}),a(),(l=e.onClick)===null||l===void 0||l.call(e,o)}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__THREAD)},yD=function(e){var n,t=tn().stringSet,r=Lr(),i=r.hideMenu,a=r.onMoveToParentMessage;return m.createElement(Ki,H({},e,{onClick:function(s){var o;a(),i(),(o=e.onClick)===null||o===void 0||o.call(e,s)}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__OPEN_IN_CHANNEL)},bD=function(e){var n,t=tn().stringSet,r=Lr(),i=r.hideMenu,a=r.showEdit,s=r.isOnline;return m.createElement(Ki,H({},e,{onClick:function(o){var l;s&&(a(!0),i(),(l=e.onClick)===null||l===void 0||l.call(e,o))}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__EDIT)},CD=function(e){var n,t=tn().stringSet,r=Lr(),i=r.message,a=r.hideMenu,s=r.resendMessage,o=r.isOnline;return m.createElement(Ki,H({},e,{onClick:function(l){var u;o&&(s(i),a(),(u=e.onClick)===null||u===void 0||u.call(e,l))}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__RESEND)},SD=function(e){var n,t,r,i=tn().stringSet,a=Lr(),s=a.message,o=a.hideMenu,l=a.deleteMessage,u=a.showRemove,c=a.isOnline,h=a.disableDeleteMessage;return m.createElement(Ki,H({},e,{disabled:typeof h=="boolean"?h:((t=(n=s.threadInfo)===null||n===void 0?void 0:n.replyCount)!==null&&t!==void 0?t:0)>0,onClick:function(f){var p;na(s)?l(s):c&&(u(!0),o(),(p=e.onClick)===null||p===void 0||p.call(e,f))}}),(r=e.children)!==null&&r!==void 0?r:i.MESSAGE_MENU__DELETE)},TD=function(e){var n,t=tn().stringSet,r=Lr(),i=r.message,a=r.hideMenu,s=r.markAsUnread;return m.createElement(Ki,H({},e,{onClick:function(o){var l;s&&s(i,"manual"),a(),(l=e.onClick)===null||l===void 0||l.call(e,o)}}),(n=e.children)!==null&&n!==void 0?n:t.MESSAGE_MENU__MARK_AS_UNREAD)},$P=function(e){var n,t=e.channel,r=e.message;if(na(r)||Fa(r)||!(!((n=t==null?void 0:t.isGroupChannel)===null||n===void 0)&&n.call(t))||t!=null&&t.isEphemeral)return!1;var i=t==null?void 0:t.isBroadcast,a=(t==null?void 0:t.myRole)===hs.OPERATOR;return i?a:!0},tde=function(e){var n=e.message;return Ea(n)},nde=function(e){var n=e.message,t=e.channel,r=e.isByMe;return!(t!=null&&t.isEphemeral)&&Ea(n)&&Hp(n)&&r},rde=function(e){var n=e.message,t=e.isByMe;return na(n)&&(n==null?void 0:n.isResendable)&&t},ide=function(e){var n=e.message,t=e.channel,r=e.isByMe;return!(t!=null&&t.isEphemeral)&&!Fa(n)&&r},ade=function(e){var n=e.onMoveToParentMessage,t=n===void 0?void 0:n;return!!t},sde=function(e){var n=e.channel,t=e.message,r=e.replyType;return $P({channel:n,message:t})&&r==="QUOTE_REPLY"},ode=function(e){var n=e.channel,t=e.message,r=e.replyType,i=e.onReplyInThread;return $P({channel:n,message:t})&&r==="THREAD"&&!(t!=null&&t.parentMessageId)&&typeof i=="function"},lde=function(e){var n,t=e.message,r=e.channel,i=e.replyType;return!na(t)&&!Fa(t)&&((n=r==null?void 0:r.isGroupChannel)===null||n===void 0?void 0:n.call(r))&&i!=="THREAD"},ude=function(e){var n,t=e.className,r=e.message,i=e.channel,a=e.isByMe,s=e.replyType,o=e.renderTrigger,l=o===void 0?ede:o,u=e.renderMenuItems,c=e.disableDeleteMessage,h=c===void 0?null:c,f=e.showEdit,p=f===void 0?Mn:f,_=e.showRemove,g=_===void 0?Mn:_,C=e.deleteMessage,E=e.resendMessage,y=e.markAsUnread,S=e.setQuoteMessage,I=e.onReplyInThread,w=e.onMoveToParentMessage,R=en().state.config,A=R.isOnline,U=R.groupChannel.enableMarkAsUnread,O=M.useRef(null),B=M.useRef(null),F=M.useState(!1),P=F[0],G=F[1],L=function(){return G(!1)},$=function(){return G(!0)},j=function(){return G(function(K){return!K})},X={message:r,channel:i,isByMe:a,replyType:s,onReplyInThread:I,onMoveToParentMessage:w};return m.createElement("div",{className:fn("sendbird-message-menu",t),ref:B},m.createElement(mI,{value:{message:r,hideMenu:L,showMenu:$,toggleMenu:j,setQuoteMessage:S,onReplyInThread:I,onMoveToParentMessage:w,showEdit:p,showRemove:g,deleteMessage:C,resendMessage:E,markAsUnread:y,isOnline:A,disableDeleteMessage:h,triggerRef:O,containerRef:B}},l({ref:O,onClick:j}),P&&m.createElement(ya,{id:gI(r.messageId),parentRef:O,parentContainRef:B,closeDropdown:L,openLeft:a},(n=u==null?void 0:u({items:{CopyMenuItem:_D,ReplyMenuItem:gD,ThreadMenuItem:ED,OpenInChannelMenuItem:yD,EditMenuItem:bD,MarkAsUnreadMenuItem:TD,ResendMenuItem:CD,DeleteMenuItem:SD}}))!==null&&n!==void 0?n:m.createElement(m.Fragment,null,tde(X)&&m.createElement(_D,null),sde(X)&&m.createElement(gD,null),ode(X)&&m.createElement(ED,null),ade(X)&&m.createElement(yD,null),nde(X)&&m.createElement(bD,null),U&&lde(X)&&m.createElement(TD,null),rde(X)&&m.createElement(CD,null),ide(X)&&m.createElement(SD,null)))))},cde=300;function ND(e){dde(e)&&e.touches.length<2&&e.preventDefault&&e.preventDefault()}function dde(e){return e&&"touches"in e}function tl(e,n){var t=e.onLongPress,r=e.onClick,i=n===void 0?{}:n,a=i.delay,s=a===void 0?cde:a,o=i.shouldPreventDefault,l=o===void 0?!0:o,u=i.shouldStopPropagation,c=u===void 0?!1:u,h=si().isMobile,f=M.useState(!1),p=f[0],_=f[1],g=M.useState(!1),C=g[0],E=g[1],y=M.useRef(),S=M.useRef(),I=M.useCallback(function(R){R.persist();var A=H({},R);E(!1),c&&R.stopPropagation(),l&&R.target&&(R.target.addEventListener("touchend",ND,{passive:!1}),S.current=R.target),y.current=setTimeout(function(){t(A),_(!0)},s)},[t,s,l,c,h]),w=M.useCallback(function(R,A,U){A===void 0&&(A=!0),U===void 0&&(U=!1),E(!!U),y!=null&&y.current&&clearTimeout(y.current),A&&!p&&!C&&(r==null||r(R)),_(!1),l&&S.current&&S.current.removeEventListener("touchend",ND)},[l,r,p,C]);return{onMouseDown:function(R){return I(R)},onMouseUp:function(R){return w(R)},onMouseLeave:function(R){return w(R,!1)},onTouchStart:function(R){return I(R)},onTouchMove:function(R){return w(R,!1,!0)},onTouchEnd:function(R){return w(R)}}}var zp=m.forwardRef(function(e,n){var t=e.className,r=e.width,i=e.height,a=e.selected,s=e.dataSbId,o=s===void 0?"":s,l=e.testID,u=e.onClick,c=e.children,h=tl({onLongPress:Mn,onClick:u},{shouldPreventDefault:!0,shouldStopPropagation:!0});return m.createElement("div",H({className:we(we([],Array.isArray(t)?t:[t],!0),["sendbird-reaction-button".concat(a?"--selected":"")],!1).join(" "),ref:n,role:"button",style:{width:r,height:i}},h,{tabIndex:0,"data-sb-id":l??o,"data-testid":l??o}),m.createElement("div",{className:"sendbird-reaction-button__inner"},c))});function hde(e){var n=e.className,t=e.message,r=e.userId,i=e.spaceFromTrigger,a=i===void 0?{x:0,y:0}:i,s=e.emojiContainer,o=e.filterEmojiCategoryIds,l=e.toggleReaction,u=M.useRef(null),c=M.useRef(null),h=M.useMemo(function(){return _T(s,o==null?void 0:o(t))},[s,o]);return Fa(t)||na(t)?null:m.createElement("div",{className:Ia([n??"","sendbird-message-item-reaction-menu"]),ref:c},m.createElement(ba,{menuTrigger:function(f){return m.createElement(ps,{className:"sendbird-message-item-reaction-menu__trigger",ref:u,width:"32px",height:"32px",onClick:function(){f()}},m.createElement(ke,{className:"sendbird-message-item-reaction-menu__trigger__icon",testID:"sendbird-message-item-reaction-menu__trigger__icon",type:Ne.EMOJI_MORE,fillColor:Oe.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(f){return m.createElement(oP,{id:gI(t.messageId),parentRef:u,parentContainRef:c,closeDropdown:f,spaceFromTrigger:a},h.map(function(p){var _,g,C,E=((C=(g=(_=t==null?void 0:t.reactions)===null||_===void 0?void 0:_.find(function(y){return y.key===p.key}))===null||g===void 0?void 0:g.userIds)===null||C===void 0?void 0:C.some(function(y){return y===r}))||!1;return m.createElement(zp,{key:p.key,width:"36px",height:"36px",selected:E,onClick:function(){f(),l==null||l(t,p.key,E)},testID:"ui_emoji_reactions_menu_".concat(p.key)},m.createElement(wr,{url:p.url,width:"28px",height:"28px",placeHolder:function(y){var S=y.style;return m.createElement("div",{style:S},m.createElement(ke,{type:Ne.QUESTION,fillColor:Oe.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))}))}}))}var TI=m.forwardRef(function(e,n){var t=e.className,r=t===void 0?"":t,i=e.testID,a=e.children,s=e.count,o=s===void 0?"":s,l=e.isAdd,u=l===void 0?!1:l,c=e.selected,h=c===void 0?!1:c,f=e.onClick,p=f===void 0?function(){}:f,_=function(){return h&&!u?"--selected":u?"--is-add":""};return m.createElement("div",{className:we(we([],Array.isArray(r)?r:[r],!0),["sendbird-reaction-badge".concat(_())],!1).join(" "),"data-testid":i,role:"button",ref:n,onClick:p,onKeyDown:p,onTouchEnd:p,tabIndex:0},m.createElement("div",{className:"sendbird-reaction-badge__inner"},m.createElement("div",{className:"sendbird-reaction-badge__inner__icon"},a),m.createElement(Ce,{className:a&&o?"sendbird-reaction-badge__inner__count":"",type:be.CAPTION_3,color:ue.ONBACKGROUND_1},o)))}),RE=function(e){var n,t=e.className,r=t===void 0?"":t,i=e.children,a=e.onBackdropClick,s=en().state.config.logger,o=M.useRef();return o.current=document.getElementById(Nd),o.current||(o.current=document.createElement("div"),o.current.setAttribute("id",Nd),document.body.appendChild(o.current),(n=s==null?void 0:s.warning)===null||n===void 0||n.call(s,"@sendbird/uikit-react/ui/BottomSheet | Should put a ModalRoot to use the BottomSheet.")),Od.createPortal(m.createElement("div",{className:"".concat(r," sendbird-bottomsheet")},m.createElement("div",{className:"sendbird-bottomsheet__content",role:"dialog","aria-modal":"true","aria-expanded":"true"},i),m.createElement("div",{className:"sendbird-bottomsheet__backdrop",onClick:function(l){l==null||l.stopPropagation(),a==null||a()}})),o.current)};function fde(e){var n=e.height,t=n===void 0?24:n,r=e.width,i=r===void 0?24:r;return m.createElement("div",{className:"sendbird-muted-avatar",style:{height:"".concat(t,"px"),width:"".concat(i,"px")}},m.createElement("div",{className:"sendbird-muted-avatar__icon"},m.createElement("div",{className:"sendbird-muted-avatar__bg",style:{height:"".concat(t,"px"),width:"".concat(i,"px")}}),m.createElement(ke,{type:Ne.MUTE,fillColor:Oe.WHITE,width:"".concat(t-8,"px"),height:"".concat(i-8,"px")})))}function vde(e){var n=e.id,t=e.checked,r=t===void 0?!1:t,i=e.disabled,a=e.onChange,s=M.useState(r),o=s[0],l=s[1];return m.createElement("label",{className:["sendbird-checkbox",i?"disabled":""].join(" "),htmlFor:n},m.createElement("input",{disabled:i,id:n,type:"checkbox",checked:o,onClick:function(){i||l(!o)},onChange:a}),m.createElement("span",{className:["sendbird-checkbox--checkmark",i?"disabled":""].join(" ")}))}var VP=function(e){var n=e.stores,t=n===void 0?{}:n,r=t.sdkStore,i=r===void 0?{}:r,a=i.sdk;return a},pde=function(e){var n=e.config,t=n===void 0?{}:n,r=t.pubSub;return r},zP=function(e){return function(n){return new Promise(function(t,r){var i=VP(e),a=pde(e);i||r(new Error("Sdk not found")),i.groupChannel||r(new Error("Not found GroupChannelModule")),i.groupChannel.createChannel&&typeof i.groupChannel.createChannel=="function"||r(new Error('Not found the function "createChannel"')),i.groupChannel.createChannel(n).then(function(s){t(s),a.publish(Ai.CREATE_CHANNEL,{channel:s})}).catch(r)})}};function Bd(e){var n,t,r=e.user,i=e.currentUserId,a=e.disableMessaging,s=a===void 0?!1:a,o=e.onSuccess,l=en().state,u=zP(l),c=(n=l==null?void 0:l.config)===null||n===void 0?void 0:n.logger,h=M.useContext(lr).stringSet,f=i||((t=l==null?void 0:l.config)===null||t===void 0?void 0:t.userId),p=Fd().onStartDirectMessage;return m.createElement("div",{className:"sendbird__user-profile"},m.createElement("section",{className:"sendbird__user-profile-avatar"},m.createElement(Ui,{height:"80px",width:"80px",src:r==null?void 0:r.profileUrl})),m.createElement("section",{className:"sendbird__user-profile-name"},m.createElement(Ce,{type:be.H_2,color:ue.ONBACKGROUND_1},(r==null?void 0:r.nickname)||h.NO_NAME)),(r==null?void 0:r.userId)!==f&&!s&&m.createElement("section",{className:"sendbird__user-profile-message"},m.createElement(go,{type:br.SECONDARY,onClick:function(){var _={isDistinct:!1,invitedUserIds:r!=null&&r.userId?[r==null?void 0:r.userId]:[],operatorUserIds:[f]};o==null||o(),u(_).then(function(g){c.info("UserProfile, channel create",g),p==null||p(g)})}},h.USER_PROFILE__MESSAGE)),m.createElement("div",{className:"sendbird__user-profile-separator"}),m.createElement("section",{className:"sendbird__user-profile-userId"},m.createElement(Ce,{className:"sendbird__user-profile-userId--label",type:be.CAPTION_2,color:ue.ONBACKGROUND_2},h.USER_PROFILE__USER_ID),m.createElement(Ce,{className:"sendbird__user-profile-userId--value",type:be.BODY_1,color:ue.ONBACKGROUND_1},r==null?void 0:r.userId)))}function jP(e){var n=e.user,t=e.channel,r=e.className,i=r===void 0?void 0:r,a=e.checked,s=e.checkBox,o=e.isOperator,l=e.disabled,u=e.disableMessaging,c=e.action,h=e.onChange,f=e.avatarSize,p=f===void 0?"40px":f,_=e.onClick,g=e.onUserAvatarClick,C=e.renderListItemMenu,E=e.size,y=E===void 0?"normal":E,S=o??(n==null?void 0:n.role)==="operator",I=n.userId,w=M.useRef(null),R=M.useRef(null),A=M.useRef(null),U=Fd(),O=U.disableUserProfile,B=U.renderUserProfile,F=tn().stringSet,P=en().state.config,G=P.userId,L=y==="small"?"sendbird-user-list-item--small":"sendbird-user-list-item",$=y==="small"?"sendbird-user-list-item--small__avatar":"sendbird-user-list-item__avatar",j=y==="small"?"sendbird-user-list-item--small__title":"sendbird-user-list-item__title",X=y==="small"?"sendbird-user-list-item--small__subtitle":"sendbird-user-list-item__subtitle",K=y==="small"?"sendbird-user-list-item--small__checkbox":"sendbird-user-list-item__checkbox",Z=y==="small"?"sendbird-user-list-item--small__action":"sendbird-user-list-item__action",te=y==="small"?"sendbird-user-list-item--small__operator":"sendbird-user-list-item__operator";return m.createElement("div",{className:fn.apply(void 0,we([L],Array.isArray(i)?i:[i],!1)),ref:R},m.createElement(ba,{menuTrigger:function(ne){return m.createElement(m.Fragment,null,m.createElement(Ui,{className:$,ref:A,src:(n==null?void 0:n.profileUrl)||(n==null?void 0:n.plainProfileUrl)||"",width:p,height:p,onClick:function(){var le;O||(ne(),(le=g??_)===null||le===void 0||le())}}),(n==null?void 0:n.isMuted)&&m.createElement(fde,{height:sf(p),width:sf(p)}))},menuItems:function(ne){return B?B({user:n,currentUserId:G??"",close:ne,avatarRef:A}):m.createElement(ya,{openLeft:!0,parentRef:A,parentContainRef:A,closeDropdown:ne,style:{paddingTop:"0px",paddingBottom:"0px"}},m.createElement(Bd,{disableMessaging:u,user:n,currentUserId:G,onSuccess:ne}))}}),m.createElement(Ce,{className:j,type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},n.nickname||F.NO_NAME,G===n.userId&&F.CHANNEL_SETTING__MEMBERS__YOU),!n.nickname&&m.createElement(Ce,{className:X,type:be.CAPTION_3,color:ue.ONBACKGROUND_2},n.userId),s&&m.createElement("label",{className:K,htmlFor:I},m.createElement(vde,{id:I,checked:a,disabled:l,onChange:function(ne){return h==null?void 0:h(ne)}})),S&&m.createElement(Ce,{className:fn(te,s&&"checkbox"),type:be.SUBTITLE_2,color:ue.ONBACKGROUND_2},F.LABEL__OPERATOR),!s&&!C&&c&&m.createElement("div",{className:Z,ref:w},c({actionRef:w,parentRef:R})),!s&&C&&m.createElement("div",{className:Z,ref:w},C({channel:t,user:n})))}function mde(e){var n=e.className,t=n===void 0?"":n,r=e.children,i=r===void 0?"":r;return m.createElement("div",{className:we(we([],Array.isArray(t)?t:[t],!0),["sendbird-tooltip"],!1).join(" ")},m.createElement(Ce,{className:"sendbird-tooltip__text",type:be.CAPTION_2,color:ue.ONCONTENT_1},i))}var _de=8;function gde(e){var n=e.className,t=n===void 0?"":n,r=e.children,i=e.hoverTooltip,a=M.useState(!1),s=a[0],o=a[1],l=M.useRef();return m.createElement("div",{className:we(we([],Array.isArray(t)?t:[t],!0),["sendbird-tooltip-wrapper"],!1).join(" "),onMouseOver:function(){o(!0)},onFocus:function(){o(!0)},onMouseOut:function(){o(!1)},onBlur:function(){o(!1)}},m.createElement("div",{className:"sendbird-tooltip-wrapper__children",ref:l},r),s&&m.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip",style:{bottom:"calc(100% + ".concat(_de,"px)")}},m.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip__inner"},m.createElement("div",{className:"sendbird-tooltip-wrapper__hover-tooltip__inner__tooltip-container",style:{left:l.current?"calc(".concat(l.current.offsetWidth/2,"px - 50%)"):void 0}},i))))}var Ede={message:{},isByMe:!1},qP=m.createContext(Ede),TT=function(e){var n=e.children,t=e.message,r=e.isByMe,i=r===void 0?!1:r;return m.createElement(qP.Provider,{value:{message:t,isByMe:i}},n)},KP=function(){var e=m.useContext(qP);if(e===void 0)throw new Error("useMessageContext must be used within a MessageProvider");return e},yde=function(e){var n,t,r,i=e.message,a=e.channel,s=e.emojiKey,o=s===void 0?"":s,l=e.hideMenu,u=e.emojiContainer,c=e.onPressUserProfileHandler,h=a.members,f=h===void 0?[]:h,p=M.useState(o),_=p[0],g=p[1];function C(){if(c&&i){var E=i==null?void 0:i.sender;c(E)}}return m.createElement(RE,{onBackdropClick:l},m.createElement("div",{className:"sendbird-message__bottomsheet"},m.createElement("div",{className:"sendbird-message__bottomsheet__reacted-members"},(n=i.reactions)===null||n===void 0?void 0:n.map(function(E){var y=Rle(u,E.key);return m.createElement("div",{key:E.key,className:fn("sendbird-message__bottomsheet__reacted-members__item",_===E.key&&"sendbird-message__bottomsheet__reacted-members__item__selected"),onClick:function(){g(E.key)}},m.createElement(wr,{url:y,width:"28px",height:"28px",placeHolder:function(S){var I=S.style;return m.createElement("div",{style:I},m.createElement(ke,{type:Ne.QUESTION,fillColor:Oe.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}),m.createElement(Ce,{type:be.BUTTON_2,color:_===E.key?ue.PRIMARY:ue.ONBACKGROUND_3},E.userIds.length))})),m.createElement("div",{className:"sendbird-message__bottomsheet__reactor-list"},((r=(t=i.reactions)===null||t===void 0?void 0:t.find(function(E){return E.key===_}))===null||r===void 0?void 0:r.userIds.map(function(E){return f.find(function(y){return y.userId===E})}).filter(function(E){return E!==void 0})).map(function(E){return m.createElement(jP,{key:E.userId,className:"sendbird-message__bottomsheet__reactor-list__item",user:E,avatarSize:"36px",onUserAvatarClick:C})}))))};function bde(e){var n,t=e.reaction,r=e.memberNicknamesMap,i=e.setEmojiKey,a=e.toggleReaction,s=e.emojisMap,o=e.channel,l=e.message,u=e.isFiltered,c=sI().openModal,h=en().state.config.userId,f=si().isMobile,p=KP(),_=M.useContext(lr).stringSet,g=tP(h,t),C=t.userIds.length>0&&(o==null?void 0:o.isGroupChannel())&&!o.isSuper,E=function(){if(u&&!g){c({modalProps:{titleText:"Add reaction failed",hideFooter:!0,isCloseOnClickOutside:!0},childElement:function(S){var I=S.closeModal;return m.createElement(af,{type:br.PRIMARY,submitText:_.BUTTON__OK,hideCancelButton:!0,onCancel:I,onSubmit:I})}});return}i(""),a==null||a(l??(p==null?void 0:p.message),t.key,g)},y=tl({onLongPress:function(){i(t.key)},onClick:E},{shouldPreventDefault:!0,shouldStopPropagation:!0});return m.createElement(gde,{className:"sendbird-emoji-reactions__reaction-badge",hoverTooltip:C?m.createElement(mde,null,Mle(t,h,r,_)):m.createElement(m.Fragment,null)},m.createElement("div",H({},f?y:{onClick:E}),m.createElement(TI,{count:t.userIds.length,selected:g},m.createElement(wr,{circle:!0,url:((n=s.get(t==null?void 0:t.key))===null||n===void 0?void 0:n.url)||"",width:"20px",height:"20px",defaultComponent:m.createElement(ke,{width:"20px",height:"20px",type:Ne.QUESTION})}))))}var Cde=function(e){var n=e.onClick,t=tl({onLongPress:function(){},onClick:n},{shouldPreventDefault:!0,shouldStopPropagation:!0});return m.createElement("div",H({className:"sendbird-emoji-reactions__add-reaction-badge","data-testid":"sendbird-emoji-reactions__add-reaction-badge"},t),m.createElement(TI,{isAdd:!0},m.createElement(ke,{type:Ne.EMOJI_MORE,fillColor:Oe.ON_BACKGROUND_3,width:"20px",height:"20px"})))},Sde=function(e){var n=e.userId,t=e.message,r=e.emojiContainer,i=e.hideMenu,a=e.toggleReaction,s=M.useMemo(function(){return pI(r)},[r]);return m.createElement(RE,{onBackdropClick:i},m.createElement("div",{className:"sendbird-message__bottomsheet sendbird-message__emojis-bottomsheet"},s.map(function(o){var l,u,c,h,f=(h=(c=(u=(l=t==null?void 0:t.reactions)===null||l===void 0?void 0:l.find(function(p){return p.key===o.key}))===null||u===void 0?void 0:u.userIds)===null||c===void 0?void 0:c.some(function(p){return p===n}))!==null&&h!==void 0?h:!1;return m.createElement(zp,{key:o.key,width:"44px",height:"44px",selected:f,onClick:function(p){p==null||p.stopPropagation(),a==null||a(t,o.key,f),i()},testID:"ui_mobile_emoji_reactions_menu_".concat(o.key)},m.createElement(wr,{url:o.url,width:"38px",height:"38px",placeHolder:function(p){var _=p.style;return m.createElement("div",{style:_},m.createElement(ke,{type:Ne.QUESTION,fillColor:Oe.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))})))},Tde=function(e){var n,t,r,i,a,s=e.className,o=s===void 0?"":s,l=e.userId,u=e.message,c=e.channel,h=e.emojiContainer,f=e.memberNicknamesMap,p=e.spaceFromTrigger,_=p===void 0?{x:0,y:0}:p,g=e.isByMe,C=g===void 0?!1:g,E=e.toggleReaction,y=e.onPressUserProfile,S=e.filterEmojiCategoryIds,I=!1;try{var w=en().state.config;I=c?mP({channel:c,config:w}):!1}catch{}var R=si().isMobile,A=M.useRef(null),U=M.useState(!1),O=U[0],B=U[1],F=M.useState(""),P=F[0],G=F[1],L=Ale(h),$=M.useMemo(function(){return _T(h,S==null?void 0:S(u))},[h,S]),j=((t=(n=u.reactions)===null||n===void 0?void 0:n.length)!==null&&t!==void 0?t:0)<L.size;return m.createElement("div",{className:Ia([o,"sendbird-emoji-reactions",C?"outgoing":"incoming"])},((i=(r=u.reactions)===null||r===void 0?void 0:r.length)!==null&&i!==void 0?i:0)>0&&((a=u.reactions)===null||a===void 0?void 0:a.map(function(X){return m.createElement(bde,{key:X==null?void 0:X.key,reaction:X,memberNicknamesMap:f,setEmojiKey:G,toggleReaction:E,emojisMap:L,channel:c,message:u,isFiltered:_T(h,S==null?void 0:S(u)).every(function(K){return K.key!==(X==null?void 0:X.key)})})})),!R&&j&&m.createElement(ba,{menuTrigger:function(X){return m.createElement(TI,{className:"sendbird-emoji-reactions__add-reaction-badge",testID:"sendbird-emoji-reactions__add-reaction-badge",ref:A,isAdd:!0,onClick:function(K){var Z;X(),(Z=K==null?void 0:K.stopPropagation)===null||Z===void 0||Z.call(K)}},m.createElement(ke,{type:Ne.EMOJI_MORE,fillColor:Oe.ON_BACKGROUND_3,width:"20px",height:"20px"}))},menuItems:function(X){return m.createElement(oP,{parentRef:A,parentContainRef:A,closeDropdown:X,spaceFromTrigger:_},$.map(function(K){var Z,te,ne,le=((ne=(te=(Z=u==null?void 0:u.reactions)===null||Z===void 0?void 0:Z.find(function(Te){return Te.key===K.key}))===null||te===void 0?void 0:te.userIds)===null||ne===void 0?void 0:ne.some(function(Te){return Te===l}))||!1;return m.createElement(zp,{key:K.key,width:"36px",height:"36px",selected:le,onClick:function(Te){X(),E==null||E(u,K.key,le),Te==null||Te.stopPropagation()},testID:"ui_emoji_reactions_menu_".concat(K.key)},m.createElement(wr,{url:(K==null?void 0:K.url)||"",width:"28px",height:"28px",placeHolder:function(Te){var Ze=Te.style;return m.createElement("div",{style:Ze},m.createElement(ke,{type:Ne.QUESTION,fillColor:Oe.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))}))}}),R&&j&&m.createElement(Cde,{onClick:function(){B(!0)}}),R&&O&&m.createElement(Sde,{userId:l,message:u,emojiContainer:h,hideMenu:function(){B(!1)},toggleReaction:E}),R&&P&&c!==null&&I&&m.createElement(yde,{message:u,channel:c,emojiKey:P,hideMenu:function(){G("")},emojiContainer:h,onPressUserProfileHandler:y}))};function Nde(e){var n,t=e.className,r=t===void 0?"":t,i=e.message;return!(i!=null&&i.isAdminMessage||i!=null&&i.messageType)||!(!((n=i==null?void 0:i.isAdminMessage)===null||n===void 0)&&n.call(i))||(i==null?void 0:i.messageType)!=="admin"?null:m.createElement("div",{className:we(we([],Array.isArray(r)?r:[r],!0),["sendbird-admin-message"],!1).join(" ")},m.createElement(Ce,{className:"sendbird-admin-message__text",type:be.CAPTION_2,color:ue.ONBACKGROUND_2},i==null?void 0:i.message))}function x0(e){return Es(e).when(aa,function(){var n;return(n=e==null?void 0:e.type)!==null&&n!==void 0?n:""}).when(ma,function(){var n,t;return(t=(n=OE(e))===null||n===void 0?void 0:n.mimeType)!==null&&t!==void 0?t:""}).otherwise(function(){return""})}function OE(e){var n=e.fileInfoList;return n.length>0?n[0]:null}function WP(e){return Es(e).when(aa,function(){var n;return(n=e==null?void 0:e.name)!==null&&n!==void 0?n:""}).when(ma,function(){var n,t;return(t=(n=OE(e))===null||n===void 0?void 0:n.fileName)!==null&&t!==void 0?t:""}).otherwise(function(){return""})}function P0(e){return Es(e).when(aa,function(){var n;return(n=e==null?void 0:e.url)!==null&&n!==void 0?n:""}).when(ma,function(){var n,t;return(t=(n=OE(e))===null||n===void 0?void 0:n.url)!==null&&t!==void 0?t:""}).otherwise(function(){return""})}function Ide(e){return Es(e).when(aa,function(){return e.thumbnails}).when(ma,function(){var n,t;return(t=(n=OE(e))===null||n===void 0?void 0:n.thumbnails)!==null&&t!==void 0?t:[]}).otherwise(function(){return[]})}function YP(e){var n=Ide(e);return n&&n.length>0?n[0].url:""}function Mde(e){var n,t,r,i,a,s,o,l=e.message,u=e.userId,c=u===void 0?"":u,h=e.isByMe,f=h===void 0?!1:h,p=e.className,_=p===void 0?"":p,g=e.isUnavailable,C=g===void 0?!1:g,E=e.onClick,y=M.useContext(lr).stringSet,S=l.parentMessage,I=S==null?void 0:S.sender,w=c===(I==null?void 0:I.userId)?y.QUOTED_MESSAGE__CURRENT_USER:I==null?void 0:I.nickname,R=P0(S),A=x0(S),U=c===((t=l==null?void 0:l.sender)===null||t===void 0?void 0:t.userId)?y.QUOTED_MESSAGE__CURRENT_USER:(r=l==null?void 0:l.sender)===null||r===void 0?void 0:r.nickname,O=M.useState(!1),B=O[0],F=O[1],P=gle(),G=(a=(i=WP(S))===null||i===void 0?void 0:i.split("/"))!==null&&a!==void 0?a:R.split("/");return m.createElement("div",{className:Ia([_,"sendbird-quote-message",f?"outgoing":"incoming",C?"unavailable":""]),key:S==null?void 0:S.messageId,onClick:function(){!C&&E&&E()},onTouchEnd:function(){!C&&E&&E()}},m.createElement("div",{className:"sendbird-quote-message__replied-to"},m.createElement(ke,{className:"sendbird-quote-message__replied-to__icon",type:Ne.REPLY,fillColor:Oe.ON_BACKGROUND_3,width:"12px",height:"12px"}),m.createElement(Ce,{className:"sendbird-quote-message__replied-to__text",testID:"sendbird-quote-message__replied-to__text",type:be.CAPTION_2,color:ue.ONBACKGROUND_3},m.createElement("span",{className:"sendbird-quote-message__replied-to__text__nickname"},U),m.createElement("span",{className:"sendbird-quote-message__replied-to__text__text"},y.QUOTED_MESSAGE__REPLIED_TO),m.createElement("span",{className:"sendbird-quote-message__replied-to__text__nickname"},w))),m.createElement("div",{className:"sendbird-quote-message__replied-message"},C&&m.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},m.createElement(Ce,{className:"sendbird-quote-message__replied-message__text-message__word",testID:"sendbird-quote-message__replied-message__text-message__word",type:be.BODY_2,color:ue.ONBACKGROUND_1},y.QUOTED_MESSAGE__UNAVAILABLE)),Ea(S)&&((s=S==null?void 0:S.message)===null||s===void 0?void 0:s.length)>0&&!C&&m.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},m.createElement(Ce,{className:"sendbird-quote-message__replied-message__text-message__word",testID:"sendbird-quote-message__replied-message__text-message__word",type:be.BODY_2,color:ue.ONBACKGROUND_1},S==null?void 0:S.message)),Zo(S)&&R&&!C&&m.createElement("div",{className:"sendbird-quote-message__replied-message__text-message"},m.createElement(Ce,{className:"sendbird-quote-message__replied-message__text-message__word",testID:"sendbird-quote-message__replied-message__text-message__word",type:be.BODY_2,color:ue.ONBACKGROUND_1},y.VOICE_MESSAGE)),(ic(S)||ma(S))&&R&&!C&&m.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message"},m.createElement(wr,{className:"sendbird-quote-message__replied-message__thumbnail-message__image",url:R,alt:A,width:"144px",height:"108px",onLoad:function(){return F(!0)},defaultComponent:m.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__placeholder"},m.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__placeholder__icon"},m.createElement(ke,{type:Vl(A)?Ne.PLAY:Ne.PHOTO,fillColor:Oe.ON_BACKGROUND_2,width:"22px",height:"22px"})))}),Vl(A)&&!(((o=S==null?void 0:S.thumbnails)===null||o===void 0?void 0:o.length)>0)&&m.createElement(m.Fragment,null,m.createElement("video",{className:"sendbird-quote-message__replied-message__thumbnail-message__video"},m.createElement("source",{src:R,type:A})),m.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover"},m.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover__icon"},m.createElement(ke,{type:Ne.PLAY,fillColor:Oe.ON_BACKGROUND_2,width:"14px",height:"14px"})))),B&&Pd(A)&&m.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover"},m.createElement("div",{className:"sendbird-quote-message__replied-message__thumbnail-message__cover__icon"},m.createElement(ke,{type:Ne.GIF,fillColor:Oe.THUMBNAIL_ICON,width:"14px",height:"14px"})))),fI(S)===Bo.FILE&&R&&!C&&m.createElement("div",{className:"sendbird-quote-message__replied-message__file-message"},m.createElement(ke,{className:"sendbird-quote-message__replied-message__file-message__type-icon",type:(n={},n[P.IMAGE]=Ne.PHOTO,n[P.VIDEO]=Ne.PLAY,n[P.AUDIO]=Ne.FILE_AUDIO,n[P.GIF]=Ne.GIF,n[P.OTHERS]=Ne.FILE_DOCUMENT,n)[W6(A)],fillColor:Oe.ON_BACKGROUND_3,width:"16px",height:"16px"}),m.createElement(Ce,{className:"sendbird-quote-message__replied-message__file-message__file-name",type:be.BODY_2,color:ue.ONBACKGROUND_3},rP(G[G.length-1])))))}var ID=function(e){var n,t=tn().stringSet,r=Lr(),i=r.message,a=r.hideMenu;return m.createElement(Ki,H({},e,{onClick:function(s){var o;Ea(i)&&vI(i.message),a(),(o=e.onClick)===null||o===void 0||o.call(e,s)}}),(n=e.children)!==null&&n!==void 0?n:m.createElement(m.Fragment,null,m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},t.MESSAGE_MENU__COPY),m.createElement(ke,{type:Ne.COPY,fillColor:Oe.PRIMARY,width:"24px",height:"24px"})))},MD=function(e){var n,t,r,i=tn().stringSet,a=Lr(),s=a.message,o=a.hideMenu,l=a.setQuoteMessage;return m.createElement(Ki,H({},e,{disabled:s.parentMessageId>0,onClick:function(u){var c;l(s),o(),(c=e.onClick)===null||c===void 0||c.call(e,u)}}),(n=e.children)!==null&&n!==void 0?n:m.createElement(m.Fragment,null,m.createElement(Ce,{type:be.SUBTITLE_1,color:((t=s.parentMessageId)!==null&&t!==void 0?t:0)>0?ue.ONBACKGROUND_4:ue.ONBACKGROUND_1},i.MESSAGE_MENU__REPLY),m.createElement(ke,{type:Ne.REPLY,fillColor:((r=s.parentMessageId)!==null&&r!==void 0?r:0)>0?Oe.ON_BACKGROUND_4:Oe.PRIMARY,width:"24px",height:"24px"})))},AD=function(e){var n,t=tn().stringSet,r=Lr(),i=r.message,a=r.hideMenu,s=r.onReplyInThread;return m.createElement(Ki,H({},e,{onClick:function(o){var l;s({message:i}),a(),(l=e.onClick)===null||l===void 0||l.call(e,o)}}),(n=e.children)!==null&&n!==void 0?n:m.createElement(m.Fragment,null,m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},t.MESSAGE_MENU__THREAD),m.createElement(ke,{type:Ne.THREAD,fillColor:Oe.PRIMARY,width:"24px",height:"24px"})))},wD=function(e){var n,t=tn().stringSet,r=Lr(),i=r.hideMenu,a=r.showEdit,s=r.isOnline;return m.createElement(Ki,H({},e,{onClick:function(o){var l;s&&(a(!0),i(),(l=e.onClick)===null||l===void 0||l.call(e,o))}}),(n=e.children)!==null&&n!==void 0?n:m.createElement(m.Fragment,null,m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},t.MESSAGE_MENU__EDIT),m.createElement(ke,{type:Ne.EDIT,fillColor:Oe.PRIMARY,width:"24px",height:"24px"})))},RD=function(e){var n,t=tn().stringSet,r=Lr(),i=r.message,a=r.hideMenu,s=r.resendMessage,o=r.isOnline;return m.createElement(Ki,H({},e,{onClick:function(l){var u;o&&(s(i),a(),(u=e.onClick)===null||u===void 0||u.call(e,l))}}),(n=e.children)!==null&&n!==void 0?n:m.createElement(m.Fragment,null,m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},t.MESSAGE_MENU__RESEND),m.createElement(ke,{type:Ne.REFRESH,fillColor:Oe.PRIMARY,width:"24px",height:"24px"})))},OD=function(e){var n,t,r,i=tn().stringSet,a=Lr(),s=a.message,o=a.hideMenu,l=a.deleteMessage,u=a.showRemove,c=a.isOnline,h=a.disableDeleteMessage;return m.createElement(Ki,H({},e,{disabled:typeof h=="boolean"?h:((t=(n=s.threadInfo)===null||n===void 0?void 0:n.replyCount)!==null&&t!==void 0?t:0)>0,onClick:function(f){var p;na(s)?l(s):c&&(u(!0),o(),(p=e.onClick)===null||p===void 0||p.call(e,f))}}),(r=e.children)!==null&&r!==void 0?r:m.createElement(m.Fragment,null,m.createElement(Ce,{type:be.SUBTITLE_1,color:h?ue.ONBACKGROUND_4:ue.ONBACKGROUND_1},i.MESSAGE_MENU__DELETE),m.createElement(ke,{type:Ne.DELETE,fillColor:Oe.PRIMARY,width:"24px",height:"24px"})))},Ade=function(e){var n,t=tn().stringSet,r=Lr(),i=r.hideMenu,a=r.message,s=r.onDownloadClick,o=a.url;return m.createElement(Ki,H({},e,{onClick:function(){i()}}),(n=e.children)!==null&&n!==void 0?n:m.createElement("a",{className:"sendbird-message__contextmenu--hyperlink",rel:"noopener noreferrer",href:o,target:"_blank",onClick:s},m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},t.MESSAGE_MENU__SAVE),m.createElement(ke,{type:Ne.DOWNLOAD,fillColor:Oe.PRIMARY,width:"24px",height:"24px"})))},DD=function(e){var n,t=tn().stringSet,r=Lr(),i=r.message,a=r.hideMenu,s=r.markAsUnread;return m.createElement(Ki,H({},e,{onClick:function(o){var l;s&&s(i,"manual"),a(),(l=e.onClick)===null||l===void 0||l.call(e,o)}}),(n=e.children)!==null&&n!==void 0?n:m.createElement(m.Fragment,null,m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},t.MESSAGE_MENU__MARK_AS_UNREAD),m.createElement(ke,{type:Ne.MARK_AS_UNREAD,fillColor:Oe.PRIMARY,width:"24px",height:"24px"})))},wde=function(e){var n,t,r,i,a,s=e.channel,o=e.message,l=e.replyType,u=e.userId,c=e.resendMessage,h=e.showEdit,f=e.showRemove,p=e.deleteMenuState,_=e.deleteMessage,g=e.setQuoteMessage,C=e.parentRef,E=e.onReplyInThread,y=e.isOpenedFromThread,S=y===void 0?!1:y,I=e.onDownloadClick,w=I===void 0?null:I,R=e.renderMenuItems,A=e.hideMenu,U=((n=o==null?void 0:o.sender)===null||n===void 0?void 0:n.userId)===u,O=en().state.config,B=O.isOnline,F=O.groupChannel.enableMarkAsUnread,P=Ea(o),G=Ea(o)&&Hp(o)&&U,L=na(o)&&(o==null?void 0:o.isResendable)&&U,$=!Fa(o)&&U,j=U&&(p===void 0||p!=="HIDE"),X=j&&$,K=!Fa(o)&&aa(o)&&!(Zo(o)&&(s!=null&&s.isSuper)||s!=null&&s.isBroadcast),Z=l==="QUOTE_REPLY"&&!na(o)&&!Fa(o)&&(s==null?void 0:s.isGroupChannel()),te=l==="THREAD"&&!S&&!na(o)&&!Fa(o)&&!Y6(o)&&(s==null?void 0:s.isGroupChannel()),ne=!na(o)&&!Fa(o)&&o.parentMessageId<=0&&((t=s==null?void 0:s.isGroupChannel)===null||t===void 0?void 0:t.call(s)),le=p!==void 0&&p==="DISABLE"||((i=(r=o==null?void 0:o.threadInfo)===null||r===void 0?void 0:r.replyCount)!==null&&i!==void 0?i:0)>0,Te={message:o,hideMenu:A,setQuoteMessage:g,onReplyInThread:E,onMoveToParentMessage:Mn,showEdit:h,showRemove:f,deleteMessage:_,resendMessage:c,markAsUnread:e.markAsUnread,isOnline:B,disableDeleteMessage:le,triggerRef:C,containerRef:C,onDownloadClick:w};return m.createElement(mI,{value:Te},m.createElement(ya,{className:"sendbird-message__mobile-context-menu",parentRef:C,parentContainRef:C,closeDropdown:A},(a=R==null?void 0:R({items:{CopyMenuItem:ID,ReplyMenuItem:MD,ThreadMenuItem:AD,EditMenuItem:wD,MarkAsUnreadMenuItem:DD,ResendMenuItem:RD,DeleteMenuItem:OD}}))!==null&&a!==void 0?a:m.createElement(m.Fragment,null,P&&m.createElement(ID,null),Z&&m.createElement(MD,null),te&&m.createElement(AD,null),G&&m.createElement(wD,null),F&&ne&&m.createElement(DD,null),L&&m.createElement(RD,null),X&&m.createElement(OD,null),K&&m.createElement(Ade,null))))},UD=function(e){var n,t=tn().stringSet,r=Lr(),i=r.message,a=r.hideMenu;return m.createElement(ac,H({},e,{onClick:function(s){var o;Ea(i)&&vI(i.message),a(),(o=e.onClick)===null||o===void 0||o.call(e,s)}}),(n=e.children)!==null&&n!==void 0?n:m.createElement(m.Fragment,null,m.createElement(ke,{type:Ne.COPY,fillColor:Oe.PRIMARY,width:"24px",height:"24px"}),m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},t.MESSAGE_MENU__COPY)))},LD=function(e){var n,t=tn().stringSet,r=Lr(),i=r.hideMenu,a=r.showEdit,s=r.isOnline;return m.createElement(ac,H({},e,{onClick:function(o){var l;s&&(a(!0),i(),(l=e.onClick)===null||l===void 0||l.call(e,o))}}),(n=e.children)!==null&&n!==void 0?n:m.createElement(m.Fragment,null,m.createElement(ke,{type:Ne.EDIT,fillColor:Oe.PRIMARY,width:"24px",height:"24px"}),m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},t.MESSAGE_MENU__EDIT)))},kD=function(e){var n,t=tn().stringSet,r=Lr(),i=r.message,a=r.hideMenu,s=r.resendMessage,o=r.isOnline;return m.createElement(ac,H({},e,{onClick:function(l){var u;o&&(s(i),a(),(u=e.onClick)===null||u===void 0||u.call(e,l))}}),(n=e.children)!==null&&n!==void 0?n:m.createElement(m.Fragment,null,m.createElement(ke,{type:Ne.REFRESH,fillColor:Oe.PRIMARY,width:"24px",height:"24px"}),m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},t.MESSAGE_MENU__RESEND)))},xD=function(e){var n,t,r,i=tn().stringSet,a=Lr(),s=a.message,o=a.hideMenu,l=a.setQuoteMessage;return m.createElement(ac,H({},e,{disabled:s.parentMessageId>0,onClick:function(u){var c;l(s),o(),(c=e.onClick)===null||c===void 0||c.call(e,u)}}),(n=e.children)!==null&&n!==void 0?n:m.createElement(m.Fragment,null,m.createElement(ke,{type:Ne.REPLY,fillColor:((t=s.parentMessageId)!==null&&t!==void 0?t:0)>0?Oe.ON_BACKGROUND_3:Oe.PRIMARY,width:"24px",height:"24px"}),m.createElement(Ce,{type:be.SUBTITLE_1,color:((r=s.parentMessageId)!==null&&r!==void 0?r:0)>0?ue.ONBACKGROUND_4:ue.ONBACKGROUND_1},i.MESSAGE_MENU__REPLY)))},PD=function(e){var n,t=tn().stringSet,r=Lr(),i=r.message,a=r.hideMenu,s=r.onReplyInThread;return m.createElement(ac,H({},e,{onClick:function(o){var l;s({message:i}),a(),(l=e.onClick)===null||l===void 0||l.call(e,o)}}),(n=e.children)!==null&&n!==void 0?n:m.createElement(m.Fragment,null,m.createElement(ke,{type:Ne.THREAD,fillColor:Oe.PRIMARY,width:"24px",height:"24px"}),m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},t.MESSAGE_MENU__THREAD)))},FD=function(e){var n,t,r,i=tn().stringSet,a=Lr(),s=a.message,o=a.hideMenu,l=a.deleteMessage,u=a.showRemove,c=a.isOnline,h=a.disableDeleteMessage;return m.createElement(ac,H({},e,{disabled:typeof h=="boolean"?h:((t=(n=s.threadInfo)===null||n===void 0?void 0:n.replyCount)!==null&&t!==void 0?t:0)>0,onClick:function(f){var p;na(s)?l(s):c&&(u(!0),o(),(p=e.onClick)===null||p===void 0||p.call(e,f))}}),(r=e.children)!==null&&r!==void 0?r:m.createElement(m.Fragment,null,m.createElement(ke,{type:Ne.DELETE,fillColor:Oe.PRIMARY,width:"24px",height:"24px"}),m.createElement(Ce,{type:be.SUBTITLE_1,color:h?ue.ONBACKGROUND_4:ue.ONBACKGROUND_1},i.MESSAGE_MENU__DELETE)))},Rde=function(e){var n,t=tn().stringSet,r=Lr(),i=r.hideMenu,a=r.message,s=r.onDownloadClick,o=a.url;return m.createElement(ac,{onClick:function(){return i()}},(n=e.children)!==null&&n!==void 0?n:m.createElement("a",{className:"sendbird-message__bottomsheet--hyperlink",rel:"noopener noreferrer",href:o,target:"_blank",onClick:s},m.createElement(ke,{type:Ne.DOWNLOAD,fillColor:Oe.PRIMARY,width:"24px",height:"24px"}),m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},t.MESSAGE_MENU__SAVE)))},BD=function(e){var n,t=tn().stringSet,r=Lr(),i=r.message,a=r.hideMenu,s=r.markAsUnread;return m.createElement(ac,H({},e,{onClick:function(o){var l;s&&s(i,"manual"),a(),(l=e.onClick)===null||l===void 0||l.call(e,o)}}),(n=e.children)!==null&&n!==void 0?n:m.createElement(m.Fragment,null,m.createElement(ke,{type:Ne.MARK_AS_UNREAD,fillColor:Oe.PRIMARY,width:"24px",height:"24px"}),m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},t.MESSAGE_MENU__MARK_AS_UNREAD)))},gC=38,Ode=function(e){var n,t,r,i,a,s=e.hideMenu,o=e.channel,l=e.emojiContainer,u=e.message,c=e.replyType,h=e.userId,f=e.resendMessage,p=e.deleteMessage,_=e.toggleReaction,g=e.isReactionEnabled,C=g===void 0?!1:g,E=e.showEdit,y=e.showRemove,S=e.deleteMenuState,I=e.setQuoteMessage,w=e.onReplyInThread,R=e.isOpenedFromThread,A=R===void 0?!1:R,U=e.onDownloadClick,O=e.renderMenuItems,B=((n=u==null?void 0:u.sender)===null||n===void 0?void 0:n.userId)===h,F=en().state.config,P=F.isOnline,G=F.groupChannel.enableMarkAsUnread,L=Ea(u),$=Ea(u)&&Hp(u)&&B,j=P&&na(u)&&(u==null?void 0:u.isResendable)&&B,X=!Fa(u)&&B,K=B&&(S===void 0||S!=="HIDE"),Z=K&&X,te=S!==void 0&&S==="DISABLE"||((r=(t=u==null?void 0:u.threadInfo)===null||t===void 0?void 0:t.replyCount)!==null&&r!==void 0?r:0)>0,ne=Hp(u)&&aa(u)&&!Zo(u),le=!na(u)&&!Fa(u)&&C,Te=c==="QUOTE_REPLY"&&!na(u)&&!Fa(u)&&(o==null?void 0:o.isGroupChannel())&&!(o!=null&&o.isBroadcast),Ze=c==="THREAD"&&!A&&!na(u)&&!Fa(u)&&!Y6(u)&&(o==null?void 0:o.isGroupChannel())&&!(o!=null&&o.isBroadcast),ce=!na(u)&&!Fa(u)&&((i=o==null?void 0:o.isGroupChannel)===null||i===void 0?void 0:i.call(o))&&c!=="THREAD",ge=Math.floor(window.innerWidth/gC)-1,Qe=M.useState(!1),xe=Qe[0],tt=Qe[1],ht=l&&pI(l),bt=xe?ht:ht==null?void 0:ht.slice(0,ge),Rt=ht&&ht.length>ge,Ut={message:u,hideMenu:s,setQuoteMessage:I,onReplyInThread:w,onMoveToParentMessage:function(){},showEdit:E,showRemove:y,deleteMessage:p,resendMessage:f,markAsUnread:e.markAsUnread,isOnline:P,disableDeleteMessage:te,triggerRef:null,containerRef:null,onDownloadClick:U};return m.createElement(mI,{value:Ut},m.createElement(RE,{onBackdropClick:s},m.createElement("div",{className:"sendbird-message__bottomsheet"},le&&m.createElement("div",{className:"sendbird-message__bottomsheet-reactions"},m.createElement("ul",{className:"sendbird-message__bottomsheet-reaction-bar"},m.createElement("div",{className:fn("sendbird-message__bottomsheet-reaction-bar__row",xe&&"sendbird-message__bottomsheet-reaction-bar__all")},bt.map(function(lt){var kt,$t,mt,zt=(mt=($t=(kt=u==null?void 0:u.reactions)===null||kt===void 0?void 0:kt.filter(function(Tt){return Tt.key===lt.key})[0])===null||$t===void 0?void 0:$t.userIds)===null||mt===void 0?void 0:mt.some(function(Tt){return Tt===h});return m.createElement(zp,{key:lt.key,width:"".concat(gC,"px"),height:"".concat(gC,"px"),selected:zt,onClick:function(){s(),_==null||_(u,lt.key,zt)},testID:"ui_mobile_emoji_reactions_menu_".concat(lt.key)},m.createElement(wr,{url:(lt==null?void 0:lt.url)||"",width:"28px",height:"28px",placeHolder:function(Tt){var Pt=Tt.style;return m.createElement("div",{style:Pt},m.createElement(ke,{type:Ne.QUESTION,fillColor:Oe.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))}),Rt&&!xe&&m.createElement(zp,{key:"emoji_more",width:"38px",height:"38px",onClick:function(){return tt(!0)},testID:"ui_mobile_emoji_reactions_menu_emojiadd"},m.createElement(wr,{url:"",width:"28px",height:"28px",placeHolder:function(lt){var kt=lt.style;return m.createElement("div",{style:kt},m.createElement(ke,{type:Ne.EMOJI_MORE,fillColor:Oe.ON_BACKGROUND_3,width:"28px",height:"28px"}))}}))))),!xe&&m.createElement("div",{className:"sendbird-message__bottomsheet--actions"},(a=O==null?void 0:O({items:{CopyMenuItem:UD,EditMenuItem:LD,ResendMenuItem:kD,ReplyMenuItem:xD,ThreadMenuItem:PD,DeleteMenuItem:FD,MarkAsUnreadMenuItem:BD}}))!==null&&a!==void 0?a:m.createElement(m.Fragment,null,L&&m.createElement(UD,null),$&&m.createElement(LD,null),G&&ce&&m.createElement(BD,null),j&&m.createElement(kD,null),Te&&m.createElement(xD,null),Ze&&m.createElement(PD,null),Z&&m.createElement(FD,null),ne&&m.createElement(Rde,null))))))},Dde=function(e){return m.createElement(m.Fragment,null,e!=null&&e.isReactionEnabled?m.createElement(Ode,H({},e)):m.createElement(wde,H({},e)))};function Ude(e,n){var t,r=e.className,i=e.threadInfo,a=e.onClick,s=i.mostRepliedUsers,o=s===void 0?[]:s,l=i.replyCount,u=tn().stringSet;return m.createElement("div",{className:"sendbird-ui-thread-replies ".concat(r),role:"button",onClick:function(c){a==null||a(c),c==null||c.stopPropagation()},onKeyDown:function(c){a==null||a(c),c==null||c.stopPropagation()},ref:n},m.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles"},o.slice(0,4).map(function(c){return m.createElement(Ui,{key:c.userId,className:"sendbird-ui-thread-replies__user-profiles__avatar",src:c==null?void 0:c.profileUrl,alt:"user profile",width:"20px",height:"20px"})}),(o==null?void 0:o.length)>=5&&m.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar"},m.createElement(Ui,{className:"sendbird-ui-thread-replies__user-profiles__avatar__image",src:(t=o==null?void 0:o[4])===null||t===void 0?void 0:t.profileUrl,alt:"user profile",width:"20px",height:"20px"}),m.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar__cover"}),m.createElement("div",{className:"sendbird-ui-thread-replies__user-profiles__avatar__plus"},m.createElement(ke,{type:Ne.PLUS,fillColor:Oe.WHITE,width:"16px",height:"16px"})))),l>0&&m.createElement(Ce,{className:"sendbird-ui-thread-replies__reply-counts",type:be.CAPTION_2,color:ue.PRIMARY},l===1?"".concat(l," ").concat(u.CHANNEL__THREAD_REPLY):"".concat(l>99?u.CHANNEL__THREAD_OVER_MAX:l," ").concat(u.CHANNEL__THREAD_REPLIES)),m.createElement(ke,{className:"sendbird-ui-thread-replies__icon",type:Ne.CHEVRON_RIGHT,fillColor:Oe.PRIMARY,width:"16px",height:"16px"}))}var Lde=m.forwardRef(Ude);function kde(e){var n,t,r,i=e.mentionTemplate,a=e.mentionedUserId,s=e.mentionedUserNickname,o=e.isByMe,l=M.useRef(),u=en().state,c=(n=u==null?void 0:u.config)===null||n===void 0?void 0:n.userId,h=(r=(t=u==null?void 0:u.stores)===null||t===void 0?void 0:t.sdkStore)===null||r===void 0?void 0:r.sdk,f=c===a,p=M.useState(),_=p[0],g=p[1],C=M.useCallback(function(E){if(_||!(h!=null&&h.createApplicationUserListQuery)){E();return}var y=h==null?void 0:h.createApplicationUserListQuery({userIdsFilter:[a]});y.next().then(function(S){(S==null?void 0:S.length)>0&&g(S[0]),E()})},[h,a]);return m.createElement(ba,{menuTrigger:function(E){return m.createElement("a",{className:fn("sendbird-word__mention",f&&"sendbird-word__mention--me"),onClick:function(){return C(E)},ref:l,"data-userid":a,"data-nickname":s,"data-sb-mention":!0},m.createElement(Ce,{type:be.CAPTION_1,color:o?ue.ONCONTENT_1:ue.ONBACKGROUND_1},"".concat(i).concat(s)))},menuItems:function(E){return m.createElement(ya,{parentRef:l,parentContainRef:l,closeDropdown:E,style:{paddingTop:"0px",paddingBottom:"0px"}},m.createElement(Bd,{user:_,onSuccess:E,currentUserId:c}))}})}var xde=/https?:\/\//;function QP(e){var n=e.className,t=n===void 0?"":n,r=e.src,i=e.type,a=e.color,s=e.children,o=xde.test(r)?r:"http://".concat(r);return m.createElement("a",{className:we(we([],Array.isArray(t)?t:[t],!0),["sendbird-link-label",D6(a)],!1).join(" "),href:o,target:"_blank",rel:"noopener noreferrer",onTouchEnd:function(l){l.preventDefault(),l.nativeEvent.stopImmediatePropagation(),sm(o)}},m.createElement(Ce,{className:"sendbird-link-label__label",testID:"sendbird-link-label__label",type:i,color:a},s))}function Pde(e,n,t){return"sb-msg_".concat(e,"_").concat(n,"_").concat(t)}var Fde=["https:","http:","tel:","mailto:"];function Bde(e){var n=decodeURIComponent(e);try{var t=new URL(n).protocol;return Fde.some(function(r){return r===t.toLowerCase()})?n:"#"}catch{!n.startsWith("http://")&&!n.startsWith("https://")&&(n="https://"+n)}return n}function jp(e){var n=e.tokens,t=KP(),r=t==null?void 0:t.message,i=t==null?void 0:t.isByMe,a=r.updatedAt,s=r.createdAt;return m.createElement(m.Fragment,null,n==null?void 0:n.map(function(o,l){var u=Pde(s,a,l);return Es(o.type).with(Fr.markdown,function(){var c=o,h=c.groups;return m.createElement("span",{className:"sendbird-word",key:u,"data-testid":"sendbird-ui-word"},Es(c.markdownType).with("bold",function(){return m.createElement("span",{style:{fontWeight:"bold"}},m.createElement(jp,{tokens:ST({messageText:h[1]})}))}).with("url",function(){return m.createElement("a",{className:i?"sendbird-label--color-oncontent-1":"sendbird-label--color-onbackground-1",href:Bde(h[2]),target:"_blank",rel:"noopener noreferrer"},m.createElement(jp,{tokens:ST({messageText:h[1]})}))}).otherwise(function(){return m.createElement(m.Fragment,null)}))}).with(Fr.mention,function(){return m.createElement("span",{className:"sendbird-word",key:u,"data-testid":"sendbird-ui-word"},m.createElement(kde,{mentionTemplate:lm,mentionedUserId:o.userId,mentionedUserNickname:o.value,isByMe:i}))}).with(Fr.url,function(){return m.createElement("span",{className:"sendbird-word",key:u,"data-testid":"sendbird-ui-word"},m.createElement(QP,{src:o.value,type:be.BODY_1,color:i?ue.ONCONTENT_1:ue.ONBACKGROUND_1},o.value))}).otherwise(function(){return m.createElement(m.Fragment,{key:u},Bce(o.value))})}))}function Hde(e){var n,t,r,i,a=e.className,s=e.message,o=e.isByMe,l=o===void 0?!1:o,u=e.mouseHover,c=u===void 0?!1:u,h=e.isMentionEnabled,f=h===void 0?!1:h,p=e.isReactionEnabled,_=p===void 0?!1:p,g=e.isMarkdownEnabled,C=g===void 0?!1:g,E=e.onMessageHeightChange,y=E===void 0?function(){}:E,S=M.useContext(lr).stringSet,I=f&&((n=s==null?void 0:s.mentionedMessageTemplate)===null||n===void 0?void 0:n.length)>0&&(s==null?void 0:s.mentionedUsers)&&((t=s==null?void 0:s.mentionedUsers)===null||t===void 0?void 0:t.length)>0,w=M.useMemo(function(){var A;return of(I?{mentionedUsers:(A=s==null?void 0:s.mentionedUsers)!==null&&A!==void 0?A:void 0,messageText:s==null?void 0:s.mentionedMessageTemplate,includeMarkdown:C}:{messageText:s==null?void 0:s.message,includeMarkdown:C})},[s==null?void 0:s.updatedAt,s==null?void 0:s.message]),R=function(){var A;return sm((A=s==null?void 0:s.ogMetaData)===null||A===void 0?void 0:A.url)};return m.createElement("div",{className:Ia([a??"","sendbird-og-message-item-body",l?"outgoing":"incoming",c?"mouse-hover":"",_&&((r=s==null?void 0:s.reactions)===null||r===void 0?void 0:r.length)>0?"reactions":""])},m.createElement(Ce,{type:be.BODY_1,color:l?ue.ONCONTENT_1:ue.ONBACKGROUND_1},m.createElement("div",{className:LP},m.createElement(jp,{tokens:w}),hI(s)&&m.createElement(Ce,{className:"sendbird-og-message-item-body__text-bubble__message",type:be.BODY_1,color:l?ue.ONCONTENT_2:ue.ONBACKGROUND_2}," ".concat(S.MESSAGE_EDITED," ")))),((i=s.ogMetaData)===null||i===void 0?void 0:i.defaultImage)&&m.createElement(Gde,{onClick:R,ogImage:s.ogMetaData.defaultImage,onMessageHeightChange:y}),s.ogMetaData&&m.createElement($de,{onClick:R,ogMetaData:s.ogMetaData,onMessageHeightChange:y}),m.createElement("div",{className:"sendbird-og-message-item-body__cover"}))}var Gde=function(e){var n=e.onClick,t=e.ogImage,r=e.onMessageHeightChange,i=M.useRef(null),a=si().isMobile;return m.createElement("div",{ref:i,className:fn("sendbird-og-message-item-body__og-thumbnail",!t.url&&"sendbird-og-message-item-body__og-thumbnail__empty"),onClick:function(){return n()}},m.createElement(wr,{className:"sendbird-og-message-item-body__og-thumbnail__image",url:t.url||"",alt:t.alt||"",width:"100%",height:a?"136px":"240px",onLoad:r,onError:function(){var s,o;try{(o=(s=i==null?void 0:i.current)===null||s===void 0?void 0:s.classList)===null||o===void 0||o.add("sendbird-og-message-item-body__og-thumbnail__empty")}catch{}},defaultComponent:m.createElement("div",{className:"sendbird-og-message-item-body__og-thumbnail__place-holder"},m.createElement(ke,{className:"sendbird-og-message-item-body__og-thumbnail__place-holder__icon",type:Ne.THUMBNAIL_NONE,width:"56px",height:"56px"}))}))},$de=function(e){var n=e.onClick,t=e.ogMetaData,r=e.onMessageHeightChange;return M.useEffect(function(){r()},[t.title,t.description,t.url]),m.createElement("div",{className:"sendbird-og-message-item-body__description",onClick:function(){return n()}},t.title&&m.createElement(Ce,{className:"sendbird-og-message-item-body__description__title",type:be.SUBTITLE_2,color:ue.ONBACKGROUND_1},t.title),t.description&&m.createElement(Ce,{className:"sendbird-og-message-item-body__description__description",type:be.BODY_2,color:ue.ONBACKGROUND_1},t.description),t.url&&m.createElement(Ce,{className:"sendbird-og-message-item-body__description__url",type:be.CAPTION_3,color:ue.ONBACKGROUND_2},t.url))};function Vde(e){var n,t=e.className,r=t===void 0?"":t,i=e.message,a=e.isByMe,s=a===void 0?!1:a,o=e.mouseHover,l=o===void 0?!1:o,u=e.isMentionEnabled,c=u===void 0?!1:u,h=e.isReactionEnabled,f=h===void 0?!1:h,p=e.isMarkdownEnabled,_=p===void 0?!1:p,g=M.useContext(lr).stringSet,C=c&&(i==null?void 0:i.mentionedMessageTemplate)&&i.mentionedMessageTemplate.length>0&&(i==null?void 0:i.mentionedUsers)&&i.mentionedUsers.length>0,E=M.useMemo(function(){var y;return of(C?{mentionedUsers:(y=i==null?void 0:i.mentionedUsers)!==null&&y!==void 0?y:void 0,messageText:i==null?void 0:i.mentionedMessageTemplate,includeMarkdown:_}:{messageText:i==null?void 0:i.message,includeMarkdown:_})},[i==null?void 0:i.updatedAt,i==null?void 0:i.message]);return m.createElement(Ce,{type:be.BODY_1,color:s?ue.ONCONTENT_1:ue.ONBACKGROUND_1},m.createElement("div",{className:Ia([r,CI,s?"outgoing":"incoming",l?"mouse-hover":"",f&&((n=i==null?void 0:i.reactions)===null||n===void 0?void 0:n.length)>0?"reactions":""])},m.createElement(jp,{tokens:E}),hI(i)&&m.createElement(Ce,{className:"sendbird-text-message-item-body__message edited",type:be.BODY_1,color:s?ue.ONCONTENT_2:ue.ONBACKGROUND_2}," ".concat(g.MESSAGE_EDITED," "))))}function zde(e){var n=this,t,r=e.className,i=r===void 0?"":r,a=e.message,s=e.isByMe,o=s===void 0?!1:s,l=e.mouseHover,u=l===void 0?!1:l,c=e.isReactionEnabled,h=c===void 0?!1:c,f=e.truncateLimit,p=e.onBeforeDownloadFileMessage,_=null;try{var g=en().state.config.logger;_=g}catch{}var C=si().isMobile,E=f??(C?20:void 0),y=function(){return sm(a==null?void 0:a.url)},S=p?function(){return vr(n,void 0,void 0,function(){var I,w,R,A;return pr(this,function(U){switch(U.label){case 0:return U.trys.push([0,2,,3]),[4,p({message:a})];case 1:return I=U.sent(),I?y():(R=_==null?void 0:_.info)===null||R===void 0||R.call(_,"FileMessageItemBody: Not allowed to download."),[3,3];case 2:return w=U.sent(),(A=_==null?void 0:_.error)===null||A===void 0||A.call(_,"FileMessageItemBody: Error occurred while determining download continuation:",w),[3,3];case 3:return[2]}})})}:y;return m.createElement("div",{className:Ia([i,"sendbird-file-message-item-body",o?"outgoing":"incoming",u?"mouse-hover":"",h&&((t=a==null?void 0:a.reactions)===null||t===void 0?void 0:t.length)>0?"reactions":""])},m.createElement("div",{className:"sendbird-file-message-item-body__file-icon"},m.createElement(ke,{className:"sendbird-file-message-item-body__file-icon__icon",type:{IMAGE:Ne.PHOTO,VIDEO:Ne.PLAY,AUDIO:Ne.FILE_AUDIO,GIF:Ne.GIF,OTHERS:Ne.FILE_DOCUMENT}[W6(a==null?void 0:a.type)],fillColor:Oe.PRIMARY,width:"24px",height:"24px"})),m.createElement(Ef,{className:"sendbird-file-message-item-body__file-name",onClick:S,color:o?La.ONCONTENT_1:La.ONBACKGROUND_1},m.createElement(Ce,{className:"sendbird-file-message-item-body__file-name__text",testID:"sendbird-file-message-item-body__file-name__text",type:be.BODY_1,color:o?ue.ONCONTENT_1:ue.ONBACKGROUND_1},rP((a==null?void 0:a.name)||(a==null?void 0:a.url),E))))}function NI(e,n){M.useLayoutEffect(function(){var r;(r=e.current)===null||r===void 0||r.focus()},[e.current]);var t=zu(function(r){var i=n[r.key];i==null||i(r),r.stopPropagation()});return t}var cm={MULTI:"MULTI"};function jde(e){var n=e.props;if(n.viewerType===cm.MULTI){var t=n,r=t.fileInfoList,i=t.currentIndex;return r[i]}var a=n;return{name:a.name,type:a.type,url:a.url}}function qde(e){if(e.viewerType!==cm.MULTI){var n=e.onDelete,t=e.isByMe,r=e.disableDelete,i=e.className;return t?m.createElement("div",{className:"sendbird-fileviewer__header__right__actions__delete ".concat(i)},m.createElement(ke,{className:r?"disabled":"",type:Ne.DELETE,fillColor:r?Oe.GRAY:Oe.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(a){r||n==null||n(a)}})):m.createElement(m.Fragment,null)}return m.createElement(m.Fragment,null)}function Kde(e){if(e.viewerType===cm.MULTI){var n=e.onClickLeft,t=e.onClickRight;return m.createElement("div",{className:"sendbird-file-viewer-slider"},m.createElement("div",{className:"sendbird-file-viewer-arrow--left"},m.createElement(ke,{type:Ne.SLIDE_LEFT,fillColor:Oe.ON_BACKGROUND_1,height:G_,width:G_,onClick:function(r){n==null||n(),r.stopPropagation()}})),m.createElement("div",{className:"sendbird-file-viewer-arrow--right"},m.createElement(ke,{type:Ne.SLIDE_LEFT,fillColor:Oe.ON_BACKGROUND_1,height:G_,width:G_,onClick:function(r){r.stopPropagation(),t==null||t()}})))}return m.createElement(m.Fragment,null)}var HD=function(e){var n=e.profileUrl,t=e.nickname,r=e.onClose,i=e.onDownloadClick,a=e,s=a.onClickLeft,o=a.onClickRight,l=M.useRef(null),u=NI(l,{Escape:function(g){return r==null?void 0:r(g)},ArrowLeft:function(){return s==null?void 0:s()},ArrowRight:function(){return o==null?void 0:o()}}),c=jde({props:e}),h=c.name,f=c.type,p=c.url,_=M.useContext(lr).stringSet;return m.createElement(qa,{onClose:r},m.createElement("div",{className:"sendbird-fileviewer","data-testid":"sendbird-fileviewer",onKeyDown:u,tabIndex:1,ref:l},m.createElement("div",{className:"sendbird-fileviewer__header"},m.createElement("div",{className:"sendbird-fileviewer__header__left"},m.createElement("div",{className:"sendbird-fileviewer__header__left__avatar"},m.createElement(Ui,{height:"32px",width:"32px",src:n})),m.createElement("div",{className:"sendbird-fileviewer__header__left__text-container"},m.createElement(Ce,{className:"sendbird-fileviewer__header__left__filename",type:be.H_2,color:ue.ONBACKGROUND_1},h),m.createElement(Ce,{className:"sendbird-fileviewer__header__left__sender-name",type:be.BODY_1,color:ue.ONBACKGROUND_2},t))),m.createElement("div",{className:"sendbird-fileviewer__header__right"},Bp(f)&&m.createElement("div",{className:"sendbird-fileviewer__header__right__actions"},m.createElement("a",{className:"sendbird-fileviewer__header__right__actions__download",rel:"noopener noreferrer",href:p,target:"_blank",onClick:i},m.createElement(ke,{type:Ne.DOWNLOAD,fillColor:Oe.ON_BACKGROUND_1,height:"24px",width:"24px"})),m.createElement(qde,H({className:"sendbird-fileviewer__header__right__actions__delete"},e))),m.createElement("div",{className:"sendbird-fileviewer__header__right__actions__close"},m.createElement(ke,{type:Ne.CLOSE,fillColor:Oe.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(g){return r==null?void 0:r(g)}})))),m.createElement("div",{className:"sendbird-fileviewer__content"},Vl(f)&&m.createElement("video",{controls:!0,className:"sendbird-fileviewer__content__video"},m.createElement("source",{src:p,type:f})),So(f)&&m.createElement("img",{src:p,alt:h,className:e.viewerType===cm.MULTI?"sendbird-fileviewer__content__img__multi":"sendbird-fileviewer__content__img"}),!Bp(f)&&m.createElement("div",{className:"sendbird-fileviewer__content__unsupported"},m.createElement(Ce,{type:be.H_1,color:ue.ONBACKGROUND_1},(_==null?void 0:_.UI__FILE_VIEWER__UNSUPPORT)||"Unsupported message")),m.createElement(Kde,H({},e)))))};function XP(e){var n,t,r,i=e.message,a=e.statefulFileInfoList,s=a===void 0?[]:a,o=e.onClose,l=e.isByMe,u=l===void 0?!1:l,c=e.onDelete,h=e.currentIndex,f=e.onClickLeft,p=e.onClickRight,_=e.onDownloadClick;if(ma(i)){var g=i;return m.createElement(HD,{profileUrl:g.sender.profileUrl,nickname:g.sender.nickname,viewerType:cm.MULTI,fileInfoList:s.filter(function(C){return C.url}).map(function(C){return{name:C.fileName||"",type:C.mimeType||"",url:C.url||""}}),currentIndex:h||0,onClickLeft:f||Mn,onClickRight:p||Mn,onClose:o,onDownloadClick:_})}else if(aa(i)){var g=i;return Od.createPortal(m.createElement(HD,{profileUrl:(n=g.sender)===null||n===void 0?void 0:n.profileUrl,nickname:(t=g.sender)===null||t===void 0?void 0:t.nickname,name:g.name,type:g.type,url:g==null?void 0:g.url,isByMe:u,disableDelete:(((r=g.threadInfo)===null||r===void 0?void 0:r.replyCount)||0)>0,onClose:o,onDelete:c||Mn,onDownloadClick:_}),document.getElementById(Nd))}return m.createElement(m.Fragment,null)}function Wde(e){var n,t=e.children,r=e.className,i=e.message,a=e.isReactionEnabled;return m.createElement("div",{className:"sendbird-image-grid-wrap"},m.createElement("div",{className:Ia([r??"","sendbird-image-grid",a&&((n=i==null?void 0:i.reactions)===null||n===void 0?void 0:n.length)>0?"reactions":""])},t))}var Yde=400,EC=8,fh=4,Qde=54,W_=40,Xde=48,Zde=320,GD=28,$D=12,Jde=200,ehe=8,the=32,nhe=60,yC={CHAT_WEB:"calc(".concat(Yde/2,"px - ").concat((EC+fh)/2,"px)"),CHAT_MOBILE:"calc(50vw - ".concat((Xde+W_+Qde+EC+fh)/2,"px)"),THREAD_PARENT_WEB:"calc(".concat((Zde-(GD+W_+$D+fh))/2,"px)"),THREAD_PARENT_MOBILE:"calc(50vw - ".concat((GD+W_+$D+fh)/2,"px)"),THREAD_CHILD_WEB:"calc(".concat((Jde-ehe-fh)/2,"px)"),THREAD_CHILD_MOBILE:"calc(50vw - ".concat((the+W_+nhe+EC+fh)/2,"px)")},rhe={CHAT_WEB:"6px",CHAT_MOBILE:"6px",THREAD_PARENT_WEB:"6px",THREAD_PARENT_MOBILE:"6px",THREAD_CHILD_WEB:"6px",THREAD_CHILD_MOBILE:"6px"},vh="34px",VD={PARENT:"parent",CHILD:"child"};function ihe(e){var n=this,t=e.className,r=e.message,i=e.isReactionEnabled,a=i===void 0?!1:i,s=e.threadMessageKindKey,o=e.statefulFileInfoList,l=o===void 0?[]:o,u=e.onBeforeDownloadFileMessage,c=u===void 0?null:u,h=en().state.config.logger,f=M.useState(-1),p=f[0],_=f[1];function g(){_(-1)}function C(){_(p===0?l.length-1:p-1)}function E(){_(p===l.length-1?0:p+1)}return s?m.createElement(m.Fragment,null,p>-1&&m.createElement(XP,{message:r,statefulFileInfoList:l,currentIndex:p,onClickLeft:C,onClickRight:E,onClose:g,onDownloadClick:function(y){return vr(n,void 0,void 0,function(){var S,I,w,R;return pr(this,function(A){switch(A.label){case 0:if(!c)return[2];A.label=1;case 1:return A.trys.push([1,3,,4]),[4,c({message:r,index:p})];case 2:return S=A.sent(),S||(y.preventDefault(),(w=h==null?void 0:h.info)===null||w===void 0||w.call(h,"MultipleFilesMessageItemBody: Not allowed to download.")),[3,4];case 3:return I=A.sent(),(R=h==null?void 0:h.error)===null||R===void 0||R.call(h,"MultipleFilesMessageItemBody: Error occurred while determining download continuation:",I),[3,4];case 4:return[2]}})})}}),m.createElement(Wde,{className:t,message:r,isReactionEnabled:a},l.map(function(y,S){var I,w,R,A;return m.createElement("div",{className:"sendbird-multiple-files-image-renderer-wrapper",onClick:r.sendingStatus===sn.SUCCEEDED?function(){return _(S)}:void 0,key:"sendbird-multiple-files-image-renderer-".concat(S,"-").concat(y.url)},m.createElement(wr,{url:(A=(R=(w=(I=y.thumbnails)===null||I===void 0?void 0:I[0])===null||w===void 0?void 0:w.url)!==null&&R!==void 0?R:y.url)!==null&&A!==void 0?A:"",fixedSize:!1,width:yC[s],maxSideLength:yC.CHAT_WEB,height:yC[s],borderRadius:bue(rhe[s],S,l.length),shadeOnHover:!0,isUploaded:!!y.isUploaded,placeHolder:function(U){var O=U.style;return y.mimeType&&Pd(y.mimeType)?m.createElement(bC.GIF,{style:O}):m.createElement(bC.Default,{style:O})},defaultComponent:m.createElement(bC.LoadError,null)}))}))):m.createElement(m.Fragment,null)}var bC={Default:function(e){var n=e.style;return m.createElement("div",{className:"sendbird-multiple-files-image-renderer__thumbnail__placeholder",style:n},m.createElement(ke,{type:Ne.PHOTO,fillColor:Oe.ON_BACKGROUND_2,width:vh,height:vh}))},GIF:function(e){var n=e.style;return m.createElement("div",{className:"sendbird-multiple-files-image-renderer__thumbnail__placeholder",style:n},m.createElement("div",{className:"sendbird-multiple-files-image-renderer__thumbnail__placeholder__icon"},m.createElement(ke,{type:Ne.GIF,fillColor:Oe.THUMBNAIL_ICON,width:vh,height:vh})))},LoadError:function(){return m.createElement("div",{className:"sendbird-multiple-files-image-renderer__thumbnail__placeholder"},m.createElement(ke,{type:Ne.THUMBNAIL_NONE,fillColor:Oe.ON_BACKGROUND_2,width:vh,height:vh}))}};function ahe(e){var n=e.threadMessageKind,t=e.isMobile,r=M.useMemo(function(){return Es(n).with(VD.PARENT,function(){return t?"THREAD_PARENT_MOBILE":"THREAD_PARENT_WEB"}).with(VD.CHILD,function(){return t?"THREAD_CHILD_MOBILE":"THREAD_CHILD_WEB"}).otherwise(function(){return t?"CHAT_MOBILE":"CHAT_WEB"})},[t,n]);return r}var she=function(e){var n,t,r=M.useRef(new Map),i=function(s,o){return!r.current.has(s)&&o&&r.current.set(s,URL.createObjectURL(o)),r.current.get(s)},a=function(){r.current.size>0&&(r.current.forEach(function(s){return URL.revokeObjectURL(s)}),r.current.clear())};return M.useEffect(function(){return function(){return a()}},[]),!e||!e.isMultipleFilesMessage||!e.isMultipleFilesMessage()?[]:e.sendingStatus===sn.SUCCEEDED?(a(),e.fileInfoList.map(function(s){var o,l;return H(H({},s),{url:s.url,isUploaded:!0,mimeType:(o=s.mimeType)!==null&&o!==void 0?o:void 0,fileName:(l=s.fileName)!==null&&l!==void 0?l:void 0})})):(t=(n=e==null?void 0:e.messageParams)===null||n===void 0?void 0:n.fileInfoList.map(function(s,o){var l,u;return H(H({},s),{url:(u=(l=i(o))!==null&&l!==void 0?l:s.fileUrl)!==null&&u!==void 0?u:s.file instanceof Blob?i(o,s.file):void 0,isUploaded:!s.file&&typeof s.fileUrl=="string"&&s.fileUrl.length>0})}))!==null&&t!==void 0?t:[]},NT={PRIMARY:"progress-bar-color--primary",GRAY:"progress-bar-color--gray"},ZP=function(e){var n=e.className,t=n===void 0?"":n,r=e.disabled,i=r===void 0?!1:r,a=e.maxSize,s=e.currentSize,o=s===void 0?0:s,l=e.colorType,u=l===void 0?NT.PRIMARY:l,c=M.useMemo(function(){return"".concat(o/a*100,"%")},[o,a]);return m.createElement("div",{className:fn("sendbird-progress-bar",t,u,i&&"progress-bar--disabled")},m.createElement("div",{className:"sendbird-progress-bar__fill",style:{width:c}}))},JP=function(e){var n,t=e.key,r=t===void 0?"":t,i=e.channelUrl,a=i===void 0?"":i,s=e.audioFile,o=e.audioFileUrl,l=o===void 0?"":o,u=e.audioFileMimeType,c=u===void 0?ju:u,h=Pae(a,r),f=Gae(),p=f.play,_=f.pause,g=f.stop,C=f.voicePlayerStore,E=L6().isRecordable,y=((n=C==null?void 0:C.audioStorage)===null||n===void 0?void 0:n[h])||zc(),S=function(){E||p==null||p({groupKey:h,audioFile:s,audioFileUrl:l,audioFileMimeType:c})},I=function(){_==null||_(h)},w=function(R){R===void 0&&(R=""),g==null||g(R)};return M.useEffect(function(){return function(){var R;if(s||l){var A=document.getElementById(Q1);(R=A==null?void 0:A.pause)===null||R===void 0||R.call(A)}}},[]),{play:S,pause:I,stop:w,playbackTime:((y==null?void 0:y.playbackTime)||0)*1e3,duration:((y==null?void 0:y.duration)||0)*1e3,playingStatus:y.playingStatus}},e5=function(e){var n=e.className,t=e.time,r=t===void 0?0:t,i=e.labelType,a=i===void 0?be.CAPTION_2:i,s=e.labelColor,o=s===void 0?ue.ONCONTENT_1:s,l=r<0?0:r,u=Math.floor(l/36e5),c=Math.floor(l%36e5/6e4),h=Math.floor(l%36e5%6e4/1e3);return m.createElement("div",{className:"sendbird-ui-play-time ".concat(n)},m.createElement(Ce,{type:a,color:o},"".concat(u?u+":":"").concat(c<10?"0":"").concat(c||"0",":").concat(h<10?"0":"").concat(h)))},ohe=function(e){var n,t=e.className,r=e.message,i=e.channelUrl,a=e.isByMe,s=a===void 0?!1:a,o=e.isReactionEnabled,l=o===void 0?!1:o,u=M.useState(!1),c=u[0],h=u[1],f=JP({channelUrl:i,key:"".concat(r==null?void 0:r.messageId),audioFileUrl:r==null?void 0:r.url,audioFileMimeType:r==null?void 0:r.type}),p=f.play,_=f.pause,g=f.playbackTime,C=g===void 0?0:g,E=f.duration,y=f.playingStatus,S=y===void 0?vo.IDLE:y;M.useEffect(function(){var w;l&&((w=r==null?void 0:r.reactions)===null||w===void 0?void 0:w.length)>0?h(!0):h(!1)},[l,(n=r==null?void 0:r.reactions)===null||n===void 0?void 0:n.length]);var I=M.useMemo(function(){var w,R=1;if(r!=null&&r.metaArrays){var A=(w=r==null?void 0:r.metaArrays.find(function(U){return U.key==="KEY_VOICE_MESSAGE_DURATION"}))===null||w===void 0?void 0:w.value[0];return A?parseInt(A):R}return R},[r==null?void 0:r.metaArrays]);return m.createElement("div",{className:fn("sendbird-voice-message-item-body",t,c&&"is-reactions-contained")},m.createElement(ZP,{className:"sendbird-voice-message-item-body__progress-bar",maxSize:E||I,currentSize:C,colorType:s?NT.PRIMARY:NT.GRAY}),m.createElement("div",{className:"sendbird-voice-message-item-body__status-button"},(S===vo.IDLE||S===vo.PAUSED)&&m.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button",onClick:p},m.createElement(ke,{width:"18px",height:"18px",type:Ne.PLAY,fillColor:Oe.PRIMARY})),S===vo.PREPARING&&m.createElement(sc,{width:"22.2px",height:"22.2px"},m.createElement(ke,{width:"22.2px",height:"22.2px",type:Ne.SPINNER,fillColor:Oe.PRIMARY_2})),S===vo.PLAYING&&m.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button",onClick:function(){_()}},m.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button__pause"},m.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button__pause__inner"}),m.createElement("div",{className:"sendbird-voice-message-item-body__status-button__button__pause__inner"})))),m.createElement(e5,{className:"sendbird-voice-message-item-body__playback-time",time:I-C,labelType:be.BODY_1,labelColor:s?ue.ONCONTENT_1:ue.ONBACKGROUND_1}))};function lhe(e){var n,t,r=e.className,i=r===void 0?"":r,a=e.message,s=e.isByMe,o=s===void 0?!1:s,l=e.mouseHover,u=l===void 0?!1:l,c=e.isReactionEnabled,h=c===void 0?!1:c,f=e.showFileViewer,p=f===void 0?Mn:f,_=e.style,g=_===void 0?{}:_,C=YP(a),E=M.useState(!1),y=E[0],S=E[1],I=tl({onLongPress:Mn,onClick:function(){Hp(a)&&(p==null||p(!0))}});return m.createElement("div",H({className:Ia([i,"sendbird-thumbnail-message-item-body",o?"outgoing":"incoming",u?"mouse-hover":"",h&&((t=(n=a.reactions)===null||n===void 0?void 0:n.length)!==null&&t!==void 0?t:0)>0?"reactions":""])},I),m.createElement(wr,{className:"sendbird-thumbnail-message-item-body__thumbnail",url:C||P0(a),alt:x0(a),width:(g==null?void 0:g.width)||"360px",height:(g==null?void 0:g.height)||"270px",onLoad:function(){S(!0)},placeHolder:function(w){var R=w.style;return m.createElement("div",{className:"sendbird-thumbnail-message-item-body__placeholder",style:R})}}),Hh(a)&&!C&&!y&&m.createElement("video",{className:"sendbird-thumbnail-message-item-body__video"},m.createElement("source",{src:P0(a),type:x0(a)})),m.createElement("div",{className:"sendbird-thumbnail-message-item-body__image-cover"}),(Hh(a)||mT(a))&&m.createElement("div",{className:"sendbird-thumbnail-message-item-body__icon-wrapper"},m.createElement("div",{className:"sendbird-thumbnail-message-item-body__icon-wrapper__icon"},m.createElement(ke,{type:Hh(a)?Ne.PLAY:Ne.GIF,fillColor:Oe.THUMBNAIL_ICON,width:"34px",height:"34px"}))))}function uhe(e){var n,t=e.className,r=e.message,i=e.isByMe,a=i===void 0?!1:i,s=e.mouseHover,o=s===void 0?!1:s,l=e.isReactionEnabled,u=l===void 0?!1:l,c=M.useContext(lr).stringSet;return m.createElement("div",{className:Ia([t??"","sendbird-unknown-message-item-body",a?"outgoing":"incoming",o?"mouse-hover":"",u&&((n=r==null?void 0:r.reactions)===null||n===void 0?void 0:n.length)>0?"reactions":""])},m.createElement(Ce,{className:"sendbird-unknown-message-item-body__header",type:be.BODY_1,color:a?ue.ONCONTENT_1:ue.ONBACKGROUND_1},c.UNKNOWN__UNKNOWN_MESSAGE_TYPE),m.createElement(Ce,{className:"sendbird-unknown-message-item-body__description",type:be.BODY_1,color:a?ue.ONCONTENT_2:ue.ONBACKGROUND_2},c.UNKNOWN__CANNOT_READ_MESSAGE))}var che=Object.defineProperty,dhe=Object.defineProperties,hhe=Object.getOwnPropertyDescriptors,F0=Object.getOwnPropertySymbols,t5=Object.prototype.hasOwnProperty,n5=Object.prototype.propertyIsEnumerable,zD=(e,n,t)=>n in e?che(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,St=(e,n)=>{for(var t in n||(n={}))t5.call(n,t)&&zD(e,t,n[t]);if(F0)for(var t of F0(n))n5.call(n,t)&&zD(e,t,n[t]);return e},hd=(e,n)=>dhe(e,hhe(n)),fhe=(e,n)=>{var t={};for(var r in e)t5.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&F0)for(var r of F0(e))n.indexOf(r)<0&&n5.call(e,r)&&(t[r]=e[r]);return t},DE=(e=>(e.Box="box",e.Text="text",e.Image="image",e.TextButton="textButton",e.ImageButton="imageButton",e.Carousel="carouselView",e.Cascade="cascadeView",e))(DE||{}),B0=(e,n)=>typeof n[e]!="string"?{}:{[e]:vhe(n[e])};function vhe(e){return e.startsWith("#")?e.length===9?`#${e.slice(3)}${e[1]}${e[2]}`:e.length===5?`#${e.slice(2)}${e[1]}`:e:e}var CC=e=>e?{viewStyle:St(St(St({},e),B0("backgroundColor",e)),B0("borderColor",e))}:{},phe=e=>e?{textStyle:St(St({},e),B0("color",e))}:{},mhe=e=>e?{imageStyle:St(St({},e),B0("tintColor",e))}:{},_he={run(e){return e.type==="text"||e.type==="textButton"?St(St(St({},e),CC(e.viewStyle)),phe(e.textStyle)):e.type==="imageButton"||e.type==="image"?St(St(St({},e),CC(e.viewStyle)),mhe(e.imageStyle)):St(St({},e),CC(e.viewStyle))}},Ru=e=>typeof e=="string"?!Number.isNaN(Number(e)):typeof e=="number"&&!Number.isNaN(e),Zu=(e,n)=>n[e]===void 0||n[e]===null?{}:Ru(n[e])?{[e]:Number(n[e])}:{},jD=(e,n)=>n?{[e]:{left:Ru(n.left)?Number(n.left):n.left,right:Ru(n.right)?Number(n.right):n.right,top:Ru(n.top)?Number(n.top):n.top,bottom:Ru(n.bottom)?Number(n.bottom):n.bottom}}:{},qD=(e,n)=>n?{[e]:{type:n.type,value:Ru(n.value)?Number(n.value):n.value}}:{},ghe=e=>e?{metaData:{pixelWidth:Ru(e.pixelWidth)?Number(e.pixelWidth):e.pixelWidth,pixelHeight:Ru(e.pixelHeight)?Number(e.pixelHeight):e.pixelHeight}}:{},Ehe=e=>e?{viewStyle:St(St(St(St(St({},e),Zu("borderWidth",e)),Zu("radius",e)),jD("margin",e.margin)),jD("padding",e.padding))}:{},yhe=e=>e?{textStyle:St(St(St({},e),Zu("size",e)),Zu("weight",e))}:{},bhe=e=>e?{carouselStyle:St(St(St({},e),Zu("spacing",e)),Zu("maxChildWidth",e))}:{},Che=e=>e?{cascadeStyle:St(St({},e),Zu("spacing",e))}:{},dm=e=>St(St(St({},qD("width",e.width)),qD("height",e.height)),Ehe(e.viewStyle)),She=e=>St(St(St({},dm(e)),yhe(e.textStyle)),Zu("maxTextLines",e)),The=e=>St(St({},dm(e)),ghe(e.metaData)),Nhe=e=>hd(St(St({},dm(e)),bhe(e.carouselStyle)),{items:e.items.map(n=>hd(St({},n),{body:hd(St({},n.body),{items:n.body.items.map(t=>II.run(t))})}))}),Ihe=e=>hd(St(St({},dm(e)),Che(e.cascadeStyle)),{items:e.items.map(n=>hd(St({},n),{body:hd(St({},n.body),{items:n.body.items.map(t=>II.run(t))})}))}),II={run(e){return e.type==="text"||e.type==="textButton"?St(St({},e),She(e)):e.type==="imageButton"||e.type==="image"?St(St({},e),The(e)):e.type==="carouselView"?St(St({},e),Nhe(e)):e.type==="cascadeView"?St(St({},e),Ihe(e)):St(St({},e),dm(e))}},Mhe=()=>{},r5=e=>{var n;let t=(e==null?void 0:e.defaultMapper)||Mhe,r={defaultMapper:t,mapBoxProps:(e==null?void 0:e.mapBoxProps)||t,mapTextProps:(e==null?void 0:e.mapTextProps)||t,mapImageProps:(e==null?void 0:e.mapImageProps)||t,mapTextButtonProps:(e==null?void 0:e.mapTextButtonProps)||t,mapImageButtonProps:(e==null?void 0:e.mapImageButtonProps)||t,mapCarouselProps:(e==null?void 0:e.mapCarouselProps)||t,mapCascadeProps:(e==null?void 0:e.mapCascadeProps)||t},i=[_he,II,...(n=e==null?void 0:e.transforms)!=null?n:[]];return{setTransforms(a){i.length=0,i.push(...a)},addTransforms(a){i.push(...a)},parse(a,s){let o=i.reduce((l,u)=>u.run(l),a);switch(o.type){case"box":return{transformed:o,properties:r.mapBoxProps(o,s)};case"text":return{transformed:o,properties:r.mapTextProps(o,s)};case"image":return{transformed:o,properties:r.mapImageProps(o,s)};case"textButton":return{transformed:o,properties:r.mapTextButtonProps(o,s)};case"imageButton":return{transformed:o,properties:r.mapImageButtonProps(o,s)};case"carouselView":return{transformed:o,properties:r.mapCarouselProps(o,s)};case"cascadeView":return{transformed:o,properties:r.mapCascadeProps(o,s)};default:return{transformed:o,properties:void 0}}}}},wc=({children:e})=>m.createElement(m.Fragment,null,e);function i5(e){var n,t,r,i,a,s,o;return{box:((n=e==null?void 0:e.views)==null?void 0:n.box)||wc,text:((t=e==null?void 0:e.views)==null?void 0:t.text)||wc,image:((r=e==null?void 0:e.views)==null?void 0:r.image)||wc,imageButton:((i=e==null?void 0:e.views)==null?void 0:i.imageButton)||wc,textButton:((a=e==null?void 0:e.views)==null?void 0:a.textButton)||wc,carouselView:((s=e==null?void 0:e.views)==null?void 0:s.carouselView)||wc,cascadeView:((o=e==null?void 0:e.views)==null?void 0:o.cascadeView)||wc}}var a5=M.createContext({sizes:{},updateSize:()=>{}}),Ahe=({children:e})=>{let[n,t]=M.useState({}),r=M.useCallback(i=>{var a=i,{id:s}=a,o=fhe(a,["id"]);s&&t(l=>hd(St({},l),{[s]:o}))},[]);return m.createElement(a5.Provider,{value:{sizes:n,updateSize:r}},e)},whe=()=>M.useContext(a5),Pa=(e=>(e.Row="row",e.Column="column",e))(Pa||{}),wg=(e=>(e.Center="center",e.Left="left",e.Right="right",e.Top="top",e.Bottom="bottom",e))(wg||{}),Hs=(e=>(e[e.FillParent=0]="FillParent",e[e.WrapContent=1]="WrapContent",e))(Hs||{}),Rhe=(e=>(e.Normal="normal",e.Bold="bold",e))(Rhe||{}),Ov=(e=>(e.AspectFit="aspectFit",e.AspectFill="aspectFill",e.ScalesToFill="scalesToFill",e))(Ov||{}),s5=[1,2],Y_=e=>{switch(e){case"right":case"bottom":return"flex-end";case"center":return"center";case"left":case"top":default:return"flex-start"}},Ohe=e=>e?s5.includes(Number(e)):!0,Dhe=e=>{let n=new Map,t=function(r){return(n.has(r)||n.set(r,e.call(this,r)))&&n.get(r)};return t.cache=n,t},Uhe=Dhe(e=>{let n=(t,r)=>{"items"in t&&(t==null?void 0:t.items)!=null&&t.items.forEach((i,a)=>{let s=`${r}-${a}`;i.id=s,n(i,s)})};return e.forEach((t,r)=>{let i=`${r}`;t.id=i,n(t,i)}),e}),ga={rootLayout:"column",view:{size:{width:{type:"flex",value:0},height:{type:"flex",value:1}}},box:{layout:"row",align:{vertical:"top",horizontal:"left"}},textButton:{maxTextLines:1},carousel:{style:{spacing:10,maxChildWidth:240}},cascade:{layout:"column",style:{spacing:10}}},o5=e=>{let n=e.Container||m.Fragment,t=e.UnknownMessage||(()=>null),r=e.parser||r5(),i=e.renderer||i5(),a=({templateItems:s,templateVersion:o,parentLayout:l=ga.box.layout,depth:u=0})=>{if(!Ohe(o))throw new Error(`Cannot parse template item due to unsupported template version: ${o}, ${s5}`);return m.createElement(m.Fragment,null,s.map((c,h,f)=>{let p=r.parse(c,{parentLayout:l,depth:u,elemIdx:h,siblings:f}),_=p.transformed,g={key:h,siblings:f,parentLayout:l,parsedProperties:p.properties,rawProperties:c};switch(_.type){case"carouselView":{if(!Array.isArray(_.items))throw new Error("Cannot parse template item as Carousel if carousel has no items.");return m.createElement(i.carouselView,St(St({},_),g),_.items.map((C,E)=>m.createElement(a,{key:E,templateItems:C.body.items||[],depth:u+1,templateVersion:C.version})))}case"cascadeView":{if(!Array.isArray(_.items))throw new Error("Cannot parse template item as Cascade if cascade has no items.");return m.createElement(i.cascadeView,St(St({},_),g),_.items.map((C,E)=>m.createElement(a,{key:E,templateItems:C.body.items||[],depth:u+1,templateVersion:C.version})))}case"box":return m.createElement(i.box,St(St({},_),g),m.createElement(a,{templateItems:_.items||[],parentLayout:_.layout,depth:u+1,templateVersion:o}));case"text":return m.createElement(i.text,St(St({},_),g));case"image":return m.createElement(i.image,St(St({},_),g));case"textButton":return m.createElement(i.textButton,St(St({},_),g));case"imageButton":return m.createElement(i.imageButton,St(St({},_),g));default:return m.createElement(t,{item:_})}}))};return{MessageTemplate:({templateVersion:s,templateItems:o,parentLayout:l=ga.rootLayout})=>{let u=Uhe(o);return m.createElement(Ahe,null,m.createElement(n,{className:"sb-message-template__parent"},m.createElement(a,{isRoot:!0,parentLayout:l,templateItems:u,templateVersion:s})))},MessageTemplateBase:a}},Lhe=(e=>(e.Web="web",e.Custom="custom",e.UIKit="uikit",e.Internal="internal",e))(Lhe||{}),khe=Object.defineProperty,xhe=Object.defineProperties,Phe=Object.getOwnPropertyDescriptors,H0=Object.getOwnPropertySymbols,l5=Object.prototype.hasOwnProperty,u5=Object.prototype.propertyIsEnumerable,KD=(e,n,t)=>n in e?khe(e,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[n]=t,Dr=(e,n)=>{for(var t in n||(n={}))l5.call(n,t)&&KD(e,t,n[t]);if(H0)for(var t of H0(n))u5.call(n,t)&&KD(e,t,n[t]);return e},Id=(e,n)=>xhe(e,Phe(n)),Md=(e,n)=>{var t={};for(var r in e)l5.call(e,r)&&n.indexOf(r)<0&&(t[r]=e[r]);if(e!=null&&H0)for(var r of H0(e))n.indexOf(r)<0&&u5.call(e,r)&&(t[r]=e[r]);return t};function Fhe(e){var n;return e.type===DE.Text&&((n=e.width)==null?void 0:n.value)==Hs.WrapContent}var WD=({size:e,option:n})=>n==="wrap"?e.type==="flex"&&e.value==Hs.WrapContent:n==="fill"?e.type==="flex"&&e.value==Hs.FillParent:e.type==="fixed",Bhe=e=>{var n;return typeof e!="string"?!1:((n=e.split(".").pop())==null?void 0:n.toLowerCase())==="gif"},yl=(...e)=>e.filter(n=>!!n).join(" "),Hhe=(e="")=>["http://","https://","ftp://"].some(n=>e.startsWith(n)),YD=(e="")=>Hhe(e)?e:`https://${e}`;function Rc(e){return Dr({display:"flex",overflow:"hidden",boxSizing:"border-box"},e)}function Oc(e,n,t){zhe(e,n,t),$he(e,n)}function Ghe(e,n,t,r){n&&(e["--border-width"]=`${n}px`,e["--border-color"]=t||"transparent"),r&&(e.borderRadius=r,e["--border-radius"]=`${r}px`)}function $he(e,n){var t,r,i,a,s,o,l,u,c,h,f,p;let{viewStyle:_}=n;e.paddingBlockStart=(t=_==null?void 0:_.padding)==null?void 0:t.top,e.paddingBlockEnd=(r=_==null?void 0:_.padding)==null?void 0:r.bottom,e.paddingInlineStart=(i=_==null?void 0:_.padding)==null?void 0:i.left,e.paddingInlineEnd=(a=_==null?void 0:_.padding)==null?void 0:a.right,e.marginBlockStart=(s=_==null?void 0:_.margin)==null?void 0:s.top,e.marginBlockEnd=(o=_==null?void 0:_.margin)==null?void 0:o.bottom,e.marginInlineStart=(l=_==null?void 0:_.margin)==null?void 0:l.left,e.marginInlineEnd=(u=_==null?void 0:_.margin)==null?void 0:u.right;let g=((h=(c=_==null?void 0:_.margin)==null?void 0:c.left)!=null?h:0)+((p=(f=_==null?void 0:_.margin)==null?void 0:f.right)!=null?p:0);g>0&&e.width==="100%"&&(e.width=`calc(100% - ${g}px)`),_!=null&&_.backgroundColor&&(e.backgroundColor=_.backgroundColor),_!=null&&_.backgroundImageUrl&&(e.backgroundImage=`url(${JSON.stringify(_.backgroundImageUrl)})`,e.backgroundSize="100% 100%",e.backgroundPosition="center"),Ghe(e,_==null?void 0:_.borderWidth,_==null?void 0:_.borderColor,_==null?void 0:_.radius)}function Vhe(e,n,t){let r={};return e.type==="flex"&&e.value==Hs.FillParent?(r.width="100%",t===Pa.Row&&(r.flex=1)):e.type==="flex"&&e.value==Hs.WrapContent?(r.width="fit-content",t===Pa.Row&&(r.flexShrink=0)):e.type==="fixed"&&e.value>=0&&(r.width=e.value,t===Pa.Row&&(r.flexShrink=0)),n.type==="flex"&&n.value==Hs.FillParent?(r.height="100%",t===Pa.Column&&(r.flex=1)):n.type==="flex"&&n.value==Hs.WrapContent?(r.height="fit-content",t===Pa.Column&&(r.flexShrink=0)):n.type==="fixed"&&n.value>=0&&(r.height=n.value,t===Pa.Column&&(r.flexShrink=0)),r}function zhe(e,n,t){var r,i;let{width:a,height:s}=ga.view.size,{parentLayout:o}=t,l=Vhe((r=n.width)!=null?r:a,(i=n.height)!=null?i:s,o);Object.assign(e,l)}function SC(e,n=ga.box.layout,t=ga.box.align){n===Pa.Row&&(e.flexDirection="row",e.alignItems=Y_(t.vertical),e.justifyContent=Y_(t.horizontal)),n===Pa.Column&&(e.flexDirection="column",e.alignItems=Y_(t.horizontal),e.justifyContent=Y_(t.vertical))}function jhe(e,n=ga.box.align.horizontal){switch(n){case wg.Left:e.textAlign="start";break;case wg.Right:e.textAlign="end";break;case wg.Center:e.textAlign="center";break;default:e.textAlign="start";break}}function QD(e,n){let{contentMode:t=Ov.AspectFit}=n||{};if(t)switch(t){case Ov.AspectFill:e.objectFit="cover";break;case Ov.AspectFit:e.objectFit="contain";break;case Ov.ScalesToFill:e.objectFit="fill";break}}function XD(e,n){var t,r,i,a;let s=n==null?void 0:n.metaData;!(s!=null&&s.pixelHeight)||!(s!=null&&s.pixelWidth)||((t=n==null?void 0:n.width)==null?void 0:t.type)==="fixed"||((r=n==null?void 0:n.height)==null?void 0:r.type)==="fixed"||(e.aspectRatio=`${(i=n==null?void 0:n.metaData)==null?void 0:i.pixelWidth} / ${(a=n==null?void 0:n.metaData)==null?void 0:a.pixelHeight}`)}function ZD(e){return{WebkitLineClamp:e,WebkitBoxOrient:"vertical",display:"-webkit-box",overflow:"hidden",overflowWrap:"anywhere",flex:1}}function JD(e,n,t){let{textStyle:r,width:i}=n,{size:a,color:s,weight:o}=r||{};if(a&&(e.fontSize=a),s&&(e.color=s),o&&(e.fontWeight=o),(i==null?void 0:i.type)==="flex"&&(i==null?void 0:i.value)==Hs.WrapContent&&(e.width="fit-content",e.maxWidth="100%"),n.type===DE.Text){let{siblings:l,elemIdx:u}=t;l!=null&&l.length>=2&&l.every(Fhe)&&(e.flexShrink=l.length-1===u?1:0)}}var c5=r5({mapBoxProps(e,n){let t=Rc();return Oc(t,e,n),SC(t,e.layout,e.align),t},mapTextProps(e,n){var t;let r=Rc({whiteSpace:"pre-line",wordBreak:"break-word"});return Oc(r,e,n),JD(r,e,n),SC(r,Pa.Row,e.align),jhe(r,(t=e.align)==null?void 0:t.horizontal),r},mapImageProps(e,n){let t=Rc();return Oc(t,e,n),QD(t,e.imageStyle),XD(t,e),t},mapTextButtonProps(e,n){let t=Rc({whiteSpace:"pre-line",alignItems:"center",justifyContent:"center"});return Oc(t,e,n),JD(t,e,n),t},mapImageButtonProps(e,n){let t=Rc();return Oc(t,e,n),QD(t,e.imageStyle),XD(t,e),t},mapCarouselProps(e,n){let t=Rc();return Oc(t,e,n),t},mapCascadeProps(e,n){var t,r;let i=Rc();return Oc(i,e,n),SC(i,ga.cascade.layout),i.gap=(r=(t=e.cascadeStyle)==null?void 0:t.spacing)!=null?r:ga.cascade.style.spacing,i}}),qhe=24,eU=5;function Khe({spacing:e,childrenLength:n,paddingInlineStart:t,paddingInlineEnd:r}){let i=M.useRef(null),a=M.useRef(Array.from({length:n},()=>m.createRef())),s=M.useRef(!1),o=M.useRef(!1),l=M.useRef(null),u=M.useRef({sx:null,sy:null,offset:0,translateX:0,currentIndex:0,didMove:!1}),[c,h]=M.useState(()=>a.current.map(()=>0)),[f,p]=M.useState(!1),_=f?-1:1,g=M.useMemo(()=>{let O=t;return c.map((B,F)=>{let P=F>0?e:0,G=O-P,L=G-B;return O=L,{start:G,end:L}})},[c,e,t]),C=M.useMemo(()=>{let O=c.reduce((F,P)=>F+P,0),B=e*(n-1);return O+B},[c,e,n]);M.useLayoutEffect(()=>{if(i.current){let O=getComputedStyle(i.current).direction;p(O==="rtl")}},[]),M.useLayoutEffect(()=>{h(a.current.map(O=>{var B,F;return(F=(B=O.current)==null?void 0:B.clientWidth)!=null?F:0}))},[n]),M.useLayoutEffect(()=>{g.length>0&&(u.current.translateX=g[0].start,R())},[g]);let E=()=>{i.current&&(s.current=!0,i.current.style.cursor="grabbing",i.current.style.transition="none",l.current=requestAnimationFrame(R))},y=()=>{i.current&&(s.current=!1,i.current.style.cursor="grab",i.current.style.transition="transform 0.5s ease",l.current&&(cancelAnimationFrame(l.current),l.current=null))},S=()=>{let{offset:O,currentIndex:B}=u.current,F=Math.abs(O)>=qhe,P=O<0&&B<n-1,G=O>0&&B>0,L=B;F&&P?L=B+1:F&&G&&(L=B-1);function $(j){var X,K;let Z=(K=(X=i.current)==null?void 0:X.clientWidth)!=null?K:0,te=t,ne=Math.min(0,Z-C)-r;return Math.min(te,Math.max(j,ne))}u.current.currentIndex=L,u.current.translateX=$(g[L].start),u.current.offset=0},I=()=>{o.current=!0},w=()=>{o.current=!1},R=()=>{if(i.current){let O=(u.current.translateX+u.current.offset)*_;i.current.style.transform=`translateX(${O}px)`}l.current&&(l.current=requestAnimationFrame(R))},A=()=>{i.current&&(i.current.style.touchAction="pan-x")},U=()=>{i.current&&(i.current.style.touchAction="pan-y")};return{carouselRef:i,childrenRefs:a,handlers:{onMouseDown:O=>{E(),w(),u.current.sx=O.clientX,u.current.sy=O.clientY,u.current.offset=0,u.current.didMove=!1,l.current=requestAnimationFrame(R)},onMouseMove:O=>{!s.current||u.current.sx===null||(u.current.offset=(O.clientX-u.current.sx)*_,Math.abs(u.current.offset)>eU&&(u.current.didMove=!0))},onMouseUp:O=>{s.current&&(w(),S(),y(),u.current.didMove&&(O.preventDefault(),O.stopPropagation()))},onMouseLeave:O=>{s.current&&(w(),S(),y(),u.current.didMove&&(O.preventDefault(),O.stopPropagation()))},onTouchStart:O=>{w(),y();let B=O.touches[0];u.current.sx=B.clientX,u.current.sy=B.clientY,u.current.offset=0,u.current.didMove=!1,l.current=requestAnimationFrame(R)},onTouchMove:O=>{if(u.current.sx===null||u.current.sy===null||o.current)return;let{clientX:B,clientY:F}=O.touches[0],{sx:P,sy:G}=u.current;if(s.current){u.current.offset=(B-P)*_,Math.abs(u.current.offset)>eU&&(u.current.didMove=!0);return}Math.abs(F-G)>Math.abs(B-P)?I():(u.current.offset=(B-P)*_,A(),E())},onTouchEnd:O=>{U(),w(),S(),y(),u.current.didMove&&(O.preventDefault(),O.stopPropagation())},onClickCapture:O=>{u.current.didMove&&(O.preventDefault(),O.stopPropagation())}}}}var Whe=e=>{var n=e,{children:t,style:r,spacing:i=ga.carousel.style.spacing,maxChildWidth:a=ga.carousel.style.maxChildWidth,inlineStyle:s}=n,o=Md(n,["children","style","spacing","maxChildWidth","inlineStyle"]);let l=r??{},{paddingInlineStart:u=0,paddingInlineEnd:c=0}=l,h=Md(l,["paddingInlineStart","paddingInlineEnd"]),{carouselRef:f,childrenRefs:p,handlers:_}=Khe({spacing:i,childrenLength:t.length,paddingInlineStart:Number(u),paddingInlineEnd:Number(c)});return m.createElement("div",Dr(Id(Dr({},_),{ref:f,style:Dr(Id(Dr({},h),{gap:i,width:"100%",overflow:"visible"}),s)}),o),t.map((g,C)=>m.createElement(Yhe,{ref:p.current[C],key:C,maxChildWidth:a},g)))},Yhe=m.forwardRef(function({maxChildWidth:e,children:n},t){let r=Qhe(n.props,e)?e:"fit-content";return m.createElement("div",{ref:t,style:{maxWidth:r,width:"100%",flexShrink:0,overflow:"hidden",userSelect:"none"}},n)});function Qhe(e,n){return!!e.templateItems.find(t=>{var r;let i=(r=t.width)!=null?r:ga.view.size.width,a=i.type==="flex"&&i.value===Hs.FillParent,s=i.type==="fixed"&&i.value>=n;return a||s})}var Xhe=e=>{let{imageSize:n,canvasRef:t,canvasProps:r}=Zhe(e);return m.createElement("canvas",Id(Dr({},r),{ref:t,width:n==null?void 0:n.width,height:n==null?void 0:n.height,onError:e.onError}))},Zhe=e=>{var n=e,{metaData:t,tintColor:r}=n,i=Md(n,["metaData","tintColor"]);let a=M.useRef(null),[s,o]=M.useState(),l=M.useMemo(()=>t!=null&&t.pixelHeight&&t!=null&&t.pixelWidth?{width:t.pixelWidth,height:t.pixelHeight}:s,[s,t==null?void 0:t.pixelHeight,t==null?void 0:t.pixelWidth]);return M.useEffect(()=>{if(l==null&&a.current){a.current.style.width="100%",a.current.style.height="100%";let u=a.current.getBoundingClientRect();o(u)}},[l]),M.useEffect(()=>{if(i.src){let u=new Image,c=()=>{if(a.current&&r&&l){let f=a.current.getContext("2d");if(f){let{width:p,height:_}=l;f.clearRect(0,0,p,_),f.beginPath(),f.globalCompositeOperation="source-over",f.fillStyle="#000",f.drawImage(u,0,0,p,_),f.globalCompositeOperation="source-atop",f.fillStyle=r,f.fillRect(0,0,p,_)}}},h=f=>{var p;(p=i.onError)==null||p.call(i,f)};return u.addEventListener("load",c),u.addEventListener("error",h),u.src=i.src,()=>{u.removeEventListener("load",c),u.removeEventListener("error",h)}}},[i.src,l,r]),{canvasRef:a,canvasProps:i,imageSize:l}},Jhe=e=>m.createElement("img",Id(Dr({},e),{onError:e.onError,draggable:!1,referrerPolicy:"no-referrer"})),efe=e=>m.createElement("div",{style:Id(Dr({},e.style),{backgroundColor:"transparent"})}),tU=e=>{var n=e,{tintColor:t,metaData:r}=n,i=Md(n,["tintColor","metaData"]);let{hasError:a,onError:s}=tfe(i.src);return i.onError&&console.warn("`onError` is intercepted and not executed in the ReactMessageTemplateImage."),a?m.createElement(efe,Dr({},i)):t&&!Bhe(i.src)?m.createElement(Xhe,Id(Dr({},i),{onError:s,tintColor:t,metaData:r})):m.createElement(Jhe,Id(Dr({},i),{onError:s}))},tfe=e=>{let[n,t]=M.useState(!1);return M.useEffect(()=>t(!1),[e]),{hasError:n,onError:M.useCallback(()=>t(!0),[])}},d5=m.createContext(null),nfe=({handleWebAction:e,handleCustomAction:n,handleUIKitAction:t,handleInternalAction:r,highlight:i,children:a})=>m.createElement(d5.Provider,{value:{handleWebAction:e,handleCustomAction:n,handleUIKitAction:t,handleInternalAction:r,highlight:i}},a),h5=()=>{let e=m.useContext(d5);if(!e)throw new Error("useMessageContext must be used within a MessageProvider");return e};function Dc(e){let{highlight:n}=h5();return{className:n!=null&&n.getContainerClassName?n.getContainerClassName(e):void 0,style:n!=null&&n.getContainerInlineStyle?n.getContainerInlineStyle(e):void 0,renderText:n!=null&&n.renderText?n.renderText:t=>t}}function f5(e){let n=M.useRef(e);return M.useEffect(()=>{n.current=e},[e]),M.useCallback((...t)=>n.current(...t),[n])}function rfe(e,n){let t=f5(e),r=M.useRef(nU);return M.useCallback(i=>{if(r.current(),r.current=nU,i!=null){let a=e(i);typeof a=="function"&&(r.current=a)}},[t,...n])}function nU(){}function ife(e){let n=f5(e);return rfe(t=>{let r=new ResizeObserver(i=>{i[0]!=null&&n(i[0])});return r.observe(t),()=>{r.unobserve(t)}},[n])}function afe(){let[e,n]=M.useState(-1),[t,r]=M.useState(-1),[i,a]=M.useState(-1),[s,o]=M.useState(-1),[l,u]=M.useState(-1),[c,h]=M.useState(-1);return{ref:ife(f=>{let{width:p,height:_}=f.contentRect,g=f.target,{width:C,height:E}=g.getBoundingClientRect();n(C),r(E),a(p),o(_),u(C-p),h(E-_)}),width:e,height:t,contentWidth:i,contentHeight:s,paddingWidth:l,paddingHeight:c}}function Q_({width:e=ga.view.size.width,height:n=ga.view.size.height,parentLayout:t=ga.box.layout,option:r}){return t===Pa.Row?WD({size:e,option:r}):WD({size:n,option:r})}function sfe(e){let{style:n,props:t}=e,r=afe(),{ref:i}=r,a=Md(r,["ref"]),{updateSize:s,sizes:o}=whe(),{id:l,siblings:u,parentLayout:c}=t,{width:h,height:f,paddingWidth:p,paddingHeight:_,contentWidth:g,contentHeight:C}=a;return M.useEffect(()=>{s({id:t.id,width:h,height:f,paddingWidth:p,paddingHeight:_,contentWidth:g,contentHeight:C})},[t.id,h,f,p,_,g,C,s]),{recalculatedStyle:M.useMemo(()=>{let E=(y=0,S)=>{var I,w,R,A;return c===Pa.Row?y+((w=(I=o[S.id])==null?void 0:I.contentWidth)!=null?w:0):y+((A=(R=o[S.id])==null?void 0:R.contentHeight)!=null?A:0)};if(Q_({width:t.width,height:t.height,parentLayout:c,option:"fill"})){let y=u.filter(({width:w,height:R})=>!Q_({width:w,height:R,parentLayout:c,option:"fill"})).reduce(E,0),S=u.filter(({width:w,height:R})=>Q_({width:w,height:R,parentLayout:c,option:"fill"})).length,I=c===Pa.Row?{maxWidth:`calc((100% - ${y}px) / ${S})`}:{maxHeight:`calc((100% - ${y}px) / ${S})`};return Dr(Dr(Dr({},n),I),h==0&&{height:0})}else{let y=u.findIndex(I=>I.id===l),S=u.slice(0,y).filter(({width:I,height:w})=>Q_({width:I,height:w,parentLayout:c,option:"wrap"})).reduce(E,0);return Dr(Dr(Dr({},n),h===0&&{height:0}),c===Pa.Row?{maxWidth:`calc(100% - ${S}px)`}:{maxHeight:`calc(100% - ${S}px)`})}},[t.width,t.height,c,o,u,n,h,l]),elemRef:i}}var ph=({children:e,props:n,className:t,style:r,inlineStyle:i})=>{var a;let s=r??{},{paddingBlockStart:o,paddingBlockEnd:l,paddingInlineStart:u,paddingInlineEnd:c}=s,h=Md(s,["paddingBlockStart","paddingBlockEnd","paddingInlineStart","paddingInlineEnd"]),{recalculatedStyle:f,elemRef:p}=sfe({style:h,props:n}),{handleWebAction:_,handleCustomAction:g,handleUIKitAction:C,handleInternalAction:E}=h5(),y=(a=n.viewStyle)!=null&&a.borderWidth?"sb-message-template__border":"",S=n.action?"sb-message-template__action":"",I=P=>{var G,L,$,j,X,K,Z,te;((G=n.action)==null?void 0:G.type)==="web"?_?_(P,n.action):($=window==null?void 0:window.open(YD((L=n==null?void 0:n.action)==null?void 0:L.data),"_blank","noopener noreferrer"))==null||$.focus():((j=n.action)==null?void 0:j.type)==="custom"?g?g(P,n.action):(K=window==null?void 0:window.open(YD((X=n==null?void 0:n.action)==null?void 0:X.data),"_blank","noopener noreferrer"))==null||K.focus():((Z=n.action)==null?void 0:Z.type)==="uikit"?C==null||C(P,n.action):((te=n.action)==null?void 0:te.type)==="internal"&&(E==null||E(P,n.action))};if(n.type===DE.TextButton)return m.createElement("button",{className:yl(t,y,S),"data-sb-template-id":n.elementId,style:Dr(Dr({},r),i),onClick:I},e);let w=f,{display:R,flexDirection:A,justifyContent:U,alignItems:O,objectFit:B}=w,F=Md(w,["display","flexDirection","justifyContent","alignItems","objectFit"]);return m.createElement("div",{ref:p,className:yl(t,y,S),"data-sb-template-id":n.elementId,style:Dr(Dr({},F),i),onClick:I},m.createElement("div",{style:{display:R,flexDirection:A,justifyContent:U,alignItems:O,objectFit:B,width:"100%",height:"100%",paddingBlockStart:o,paddingBlockEnd:l,paddingInlineStart:u,paddingInlineEnd:c,gap:r==null?void 0:r.gap}},e))},v5=i5({views:{box(e){let n=Dc(e.rawProperties);return m.createElement(ph,{className:yl("sb-message-template__box",n.className),inlineStyle:n.style,elementId:e.elementId,style:e.parsedProperties,props:e},e.children)},text(e){let n=Dc(e.rawProperties);return m.createElement(ph,{className:yl("sb-message-template__text",n.className),inlineStyle:n.style,elementId:e.elementId,style:e.parsedProperties,props:e},rU(e,n.renderText))},image(e){var n;let t=Dc(e.rawProperties);return m.createElement(ph,{className:yl("sb-message-template__image-container",t.className),inlineStyle:t.style,elementId:e.elementId,style:e.parsedProperties,props:e},m.createElement(tU,{className:"sb-message-template__image",alt:"image",src:e.imageUrl,style:{width:"100%",height:"100%",aspectRatio:"inherit",objectFit:"inherit"},tintColor:(n=e.imageStyle)==null?void 0:n.tintColor,metaData:e.metaData}))},textButton(e){let n=Dc(e.rawProperties);return m.createElement(ph,{className:yl("sb-message-template__text-button",n.className),inlineStyle:n.style,elementId:e.elementId,style:e.parsedProperties,props:e},rU(Dr({maxTextLines:ga.textButton.maxTextLines},e),n.renderText))},imageButton(e){var n;let t=Dc(e.rawProperties);return m.createElement(ph,{className:yl("sb-message-template__image-container","sb-message-template__image-button",t.className),inlineStyle:t.style,elementId:e.elementId,style:e.parsedProperties,props:e},m.createElement(tU,{className:"sb-message-template__image",alt:"image-button",src:e.imageUrl,style:{width:"100%",height:"100%",aspectRatio:"inherit",objectFit:"inherit"},tintColor:(n=e.imageStyle)==null?void 0:n.tintColor,metaData:e.metaData}))},carouselView(e){var n,t;let r=Dc(e.rawProperties);return m.createElement(Whe,{className:yl("sb-message-template__carousel",r.className),inlineStyle:r.style,maxChildWidth:(n=e.carouselStyle)==null?void 0:n.maxChildWidth,spacing:(t=e.carouselStyle)==null?void 0:t.spacing,style:e.parsedProperties},e.children)},cascadeView(e){let n=Dc(e.rawProperties);return m.createElement(ph,{className:yl("sb-message-template__cascade",n.className),inlineStyle:n.style,elementId:e.elementId,style:e.parsedProperties,props:e},e.children)}}});function ofe(e,n){return e.split(`
`).map((t,r)=>m.createElement(m.Fragment,{key:r},n(t),m.createElement("br",null)))}function rU(e,n){let{text:t,maxTextLines:r}=e,i=lfe(e),a=typeof r=="number"&&r>0,s=ofe(t,n);if(a||i){let o=Dr(Dr({},(a||i)&&{maxWidth:"100%"}),i&&{maxHeight:"100%",overflow:"hidden"});return m.createElement("div",{style:o},a?m.createElement("div",{style:ZD(r)},s):s)}return a?m.createElement("div",{style:ZD(r)},s):s}function lfe(e){var n,t,r,i;let a=(n=e==null?void 0:e.height)==null?void 0:n.type,s=(t=e==null?void 0:e.width)==null?void 0:t.type,o=a==="fixed"||s==="fixed",l=a==="flex"&&((r=e==null?void 0:e.height)==null?void 0:r.value)===Hs.FillParent||s==="flex"&&((i=e==null?void 0:e.width)==null?void 0:i.value)===Hs.FillParent;return o||l}o5({renderer:v5,parser:c5,Container:({children:e,className:n})=>m.createElement("div",{className:`sb-message-template__parent ${n}`,style:{display:"flex",flexDirection:"column",maxWidth:400,marginBlockEnd:24}},e)});var ufe=o5({parser:c5,renderer:v5,Container:function(e){var n=e.children,t=e.className;return m.createElement("div",{className:["sb-message-template__parent ".concat(t),"sendbird-message-template__root"].join(" ")},n)}}).MessageTemplate;function cfe(e){var n=e.templateItems,t=e.templateVersion;return m.createElement(ufe,{templateItems:n,templateVersion:t})}function iU(e){var n=e.className,t=e.message,r=e.isByMe,i=M.useContext(lr).stringSet,a=t.message;return m.createElement("div",{className:Ia([n??"",r?"outgoing":"incoming","sendbird-template-message-item-body__fallback_message"])},a?m.createElement(m.Fragment,null,m.createElement(Ce,{type:be.BODY_1,color:ue.ONCONTENT_INVERSE_1},a)):m.createElement(m.Fragment,null,m.createElement(Ce,{className:"sendbird-template-message-item-body__fallback_message__header",type:be.BODY_1,color:ue.ONCONTENT_INVERSE_1},i.UNKNOWN__TEMPLATE_ERROR),m.createElement(Ce,{className:"sendbird-template-message-item-body__fallback_message__description",type:be.BODY_1,color:ue.ONCONTENT_INVERSE_3},i.UNKNOWN__CANNOT_READ_TEMPLATE)))}var X_="40px";function dfe(e){var n=e.className,t=e.isByMe;return m.createElement("div",{className:fn(n,t?"outgoing":"incoming","sendbird-template-loading-message-item-body")},m.createElement(sc,{className:"sendbird-message-status__icon",testID:"sendbird-message-status-icon",width:X_,height:X_},m.createElement(ke,{type:Ne.SPINNER,fillColor:Oe.CONTENT_INVERSE_3,width:X_,height:X_})))}var hfe=function(e){var n=e.message,t=e.templateVersion,r=e.templateItems;return m.createElement(nfe,{message:n},m.createElement(cfe,{templateVersion:t,templateItems:r}))},p5=function(e){var n={},t={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var i=e[r];if(typeof i=="object"&&i!==null){var a=p5(i),s=a[0],o=a[1];n[r]=s,t[r]=o}else if(typeof i=="string"){var l=i.split(","),u=l[0],c=l[1];n[r]=u,t[r]=c||u}else n[r]=i,t[r]=i}return[n,t]};function ffe(e){var n=e.colorVariables,t=e.theme,r=p5(n),i=r[0],a=r[1];return t==="light"?i:a}var vfe=function(e){Bk(n,e);function n(t){var r=e.call(this,t)||this;return r.state={hasError:!1},r}return n.getDerivedStateFromError=function(){return{hasError:!0}},n.prototype.componentDidCatch=function(t,r){var i;(i=this.props.logger)===null||i===void 0||i.error("Error caught by ErrorBoundary: ",t,r)},n.prototype.render=function(){return this.state.hasError?this.props.fallbackMessage:this.props.children},n}(M.Component),m5=function(e,n,t){t===void 0&&(t="");for(var r=0,i=Object.entries(e);r<i.length;r++){var a=i[r],s=a[0],o=a[1],l=t?"".concat(t,".").concat(s):s;o&&typeof o=="object"?m5(o,n,l):n[l]=o}};function pfe(e){var n={};return m5(e,n),n}var mfe=500,aU=function(e){var n=e.template,t=e.templateData,r=t===void 0?{}:t,i=e.colorVariables,a=e.theme,s={};i&&a&&(s=ffe({colorVariables:i,theme:a}));var o=H(H({},r),s),l=pfe(o),u=n;return Object.entries(l).forEach(function(c){var h=c[0],f=c[1],p="\\{".concat(h,"\\}"),_=new RegExp(p,"g");u=u.replace(_,f)}),u};function _fe(e){var n,t=e.className,r=t===void 0?"":t,i=e.message,a=e.isByMe,s=a===void 0?!1:a,o=e.theme,l=o===void 0?"light":o,u=(n=i.extendedMessagePayload)===null||n===void 0?void 0:n[im],c=function(){return m.createElement(iU,{className:r,message:i,isByMe:s})};if(!(u!=null&&u.key))return c();var h=u.key,f=en().state;if(!f)return c();var p=f.config.logger,_=f.utils,g=_.getCachedTemplate,C=_.updateMessageTemplatesInfo,E=f.stores.appInfoStore.waitingTemplateKeysMap,y=Object.entries(E).map(function(P){var G=P[0],L=P[1];return[G,L.requestedAt,L.erroredMessageIds.join(",")].join("-")}).join("_"),S=M.useState(B()),I=S[0],w=S[1];function R(P,G){for(var L=[],$=0;($=P.indexOf(G,$))!==-1;)L.push({start:$,end:$+G.length}),$+=G.length;return L}function A(P,G,L){var $="",j=0;return G.forEach(function(X){var K=X.start,Z=X.end;$+=P.slice(j,K)+L,j=Z}),$+=P.slice(j),$}function U(P,G,L){var $=R(P,G);return A(P,$,L)}function O(P){var G=aU({template:P.uiTemplate,templateData:u.variables,colorVariables:P.colorVariables,theme:l});if(u.view_variables){var L={};Object.entries(u.view_variables).forEach(function($){var j=$[0],X=$[1],K=[];X.forEach(function(Z){var te=Z==null?void 0:Z.key;if(te){var ne=g(te);ne||p.error("TemplateMessageItemBody | simple template is expected to be cached: ",te);var le=aU({template:ne.uiTemplate,templateData:Z.variables,colorVariables:ne.colorVariables,theme:l});K.push({version:ne.version,body:{items:JSON.parse(le)}}),L[j]=JSON.stringify(K)}})}),Object.entries(L).forEach(function($){var j=$[0],X=$[1];G=U(G,'"@{'.concat(j,'}"'),X)})}return JSON.parse(G)}function B(){var P={filledMessageTemplateItemsList:[],isErrored:!1},G=[],L=g(h);if(L||G.push(h),u!=null&&u.view_variables)try{Object.entries(u.view_variables).forEach(function(j){var X=j[0],K=j[1];K.forEach(function(Z){var te=Z==null?void 0:Z.key;te&&!g(te)&&!G.includes(te)&&G.push(te)})})}catch{return p.error("TemplateMessageItemBody | received view_variables is malformed: ",u),P.isErrored=!0,P}try{if(G.length>0)F(G);else if(L){var $=O(L);P.filledMessageTemplateItemsList.push({version:L.version,items:$})}}catch(j){p.error("TemplateMessageItemBody | fetching non-cached templates by given template keys failed: ",j),P.isErrored=!0}return P}M.useEffect(function(){if(!I.isErrored&&I.filledMessageTemplateItemsList.length===0){var P=B();w(P)}},[u.key,y]);function F(P){if(P.length>0){var G=[];P.forEach(function(j){var X=E[j];G.push([j,X])});var L=Date.now(),$=[];G.forEach(function(j){var X=j[0],K=j[1];if(!K||K.erroredMessageIds.indexOf(i.messageId)===-1&&L>K.requestedAt+mfe)$.push(X);else if(K.erroredMessageIds.indexOf(i.messageId)>-1)throw new Error("TemplateMessageItemBody | fetching template key ".concat(X," for messageId: ").concat(i.messageId," has failed."))}),$.length>0&&C($,i.messageId,L)}}return I.isErrored?c():I.filledMessageTemplateItemsList.length===0?m.createElement(dfe,{className:r,isByMe:s}):m.createElement("div",{className:Ia([r,s?"outgoing":"incoming","sendbird-template-message-item-body"])},m.createElement(vfe,{fallbackMessage:m.createElement(iU,{className:r,message:i,isByMe:s}),logger:p},I.filledMessageTemplateItemsList.map(function(P,G){var L;return m.createElement(hfe,{key:G,message:i,templateVersion:(L=P.version)!==null&&L!==void 0?L:0,templateItems:P.items})})))}function _5(e){var n=e.text,t=e.onCancel,r=M.useContext(lr).stringSet,i=M.useRef(null),a=NI(i,{Enter:function(){return t==null?void 0:t()},Escape:function(){return t==null?void 0:t()}});return m.createElement("div",{onKeyDown:a},m.createElement(qa,{contentClassName:"sendbird-message-feedback-modal-content__mobile",type:br.PRIMARY,onSubmit:t,onClose:t,submitText:r.BUTTON__OK,renderHeader:function(){return m.createElement("div",{className:"sendbird-modal__header"},m.createElement(Ce,{type:be.H_1,color:ue.ONBACKGROUND_1,className:"sendbird-message-feedback-modal-header"},n))},customFooter:m.createElement("div",{className:"sendbird-message-feedback-modal-footer__root_failed"},m.createElement(go,{onClick:t},m.createElement(Ce,{type:be.BUTTON_3,color:ue.ONCONTENT_1},r.BUTTON__OK)))}))}function gfe(e){var n=e.className,t=n===void 0?"":n,r=e.isByMe,i=e.displayThreadReplies,a=e.bottom,s=e.message,o=e.channel,l=e.userId,u=e.chainBottom,c=u===void 0?!1:u,h=M.useRef(null),f=Fd(),p=f.disableUserProfile,_=f.renderUserProfile;return r||c||!om(s)?null:m.createElement(ba,{menuTrigger:function(g){var C,E;return m.createElement(Ui,{className:fn(t,i&&"use-thread-replies"),src:((E=(C=o==null?void 0:o.members)===null||C===void 0?void 0:C.find(function(y){return(y==null?void 0:y.userId)===s.sender.userId}))===null||E===void 0?void 0:E.profileUrl)||s.sender.profileUrl||"",ref:h,width:"28px",height:"28px",bottom:a,onClick:function(){p||g()}})},menuItems:function(g){return _?_({user:s.sender,close:g,currentUserId:l,avatarRef:h}):m.createElement(ya,{parentRef:h,parentContainRef:h,closeDropdown:g,style:{paddingTop:"0px",paddingBottom:"0px"}},m.createElement(Bd,{user:s.sender,onSuccess:g}))}})}var Efe=function(e){var n=e.children;return m.createElement(Ce,{className:"sendbird-form-message__input__label",type:be.CAPTION_2,color:ue.ONBACKGROUND_2},n)},yfe=function(e){var n=e.name,t=e.required,r=e.errorMessage,i=e.isValid,a=e.values,s=e.isInvalidated,o=e.isSubmitTried,l=e.style,u=e.onFocused,c=e.onChange,h=e.placeHolder,f=e.isSubmitted,p=l.layout,_=l.options,g=_===void 0?[]:_,C=l.resultCount,E=C??{},y=E.min,S=y===void 0?1:y,I=E.max,w=I===void 0?1:I,R=B(),A=M.useContext(lr).stringSet,U=function(){u==null||u(!0)},O=function(){u==null||u(!1)};function B(){return f?g.map(function(P){return{state:a.includes(P)?"submittedSelected":"submittedDefault",option:P}}):g.map(function(P){return{state:a.includes(P)?"selected":"default",option:P}})}var F=function(P){if(!f){var G;S===1&&w===1?G=R[P].state==="selected"?[]:[R[P].option]:G=R.reduce(function(L,$,j){return j===P?$.state==="default"&&a.length<w&&L.push($.option):$.state==="selected"&&L.push($.option),L},[]),c(G)}};return m.createElement("div",{className:"sendbird-form-message__input__root"},m.createElement(Efe,null,m.createElement("div",{className:"sendbird-form-message__input__title-container"},n," ",!t&&m.createElement("span",{className:"sendbird-form-message__input__title-optional"},"(optional)"))),m.createElement("div",{className:"sendbird-input_for_form"},function(){switch(p){case"chip":return m.createElement("div",{className:"sendbird-form-message__input__chip-container"},R.map(function(G,L){return m.createElement("div",{className:"sendbird-form-message__input__chip ".concat(G.state),key:L,onClick:function(){return F(L)}},m.createElement("div",{className:"sendbird-form-message__input__chip-text"},G.option),f&&G.state==="submittedSelected"&&m.createElement(ke,{className:"sendbird-form-message__submitted-check-icon-chip",type:Ne.DONE,fillColor:Oe.SECONDARY_2,width:"20px",height:"20px"}))}));case"textarea":{var P=a.length>0?a[0]:"";return m.createElement("div",{className:"sendbird-form-message__input__container"},f?m.createElement("div",{className:"sendbird-form-message__submitted-input-box textarea"},m.createElement("div",{className:"sendbird-form-message__submitted-input-box-text"},P),i&&m.createElement("div",{className:"sendbird-form-message__submitted-check-icon-container"},m.createElement(ke,{type:Ne.DONE,fillColor:Oe.SECONDARY_2,width:"20px",height:"20px"})),!P&&m.createElement(Ce,{className:"sendbird-input__placeholder",type:be.BODY_1,color:ue.ONBACKGROUND_3},A.FORM_ITEM_OPTIONAL_EMPTY)):m.createElement(m.Fragment,null,m.createElement("textarea",{className:fn("sendbird-input__input",!!r&&"error","sendbird-form-message__input__textarea"),required:t,disabled:f,value:P,onFocus:U,onBlur:O,onChange:function(G){var L=G.target.value;c(L?[L]:[])}}),h&&!P&&m.createElement(Ce,{className:"sendbird-input__placeholder textarea",type:be.BODY_1,color:ue.ONBACKGROUND_3},h)))}case"text":case"number":case"phone":case"email":{var P=a.length>0?a[0]:"";return m.createElement("div",{className:"sendbird-form-message__input__container"},f?m.createElement("div",{className:"sendbird-form-message__submitted-input-box"},m.createElement("div",{className:"sendbird-form-message__submitted-input-box-text"},P),i&&m.createElement("div",{className:"sendbird-form-message__submitted-check-icon-container"},m.createElement(ke,{type:Ne.DONE,fillColor:Oe.SECONDARY_2,width:"20px",height:"20px"})),!P&&m.createElement(Ce,{className:"sendbird-input__placeholder",type:be.BODY_1,color:ue.ONBACKGROUND_3},A.FORM_ITEM_OPTIONAL_EMPTY)):m.createElement(m.Fragment,null,m.createElement("input",{type:p==="number"?"text":p,inputMode:p==="number"?"numeric":"text",className:"sendbird-input__input ".concat(r?"error":""),name:n,required:t,disabled:f,value:P,onFocus:U,onBlur:O,onChange:function(L){var $=L.target.value;c($?[$]:[])}}),h&&!P&&m.createElement(Ce,{className:"sendbird-input__placeholder",type:be.BODY_1,color:ue.ONBACKGROUND_3},h)))}default:return m.createElement(m.Fragment,null)}}(),r&&(o||s)&&m.createElement(Ce,{className:"sendbird-form-message__error-label",type:be.CAPTION_3},r)))},bfe=function(e){var n=e.isByMe,t=e.text;return m.createElement("div",{className:Ia(["sendbird-unknown-message-item-body",n?"outgoing":"incoming"])},m.createElement(Ce,{className:"sendbird-unknown-message-item-body__description",type:be.BODY_1,color:n?ue.ONCONTENT_3:ue.ONBACKGROUND_3},t))};function Cfe(e){var n=this,t=e.message,r=e.form,i=e.isByMe,a=e.logger,s=r.items,o=r.id,l=M.useContext(lr).stringSet,u=M.useState(!1),c=u[0],h=u[1],f=M.useState(!1),p=f[0],_=f[1],g=M.useState(function(){var A=[];return s.forEach(function(U){var O=U.required,B=U.style,F=B===void 0?{}:B,P=F.layout,G=F.defaultOptions,L=G===void 0?[]:G;A.push({draftValues:P==="chip"?L:[],required:O,errorMessage:null,isInvalidated:!1})}),A}),C=g[0],E=g[1],y=r.isSubmitted,S=C.some(function(A){var U=A.errorMessage;return!!U}),I=C.some(function(A){var U=A.isInvalidated;return U}),w=S&&(p||I)||y,R=M.useCallback(function(){return vr(n,void 0,void 0,function(){var A,U,O;return pr(this,function(B){switch(B.label){case 0:_(!0),B.label=1;case 1:return B.trys.push([1,3,,4]),A=C.some(function(F){var P=F.errorMessage;return P}),A?[2]:(U=C.some(function(F){return F.required&&(!F.draftValues||F.draftValues.length===0)}),U?(E(function(F){return F.map(function(P){return P.required&&P.draftValues.length===0?H(H({},P),{errorMessage:l.FORM_ITEM_REQUIRED}):P})}),[2]):(C.forEach(function(F,P){s[P].draftValues=F.draftValues}),[4,t.submitMessageForm()]));case 2:return B.sent(),[3,4];case 3:return O=B.sent(),h(!0),a==null||a.error(O),[3,4];case 4:return[2]}})})},[C,t.messageId,t.submitMessageForm,o]);return pP(r.version)?m.createElement("div",{className:Ia(["".concat(CI," disable-hover"),"sendbird-form-message__root","incoming"])},s.map(function(A,U){var O,B=A.name,F=A.placeholder,P=A.id,G=A.required,L=A.style,$=C[U],j=$.draftValues,X=j===void 0?[]:j,K=$.errorMessage;return m.createElement(yfe,{key:P,style:L,placeHolder:F,values:(O=A.submittedValues)!==null&&O!==void 0?O:X,isInvalidated:C[U].isInvalidated,isSubmitTried:p,errorMessage:K,isValid:y,isSubmitted:y,name:B,required:G,onFocused:function(Z){K&&!Z&&!C[U].isInvalidated?E(function(te){var ne=te.slice(0);return ne[U]=H(H({},ne[U]),{isInvalidated:!0}),ne}):K||E(function(te){var ne=te.slice(0);return ne[U]=H(H({},ne[U]),{isInvalidated:!1}),ne})},onChange:function(Z){E(function(te){var ne=te.slice(0);return ne[U]=H(H({},ne[U]),{draftValues:Z,errorMessage:function(){return A.isValid(Z)?G&&Z.length===0?l.FORM_ITEM_REQUIRED:null:l.FORM_ITEM_INVALID}()}),ne})}})}),m.createElement(go,{className:"sendbird-form-message__submit-button",onClick:R,disabled:w,labelType:be.BUTTON_2,labelColor:ue.ONCONTENT_1},y?"Submitted successfully":"Submit"),c&&m.createElement(_5,{text:"Submit failed.",onCancel:function(){h(!1)}})):m.createElement(bfe,{isByMe:i,text:l.FORM_VERSION_ERROR})}var Sfe="sendbird-message-content__middle__message-item-body",Tfe=function(e){var n,t=e.className,r=t===void 0?Sfe:t,i=e.message,a=e.channel,s=e.showFileViewer,o=e.onMessageHeightChange,l=e.onBeforeDownloadFileMessage,u=e.mouseHover,c=e.isMobile,h=e.config,f=e.isReactionEnabledInChannel,p=e.isByMe,_=(n=e.customSubcomponentsProps)!==null&&n!==void 0?n:{},g=ahe({isMobile:c}),C=she(i),E=Nle(),y=(a==null?void 0:a.isGroupChannel())&&h.groupChannel.enableOgtag,S=(a==null?void 0:a.isGroupChannel())&&h.groupChannel.enableFormTypeMessage,I=function(){return m.createElement(uhe,{className:r,message:i,isByMe:p,mouseHover:u,isReactionEnabled:f})};return Es(i).when(function(w){return S&&Q6(w)},function(){return m.createElement(Cfe,{isByMe:p,message:i,form:i.messageForm,logger:h.logger})}).when(w0,function(){var w,R,A=i.extendedMessagePayload[im];return X6(A)?m.createElement(_fe,{className:r,message:i,isByMe:p,theme:h==null?void 0:h.theme}):((R=(w=h.logger)===null||w===void 0?void 0:w.error)===null||R===void 0||R.call(w,"TemplateMessageItemBody: invalid type value in message.extendedMessagePayload.message_template.",A),I())}).when(function(w){return y&&om(w)&&dI(w)},function(){var w;return m.createElement(Hde,{className:r,message:i,isByMe:p,mouseHover:u,isMentionEnabled:(w=h.groupChannel.enableMention)!==null&&w!==void 0?w:!1,isReactionEnabled:f,onMessageHeightChange:o,isMarkdownEnabled:h.groupChannel.enableMarkdownForUserMessage})}).when(ble,function(){var w;return m.createElement(Vde,{className:r,message:i,isByMe:p,mouseHover:u,isMentionEnabled:(w=h.groupChannel.enableMention)!==null&&w!==void 0?w:!1,isReactionEnabled:f,isMarkdownEnabled:h.groupChannel.enableMarkdownForUserMessage})}).when(function(w){return fI(w)===E.FILE},function(){return m.createElement(zde,{className:r,message:i,isByMe:p,mouseHover:u,isReactionEnabled:f,onBeforeDownloadFileMessage:l})}).when(ma,function(){var w;return m.createElement(ihe,H({className:r,message:i,isByMe:p,mouseHover:u,isReactionEnabled:f,threadMessageKindKey:g,statefulFileInfoList:C,onBeforeDownloadFileMessage:l},(w=_.MultipleFilesMessageItemBody)!==null&&w!==void 0?w:{}))}).when(Zo,function(){var w;return m.createElement(ohe,{className:r,message:i,channelUrl:(w=a==null?void 0:a.url)!==null&&w!==void 0?w:"",isByMe:p,isReactionEnabled:f})}).when(ic,function(){var w;return m.createElement(lhe,H({className:r,message:i,isByMe:p,mouseHover:u,isReactionEnabled:f,showFileViewer:s,style:c?{width:"100%"}:{}},(w=_.ThumbnailMessageItemBody)!==null&&w!==void 0?w:{}))}).otherwise(function(){return I()})},Nfe=function(e){var n,t,r=e.channel,i=e.message;return m.createElement(Ce,{className:"sendbird-message-content__middle__sender-name",type:be.CAPTION_2,color:ue.ONBACKGROUND_2},((t=(n=r==null?void 0:r.members)===null||n===void 0?void 0:n.find(function(a){var s;return(a==null?void 0:a.userId)===((s=i==null?void 0:i.sender)===null||s===void 0?void 0:s.userId)}))===null||t===void 0?void 0:t.nickname)||Dle(i))},sU=m.forwardRef(function(e,n){var t=e.children,r=e.isSelected,i=e.onClick,a=i===void 0?function(){}:i,s=e.disabled,o=s===void 0?!1:s;return m.createElement("button",{className:["sendbird-iconbutton__feedback",r?"sendbird-iconbutton__feedback__pressed":"",o?"sendbird-iconbutton__feedback__disabled":""].join(" "),ref:n,type:"button",onClick:function(l){a==null||a(l)},disabled:o},m.createElement("span",{className:["sendbird-iconbutton__feedback__inner",r?"sendbird-iconbutton__feedback__inner__pressed":"",o?"sendbird-iconbutton__feedback__inner__disabled":""].join(" ")},t))});function Ife(e){var n=e.hideMenu,t=e.onEditFeedback,r=e.onRemoveFeedback,i=tn().stringSet;return m.createElement(RE,{onBackdropClick:n},m.createElement("div",{className:"sendbird-message__bottomsheet--feedback-options-menu"},m.createElement("div",{className:"sendbird-message__bottomsheet--feedback-option",onClick:function(){n(),t()}},m.createElement(Ce,{type:be.BODY_1,color:ue.ONBACKGROUND_1},i.EDIT_COMMENT)),m.createElement("div",{className:"sendbird-message__bottomsheet--feedback-option",onClick:function(){n(),r()}},m.createElement(Ce,{type:be.BODY_1,color:ue.ERROR},i.REMOVE_FEEDBACK))))}var Z_=function(e){var n=e.children;return m.createElement(Ce,{className:"sendbird-input-label",type:be.CAPTION_3,color:ue.ONBACKGROUND_1},n)},IT=m.forwardRef(function(e,n){var t=e.name,r=e.required,i=e.disabled,a=e.value,s=e.placeHolder,o=e.autoFocus,l=o===void 0?!1:o,u=M.useState(a),c=u[0],h=u[1];return m.createElement("div",{className:"sendbird-input"},m.createElement("input",{className:"sendbird-input__input",ref:n,name:t,required:r,disabled:i,value:c,onChange:function(f){h(f.target.value)},autoFocus:l}),s&&!c&&m.createElement(Ce,{className:"sendbird-input__placeholder",type:be.BODY_1,color:ue.ONBACKGROUND_3},s))});function Mfe(e){var n,t,r=e.selectedFeedback,i=e.message,a=e.onClose,s=e.onSubmit,o=e.onUpdate,l=e.onRemove,u=M.useContext(lr).stringSet,c=si().isMobile,h=(i==null?void 0:i.myFeedback)&&r===i.myFeedback.rating,f=(n=i==null?void 0:i.myFeedback)===null||n===void 0?void 0:n.comment,p=function(){var E,y,S;if(r){var I=(y=(E=g.current)===null||E===void 0?void 0:E.value)!==null&&y!==void 0?y:"";h?I!==((S=i.myFeedback)===null||S===void 0?void 0:S.comment)?o==null||o(r,I):a==null||a():i.myFeedback||s==null||s(r,I)}},_=M.useRef(),g=M.useRef(),C=NI(_,{Enter:function(){return p()},Escape:function(){return a==null?void 0:a()}});return m.createElement("div",{onKeyDown:C},m.createElement(qa,{contentClassName:"sendbird-message-feedback-modal-content__mobile",type:br.PRIMARY,onCancel:a,onSubmit:function(){p()},submitText:u.BUTTON__SUBMIT,renderHeader:function(){return m.createElement("div",{className:"sendbird-modal__header"},m.createElement(Ce,{type:be.H_1,color:ue.ONBACKGROUND_1,className:"sendbird-message-feedback-modal-header"},u.FEEDBACK_MODAL_TITLE))},customFooter:m.createElement("div",{className:"sendbird-message-feedback-modal-footer__root"},!c&&(i!=null&&i.myFeedback)&&r===i.myFeedback.rating?m.createElement(go,{type:br.WARNING,onClick:l,labelType:be.BUTTON_3},u.BUTTON__REMOVE_FEEDBACK):m.createElement("div",null),m.createElement("div",{className:"sendbird-message-feedback-modal-footer__right-content"},m.createElement(go,{type:br.SECONDARY,onClick:a},m.createElement(Ce,{type:be.BUTTON_3,color:ue.ONBACKGROUND_1},u.BUTTON__CANCEL)),m.createElement(go,{onClick:function(){return p()}},m.createElement(Ce,{type:be.BUTTON_3,color:ue.ONCONTENT_1},f?u.BUTTON__SAVE:u.BUTTON__SUBMIT))))},m.createElement("div",{className:"sendbird-message-feedback-modal-body__root"},m.createElement(IT,{name:"sendbird-message-feedback-modal-body__root",ref:g,value:h?(t=i.myFeedback)===null||t===void 0?void 0:t.comment:void 0,placeHolder:u.FEEDBACK_CONTENT_PLACEHOLDER,autoFocus:!0}))))}function Afe(e,n){var t=M.useState(!1),r=t[0],i=t[1];return M.useEffect(function(){var a=Array.isArray(n)?n:[n],s=function(){var c,h=a==null?void 0:a.map(function(f){return f==null?void 0:f.querySelector(e)});i((c=h==null?void 0:h.some(function(f){return!!f}))!==null&&c!==void 0?c:!1)};s();var o=function(c){c.forEach(function(h){(h.addedNodes.length||h.removedNodes.length)&&(Array.from(h.addedNodes).forEach(function(f){f.nodeType===Node.ELEMENT_NODE&&f.matches(e)&&i(!0)}),Array.from(h.removedNodes).forEach(function(f){f.nodeType===Node.ELEMENT_NODE&&f.matches(e)&&i(!1)}))})},l=new MutationObserver(o),u={childList:!0,subtree:!0};return a==null||a.forEach(function(c){c&&l.observe(c,u)}),function(){l.disconnect()}},[e,n]),r}var MT;(function(e){e.NOT_APPLICABLE="NOT_APPLICABLE",e.NO_FEEDBACK="NO_FEEDBACK",e.SUBMITTED="SUBMITTED"})(MT||(MT={}));function wfe(e){var n,t,r,i=e.channel,a=e.message,s=e.showFileViewer,o=e.onMessageHeightChange,l=e.onBeforeDownloadFileMessage,u=e.renderSenderProfile,c=e.renderMessageHeader,h=e.renderMessageBody,f=e.isByMe,p=e.displayThreadReplies,_=e.mouseHover,g=e.isMobile,C=e.isReactionEnabledInChannel,E=e.hoveredMenuClassName,y=e.templateType,S=e.useReplying,I=en().state.config,w=tn().dateLocale,R=(n=yle[y])!==null&&n!==void 0?n:"",A=u(H(H({},e),{chainBottom:!1,className:"",isByMe:f,displayThreadReplies:p})),U=c(e),O=h({message:a,channel:i,showFileViewer:s,onMessageHeightChange:o,mouseHover:_,isMobile:g,config:I,isReactionEnabledInChannel:C,isByMe:f,onBeforeDownloadFileMessage:l}),B=m.createElement(Ce,{className:fn("sendbird-message-content__middle__body-container__created-at","right",E,R),type:be.CAPTION_3,color:ue.ONBACKGROUND_2},_a((a==null?void 0:a.createdAt)||0,"p",{locale:w})),F=(t=a.extendedMessagePayload)===null||t===void 0?void 0:t[im],P=(r=F==null?void 0:F.container_options)!==null&&r!==void 0?r:{},G=P.profile,L=G===void 0?!0:G,$=P.time,j=$===void 0?!0:$,X=P.nickname,K=X===void 0?!0:X,Z=L||K;return m.createElement("div",{className:"sendbird-message-content__sendbird-ui-container-type__default__root"},!f&&Z&&!S&&m.createElement("div",{className:"sendbird-message-content__sendbird-ui-container-type__default__header-container"},m.createElement("div",{className:"sendbird-message-content__sendbird-ui-container-type__default__header-container__left__profile"},L&&A),K&&U),O,!f&&j&&m.createElement("div",{className:"sendbird-message-content__sendbird-ui-container-type__default__bottom"},B))}function Rfe(e){var n=this,t,r,i,a,s,o,l,u,c,h,f,p,_=e.className,g=e.userId,C=e.channel,E=e.message,y=e.disabled,S=y===void 0?!1:y,I=e.chainTop,w=I===void 0?!1:I,R=e.chainBottom,A=R===void 0?!1:R,U=e.isReactionEnabled,O=U===void 0?!1:U,B=e.disableQuoteMessage,F=B===void 0?!1:B,P=e.replyType,G=e.threadReplySelectType,L=e.nicknamesMap,$=e.emojiContainer,j=e.scrollToMessage,X=e.showEdit,K=e.showRemove,Z=e.showFileViewer,te=e.resendMessage,ne=e.deleteMessage,le=e.toggleReaction,Te=e.setQuoteMessage,Ze=e.markAsUnread,ce=e.onReplyInThread,ge=e.onQuoteMessageClick,Qe=e.onMessageHeightChange,xe=e.onBeforeDownloadFileMessage,tt=e.filterEmojiCategoryIds,ht=rc(e),bt=ht.renderSenderProfile,Rt=bt===void 0?function(_t){return m.createElement(gfe,H({},_t))}:bt,Ut=ht.renderMessageBody,lt=Ut===void 0?function(_t){return m.createElement(Tfe,H({},_t))}:Ut,kt=ht.renderMessageHeader,$t=kt===void 0?function(_t){return m.createElement(Nfe,H({},_t))}:kt,mt=ht.renderMessageMenu,zt=mt===void 0?function(_t){return m.createElement(ude,H({},_t))}:mt,Tt=ht.renderEmojiMenu,Pt=Tt===void 0?function(_t){return m.createElement(hde,H({},_t))}:Tt,Xe=ht.renderEmojiReactions,je=Xe===void 0?function(_t){return m.createElement(Tde,H({},_t))}:Xe,Ve=ht.renderMobileMenuOnLongPress,Ct=Ve===void 0?function(_t){return m.createElement(Dde,H({},_t))}:Ve,ut=tn(),qe=ut.dateLocale,pt=ut.stringSet,jt=en().state,Ue=jt.config,hn=jt.eventHandlers,un=Ue.logger,vn=(t=hn==null?void 0:hn.reaction)===null||t===void 0?void 0:t.onPressUserProfile,Xt=M.useRef(),Wt=M.useRef(),At=M.useRef(),xt=si().isMobile,on=M.useState(!1),xn=on[0],st=on[1],ct=M.useState(!1),at=ct[0],Pe=ct[1],he=Afe("#".concat(gI(E.messageId),".").concat(_I),[document.getElementById(R0),document.getElementById(EI)]),He=M.useState(!1),ot=He[0],nt=He[1],Zt=M.useState(!1),dt=Zt[0],On=Zt[1],Yt=M.useState(""),rn=Yt[0],Pn=Yt[1],_n=g===((r=E==null?void 0:E.sender)===null||r===void 0?void 0:r.userId)||(E==null?void 0:E.sendingStatus)==="pending"||(E==null?void 0:E.sendingStatus)==="failed",Tn=_n?"outgoing":"incoming",qn=w?"chain-top":"",Be=O&&!(C!=null&&C.isEphemeral),rt=Be?"use-reactions":"",et=he?"sendbird-mouse-hover":"",Nt=!!((P==="QUOTE_REPLY"||P==="THREAD")&&(E!=null&&E.parentMessageId)&&(E!=null&&E.parentMessage)&&!F),Et=Nt?"use-quote":"";M.useEffect(function(){Nt&&(Qe==null||Qe())},[Nt]);var Ot=(E==null?void 0:E.threadInfo)&&E.threadInfo.replyCount>0&&P==="THREAD",nn=!_n&&!!(E!=null&&E.myFeedbackStatus)&&E.myFeedbackStatus!==MT.NOT_APPLICABLE,Nn=!!(!((i=Ue==null?void 0:Ue.groupChannel)===null||i===void 0)&&i.enableFeedback)&&nn,Je=(a=E==null?void 0:E.myFeedback)===null||a===void 0?void 0:a.rating,an=!w0(E)&&!Q6(E),Ke=an&&xt,J=an&&_n&&!xt,Se=an&&Ot,We=an&&!_n&&!xt,qt=function(){var _t=2;return Wt.current&&(_t+=4+Wt.current.clientHeight),At.current&&(_t+=4+At.current.clientHeight),_t>0?_t+"px":""},Cn=function(){On(!1)},yn=function(_t){_t===void 0&&(_t=!1),xt&&_t?nt(!0):On(!0)},Wn=tl({onLongPress:function(){Ke&&st(!0)},onClick:Mn},{delay:300,shouldPreventDefault:!1});if(cI(E))return m.createElement(Nde,{message:E});if(w0(E)){var Xn=E.extendedMessagePayload[im];if(X6(Xn))return m.createElement(wfe,H({},e,{renderSenderProfile:Rt,renderMessageHeader:$t,renderMessageBody:lt,isByMe:_n,displayThreadReplies:Ot,mouseHover:at,isMobile:xt,isReactionEnabledInChannel:Be,hoveredMenuClassName:et,templateType:Xn.type,useReplying:Nt}))}return m.createElement("div",{className:Ia([_??"","sendbird-message-content",Tn]),onMouseOver:function(){return Pe(!0)},onMouseLeave:function(){return Pe(!1)}},m.createElement("div",{className:fn("sendbird-message-content__left",rt,Tn,Et),"data-testid":"sendbird-message-content__left"},Rt(H(H({},e),{className:"sendbird-message-content__left__avatar",isByMe:_n,displayThreadReplies:Ot,bottom:qt()})),J&&m.createElement("div",{className:fn("sendbird-message-content-menu",rt,et,Tn)},zt({channel:C,message:E,isByMe:_n,replyType:P,showEdit:X,showRemove:K,resendMessage:te,setQuoteMessage:Te,markAsUnread:Ze,onReplyInThread:function(_t){var Jt,gt,Qt=_t.message;G===oo.THREAD?ce==null||ce({message:Qt}):G===oo.PARENT&&(j==null||j((gt=(Jt=Qt.parentMessage)===null||Jt===void 0?void 0:Jt.createdAt)!==null&&gt!==void 0?gt:0,Qt.parentMessageId))},deleteMessage:ne}),Be&&Pt({message:E,userId:g,emojiContainer:$,toggleReaction:le,filterEmojiCategoryIds:tt}))),m.createElement("div",H({className:fn("sendbird-message-content__middle"),"data-testid":"sendbird-message-content__middle"},xt?H({},Wn):{},{ref:Xt}),!_n&&!w&&!Nt&&$t(e),Nt?m.createElement("div",{className:fn("sendbird-message-content__middle__quote-message",_n?"outgoing":"incoming",Et),"data-testid":"sendbird-message-content__middle__quote-message"},m.createElement(Mde,{className:"sendbird-message-content__middle__quote-message__quote",message:E,userId:g,isByMe:_n,isUnavailable:((s=C==null?void 0:C.messageOffsetTimestamp)!==null&&s!==void 0?s:0)>((l=(o=E.parentMessage)===null||o===void 0?void 0:o.createdAt)!==null&&l!==void 0?l:0),onClick:function(){var _t;P==="THREAD"&&G===oo.THREAD&&(ge==null||ge({message:E})),(P==="QUOTE_REPLY"||P==="THREAD"&&G===oo.PARENT)&&(!((_t=E==null?void 0:E.parentMessage)===null||_t===void 0)&&_t.createdAt)&&(E!=null&&E.parentMessageId)&&(j==null||j(E.parentMessage.createdAt,E.parentMessageId))}})):null,m.createElement("div",{className:fn("sendbird-message-content__middle__body-container")},_n&&!A&&m.createElement("div",{className:fn("sendbird-message-content__middle__body-container__created-at","left",et)},m.createElement("div",{className:"sendbird-message-content__middle__body-container__created-at__component-container"},m.createElement(GP,{message:E,channel:C}))),lt({message:E,channel:C,showFileViewer:Z,onMessageHeightChange:Qe,mouseHover:at,isMobile:xt,config:Ue,isReactionEnabledInChannel:Be,isByMe:_n,onBeforeDownloadFileMessage:xe}),Be&&((u=E==null?void 0:E.reactions)===null||u===void 0?void 0:u.length)>0&&m.createElement("div",{className:fn("sendbird-message-content-reactions",ma(E)?"image-grid":_n&&!ic(E)&&!dI(E)&&"primary",at&&"mouse-hover")},je({userId:g,message:E,channel:C,isByMe:_n,emojiContainer:$,memberNicknamesMap:L??new Map,toggleReaction:le,onPressUserProfile:vn,filterEmojiCategoryIds:tt})),!_n&&!A&&m.createElement(Ce,{className:fn("sendbird-message-content__middle__body-container__created-at","right",et),type:be.CAPTION_3,color:ue.ONBACKGROUND_2},_a((E==null?void 0:E.createdAt)||0,pt.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:qe}))),Se&&(E==null?void 0:E.threadInfo)&&m.createElement(Lde,{className:"sendbird-message-content__middle__thread-replies",threadInfo:E==null?void 0:E.threadInfo,onClick:function(){return ce==null?void 0:ce({message:E})},ref:Wt}),Nn&&m.createElement("div",{className:"sendbird-message-content__middle__body-container__feedback-buttons-container",ref:At},m.createElement(sU,{isSelected:((c=E==null?void 0:E.myFeedback)===null||c===void 0?void 0:c.rating)===yu.GOOD,onClick:function(){return vr(n,void 0,void 0,function(){var _t,Jt,gt;return pr(this,function(Qt){switch(Qt.label){case 0:if(Je)return[3,5];Qt.label=1;case 1:return Qt.trys.push([1,3,,4]),[4,E.submitFeedback({rating:yu.GOOD})];case 2:return Qt.sent(),yn(),[3,4];case 3:return _t=Qt.sent(),(gt=(Jt=Ue==null?void 0:Ue.logger)===null||Jt===void 0?void 0:Jt.error)===null||gt===void 0||gt.call(Jt,"Channel: Submit feedback failed.",_t),Pn(pt.FEEDBACK_FAILED_SUBMIT),[3,4];case 4:return[3,6];case 5:yn(!0),Qt.label=6;case 6:return[2]}})})},disabled:!!(E!=null&&E.myFeedback)&&E.myFeedback.rating!==yu.GOOD},m.createElement(ke,{type:Ne.FEEDBACK_LIKE,width:"24px",height:"24px"})),m.createElement(sU,{isSelected:((h=E==null?void 0:E.myFeedback)===null||h===void 0?void 0:h.rating)===yu.BAD,onClick:function(){return vr(n,void 0,void 0,function(){var _t,Jt,gt;return pr(this,function(Qt){switch(Qt.label){case 0:if(Je)return[3,5];Qt.label=1;case 1:return Qt.trys.push([1,3,,4]),[4,E.submitFeedback({rating:yu.BAD})];case 2:return Qt.sent(),yn(),[3,4];case 3:return _t=Qt.sent(),(gt=(Jt=Ue==null?void 0:Ue.logger)===null||Jt===void 0?void 0:Jt.error)===null||gt===void 0||gt.call(Jt,"Channel: Submit feedback failed.",_t),Pn(pt.FEEDBACK_FAILED_SUBMIT),[3,4];case 4:return[3,6];case 5:yn(!0),Qt.label=6;case 6:return[2]}})})},disabled:!!(E!=null&&E.myFeedback)&&E.myFeedback.rating!==yu.BAD},m.createElement(ke,{type:Ne.FEEDBACK_DISLIKE,width:"24px",height:"24px"})))),We&&m.createElement("div",{className:fn("sendbird-message-content__right",qn,rt,Et),"data-testid":"sendbird-message-content__right"},m.createElement("div",{className:fn("sendbird-message-content-menu",qn,et,Tn)},Be&&Pt({className:"sendbird-message-content-menu__reaction-menu",message:E,userId:g,emojiContainer:$,toggleReaction:le,filterEmojiCategoryIds:tt}),zt({className:"sendbird-message-content-menu__normal-menu",channel:C,message:E,isByMe:_n,replyType:P,showRemove:K,resendMessage:te,setQuoteMessage:Te,markAsUnread:Ze,onReplyInThread:function(_t){var Jt,gt,Qt=_t.message;G===oo.THREAD?ce==null||ce({message:Qt}):G===oo.PARENT&&(j==null||j((gt=(Jt=Qt.parentMessage)===null||Jt===void 0?void 0:Jt.createdAt)!==null&&gt!==void 0?gt:0,Qt.parentMessageId))},deleteMessage:ne}))),xn&&om(E)&&C&&Ct({parentRef:Xt,channel:C,hideMenu:function(){st(!1)},message:E,isReactionEnabled:Be,isByMe:_n,userId:g,replyType:P,disabled:S,showRemove:K,emojiContainer:$,resendMessage:te,deleteMessage:ne,setQuoteMessage:Te,toggleReaction:le,showEdit:X,markAsUnread:Ze,onReplyInThread:function(_t){var Jt,gt=_t.message;G===oo.THREAD?ce==null||ce({message:gt}):G===oo.PARENT&&(j==null||j(((Jt=gt==null?void 0:gt.parentMessage)===null||Jt===void 0?void 0:Jt.createdAt)||0,(gt==null?void 0:gt.parentMessageId)||0))},onDownloadClick:function(_t){return vr(n,void 0,void 0,function(){var Jt,gt,Qt,Tr;return pr(this,function(Qr){switch(Qr.label){case 0:if(!xe)return[2];Qr.label=1;case 1:return Qr.trys.push([1,3,,4]),[4,xe({message:E})];case 2:return Jt=Qr.sent(),Jt||(_t.preventDefault(),(Qt=un==null?void 0:un.info)===null||Qt===void 0||Qt.call(un,"MessageContent: Not allowed to download.")),[3,4];case 3:return gt=Qr.sent(),(Tr=un==null?void 0:un.error)===null||Tr===void 0||Tr.call(un,"MessageContent: Error occurred while determining download continuation:",gt),[3,4];case 4:return[2]}})})}}),((f=E==null?void 0:E.myFeedback)===null||f===void 0?void 0:f.rating)&&ot&&m.createElement(Ife,{hideMenu:function(){nt(!1)},onEditFeedback:function(){nt(!1),On(!0)},onRemoveFeedback:function(){return vr(n,void 0,void 0,function(){var _t,Jt,gt;return pr(this,function(Qt){switch(Qt.label){case 0:return Qt.trys.push([0,3,,4]),E.myFeedback===null?[3,2]:[4,E.deleteFeedback(E.myFeedback.id)];case 1:Qt.sent(),Qt.label=2;case 2:return[3,4];case 3:return _t=Qt.sent(),(gt=(Jt=Ue==null?void 0:Ue.logger)===null||Jt===void 0?void 0:Jt.error)===null||gt===void 0||gt.call(Jt,"Channel: Delete feedback failed.",_t),Pn(pt.FEEDBACK_FAILED_DELETE),[3,4];case 4:return nt(!1),[2]}})})}}),((p=E==null?void 0:E.myFeedback)===null||p===void 0?void 0:p.rating)&&dt&&m.createElement(Mfe,{selectedFeedback:E.myFeedback.rating,message:E,onUpdate:function(_t,Jt){return vr(n,void 0,void 0,function(){var gt,Qt,Tr,Qr;return pr(this,function(gi){switch(gi.label){case 0:if(E.myFeedback===null)return[3,4];gt=new Nl({id:E.myFeedback.id,rating:_t,comment:Jt}),gi.label=1;case 1:return gi.trys.push([1,3,,4]),[4,E.updateFeedback(gt)];case 2:return gi.sent(),[3,4];case 3:return Qt=gi.sent(),(Qr=(Tr=Ue==null?void 0:Ue.logger)===null||Tr===void 0?void 0:Tr.error)===null||Qr===void 0||Qr.call(Tr,"Channel: Update feedback failed.",Qt),Pn(pt.FEEDBACK_FAILED_SAVE),[3,4];case 4:return Cn(),[2]}})})},onClose:Cn,onRemove:function(){return vr(n,void 0,void 0,function(){var _t,Jt,gt;return pr(this,function(Qt){switch(Qt.label){case 0:return Qt.trys.push([0,3,,4]),E.myFeedback===null?[3,2]:[4,E.deleteFeedback(E.myFeedback.id)];case 1:Qt.sent(),Qt.label=2;case 2:return[3,4];case 3:return _t=Qt.sent(),(gt=(Jt=Ue==null?void 0:Ue.logger)===null||Jt===void 0?void 0:Jt.error)===null||gt===void 0||gt.call(Jt,"Channel: Delete feedback failed.",_t),Pn(pt.FEEDBACK_FAILED_DELETE),[3,4];case 4:return Cn(),[2]}})})}}),rn&&m.createElement(_5,{text:rn,onCancel:function(){Pn("")}}))}var Ofe=function(e){var n=e.value,t=e.onClickReply,r=e.type,i=r===void 0?"vertical":r;return m.createElement("div",{className:"sendbird-suggested-replies__option ".concat(i),id:n,onClick:function(a){return t(a,n)}},n)},Dfe=function(e){var n=e.replyOptions,t=e.onSendMessage,r=e.type,i=r===void 0?"vertical":r,a=M.useState(!1),s=a[0],o=a[1],l=function(c,h){c.preventDefault(),t({message:h}),o(!0)};if(s)return null;var u=n.map(function(c,h){return m.createElement(Ofe,{key:h,value:c,onClickReply:l,type:i})});return m.createElement("div",{className:"sendbird-suggested-replies ".concat(i)},u)};function Ufe(e){var n=e.member,t=e.isFocused,r=t===void 0?!1:t,i=e.parentScrollRef,a=e.onClick,s=e.onMouseOver,o=e.onMouseMove,l=e.renderUserMentionItem,u=M.useRef(null),c=M.useContext(lr).stringSet;M.useEffect(function(){r&&(i==null?void 0:i.current)!=null&&(u==null?void 0:u.current)!=null&&(i.current.scrollTop>=u.current.offsetTop||i.current.scrollTop+i.current.clientHeight<=u.current.offsetTop)&&u.current.scrollIntoView({block:"nearest",inline:"nearest"})},[r]);var h=M.useMemo(function(){if(l)return m.createElement("div",{className:"sendbird-mention-suggest-list__user-item",onClick:function(f){return a==null?void 0:a({event:f,member:n,itemRef:u})},onMouseOver:function(f){return s==null?void 0:s({event:f,member:n,itemRef:u})},onMouseMove:function(f){return o==null?void 0:o({event:f,member:n,itemRef:u})},key:(n==null?void 0:n.userId)||qs(),ref:u},l({user:n}))},[l]);return h||m.createElement("div",{className:fn("sendbird-mention-suggest-list__user-item",r&&"focused"),onClick:function(f){return a==null?void 0:a({event:f,member:n,itemRef:u})},onMouseOver:function(f){return s==null?void 0:s({event:f,member:n,itemRef:u})},onMouseMove:function(f){return o==null?void 0:o({event:f,member:n,itemRef:u})},key:(n==null?void 0:n.userId)||qs(),ref:u},m.createElement(Ui,{className:"sendbird-mention-suggest-list__user-item__avatar",src:n==null?void 0:n.profileUrl,alt:"user-profile",width:"24px",height:"24px"}),m.createElement(Ce,{className:"sendbird-mention-suggest-list__user-item__nickname",testID:"sendbird-mention-suggest-list__user-item__nickname",type:be.SUBTITLE_2,color:n!=null&&n.nickname?ue.ONBACKGROUND_1:ue.ONBACKGROUND_3},(n==null?void 0:n.nickname)||(c==null?void 0:c.MENTION_NAME__NO_NAME)),m.createElement(Ce,{className:"sendbird-mention-suggest-list__user-item__user-id",testID:"sendbird-mention-suggest-list__user-item__user-id",type:be.SUBTITLE_2,color:ue.ONBACKGROUND_2},n==null?void 0:n.userId))}function Lfe(e,n,t,r){return vr(this,void 0,void 0,function(){return pr(this,function(i){return[2,n.members.sort(function(a,s){var o;return(o=a.nickname)===null||o===void 0?void 0:o.localeCompare(s.nickname)}).filter(function(a){var s;return((s=a.nickname)===null||s===void 0?void 0:s.toLowerCase().startsWith(r.toLowerCase()))&&a.userId!==e&&a.isActive}).slice(0,t)]})})}function kfe(e,n,t,r){return vr(this,void 0,void 0,function(){var i;return pr(this,function(a){return i=n.createMemberListQuery({limit:t+1,nicknameStartsWithFilter:r}),[2,i.next().then(function(s){return s.filter(function(o){return e!==(o==null?void 0:o.userId)}).slice(0,t)})]})})}var xfe=300,MI=function(e){var n,t,r,i=e.className,a=e.currentChannel,s=e.targetNickname,o=s===void 0?"":s,l=e.onUserItemClick,u=e.onFocusItemChange,c=e.onFetchUsers,h=e.renderUserMentionItem,f=e.inputEvent,p=e.ableAddMention,_=p===void 0?!0:p,g=e.maxMentionCount,C=g===void 0?fP:g,E=e.maxSuggestionCount,y=E===void 0?vP:E,S=en().state,I=S.config,w=S.stores,R=I.logger,A=((r=(t=(n=w==null?void 0:w.sdkStore)===null||n===void 0?void 0:n.sdk)===null||t===void 0?void 0:t.currentUser)===null||r===void 0?void 0:r.userId)||"",U=M.useRef(null),O=tn().stringSet,B=M.useState(null),F=B[0],P=B[1],G=M.useState(""),L=G[0],$=G[1],j=M.useState(""),X=j[0],K=j[1],Z=M.useState(null),te=Z[0],ne=Z[1],le=M.useState([]),Te=le[0],Ze=le[1];return M.useEffect(function(){clearTimeout(F??void 0),P(setTimeout(function(){$(o)},xfe))},[o]),M.useEffect(function(){if((f==null?void 0:f.key)===Va.Enter&&te&&Te.length>0&&(l==null||l(te)),(f==null?void 0:f.key)===Va.ArrowUp){var ce=Te.findIndex(function(ge){return(ge==null?void 0:ge.userId)===(te==null?void 0:te.userId)});0<ce&&(ne(Te[ce-1]),u==null||u(Te[ce-1]))}if((f==null?void 0:f.key)===Va.ArrowDown){var ce=Te.findIndex(function(Qe){return(Qe==null?void 0:Qe.userId)===(te==null?void 0:te.userId)});ce<Te.length-1&&(ne(Te[ce+1]),u==null||u(Te[ce+1]))}},[f]),M.useEffect(function(){if(!(X&&L.indexOf(X)===0&&Te.length===0)){if(a!=null&&a.isSuper&&!(a!=null&&a.createMemberListQuery)){R.warning("SuggestedMentionList: Creating member list query failed");return}var ce=a!=null&&a.isSuper?kfe:Lfe;ce(A,a,y,L.slice(up.length)).then(function(ge){ge.length<1?R.info("SuggestedMentionList: Fetched member list is empty"):(R.info("SuggestedMentionList: Fetching member list succeeded",{memberList:ge}),ne(ge[0])),K(L),c==null||c(ge),Ze(ge)}).catch(function(ge){ge&&R.error("SuggestedMentionList: Fetching member list failed",ge)})}},[a==null?void 0:a.url,a==null?void 0:a.members.map(function(ce){return ce.nickname}).join(),a==null?void 0:a.members.map(function(ce){return ce.isActive}).join(),L,y,A,Te.length,X]),!_&&Te.length===0?null:m.createElement("div",{className:fn("sendbird-mention-suggest-list",i),"data-testid":"sendbird-mention-suggest-list",key:"sendbird-mention-suggest-list",ref:U},_&&(Te==null?void 0:Te.map(function(ce){return m.createElement(Ufe,{key:(ce==null?void 0:ce.userId)||qs(),member:ce,isFocused:(ce==null?void 0:ce.userId)===(te==null?void 0:te.userId),parentScrollRef:U,onClick:function(ge){var Qe=ge.member;l==null||l(Qe)},onMouseOver:function(ge){var Qe=ge.member;ne(Qe)},renderUserMentionItem:h})})),!_&&m.createElement("div",{className:"sendbird-mention-suggest-list__notice-item"},m.createElement(ke,{className:"sendbird-mention-suggest-list__notice-item__icon",type:Ne.INFO,fillColor:Oe.ON_BACKGROUND_2,width:"20px",height:"20px"}),m.createElement(Ce,{className:"sendbird-mention-suggest-list__notice-item__text",type:be.SUBTITLE_2,color:ue.ONBACKGROUND_2},O.MENTION_COUNT__OVER_LIMIT.replace("%d",String(C)))))},oU=function(e,n){var t=M.useState(!1),r=t[0],i=t[1];M.useEffect(function(){r?e():i(!0)},n)},Pfe=function(e){var n=e.children,t=n===void 0?void 0:n,r=e.className,i=r===void 0?"":r,a=e.onVisibilityChange,s=e.separatorColor,o=s===void 0?La.PRIMARY:s,l=M.useRef(null),u=M.useCallback(function(c){a==null||a(c)},[a]);return M.useLayoutEffect(function(){var c=l.current;if(!(!c||!a)){var h=new IntersectionObserver(function(f){f.forEach(function(p){var _=p.isIntersecting;u(_)})},{threshold:1,rootMargin:"0px",root:null});return h.observe(c),function(){h.disconnect()}}},[u,a]),m.createElement("div",{ref:l,className:we(we([],Array.isArray(i)?i:[i],!0),["sendbird-separator"],!1).join(" ")},m.createElement("div",{className:["sendbird-separator__left","".concat($p(o),"--background-color")].join(" ")}),m.createElement("div",{className:"sendbird-separator__text"},t||m.createElement(Ce,{type:be.CAPTION_2,color:ue.PRIMARY},"New Messages")),m.createElement("div",{className:["sendbird-separator__right","".concat($p(o),"--background-color")].join(" ")}))},Ffe=function(e){var n,t,r=e.message,i=e.children,a=e.hasSeparator,s=e.hasNewMessageSeparator,o=e.chainTop,l=e.chainBottom,u=e.handleScroll,c=e.onNewMessageSeparatorVisibilityChange,h=e.scrollMessageOverflowToTop,f=e.channel,p=e.emojiContainer,_=e.editInputDisabled,g=e.shouldRenderSuggestedReplies,C=e.isReactionEnabled,E=e.replyType,y=e.threadReplySelectType,S=e.nicknamesMap,I=e.scrollToMessage,w=e.toggleReaction,R=e.setQuoteMessage,A=e.onQuoteMessageClick,U=e.onReplyInThreadClick,O=e.onBeforeDownloadFileMessage,B=e.sendUserMessage,F=e.updateUserMessage,P=e.resendMessage,G=e.deleteMessage,L=e.markAsUnread,$=e.setAnimatedMessageId,j=e.animatedMessageId,X=e.onMessageAnimated,K=e.usedInLegacy,Z=K===void 0?!0:K,te=e.newMessageIds,ne=e.setNewMessageIds,le=rc(e),Te=le.renderUserMentionItem,Ze=le.renderMessage,ce=le.renderMessageContent,ge=ce===void 0?function(Je){return m.createElement(Rfe,H({},Je))}:ce,Qe=le.renderSuggestedReplies,xe=Qe===void 0?function(Je){return m.createElement(Dfe,H({},Je))}:Qe,tt=le.renderCustomSeparator,ht=le.renderEditInput,bt=le.renderFileViewer,Rt=le.renderRemoveMessageModal,Ut=le.filterEmojiCategoryIds,lt=tn(),kt=lt.dateLocale,$t=lt.stringSet,mt=en().state,zt=mt.config,Tt=zt.userId,Pt=zt.isOnline,Xe=zt.userMention,je=zt.logger,Ve=zt.groupChannel,Ct=(Xe==null?void 0:Xe.maxMentionCount)||fP,ut=(Xe==null?void 0:Xe.maxSuggestionCount)||vP,qe=M.useState(!1),pt=qe[0],jt=qe[1],Ue=M.useState(!1),hn=Ue[0],un=Ue[1],vn=M.useState(!1),Xt=vn[0],Wt=vn[1],At=M.useState(!1),xt=At[0],on=At[1],xn=M.useState(""),st=xn[0],ct=xn[1],at=M.useState([]),Pe=at[0],he=at[1],He=M.useState([]),ot=He[0],nt=He[1],Zt=M.useState(null),dt=Zt[0],On=Zt[1],Yt=M.useState(null),rn=Yt[0],Pn=Yt[1],_n=M.useState([]),Tn=_n[0],qn=_n[1],Be=M.useRef(null),rt=M.useRef(null),et=Pt&&Ve.enableMention&&st.length>0&&!O0(f)&&!Gp(f),Nt=bI({ref:Be},{logger:je}),Et=(Nt==null?void 0:Nt.length)<Ct;M.useEffect(function(){he(Pe.filter(function(Je){var an=Je.userId,Ke=ot.indexOf(an);return Ke<0?!1:(ot.splice(Ke,1),!0)}))},[ot]),oU(function(){u==null||u()},[pt,(n=r==null?void 0:r.reactions)===null||n===void 0?void 0:n.length]),oU(function(){u==null||u(!0)},[r==null?void 0:r.updatedAt,r==null?void 0:r.message]);var Ot=M.useRef(g);M.useEffect(function(){Ot.current!==g?u==null||u():Ot.current=g},[g]),M.useLayoutEffect(function(){Z&&(u==null||u(!0))},[]),M.useLayoutEffect(function(){var Je=[];return j===r.messageId&&(rt!=null&&rt.current)?(Je.push(setTimeout(function(){on(!0)},500)),Je.push(setTimeout(function(){$(null),X==null||X()},1600))):on(!1),function(){Je.forEach(function(an){return clearTimeout(an)})}},[j,rt.current,r.messageId]),M.useLayoutEffect(function(){if((te==null?void 0:te.length)>0&&te.includes(r.messageId)){var Je=null;return Je=requestAnimationFrame(function(){h(rt,r),ne([])}),function(){Je!==null&&cancelAnimationFrame(Je)}}},[te]);var nn=M.useMemo(function(){var Je;return(Je=tt==null?void 0:tt({message:r}))!==null&&Je!==void 0?Je:null},[r,tt]),Nn=function(){if(i)return i;if(Ze){var Je=H(H({},e),{renderMessage:void 0});return Ze(Je)}return m.createElement(m.Fragment,null,ge({className:"sendbird-message-hoc__message-content",userId:Tt,scrollToMessage:I,channel:f,message:r,disabled:!Pt,chainTop:o,chainBottom:l,isReactionEnabled:C,replyType:E,threadReplySelectType:y,nicknamesMap:S,emojiContainer:p,showEdit:jt,showRemove:un,showFileViewer:Wt,resendMessage:P,deleteMessage:G,toggleReaction:w,setQuoteMessage:R,onReplyInThread:U,onQuoteMessageClick:A,onMessageHeightChange:u,onBeforeDownloadFileMessage:O,filterEmojiCategoryIds:Ut,markAsUnread:L}),g&&xe({replyOptions:nP(r),onSendMessage:B,type:Ve==null?void 0:Ve.suggestedRepliesDirection}),hn&&(Rt==null?void 0:Rt({message:r,onCancel:function(){return un(!1)}})),Xt&&bt({message:r,onCancel:function(){return Wt(!1)}}))};return pt&&(!((t=r==null?void 0:r.isUserMessage)===null||t===void 0)&&t.call(r))?(ht==null?void 0:ht())||m.createElement(m.Fragment,null,et&&m.createElement(MI,{currentChannel:f,targetNickname:st,inputEvent:dt??void 0,renderUserMentionItem:Te,onUserItemClick:function(Je){Je&&he(we(we([],Pe,!0),[Je],!1)),ct(""),Pn(Je),On(null)},onFocusItemChange:function(){On(null)},onFetchUsers:function(Je){qn(Je)},ableAddMention:Et,maxMentionCount:Ct,maxSuggestionCount:ut}),m.createElement(um,{isEdit:!0,channel:f,disabled:_,ref:Be,mentionSelectedUser:rn,isMentionEnabled:Ve.enableMention,message:r,onStartTyping:function(){var Je;(Je=f==null?void 0:f.startTyping)===null||Je===void 0||Je.call(f)},onUpdateMessage:function(Je){var an,Ke=Je.messageId,J=Je.message,Se=Je.mentionTemplate;F(Ke,{message:J,mentionedUsers:Pe,mentionedMessageTemplate:Se}),jt(!1),(an=f==null?void 0:f.endTyping)===null||an===void 0||an.call(f)},onCancelEdit:function(){var Je;ct(""),he([]),nt([]),qn([]),jt(!1),(Je=f==null?void 0:f.endTyping)===null||Je===void 0||Je.call(f)},onUserMentioned:function(Je){(rn==null?void 0:rn.userId)===(Je==null?void 0:Je.userId)&&(Pn(null),ct(""))},onMentionStringChange:function(Je){ct(Je)},onMentionedUserIdsUpdated:function(Je){nt(Je)},onKeyDown:function(Je){return et&&(Tn==null?void 0:Tn.length)>0&&(Je.key===Va.Enter&&Et||Je.key===Va.ArrowUp||Je.key===Va.ArrowDown)?(On(Je),!0):!1}})):m.createElement("div",{className:fn("sendbird-msg-hoc sendbird-msg--scroll-ref",xt&&"sendbird-msg-hoc__animated"),"data-testid":"sendbird-message-view",style:i||Ze?void 0:{marginBottom:"2px"},"data-sb-message-id":r.messageId,"data-sb-created-at":r.createdAt,ref:rt},a&&(nn||m.createElement(MP,null,m.createElement(Ce,{type:be.CAPTION_2,color:ue.ONBACKGROUND_2},_a(r.createdAt,$t.DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR,{locale:kt})))),s&&m.createElement(Pfe,{onVisibilityChange:c},m.createElement(Ce,{type:be.CAPTION_2,color:ue.PRIMARY},"New Messages")),Nn())},Bfe=function(e){var n=e.message,t=e.onCancel,r=e.deleteMessage,i=e.onDownloadClick,a=n.sender,s=n.type,o=n.url,l=n.name,u=l===void 0?"":l,c=n.threadInfo,h=a.profileUrl,f=a.nickname,p=a.userId,_=en().state,g=_.config;return Od.createPortal(m.createElement(Hfe,{profileUrl:h,nickname:f,type:s,url:o,name:u,onCancel:t,onDelete:function(){return r(n).then(function(){return t()})},isByMe:g.userId===p,disableDelete:c!=null&&c.replyCount?c.replyCount>0:!1,onDownloadClick:i}),document.getElementById(Nd))},Hfe=function(e){var n=e.profileUrl,t=e.nickname,r=e.name,i=e.type,a=e.url,s=e.isByMe,o=e.onCancel,l=e.onDelete,u=e.disableDelete,c=e.onDownloadClick;return m.createElement(qa,{onClose:o},m.createElement("div",{className:"sendbird-fileviewer","data-testid":"sendbird-fileviewer"},m.createElement("div",{className:"sendbird-fileviewer__header"},m.createElement("div",{className:"sendbird-fileviewer__header__left"},m.createElement("div",{className:"sendbird-fileviewer__header__left__avatar"},m.createElement(Ui,{height:"32px",width:"32px",src:n})),m.createElement("div",{className:"sendbird-fileviewer__header__left__text-container"},m.createElement(Ce,{className:"sendbird-fileviewer__header__left__filename",type:be.H_2,color:ue.ONBACKGROUND_1},r),m.createElement(Ce,{className:"sendbird-fileviewer__header__left__sender-name",type:be.BODY_1,color:ue.ONBACKGROUND_2},t))),m.createElement("div",{className:"sendbird-fileviewer__header__right"},Bp(i)&&m.createElement("div",{className:"sendbird-fileviewer__header__right__actions"},m.createElement("a",{className:"sendbird-fileviewer__header__right__actions__download",rel:"noopener noreferrer",href:a,target:"_blank",onClick:c},m.createElement(ke,{type:Ne.DOWNLOAD,fillColor:Oe.ON_BACKGROUND_1,height:"24px",width:"24px"})),l&&s&&m.createElement("div",{className:"sendbird-fileviewer__header__right__actions__delete"},m.createElement(ke,{className:u?"disabled":"",type:Ne.DELETE,fillColor:u?Oe.GRAY:Oe.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:function(){u||l()}}))),m.createElement("div",{className:"sendbird-fileviewer__header__right__actions__close"},m.createElement(ke,{type:Ne.CLOSE,fillColor:Oe.ON_BACKGROUND_1,height:"24px",width:"24px",onClick:o})))),m.createElement("div",{className:"sendbird-fileviewer__content"},Vl(i)&&m.createElement("video",{controls:!0,className:"sendbird-fileviewer__content__video"},m.createElement("source",{src:a,type:i})),So(i)&&m.createElement("img",{src:a,alt:r,className:"sendbird-fileviewer__content__img"}),!Bp(i)&&m.createElement("div",{className:"sendbird-fileviewer__content__unsupported"},m.createElement(Ce,{type:be.H_1,color:ue.ONBACKGROUND_1},kd.UI__FILE_VIEWER__UNSUPPORT)))))};function g5(e,n){return Es(n).when(ma,function(){var t=n.fileInfoList.length;return"Do you want to delete all ".concat(t," photos?")}).otherwise(function(){return e.MODAL__DELETE_MESSAGE__TITLE})}var Gfe=function(e){var n,t=e.onSubmit,r=t===void 0?function(){}:t,i=e.onCancel,a=e.message,s=e.deleteMessage,o=M.useContext(lr).stringSet;return m.createElement(qa,{type:br.DANGER,disabled:!((n=a==null?void 0:a.threadInfo)===null||n===void 0)&&n.replyCount?a.threadInfo.replyCount>0:void 0,onCancel:i,onSubmit:function(){(a.isUserMessage()||a.isFileMessage()||a.isMultipleFilesMessage())&&s(a).then(function(){r(),i()})},submitText:o.MESSAGE_MENU__DELETE,titleText:g5(o,a)})},$fe=function(e){var n=e.className,t=n===void 0?"":n,r=e.count,i=r===void 0?0:r,a=e.time,s=a===void 0?"":a,o=e.onClick,l=e.lastReadAt,u=M.useContext(lr),c=u.stringSet,h=u.dateLocale,f=M.useMemo(function(){var p,_;if(c.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON!=="on"){var g=((_=(p=s==null?void 0:s.toString)===null||p===void 0?void 0:p.call(s))===null||_===void 0?void 0:_.split(" "))||[];return g==null||g.splice(-2,0,c.CHANNEL__MESSAGE_LIST__NOTIFICATION__ON),g.join(" ")}else if(l)return _a(l,c.DATE_FORMAT__MESSAGE_LIST__NOTIFICATION__UNREAD_SINCE,{locale:h})},[s,l]);return m.createElement("div",{className:fn(i<1?"sendbird-notification--hide":"sendbird-notification",t),"data-testid":"sendbird-notification",onClick:o},m.createElement(Ce,{className:"sendbird-notification__text",testID:"sendbird-notification__text",color:ue.ONCONTENT_1,type:be.CAPTION_2},"".concat(i," "),c.CHANNEL__MESSAGE_LIST__NOTIFICATION__NEW_MESSAGE," ".concat(f)),m.createElement(ke,{width:"24px",height:"24px",type:Ne.CHEVRON_DOWN,fillColor:Oe.CONTENT}))},Vfe=function(e){var n=e.className,t=n===void 0?"":n,r=M.useContext(lr).stringSet;return m.createElement("div",{className:fn("sendbird-notification","sendbird-notification--frozen",t),"data-testid":"sendbird-notification"},m.createElement(Ce,{className:"sendbird-notification__text",testID:"sendbird-notification__text",type:be.CAPTION_2},r.CHANNEL_FROZEN))},zfe=function(){return m.createElement("div",{className:"typing-dots-container"},m.createElement("span",null),m.createElement("span",null),m.createElement("span",null))},E5=2,qp=28,lU=qp+E5*2,AT=24,J_=3,jfe=E5,qfe=function(e){var n=e.sources,t=e.max;return m.createElement(m.Fragment,null," ",n.slice(0,t).map(function(r,i){return m.createElement(Ui,{className:"sendbird-message-content__left__avatar multiple",src:r||"",key:"avatar_stack_item_".concat(r),width:"".concat(qp,"px"),height:"".concat(qp,"px"),zIndex:i,left:"".concat(i*AT-jfe,"px")})})," ")},Kfe=function(e){var n=e.typingMembers,t=n.length,r=Math.min(t,4),i=t-J_,a=(r-1)*(lU-AT),s=12;return m.createElement("div",{className:"sendbird-message-content__left incoming",style:{minWidth:r*lU-a+s}},m.createElement(qfe,{sources:n.map(function(o){return o.profileUrl}),max:J_}),i>0?m.createElement(Ui,{className:"sendbird-message-content__left__avatar multiple",width:"".concat(qp,"px"),height:"".concat(qp,"px"),zIndex:J_,left:"".concat(J_*AT,"px"),customDefaultComponent:function(o){var l=o.width,u=o.height;return m.createElement(yP,{width:l,height:u,text:"+".concat(i)})}}):null)},Wfe=function(e){var n=e.typingMembers,t=e.handleScroll;return M.useLayoutEffect(function(){t==null||t(!0)},[]),n.length===0?null:m.createElement("div",{className:"sendbird-message-content incoming",style:{marginBottom:"2px"}},m.createElement(Kfe,{typingMembers:n}),m.createElement("div",{className:"sendbird-message-content__middle"},m.createElement(zfe,null)))},y5=function(e,n,t,r,i,a){if(!i||i.channelType!=="group")return[eg(e,n,r),eg(n,t,r)];if(a==="THREAD"&&(n!=null&&n.threadInfo))return[!1,!1];var s=(n==null?void 0:n.sendingStatus)||"",o=s!=="pending"&&s!=="failed";return[eg(e,n,r,i)&&o,eg(n,t,r,i)&&o]},uU=function(e,n){return _a(e.createdAt,n.DATE_FORMAT__MESSAGE_CREATED_AT)},eg=function(e,n,t,r){var i,a;return e&&n&&e.messageType&&e.messageType!=="admin"&&n.messageType&&(n==null?void 0:n.messageType)!=="admin"&&"sender"in e&&"sender"in n&&e.createdAt&&n.createdAt&&e.sender.userId&&n.sender.userId?(e==null?void 0:e.sendingStatus)===(n==null?void 0:n.sendingStatus)&&((i=e==null?void 0:e.sender)===null||i===void 0?void 0:i.userId)===((a=n==null?void 0:n.sender)===null||a===void 0?void 0:a.userId)&&uU(e,t)===uU(n,t)&&(r?$3(r,e)===$3(r,n):!0):!1},cU=function(e){var n=e.allMessages,t=e.stringSet,r=e.isMessageGroupingEnabled,i=r===void 0?!0:r,a=e.currentIndex,s=a===void 0?0:a,o=e.currentMessage,l=e.currentChannel,u=l===void 0?null:l,c=e.replyType,h=c===void 0?"":c,f=e.firstUnreadMessageId,p=e.isUnreadMessageExistInChannel,_=n[s-1],g=n[s+1],C=i?y5(_,o,g,t,u,h):[!1,!1],E=C[0],y=C[1],S=_==null?void 0:_.createdAt,I=o.createdAt,w="sendingStatus"in o&&o.sendingStatus!=="succeeded",R=w?!1:!(S&&wE(I,S)),A=w||!(p!=null&&p.current)?!1:!cI(o)&&f===o.messageId;return{chainTop:E,chainBottom:y,hasSeparator:R,hasNewMessageSeparator:A}},b5=function(e,n,t){var r;try{var i=e.current,a=(r=i==null?void 0:i.querySelectorAll('[data-sb-created-at="'.concat(n,'"]')))===null||r===void 0?void 0:r[0];i&&a instanceof HTMLElement&&(i.scrollTop=a.offsetTop)}catch{}finally{t==null||t(!0)}},Jo=function(e,n,t){e===void 0&&(e=0);var r=10,i=e;if(i>r){t==null||t(!0);return}try{var a=(n==null?void 0:n.current)||document.querySelector(".sendbird-conversation__messages-padding");a&&(a.scrollTop=a.scrollHeight),t==null||t(!0)}catch{setTimeout(function(){Jo(i+1,n,t)},500*i)}},Yfe=function(e){var n=e==null?void 0:e.myRole;return n==="operator"},C5=function(e){var n=e==null?void 0:e.isFrozen;return n&&!Yfe(e)},S5=function(e){var n=e==null?void 0:e.myMutedState;return n==="muted"},Qfe=function(e){for(var n=e.emojiCategories,t=n===void 0?[]:n,r=new Map,i=0;i<t.length;i+=1)for(var a=t[i].emojis,s=0;s<a.length;s+=1){var o=a[s],l=o.key,u=o.url;r.set(l,u)}return r},Xfe=function(e){e===void 0&&(e=[]);for(var n=new Map,t=0;t<e.length;t+=1){var r=e[t],i=r.userId,a=r.nickname;n.set(i,a)}return n},Zfe=function(e,n){var t=e.map(function(r){return[r[n],r]});return Array.from(new Map(t).values())},Jfe=function(e){return Zfe(e,"messageId")},eve=function(e){return e.sort(function(n,t){return n.createdAt-t.createdAt})},tve=function(e,n){var t=e[e.length-1],r=n[0];if((t==null?void 0:t.createdAt)<(r==null?void 0:r.createdAt))return we(we([],e,!0),n,!0);var i=we(we([],e,!0),n,!0),a=Jfe(i);return eve(a)},dU=function(e,n){if("sendingStatus"in n&&(n.sendingStatus===sn.SUCCEEDED||n.sendingStatus===sn.PENDING)){var t=e.map(function(i){return"sendingStatus"in i&&i.sendingStatus?i.sendingStatus:i.isAdminMessage()?sn.SUCCEEDED:null}).lastIndexOf(sn.SUCCEEDED);if(t+1<e.length){var r=we([],e,!0);return r.splice(t+1,0,n),r}}return we(we([],e,!0),[n],!1)},xl=function(e,n,t){return Math.abs(e-n)<=t};M.forwardRef(function(e,n){var t=e.messages,r=e.renderMessage,i=e.scrollPositionRef,a=e.scrollDistanceFromBottomRef,s=e.onLoadPrevious,o=e.onLoadNext,l=e.loadThreshold,u=l===void 0?.05:l,c=e.typingIndicator,h=e.onScrollPosition,f=h===void 0?Mn:h,p=e.initDeps,_=m.useRef(!1),g=m.useRef(),C=M.useRef(0);M.useLayoutEffect(function(){n.current&&(n.current.scrollTop=n.current.scrollHeight)},p),M.useLayoutEffect(function(){n.current&&(g.current==="top"&&(n.current.scrollTop=n.current.scrollHeight-i.current),g.current==="bottom"&&(n.current.scrollTop=C.current),g.current=void 0)},[n.current,t.length]);var E=M.useCallback(function(){return vr(void 0,void 0,void 0,function(){var y,S;return pr(this,function(I){switch(I.label){case 0:return n.current?(y=n.current,f(nve(y)),i.current=y.scrollHeight-y.scrollTop,a.current=i.current-y.clientHeight,C.current=y.scrollTop,_.current?[2]:(S=y.clientHeight*Math.min(Math.max(0,u),1),y.scrollTop<=S?(_.current=!0,g.current="top",[4,s()]):[3,2])):[2];case 1:return I.sent(),_.current=!1,[3,5];case 2:return y.scrollHeight-y.scrollTop-y.clientHeight<=S?(_.current=!0,g.current="bottom",[4,o()]):[3,4];case 3:return I.sent(),_.current=!1,[3,5];case 4:g.current=void 0,I.label=5;case 5:return[2]}})})},[t.length]);return m.createElement("div",{className:"sendbird-conversation__scroll-container"},m.createElement("div",{className:"sendbird-conversation__padding"}),m.createElement("div",{ref:n,className:"sendbird-conversation__messages-padding","data-testid":"sendbird-message-list-container",onScroll:E},t.map(function(y,S){return r({message:y,index:S})}),c))});function nve(e){return xl(e.scrollTop,0,zo)?"top":xl(e.scrollHeight,e.clientHeight+e.scrollTop,zo)?"bottom":"middle"}var rve=function(e){return m.createElement(MI,H({},e))},tg="sendbird-quote_message_input__avatar";function ive(e){var n,t=e.message;if(!aa(t)&&!ma(t)||Zo(t))return m.createElement(m.Fragment,null);var r=YP(t);return r||(J6(t)||Hh(t)?r=P0(t):ma(t)&&Sle((n=t.fileInfoList)===null||n===void 0?void 0:n[0])&&(r=t.fileInfoList[0].url)),Hh(t)&&r?m.createElement("div",{className:tg},m.createElement("video",{style:{width:"44px",height:"44px"},src:r})):(ic(t)||ma(t))&&r?m.createElement(wr,{className:tg,url:r,alt:x0(t),width:"44px",height:"44px",fixedSize:!0}):Cle(t)?m.createElement("div",{className:tg},m.createElement(ke,{type:Ne.FILE_AUDIO,fillColor:Oe.ON_BACKGROUND_2,width:"24px",height:"24px"})):m.createElement("div",{className:tg},m.createElement(ke,{type:Ne.FILE_DOCUMENT,fillColor:Oe.ON_BACKGROUND_2,width:"24px",height:"24px"}))}function ave(e){var n=e.className,t=e.replyingMessage,r=e.onClose,i=M.useContext(lr).stringSet,a=t,s=t==null?void 0:t.sender,o=(aa(t)||ma(t))&&!Zo(t);return m.createElement("div",{className:Ia(["sendbird-quote_message_input",n??""])},o&&m.createElement(ive,{message:a}),m.createElement("div",{className:"sendbird-quote_message_input__body",style:{width:"calc(100% - ".concat(o?"164px":"120px",")"),left:o?"92px":"40px"}},m.createElement(Ce,{className:"sendbird-quote_message_input__body__sender-name",type:be.CAPTION_1,color:ue.ONBACKGROUND_1},"".concat(i.QUOTE_MESSAGE_INPUT__REPLY_TO," ").concat(s&&s.nickname?s.nickname:i.NO_NAME)),m.createElement(Ce,{className:"sendbird-quote_message_input__body__message-content",type:be.BODY_2,color:ue.ONBACKGROUND_3},J6(a)&&!mT(a)&&i.QUOTE_MESSAGE_INPUT__FILE_TYPE_IMAGE,Hh(a)&&i.QUOTE_MESSAGE_INPUT__FILE_TYPE__VIDEO,mT(a)&&i.QUOTE_MESSAGE_INPUT__FILE_TYPE_GIF,Ea(t)&&t.message,fI(t)===Bo.FILE&&WP(a),ma(t)&&"".concat(a.fileInfoList.length," Photos"),Zo(t)&&i.VOICE_MESSAGE)),m.createElement(ke,{className:"sendbird-quote_message_input__close-button",type:Ne.CLOSE,fillColor:Oe.ON_BACKGROUND_2,width:"24px",height:"24px",onClick:function(){return r==null?void 0:r(t)}}))}var Kc={PREPARING:"PREPARING",READY_TO_RECORD:"READY_TO_RECORD",RECORDING:"RECORDING",COMPLETED:"COMPLETED"},sve=function(e){var n=e.onRecordingStarted,t=n===void 0?Mn:n,r=e.onRecordingEnded,i=r===void 0?Mn:r,a=en().state,s=a.config,o=s.voiceRecord,l=o==null?void 0:o.maxRecordingTime,u=L6(),c=u.isRecordable,h=M.useState(null),f=h[0],p=h[1],_=M.useState(Kc.PREPARING),g=_[0],C=_[1];M.useEffect(function(){c&&g===Kc.PREPARING&&C(Kc.READY_TO_RECORD)},[c]);var E=M.useCallback(function(){u==null||u.start({onRecordingStarted:function(){C(Kc.RECORDING),t(),U()},onRecordingEnded:function(B){C(Kc.COMPLETED),i(B),p(B),O()}})},[t,i]),y=M.useCallback(function(){u==null||u.stop(),O()},[u]),S=M.useCallback(function(){y(),p(null)},[u]),I=M.useState(0),w=I[0],R=I[1],A=M.useRef(null);function U(){O(),R(0),A.current=setInterval(function(){R(function(B){var F=B+100;return F>l&&O(),F})},100)}function O(){A.current&&(clearInterval(A.current),A.current=null)}return M.useEffect(function(){w>l&&y()},[w,l,y]),{start:E,stop:y,cancel:S,recordingStatus:g,recordingTime:w,recordedFile:f,recordingLimit:l}},qr={READY_TO_RECORD:"READY_TO_RECORD",RECORDING:"RECORDING",READY_TO_PLAY:"READY_TO_PLAY",PLAYING:"PLAYING"},ove=function(e){var n=e.inputState;switch(n){case qr.READY_TO_RECORD:return m.createElement("div",{className:"sendbird-controler-icon record-icon"});case qr.RECORDING:return m.createElement("div",{className:"sendbird-controler-icon stop-icon"});case qr.READY_TO_PLAY:return m.createElement(ke,{className:"sendbird-controler-icon play-icon",width:"20px",height:"20px",type:Ne.PLAY,fillColor:Oe.ON_BACKGROUND_1});case qr.PLAYING:return m.createElement("div",{className:"sendbird-controler-icon pause-icon"},m.createElement("div",{className:"sendbird-controler-icon pause-icon-inner"}),m.createElement("div",{className:"sendbird-controler-icon pause-icon-inner"}));default:return m.createElement(m.Fragment,null)}},lve=function(e){var n=e.minRecordTime,t=n===void 0?ZN:n,r=e.maximumValue,i=e.currentValue,a=i===void 0?0:i,s=e.currentType,o=e.onCancelClick,l=e.onControlClick,u=e.onSubmitClick,c=e.renderCancelButton,h=e.renderControlButton,f=e.renderSubmitButton,p=M.useState(0),_=p[0],g=p[1],C=M.useMemo(function(){return s===qr.READY_TO_RECORD},[s]),E=M.useMemo(function(){return s===qr.RECORDING},[s]),y=M.useMemo(function(){return s===qr.READY_TO_RECORD||s===qr.RECORDING?t>a:!1},[s,t,a]),S=M.useMemo(function(){return s===qr.READY_TO_PLAY||s===qr.PLAYING},[s]),I=tn().stringSet,w=function(){var U=Date.now();U-_>Wb&&(o==null||o(),g(U))},R=function(){var U=Date.now();U-_>Wb&&(l==null||l(s),g(U))},A=function(){var U=Date.now();U-_>Wb&&(y||u==null||u(),g(U))};return m.createElement("div",{className:"sendbird-voice-message-input"},m.createElement("div",{className:"sendbird-voice-message-input__indicator"},m.createElement("div",{className:"sendbird-voice-message-input__indicator__progress-bar"},m.createElement(ZP,{className:"sendbird-voice-message-input__indicator__progress-bar__bar",disabled:C,maxSize:r,currentSize:a})),E?m.createElement("div",{className:"sendbird-voice-message-input__indicator__on-rec"}):null,m.createElement(e5,{className:"sendbird-voice-message-input__indicator__playback-time",time:S?r-a:a,labelColor:C?ue.ONBACKGROUND_4:ue.ONCONTENT_1})),m.createElement("div",{className:"sendbird-voice-message-input__controler"},(c==null?void 0:c())||m.createElement(Ef,{className:"sendbird-voice-message-input__controler__cancel",onClick:w,disableUnderline:!0},m.createElement(Ce,{type:be.BUTTON_1,color:ue.PRIMARY},I.BUTTON__CANCEL)),(h==null?void 0:h(s))||m.createElement("div",{className:"sendbird-voice-message-input__controler__main",onClick:R},m.createElement(ove,{inputState:s})),(f==null?void 0:f())||m.createElement("div",{className:fn("sendbird-voice-message-input__controler__submit",y&&"voice-message--disabled"),onClick:A},m.createElement(ke,{width:"19px",height:"19px",type:Ne.SEND,fillColor:y?Oe.ON_BACKGROUND_4:Oe.CONTENT}))))},uve=function(e){var n=e.imageFile,t=e.compressionRate,r=e.resizingWidth,i=e.resizingHeight,a=e.outputFormat,s=document.createElement("img");return new Promise(function(o,l){s.src=URL.createObjectURL(n),s.onerror=l,s.onload=function(){URL.revokeObjectURL(s.src);var u=document.createElement("canvas"),c=s.width,h=s.height,f=!r||r>c?c:r,p=!i||i>h?h:i,_=c/f,g=h/p;_>g?p=h/(r?_:1):g>_&&(f=c/(i?g:1)),u.width=f,u.height=p;var C=u.getContext("2d");if(!C){l(new Error("Failed to get canvas 2d context"));return}C.drawImage(s,0,0,f,p);var E=a==="preserve"?n.type:"image/".concat(a),y=E.split("/").pop(),S=n.name.lastIndexOf("."),I="".concat(S===-1?n.name:n.name.substring(0,S),".").concat(y);C.canvas.toBlob(function(w){if(w){var R=new File([w],I,{type:E});o(R)}else l(new Error("Failed to compress image"))},E,t)}})},T5=function(e){return vr(void 0,[e],void 0,function(n){var t,r,i,a,s,o,l=n.files,u=n.logger,c=n.imageCompression;return pr(this,function(h){switch(h.label){case 0:return t=c.compressionRate,r=c.outputFormat,i=r===void 0?"preserve":r,a=c.resizingWidth?sf(c.resizingWidth):void 0,s=c.resizingHeight?sf(c.resizingHeight):void 0,o={failedIndexes:[],compressedFiles:[]},Array.isArray(l)&&l.length>0?!t||t<0||1<t?(u==null||u.warning("utils - compressImages: The compressionRate is not acceptable.",t),[2,o]):[4,Promise.all(l.map(function(f,p){return vr(void 0,void 0,void 0,function(){var _,g;return pr(this,function(C){switch(C.label){case 0:if(!(f.type==="image/jpg"||f.type==="image/png"||f.type==="image/jpeg"))return u==null||u.warning("utils - compressImages: The fileType is not compressible.",{file:f,index:p}),o.failedIndexes.push(p),o.compressedFiles.push(f),[2];C.label=1;case 1:return C.trys.push([1,3,,4]),[4,uve({imageFile:f,compressionRate:t,resizingWidth:a,resizingHeight:s,outputFormat:i})];case 2:return _=C.sent(),o.compressedFiles.push(_),[3,4];case 3:return g=C.sent(),o.compressedFiles.push(f),o.failedIndexes.push(p),u==null||u.warning("utils - compressImages: Failed to compress image file",{file:f,err:g}),[3,4];case 4:return[2]}})})}))]:(u==null||u.warning("utils - compressImages: There are no files.",l),[2,o]);case 1:return h.sent(),u==null||u.info("utils - compressImages: Finished compressing images",o),[2,o]}})})},N5=function(e){var n=e.channel,t=e.onCancelClick,r=e.onSubmitClick,i=M.useRef(qs()).current,a=M.useState(null),s=a[0],o=a[1],l=M.useState(qr.READY_TO_RECORD),u=l[0],c=l[1],h=M.useState(!1),f=h[0],p=h[1],_=M.useState(!1),g=_[0],C=_[1],E=M.useState(!1),y=E[0],S=E[1],I=tn().stringSet,w=en().state,R=w.config,A=sve({onRecordingStarted:function(){c(qr.RECORDING)},onRecordingEnded:function(te){o(te)}}),U=A.start,O=A.stop,B=A.cancel,F=A.recordingTime,P=A.recordingStatus,G=A.recordingLimit,L=JP({channelUrl:n==null?void 0:n.url,key:i,audioFile:s??void 0}),$=L.play,j=L.pause,X=L.playbackTime,K=L.playingStatus,Z=L.stop;return M.useEffect(function(){O0(n)||Gp(n)?C(!0):C(!1)},[n==null?void 0:n.myRole,n==null?void 0:n.isFrozen,n==null?void 0:n.myMutedState]),M.useEffect(function(){f&&s&&(r==null||r(s,F),p(!1),o(null))},[f,s,F]),M.useEffect(function(){s&&(F<R.voiceRecord.minRecordingTime?(c(qr.READY_TO_RECORD),o(null)):K===vo.PLAYING?c(qr.PLAYING):c(qr.READY_TO_PLAY))},[s,F,K]),m.createElement("div",{className:"sendbird-voice-message-input-wrapper"},m.createElement(lve,{currentValue:P===Kc.COMPLETED?X:F,maximumValue:P===Kc.COMPLETED?F:G,currentType:u,onCancelClick:function(){t==null||t(),B(),Z()},onSubmitClick:function(){g?(S(!0),c(qr.READY_TO_RECORD)):(O(),j(),p(!0))},onControlClick:function(te){switch(te){case qr.READY_TO_RECORD:{Z(),U();break}case qr.RECORDING:{F>=R.voiceRecord.minRecordingTime&&!g?O():g?(B(),S(!0),c(qr.READY_TO_RECORD)):(B(),c(qr.READY_TO_RECORD));break}case qr.READY_TO_PLAY:{$();break}case qr.PLAYING:{j();break}}}}),y&&m.createElement(qa,{className:"sendbird-voice-message-input-wrapper-alert",titleText:Gp(n)?I.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_MUTED:I.MODAL__VOICE_MESSAGE_INPUT_DISABLED__TITLE_FROZEN,hideFooter:!0,isCloseOnClickOutside:!0,onClose:function(){S(!1),t==null||t()}},m.createElement("div",{className:"sendbird-voice-message-input-wrapper-alert__body"},m.createElement(go,{className:"sendbird-voice-message-input-wrapper-alert__body__ok-button",type:br.PRIMARY,size:Qu.BIG,onClick:function(){S(!1),t==null||t()}},I.BUTTON__OK))))},cve=function(e,n){var t=e.sendFileMessage,r=e.sendMultipleFilesMessage,i=e.quoteMessage,a=n.logger,s=tn().stringSet,o=en().state,l=o.config,u=l.imageCompression,c=l==null?void 0:l.uikitUploadSizeLimit,h=l==null?void 0:l.uikitMultipleFilesMessageLimit,f=sI().openModal;return M.useCallback(function(p){return vr(void 0,void 0,void 0,function(){var _,g,C,E,y,S;return pr(this,function(I){switch(I.label){case 0:return p.length===0?(a.warning("Channel|useHandleUploadFiles: given file list is empty.",{files:p}),[2]):p.length>h?(a.info("Channel|useHandleUploadFiles: Cannot upload files more than ".concat(h)),f({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT.replace("%d","".concat(c)),hideFooter:!0},childElement:function(w){var R=w.closeModal;return m.createElement(af,{type:br.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:R,onSubmit:R})}}),[2]):p.some(function(w){return w.size>c})?(a.info("Channel|useHandleUploadFiles: Cannot upload file size exceeding ".concat(c)),_=1024*1024,f({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT.replace("%d","".concat(Math.floor(c/_))),hideFooter:!0},childElement:function(w){var R=w.closeModal;return m.createElement(af,{type:br.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:R,onSubmit:R})}}),[2]):[4,T5({files:p,imageCompression:u,logger:a})];case 1:return g=I.sent().compressedFiles,C=g,C.length===1?(a.info("Channel|useHandleUploadFiles: sending one file."),E=C[0],[2,t({file:E,parentMessageId:i==null?void 0:i.messageId})]):C.length>1?(a.info("Channel|useHandleUploadFiles: sending multiple files."),y=[],S=[],C.forEach(function(w){So(w.type)?y.push(w):S.push(w)}),[2,S.reduce(function(w,R){return w.then(function(){return t({file:R,parentMessageId:i==null?void 0:i.messageId})})},function(){return y.length===0?Promise.resolve():y.length===1?t({file:y[0]}):r({fileInfoList:y.map(function(w){return{file:w,fileName:w.name,fileSize:w.size,mimeType:w.type}}),parentMessageId:i==null?void 0:i.messageId})}())]):[2]}})})},[t,r,i])},dve=m.forwardRef(function(e,n){var t,r=e.currentChannel,i=e.messages,a=e.loading,s=e.quoteMessage,o=e.setQuoteMessage,l=e.messageInputRef,u=e.sendUserMessage,c=e.sendFileMessage,h=e.sendVoiceMessage,f=e.sendMultipleFilesMessage,p=e.renderUserMentionItem,_=e.renderFileUploadIcon,g=e.renderVoiceMessageIcon,C=e.renderSendMessageIcon,E=e.acceptableMimeTypes,y=e.disabled,S=tn().stringSet,I=si().isMobile,w=en().state,R=w.stores,A=w.config,U=A.isOnline,O=A.userMention,B=A.logger,F=A.groupChannel,P=R.sdkStore.sdk,G=O.maxMentionCount,L=O.maxSuggestionCount,$=r==null?void 0:r.isBroadcast,j=(r==null?void 0:r.myRole)==="operator",X=(t=e.isMultipleFilesMessageEnabled)!==null&&t!==void 0?t:A.isMultipleFilesMessageEnabled,K=F.enableMention,Z=F.enableVoiceMessage,te=M.useState(""),ne=te[0],le=te[1],Te=M.useState([]),Ze=Te[0],ce=Te[1],ge=M.useState([]),Qe=ge[0],xe=ge[1],tt=M.useState(null),ht=tt[0],bt=tt[1],Rt=M.useState([]),Ut=Rt[0],lt=Rt[1],kt=M.useState(null),$t=kt[0],mt=kt[1],zt=M.useState(!1),Tt=zt[0],Pt=zt[1],Xe=a||!r||!P||!P.isCacheEnabled&&!U||O0(r)||Gp(r)||K3(r,A.groupChannel.enableSuggestedReplies)||W3(i,A.groupChannel.enableFormTypeMessage)||y,je=!Xe&&K&&ne.length>0&&!$,Ve=bI({ref:n||l},{logger:B}),Ct=(Ve==null?void 0:Ve.length)<G;M.useEffect(function(){le(""),ce([]),xe([]),bt(null),lt([]),mt(null),Pt(!1)},[r==null?void 0:r.url]),M.useEffect(function(){ce(Ze.filter(function(qe){var pt=qe.userId,jt=Qe.indexOf(pt);return jt<0?!1:(Qe.splice(jt,1),!0)}))},[Qe]);var ut=cve({sendFileMessage:c,sendMultipleFilesMessage:f,quoteMessage:s??void 0},{logger:B});return $&&!j?null:m.createElement("div",{className:Tt?"sendbird-message-input-wrapper--voice-message":"sendbird-message-input-wrapper"},je&&m.createElement(rve,{currentChannel:r,targetNickname:ne,inputEvent:$t??void 0,renderUserMentionItem:p,onUserItemClick:function(qe){qe&&ce(we(we([],Ze,!0),[qe],!1)),le(""),bt(qe),mt(null)},onFocusItemChange:function(){mt(null)},onFetchUsers:function(qe){lt(qe)},ableAddMention:Ct,maxMentionCount:G,maxSuggestionCount:L}),s&&m.createElement("div",{className:"sendbird-message-input-wrapper__quote-message-input"},m.createElement(ave,{replyingMessage:s,onClose:function(){o(null)}})),Tt?m.createElement(N5,{channel:r??void 0,onSubmitClick:function(qe,pt){h({file:qe,parentMessageId:s==null?void 0:s.messageId},pt),o(null),Pt(!1)},onCancelClick:function(){Pt(!1)}}):m.createElement(um,{className:"sendbird-message-input-wrapper__message-input",channel:r,channelUrl:r==null?void 0:r.url,isMobile:I,acceptableMimeTypes:E,mentionSelectedUser:ht,isMentionEnabled:K,isVoiceMessageEnabled:Z,isSelectingMultipleFilesEnabled:X,onVoiceMessageIconClick:function(){Pt(!0)},setMentionedUsers:ce,placeholder:s&&S.MESSAGE_INPUT__QUOTE_REPLY__PLACE_HOLDER||O0(r)&&S.MESSAGE_INPUT__PLACE_HOLDER__FROZEN||Gp(r)&&(I?S.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT:S.MESSAGE_INPUT__PLACE_HOLDER__MUTED)||K3(r,A.groupChannel.enableSuggestedReplies)&&S.MESSAGE_INPUT__PLACE_HOLDER__SUGGESTED_REPLIES||W3(i,A.groupChannel.enableFormTypeMessage)&&S.MESSAGE_INPUT__PLACE_HOLDER__MESSAGE_FORM||y&&S.MESSAGE_INPUT__PLACE_HOLDER__DISABLED||void 0,ref:n||l,disabled:Xe,renderFileUploadIcon:_,renderSendMessageIcon:C,renderVoiceMessageIcon:g,onStartTyping:function(){r==null||r.startTyping()},onSendMessage:function(qe){var pt,jt=qe.message,Ue=qe.mentionTemplate;u({message:jt,mentionedUsers:Ze,mentionedMessageTemplate:Ue,parentMessageId:s==null?void 0:s.messageId}),le(""),ce([]),o(null),(pt=r==null?void 0:r.endTyping)===null||pt===void 0||pt.call(r)},onFileUpload:function(qe){ut(qe),o(null)},onUserMentioned:function(qe){(ht==null?void 0:ht.userId)===(qe==null?void 0:qe.userId)&&(bt(null),le(""))},onMentionStringChange:function(qe){le(qe)},onMentionedUserIdsUpdated:function(qe){xe(qe)},onKeyDown:function(qe){return je&&(Ut==null?void 0:Ut.length)>0&&(qe.key===Va.Enter&&Ct||qe.key===Va.ArrowUp||qe.key===Va.ArrowDown)?(mt(qe),!0):!1}}))}),hve=function(e){var n=e.renderTitle,t=e.renderIconButton,r=e.onEdit,i=e.allowProfileEdit,a=e.renderLeft,s=e.renderMiddle,o=e.renderRight,l=en().state.stores.userStore.user,u=tn().stringSet,c=s??n;return m.createElement(pl,{className:fn("sendbird-channel-header",i&&"sendbird-channel-header--allow-edit"),renderLeft:a,renderMiddle:function(){var h;return(h=c==null?void 0:c())!==null&&h!==void 0?h:m.createElement("div",{className:"sendbird-channel-header__title",role:"button",onClick:function(){r==null||r()},onKeyDown:function(){r==null||r()},tabIndex:0},m.createElement("div",{className:"sendbird-channel-header__title__left"},m.createElement(Ui,{width:"32px",height:"32px",src:l.profileUrl,alt:l.nickname})),m.createElement("div",{className:"sendbird-channel-header__title__right"},m.createElement(Ce,{className:"sendbird-channel-header__title__right__name",type:be.SUBTITLE_2,color:ue.ONBACKGROUND_1},l.nickname||u.NO_NAME),m.createElement(Ce,{className:"sendbird-channel-header__title__right__user-id",type:be.BODY_2,color:ue.ONBACKGROUND_2},l.userId)))},renderRight:o??t})},I5=m.createContext(null),fve=function(e){var n=e.children,t=Hk(e,["children"]);return m.createElement(I5.Provider,{value:t},n)},vve=function(){var e=m.useContext(I5);if(!e)throw new Error("EditUserProfileContext not found. Use within the EditUserProfile module.");return e},pve=function(e){var n,t=e.formRef,r=e.inputRef,i=e.onThemeChange,a=e.setProfileImage,s=en().state,o=s.stores,l=s.config,u=l.theme,c=l.setCurrentTheme,h=(n=o.userStore)===null||n===void 0?void 0:n.user,f=tn().stringSet,p=M.useState(null),_=p[0],g=p[1],C=M.useRef(null);return m.createElement("form",{className:"sendbird-edit-user-profile",ref:t,onSubmit:function(E){E.preventDefault()}},m.createElement("section",{className:"sendbird-edit-user-profile__img"},m.createElement(Z_,null,f.EDIT_PROFILE__IMAGE_LABEL),m.createElement("div",{className:"sendbird-edit-user-profile__img__avatar"},m.createElement(Ui,{width:"80px",height:"80px",src:_||(h==null?void 0:h.profileUrl)})),m.createElement("input",{ref:C,type:"file",accept:"image/gif, image/jpeg, image/png",style:{display:"none"},onChange:function(E){E.target.files&&(g(URL.createObjectURL(E.target.files[0])),a(E.target.files[0])),C.current&&(C.current.value="")}}),m.createElement(Ef,{className:"sendbird-edit-user-profile__img__avatar-button",disableUnderline:!0,onClick:function(){var E;return(E=C.current)===null||E===void 0?void 0:E.click()}},m.createElement(Ce,{type:be.BUTTON_1,color:ue.PRIMARY},f.EDIT_PROFILE__IMAGE_UPLOAD))),m.createElement("section",{className:"sendbird-edit-user-profile__name"},m.createElement(Z_,null,f.EDIT_PROFILE__NICKNAME_LABEL),m.createElement(IT,{required:(h==null?void 0:h.nickname)!=="",name:"sendbird-edit-user-profile__name__input",ref:r,value:h==null?void 0:h.nickname,placeHolder:f.EDIT_PROFILE__NICKNAME_PLACEHOLDER})),m.createElement("section",{className:"sendbird-edit-user-profile__userid"},m.createElement(Z_,null,f.EDIT_PROFILE__USERID_LABEL),m.createElement(IT,{disabled:!0,name:"sendbird-edit-user-profile__userid__input",value:h==null?void 0:h.userId})),m.createElement("section",{className:"sendbird-edit-user-profile__theme"},m.createElement(Z_,null,f.EDIT_PROFILE__THEME_LABEL),m.createElement("div",{className:"sendbird-edit-user-profile__theme__theme-icon"},u==="dark"?m.createElement(ke,{onClick:function(){c("light"),i==null||i("light")},type:Ne.TOGGLE_ON,width:44,height:24}):m.createElement(ke,{onClick:function(){c("dark"),i==null||i("dark")},type:Ne.TOGGLE_OFF,width:44,height:24}))))},mve=function(e){var n,t,r,i=e.globalContext,a=e.formRef,s=e.inputRef,o=e.profileImage,l=e.onEditProfile,u=e.updateUserInfo,c=i.stores,h=c.sdkStore.sdk,f=c.userStore.user;if((f==null?void 0:f.nickname)!==""&&!s.current.value){(t=(n=a.current).reportValidity)===null||t===void 0||t.call(n);return}h==null||h.updateCurrentUserInfo({nickname:(r=s==null?void 0:s.current)===null||r===void 0?void 0:r.value,profileImage:o??void 0}).then(function(p){u(p),l==null||l(p)})},_ve=function(e){var n=e.onEditProfile,t=en(),r=t.state,i=t.actions,a=M.useRef(null),s=M.useRef(null),o=M.useState(null),l=o[0],u=o[1],c=function(){mve({globalContext:r,formRef:s,inputRef:a,profileImage:l,onEditProfile:n,updateUserInfo:i.updateUserInfo})};return{formRef:s,inputRef:a,updateUserInfo:c,profileImage:l,setProfileImage:u}},gve=function(){var e=vve(),n=e.onEditProfile,t=e.onCancel,r=e.onThemeChange,i=M.useContext(lr).stringSet,a=_ve({onEditProfile:n}),s=a.formRef,o=a.inputRef,l=a.updateUserInfo,u=a.setProfileImage;return m.createElement(qa,{titleText:i.EDIT_PROFILE__TITLE,submitText:i.BUTTON__SAVE,type:br.PRIMARY,onCancel:t,isFullScreenOnMobile:!0,onSubmit:l},m.createElement(pve,{formRef:s,inputRef:o,setProfileImage:u,onThemeChange:r}))},Eve=function(e){var n=e.onEditProfile,t=e.onCancel,r=e.onThemeChange;return m.createElement(fve,{onEditProfile:n,onCancel:t,onThemeChange:r},m.createElement(gve,null))};function AI(e,n,t){t===void 0&&(t={leading:!0,trailing:!1});var r=M.useRef(null),i=M.useRef(null);return M.useEffect(function(){return function(){r.current&&clearTimeout(r.current)}},[]),zu(function(){for(var a=[],s=0;s<arguments.length;s++)a[s]=arguments[s];if(r.current){i.current=a;return}t.leading?e.apply(void 0,a):i.current=a;var o=function(){t.trailing&&i.current?(e.apply(void 0,i.current),i.current=null,r.current=setTimeout(o,n)):r.current=null};r.current=setTimeout(o,n)})}var yve=100;function M5(e){var n=e.onReachedTop,t=e.onReachedBottom,r=e.onInBetween,i=zu(function(a){if(a!=null&&a.target){var s=a.target,o=s.scrollTop,l=s.scrollHeight,u=s.clientHeight,c={distanceFromBottom:l-o-u};n&&xl(o,0,zo)?n(c):t&&xl(l,u+o,zo)?t(c):r&&r(c)}});return AI(i,yve,{trailing:!0})}var bve=function(e){var n=e.channel,t=e.onSubmit,r=e.onCancel,i=en().state.config,a=i.logger,s=i.isOnline,o=tn().stringSet;if(n)return m.createElement(qa,{disabled:!s,onCancel:r,onSubmit:function(){a.info("LeaveGroupChannel: Leaving channel",n),n.leave().then(function(){a.info("LeaveGroupChannel: Leaving channel successful!",n),t==null||t()})},submitText:o.MODAL__LEAVE_CHANNEL__FOOTER,titleText:o.MODAL__LEAVE_CHANNEL__TITLE})};function Cve(e){var n=e.channel,t=e.disabled,r=t===void 0?!1:t,i=e.onLeaveChannel,a=M.useRef(null),s=M.useRef(null),o=M.useState(!1),l=o[0],u=o[1],c=M.useContext(lr).stringSet;return m.createElement("div",{ref:s,tabIndex:0,role:"button",style:{display:"inline-block"},onKeyDown:function(h){return h.stopPropagation()},onClick:function(h){return h.stopPropagation()}},m.createElement(ba,{menuTrigger:function(h){return m.createElement(ps,{ref:a,onClick:h,height:"32px",width:"32px"},m.createElement(ke,{type:Ne.MORE,fillColor:Oe.PRIMARY,width:"24px",height:"24px"}))},menuItems:function(h){return m.createElement(ya,{parentRef:a,parentContainRef:s,closeDropdown:h},m.createElement(Ii,{onClick:function(){r||(u(!0),h())},testID:"channel_list_item_context_menu_leave_channel"},c.CHANNEL_SETTING__LEAVE_CHANNEL__TITLE))}}),l&&m.createElement(bve,{channel:n,onSubmit:function(){u(!1),i==null||i()},onCancel:function(){return u(!1)}}))}function Sve(e){var n=e.count,t=e.maxLevel,r=t===void 0?2:t,i=e.className,a=i===void 0?"":i,s=M.useContext(lr).stringSet,o=parseInt("9".repeat(r>6?6:r),10);return m.createElement("div",{className:we(we([],Array.isArray(a)?a:[a],!0),["sendbird-badge"],!1).join(" ")},m.createElement("div",{className:"sendbird-badge__text"},m.createElement(Ce,{type:be.CAPTION_2,color:ue.ONCONTENT_1},typeof n=="string"?n:n>o?"".concat(o).concat(s.BADGE__OVER):n)))}function Tve(e){var n=e.className,t=n===void 0?"":n,r=e.children,i=e.isReverse,a=i===void 0?!1:i,s=e.color,o=e.userId;return m.createElement("span",{className:fn(UP,t,a&&"reverse",s),contentEditable:!1,"data-userid":o,"data-sb-mention":!0},r)}var Nve=function(e){var n=e.channel,t=e.tabIndex,r=e.isTyping,i=e.isSelected,a=e.channelName,s=e.isMessageStatusEnabled,o=s===void 0?!0:s,l=e.onClick,u=l===void 0?Mn:l,c=e.onLeaveChannel,h=c===void 0?function(){return Promise.resolve()}:c,f=e.renderChannelAction,p=en().state.config,_=p.theme,g=p.userId,C=tn(),E=C.dateLocale,y=C.stringSet,S=si().isMobile,I=p.groupChannel.enableMention,w=Xce(n,y),R=p.groupChannel.enableMarkdownForUserMessage?Fce(w):w,A=M.useState(!1),U=A[0],O=A[1],B=tl({onLongPress:function(){S&&O(!0)},onClick:u},{delay:1e3});return m.createElement(m.Fragment,null,m.createElement("div",H({className:["sendbird-channel-preview",i?"sendbird-channel-preview--active":""].join(" "),role:"link",tabIndex:t},S?H({},B):{onClick:u}),m.createElement("div",{className:"sendbird-channel-preview__avatar"},m.createElement(CP,{channel:n,userId:g,theme:_})),m.createElement("div",{className:"sendbird-channel-preview__content"},m.createElement("div",{className:"sendbird-channel-preview__content__upper"},m.createElement("div",{className:"sendbird-channel-preview__content__upper__header"},(n.isBroadcast||!1)&&m.createElement("div",{className:"sendbird-channel-preview__content__upper__header__broadcast-icon"},m.createElement(ke,{type:Ne.BROADCAST,fillColor:Oe.SECONDARY,height:"16px",width:"16px"})),m.createElement(Ce,{className:"sendbird-channel-preview__content__upper__header__channel-name",testID:"sendbird-channel-preview__content__upper__header__channel-name",type:be.SUBTITLE_2,color:ue.ONBACKGROUND_1},a),m.createElement(Ce,{className:"sendbird-channel-preview__content__upper__header__total-members",type:be.CAPTION_2,color:ue.ONBACKGROUND_2},Yce(n)),n.isFrozen&&m.createElement("div",{title:"Frozen",className:"sendbird-channel-preview__content__upper__header__frozen-icon"},m.createElement(ke,{type:Ne.FREEZE,fillColor:Oe.PRIMARY,height:12,width:12}))),!n.isEphemeral&&o&&m.createElement(GP,{className:"sendbird-channel-preview__content__upper__last-message-at",channel:n,message:n.lastMessage,isDateSeparatorConsidered:!1}),!n.isEphemeral&&!o&&m.createElement(Ce,{className:"sendbird-channel-preview__content__upper__last-message-at",type:be.CAPTION_3,color:ue.ONBACKGROUND_2},HP({channel:n,locale:E,stringSet:y}))),m.createElement("div",{className:"sendbird-channel-preview__content__lower"},m.createElement(Ce,{className:"sendbird-channel-preview__content__lower__last-message",type:be.BODY_2,color:ue.ONBACKGROUND_3},r&&m.createElement(gP,{members:n.getTypingUsers()}),!r&&!Zo(n.lastMessage)&&R,!r&&Zo(n.lastMessage)&&y.VOICE_MESSAGE),(!i||p.groupChannel.enableMarkAsUnread)&&!n.isEphemeral&&m.createElement("div",{className:"sendbird-channel-preview__content__lower__unread-message-count"},I&&n.unreadMentionCount>0?m.createElement(Tve,{className:"sendbird-channel-preview__content__lower__unread-message-count__mention",color:"purple"},"@"):null,mD(n)?m.createElement(Sve,{count:mD(n)}):null))),!S&&m.createElement("div",{className:"sendbird-channel-preview__action"},f({channel:n}))),U&&S&&m.createElement(qa,{className:"sendbird-channel-preview__leave--mobile",titleText:a,hideFooter:!0,isCloseOnClickOutside:!0,onCancel:function(){return O(!1)}},m.createElement(Ef,{onClick:function(){h(),O(!1)},className:"sendbird-channel-preview__leave-label--mobile"},m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},y.CHANNEL_PREVIEW_MOBILE_LEAVE))))},Ive=function(e){var n,t,r,i=e.channel,a=e.isSelected,s=e.isTyping,o=e.renderChannelAction,l=e.onLeaveChannel,u=e.onClick,c=e.tabIndex,h=en().state.config,f=tn().stringSet,p=ME().state,_=p.isTypingIndicatorEnabled,g=p.isMessageReceiptStatusEnabled,C=h.userId,E=g&&!(!((n=i.lastMessage)===null||n===void 0)&&n.isAdminMessage())&&((r=(t=i.lastMessage)===null||t===void 0?void 0:t.sender)===null||r===void 0?void 0:r.userId)===C;return m.createElement(Nve,{channel:i,tabIndex:c,channelName:Wce(i,C,f),isTyping:_&&s,isSelected:a,isMessageStatusEnabled:E,onClick:u,onLeaveChannel:l,renderChannelAction:o})},UE=30,LE=15,wI="RESET_MESSAGES",kE="FETCH_INITIAL_MESSAGES_START",xE="FETCH_INITIAL_MESSAGES_SUCCESS",Kp="FETCH_INITIAL_MESSAGES_FAILURE",RI="FETCH_PREV_MESSAGES_SUCCESS",OI="FETCH_PREV_MESSAGES_FAILURE",DI="FETCH_NEXT_MESSAGES_SUCCESS",UI="FETCH_NEXT_MESSAGES_FAILURE",LI="SEND_MESSAGE_START",Xo="SEND_MESSAGE_SUCCESS",Pl="SEND_MESSAGE_FAILURE",cp="RESEND_MESSAGE_START",kI="ON_MESSAGE_RECEIVED",hm="ON_MESSAGE_UPDATED",xI="ON_MESSAGE_THREAD_INFO_UPDATED",fm="ON_MESSAGE_DELETED",PI="ON_MESSAGE_DELETED_BY_REQ_ID",rs="SET_CURRENT_CHANNEL",FI="SET_CHANNEL_INVALID",BI="MARK_AS_READ",A5="MARK_AS_UNREAD",HI="ON_REACTION_UPDATED",GI="SET_EMOJI_CONTAINER",$I="MESSAGE_LIST_PARAMS_CHANGED",VI="ON_FILE_INFO_UPLOADED",zI="ON_TYPING_STATUS_UPDATED",Mve=Object.freeze({__proto__:null,FETCH_INITIAL_MESSAGES_FAILURE:Kp,FETCH_INITIAL_MESSAGES_START:kE,FETCH_INITIAL_MESSAGES_SUCCESS:xE,FETCH_NEXT_MESSAGES_FAILURE:UI,FETCH_NEXT_MESSAGES_SUCCESS:DI,FETCH_PREV_MESSAGES_FAILURE:OI,FETCH_PREV_MESSAGES_SUCCESS:RI,MARK_AS_READ:BI,MARK_AS_UNREAD:A5,MESSAGE_LIST_PARAMS_CHANGED:$I,ON_FILE_INFO_UPLOADED:VI,ON_MESSAGE_DELETED:fm,ON_MESSAGE_DELETED_BY_REQ_ID:PI,ON_MESSAGE_RECEIVED:kI,ON_MESSAGE_THREAD_INFO_UPDATED:xI,ON_MESSAGE_UPDATED:hm,ON_REACTION_UPDATED:HI,ON_TYPING_STATUS_UPDATED:zI,RESEND_MESSAGE_START:cp,RESET_MESSAGES:wI,SEND_MESSAGE_FAILURE:Pl,SEND_MESSAGE_START:LI,SEND_MESSAGE_SUCCESS:Xo,SET_CHANNEL_INVALID:FI,SET_CURRENT_CHANNEL:rs,SET_EMOJI_CONTAINER:GI});function Ave(e,n){var t=e.currentGroupChannel,r=e.initialTimeStamp,i=e.userFilledMessageListQuery,a=e.replyType,s=e.setIsScrolled,o=n.logger,l=n.scrollRef,u=n.messagesDispatcher,c=t==null?void 0:t.url,h=M.useCallback(function(){if(o.info("Channel useInitialMessagesFetch: Setup started",t),s(!1),u({type:wI,payload:null}),t&&(t!=null&&t.getMessagesByTimestamp)){var f={prevResultSize:UE,isInclusive:!0,includeReactions:!0,includeMetaArray:!0};r&&(f.nextResultSize=LE),(a==="QUOTE_REPLY"||a==="THREAD")&&(f.includeThreadInfo=!0,f.includeParentMessageInfo=!0,f.replyType=Yr.ONLY_REPLY_TO_CHANNEL),i&&Object.keys(i).forEach(function(p){f[p]=i[p]}),(a&&(a==="QUOTE_REPLY"||a==="THREAD")||i)&&(o.info("Channel useInitialMessagesFetch: Setup messageListParams",f),u({type:$I,payload:f})),o.info("Channel: Fetching messages",{currentGroupChannel:t,userFilledMessageListQuery:i}),u({type:kE,payload:null}),t.getMessagesByTimestamp(r||new Date().getTime(),f).then(function(p){u({type:xE,payload:{currentGroupChannel:t,messages:p}})}).catch(function(p){o.error("Channel: Fetching messages failed",p),u({type:Kp,payload:{currentGroupChannel:t}})}).finally(function(){r?setTimeout(function(){b5(l,r,s)},500):setTimeout(function(){return Jo(0,l,s)},Q4)})}},[c,i,r]);return M.useEffect(function(){h()},[h]),h}var hU=function(e){return e==null};function zn(e,n){if(hU(e)||hU(n))return!1;var t=e.toString(),r=n.toString();return t===r}function wve(e,n,t){t===void 0&&(t=!0);var r=M.useState(!1),i=r[0],a=r[1],s=!e;M.useEffect(function(){var l=function(){t&&a(document.hidden)};return document.addEventListener("visibilitychange",l),function(){document.removeEventListener("visibilitychange",l)}},[t,document.hidden]);var o=s&&!!n&&!i;return{shouldReconnect:o}}var fU=function(e){return e==null};function mu(e,n){if(fU(e)||fU(n))return!1;var t=e.toString(),r=n.toString();return t===r}var PE=function(e){e===void 0&&(e=0);var n=10,t=e;if(!(t>n))try{var r=document.querySelector(".sendbird-thread-ui--scroll");r&&(r.scrollTop=r.scrollHeight)}catch{setTimeout(function(){PE(t+1)},500*t)}},w5=function(e,n){var t=e.currentChannel,r=e.onBeforeSendMultipleFilesMessage,i=e.publishingModules,a=n.logger,s=n.pubSub,o=n.scrollRef,l=M.useCallback(function(u,c){return new Promise(function(h,f){t||(a.warning("Channel: Sending MFm failed, because currentChannel is null.",{currentChannel:t}),f()),u.length<=1&&(a.warning("Channel: Sending MFM failed, because there are no multiple files.",{files:u}),f());var p={fileInfoList:u.map(function(_){return{file:_,fileName:_.name,fileSize:_.size,mimeType:_.type}})};c&&(p.isReplyToChannel=!0,p.parentMessageId=c.messageId),typeof r=="function"&&(p=r(u,c)),a.info("Channel: Start sending MFM",{messageParams:p});try{t==null||t.sendMultipleFilesMessage(p).onFileUploaded(function(_,g,C,E){a.info("Channel: onFileUploaded during sending MFM",{requestId:_,index:g,error:E,uploadableFileInfo:C}),s.publish(Ai.ON_FILE_INFO_UPLOADED,{response:{channelUrl:t.url,requestId:_,index:g,uploadableFileInfo:C,error:E},publishingModules:i})}).onPending(function(_){a.info("Channel: in progress of sending MFM",{pendingMessage:_,fileInfoList:p.fileInfoList}),s.publish(Ai.SEND_MESSAGE_START,{message:_,channel:t,publishingModules:i}),setTimeout(function(){o&&Ig(i)&&Jo(0,o),vue(i)&&PE(0)},Yu)}).onFailed(function(_,g){a.error("Channel: Sending MFM failed.",{error:_,failedMessage:g}),s.publish(Ai.SEND_MESSAGE_FAILED,{channel:t,message:g,publishingModules:i}),f(_)}).onSucceeded(function(_){a.info("Channel: Sending voice message success!",{succeededMessage:_}),s.publish(Ai.SEND_FILE_MESSAGE,{channel:t,message:_,publishingModules:i}),h(_)})}catch(_){a.error("Channel: Sending MFM failed.",{error:_}),f(_)}})},[t,r,i]);return[l]},Rve={initialized:!1,loading:!0,allMessages:[],localMessages:[],stringSet:NE(),currentGroupChannel:null,hasMorePrev:!1,oldestMessageTimeStamp:0,hasMoreNext:!1,latestMessageTimeStamp:0,emojiContainer:{emojiCategories:[],emojiHash:""},unreadSince:null,unreadSinceDate:null,isInvalid:!1,readStatus:null,messageListParams:null,typingMembers:[]},vU=function(e){e===void 0&&(e=[]);var n=e[0];return n&&n.createdAt||null},pU=function(e){e===void 0&&(e=[]);var n=e[e.length-1];return n&&n.createdAt||null};function mh(e){return"reqId"in e}function Ove(e,n){return Es(n).with({type:wI},function(){return H(H({},e),{hasMorePrev:!1,hasMoreNext:!1,allMessages:[],localMessages:[]})}).with({type:kE},function(){return H(H({},e),{loading:!0,allMessages:e.allMessages.filter(function(t){return om(t)?t.sendingStatus!==sn.SUCCEEDED:!0}),localMessages:[]})}).with({type:xE},function(t){var r,i=t.payload,a=i.currentGroupChannel,s=i.messages;if((a==null?void 0:a.url)!==((r=e.currentGroupChannel)===null||r===void 0?void 0:r.url))return e;var o=vU(s),l=pU(s);return H(H({},e),{loading:!1,initialized:!0,hasMorePrev:!0,hasMoreNext:!0,oldestMessageTimeStamp:o,latestMessageTimeStamp:l,allMessages:we([],s,!0)})}).with({type:RI},function(t){var r,i,a,s,o=t.payload,l=o.currentGroupChannel,u=o.messages;if((l==null?void 0:l.url)!==((r=e.currentGroupChannel)===null||r===void 0?void 0:r.url))return e;var c=((i=u==null?void 0:u.length)!==null&&i!==void 0?i:0)>=((s=(a=e==null?void 0:e.messageListParams)===null||a===void 0?void 0:a.prevResultSize)!==null&&s!==void 0?s:UE)+1,h=vU(u),f=[],p=e.allMessages.map(function(g){var C=u.find(function(E){var y=E.messageId;return zn(y,g.messageId)});return C?(f.push(C.messageId),C.updatedAt>g.updatedAt?C:g):g}),_=f.length>0?u.filter(function(g){return!f.find(function(C){return zn(C,g.messageId)})}):u;return H(H({},e),{hasMorePrev:c,oldestMessageTimeStamp:h,allMessages:we(we([],_,!0),p,!0)})}).with({type:DI},function(t){var r,i,a,s,o=t.payload,l=o.currentGroupChannel,u=o.messages;if((l==null?void 0:l.url)!==((r=e.currentGroupChannel)===null||r===void 0?void 0:r.url))return e;var c=((i=u==null?void 0:u.length)!==null&&i!==void 0?i:0)===((s=(a=e==null?void 0:e.messageListParams)===null||a===void 0?void 0:a.nextResultSize)!==null&&s!==void 0?s:LE)+1,h=pU(u),f=tve(e.allMessages,u);return H(H({},e),{hasMoreNext:c,latestMessageTimeStamp:h,allMessages:f})}).with({type:Yoe.union(Kp,OI,UI)},function(t){var r,i=t.payload.currentGroupChannel;if((i==null?void 0:i.url)!==((r=e==null?void 0:e.currentGroupChannel)===null||r===void 0?void 0:r.url))return e;var a=[Kp].includes(t.type);return H(H({},e),{loading:!1,isInvalid:a,initialized:!1,allMessages:[],hasMorePrev:!1,hasMoreNext:!1,oldestMessageTimeStamp:null,latestMessageTimeStamp:null})}).with({type:LI},function(t){return H(H({},e),{localMessages:we(we([],e.localMessages,!0),[t.payload],!1)})}).with({type:Xo},function(t){var r=t.payload,i=e.allMessages.filter(function(a){return!mh(a)||(a==null?void 0:a.reqId)!==(r==null?void 0:r.reqId)});return H(H({},e),{allMessages:we(we([],i,!0),[r],!1),localMessages:e.localMessages.filter(function(a){return mh(a)&&(a==null?void 0:a.reqId)!==(r==null?void 0:r.reqId)})})}).with({type:Pl},function(t){return t.payload.failed=!0,H(H({},e),{localMessages:e.localMessages.map(function(r){return zn(mh(r)&&r.reqId,t.payload.reqId)?t.payload:r})})}).with({type:rs},function(t){return H(H({},e),{currentGroupChannel:t.payload,isInvalid:!1})}).with({type:FI},function(){return H(H({},e),{currentGroupChannel:null,allMessages:[],localMessages:[],isInvalid:!0})}).with({type:kI},function(t){var r,i,a=t.payload,s=a.channel,o=a.message,l=s.members,u=o.sender,c=e.currentGroupChannel,h=e.stringSet,f=c==null?void 0:c.url;if(!zn(s==null?void 0:s.url,f)||e.allMessages.some(function(_){return _.messageId===o.messageId})||e.messageListParams&&!V3(e.messageListParams,o))return e;if(o.isAdminMessage&&o.isAdminMessage())return H(H({},e),{allMessages:dU(e.allMessages,o)});var p=l==null?void 0:l.find(function(_){return(_==null?void 0:_.userId)===(u==null?void 0:u.userId)});return((p==null?void 0:p.profileUrl)!==(u==null?void 0:u.profileUrl)||(p==null?void 0:p.friendName)!==(u==null?void 0:u.friendName)||(p==null?void 0:p.nickname)!==(u==null?void 0:u.nickname))&&(s.members=l.map(function(_){return _.userId===u.userId?u:_})),H(H({},e),{currentGroupChannel:s,unreadSince:(r=e.unreadSince)!==null&&r!==void 0?r:_a(new Date,h.DATE_FORMAT__UNREAD_SINCE),unreadSinceDate:(i=e.unreadSinceDate)!==null&&i!==void 0?i:new Date,allMessages:dU(e.allMessages,o)})}).with({type:hm},function(t){var r,i=t.payload,a=i.channel,s=i.message,o=((r=e==null?void 0:e.currentGroupChannel)===null||r===void 0?void 0:r.url)||"";return zn(a==null?void 0:a.url,o)?e.messageListParams&&!V3(e.messageListParams,s)?H(H({},e),{allMessages:e.allMessages.filter(function(l){return!zn(l.messageId,s==null?void 0:s.messageId)})}):H(H({},e),{allMessages:e.allMessages.map(function(l){return zn(l.messageId,s.messageId)?s:(zn(l.parentMessageId,s.messageId)&&(l.parentMessage=s),l)})}):e}).with({type:xI},function(t){var r,i=t.payload,a=i.channel,s=i.event,o=s.channelUrl,l=s.threadInfo,u=s.targetMessageId,c=((r=e==null?void 0:e.currentGroupChannel)===null||r===void 0?void 0:r.url)||"";return!zn(a==null?void 0:a.url,c)||!zn(a==null?void 0:a.url,o)?e:H(H({},e),{allMessages:e.allMessages.map(function(h){return zn(h.messageId,u)&&(h.threadInfo=l),h})})}).with({type:cp},function(t){return H(H({},e),{localMessages:e.localMessages.map(function(r){return zn(mh(r)&&r.reqId,t.payload.reqId)?t.payload:r})})}).with({type:BI},function(t){var r,i,a;return((r=e.currentGroupChannel)===null||r===void 0?void 0:r.url)!==((a=(i=t.payload)===null||i===void 0?void 0:i.channel)===null||a===void 0?void 0:a.url)?e:H(H({},e),{unreadSince:null,unreadSinceDate:null})}).with({type:fm},function(t){return H(H({},e),{allMessages:e.allMessages.filter(function(r){return!zn(r.messageId,t.payload)})})}).with({type:PI},function(t){return H(H({},e),{localMessages:e.localMessages.filter(function(r){return!zn(mh(r)&&r.reqId,t.payload)})})}).with({type:GI},function(t){return H(H({},e),{emojiContainer:t.payload})}).with({type:HI},function(t){return H(H({},e),{allMessages:e.allMessages.map(function(r){return zn(r.messageId,t.payload.messageId)&&r.applyReactionEvent&&typeof r.applyReactionEvent=="function"&&r.applyReactionEvent(t.payload),r})})}).with({type:$I},function(t){return H(H({},e),{messageListParams:t.payload})}).with({type:VI},function(t){var r,i,a=t.payload,s=a.channelUrl,o=a.requestId,l=a.index,u=a.uploadableFileInfo,c=a.error;if(!zn(s,(r=e==null?void 0:e.currentGroupChannel)===null||r===void 0?void 0:r.url)||c)return e;var h=e.localMessages,f=h.find(function(_){return zn(mh(_)&&_.reqId,o)}),p=(i=f.messageParams)===null||i===void 0?void 0:i.fileInfoList;return Array.isArray(p)&&(p[l]=u),H(H({},e),{localMessages:h})}).with({type:zI},function(t){var r,i=t.payload,a=i.channel,s=i.typingMembers;return zn(a.url,(r=e==null?void 0:e.currentGroupChannel)===null||r===void 0?void 0:r.url)?H(H({},e),{typingMembers:s}):e}).otherwise(function(){return e})}var Dve="delivery_receipt";function Uve(e,n){var t,r,i,a=e.sdkInit,s=e.currentGroupChannel,o=e.disableMarkAsRead,l=n.sdk,u=n.logger,c=n.scrollRef,h=n.setQuoteMessage,f=n.messagesDispatcher,p=en().state,_=p.config,g=_.markAsReadScheduler,C=_.markAsDeliveredScheduler,E=_.disableMarkAsDelivered,y=(i=(r=(t=p.stores.sdkStore.sdk)===null||t===void 0?void 0:t.appInfo)===null||r===void 0?void 0:r.premiumFeatureList)===null||i===void 0?void 0:i.find(function(S){return S===Dve});M.useEffect(function(){var S,I=s==null?void 0:s.url,w=qs();if(I&&a){var R={onMessageReceived:function(A,U){var O,B;if(A.isGroupChannel()&&zn(A==null?void 0:A.url,I)){var F=!1;try{var P=c.current;P&&(F=P.offsetHeight+P.scrollTop>=P.scrollHeight-10)}catch{}if(u.info("Channel | useHandleChannelEvents: onMessageReceived",U),f({type:kI,payload:{channel:A,message:U}}),F&&((O=document.getElementById("sendbird-dropdown-portal"))===null||O===void 0?void 0:O.childElementCount)===0&&((B=document.getElementById("sendbird-emoji-list-portal"))===null||B===void 0?void 0:B.childElementCount)===0)try{setTimeout(function(){return Jo(0,c)}),o||g.push(s),y&&!E&&C.push(s)}catch{u.warning("Channel | onMessageReceived | scroll to end failed")}}},onUnreadMemberStatusUpdated:function(A){u.info("Channel | useHandleChannelEvents: onUnreadMemberStatusUpdated",A),zn(A==null?void 0:A.url,I)&&f({type:rs,payload:A})},onUserMarkedRead:function(A,U){u.info("Channel | useHandleChannelEvents: onUserMarkedAsRead",A,U),zn(A==null?void 0:A.url,I)&&f({type:BI,payload:{channel:A,userIds:U}})},onUserMarkedUnread:function(A,U){u.info("Channel | useHandleChannelEvents: onUserMarkedUnread",A,U),zn(A==null?void 0:A.url,I)&&f({type:A5,payload:{channel:A,userIds:U}})},onUndeliveredMemberStatusUpdated:function(A){zn(A==null?void 0:A.url,I)&&(u.info("Channel | useHandleChannelEvents: onDeliveryReceiptUpdated",A),f({type:rs,payload:A}))},onMessageUpdated:function(A,U){A.isGroupChannel()&&zn(A==null?void 0:A.url,I)&&(u.info("Channel | useHandleChannelEvents: onMessageUpdated",U),f({type:hm,payload:{channel:A,message:U}}))},onThreadInfoUpdated:function(A,U){A.isGroupChannel()&&zn(A==null?void 0:A.url,I)&&(u.info("Channel | useHandleChannelEvents: onThreadInfoUpdated",{channel:A,threadInfoUpdateEvent:U}),f({type:xI,payload:{channel:A,event:U}}))},onMessageDeleted:function(A,U){u.info("Channel | useHandleChannelEvents: onMessageDeleted",{channel:A,messageId:U}),h(null),f({type:fm,payload:U})},onReactionUpdated:function(A,U){A.isGroupChannel()&&zn(A==null?void 0:A.url,I)&&(u.info("Channel | useHandleChannelEvents: onReactionUpdated",{channel:A,reactionEvent:U}),f({type:HI,payload:U}))},onChannelChanged:function(A){A.isGroupChannel()&&zn(A==null?void 0:A.url,I)&&(u.info("Channel | useHandleChannelEvents: onChannelChanged",A),f({type:rs,payload:A}))},onChannelFrozen:function(A){A.isGroupChannel()&&zn(A==null?void 0:A.url,I)&&(u.info("Channel | useHandleChannelEvents: onChannelFrozen",A),f({type:rs,payload:A}))},onChannelUnfrozen:function(A){A.isGroupChannel()&&zn(A==null?void 0:A.url,I)&&(u.info("Channel | useHandleChannelEvents: onChannelUnFrozen",A),f({type:rs,payload:A}))},onUserMuted:function(A,U){A.isGroupChannel()&&zn(A==null?void 0:A.url,I)&&(u.info("Channel | useHandleChannelEvents: onUserMuted",{channel:A,user:U}),f({type:rs,payload:A}))},onUserUnmuted:function(A,U){A.isGroupChannel()&&zn(A==null?void 0:A.url,I)&&(u.info("Channel | useHandleChannelEvents: onUserUnmuted",{channel:A,user:U}),f({type:rs,payload:A}))},onUserBanned:function(A,U){var O;if(zn(A==null?void 0:A.url,I)&&A.isGroupChannel()){u.info("Channel | useHandleChannelEvents: onUserBanned",{channel:A,user:U});var B=(U==null?void 0:U.userId)===((O=l==null?void 0:l.currentUser)===null||O===void 0?void 0:O.userId);f({type:rs,payload:B?null:A})}},onOperatorUpdated:function(A,U){A.isGroupChannel()&&zn(A==null?void 0:A.url,I)&&(u.info("Channel | useHandleChannelEvents: onOperatorUpdated",{channel:A,users:U}),f({type:rs,payload:A}))},onUserLeft:function(A,U){var O;if(zn(A==null?void 0:A.url,I)){u.info("Channel | useHandleChannelEvents: onUserLeft",{channel:A,user:U});var B=(U==null?void 0:U.userId)===((O=l==null?void 0:l.currentUser)===null||O===void 0?void 0:O.userId);f({type:rs,payload:B?null:A})}},onTypingStatusUpdated:function(A){if(zn(A==null?void 0:A.url,I)){u.info("Channel | onTypingStatusUpdated",{channel:A});var U=A.getTypingUsers();f({type:zI,payload:{channel:A,typingMembers:U}})}}};u.info("Channel | useHandleChannelEvents: Setup event handler",{channelHandlerId:w,channelHandler:R}),(S=l.groupChannel)===null||S===void 0||S.addGroupChannelHandler(w,new mE(R))}return function(){var A;!((A=l==null?void 0:l.groupChannel)===null||A===void 0)&&A.removeGroupChannelHandler?(u.info("Channel | useHandleChannelEvents: Removing message reciver handler",w),l.groupChannel.removeGroupChannelHandler(w)):l!=null&&l.groupChannel&&u.error("Channel | useHandleChannelEvents: Not found the removeGroupChannelHandler")}},[s==null?void 0:s.url,a])}function Lve(e,n){var t=e.channelUrl,r=e.sdkInit,i=e.disableMarkAsRead,a=n.messagesDispatcher,s=n.sdk,o=n.logger,l=n.markAsReadScheduler;M.useEffect(function(){t&&r&&s&&s.groupChannel&&(o.info("Channel | useSetChannel fetching channel",t),s.groupChannel.getChannel(t).then(function(u){o.info("Channel | useSetChannel fetched channel",u),a({type:rs,payload:u}),o.info("Channel: Mark as read",u),i||l.push(u)}).catch(function(u){o.warning("Channel | useSetChannel fetch channel failed",{channelUrl:t,e:u}),a({type:FI})}),s.getAllEmoji().then(function(u){o.info("Channel: Getting emojis success",u),a({type:GI,payload:u})}).catch(function(u){o.error("Channel: Getting emojis failed",u)}))},[t,r])}function kve(e,n){var t=e.isOnline,r=e.replyType,i=e.disableMarkAsRead,a=e.reconnectOnIdle,s=n.logger,o=n.sdk,l=n.scrollRef,u=n.currentGroupChannel,c=n.messagesDispatcher,h=n.markAsReadScheduler,f=n.userFilledMessageListQuery,p=wve(t,u,a).shouldReconnect;M.useEffect(function(){return function(){var _,g,C;if(p){s.info("Refreshing conversation state");var E=((_=o==null?void 0:o.appInfo)===null||_===void 0?void 0:_.useReaction)||!1,y={prevResultSize:UE,isInclusive:!0,includeReactions:E,includeMetaArray:!0,nextResultSize:LE};r&&r==="QUOTE_REPLY"&&(y.includeThreadInfo=!0,y.includeParentMessageInfo=!0,y.replyType=Yr.ONLY_REPLY_TO_CHANNEL),f&&Object.keys(f).forEach(function(S){y[S]=f[S]}),s.info("Channel: Fetching messages",{currentGroupChannel:u,userFilledMessageListQuery:f}),c({type:kE,payload:null}),(g=o==null?void 0:o.groupChannel)===null||g===void 0||g.getChannel((C=u==null?void 0:u.url)!==null&&C!==void 0?C:"").then(function(S){var I=new Date().getTime();S.getMessagesByTimestamp(I,y).then(function(w){c({type:xE,payload:{currentGroupChannel:S,messages:w}}),setTimeout(function(){return Jo(0,l)},Q4)}).catch(function(w){s.error("Channel: Fetching messages failed",w),c({type:Kp,payload:{currentGroupChannel:S}})}),i||h.push(S)})}}},[p,r])}function xve(e,n){var t=e.currentGroupChannel,r=e.oldestMessageTimeStamp,i=e.userFilledMessageListQuery,a=e.replyType,s=n.hasMorePrev,o=n.logger,l=n.messagesDispatcher,u=n.sdk;return M.useCallback(function(c){var h,f;if(s){var p={prevResultSize:UE,isInclusive:!0,includeMetaArray:!0,includeReactions:(f=(h=u==null?void 0:u.appInfo)===null||h===void 0?void 0:h.useReaction)!==null&&f!==void 0?f:!1};(a==="QUOTE_REPLY"||a==="THREAD")&&(p.includeThreadInfo=!0,p.includeParentMessageInfo=!0,p.replyType=Yr.ONLY_REPLY_TO_CHANNEL),i&&Object.keys(i).forEach(function(_){p[_]=i[_]}),o.info("Channel: Fetching messages",{currentGroupChannel:t,userFilledMessageListQuery:i}),t==null||t.getMessagesByTimestamp(r||new Date().getTime(),p).then(function(_){l({type:RI,payload:{currentGroupChannel:t,messages:_}}),c&&setTimeout(function(){return c()})}).catch(function(){l({type:OI,payload:{currentGroupChannel:t}})})}},[t,r,a])}function Pve(e,n){var t=e.currentGroupChannel,r=e.latestMessageTimeStamp,i=e.userFilledMessageListQuery,a=e.hasMoreNext,s=e.replyType,o=n.logger,l=n.messagesDispatcher,u=n.sdk;return M.useCallback(function(c){var h,f;if(a){var p=(f=(h=u==null?void 0:u.appInfo)===null||h===void 0?void 0:h.useReaction)!==null&&f!==void 0?f:!1,_={nextResultSize:LE,isInclusive:!0,includeReactions:p,includeMetaArray:!0};s&&(s==="QUOTE_REPLY"||s==="THREAD")&&(_.includeThreadInfo=!0,_.includeParentMessageInfo=!0,_.replyType=Yr.ONLY_REPLY_TO_CHANNEL),i&&Object.keys(i).forEach(function(g){_[g]=i[g]}),o.info("Channel: Fetching later messages",{currentGroupChannel:t,userFilledMessageListQuery:i}),t==null||t.getMessagesByTimestamp(r||new Date().getTime(),_).then(function(g){l({type:DI,payload:{currentGroupChannel:t,messages:g}}),setTimeout(function(){return c([g,null])})}).catch(function(g){o.error("Channel: Fetching later messages failed",g),l({type:UI,payload:{currentGroupChannel:t}}),setTimeout(function(){return c([null,g])})})}},[t,r,a,s])}function Fve(e,n){var t=e.currentGroupChannel,r=e.messagesDispatcher,i=n.logger;return M.useCallback(function(a){i.info("Channel | useDeleteMessageCallback: Deleting message",a);var s=om(a)?a.sendingStatus:void 0;return new Promise(function(o,l){i.info("Channel | useDeleteMessageCallback: Deleting message requestState:",s),(s===sn.FAILED||s===sn.PENDING)&&"reqId"in a?(i.info("Channel | useDeleteMessageCallback: Deleted message from local:",a),r({type:PI,payload:a.reqId}),o()):(i.info("Channel | useDeleteMessageCallback: Deleting message from remote:",s),t==null||t.deleteMessage(a).then(function(){i.info("Channel | useDeleteMessageCallback: Deleting message success!",a),r({type:fm,payload:a.messageId}),o()}).catch(function(u){i.warning("Channel | useDeleteMessageCallback: Deleting message failed!",u),l(u)}))})},[t,r])}function Bve(e,n){var t=e.currentGroupChannel,r=e.messagesDispatcher,i=e.onBeforeUpdateUserMessage,a=e.isMentionEnabled,s=n.logger,o=n.pubSub;return M.useCallback(function(l,u){var c=l.messageId,h=l.message,f=l.mentionedUsers,p=l.mentionTemplate,_=function(E){var y={message:E};return a&&f&&f.length>0&&(y.mentionedUsers=f),a&&p?y.mentionedMessageTemplate=p:y.mentionedMessageTemplate=E,y},g=i&&typeof i=="function";g&&s.info("Channel: creating params using onBeforeUpdateUserMessage",i);var C=g?i(h):_(h);s.info("Channel: Updating message!",C),t==null||t.updateUserMessage(c,C).then(function(E){u&&u(null,E),s.info("Channel: Updating message success!",E),r({type:hm,payload:{channel:t,message:E}}),o.publish(Ai.UPDATE_USER_MESSAGE,{message:E,channel:t,publishingModules:[_i.CHANNEL]})}).catch(function(E){u&&u(E,null)})},[t==null?void 0:t.url,r,i])}function Hve(e,n){var t=e.currentGroupChannel,r=e.messagesDispatcher,i=n.logger,a=n.pubSub;return M.useCallback(function(s){i.info("Channel: Resending message has started",s),s!=null&&s.isResendable?s.isUserMessage()?t==null||t.resendMessage(s).onPending(function(o){i.info("Channel: Resending message start!",o),r({type:cp,payload:o})}).onSucceeded(function(o){i.info("Channel: Resending message success!",o),r({type:Xo,payload:o})}).onFailed(function(o,l){i.warning("Channel: Resending message failed!",o),r({type:Pl,payload:l})}):s.isFileMessage()?t==null||t.resendMessage(s).onPending(function(o){i.info("Channel: Resending file message start!",o),r({type:cp,payload:o})}).onSucceeded(function(o){i.info("Channel: Resending file message success!",o),r({type:Xo,payload:o})}).onFailed(function(o,l){i.warning("Channel: Resending file message failed!",o),r({type:Pl,payload:l})}):s.isMultipleFilesMessage()&&(t==null||t.resendMessage(s).onPending(function(o){i.info("Channel: Resending multiple files message start!",o),r({type:cp,payload:o})}).onFileUploaded(function(o,l,u,c){var h;i.info("Channel: Resending multiple files message file uploaded!",{requestId:o,index:l,error:c,uploadableFileInfo:u}),a.publish(Ai.ON_FILE_INFO_UPLOADED,{response:{channelUrl:(h=t==null?void 0:t.url)!==null&&h!==void 0?h:"",requestId:o,index:l,uploadableFileInfo:u,error:c},publishingModules:[_i.CHANNEL]})}).onSucceeded(function(o){i.info("Channel: Resending multiple files message success!",o),r({type:Xo,payload:o})}).onFailed(function(o,l){i.warning("Channel: Resending multiple files message failed!",o),r({type:Pl,payload:l})})):i.error("Message is not resendable",s)},[t,r])}function Gve(e,n){var t=e.isMentionEnabled,r=e.currentGroupChannel,i=e.onBeforeSendUserMessage,a=n.logger,s=n.pubSub,o=n.scrollRef,l=n.messagesDispatcher,u=M.useRef(null),c=M.useCallback(function(h){var f=h.quoteMessage,p=h.message,_=h.mentionTemplate,g=h.mentionedUsers,C=function(){var S={message:p};return t&&g&&g.length>0&&(S.mentionedUsers=g),t&&_&&g&&g.length>0&&(S.mentionedMessageTemplate=_),f&&(S.isReplyToChannel=!0,S.parentMessageId=f.messageId),S},E=i&&typeof i=="function";E&&a.info("Channel: creating params using onBeforeSendUserMessage",i);var y=E?i(p,f):C();a.info("Channel: Sending message has started",y),r==null||r.sendUserMessage(y).onPending(function(S){s.publish(Ai.SEND_MESSAGE_START,{message:S,channel:r,publishingModules:[_i.CHANNEL]}),setTimeout(function(){return Jo(0,o)},Yu)}).onFailed(function(S,I){a.warning("Channel: Sending message failed!",{message:I,error:S}),l({type:Pl,payload:I})}).onSucceeded(function(S){a.info("Channel: Sending message success!",S),l({type:Xo,payload:S})})},[r,i]);return[u,c]}function $ve(e,n){var t=e.currentGroupChannel,r=e.onBeforeSendFileMessage,i=e.imageCompression,a=n.logger,s=n.pubSub,o=n.scrollRef,l=n.messagesDispatcher,u=M.useCallback(function(c,h){return new Promise(function(f,p){var _=r==null?void 0:r(c,h);_||(_={file:c},h&&(_.isReplyToChannel=!0,_.parentMessageId=h.messageId)),a.info("Channel: Uploading file message start!",_),t==null||t.sendFileMessage(_).onPending(function(g){s.publish(Ai.SEND_MESSAGE_START,{message:H(H({},g),{url:URL.createObjectURL(c),requestState:"pending",isUserMessage:g.isUserMessage,isFileMessage:g.isFileMessage,isAdminMessage:g.isAdminMessage,isMultipleFilesMessage:g.isMultipleFilesMessage}),channel:t,publishingModules:[_i.CHANNEL]}),setTimeout(function(){return Jo(0,o)},Yu)}).onFailed(function(g,C){a.error("Channel: Sending file message failed!",{failedMessage:C,err:g}),C.localUrl=URL.createObjectURL(c),C.file=c,l({type:Pl,payload:C}),p(g)}).onSucceeded(function(g){a.info("Channel: Sending file message success!",g),l({type:Xo,payload:g}),f(g)})})},[t,r,i]);return[u]}var gv="useToggleReactionCallback:";function Vve(e,n){return M.useCallback(function(t,r,i){if(!e){n==null||n.warning("".concat(gv," currentChannel doesn't exist"),e);return}i?e.deleteReaction(t,r).then(function(a){n==null||n.info("".concat(gv," Delete reaction success"),a)}).catch(function(a){n==null||n.warning("".concat(gv," Delete reaction failed"),a)}):e.addReaction(t,r).then(function(a){n==null||n.info("".concat(gv," Add reaction success"),a)}).catch(function(a){n==null||n.warning("".concat(gv," Add reaction failed"),a)})},[e])}function zve(e){var n=e.current,t=n==null?void 0:n.parentNode;n&&t&&(n.style.pointerEvents="none",t.style.cursor="wait")}function jve(e){var n=e.current,t=n==null?void 0:n.parentNode;n&&t&&(n.style.pointerEvents="auto",t.style.cursor="auto")}function qve(e,n){var t=e.setInitialTimeStamp,r=e.setAnimatedMessageId,i=e.allMessages,a=e.scrollRef,s=n.logger;return M.useCallback(function(o,l){var u=i.find(function(c){return c.messageId===l});r(null),setTimeout(function(){try{s.info("Channel: scroll to message - disabling mouse events"),zve(a),u?(s.info("Channel: scroll to message - message is present"),r(l),b5(a,o)):(s.info("Channel: scroll to message - fetching older messages"),t(null),t(o),r(l))}finally{s.info("Channel: scroll to message - enabled mouse events"),jve(a)}})},[t,r,i])}var Kve=function(e,n){var t=e.currentGroupChannel,r=e.onBeforeSendVoiceMessage,i=n.logger,a=n.pubSub,s=n.scrollRef,o=n.messagesDispatcher,l=M.useCallback(function(u,c,h){return new Promise(function(f,p){if(t){var _=r&&typeof r=="function"?r(u,h):{file:u,fileName:Pp,mimeType:ju,metaArrays:[new pi({key:Z4,value:["".concat(c)]}),new pi({key:J4,value:[e6]})]};h&&(_.isReplyToChannel=!0,_.parentMessageId=h.messageId),i.info("Channel: Start sending voice message",_),t.sendFileMessage(_).onPending(function(g){a.publish(Ai.SEND_MESSAGE_START,{message:g,channel:t,publishingModules:[_i.CHANNEL]}),setTimeout(function(){return Jo(0,s)},Yu)}).onFailed(function(g,C){i.error("Channel: Sending voice message failed!",{failedMessage:C,err:g}),o({type:Pl,payload:C}),p(g)}).onSucceeded(function(g){i.info("Channel: Sending voice message success!",g),o({type:Xo,payload:g}),f(g)})}})},[t,r]);return[l]},Wve=function(e){var n=e.channelUrl,t=e.sdkInit,r=e.pubSub,i=e.dispatcher,a=e.scrollRef;M.useEffect(function(){var s=new Map;return r!=null&&r.subscribe&&(s.set(Pi.SEND_USER_MESSAGE,r.subscribe(Pi.SEND_USER_MESSAGE,function(o){var l=o.channel,u=o.message;n===(l==null?void 0:l.url)&&(i({type:Xo,payload:u}),setTimeout(function(){return Jo(0,a)},Yu))})),s.set(Pi.SEND_MESSAGE_START,r.subscribe(Pi.SEND_MESSAGE_START,function(o){var l=o.channel,u=o.message,c=o.publishingModules;n===(l==null?void 0:l.url)&&Ig(c)&&i({type:LI,payload:u})})),s.set(Pi.ON_FILE_INFO_UPLOADED,r.subscribe(Pi.ON_FILE_INFO_UPLOADED,function(o){var l=o.response,u=o.publishingModules;n===l.channelUrl&&Ig(u)&&i({type:VI,payload:l})})),s.set(Pi.SEND_MESSAGE_FAILED,r.subscribe(Pi.SEND_MESSAGE_FAILED,function(o){var l=o.channel,u=o.message,c=o.publishingModules;n===(l==null?void 0:l.url)&&Ig(c)&&i({type:Pl,payload:u})})),s.set(Pi.SEND_FILE_MESSAGE,r.subscribe(Pi.SEND_FILE_MESSAGE,function(o){var l=o.channel,u=o.message;n===(l==null?void 0:l.url)&&(i({type:Xo,payload:u}),setTimeout(function(){return Jo(0,a)},Yu))})),s.set(Pi.UPDATE_USER_MESSAGE,r.subscribe(Pi.UPDATE_USER_MESSAGE,function(o){var l=o.channel,u=o.message,c=o.fromSelector;c&&n===(l==null?void 0:l.url)&&l.isGroupChannel()&&i({type:hm,payload:{channel:l,message:u}})})),s.set(Pi.DELETE_MESSAGE,r.subscribe(Pi.DELETE_MESSAGE,function(o){var l=o.channel,u=o.messageId;n===(l==null?void 0:l.url)&&i({type:fm,payload:u})}))),function(){s.forEach(function(o){try{o.remove()}catch{}})}},[n,t])},R5=m.createContext(null),Yve=function(e){var n,t,r,i,a,s,o=e.channelUrl,l=e.children,u=e.isReactionEnabled,c=e.isMessageGroupingEnabled,h=c===void 0?!0:c,f=e.isMultipleFilesMessageEnabled,p=e.showSearchIcon,_=e.animatedMessage,g=e.highlightedMessage,C=e.startingPoint,E=e.onBeforeSendUserMessage,y=e.onBeforeSendFileMessage,S=e.onBeforeUpdateUserMessage,I=e.onBeforeSendVoiceMessage,w=e.onBeforeSendMultipleFilesMessage,R=e.onChatHeaderActionClick,A=e.onSearchClick,U=e.onBackClick,O=e.threadReplySelectType,B=e.queries,F=e.filterMessageList,P=e.disableMarkAsRead,G=P===void 0?!1:P,L=e.onReplyInThread,$=e.onQuoteMessageClick,j=e.onMessageAnimated,X=e.onMessageHighlighted,K=e.scrollBehavior,Z=K===void 0?"auto":K,te=e.reconnectOnIdle,ne=te===void 0?!0:te,le=en().state,Te=le.config,Ze=(n=e.replyType)!==null&&n!==void 0?n:XN(Te.groupChannel.replyType).upperCase,ce=Te.pubSub,ge=Te.logger;Te.userId;var Qe=Te.isOnline,xe=Te.imageCompression,tt=Te.markAsReadScheduler,ht=Te.groupChannel,bt=(r=(t=le==null?void 0:le.stores)===null||t===void 0?void 0:t.sdkStore)===null||r===void 0?void 0:r.sdk,Rt=(a=(i=le==null?void 0:le.stores)===null||i===void 0?void 0:i.sdkStore)===null||a===void 0?void 0:a.initialized,Ut=le==null?void 0:le.config,lt=W4().configs,kt=M.useState(C),$t=kt[0],mt=kt[1];M.useEffect(function(){mt(C)},[C,o]);var zt=M.useState(null),Tt=zt[0],Pt=zt[1],Xe=M.useState(g),je=Xe[0],Ve=Xe[1];M.useEffect(function(){Ve(g)},[g]);var Ct=B==null?void 0:B.messageListParams,ut=M.useState(null),qe=ut[0],pt=ut[1],jt=M.useState(!1),Ue=jt[0],hn=jt[1],un=tn().stringSet,vn=M.useReducer(Ove,H(H({},Rve),{stringSet:un})),Xt=vn[0],Wt=vn[1],At=M.useRef(null),xt=ht.enableMention,on=Xt.allMessages,xn=Xt.localMessages,st=Xt.loading,ct=Xt.initialized,at=Xt.unreadSince,Pe=Xt.unreadSinceDate,he=Xt.isInvalid,He=Xt.currentGroupChannel,ot=Xt.hasMorePrev,nt=Xt.oldestMessageTimeStamp,Zt=Xt.hasMoreNext,dt=Xt.latestMessageTimeStamp,On=Xt.emojiContainer,Yt=Xt.readStatus,rn=Xt.typingMembers,Pn=mP({channel:He,config:Te,moduleLevel:u}),_n=M.useMemo(function(){return Pn?Qfe(On):new Map},[On]),Tn=M.useMemo(function(){return Pn&&He?Xfe(He==null?void 0:He.members):new Map},[He==null?void 0:He.members]);M.useEffect(function(){_&&Pt(_)},[_]);var qn=xve({currentGroupChannel:He,oldestMessageTimeStamp:nt,userFilledMessageListQuery:Ct,replyType:Ze},{hasMorePrev:ot,logger:ge,messagesDispatcher:Wt,sdk:bt}),Be=qve({setInitialTimeStamp:mt,setAnimatedMessageId:Pt,allMessages:on,scrollRef:At},{logger:ge}),rt=Pve({currentGroupChannel:He,latestMessageTimeStamp:dt,userFilledMessageListQuery:Ct,hasMoreNext:Zt,replyType:Ze},{logger:ge,messagesDispatcher:Wt,sdk:bt}),et=Vve(He,ge);Lve({channelUrl:o,sdkInit:Rt,disableMarkAsRead:G},{messagesDispatcher:Wt,sdk:bt,logger:ge,markAsReadScheduler:tt}),M.useEffect(function(){pt(null)},[o]),Uve({currentGroupChannel:He,sdkInit:Rt,disableMarkAsRead:G},{messagesDispatcher:Wt,sdk:bt,logger:ge,scrollRef:At,setQuoteMessage:pt}),Ave({currentGroupChannel:He,userFilledMessageListQuery:Ct,initialTimeStamp:$t,replyType:Ze,setIsScrolled:hn},{logger:ge,scrollRef:At,messagesDispatcher:Wt}),Wve({channelUrl:o,sdkInit:Rt,pubSub:ce,dispatcher:Wt,scrollRef:At}),kve({isOnline:Qe,replyType:Ze,disableMarkAsRead:G,reconnectOnIdle:ne},{logger:ge,sdk:bt,scrollRef:At,currentGroupChannel:He,messagesDispatcher:Wt,userFilledMessageListQuery:Ct,markAsReadScheduler:tt});var Nt=Fve({currentGroupChannel:He,messagesDispatcher:Wt},{logger:ge}),Et=Bve({currentGroupChannel:He,messagesDispatcher:Wt,onBeforeUpdateUserMessage:S,isMentionEnabled:xt},{logger:ge,pubSub:ce}),Ot=Hve({currentGroupChannel:He,messagesDispatcher:Wt},{logger:ge,pubSub:ce}),nn=Gve({currentGroupChannel:He,isMentionEnabled:xt,onBeforeSendUserMessage:E},{logger:ge,pubSub:ce,scrollRef:At,messagesDispatcher:Wt}),Nn=nn[0],Je=nn[1],an=$ve({currentGroupChannel:He,imageCompression:xe,onBeforeSendFileMessage:y},{logger:ge,pubSub:ce,scrollRef:At,messagesDispatcher:Wt})[0],Ke=Kve({currentGroupChannel:He,onBeforeSendVoiceMessage:I},{logger:ge,pubSub:ce,scrollRef:At,messagesDispatcher:Wt})[0],J=w5({currentChannel:He,onBeforeSendMultipleFilesMessage:w,publishingModules:[_i.CHANNEL]},{logger:ge,pubSub:ce,scrollRef:At})[0];return m.createElement(K4,{storage:Y4,localConfigs:H(H({},lt),{groupChannel:H(H({},lt.groupChannel),{channel:H(H({},lt.groupChannel.channel),{enableMarkAsUnread:!1})})})},m.createElement(R5.Provider,{value:{channelUrl:o,isReactionEnabled:Pn,isMessageGroupingEnabled:h,isMultipleFilesMessageEnabled:f,showSearchIcon:p??Ut.groupChannelSettings.enableMessageSearch,highlightedMessage:g,startingPoint:C,onBeforeSendUserMessage:E,onBeforeSendFileMessage:y,onBeforeUpdateUserMessage:S,onChatHeaderActionClick:R,onSearchClick:A,onBackClick:U,replyType:Ze,threadReplySelectType:(s=O??wZ(ht.threadReplySelectType).upperCase)!==null&&s!==void 0?s:oo.THREAD,queries:B,filterMessageList:F,disableMarkAsRead:G,onReplyInThread:L,onQuoteMessageClick:$,onMessageAnimated:j,onMessageHighlighted:X,allMessages:on,localMessages:xn,loading:st,initialized:ct,unreadSince:at,unreadSinceDate:Pe,isInvalid:he,currentGroupChannel:He,hasMorePrev:ot,hasMoreNext:Zt,oldestMessageTimeStamp:nt,latestMessageTimeStamp:dt,emojiContainer:On,readStatus:Yt,typingMembers:rn,scrollToMessage:Be,quoteMessage:qe,setQuoteMessage:pt,deleteMessage:Nt,updateMessage:Et,resendMessage:Ot,messageInputRef:Nn,sendMessage:Je,sendFileMessage:an,sendVoiceMessage:Ke,sendMultipleFilesMessage:J,initialTimeStamp:$t,messageActionTypes:Mve,messagesDispatcher:Wt,setInitialTimeStamp:mt,setAnimatedMessageId:Pt,setHighLightedMessageId:Ve,animatedMessageId:Tt,highLightedMessageId:je,nicknamesMap:Tn,emojiAllMap:_n,onScrollCallback:qn,onScrollDownCallback:rt,scrollRef:At,scrollBehavior:Z,toggleReaction:et,isScrolled:Ue,setIsScrolled:hn}},m.createElement(dP,H({},e),l)))},Xl=function(){var e=m.useContext(R5);if(!e)throw new Error("ChannelContext not found. Use within the Channel module.");return e};m.createContext(null);M.createContext(null);M.createContext(void 0);var TC=function(){},Qve={checked:null,defaultChecked:!1,disabled:!1,onChange:TC,onFocus:TC,onBlur:TC};m.createContext(Qve);var mU;(function(e){e.SCORE="score",e.TIMESTAMP="ts"})(mU||(mU={}));M.createContext(null);var Wc;(function(e){e.NIL="NIL",e.LOADING="LOADING",e.INVALID="INVALID",e.INITIALIZED="INITIALIZED"})(Wc||(Wc={}));var bu;(function(e){e.NIL="NIL",e.LOADING="LOADING",e.INVALID="INVALID",e.INITIALIZED="INITIALIZED"})(bu||(bu={}));var Al;(function(e){e.NIL="NIL",e.LOADING="LOADING",e.INVALID="INVALID",e.INITIALIZED="INITIALIZED"})(Al||(Al={}));var wT=30,RT=30;function Xve(e,n){var t=e.currentChannel,r=n.logger;return M.useCallback(function(i,a,s){var o,l;if(s){(o=t==null?void 0:t.deleteReaction)===null||o===void 0||o.call(t,i,a).then(function(u){r.info("Thread | useToggleReactionsCallback: Delete reaction succeeded.",u)}).catch(function(u){r.warning("Thread | useToggleReactionsCallback: Delete reaction failed.",u)});return}(l=t==null?void 0:t.addReaction)===null||l===void 0||l.call(t,i,a).then(function(u){r.info("Thread | useToggleReactionsCallback: Add reaction succeeded.",u)}).catch(function(u){r.warning("Thread | useToggleReactionsCallback: Add reaction failed.",u)})},[t])}function Zve(e,n){var t=e.isMentionEnabled,r=e.currentChannel,i=e.onBeforeSendUserMessage,a=e.sendMessageStart,s=e.sendMessageFailure,o=n.logger,l=n.pubSub,u=M.useCallback(function(c){var h,f=c.message,p=c.quoteMessage,_=c.mentionTemplate,g=c.mentionedUsers,C=function(){var y={};y.message=f;var S=(g==null?void 0:g.length)||0;return t&&S&&(y.mentionedUsers=g),t&&_&&S&&(y.mentionedMessageTemplate=_),p&&(y.isReplyToChannel=!0,y.parentMessageId=p.messageId),y},E=(h=i==null?void 0:i(f,p))!==null&&h!==void 0?h:C();o.info("Thread | useSendUserMessageCallback: Sending user message start.",E),r!=null&&r.sendUserMessage&&(r==null||r.sendUserMessage(E).onPending(function(y){a(y)}).onFailed(function(y,S){o.info("Thread | useSendUserMessageCallback: Sending user message failed.",{message:S,error:y}),s(S)}).onSucceeded(function(y){o.info("Thread | useSendUserMessageCallback: Sending user message succeeded.",y),l.publish(Ai.SEND_USER_MESSAGE,{channel:r,message:y,publishingModules:[_i.THREAD]})}))},[t,r,i,a,s]);return u}function Jve(e,n){var t=e.currentChannel,r=e.onBeforeSendFileMessage,i=e.sendMessageStart,a=e.sendMessageFailure,s=n.logger,o=n.pubSub;return M.useCallback(function(l,u){return new Promise(function(c,h){var f,p=function(){var g={};return g.file=l,u&&(g.isReplyToChannel=!0,g.parentMessageId=u.messageId),g},_=(f=r==null?void 0:r(l,u))!==null&&f!==void 0?f:p();s.info("Thread | useSendFileMessageCallback: Sending file message start.",_),t==null?(s.warning("Thread | useSendFileMessageCallback: currentChannel is null. Skipping file message send."),c(null)):t.sendFileMessage(_).onPending(function(g){i(H(H({},g),{url:URL.createObjectURL(l),sendingStatus:sn.PENDING,isUserMessage:g.isUserMessage,isFileMessage:g.isFileMessage,isAdminMessage:g.isAdminMessage,isMultipleFilesMessage:g.isMultipleFilesMessage})),setTimeout(function(){return PE()},Yu)}).onFailed(function(g,C){C.localUrl=URL.createObjectURL(l),C.file=l,s.info("Thread | useSendFileMessageCallback: Sending file message failed.",{message:C,error:g}),a(C),h(g)}).onSucceeded(function(g){s.info("Thread | useSendFileMessageCallback: Sending file message succeeded.",g),o.publish(Ai.SEND_FILE_MESSAGE,{channel:t,message:g,publishingModules:[_i.THREAD]}),c(g)})})},[t,r,i,a])}var epe=function(e,n){var t=e.currentChannel,r=e.onBeforeSendVoiceMessage,i=e.sendMessageStart,a=e.sendMessageFailure,s=n.logger,o=n.pubSub,l=M.useCallback(function(u,c,h){var f=r&&typeof r=="function"?r(u,h):{file:u,fileName:Pp,mimeType:ju,metaArrays:[new pi({key:Z4,value:["".concat(c)]}),new pi({key:J4,value:[e6]})]};h&&(f.isReplyToChannel=!0,f.parentMessageId=h.messageId),s.info("Thread | useSendVoiceMessageCallback:  Start sending voice message",f),t==null||t.sendFileMessage(f).onPending(function(p){i(H(H({},p),{url:URL.createObjectURL(u),sendingStatus:sn.PENDING,isUserMessage:p.isUserMessage,isFileMessage:p.isFileMessage,isAdminMessage:p.isAdminMessage,isMultipleFilesMessage:p.isMultipleFilesMessage})),setTimeout(function(){return PE()},Yu)}).onFailed(function(p,_){_.localUrl=URL.createObjectURL(u),_.file=u,s.info("Thread | useSendVoiceMessageCallback: Sending voice message failed.",{message:_,error:p}),a(_)}).onSucceeded(function(p){s.info("Thread | useSendVoiceMessageCallback: Sending voice message succeeded.",p),o.publish(Ai.SEND_FILE_MESSAGE,{channel:t,message:p,publishingModules:[_i.THREAD]})})},[t,r,i,a]);return l};function tpe(e,n){var t=e.currentChannel,r=e.resendMessageStart,i=e.sendMessageSuccess,a=e.sendMessageFailure,s=n.logger,o=n.pubSub;return M.useCallback(function(l){var u,c,h,f,p;if(!(l!=null&&l.isResendable)){s.warning("Thread | useResendMessageCallback: Message is not resendable.",l);return}if(s.info("Thread | useResendMessageCallback: Resending failedMessage start.",l),!((u=l==null?void 0:l.isUserMessage)===null||u===void 0)&&u.call(l)||(l==null?void 0:l.messageType)===jn.USER)try{t==null||t.resendMessage(l).onPending(function(_){s.info("Thread | useResendMessageCallback: Resending user message started.",_),r(_)}).onSucceeded(function(_){s.info("Thread | useResendMessageCallback: Resending user message succeeded.",_),i(_),o.publish(Ai.SEND_USER_MESSAGE,{channel:t,message:_,publishingModules:[_i.THREAD]})}).onFailed(function(_){s.warning("Thread | useResendMessageCallback: Resending user message failed.",_),l.sendingStatus=sn.FAILED,a(l)})}catch(_){s.warning("Thread | useResendMessageCallback: Resending user message failed.",_),l.sendingStatus=sn.FAILED,a(l)}else if(!((c=l==null?void 0:l.isFileMessage)===null||c===void 0)&&c.call(l))try{(h=t==null?void 0:t.resendMessage)===null||h===void 0||h.call(t,l).onPending(function(_){s.info("Thread | useResendMessageCallback: Resending file message started.",_),r(_)}).onSucceeded(function(_){s.info("Thread | useResendMessageCallback: Resending file message succeeded.",_),i(_),o.publish(Ai.SEND_FILE_MESSAGE,{channel:t,message:l,publishingModules:[_i.THREAD]})}).onFailed(function(_){s.warning("Thread | useResendMessageCallback: Resending file message failed.",_),l.sendingStatus=sn.FAILED,a(l)})}catch(_){s.warning("Thread | useResendMessageCallback: Resending file message failed.",_),l.sendingStatus=sn.FAILED,a(l)}else if(!((f=l==null?void 0:l.isMultipleFilesMessage)===null||f===void 0)&&f.call(l))try{(p=t==null?void 0:t.resendMessage)===null||p===void 0||p.call(t,l).onPending(function(_){s.info("Thread | useResendMessageCallback: Resending multiple files message started.",_),r(_)}).onFileUploaded(function(_,g,C,E){s.info("Thread | useResendMessageCallback: onFileUploaded during resending multiple files message.",{requestId:_,index:g,error:E,uploadableFileInfo:C}),o.publish(Ai.ON_FILE_INFO_UPLOADED,{response:{channelUrl:t.url,requestId:_,index:g,uploadableFileInfo:C,error:E},publishingModules:[_i.THREAD]})}).onSucceeded(function(_){s.info("Thread | useResendMessageCallback: Resending MFM succeeded.",_),i(_),o.publish(Ai.SEND_FILE_MESSAGE,{channel:t,message:_,publishingModules:[_i.THREAD]})}).onFailed(function(_,g){s.warning("Thread | useResendMessageCallback: Resending MFM failed.",_),a(g)})}catch(_){s.warning("Thread | useResendMessageCallback: Resending MFM failed.",_),a(l)}else s.warning("Thread | useResendMessageCallback: Message is not resendable.",l),l.sendingStatus=sn.FAILED,a(l)},[t,r,i,a])}function npe(e,n){var t=e.currentChannel,r=e.isMentionEnabled,i=e.onMessageUpdated,a=n.logger,s=n.pubSub;return M.useCallback(function(o){var l,u=o.messageId,c=o.message,h=o.mentionedUsers,f=o.mentionTemplate,p=function(){var g={};return g.message=c,r&&h&&(h==null?void 0:h.length)>0&&(g.mentionedUsers=h),r&&f?g.mentionedMessageTemplate=f:g.mentionedMessageTemplate=c,g},_=p();if(a.info("Thread | useUpdateMessageCallback: Message update start.",_),t==null){a.warning("Thread | useUpdateMessageCallback: currentChannel is null.");return}(l=t.updateUserMessage)===null||l===void 0||l.call(t,u,_).then(function(g){a.info("Thread | useUpdateMessageCallback: Message update succeeded.",g),i(t,g),s.publish(Ai.UPDATE_USER_MESSAGE,{fromSelector:!0,channel:t,message:g,publishingModules:[_i.THREAD]})})},[t,r,i])}function rpe(e,n){var t=e.currentChannel,r=e.onMessageDeletedByReqId,i=e.onMessageDeleted,a=n.logger;return M.useCallback(function(s){a.info("Thread | useDeleteMessageCallback: Deleting message.",s);var o=s.sendingStatus;return new Promise(function(l,u){var c;a.info("Thread | useDeleteMessageCallback: Deleting message requestState:",o),(o==="failed"||o==="pending")&&(a.info("Thread | useDeleteMessageCallback: Deleted message from local:",s),r(s.reqId),l()),t==null&&(a.info("Thread | useDeleteMessageCallback: No current channel"),l()),a.info("Thread | useDeleteMessageCallback: Deleting message from remote:",o),(c=t.deleteMessage)===null||c===void 0||c.call(t,s).then(function(){a.info("Thread | useDeleteMessageCallback: Deleting message success!",s),i(t,s.messageId),l()}).catch(function(h){a.warning("Thread | useDeleteMessageCallback: Deleting message failed!",h),u(h)})})},[t,r,i])}function NC(e){return H({prevResultSize:wT,nextResultSize:RT,includeMetaArray:!0,isInclusive:!0},e)}var ipe=function(e){var n=e.isReactionEnabled,t=e.anchorMessage,r=e.parentMessage,i=e.logger,a=e.oldestMessageTimeStamp,s=e.latestMessageTimeStamp,o=e.threadListState,l=e.initializeThreadListStart,u=e.initializeThreadListSuccess,c=e.initializeThreadListFailure,h=e.getPrevMessagesStart,f=e.getPrevMessagesSuccess,p=e.getPrevMessagesFailure,_=e.getNextMessagesStart,g=e.getNextMessagesSuccess,C=e.getNextMessagesFailure,E=en().state.stores,y=(t==null?void 0:t.createdAt)||0,S=M.useCallback(function(R){return vr(void 0,void 0,void 0,function(){var A,U,O,B,F;return pr(this,function(P){switch(P.label){case 0:if(!E.sdkStore.initialized||!r)return[2];l(),P.label=1;case 1:return P.trys.push([1,3,,4]),A=NC({includeReactions:n}),i.info("Thread | useGetThreadList: Initialize thread list start.",{timestamp:y,params:A}),[4,r.getThreadedMessagesByTimestamp(y,A)];case 2:return U=P.sent(),O=U.threadedMessages,B=U.parentMessage,i.info("Thread | useGetThreadList: Initialize thread list succeeded.",{staleParentMessage:r,threadedMessages:O}),u(B,t,O),setTimeout(function(){return R==null?void 0:R(O)}),[3,4];case 3:return F=P.sent(),i.info("Thread | useGetThreadList: Initialize thread list failed.",F),c(),[3,4];case 4:return[2]}})})},[E.sdkStore.initialized,r,t,n,l,u,c]),I=M.useCallback(function(R){return vr(void 0,void 0,void 0,function(){var A,U,O,B,F;return pr(this,function(P){switch(P.label){case 0:if(o!==Al.INITIALIZED||a===0||!r)return[2];h(),P.label=1;case 1:return P.trys.push([1,3,,4]),A=NC({nextResultSize:0,includeReactions:n}),[4,r.getThreadedMessagesByTimestamp(a,A)];case 2:return U=P.sent(),O=U.threadedMessages,B=U.parentMessage,i.info("Thread | useGetPrevThreadsCallback: Fetch prev threads succeeded.",{parentMessage:B,threadedMessages:O}),f(O),setTimeout(function(){return R==null?void 0:R(O)}),[3,4];case 3:return F=P.sent(),i.info("Thread | useGetPrevThreadsCallback: Fetch prev threads failed.",F),p(),[3,4];case 4:return[2]}})})},[o,a,n,r,h,f,p]),w=M.useCallback(function(R){return vr(void 0,void 0,void 0,function(){var A,U,O,B,F;return pr(this,function(P){switch(P.label){case 0:if(o!==Al.INITIALIZED||s===0||!r)return[2];_(),P.label=1;case 1:return P.trys.push([1,3,,4]),A=NC({prevResultSize:0,includeReactions:n}),[4,r.getThreadedMessagesByTimestamp(s,A)];case 2:return U=P.sent(),O=U.threadedMessages,B=U.parentMessage,i.info("Thread | useGetNextThreadsCallback: Fetch next threads succeeded.",{parentMessage:B,threadedMessages:O}),g(O),setTimeout(function(){return R==null?void 0:R(O)}),[3,4];case 3:return F=P.sent(),i.info("Thread | useGetNextThreadsCallback: Fetch next threads failed.",F),C(),[3,4];case 4:return[2]}})})},[o,s,n,r,_,g,C]);return{initializeThreadFetcher:S,fetchPrevThreads:I,fetchNextThreads:w}},G0={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */G0.exports;(function(e,n){(function(){var t,r="4.17.21",i=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",u=500,c="__lodash_placeholder__",h=1,f=2,p=4,_=1,g=2,C=1,E=2,y=4,S=8,I=16,w=32,R=64,A=128,U=256,O=512,B=30,F="...",P=800,G=16,L=1,$=2,j=3,X=1/0,K=9007199254740991,Z=17976931348623157e292,te=NaN,ne=4294967295,le=ne-1,Te=ne>>>1,Ze=[["ary",A],["bind",C],["bindKey",E],["curry",S],["curryRight",I],["flip",O],["partial",w],["partialRight",R],["rearg",U]],ce="[object Arguments]",ge="[object Array]",Qe="[object AsyncFunction]",xe="[object Boolean]",tt="[object Date]",ht="[object DOMException]",bt="[object Error]",Rt="[object Function]",Ut="[object GeneratorFunction]",lt="[object Map]",kt="[object Number]",$t="[object Null]",mt="[object Object]",zt="[object Promise]",Tt="[object Proxy]",Pt="[object RegExp]",Xe="[object Set]",je="[object String]",Ve="[object Symbol]",Ct="[object Undefined]",ut="[object WeakMap]",qe="[object WeakSet]",pt="[object ArrayBuffer]",jt="[object DataView]",Ue="[object Float32Array]",hn="[object Float64Array]",un="[object Int8Array]",vn="[object Int16Array]",Xt="[object Int32Array]",Wt="[object Uint8Array]",At="[object Uint8ClampedArray]",xt="[object Uint16Array]",on="[object Uint32Array]",xn=/\b__p \+= '';/g,st=/\b(__p \+=) '' \+/g,ct=/(__e\(.*?\)|\b__t\)) \+\n'';/g,at=/&(?:amp|lt|gt|quot|#39);/g,Pe=/[&<>"']/g,he=RegExp(at.source),He=RegExp(Pe.source),ot=/<%-([\s\S]+?)%>/g,nt=/<%([\s\S]+?)%>/g,Zt=/<%=([\s\S]+?)%>/g,dt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,On=/^\w*$/,Yt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rn=/[\\^$.*+?()[\]{}|]/g,Pn=RegExp(rn.source),_n=/^\s+/,Tn=/\s/,qn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Be=/\{\n\/\* \[wrapped with (.+)\] \*/,rt=/,? & /,et=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,Nt=/[()=,{}\[\]\/\s]/,Et=/\\(\\)?/g,Ot=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,nn=/\w*$/,Nn=/^[-+]0x[0-9a-f]+$/i,Je=/^0b[01]+$/i,an=/^\[object .+?Constructor\]$/,Ke=/^0o[0-7]+$/i,J=/^(?:0|[1-9]\d*)$/,Se=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,We=/($^)/,qt=/['\n\r\u2028\u2029\\]/g,Cn="\\ud800-\\udfff",yn="\\u0300-\\u036f",Wn="\\ufe20-\\ufe2f",Xn="\\u20d0-\\u20ff",_t=yn+Wn+Xn,Jt="\\u2700-\\u27bf",gt="a-z\\xdf-\\xf6\\xf8-\\xff",Qt="\\xac\\xb1\\xd7\\xf7",Tr="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Qr="\\u2000-\\u206f",gi=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",kr="A-Z\\xc0-\\xd6\\xd8-\\xde",Ws="\\ufe0e\\ufe0f",Cs=Qt+Tr+Qr+gi,Ys="[']",oc="["+Cn+"]",lc="["+Cs+"]",To="["+_t+"]",uc="\\d+",Zl="["+Jt+"]",cc="["+gt+"]",No="[^"+Cn+Cs+uc+Jt+gt+kr+"]",Jl="\\ud83c[\\udffb-\\udfff]",yf="(?:"+To+"|"+Jl+")",Hd="[^"+Cn+"]",dc="(?:\\ud83c[\\udde6-\\uddff]){2}",eu="[\\ud800-\\udbff][\\udc00-\\udfff]",Io="["+kr+"]",Ma="\\u200d",hc="(?:"+cc+"|"+No+")",nl="(?:"+Io+"|"+No+")",Mo="(?:"+Ys+"(?:d|ll|m|re|s|t|ve))?",Ao="(?:"+Ys+"(?:D|LL|M|RE|S|T|VE))?",wo=yf+"?",fc="["+Ws+"]?",vc="(?:"+Ma+"(?:"+[Hd,dc,eu].join("|")+")"+fc+wo+")*",pc="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mc="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ss=fc+wo+vc,Gd="(?:"+[Zl,dc,eu].join("|")+")"+Ss,bf="(?:"+[Hd+To+"?",To,dc,eu,oc].join("|")+")",mm=RegExp(Ys,"g"),_m=RegExp(To,"g"),Vr=RegExp(Jl+"(?="+Jl+")|"+bf+Ss,"g"),Cf=RegExp([Io+"?"+cc+"+"+Mo+"(?="+[lc,Io,"$"].join("|")+")",nl+"+"+Ao+"(?="+[lc,Io+hc,"$"].join("|")+")",Io+"?"+hc+"+"+Mo,Io+"+"+Ao,mc,pc,uc,Gd].join("|"),"g"),Sf=RegExp("["+Ma+Cn+_t+Ws+"]"),Tf=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,$d=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Vd=-1,ur={};ur[Ue]=ur[hn]=ur[un]=ur[vn]=ur[Xt]=ur[Wt]=ur[At]=ur[xt]=ur[on]=!0,ur[ce]=ur[ge]=ur[pt]=ur[xe]=ur[jt]=ur[tt]=ur[bt]=ur[Rt]=ur[lt]=ur[kt]=ur[mt]=ur[Pt]=ur[Xe]=ur[je]=ur[ut]=!1;var nr={};nr[ce]=nr[ge]=nr[pt]=nr[jt]=nr[xe]=nr[tt]=nr[Ue]=nr[hn]=nr[un]=nr[vn]=nr[Xt]=nr[lt]=nr[kt]=nr[mt]=nr[Pt]=nr[Xe]=nr[je]=nr[Ve]=nr[Wt]=nr[At]=nr[xt]=nr[on]=!0,nr[bt]=nr[Rt]=nr[ut]=!1;var gm={:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"},Nf={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Em={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},If={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ym=parseFloat,Mf=parseInt,Af=typeof Il=="object"&&Il&&Il.Object===Object&&Il,wf=typeof self=="object"&&self&&self.Object===Object&&self,oi=Af||wf||Function("return this")(),_c=n&&!n.nodeType&&n,Ro=_c&&!0&&e&&!e.nodeType&&e,zd=Ro&&Ro.exports===_c,jd=zd&&Af.process,Wi=function(){try{var ae=Ro&&Ro.require&&Ro.require("util").types;return ae||jd&&jd.binding&&jd.binding("util")}catch{}}(),Rf=Wi&&Wi.isArrayBuffer,qd=Wi&&Wi.isDate,Of=Wi&&Wi.isMap,Kd=Wi&&Wi.isRegExp,Df=Wi&&Wi.isSet,Dn=Wi&&Wi.isTypedArray;function It(ae,Ie,Ee){switch(Ee.length){case 0:return ae.call(Ie);case 1:return ae.call(Ie,Ee[0]);case 2:return ae.call(Ie,Ee[0],Ee[1]);case 3:return ae.call(Ie,Ee[0],Ee[1],Ee[2])}return ae.apply(Ie,Ee)}function pe(ae,Ie,Ee,Mt){for(var bn=-1,Zn=ae==null?0:ae.length;++bn<Zn;){var ci=ae[bn];Ie(Mt,ci,Ee(ci),ae)}return Mt}function ie(ae,Ie){for(var Ee=-1,Mt=ae==null?0:ae.length;++Ee<Mt&&Ie(ae[Ee],Ee,ae)!==!1;);return ae}function Lt(ae,Ie){for(var Ee=ae==null?0:ae.length;Ee--&&Ie(ae[Ee],Ee,ae)!==!1;);return ae}function yt(ae,Ie){for(var Ee=-1,Mt=ae==null?0:ae.length;++Ee<Mt;)if(!Ie(ae[Ee],Ee,ae))return!1;return!0}function Dt(ae,Ie){for(var Ee=-1,Mt=ae==null?0:ae.length,bn=0,Zn=[];++Ee<Mt;){var ci=ae[Ee];Ie(ci,Ee,ae)&&(Zn[bn++]=ci)}return Zn}function rr(ae,Ie){var Ee=ae==null?0:ae.length;return!!Ee&&Wd(ae,Ie,0)>-1}function Fn(ae,Ie,Ee){for(var Mt=-1,bn=ae==null?0:ae.length;++Mt<bn;)if(Ee(Ie,ae[Mt]))return!0;return!1}function Cr(ae,Ie){for(var Ee=-1,Mt=ae==null?0:ae.length,bn=Array(Mt);++Ee<Mt;)bn[Ee]=Ie(ae[Ee],Ee,ae);return bn}function tu(ae,Ie){for(var Ee=-1,Mt=Ie.length,bn=ae.length;++Ee<Mt;)ae[bn+Ee]=Ie[Ee];return ae}function VE(ae,Ie,Ee,Mt){var bn=-1,Zn=ae==null?0:ae.length;for(Mt&&Zn&&(Ee=ae[++bn]);++bn<Zn;)Ee=Ie(Ee,ae[bn],bn,ae);return Ee}function k5(ae,Ie,Ee,Mt){var bn=ae==null?0:ae.length;for(Mt&&bn&&(Ee=ae[--bn]);bn--;)Ee=Ie(Ee,ae[bn],bn,ae);return Ee}function zE(ae,Ie){for(var Ee=-1,Mt=ae==null?0:ae.length;++Ee<Mt;)if(Ie(ae[Ee],Ee,ae))return!0;return!1}var x5=jE("length");function P5(ae){return ae.split("")}function F5(ae){return ae.match(et)||[]}function XI(ae,Ie,Ee){var Mt;return Ee(ae,function(bn,Zn,ci){if(Ie(bn,Zn,ci))return Mt=Zn,!1}),Mt}function bm(ae,Ie,Ee,Mt){for(var bn=ae.length,Zn=Ee+(Mt?1:-1);Mt?Zn--:++Zn<bn;)if(Ie(ae[Zn],Zn,ae))return Zn;return-1}function Wd(ae,Ie,Ee){return Ie===Ie?Q5(ae,Ie,Ee):bm(ae,ZI,Ee)}function B5(ae,Ie,Ee,Mt){for(var bn=Ee-1,Zn=ae.length;++bn<Zn;)if(Mt(ae[bn],Ie))return bn;return-1}function ZI(ae){return ae!==ae}function JI(ae,Ie){var Ee=ae==null?0:ae.length;return Ee?KE(ae,Ie)/Ee:te}function jE(ae){return function(Ie){return Ie==null?t:Ie[ae]}}function qE(ae){return function(Ie){return ae==null?t:ae[Ie]}}function eM(ae,Ie,Ee,Mt,bn){return bn(ae,function(Zn,ci,_r){Ee=Mt?(Mt=!1,Zn):Ie(Ee,Zn,ci,_r)}),Ee}function H5(ae,Ie){var Ee=ae.length;for(ae.sort(Ie);Ee--;)ae[Ee]=ae[Ee].value;return ae}function KE(ae,Ie){for(var Ee,Mt=-1,bn=ae.length;++Mt<bn;){var Zn=Ie(ae[Mt]);Zn!==t&&(Ee=Ee===t?Zn:Ee+Zn)}return Ee}function WE(ae,Ie){for(var Ee=-1,Mt=Array(ae);++Ee<ae;)Mt[Ee]=Ie(Ee);return Mt}function G5(ae,Ie){return Cr(Ie,function(Ee){return[Ee,ae[Ee]]})}function tM(ae){return ae&&ae.slice(0,aM(ae)+1).replace(_n,"")}function Ka(ae){return function(Ie){return ae(Ie)}}function YE(ae,Ie){return Cr(Ie,function(Ee){return ae[Ee]})}function Uf(ae,Ie){return ae.has(Ie)}function nM(ae,Ie){for(var Ee=-1,Mt=ae.length;++Ee<Mt&&Wd(Ie,ae[Ee],0)>-1;);return Ee}function rM(ae,Ie){for(var Ee=ae.length;Ee--&&Wd(Ie,ae[Ee],0)>-1;);return Ee}function $5(ae,Ie){for(var Ee=ae.length,Mt=0;Ee--;)ae[Ee]===Ie&&++Mt;return Mt}var V5=qE(gm),z5=qE(Nf);function j5(ae){return"\\"+If[ae]}function q5(ae,Ie){return ae==null?t:ae[Ie]}function Yd(ae){return Sf.test(ae)}function K5(ae){return Tf.test(ae)}function W5(ae){for(var Ie,Ee=[];!(Ie=ae.next()).done;)Ee.push(Ie.value);return Ee}function QE(ae){var Ie=-1,Ee=Array(ae.size);return ae.forEach(function(Mt,bn){Ee[++Ie]=[bn,Mt]}),Ee}function iM(ae,Ie){return function(Ee){return ae(Ie(Ee))}}function nu(ae,Ie){for(var Ee=-1,Mt=ae.length,bn=0,Zn=[];++Ee<Mt;){var ci=ae[Ee];(ci===Ie||ci===c)&&(ae[Ee]=c,Zn[bn++]=Ee)}return Zn}function Cm(ae){var Ie=-1,Ee=Array(ae.size);return ae.forEach(function(Mt){Ee[++Ie]=Mt}),Ee}function Y5(ae){var Ie=-1,Ee=Array(ae.size);return ae.forEach(function(Mt){Ee[++Ie]=[Mt,Mt]}),Ee}function Q5(ae,Ie,Ee){for(var Mt=Ee-1,bn=ae.length;++Mt<bn;)if(ae[Mt]===Ie)return Mt;return-1}function X5(ae,Ie,Ee){for(var Mt=Ee+1;Mt--;)if(ae[Mt]===Ie)return Mt;return Mt}function Qd(ae){return Yd(ae)?J5(ae):x5(ae)}function Qs(ae){return Yd(ae)?eF(ae):P5(ae)}function aM(ae){for(var Ie=ae.length;Ie--&&Tn.test(ae.charAt(Ie)););return Ie}var Z5=qE(Em);function J5(ae){for(var Ie=Vr.lastIndex=0;Vr.test(ae);)++Ie;return Ie}function eF(ae){return ae.match(Vr)||[]}function tF(ae){return ae.match(Cf)||[]}var nF=function ae(Ie){Ie=Ie==null?oi:Xd.defaults(oi.Object(),Ie,Xd.pick(oi,$d));var Ee=Ie.Array,Mt=Ie.Date,bn=Ie.Error,Zn=Ie.Function,ci=Ie.Math,_r=Ie.Object,XE=Ie.RegExp,rF=Ie.String,Ts=Ie.TypeError,Sm=Ee.prototype,iF=Zn.prototype,Zd=_r.prototype,Tm=Ie["__core-js_shared__"],Nm=iF.toString,cr=Zd.hasOwnProperty,aF=0,sM=function(){var d=/[^.]+$/.exec(Tm&&Tm.keys&&Tm.keys.IE_PROTO||"");return d?"Symbol(src)_1."+d:""}(),Im=Zd.toString,sF=Nm.call(_r),oF=oi._,lF=XE("^"+Nm.call(cr).replace(rn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Mm=zd?Ie.Buffer:t,ru=Ie.Symbol,Am=Ie.Uint8Array,oM=Mm?Mm.allocUnsafe:t,wm=iM(_r.getPrototypeOf,_r),lM=_r.create,uM=Zd.propertyIsEnumerable,Rm=Sm.splice,cM=ru?ru.isConcatSpreadable:t,Lf=ru?ru.iterator:t,gc=ru?ru.toStringTag:t,Om=function(){try{var d=Sc(_r,"defineProperty");return d({},"",{}),d}catch{}}(),uF=Ie.clearTimeout!==oi.clearTimeout&&Ie.clearTimeout,cF=Mt&&Mt.now!==oi.Date.now&&Mt.now,dF=Ie.setTimeout!==oi.setTimeout&&Ie.setTimeout,Dm=ci.ceil,Um=ci.floor,ZE=_r.getOwnPropertySymbols,hF=Mm?Mm.isBuffer:t,dM=Ie.isFinite,fF=Sm.join,vF=iM(_r.keys,_r),di=ci.max,Yi=ci.min,pF=Mt.now,mF=Ie.parseInt,hM=ci.random,_F=Sm.reverse,JE=Sc(Ie,"DataView"),kf=Sc(Ie,"Map"),ey=Sc(Ie,"Promise"),Jd=Sc(Ie,"Set"),xf=Sc(Ie,"WeakMap"),Pf=Sc(_r,"create"),Lm=xf&&new xf,eh={},gF=Tc(JE),EF=Tc(kf),yF=Tc(ey),bF=Tc(Jd),CF=Tc(xf),km=ru?ru.prototype:t,Ff=km?km.valueOf:t,fM=km?km.toString:t;function V(d){if(zr(d)&&!Sn(d)&&!(d instanceof $n)){if(d instanceof Ns)return d;if(cr.call(d,"__wrapped__"))return v2(d)}return new Ns(d)}var th=function(){function d(){}return function(v){if(!xr(v))return{};if(lM)return lM(v);d.prototype=v;var b=new d;return d.prototype=t,b}}();function xm(){}function Ns(d,v){this.__wrapped__=d,this.__actions__=[],this.__chain__=!!v,this.__index__=0,this.__values__=t}V.templateSettings={escape:ot,evaluate:nt,interpolate:Zt,variable:"",imports:{_:V}},V.prototype=xm.prototype,V.prototype.constructor=V,Ns.prototype=th(xm.prototype),Ns.prototype.constructor=Ns;function $n(d){this.__wrapped__=d,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=ne,this.__views__=[]}function SF(){var d=new $n(this.__wrapped__);return d.__actions__=Aa(this.__actions__),d.__dir__=this.__dir__,d.__filtered__=this.__filtered__,d.__iteratees__=Aa(this.__iteratees__),d.__takeCount__=this.__takeCount__,d.__views__=Aa(this.__views__),d}function TF(){if(this.__filtered__){var d=new $n(this);d.__dir__=-1,d.__filtered__=!0}else d=this.clone(),d.__dir__*=-1;return d}function NF(){var d=this.__wrapped__.value(),v=this.__dir__,b=Sn(d),D=v<0,x=b?d.length:0,W=P7(0,x,this.__views__),ee=W.start,re=W.end,se=re-ee,Re=D?re:ee-1,De=this.__iteratees__,Fe=De.length,ft=0,Ft=Yi(se,this.__takeCount__);if(!b||!D&&x==se&&Ft==se)return PM(d,this.__actions__);var cn=[];e:for(;se--&&ft<Ft;){Re+=v;for(var An=-1,dn=d[Re];++An<Fe;){var Bn=De[An],Vn=Bn.iteratee,Qa=Bn.type,la=Vn(dn);if(Qa==$)dn=la;else if(!la){if(Qa==L)continue e;break e}}cn[ft++]=dn}return cn}$n.prototype=th(xm.prototype),$n.prototype.constructor=$n;function Ec(d){var v=-1,b=d==null?0:d.length;for(this.clear();++v<b;){var D=d[v];this.set(D[0],D[1])}}function IF(){this.__data__=Pf?Pf(null):{},this.size=0}function MF(d){var v=this.has(d)&&delete this.__data__[d];return this.size-=v?1:0,v}function AF(d){var v=this.__data__;if(Pf){var b=v[d];return b===l?t:b}return cr.call(v,d)?v[d]:t}function wF(d){var v=this.__data__;return Pf?v[d]!==t:cr.call(v,d)}function RF(d,v){var b=this.__data__;return this.size+=this.has(d)?0:1,b[d]=Pf&&v===t?l:v,this}Ec.prototype.clear=IF,Ec.prototype.delete=MF,Ec.prototype.get=AF,Ec.prototype.has=wF,Ec.prototype.set=RF;function rl(d){var v=-1,b=d==null?0:d.length;for(this.clear();++v<b;){var D=d[v];this.set(D[0],D[1])}}function OF(){this.__data__=[],this.size=0}function DF(d){var v=this.__data__,b=Pm(v,d);if(b<0)return!1;var D=v.length-1;return b==D?v.pop():Rm.call(v,b,1),--this.size,!0}function UF(d){var v=this.__data__,b=Pm(v,d);return b<0?t:v[b][1]}function LF(d){return Pm(this.__data__,d)>-1}function kF(d,v){var b=this.__data__,D=Pm(b,d);return D<0?(++this.size,b.push([d,v])):b[D][1]=v,this}rl.prototype.clear=OF,rl.prototype.delete=DF,rl.prototype.get=UF,rl.prototype.has=LF,rl.prototype.set=kF;function il(d){var v=-1,b=d==null?0:d.length;for(this.clear();++v<b;){var D=d[v];this.set(D[0],D[1])}}function xF(){this.size=0,this.__data__={hash:new Ec,map:new(kf||rl),string:new Ec}}function PF(d){var v=Ym(this,d).delete(d);return this.size-=v?1:0,v}function FF(d){return Ym(this,d).get(d)}function BF(d){return Ym(this,d).has(d)}function HF(d,v){var b=Ym(this,d),D=b.size;return b.set(d,v),this.size+=b.size==D?0:1,this}il.prototype.clear=xF,il.prototype.delete=PF,il.prototype.get=FF,il.prototype.has=BF,il.prototype.set=HF;function yc(d){var v=-1,b=d==null?0:d.length;for(this.__data__=new il;++v<b;)this.add(d[v])}function GF(d){return this.__data__.set(d,l),this}function $F(d){return this.__data__.has(d)}yc.prototype.add=yc.prototype.push=GF,yc.prototype.has=$F;function Xs(d){var v=this.__data__=new rl(d);this.size=v.size}function VF(){this.__data__=new rl,this.size=0}function zF(d){var v=this.__data__,b=v.delete(d);return this.size=v.size,b}function jF(d){return this.__data__.get(d)}function qF(d){return this.__data__.has(d)}function KF(d,v){var b=this.__data__;if(b instanceof rl){var D=b.__data__;if(!kf||D.length<i-1)return D.push([d,v]),this.size=++b.size,this;b=this.__data__=new il(D)}return b.set(d,v),this.size=b.size,this}Xs.prototype.clear=VF,Xs.prototype.delete=zF,Xs.prototype.get=jF,Xs.prototype.has=qF,Xs.prototype.set=KF;function vM(d,v){var b=Sn(d),D=!b&&Nc(d),x=!b&&!D&&lu(d),W=!b&&!D&&!x&&ah(d),ee=b||D||x||W,re=ee?WE(d.length,rF):[],se=re.length;for(var Re in d)(v||cr.call(d,Re))&&!(ee&&(Re=="length"||x&&(Re=="offset"||Re=="parent")||W&&(Re=="buffer"||Re=="byteLength"||Re=="byteOffset")||ll(Re,se)))&&re.push(Re);return re}function pM(d){var v=d.length;return v?d[dy(0,v-1)]:t}function WF(d,v){return Qm(Aa(d),bc(v,0,d.length))}function YF(d){return Qm(Aa(d))}function ty(d,v,b){(b!==t&&!Zs(d[v],b)||b===t&&!(v in d))&&al(d,v,b)}function Bf(d,v,b){var D=d[v];(!(cr.call(d,v)&&Zs(D,b))||b===t&&!(v in d))&&al(d,v,b)}function Pm(d,v){for(var b=d.length;b--;)if(Zs(d[b][0],v))return b;return-1}function QF(d,v,b,D){return iu(d,function(x,W,ee){v(D,x,b(x),ee)}),D}function mM(d,v){return d&&Do(v,Ei(v),d)}function XF(d,v){return d&&Do(v,Ra(v),d)}function al(d,v,b){v=="__proto__"&&Om?Om(d,v,{configurable:!0,enumerable:!0,value:b,writable:!0}):d[v]=b}function ny(d,v){for(var b=-1,D=v.length,x=Ee(D),W=d==null;++b<D;)x[b]=W?t:xy(d,v[b]);return x}function bc(d,v,b){return d===d&&(b!==t&&(d=d<=b?d:b),v!==t&&(d=d>=v?d:v)),d}function Is(d,v,b,D,x,W){var ee,re=v&h,se=v&f,Re=v&p;if(b&&(ee=x?b(d,D,x,W):b(d)),ee!==t)return ee;if(!xr(d))return d;var De=Sn(d);if(De){if(ee=B7(d),!re)return Aa(d,ee)}else{var Fe=Qi(d),ft=Fe==Rt||Fe==Ut;if(lu(d))return HM(d,re);if(Fe==mt||Fe==ce||ft&&!x){if(ee=se||ft?{}:a2(d),!re)return se?A7(d,XF(ee,d)):M7(d,mM(ee,d))}else{if(!nr[Fe])return x?d:{};ee=H7(d,Fe,re)}}W||(W=new Xs);var Ft=W.get(d);if(Ft)return Ft;W.set(d,ee),L2(d)?d.forEach(function(dn){ee.add(Is(dn,v,b,dn,d,W))}):D2(d)&&d.forEach(function(dn,Bn){ee.set(Bn,Is(dn,v,b,Bn,d,W))});var cn=Re?se?Cy:by:se?Ra:Ei,An=De?t:cn(d);return ie(An||d,function(dn,Bn){An&&(Bn=dn,dn=d[Bn]),Bf(ee,Bn,Is(dn,v,b,Bn,d,W))}),ee}function ZF(d){var v=Ei(d);return function(b){return _M(b,d,v)}}function _M(d,v,b){var D=b.length;if(d==null)return!D;for(d=_r(d);D--;){var x=b[D],W=v[x],ee=d[x];if(ee===t&&!(x in d)||!W(ee))return!1}return!0}function gM(d,v,b){if(typeof d!="function")throw new Ts(s);return qf(function(){d.apply(t,b)},v)}function Hf(d,v,b,D){var x=-1,W=rr,ee=!0,re=d.length,se=[],Re=v.length;if(!re)return se;b&&(v=Cr(v,Ka(b))),D?(W=Fn,ee=!1):v.length>=i&&(W=Uf,ee=!1,v=new yc(v));e:for(;++x<re;){var De=d[x],Fe=b==null?De:b(De);if(De=D||De!==0?De:0,ee&&Fe===Fe){for(var ft=Re;ft--;)if(v[ft]===Fe)continue e;se.push(De)}else W(v,Fe,D)||se.push(De)}return se}var iu=jM(Oo),EM=jM(iy,!0);function JF(d,v){var b=!0;return iu(d,function(D,x,W){return b=!!v(D,x,W),b}),b}function Fm(d,v,b){for(var D=-1,x=d.length;++D<x;){var W=d[D],ee=v(W);if(ee!=null&&(re===t?ee===ee&&!Ya(ee):b(ee,re)))var re=ee,se=W}return se}function e7(d,v,b,D){var x=d.length;for(b=In(b),b<0&&(b=-b>x?0:x+b),D=D===t||D>x?x:In(D),D<0&&(D+=x),D=b>D?0:x2(D);b<D;)d[b++]=v;return d}function yM(d,v){var b=[];return iu(d,function(D,x,W){v(D,x,W)&&b.push(D)}),b}function Li(d,v,b,D,x){var W=-1,ee=d.length;for(b||(b=$7),x||(x=[]);++W<ee;){var re=d[W];v>0&&b(re)?v>1?Li(re,v-1,b,D,x):tu(x,re):D||(x[x.length]=re)}return x}var ry=qM(),bM=qM(!0);function Oo(d,v){return d&&ry(d,v,Ei)}function iy(d,v){return d&&bM(d,v,Ei)}function Bm(d,v){return Dt(v,function(b){return ul(d[b])})}function Cc(d,v){v=su(v,d);for(var b=0,D=v.length;d!=null&&b<D;)d=d[Uo(v[b++])];return b&&b==D?d:t}function CM(d,v,b){var D=v(d);return Sn(d)?D:tu(D,b(d))}function sa(d){return d==null?d===t?Ct:$t:gc&&gc in _r(d)?x7(d):Y7(d)}function ay(d,v){return d>v}function t7(d,v){return d!=null&&cr.call(d,v)}function n7(d,v){return d!=null&&v in _r(d)}function r7(d,v,b){return d>=Yi(v,b)&&d<di(v,b)}function sy(d,v,b){for(var D=b?Fn:rr,x=d[0].length,W=d.length,ee=W,re=Ee(W),se=1/0,Re=[];ee--;){var De=d[ee];ee&&v&&(De=Cr(De,Ka(v))),se=Yi(De.length,se),re[ee]=!b&&(v||x>=120&&De.length>=120)?new yc(ee&&De):t}De=d[0];var Fe=-1,ft=re[0];e:for(;++Fe<x&&Re.length<se;){var Ft=De[Fe],cn=v?v(Ft):Ft;if(Ft=b||Ft!==0?Ft:0,!(ft?Uf(ft,cn):D(Re,cn,b))){for(ee=W;--ee;){var An=re[ee];if(!(An?Uf(An,cn):D(d[ee],cn,b)))continue e}ft&&ft.push(cn),Re.push(Ft)}}return Re}function i7(d,v,b,D){return Oo(d,function(x,W,ee){v(D,b(x),W,ee)}),D}function Gf(d,v,b){v=su(v,d),d=u2(d,v);var D=d==null?d:d[Uo(As(v))];return D==null?t:It(D,d,b)}function SM(d){return zr(d)&&sa(d)==ce}function a7(d){return zr(d)&&sa(d)==pt}function s7(d){return zr(d)&&sa(d)==tt}function $f(d,v,b,D,x){return d===v?!0:d==null||v==null||!zr(d)&&!zr(v)?d!==d&&v!==v:o7(d,v,b,D,$f,x)}function o7(d,v,b,D,x,W){var ee=Sn(d),re=Sn(v),se=ee?ge:Qi(d),Re=re?ge:Qi(v);se=se==ce?mt:se,Re=Re==ce?mt:Re;var De=se==mt,Fe=Re==mt,ft=se==Re;if(ft&&lu(d)){if(!lu(v))return!1;ee=!0,De=!1}if(ft&&!De)return W||(W=new Xs),ee||ah(d)?n2(d,v,b,D,x,W):L7(d,v,se,b,D,x,W);if(!(b&_)){var Ft=De&&cr.call(d,"__wrapped__"),cn=Fe&&cr.call(v,"__wrapped__");if(Ft||cn){var An=Ft?d.value():d,dn=cn?v.value():v;return W||(W=new Xs),x(An,dn,b,D,W)}}return ft?(W||(W=new Xs),k7(d,v,b,D,x,W)):!1}function l7(d){return zr(d)&&Qi(d)==lt}function oy(d,v,b,D){var x=b.length,W=x,ee=!D;if(d==null)return!W;for(d=_r(d);x--;){var re=b[x];if(ee&&re[2]?re[1]!==d[re[0]]:!(re[0]in d))return!1}for(;++x<W;){re=b[x];var se=re[0],Re=d[se],De=re[1];if(ee&&re[2]){if(Re===t&&!(se in d))return!1}else{var Fe=new Xs;if(D)var ft=D(Re,De,se,d,v,Fe);if(!(ft===t?$f(De,Re,_|g,D,Fe):ft))return!1}}return!0}function TM(d){if(!xr(d)||z7(d))return!1;var v=ul(d)?lF:an;return v.test(Tc(d))}function u7(d){return zr(d)&&sa(d)==Pt}function c7(d){return zr(d)&&Qi(d)==Xe}function d7(d){return zr(d)&&n_(d.length)&&!!ur[sa(d)]}function NM(d){return typeof d=="function"?d:d==null?Oa:typeof d=="object"?Sn(d)?AM(d[0],d[1]):MM(d):K2(d)}function ly(d){if(!jf(d))return vF(d);var v=[];for(var b in _r(d))cr.call(d,b)&&b!="constructor"&&v.push(b);return v}function h7(d){if(!xr(d))return W7(d);var v=jf(d),b=[];for(var D in d)D=="constructor"&&(v||!cr.call(d,D))||b.push(D);return b}function uy(d,v){return d<v}function IM(d,v){var b=-1,D=wa(d)?Ee(d.length):[];return iu(d,function(x,W,ee){D[++b]=v(x,W,ee)}),D}function MM(d){var v=Ty(d);return v.length==1&&v[0][2]?o2(v[0][0],v[0][1]):function(b){return b===d||oy(b,d,v)}}function AM(d,v){return Iy(d)&&s2(v)?o2(Uo(d),v):function(b){var D=xy(b,d);return D===t&&D===v?Py(b,d):$f(v,D,_|g)}}function Hm(d,v,b,D,x){d!==v&&ry(v,function(W,ee){if(x||(x=new Xs),xr(W))f7(d,v,ee,b,Hm,D,x);else{var re=D?D(Ay(d,ee),W,ee+"",d,v,x):t;re===t&&(re=W),ty(d,ee,re)}},Ra)}function f7(d,v,b,D,x,W,ee){var re=Ay(d,b),se=Ay(v,b),Re=ee.get(se);if(Re){ty(d,b,Re);return}var De=W?W(re,se,b+"",d,v,ee):t,Fe=De===t;if(Fe){var ft=Sn(se),Ft=!ft&&lu(se),cn=!ft&&!Ft&&ah(se);De=se,ft||Ft||cn?Sn(re)?De=re:Xr(re)?De=Aa(re):Ft?(Fe=!1,De=HM(se,!0)):cn?(Fe=!1,De=GM(se,!0)):De=[]:Kf(se)||Nc(se)?(De=re,Nc(re)?De=P2(re):(!xr(re)||ul(re))&&(De=a2(se))):Fe=!1}Fe&&(ee.set(se,De),x(De,se,D,W,ee),ee.delete(se)),ty(d,b,De)}function wM(d,v){var b=d.length;if(b)return v+=v<0?b:0,ll(v,b)?d[v]:t}function RM(d,v,b){v.length?v=Cr(v,function(W){return Sn(W)?function(ee){return Cc(ee,W.length===1?W[0]:W)}:W}):v=[Oa];var D=-1;v=Cr(v,Ka(ln()));var x=IM(d,function(W,ee,re){var se=Cr(v,function(Re){return Re(W)});return{criteria:se,index:++D,value:W}});return H5(x,function(W,ee){return I7(W,ee,b)})}function v7(d,v){return OM(d,v,function(b,D){return Py(d,D)})}function OM(d,v,b){for(var D=-1,x=v.length,W={};++D<x;){var ee=v[D],re=Cc(d,ee);b(re,ee)&&Vf(W,su(ee,d),re)}return W}function p7(d){return function(v){return Cc(v,d)}}function cy(d,v,b,D){var x=D?B5:Wd,W=-1,ee=v.length,re=d;for(d===v&&(v=Aa(v)),b&&(re=Cr(d,Ka(b)));++W<ee;)for(var se=0,Re=v[W],De=b?b(Re):Re;(se=x(re,De,se,D))>-1;)re!==d&&Rm.call(re,se,1),Rm.call(d,se,1);return d}function DM(d,v){for(var b=d?v.length:0,D=b-1;b--;){var x=v[b];if(b==D||x!==W){var W=x;ll(x)?Rm.call(d,x,1):vy(d,x)}}return d}function dy(d,v){return d+Um(hM()*(v-d+1))}function m7(d,v,b,D){for(var x=-1,W=di(Dm((v-d)/(b||1)),0),ee=Ee(W);W--;)ee[D?W:++x]=d,d+=b;return ee}function hy(d,v){var b="";if(!d||v<1||v>K)return b;do v%2&&(b+=d),v=Um(v/2),v&&(d+=d);while(v);return b}function Un(d,v){return wy(l2(d,v,Oa),d+"")}function _7(d){return pM(sh(d))}function g7(d,v){var b=sh(d);return Qm(b,bc(v,0,b.length))}function Vf(d,v,b,D){if(!xr(d))return d;v=su(v,d);for(var x=-1,W=v.length,ee=W-1,re=d;re!=null&&++x<W;){var se=Uo(v[x]),Re=b;if(se==="__proto__"||se==="constructor"||se==="prototype")return d;if(x!=ee){var De=re[se];Re=D?D(De,se,re):t,Re===t&&(Re=xr(De)?De:ll(v[x+1])?[]:{})}Bf(re,se,Re),re=re[se]}return d}var UM=Lm?function(d,v){return Lm.set(d,v),d}:Oa,E7=Om?function(d,v){return Om(d,"toString",{configurable:!0,enumerable:!1,value:By(v),writable:!0})}:Oa;function y7(d){return Qm(sh(d))}function Ms(d,v,b){var D=-1,x=d.length;v<0&&(v=-v>x?0:x+v),b=b>x?x:b,b<0&&(b+=x),x=v>b?0:b-v>>>0,v>>>=0;for(var W=Ee(x);++D<x;)W[D]=d[D+v];return W}function b7(d,v){var b;return iu(d,function(D,x,W){return b=v(D,x,W),!b}),!!b}function Gm(d,v,b){var D=0,x=d==null?D:d.length;if(typeof v=="number"&&v===v&&x<=Te){for(;D<x;){var W=D+x>>>1,ee=d[W];ee!==null&&!Ya(ee)&&(b?ee<=v:ee<v)?D=W+1:x=W}return x}return fy(d,v,Oa,b)}function fy(d,v,b,D){var x=0,W=d==null?0:d.length;if(W===0)return 0;v=b(v);for(var ee=v!==v,re=v===null,se=Ya(v),Re=v===t;x<W;){var De=Um((x+W)/2),Fe=b(d[De]),ft=Fe!==t,Ft=Fe===null,cn=Fe===Fe,An=Ya(Fe);if(ee)var dn=D||cn;else Re?dn=cn&&(D||ft):re?dn=cn&&ft&&(D||!Ft):se?dn=cn&&ft&&!Ft&&(D||!An):Ft||An?dn=!1:dn=D?Fe<=v:Fe<v;dn?x=De+1:W=De}return Yi(W,le)}function LM(d,v){for(var b=-1,D=d.length,x=0,W=[];++b<D;){var ee=d[b],re=v?v(ee):ee;if(!b||!Zs(re,se)){var se=re;W[x++]=ee===0?0:ee}}return W}function kM(d){return typeof d=="number"?d:Ya(d)?te:+d}function Wa(d){if(typeof d=="string")return d;if(Sn(d))return Cr(d,Wa)+"";if(Ya(d))return fM?fM.call(d):"";var v=d+"";return v=="0"&&1/d==-X?"-0":v}function au(d,v,b){var D=-1,x=rr,W=d.length,ee=!0,re=[],se=re;if(b)ee=!1,x=Fn;else if(W>=i){var Re=v?null:D7(d);if(Re)return Cm(Re);ee=!1,x=Uf,se=new yc}else se=v?[]:re;e:for(;++D<W;){var De=d[D],Fe=v?v(De):De;if(De=b||De!==0?De:0,ee&&Fe===Fe){for(var ft=se.length;ft--;)if(se[ft]===Fe)continue e;v&&se.push(Fe),re.push(De)}else x(se,Fe,b)||(se!==re&&se.push(Fe),re.push(De))}return re}function vy(d,v){return v=su(v,d),d=u2(d,v),d==null||delete d[Uo(As(v))]}function xM(d,v,b,D){return Vf(d,v,b(Cc(d,v)),D)}function $m(d,v,b,D){for(var x=d.length,W=D?x:-1;(D?W--:++W<x)&&v(d[W],W,d););return b?Ms(d,D?0:W,D?W+1:x):Ms(d,D?W+1:0,D?x:W)}function PM(d,v){var b=d;return b instanceof $n&&(b=b.value()),VE(v,function(D,x){return x.func.apply(x.thisArg,tu([D],x.args))},b)}function py(d,v,b){var D=d.length;if(D<2)return D?au(d[0]):[];for(var x=-1,W=Ee(D);++x<D;)for(var ee=d[x],re=-1;++re<D;)re!=x&&(W[x]=Hf(W[x]||ee,d[re],v,b));return au(Li(W,1),v,b)}function FM(d,v,b){for(var D=-1,x=d.length,W=v.length,ee={};++D<x;){var re=D<W?v[D]:t;b(ee,d[D],re)}return ee}function my(d){return Xr(d)?d:[]}function _y(d){return typeof d=="function"?d:Oa}function su(d,v){return Sn(d)?d:Iy(d,v)?[d]:f2(ir(d))}var C7=Un;function ou(d,v,b){var D=d.length;return b=b===t?D:b,!v&&b>=D?d:Ms(d,v,b)}var BM=uF||function(d){return oi.clearTimeout(d)};function HM(d,v){if(v)return d.slice();var b=d.length,D=oM?oM(b):new d.constructor(b);return d.copy(D),D}function gy(d){var v=new d.constructor(d.byteLength);return new Am(v).set(new Am(d)),v}function S7(d,v){var b=v?gy(d.buffer):d.buffer;return new d.constructor(b,d.byteOffset,d.byteLength)}function T7(d){var v=new d.constructor(d.source,nn.exec(d));return v.lastIndex=d.lastIndex,v}function N7(d){return Ff?_r(Ff.call(d)):{}}function GM(d,v){var b=v?gy(d.buffer):d.buffer;return new d.constructor(b,d.byteOffset,d.length)}function $M(d,v){if(d!==v){var b=d!==t,D=d===null,x=d===d,W=Ya(d),ee=v!==t,re=v===null,se=v===v,Re=Ya(v);if(!re&&!Re&&!W&&d>v||W&&ee&&se&&!re&&!Re||D&&ee&&se||!b&&se||!x)return 1;if(!D&&!W&&!Re&&d<v||Re&&b&&x&&!D&&!W||re&&b&&x||!ee&&x||!se)return-1}return 0}function I7(d,v,b){for(var D=-1,x=d.criteria,W=v.criteria,ee=x.length,re=b.length;++D<ee;){var se=$M(x[D],W[D]);if(se){if(D>=re)return se;var Re=b[D];return se*(Re=="desc"?-1:1)}}return d.index-v.index}function VM(d,v,b,D){for(var x=-1,W=d.length,ee=b.length,re=-1,se=v.length,Re=di(W-ee,0),De=Ee(se+Re),Fe=!D;++re<se;)De[re]=v[re];for(;++x<ee;)(Fe||x<W)&&(De[b[x]]=d[x]);for(;Re--;)De[re++]=d[x++];return De}function zM(d,v,b,D){for(var x=-1,W=d.length,ee=-1,re=b.length,se=-1,Re=v.length,De=di(W-re,0),Fe=Ee(De+Re),ft=!D;++x<De;)Fe[x]=d[x];for(var Ft=x;++se<Re;)Fe[Ft+se]=v[se];for(;++ee<re;)(ft||x<W)&&(Fe[Ft+b[ee]]=d[x++]);return Fe}function Aa(d,v){var b=-1,D=d.length;for(v||(v=Ee(D));++b<D;)v[b]=d[b];return v}function Do(d,v,b,D){var x=!b;b||(b={});for(var W=-1,ee=v.length;++W<ee;){var re=v[W],se=D?D(b[re],d[re],re,b,d):t;se===t&&(se=d[re]),x?al(b,re,se):Bf(b,re,se)}return b}function M7(d,v){return Do(d,Ny(d),v)}function A7(d,v){return Do(d,r2(d),v)}function Vm(d,v){return function(b,D){var x=Sn(b)?pe:QF,W=v?v():{};return x(b,d,ln(D,2),W)}}function nh(d){return Un(function(v,b){var D=-1,x=b.length,W=x>1?b[x-1]:t,ee=x>2?b[2]:t;for(W=d.length>3&&typeof W=="function"?(x--,W):t,ee&&oa(b[0],b[1],ee)&&(W=x<3?t:W,x=1),v=_r(v);++D<x;){var re=b[D];re&&d(v,re,D,W)}return v})}function jM(d,v){return function(b,D){if(b==null)return b;if(!wa(b))return d(b,D);for(var x=b.length,W=v?x:-1,ee=_r(b);(v?W--:++W<x)&&D(ee[W],W,ee)!==!1;);return b}}function qM(d){return function(v,b,D){for(var x=-1,W=_r(v),ee=D(v),re=ee.length;re--;){var se=ee[d?re:++x];if(b(W[se],se,W)===!1)break}return v}}function w7(d,v,b){var D=v&C,x=zf(d);function W(){var ee=this&&this!==oi&&this instanceof W?x:d;return ee.apply(D?b:this,arguments)}return W}function KM(d){return function(v){v=ir(v);var b=Yd(v)?Qs(v):t,D=b?b[0]:v.charAt(0),x=b?ou(b,1).join(""):v.slice(1);return D[d]()+x}}function rh(d){return function(v){return VE(j2(z2(v).replace(mm,"")),d,"")}}function zf(d){return function(){var v=arguments;switch(v.length){case 0:return new d;case 1:return new d(v[0]);case 2:return new d(v[0],v[1]);case 3:return new d(v[0],v[1],v[2]);case 4:return new d(v[0],v[1],v[2],v[3]);case 5:return new d(v[0],v[1],v[2],v[3],v[4]);case 6:return new d(v[0],v[1],v[2],v[3],v[4],v[5]);case 7:return new d(v[0],v[1],v[2],v[3],v[4],v[5],v[6])}var b=th(d.prototype),D=d.apply(b,v);return xr(D)?D:b}}function R7(d,v,b){var D=zf(d);function x(){for(var W=arguments.length,ee=Ee(W),re=W,se=ih(x);re--;)ee[re]=arguments[re];var Re=W<3&&ee[0]!==se&&ee[W-1]!==se?[]:nu(ee,se);if(W-=Re.length,W<b)return ZM(d,v,zm,x.placeholder,t,ee,Re,t,t,b-W);var De=this&&this!==oi&&this instanceof x?D:d;return It(De,this,ee)}return x}function WM(d){return function(v,b,D){var x=_r(v);if(!wa(v)){var W=ln(b,3);v=Ei(v),b=function(re){return W(x[re],re,x)}}var ee=d(v,b,D);return ee>-1?x[W?v[ee]:ee]:t}}function YM(d){return ol(function(v){var b=v.length,D=b,x=Ns.prototype.thru;for(d&&v.reverse();D--;){var W=v[D];if(typeof W!="function")throw new Ts(s);if(x&&!ee&&Wm(W)=="wrapper")var ee=new Ns([],!0)}for(D=ee?D:b;++D<b;){W=v[D];var re=Wm(W),se=re=="wrapper"?Sy(W):t;se&&My(se[0])&&se[1]==(A|S|w|U)&&!se[4].length&&se[9]==1?ee=ee[Wm(se[0])].apply(ee,se[3]):ee=W.length==1&&My(W)?ee[re]():ee.thru(W)}return function(){var Re=arguments,De=Re[0];if(ee&&Re.length==1&&Sn(De))return ee.plant(De).value();for(var Fe=0,ft=b?v[Fe].apply(this,Re):De;++Fe<b;)ft=v[Fe].call(this,ft);return ft}})}function zm(d,v,b,D,x,W,ee,re,se,Re){var De=v&A,Fe=v&C,ft=v&E,Ft=v&(S|I),cn=v&O,An=ft?t:zf(d);function dn(){for(var Bn=arguments.length,Vn=Ee(Bn),Qa=Bn;Qa--;)Vn[Qa]=arguments[Qa];if(Ft)var la=ih(dn),Xa=$5(Vn,la);if(D&&(Vn=VM(Vn,D,x,Ft)),W&&(Vn=zM(Vn,W,ee,Ft)),Bn-=Xa,Ft&&Bn<Re){var Zr=nu(Vn,la);return ZM(d,v,zm,dn.placeholder,b,Vn,Zr,re,se,Re-Bn)}var Js=Fe?b:this,dl=ft?Js[d]:d;return Bn=Vn.length,re?Vn=Q7(Vn,re):cn&&Bn>1&&Vn.reverse(),De&&se<Bn&&(Vn.length=se),this&&this!==oi&&this instanceof dn&&(dl=An||zf(dl)),dl.apply(Js,Vn)}return dn}function QM(d,v){return function(b,D){return i7(b,d,v(D),{})}}function jm(d,v){return function(b,D){var x;if(b===t&&D===t)return v;if(b!==t&&(x=b),D!==t){if(x===t)return D;typeof b=="string"||typeof D=="string"?(b=Wa(b),D=Wa(D)):(b=kM(b),D=kM(D)),x=d(b,D)}return x}}function Ey(d){return ol(function(v){return v=Cr(v,Ka(ln())),Un(function(b){var D=this;return d(v,function(x){return It(x,D,b)})})})}function qm(d,v){v=v===t?" ":Wa(v);var b=v.length;if(b<2)return b?hy(v,d):v;var D=hy(v,Dm(d/Qd(v)));return Yd(v)?ou(Qs(D),0,d).join(""):D.slice(0,d)}function O7(d,v,b,D){var x=v&C,W=zf(d);function ee(){for(var re=-1,se=arguments.length,Re=-1,De=D.length,Fe=Ee(De+se),ft=this&&this!==oi&&this instanceof ee?W:d;++Re<De;)Fe[Re]=D[Re];for(;se--;)Fe[Re++]=arguments[++re];return It(ft,x?b:this,Fe)}return ee}function XM(d){return function(v,b,D){return D&&typeof D!="number"&&oa(v,b,D)&&(b=D=t),v=cl(v),b===t?(b=v,v=0):b=cl(b),D=D===t?v<b?1:-1:cl(D),m7(v,b,D,d)}}function Km(d){return function(v,b){return typeof v=="string"&&typeof b=="string"||(v=ws(v),b=ws(b)),d(v,b)}}function ZM(d,v,b,D,x,W,ee,re,se,Re){var De=v&S,Fe=De?ee:t,ft=De?t:ee,Ft=De?W:t,cn=De?t:W;v|=De?w:R,v&=~(De?R:w),v&y||(v&=-4);var An=[d,v,x,Ft,Fe,cn,ft,re,se,Re],dn=b.apply(t,An);return My(d)&&c2(dn,An),dn.placeholder=D,d2(dn,d,v)}function yy(d){var v=ci[d];return function(b,D){if(b=ws(b),D=D==null?0:Yi(In(D),292),D&&dM(b)){var x=(ir(b)+"e").split("e"),W=v(x[0]+"e"+(+x[1]+D));return x=(ir(W)+"e").split("e"),+(x[0]+"e"+(+x[1]-D))}return v(b)}}var D7=Jd&&1/Cm(new Jd([,-0]))[1]==X?function(d){return new Jd(d)}:$y;function JM(d){return function(v){var b=Qi(v);return b==lt?QE(v):b==Xe?Y5(v):G5(v,d(v))}}function sl(d,v,b,D,x,W,ee,re){var se=v&E;if(!se&&typeof d!="function")throw new Ts(s);var Re=D?D.length:0;if(Re||(v&=-97,D=x=t),ee=ee===t?ee:di(In(ee),0),re=re===t?re:In(re),Re-=x?x.length:0,v&R){var De=D,Fe=x;D=x=t}var ft=se?t:Sy(d),Ft=[d,v,b,D,x,De,Fe,W,ee,re];if(ft&&K7(Ft,ft),d=Ft[0],v=Ft[1],b=Ft[2],D=Ft[3],x=Ft[4],re=Ft[9]=Ft[9]===t?se?0:d.length:di(Ft[9]-Re,0),!re&&v&(S|I)&&(v&=-25),!v||v==C)var cn=w7(d,v,b);else v==S||v==I?cn=R7(d,v,re):(v==w||v==(C|w))&&!x.length?cn=O7(d,v,b,D):cn=zm.apply(t,Ft);var An=ft?UM:c2;return d2(An(cn,Ft),d,v)}function e2(d,v,b,D){return d===t||Zs(d,Zd[b])&&!cr.call(D,b)?v:d}function t2(d,v,b,D,x,W){return xr(d)&&xr(v)&&(W.set(v,d),Hm(d,v,t,t2,W),W.delete(v)),d}function U7(d){return Kf(d)?t:d}function n2(d,v,b,D,x,W){var ee=b&_,re=d.length,se=v.length;if(re!=se&&!(ee&&se>re))return!1;var Re=W.get(d),De=W.get(v);if(Re&&De)return Re==v&&De==d;var Fe=-1,ft=!0,Ft=b&g?new yc:t;for(W.set(d,v),W.set(v,d);++Fe<re;){var cn=d[Fe],An=v[Fe];if(D)var dn=ee?D(An,cn,Fe,v,d,W):D(cn,An,Fe,d,v,W);if(dn!==t){if(dn)continue;ft=!1;break}if(Ft){if(!zE(v,function(Bn,Vn){if(!Uf(Ft,Vn)&&(cn===Bn||x(cn,Bn,b,D,W)))return Ft.push(Vn)})){ft=!1;break}}else if(!(cn===An||x(cn,An,b,D,W))){ft=!1;break}}return W.delete(d),W.delete(v),ft}function L7(d,v,b,D,x,W,ee){switch(b){case jt:if(d.byteLength!=v.byteLength||d.byteOffset!=v.byteOffset)return!1;d=d.buffer,v=v.buffer;case pt:return!(d.byteLength!=v.byteLength||!W(new Am(d),new Am(v)));case xe:case tt:case kt:return Zs(+d,+v);case bt:return d.name==v.name&&d.message==v.message;case Pt:case je:return d==v+"";case lt:var re=QE;case Xe:var se=D&_;if(re||(re=Cm),d.size!=v.size&&!se)return!1;var Re=ee.get(d);if(Re)return Re==v;D|=g,ee.set(d,v);var De=n2(re(d),re(v),D,x,W,ee);return ee.delete(d),De;case Ve:if(Ff)return Ff.call(d)==Ff.call(v)}return!1}function k7(d,v,b,D,x,W){var ee=b&_,re=by(d),se=re.length,Re=by(v),De=Re.length;if(se!=De&&!ee)return!1;for(var Fe=se;Fe--;){var ft=re[Fe];if(!(ee?ft in v:cr.call(v,ft)))return!1}var Ft=W.get(d),cn=W.get(v);if(Ft&&cn)return Ft==v&&cn==d;var An=!0;W.set(d,v),W.set(v,d);for(var dn=ee;++Fe<se;){ft=re[Fe];var Bn=d[ft],Vn=v[ft];if(D)var Qa=ee?D(Vn,Bn,ft,v,d,W):D(Bn,Vn,ft,d,v,W);if(!(Qa===t?Bn===Vn||x(Bn,Vn,b,D,W):Qa)){An=!1;break}dn||(dn=ft=="constructor")}if(An&&!dn){var la=d.constructor,Xa=v.constructor;la!=Xa&&"constructor"in d&&"constructor"in v&&!(typeof la=="function"&&la instanceof la&&typeof Xa=="function"&&Xa instanceof Xa)&&(An=!1)}return W.delete(d),W.delete(v),An}function ol(d){return wy(l2(d,t,_2),d+"")}function by(d){return CM(d,Ei,Ny)}function Cy(d){return CM(d,Ra,r2)}var Sy=Lm?function(d){return Lm.get(d)}:$y;function Wm(d){for(var v=d.name+"",b=eh[v],D=cr.call(eh,v)?b.length:0;D--;){var x=b[D],W=x.func;if(W==null||W==d)return x.name}return v}function ih(d){var v=cr.call(V,"placeholder")?V:d;return v.placeholder}function ln(){var d=V.iteratee||Hy;return d=d===Hy?NM:d,arguments.length?d(arguments[0],arguments[1]):d}function Ym(d,v){var b=d.__data__;return V7(v)?b[typeof v=="string"?"string":"hash"]:b.map}function Ty(d){for(var v=Ei(d),b=v.length;b--;){var D=v[b],x=d[D];v[b]=[D,x,s2(x)]}return v}function Sc(d,v){var b=q5(d,v);return TM(b)?b:t}function x7(d){var v=cr.call(d,gc),b=d[gc];try{d[gc]=t;var D=!0}catch{}var x=Im.call(d);return D&&(v?d[gc]=b:delete d[gc]),x}var Ny=ZE?function(d){return d==null?[]:(d=_r(d),Dt(ZE(d),function(v){return uM.call(d,v)}))}:Vy,r2=ZE?function(d){for(var v=[];d;)tu(v,Ny(d)),d=wm(d);return v}:Vy,Qi=sa;(JE&&Qi(new JE(new ArrayBuffer(1)))!=jt||kf&&Qi(new kf)!=lt||ey&&Qi(ey.resolve())!=zt||Jd&&Qi(new Jd)!=Xe||xf&&Qi(new xf)!=ut)&&(Qi=function(d){var v=sa(d),b=v==mt?d.constructor:t,D=b?Tc(b):"";if(D)switch(D){case gF:return jt;case EF:return lt;case yF:return zt;case bF:return Xe;case CF:return ut}return v});function P7(d,v,b){for(var D=-1,x=b.length;++D<x;){var W=b[D],ee=W.size;switch(W.type){case"drop":d+=ee;break;case"dropRight":v-=ee;break;case"take":v=Yi(v,d+ee);break;case"takeRight":d=di(d,v-ee);break}}return{start:d,end:v}}function F7(d){var v=d.match(Be);return v?v[1].split(rt):[]}function i2(d,v,b){v=su(v,d);for(var D=-1,x=v.length,W=!1;++D<x;){var ee=Uo(v[D]);if(!(W=d!=null&&b(d,ee)))break;d=d[ee]}return W||++D!=x?W:(x=d==null?0:d.length,!!x&&n_(x)&&ll(ee,x)&&(Sn(d)||Nc(d)))}function B7(d){var v=d.length,b=new d.constructor(v);return v&&typeof d[0]=="string"&&cr.call(d,"index")&&(b.index=d.index,b.input=d.input),b}function a2(d){return typeof d.constructor=="function"&&!jf(d)?th(wm(d)):{}}function H7(d,v,b){var D=d.constructor;switch(v){case pt:return gy(d);case xe:case tt:return new D(+d);case jt:return S7(d,b);case Ue:case hn:case un:case vn:case Xt:case Wt:case At:case xt:case on:return GM(d,b);case lt:return new D;case kt:case je:return new D(d);case Pt:return T7(d);case Xe:return new D;case Ve:return N7(d)}}function G7(d,v){var b=v.length;if(!b)return d;var D=b-1;return v[D]=(b>1?"& ":"")+v[D],v=v.join(b>2?", ":" "),d.replace(qn,`{
/* [wrapped with `+v+`] */
`)}function $7(d){return Sn(d)||Nc(d)||!!(cM&&d&&d[cM])}function ll(d,v){var b=typeof d;return v=v??K,!!v&&(b=="number"||b!="symbol"&&J.test(d))&&d>-1&&d%1==0&&d<v}function oa(d,v,b){if(!xr(b))return!1;var D=typeof v;return(D=="number"?wa(b)&&ll(v,b.length):D=="string"&&v in b)?Zs(b[v],d):!1}function Iy(d,v){if(Sn(d))return!1;var b=typeof d;return b=="number"||b=="symbol"||b=="boolean"||d==null||Ya(d)?!0:On.test(d)||!dt.test(d)||v!=null&&d in _r(v)}function V7(d){var v=typeof d;return v=="string"||v=="number"||v=="symbol"||v=="boolean"?d!=="__proto__":d===null}function My(d){var v=Wm(d),b=V[v];if(typeof b!="function"||!(v in $n.prototype))return!1;if(d===b)return!0;var D=Sy(b);return!!D&&d===D[0]}function z7(d){return!!sM&&sM in d}var j7=Tm?ul:zy;function jf(d){var v=d&&d.constructor,b=typeof v=="function"&&v.prototype||Zd;return d===b}function s2(d){return d===d&&!xr(d)}function o2(d,v){return function(b){return b==null?!1:b[d]===v&&(v!==t||d in _r(b))}}function q7(d){var v=e_(d,function(D){return b.size===u&&b.clear(),D}),b=v.cache;return v}function K7(d,v){var b=d[1],D=v[1],x=b|D,W=x<(C|E|A),ee=D==A&&b==S||D==A&&b==U&&d[7].length<=v[8]||D==(A|U)&&v[7].length<=v[8]&&b==S;if(!(W||ee))return d;D&C&&(d[2]=v[2],x|=b&C?0:y);var re=v[3];if(re){var se=d[3];d[3]=se?VM(se,re,v[4]):re,d[4]=se?nu(d[3],c):v[4]}return re=v[5],re&&(se=d[5],d[5]=se?zM(se,re,v[6]):re,d[6]=se?nu(d[5],c):v[6]),re=v[7],re&&(d[7]=re),D&A&&(d[8]=d[8]==null?v[8]:Yi(d[8],v[8])),d[9]==null&&(d[9]=v[9]),d[0]=v[0],d[1]=x,d}function W7(d){var v=[];if(d!=null)for(var b in _r(d))v.push(b);return v}function Y7(d){return Im.call(d)}function l2(d,v,b){return v=di(v===t?d.length-1:v,0),function(){for(var D=arguments,x=-1,W=di(D.length-v,0),ee=Ee(W);++x<W;)ee[x]=D[v+x];x=-1;for(var re=Ee(v+1);++x<v;)re[x]=D[x];return re[v]=b(ee),It(d,this,re)}}function u2(d,v){return v.length<2?d:Cc(d,Ms(v,0,-1))}function Q7(d,v){for(var b=d.length,D=Yi(v.length,b),x=Aa(d);D--;){var W=v[D];d[D]=ll(W,b)?x[W]:t}return d}function Ay(d,v){if(!(v==="constructor"&&typeof d[v]=="function")&&v!="__proto__")return d[v]}var c2=h2(UM),qf=dF||function(d,v){return oi.setTimeout(d,v)},wy=h2(E7);function d2(d,v,b){var D=v+"";return wy(d,G7(D,X7(F7(D),b)))}function h2(d){var v=0,b=0;return function(){var D=pF(),x=G-(D-b);if(b=D,x>0){if(++v>=P)return arguments[0]}else v=0;return d.apply(t,arguments)}}function Qm(d,v){var b=-1,D=d.length,x=D-1;for(v=v===t?D:v;++b<v;){var W=dy(b,x),ee=d[W];d[W]=d[b],d[b]=ee}return d.length=v,d}var f2=q7(function(d){var v=[];return d.charCodeAt(0)===46&&v.push(""),d.replace(Yt,function(b,D,x,W){v.push(x?W.replace(Et,"$1"):D||b)}),v});function Uo(d){if(typeof d=="string"||Ya(d))return d;var v=d+"";return v=="0"&&1/d==-X?"-0":v}function Tc(d){if(d!=null){try{return Nm.call(d)}catch{}try{return d+""}catch{}}return""}function X7(d,v){return ie(Ze,function(b){var D="_."+b[0];v&b[1]&&!rr(d,D)&&d.push(D)}),d.sort()}function v2(d){if(d instanceof $n)return d.clone();var v=new Ns(d.__wrapped__,d.__chain__);return v.__actions__=Aa(d.__actions__),v.__index__=d.__index__,v.__values__=d.__values__,v}function Z7(d,v,b){(b?oa(d,v,b):v===t)?v=1:v=di(In(v),0);var D=d==null?0:d.length;if(!D||v<1)return[];for(var x=0,W=0,ee=Ee(Dm(D/v));x<D;)ee[W++]=Ms(d,x,x+=v);return ee}function J7(d){for(var v=-1,b=d==null?0:d.length,D=0,x=[];++v<b;){var W=d[v];W&&(x[D++]=W)}return x}function e8(){var d=arguments.length;if(!d)return[];for(var v=Ee(d-1),b=arguments[0],D=d;D--;)v[D-1]=arguments[D];return tu(Sn(b)?Aa(b):[b],Li(v,1))}var t8=Un(function(d,v){return Xr(d)?Hf(d,Li(v,1,Xr,!0)):[]}),n8=Un(function(d,v){var b=As(v);return Xr(b)&&(b=t),Xr(d)?Hf(d,Li(v,1,Xr,!0),ln(b,2)):[]}),r8=Un(function(d,v){var b=As(v);return Xr(b)&&(b=t),Xr(d)?Hf(d,Li(v,1,Xr,!0),t,b):[]});function i8(d,v,b){var D=d==null?0:d.length;return D?(v=b||v===t?1:In(v),Ms(d,v<0?0:v,D)):[]}function a8(d,v,b){var D=d==null?0:d.length;return D?(v=b||v===t?1:In(v),v=D-v,Ms(d,0,v<0?0:v)):[]}function s8(d,v){return d&&d.length?$m(d,ln(v,3),!0,!0):[]}function o8(d,v){return d&&d.length?$m(d,ln(v,3),!0):[]}function l8(d,v,b,D){var x=d==null?0:d.length;return x?(b&&typeof b!="number"&&oa(d,v,b)&&(b=0,D=x),e7(d,v,b,D)):[]}function p2(d,v,b){var D=d==null?0:d.length;if(!D)return-1;var x=b==null?0:In(b);return x<0&&(x=di(D+x,0)),bm(d,ln(v,3),x)}function m2(d,v,b){var D=d==null?0:d.length;if(!D)return-1;var x=D-1;return b!==t&&(x=In(b),x=b<0?di(D+x,0):Yi(x,D-1)),bm(d,ln(v,3),x,!0)}function _2(d){var v=d==null?0:d.length;return v?Li(d,1):[]}function u8(d){var v=d==null?0:d.length;return v?Li(d,X):[]}function c8(d,v){var b=d==null?0:d.length;return b?(v=v===t?1:In(v),Li(d,v)):[]}function d8(d){for(var v=-1,b=d==null?0:d.length,D={};++v<b;){var x=d[v];D[x[0]]=x[1]}return D}function g2(d){return d&&d.length?d[0]:t}function h8(d,v,b){var D=d==null?0:d.length;if(!D)return-1;var x=b==null?0:In(b);return x<0&&(x=di(D+x,0)),Wd(d,v,x)}function f8(d){var v=d==null?0:d.length;return v?Ms(d,0,-1):[]}var v8=Un(function(d){var v=Cr(d,my);return v.length&&v[0]===d[0]?sy(v):[]}),p8=Un(function(d){var v=As(d),b=Cr(d,my);return v===As(b)?v=t:b.pop(),b.length&&b[0]===d[0]?sy(b,ln(v,2)):[]}),m8=Un(function(d){var v=As(d),b=Cr(d,my);return v=typeof v=="function"?v:t,v&&b.pop(),b.length&&b[0]===d[0]?sy(b,t,v):[]});function _8(d,v){return d==null?"":fF.call(d,v)}function As(d){var v=d==null?0:d.length;return v?d[v-1]:t}function g8(d,v,b){var D=d==null?0:d.length;if(!D)return-1;var x=D;return b!==t&&(x=In(b),x=x<0?di(D+x,0):Yi(x,D-1)),v===v?X5(d,v,x):bm(d,ZI,x,!0)}function E8(d,v){return d&&d.length?wM(d,In(v)):t}var y8=Un(E2);function E2(d,v){return d&&d.length&&v&&v.length?cy(d,v):d}function b8(d,v,b){return d&&d.length&&v&&v.length?cy(d,v,ln(b,2)):d}function C8(d,v,b){return d&&d.length&&v&&v.length?cy(d,v,t,b):d}var S8=ol(function(d,v){var b=d==null?0:d.length,D=ny(d,v);return DM(d,Cr(v,function(x){return ll(x,b)?+x:x}).sort($M)),D});function T8(d,v){var b=[];if(!(d&&d.length))return b;var D=-1,x=[],W=d.length;for(v=ln(v,3);++D<W;){var ee=d[D];v(ee,D,d)&&(b.push(ee),x.push(D))}return DM(d,x),b}function Ry(d){return d==null?d:_F.call(d)}function N8(d,v,b){var D=d==null?0:d.length;return D?(b&&typeof b!="number"&&oa(d,v,b)?(v=0,b=D):(v=v==null?0:In(v),b=b===t?D:In(b)),Ms(d,v,b)):[]}function I8(d,v){return Gm(d,v)}function M8(d,v,b){return fy(d,v,ln(b,2))}function A8(d,v){var b=d==null?0:d.length;if(b){var D=Gm(d,v);if(D<b&&Zs(d[D],v))return D}return-1}function w8(d,v){return Gm(d,v,!0)}function R8(d,v,b){return fy(d,v,ln(b,2),!0)}function O8(d,v){var b=d==null?0:d.length;if(b){var D=Gm(d,v,!0)-1;if(Zs(d[D],v))return D}return-1}function D8(d){return d&&d.length?LM(d):[]}function U8(d,v){return d&&d.length?LM(d,ln(v,2)):[]}function L8(d){var v=d==null?0:d.length;return v?Ms(d,1,v):[]}function k8(d,v,b){return d&&d.length?(v=b||v===t?1:In(v),Ms(d,0,v<0?0:v)):[]}function x8(d,v,b){var D=d==null?0:d.length;return D?(v=b||v===t?1:In(v),v=D-v,Ms(d,v<0?0:v,D)):[]}function P8(d,v){return d&&d.length?$m(d,ln(v,3),!1,!0):[]}function F8(d,v){return d&&d.length?$m(d,ln(v,3)):[]}var B8=Un(function(d){return au(Li(d,1,Xr,!0))}),H8=Un(function(d){var v=As(d);return Xr(v)&&(v=t),au(Li(d,1,Xr,!0),ln(v,2))}),G8=Un(function(d){var v=As(d);return v=typeof v=="function"?v:t,au(Li(d,1,Xr,!0),t,v)});function $8(d){return d&&d.length?au(d):[]}function V8(d,v){return d&&d.length?au(d,ln(v,2)):[]}function z8(d,v){return v=typeof v=="function"?v:t,d&&d.length?au(d,t,v):[]}function Oy(d){if(!(d&&d.length))return[];var v=0;return d=Dt(d,function(b){if(Xr(b))return v=di(b.length,v),!0}),WE(v,function(b){return Cr(d,jE(b))})}function y2(d,v){if(!(d&&d.length))return[];var b=Oy(d);return v==null?b:Cr(b,function(D){return It(v,t,D)})}var j8=Un(function(d,v){return Xr(d)?Hf(d,v):[]}),q8=Un(function(d){return py(Dt(d,Xr))}),K8=Un(function(d){var v=As(d);return Xr(v)&&(v=t),py(Dt(d,Xr),ln(v,2))}),W8=Un(function(d){var v=As(d);return v=typeof v=="function"?v:t,py(Dt(d,Xr),t,v)}),Y8=Un(Oy);function Q8(d,v){return FM(d||[],v||[],Bf)}function X8(d,v){return FM(d||[],v||[],Vf)}var Z8=Un(function(d){var v=d.length,b=v>1?d[v-1]:t;return b=typeof b=="function"?(d.pop(),b):t,y2(d,b)});function b2(d){var v=V(d);return v.__chain__=!0,v}function J8(d,v){return v(d),d}function Xm(d,v){return v(d)}var eB=ol(function(d){var v=d.length,b=v?d[0]:0,D=this.__wrapped__,x=function(W){return ny(W,d)};return v>1||this.__actions__.length||!(D instanceof $n)||!ll(b)?this.thru(x):(D=D.slice(b,+b+(v?1:0)),D.__actions__.push({func:Xm,args:[x],thisArg:t}),new Ns(D,this.__chain__).thru(function(W){return v&&!W.length&&W.push(t),W}))});function tB(){return b2(this)}function nB(){return new Ns(this.value(),this.__chain__)}function rB(){this.__values__===t&&(this.__values__=k2(this.value()));var d=this.__index__>=this.__values__.length,v=d?t:this.__values__[this.__index__++];return{done:d,value:v}}function iB(){return this}function aB(d){for(var v,b=this;b instanceof xm;){var D=v2(b);D.__index__=0,D.__values__=t,v?x.__wrapped__=D:v=D;var x=D;b=b.__wrapped__}return x.__wrapped__=d,v}function sB(){var d=this.__wrapped__;if(d instanceof $n){var v=d;return this.__actions__.length&&(v=new $n(this)),v=v.reverse(),v.__actions__.push({func:Xm,args:[Ry],thisArg:t}),new Ns(v,this.__chain__)}return this.thru(Ry)}function oB(){return PM(this.__wrapped__,this.__actions__)}var lB=Vm(function(d,v,b){cr.call(d,b)?++d[b]:al(d,b,1)});function uB(d,v,b){var D=Sn(d)?yt:JF;return b&&oa(d,v,b)&&(v=t),D(d,ln(v,3))}function cB(d,v){var b=Sn(d)?Dt:yM;return b(d,ln(v,3))}var dB=WM(p2),hB=WM(m2);function fB(d,v){return Li(Zm(d,v),1)}function vB(d,v){return Li(Zm(d,v),X)}function pB(d,v,b){return b=b===t?1:In(b),Li(Zm(d,v),b)}function C2(d,v){var b=Sn(d)?ie:iu;return b(d,ln(v,3))}function S2(d,v){var b=Sn(d)?Lt:EM;return b(d,ln(v,3))}var mB=Vm(function(d,v,b){cr.call(d,b)?d[b].push(v):al(d,b,[v])});function _B(d,v,b,D){d=wa(d)?d:sh(d),b=b&&!D?In(b):0;var x=d.length;return b<0&&(b=di(x+b,0)),r_(d)?b<=x&&d.indexOf(v,b)>-1:!!x&&Wd(d,v,b)>-1}var gB=Un(function(d,v,b){var D=-1,x=typeof v=="function",W=wa(d)?Ee(d.length):[];return iu(d,function(ee){W[++D]=x?It(v,ee,b):Gf(ee,v,b)}),W}),EB=Vm(function(d,v,b){al(d,b,v)});function Zm(d,v){var b=Sn(d)?Cr:IM;return b(d,ln(v,3))}function yB(d,v,b,D){return d==null?[]:(Sn(v)||(v=v==null?[]:[v]),b=D?t:b,Sn(b)||(b=b==null?[]:[b]),RM(d,v,b))}var bB=Vm(function(d,v,b){d[b?0:1].push(v)},function(){return[[],[]]});function CB(d,v,b){var D=Sn(d)?VE:eM,x=arguments.length<3;return D(d,ln(v,4),b,x,iu)}function SB(d,v,b){var D=Sn(d)?k5:eM,x=arguments.length<3;return D(d,ln(v,4),b,x,EM)}function TB(d,v){var b=Sn(d)?Dt:yM;return b(d,t_(ln(v,3)))}function NB(d){var v=Sn(d)?pM:_7;return v(d)}function IB(d,v,b){(b?oa(d,v,b):v===t)?v=1:v=In(v);var D=Sn(d)?WF:g7;return D(d,v)}function MB(d){var v=Sn(d)?YF:y7;return v(d)}function AB(d){if(d==null)return 0;if(wa(d))return r_(d)?Qd(d):d.length;var v=Qi(d);return v==lt||v==Xe?d.size:ly(d).length}function wB(d,v,b){var D=Sn(d)?zE:b7;return b&&oa(d,v,b)&&(v=t),D(d,ln(v,3))}var RB=Un(function(d,v){if(d==null)return[];var b=v.length;return b>1&&oa(d,v[0],v[1])?v=[]:b>2&&oa(v[0],v[1],v[2])&&(v=[v[0]]),RM(d,Li(v,1),[])}),Jm=cF||function(){return oi.Date.now()};function OB(d,v){if(typeof v!="function")throw new Ts(s);return d=In(d),function(){if(--d<1)return v.apply(this,arguments)}}function T2(d,v,b){return v=b?t:v,v=d&&v==null?d.length:v,sl(d,A,t,t,t,t,v)}function N2(d,v){var b;if(typeof v!="function")throw new Ts(s);return d=In(d),function(){return--d>0&&(b=v.apply(this,arguments)),d<=1&&(v=t),b}}var Dy=Un(function(d,v,b){var D=C;if(b.length){var x=nu(b,ih(Dy));D|=w}return sl(d,D,v,b,x)}),I2=Un(function(d,v,b){var D=C|E;if(b.length){var x=nu(b,ih(I2));D|=w}return sl(v,D,d,b,x)});function M2(d,v,b){v=b?t:v;var D=sl(d,S,t,t,t,t,t,v);return D.placeholder=M2.placeholder,D}function A2(d,v,b){v=b?t:v;var D=sl(d,I,t,t,t,t,t,v);return D.placeholder=A2.placeholder,D}function w2(d,v,b){var D,x,W,ee,re,se,Re=0,De=!1,Fe=!1,ft=!0;if(typeof d!="function")throw new Ts(s);v=ws(v)||0,xr(b)&&(De=!!b.leading,Fe="maxWait"in b,W=Fe?di(ws(b.maxWait)||0,v):W,ft="trailing"in b?!!b.trailing:ft);function Ft(Zr){var Js=D,dl=x;return D=x=t,Re=Zr,ee=d.apply(dl,Js),ee}function cn(Zr){return Re=Zr,re=qf(Bn,v),De?Ft(Zr):ee}function An(Zr){var Js=Zr-se,dl=Zr-Re,W2=v-Js;return Fe?Yi(W2,W-dl):W2}function dn(Zr){var Js=Zr-se,dl=Zr-Re;return se===t||Js>=v||Js<0||Fe&&dl>=W}function Bn(){var Zr=Jm();if(dn(Zr))return Vn(Zr);re=qf(Bn,An(Zr))}function Vn(Zr){return re=t,ft&&D?Ft(Zr):(D=x=t,ee)}function Qa(){re!==t&&BM(re),Re=0,D=se=x=re=t}function la(){return re===t?ee:Vn(Jm())}function Xa(){var Zr=Jm(),Js=dn(Zr);if(D=arguments,x=this,se=Zr,Js){if(re===t)return cn(se);if(Fe)return BM(re),re=qf(Bn,v),Ft(se)}return re===t&&(re=qf(Bn,v)),ee}return Xa.cancel=Qa,Xa.flush=la,Xa}var DB=Un(function(d,v){return gM(d,1,v)}),UB=Un(function(d,v,b){return gM(d,ws(v)||0,b)});function LB(d){return sl(d,O)}function e_(d,v){if(typeof d!="function"||v!=null&&typeof v!="function")throw new Ts(s);var b=function(){var D=arguments,x=v?v.apply(this,D):D[0],W=b.cache;if(W.has(x))return W.get(x);var ee=d.apply(this,D);return b.cache=W.set(x,ee)||W,ee};return b.cache=new(e_.Cache||il),b}e_.Cache=il;function t_(d){if(typeof d!="function")throw new Ts(s);return function(){var v=arguments;switch(v.length){case 0:return!d.call(this);case 1:return!d.call(this,v[0]);case 2:return!d.call(this,v[0],v[1]);case 3:return!d.call(this,v[0],v[1],v[2])}return!d.apply(this,v)}}function kB(d){return N2(2,d)}var xB=C7(function(d,v){v=v.length==1&&Sn(v[0])?Cr(v[0],Ka(ln())):Cr(Li(v,1),Ka(ln()));var b=v.length;return Un(function(D){for(var x=-1,W=Yi(D.length,b);++x<W;)D[x]=v[x].call(this,D[x]);return It(d,this,D)})}),Uy=Un(function(d,v){var b=nu(v,ih(Uy));return sl(d,w,t,v,b)}),R2=Un(function(d,v){var b=nu(v,ih(R2));return sl(d,R,t,v,b)}),PB=ol(function(d,v){return sl(d,U,t,t,t,v)});function FB(d,v){if(typeof d!="function")throw new Ts(s);return v=v===t?v:In(v),Un(d,v)}function BB(d,v){if(typeof d!="function")throw new Ts(s);return v=v==null?0:di(In(v),0),Un(function(b){var D=b[v],x=ou(b,0,v);return D&&tu(x,D),It(d,this,x)})}function HB(d,v,b){var D=!0,x=!0;if(typeof d!="function")throw new Ts(s);return xr(b)&&(D="leading"in b?!!b.leading:D,x="trailing"in b?!!b.trailing:x),w2(d,v,{leading:D,maxWait:v,trailing:x})}function GB(d){return T2(d,1)}function $B(d,v){return Uy(_y(v),d)}function VB(){if(!arguments.length)return[];var d=arguments[0];return Sn(d)?d:[d]}function zB(d){return Is(d,p)}function jB(d,v){return v=typeof v=="function"?v:t,Is(d,p,v)}function qB(d){return Is(d,h|p)}function KB(d,v){return v=typeof v=="function"?v:t,Is(d,h|p,v)}function WB(d,v){return v==null||_M(d,v,Ei(v))}function Zs(d,v){return d===v||d!==d&&v!==v}var YB=Km(ay),QB=Km(function(d,v){return d>=v}),Nc=SM(function(){return arguments}())?SM:function(d){return zr(d)&&cr.call(d,"callee")&&!uM.call(d,"callee")},Sn=Ee.isArray,XB=Rf?Ka(Rf):a7;function wa(d){return d!=null&&n_(d.length)&&!ul(d)}function Xr(d){return zr(d)&&wa(d)}function ZB(d){return d===!0||d===!1||zr(d)&&sa(d)==xe}var lu=hF||zy,JB=qd?Ka(qd):s7;function eH(d){return zr(d)&&d.nodeType===1&&!Kf(d)}function tH(d){if(d==null)return!0;if(wa(d)&&(Sn(d)||typeof d=="string"||typeof d.splice=="function"||lu(d)||ah(d)||Nc(d)))return!d.length;var v=Qi(d);if(v==lt||v==Xe)return!d.size;if(jf(d))return!ly(d).length;for(var b in d)if(cr.call(d,b))return!1;return!0}function nH(d,v){return $f(d,v)}function rH(d,v,b){b=typeof b=="function"?b:t;var D=b?b(d,v):t;return D===t?$f(d,v,t,b):!!D}function Ly(d){if(!zr(d))return!1;var v=sa(d);return v==bt||v==ht||typeof d.message=="string"&&typeof d.name=="string"&&!Kf(d)}function iH(d){return typeof d=="number"&&dM(d)}function ul(d){if(!xr(d))return!1;var v=sa(d);return v==Rt||v==Ut||v==Qe||v==Tt}function O2(d){return typeof d=="number"&&d==In(d)}function n_(d){return typeof d=="number"&&d>-1&&d%1==0&&d<=K}function xr(d){var v=typeof d;return d!=null&&(v=="object"||v=="function")}function zr(d){return d!=null&&typeof d=="object"}var D2=Of?Ka(Of):l7;function aH(d,v){return d===v||oy(d,v,Ty(v))}function sH(d,v,b){return b=typeof b=="function"?b:t,oy(d,v,Ty(v),b)}function oH(d){return U2(d)&&d!=+d}function lH(d){if(j7(d))throw new bn(a);return TM(d)}function uH(d){return d===null}function cH(d){return d==null}function U2(d){return typeof d=="number"||zr(d)&&sa(d)==kt}function Kf(d){if(!zr(d)||sa(d)!=mt)return!1;var v=wm(d);if(v===null)return!0;var b=cr.call(v,"constructor")&&v.constructor;return typeof b=="function"&&b instanceof b&&Nm.call(b)==sF}var ky=Kd?Ka(Kd):u7;function dH(d){return O2(d)&&d>=-K&&d<=K}var L2=Df?Ka(Df):c7;function r_(d){return typeof d=="string"||!Sn(d)&&zr(d)&&sa(d)==je}function Ya(d){return typeof d=="symbol"||zr(d)&&sa(d)==Ve}var ah=Dn?Ka(Dn):d7;function hH(d){return d===t}function fH(d){return zr(d)&&Qi(d)==ut}function vH(d){return zr(d)&&sa(d)==qe}var pH=Km(uy),mH=Km(function(d,v){return d<=v});function k2(d){if(!d)return[];if(wa(d))return r_(d)?Qs(d):Aa(d);if(Lf&&d[Lf])return W5(d[Lf]());var v=Qi(d),b=v==lt?QE:v==Xe?Cm:sh;return b(d)}function cl(d){if(!d)return d===0?d:0;if(d=ws(d),d===X||d===-X){var v=d<0?-1:1;return v*Z}return d===d?d:0}function In(d){var v=cl(d),b=v%1;return v===v?b?v-b:v:0}function x2(d){return d?bc(In(d),0,ne):0}function ws(d){if(typeof d=="number")return d;if(Ya(d))return te;if(xr(d)){var v=typeof d.valueOf=="function"?d.valueOf():d;d=xr(v)?v+"":v}if(typeof d!="string")return d===0?d:+d;d=tM(d);var b=Je.test(d);return b||Ke.test(d)?Mf(d.slice(2),b?2:8):Nn.test(d)?te:+d}function P2(d){return Do(d,Ra(d))}function _H(d){return d?bc(In(d),-K,K):d===0?d:0}function ir(d){return d==null?"":Wa(d)}var gH=nh(function(d,v){if(jf(v)||wa(v)){Do(v,Ei(v),d);return}for(var b in v)cr.call(v,b)&&Bf(d,b,v[b])}),F2=nh(function(d,v){Do(v,Ra(v),d)}),i_=nh(function(d,v,b,D){Do(v,Ra(v),d,D)}),EH=nh(function(d,v,b,D){Do(v,Ei(v),d,D)}),yH=ol(ny);function bH(d,v){var b=th(d);return v==null?b:mM(b,v)}var CH=Un(function(d,v){d=_r(d);var b=-1,D=v.length,x=D>2?v[2]:t;for(x&&oa(v[0],v[1],x)&&(D=1);++b<D;)for(var W=v[b],ee=Ra(W),re=-1,se=ee.length;++re<se;){var Re=ee[re],De=d[Re];(De===t||Zs(De,Zd[Re])&&!cr.call(d,Re))&&(d[Re]=W[Re])}return d}),SH=Un(function(d){return d.push(t,t2),It(B2,t,d)});function TH(d,v){return XI(d,ln(v,3),Oo)}function NH(d,v){return XI(d,ln(v,3),iy)}function IH(d,v){return d==null?d:ry(d,ln(v,3),Ra)}function MH(d,v){return d==null?d:bM(d,ln(v,3),Ra)}function AH(d,v){return d&&Oo(d,ln(v,3))}function wH(d,v){return d&&iy(d,ln(v,3))}function RH(d){return d==null?[]:Bm(d,Ei(d))}function OH(d){return d==null?[]:Bm(d,Ra(d))}function xy(d,v,b){var D=d==null?t:Cc(d,v);return D===t?b:D}function DH(d,v){return d!=null&&i2(d,v,t7)}function Py(d,v){return d!=null&&i2(d,v,n7)}var UH=QM(function(d,v,b){v!=null&&typeof v.toString!="function"&&(v=Im.call(v)),d[v]=b},By(Oa)),LH=QM(function(d,v,b){v!=null&&typeof v.toString!="function"&&(v=Im.call(v)),cr.call(d,v)?d[v].push(b):d[v]=[b]},ln),kH=Un(Gf);function Ei(d){return wa(d)?vM(d):ly(d)}function Ra(d){return wa(d)?vM(d,!0):h7(d)}function xH(d,v){var b={};return v=ln(v,3),Oo(d,function(D,x,W){al(b,v(D,x,W),D)}),b}function PH(d,v){var b={};return v=ln(v,3),Oo(d,function(D,x,W){al(b,x,v(D,x,W))}),b}var FH=nh(function(d,v,b){Hm(d,v,b)}),B2=nh(function(d,v,b,D){Hm(d,v,b,D)}),BH=ol(function(d,v){var b={};if(d==null)return b;var D=!1;v=Cr(v,function(W){return W=su(W,d),D||(D=W.length>1),W}),Do(d,Cy(d),b),D&&(b=Is(b,h|f|p,U7));for(var x=v.length;x--;)vy(b,v[x]);return b});function HH(d,v){return H2(d,t_(ln(v)))}var GH=ol(function(d,v){return d==null?{}:v7(d,v)});function H2(d,v){if(d==null)return{};var b=Cr(Cy(d),function(D){return[D]});return v=ln(v),OM(d,b,function(D,x){return v(D,x[0])})}function $H(d,v,b){v=su(v,d);var D=-1,x=v.length;for(x||(x=1,d=t);++D<x;){var W=d==null?t:d[Uo(v[D])];W===t&&(D=x,W=b),d=ul(W)?W.call(d):W}return d}function VH(d,v,b){return d==null?d:Vf(d,v,b)}function zH(d,v,b,D){return D=typeof D=="function"?D:t,d==null?d:Vf(d,v,b,D)}var G2=JM(Ei),$2=JM(Ra);function jH(d,v,b){var D=Sn(d),x=D||lu(d)||ah(d);if(v=ln(v,4),b==null){var W=d&&d.constructor;x?b=D?new W:[]:xr(d)?b=ul(W)?th(wm(d)):{}:b={}}return(x?ie:Oo)(d,function(ee,re,se){return v(b,ee,re,se)}),b}function qH(d,v){return d==null?!0:vy(d,v)}function KH(d,v,b){return d==null?d:xM(d,v,_y(b))}function WH(d,v,b,D){return D=typeof D=="function"?D:t,d==null?d:xM(d,v,_y(b),D)}function sh(d){return d==null?[]:YE(d,Ei(d))}function YH(d){return d==null?[]:YE(d,Ra(d))}function QH(d,v,b){return b===t&&(b=v,v=t),b!==t&&(b=ws(b),b=b===b?b:0),v!==t&&(v=ws(v),v=v===v?v:0),bc(ws(d),v,b)}function XH(d,v,b){return v=cl(v),b===t?(b=v,v=0):b=cl(b),d=ws(d),r7(d,v,b)}function ZH(d,v,b){if(b&&typeof b!="boolean"&&oa(d,v,b)&&(v=b=t),b===t&&(typeof v=="boolean"?(b=v,v=t):typeof d=="boolean"&&(b=d,d=t)),d===t&&v===t?(d=0,v=1):(d=cl(d),v===t?(v=d,d=0):v=cl(v)),d>v){var D=d;d=v,v=D}if(b||d%1||v%1){var x=hM();return Yi(d+x*(v-d+ym("1e-"+((x+"").length-1))),v)}return dy(d,v)}var JH=rh(function(d,v,b){return v=v.toLowerCase(),d+(b?V2(v):v)});function V2(d){return Fy(ir(d).toLowerCase())}function z2(d){return d=ir(d),d&&d.replace(Se,V5).replace(_m,"")}function eG(d,v,b){d=ir(d),v=Wa(v);var D=d.length;b=b===t?D:bc(In(b),0,D);var x=b;return b-=v.length,b>=0&&d.slice(b,x)==v}function tG(d){return d=ir(d),d&&He.test(d)?d.replace(Pe,z5):d}function nG(d){return d=ir(d),d&&Pn.test(d)?d.replace(rn,"\\$&"):d}var rG=rh(function(d,v,b){return d+(b?"-":"")+v.toLowerCase()}),iG=rh(function(d,v,b){return d+(b?" ":"")+v.toLowerCase()}),aG=KM("toLowerCase");function sG(d,v,b){d=ir(d),v=In(v);var D=v?Qd(d):0;if(!v||D>=v)return d;var x=(v-D)/2;return qm(Um(x),b)+d+qm(Dm(x),b)}function oG(d,v,b){d=ir(d),v=In(v);var D=v?Qd(d):0;return v&&D<v?d+qm(v-D,b):d}function lG(d,v,b){d=ir(d),v=In(v);var D=v?Qd(d):0;return v&&D<v?qm(v-D,b)+d:d}function uG(d,v,b){return b||v==null?v=0:v&&(v=+v),mF(ir(d).replace(_n,""),v||0)}function cG(d,v,b){return(b?oa(d,v,b):v===t)?v=1:v=In(v),hy(ir(d),v)}function dG(){var d=arguments,v=ir(d[0]);return d.length<3?v:v.replace(d[1],d[2])}var hG=rh(function(d,v,b){return d+(b?"_":"")+v.toLowerCase()});function fG(d,v,b){return b&&typeof b!="number"&&oa(d,v,b)&&(v=b=t),b=b===t?ne:b>>>0,b?(d=ir(d),d&&(typeof v=="string"||v!=null&&!ky(v))&&(v=Wa(v),!v&&Yd(d))?ou(Qs(d),0,b):d.split(v,b)):[]}var vG=rh(function(d,v,b){return d+(b?" ":"")+Fy(v)});function pG(d,v,b){return d=ir(d),b=b==null?0:bc(In(b),0,d.length),v=Wa(v),d.slice(b,b+v.length)==v}function mG(d,v,b){var D=V.templateSettings;b&&oa(d,v,b)&&(v=t),d=ir(d),v=i_({},v,D,e2);var x=i_({},v.imports,D.imports,e2),W=Ei(x),ee=YE(x,W),re,se,Re=0,De=v.interpolate||We,Fe="__p += '",ft=XE((v.escape||We).source+"|"+De.source+"|"+(De===Zt?Ot:We).source+"|"+(v.evaluate||We).source+"|$","g"),Ft="//# sourceURL="+(cr.call(v,"sourceURL")?(v.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Vd+"]")+`
`;d.replace(ft,function(dn,Bn,Vn,Qa,la,Xa){return Vn||(Vn=Qa),Fe+=d.slice(Re,Xa).replace(qt,j5),Bn&&(re=!0,Fe+=`' +
__e(`+Bn+`) +
'`),la&&(se=!0,Fe+=`';
`+la+`;
__p += '`),Vn&&(Fe+=`' +
((__t = (`+Vn+`)) == null ? '' : __t) +
'`),Re=Xa+dn.length,dn}),Fe+=`';
`;var cn=cr.call(v,"variable")&&v.variable;if(!cn)Fe=`with (obj) {
`+Fe+`
}
`;else if(Nt.test(cn))throw new bn(o);Fe=(se?Fe.replace(xn,""):Fe).replace(st,"$1").replace(ct,"$1;"),Fe="function("+(cn||"obj")+`) {
`+(cn?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(re?", __e = _.escape":"")+(se?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+Fe+`return __p
}`;var An=q2(function(){return Zn(W,Ft+"return "+Fe).apply(t,ee)});if(An.source=Fe,Ly(An))throw An;return An}function _G(d){return ir(d).toLowerCase()}function gG(d){return ir(d).toUpperCase()}function EG(d,v,b){if(d=ir(d),d&&(b||v===t))return tM(d);if(!d||!(v=Wa(v)))return d;var D=Qs(d),x=Qs(v),W=nM(D,x),ee=rM(D,x)+1;return ou(D,W,ee).join("")}function yG(d,v,b){if(d=ir(d),d&&(b||v===t))return d.slice(0,aM(d)+1);if(!d||!(v=Wa(v)))return d;var D=Qs(d),x=rM(D,Qs(v))+1;return ou(D,0,x).join("")}function bG(d,v,b){if(d=ir(d),d&&(b||v===t))return d.replace(_n,"");if(!d||!(v=Wa(v)))return d;var D=Qs(d),x=nM(D,Qs(v));return ou(D,x).join("")}function CG(d,v){var b=B,D=F;if(xr(v)){var x="separator"in v?v.separator:x;b="length"in v?In(v.length):b,D="omission"in v?Wa(v.omission):D}d=ir(d);var W=d.length;if(Yd(d)){var ee=Qs(d);W=ee.length}if(b>=W)return d;var re=b-Qd(D);if(re<1)return D;var se=ee?ou(ee,0,re).join(""):d.slice(0,re);if(x===t)return se+D;if(ee&&(re+=se.length-re),ky(x)){if(d.slice(re).search(x)){var Re,De=se;for(x.global||(x=XE(x.source,ir(nn.exec(x))+"g")),x.lastIndex=0;Re=x.exec(De);)var Fe=Re.index;se=se.slice(0,Fe===t?re:Fe)}}else if(d.indexOf(Wa(x),re)!=re){var ft=se.lastIndexOf(x);ft>-1&&(se=se.slice(0,ft))}return se+D}function SG(d){return d=ir(d),d&&he.test(d)?d.replace(at,Z5):d}var TG=rh(function(d,v,b){return d+(b?" ":"")+v.toUpperCase()}),Fy=KM("toUpperCase");function j2(d,v,b){return d=ir(d),v=b?t:v,v===t?K5(d)?tF(d):F5(d):d.match(v)||[]}var q2=Un(function(d,v){try{return It(d,t,v)}catch(b){return Ly(b)?b:new bn(b)}}),NG=ol(function(d,v){return ie(v,function(b){b=Uo(b),al(d,b,Dy(d[b],d))}),d});function IG(d){var v=d==null?0:d.length,b=ln();return d=v?Cr(d,function(D){if(typeof D[1]!="function")throw new Ts(s);return[b(D[0]),D[1]]}):[],Un(function(D){for(var x=-1;++x<v;){var W=d[x];if(It(W[0],this,D))return It(W[1],this,D)}})}function MG(d){return ZF(Is(d,h))}function By(d){return function(){return d}}function AG(d,v){return d==null||d!==d?v:d}var wG=YM(),RG=YM(!0);function Oa(d){return d}function Hy(d){return NM(typeof d=="function"?d:Is(d,h))}function OG(d){return MM(Is(d,h))}function DG(d,v){return AM(d,Is(v,h))}var UG=Un(function(d,v){return function(b){return Gf(b,d,v)}}),LG=Un(function(d,v){return function(b){return Gf(d,b,v)}});function Gy(d,v,b){var D=Ei(v),x=Bm(v,D);b==null&&!(xr(v)&&(x.length||!D.length))&&(b=v,v=d,d=this,x=Bm(v,Ei(v)));var W=!(xr(b)&&"chain"in b)||!!b.chain,ee=ul(d);return ie(x,function(re){var se=v[re];d[re]=se,ee&&(d.prototype[re]=function(){var Re=this.__chain__;if(W||Re){var De=d(this.__wrapped__),Fe=De.__actions__=Aa(this.__actions__);return Fe.push({func:se,args:arguments,thisArg:d}),De.__chain__=Re,De}return se.apply(d,tu([this.value()],arguments))})}),d}function kG(){return oi._===this&&(oi._=oF),this}function $y(){}function xG(d){return d=In(d),Un(function(v){return wM(v,d)})}var PG=Ey(Cr),FG=Ey(yt),BG=Ey(zE);function K2(d){return Iy(d)?jE(Uo(d)):p7(d)}function HG(d){return function(v){return d==null?t:Cc(d,v)}}var GG=XM(),$G=XM(!0);function Vy(){return[]}function zy(){return!1}function VG(){return{}}function zG(){return""}function jG(){return!0}function qG(d,v){if(d=In(d),d<1||d>K)return[];var b=ne,D=Yi(d,ne);v=ln(v),d-=ne;for(var x=WE(D,v);++b<d;)v(b);return x}function KG(d){return Sn(d)?Cr(d,Uo):Ya(d)?[d]:Aa(f2(ir(d)))}function WG(d){var v=++aF;return ir(d)+v}var YG=jm(function(d,v){return d+v},0),QG=yy("ceil"),XG=jm(function(d,v){return d/v},1),ZG=yy("floor");function JG(d){return d&&d.length?Fm(d,Oa,ay):t}function e$(d,v){return d&&d.length?Fm(d,ln(v,2),ay):t}function t$(d){return JI(d,Oa)}function n$(d,v){return JI(d,ln(v,2))}function r$(d){return d&&d.length?Fm(d,Oa,uy):t}function i$(d,v){return d&&d.length?Fm(d,ln(v,2),uy):t}var a$=jm(function(d,v){return d*v},1),s$=yy("round"),o$=jm(function(d,v){return d-v},0);function l$(d){return d&&d.length?KE(d,Oa):0}function u$(d,v){return d&&d.length?KE(d,ln(v,2)):0}return V.after=OB,V.ary=T2,V.assign=gH,V.assignIn=F2,V.assignInWith=i_,V.assignWith=EH,V.at=yH,V.before=N2,V.bind=Dy,V.bindAll=NG,V.bindKey=I2,V.castArray=VB,V.chain=b2,V.chunk=Z7,V.compact=J7,V.concat=e8,V.cond=IG,V.conforms=MG,V.constant=By,V.countBy=lB,V.create=bH,V.curry=M2,V.curryRight=A2,V.debounce=w2,V.defaults=CH,V.defaultsDeep=SH,V.defer=DB,V.delay=UB,V.difference=t8,V.differenceBy=n8,V.differenceWith=r8,V.drop=i8,V.dropRight=a8,V.dropRightWhile=s8,V.dropWhile=o8,V.fill=l8,V.filter=cB,V.flatMap=fB,V.flatMapDeep=vB,V.flatMapDepth=pB,V.flatten=_2,V.flattenDeep=u8,V.flattenDepth=c8,V.flip=LB,V.flow=wG,V.flowRight=RG,V.fromPairs=d8,V.functions=RH,V.functionsIn=OH,V.groupBy=mB,V.initial=f8,V.intersection=v8,V.intersectionBy=p8,V.intersectionWith=m8,V.invert=UH,V.invertBy=LH,V.invokeMap=gB,V.iteratee=Hy,V.keyBy=EB,V.keys=Ei,V.keysIn=Ra,V.map=Zm,V.mapKeys=xH,V.mapValues=PH,V.matches=OG,V.matchesProperty=DG,V.memoize=e_,V.merge=FH,V.mergeWith=B2,V.method=UG,V.methodOf=LG,V.mixin=Gy,V.negate=t_,V.nthArg=xG,V.omit=BH,V.omitBy=HH,V.once=kB,V.orderBy=yB,V.over=PG,V.overArgs=xB,V.overEvery=FG,V.overSome=BG,V.partial=Uy,V.partialRight=R2,V.partition=bB,V.pick=GH,V.pickBy=H2,V.property=K2,V.propertyOf=HG,V.pull=y8,V.pullAll=E2,V.pullAllBy=b8,V.pullAllWith=C8,V.pullAt=S8,V.range=GG,V.rangeRight=$G,V.rearg=PB,V.reject=TB,V.remove=T8,V.rest=FB,V.reverse=Ry,V.sampleSize=IB,V.set=VH,V.setWith=zH,V.shuffle=MB,V.slice=N8,V.sortBy=RB,V.sortedUniq=D8,V.sortedUniqBy=U8,V.split=fG,V.spread=BB,V.tail=L8,V.take=k8,V.takeRight=x8,V.takeRightWhile=P8,V.takeWhile=F8,V.tap=J8,V.throttle=HB,V.thru=Xm,V.toArray=k2,V.toPairs=G2,V.toPairsIn=$2,V.toPath=KG,V.toPlainObject=P2,V.transform=jH,V.unary=GB,V.union=B8,V.unionBy=H8,V.unionWith=G8,V.uniq=$8,V.uniqBy=V8,V.uniqWith=z8,V.unset=qH,V.unzip=Oy,V.unzipWith=y2,V.update=KH,V.updateWith=WH,V.values=sh,V.valuesIn=YH,V.without=j8,V.words=j2,V.wrap=$B,V.xor=q8,V.xorBy=K8,V.xorWith=W8,V.zip=Y8,V.zipObject=Q8,V.zipObjectDeep=X8,V.zipWith=Z8,V.entries=G2,V.entriesIn=$2,V.extend=F2,V.extendWith=i_,Gy(V,V),V.add=YG,V.attempt=q2,V.camelCase=JH,V.capitalize=V2,V.ceil=QG,V.clamp=QH,V.clone=zB,V.cloneDeep=qB,V.cloneDeepWith=KB,V.cloneWith=jB,V.conformsTo=WB,V.deburr=z2,V.defaultTo=AG,V.divide=XG,V.endsWith=eG,V.eq=Zs,V.escape=tG,V.escapeRegExp=nG,V.every=uB,V.find=dB,V.findIndex=p2,V.findKey=TH,V.findLast=hB,V.findLastIndex=m2,V.findLastKey=NH,V.floor=ZG,V.forEach=C2,V.forEachRight=S2,V.forIn=IH,V.forInRight=MH,V.forOwn=AH,V.forOwnRight=wH,V.get=xy,V.gt=YB,V.gte=QB,V.has=DH,V.hasIn=Py,V.head=g2,V.identity=Oa,V.includes=_B,V.indexOf=h8,V.inRange=XH,V.invoke=kH,V.isArguments=Nc,V.isArray=Sn,V.isArrayBuffer=XB,V.isArrayLike=wa,V.isArrayLikeObject=Xr,V.isBoolean=ZB,V.isBuffer=lu,V.isDate=JB,V.isElement=eH,V.isEmpty=tH,V.isEqual=nH,V.isEqualWith=rH,V.isError=Ly,V.isFinite=iH,V.isFunction=ul,V.isInteger=O2,V.isLength=n_,V.isMap=D2,V.isMatch=aH,V.isMatchWith=sH,V.isNaN=oH,V.isNative=lH,V.isNil=cH,V.isNull=uH,V.isNumber=U2,V.isObject=xr,V.isObjectLike=zr,V.isPlainObject=Kf,V.isRegExp=ky,V.isSafeInteger=dH,V.isSet=L2,V.isString=r_,V.isSymbol=Ya,V.isTypedArray=ah,V.isUndefined=hH,V.isWeakMap=fH,V.isWeakSet=vH,V.join=_8,V.kebabCase=rG,V.last=As,V.lastIndexOf=g8,V.lowerCase=iG,V.lowerFirst=aG,V.lt=pH,V.lte=mH,V.max=JG,V.maxBy=e$,V.mean=t$,V.meanBy=n$,V.min=r$,V.minBy=i$,V.stubArray=Vy,V.stubFalse=zy,V.stubObject=VG,V.stubString=zG,V.stubTrue=jG,V.multiply=a$,V.nth=E8,V.noConflict=kG,V.noop=$y,V.now=Jm,V.pad=sG,V.padEnd=oG,V.padStart=lG,V.parseInt=uG,V.random=ZH,V.reduce=CB,V.reduceRight=SB,V.repeat=cG,V.replace=dG,V.result=$H,V.round=s$,V.runInContext=ae,V.sample=NB,V.size=AB,V.snakeCase=hG,V.some=wB,V.sortedIndex=I8,V.sortedIndexBy=M8,V.sortedIndexOf=A8,V.sortedLastIndex=w8,V.sortedLastIndexBy=R8,V.sortedLastIndexOf=O8,V.startCase=vG,V.startsWith=pG,V.subtract=o$,V.sum=l$,V.sumBy=u$,V.template=mG,V.times=qG,V.toFinite=cl,V.toInteger=In,V.toLength=x2,V.toLower=_G,V.toNumber=ws,V.toSafeInteger=_H,V.toString=ir,V.toUpper=gG,V.trim=EG,V.trimEnd=yG,V.trimStart=bG,V.truncate=CG,V.unescape=SG,V.uniqueId=WG,V.upperCase=TG,V.upperFirst=Fy,V.each=C2,V.eachRight=S2,V.first=g2,Gy(V,function(){var d={};return Oo(V,function(v,b){cr.call(V.prototype,b)||(d[b]=v)}),d}(),{chain:!1}),V.VERSION=r,ie(["bind","bindKey","curry","curryRight","partial","partialRight"],function(d){V[d].placeholder=V}),ie(["drop","take"],function(d,v){$n.prototype[d]=function(b){b=b===t?1:di(In(b),0);var D=this.__filtered__&&!v?new $n(this):this.clone();return D.__filtered__?D.__takeCount__=Yi(b,D.__takeCount__):D.__views__.push({size:Yi(b,ne),type:d+(D.__dir__<0?"Right":"")}),D},$n.prototype[d+"Right"]=function(b){return this.reverse()[d](b).reverse()}}),ie(["filter","map","takeWhile"],function(d,v){var b=v+1,D=b==L||b==j;$n.prototype[d]=function(x){var W=this.clone();return W.__iteratees__.push({iteratee:ln(x,3),type:b}),W.__filtered__=W.__filtered__||D,W}}),ie(["head","last"],function(d,v){var b="take"+(v?"Right":"");$n.prototype[d]=function(){return this[b](1).value()[0]}}),ie(["initial","tail"],function(d,v){var b="drop"+(v?"":"Right");$n.prototype[d]=function(){return this.__filtered__?new $n(this):this[b](1)}}),$n.prototype.compact=function(){return this.filter(Oa)},$n.prototype.find=function(d){return this.filter(d).head()},$n.prototype.findLast=function(d){return this.reverse().find(d)},$n.prototype.invokeMap=Un(function(d,v){return typeof d=="function"?new $n(this):this.map(function(b){return Gf(b,d,v)})}),$n.prototype.reject=function(d){return this.filter(t_(ln(d)))},$n.prototype.slice=function(d,v){d=In(d);var b=this;return b.__filtered__&&(d>0||v<0)?new $n(b):(d<0?b=b.takeRight(-d):d&&(b=b.drop(d)),v!==t&&(v=In(v),b=v<0?b.dropRight(-v):b.take(v-d)),b)},$n.prototype.takeRightWhile=function(d){return this.reverse().takeWhile(d).reverse()},$n.prototype.toArray=function(){return this.take(ne)},Oo($n.prototype,function(d,v){var b=/^(?:filter|find|map|reject)|While$/.test(v),D=/^(?:head|last)$/.test(v),x=V[D?"take"+(v=="last"?"Right":""):v],W=D||/^find/.test(v);x&&(V.prototype[v]=function(){var ee=this.__wrapped__,re=D?[1]:arguments,se=ee instanceof $n,Re=re[0],De=se||Sn(ee),Fe=function(Bn){var Vn=x.apply(V,tu([Bn],re));return D&&ft?Vn[0]:Vn};De&&b&&typeof Re=="function"&&Re.length!=1&&(se=De=!1);var ft=this.__chain__,Ft=!!this.__actions__.length,cn=W&&!ft,An=se&&!Ft;if(!W&&De){ee=An?ee:new $n(this);var dn=d.apply(ee,re);return dn.__actions__.push({func:Xm,args:[Fe],thisArg:t}),new Ns(dn,ft)}return cn&&An?d.apply(this,re):(dn=this.thru(Fe),cn?D?dn.value()[0]:dn.value():dn)})}),ie(["pop","push","shift","sort","splice","unshift"],function(d){var v=Sm[d],b=/^(?:push|sort|unshift)$/.test(d)?"tap":"thru",D=/^(?:pop|shift)$/.test(d);V.prototype[d]=function(){var x=arguments;if(D&&!this.__chain__){var W=this.value();return v.apply(Sn(W)?W:[],x)}return this[b](function(ee){return v.apply(Sn(ee)?ee:[],x)})}}),Oo($n.prototype,function(d,v){var b=V[v];if(b){var D=b.name+"";cr.call(eh,D)||(eh[D]=[]),eh[D].push({name:v,func:b})}}),eh[zm(t,E).name]=[{name:"wrapper",func:t}],$n.prototype.clone=SF,$n.prototype.reverse=TF,$n.prototype.value=NF,V.prototype.at=eB,V.prototype.chain=tB,V.prototype.commit=nB,V.prototype.next=rB,V.prototype.plant=aB,V.prototype.reverse=sB,V.prototype.toJSON=V.prototype.valueOf=V.prototype.value=oB,V.prototype.first=V.prototype.head,Lf&&(V.prototype[Lf]=iB),V},Xd=nF();Ro?((Ro.exports=Xd)._=Xd,_c._=Xd):oi._=Xd}).call(Il)})(G0,G0.exports);var _U=G0.exports;function ape(e){return"reqId"in e}var O5=function(){var e,n,t=M.useContext(spe);if(!t)throw new Error("useThread must be used within a ThreadProvider");var r=en().state.config,i=r.logger,a=r.pubSub,s=r.groupChannel.enableMention,o=r.groupChannel.enableReactions,l=am.useSyncExternalStore(t.subscribe,t.getState),u=l.message,c=l.parentMessage,h=l.currentChannel,f=l.threadListState,p=l.allThreadMessages,_=l.onBeforeSendUserMessage,g=l.onBeforeSendFileMessage,C=l.onBeforeSendVoiceMessage,E=l.onBeforeSendMultipleFilesMessage,y={sendMessageStart:M.useCallback(function(L){return t.setState(function($){return"sendingStatus"in L&&(L.sendingStatus=sn.PENDING),H(H({},$),{localThreadMessages:we(we([],$.localThreadMessages,!0),[L],!1)})})},[t]),sendMessageSuccess:M.useCallback(function(L){return t.setState(function($){return"sendingStatus"in L&&(L.sendingStatus=sn.SUCCEEDED),H(H({},$),{allThreadMessages:we(we([],$.allThreadMessages.filter(function(j){return!mu(j==null?void 0:j.reqId,L==null?void 0:L.reqId)}),!0),[L],!1),localThreadMessages:$.localThreadMessages.filter(function(j){return!mu(j==null?void 0:j.reqId,L==null?void 0:L.reqId)})})})},[t]),sendMessageFailure:M.useCallback(function(L){return t.setState(function($){return"sendingStatus"in L&&(L.sendingStatus=sn.FAILED),H(H({},$),{localThreadMessages:$.localThreadMessages.map(function(j){return mu(j==null?void 0:j.reqId,L==null?void 0:L.reqId)?L:j})})})},[t]),resendMessageStart:M.useCallback(function(L){return t.setState(function($){return"sendingStatus"in L&&(L.sendingStatus=sn.PENDING),H(H({},$),{localThreadMessages:$.localThreadMessages.map(function(j){return mu(j==null?void 0:j.reqId,L==null?void 0:L.reqId)?L:j})})})},[t])},S=Xve({currentChannel:h},{logger:i}),I={sendMessage:Zve({isMentionEnabled:s,currentChannel:h,onBeforeSendUserMessage:_,sendMessageStart:y.sendMessageStart,sendMessageFailure:y.sendMessageFailure},{logger:i,pubSub:a}),sendFileMessage:Jve({currentChannel:h,onBeforeSendFileMessage:g,sendMessageStart:y.sendMessageStart,sendMessageFailure:y.sendMessageFailure},{logger:i,pubSub:a}),sendVoiceMessage:epe({currentChannel:h,onBeforeSendVoiceMessage:C,sendMessageStart:y.sendMessageStart,sendMessageFailure:y.sendMessageFailure},{logger:i,pubSub:a}),sendMultipleFilesMessage:w5({currentChannel:h,onBeforeSendMultipleFilesMessage:E,publishingModules:[_i.THREAD]},{logger:i,pubSub:a})[0],resendMessage:tpe({resendMessageStart:y.resendMessageStart,sendMessageSuccess:y.sendMessageSuccess,sendMessageFailure:y.sendMessageFailure,currentChannel:h},{logger:i,pubSub:a})},w={onMessageUpdated:M.useCallback(function(L,$){t.setState(function(j){var X,K,Z;return((X=j.currentChannel)===null||X===void 0?void 0:X.url)!==(L==null?void 0:L.url)?j:H(H({},j),{parentMessage:((K=j.parentMessage)===null||K===void 0?void 0:K.messageId)===($==null?void 0:$.messageId)?$:j.parentMessage,allThreadMessages:(Z=j.allThreadMessages)===null||Z===void 0?void 0:Z.map(function(te){return(te==null?void 0:te.messageId)===($==null?void 0:$.messageId)?$:te})})})},[t]),onMessageDeleted:M.useCallback(function(L,$){t.setState(function(j){var X,K,Z,te;return((X=j.currentChannel)===null||X===void 0?void 0:X.url)!==(L==null?void 0:L.url)?j:((K=j==null?void 0:j.parentMessage)===null||K===void 0?void 0:K.messageId)===$?H(H({},j),{parentMessage:null,parentMessageState:bu.NIL,allThreadMessages:[]}):H(H({},j),{allThreadMessages:(Z=j.allThreadMessages)===null||Z===void 0?void 0:Z.filter(function(ne){return(ne==null?void 0:ne.messageId)!==$}),localThreadMessages:(te=j.localThreadMessages)===null||te===void 0?void 0:te.filter(function(ne){return(ne==null?void 0:ne.messageId)!==$})})})},[t]),onMessageDeletedByReqId:M.useCallback(function(L){t.setState(function($){return H(H({},$),{localThreadMessages:$.localThreadMessages.filter(function(j){return!mu(j.reqId,L)})})})},[t])},R={updateMessage:npe({currentChannel:h,isMentionEnabled:s,onMessageUpdated:w.onMessageUpdated},{logger:i,pubSub:a}),deleteMessage:rpe({currentChannel:h,onMessageDeleted:w.onMessageDeleted,onMessageDeletedByReqId:w.onMessageDeletedByReqId},{logger:i})},A={initializeThreadListStart:M.useCallback(function(){return t.setState(function(L){return H(H({},L),{threadListState:Al.LOADING,allThreadMessages:[]})})},[t]),initializeThreadListSuccess:M.useCallback(function(L,$,j){return t.setState(function(X){var K=$!=null&&$.messageId?$==null?void 0:$.createdAt:L==null?void 0:L.createdAt,Z=j.findIndex(function(le){return(le==null?void 0:le.createdAt)===K}),te=Z>-1?j.slice(0,Z):j,ne=Z>-1?j.slice(Z):[];return H(H({},X),{threadListState:Al.INITIALIZED,hasMorePrev:Z===-1||Z===wT,hasMoreNext:j.length-Z===RT,allThreadMessages:we(we([],te,!0),ne,!0)})})},[t]),initializeThreadListFailure:M.useCallback(function(){return t.setState(function(L){return H(H({},L),{threadListState:Al.LOADING,allThreadMessages:[]})})},[t]),getPrevMessagesStart:M.useCallback(function(){return t.setState(function(L){return H({},L)})},[t]),getPrevMessagesSuccess:M.useCallback(function(L){return t.setState(function($){return H(H({},$),{hasMorePrev:L.length===wT,allThreadMessages:we(we([],L,!0),$.allThreadMessages,!0)})})},[t]),getPrevMessagesFailure:M.useCallback(function(){return t.setState(function(L){return H(H({},L),{hasMorePrev:!1})})},[t]),getNextMessagesStart:M.useCallback(function(){return t.setState(function(L){return H({},L)})},[t]),getNextMessagesSuccess:M.useCallback(function(L){return t.setState(function($){return H(H({},$),{hasMoreNext:L.length===RT,allThreadMessages:we(we([],$.allThreadMessages,!0),L,!0)})})},[t]),getNextMessagesFailure:M.useCallback(function(){return t.setState(function(L){return H(H({},L),{hasMoreNext:!1})})},[t])},U=ipe({parentMessage:c,anchorMessage:(u==null?void 0:u.messageId)!==(c==null?void 0:c.messageId)&&u||void 0,logger:i,isReactionEnabled:o,threadListState:f,oldestMessageTimeStamp:((e=p[0])===null||e===void 0?void 0:e.createdAt)||0,latestMessageTimeStamp:((n=p[p.length-1])===null||n===void 0?void 0:n.createdAt)||0,initializeThreadListStart:A.initializeThreadListStart,initializeThreadListSuccess:A.initializeThreadListSuccess,initializeThreadListFailure:A.initializeThreadListFailure,getPrevMessagesStart:A.getPrevMessagesStart,getPrevMessagesSuccess:A.getPrevMessagesSuccess,getPrevMessagesFailure:A.getPrevMessagesFailure,getNextMessagesStart:A.getNextMessagesStart,getNextMessagesSuccess:A.getNextMessagesSuccess,getNextMessagesFailure:A.getNextMessagesFailure}),O=U.initializeThreadFetcher,B=U.fetchPrevThreads,F=U.fetchNextThreads,P={setCurrentUserId:M.useCallback(function(L){return t.setState(function($){return H(H({},$),{currentUserId:L})})},[t]),getChannelStart:M.useCallback(function(){return t.setState(function(L){return H(H({},L),{channelState:Wc.LOADING,currentChannel:null})})},[t]),getChannelSuccess:M.useCallback(function(L){return t.setState(function($){var j,X;return H(H({},$),{channelState:Wc.INITIALIZED,currentChannel:L,isMuted:((X=(j=L==null?void 0:L.members)===null||j===void 0?void 0:j.find(function(K){return(K==null?void 0:K.userId)===$.currentUserId}))===null||X===void 0?void 0:X.isMuted)||!1,isChannelFrozen:(L==null?void 0:L.isFrozen)||!1})})},[t]),getChannelFailure:M.useCallback(function(){return t.setState(function(L){return H(H({},L),{channelState:Wc.INVALID,currentChannel:null})})},[t]),getParentMessageStart:M.useCallback(function(){return t.setState(function(L){return H(H({},L),{parentMessageState:bu.LOADING,parentMessage:null})})},[t]),getParentMessageSuccess:M.useCallback(function(L){return t.setState(function($){return H(H({},$),{parentMessageState:bu.INITIALIZED,parentMessage:L})})},[t]),getParentMessageFailure:M.useCallback(function(){return t.setState(function(L){return H(H({},L),{parentMessageState:bu.INVALID,parentMessage:null})})},[t]),setEmojiContainer:M.useCallback(function(L){return t.setState(function($){return H(H({},$),{emojiContainer:L})})},[t]),onMessageReceived:M.useCallback(function(L,$){return t.setState(function(j){var X,K,Z,te;if(((X=j.currentChannel)===null||X===void 0?void 0:X.url)!==(L==null?void 0:L.url)||j.hasMoreNext||((K=$==null?void 0:$.parentMessage)===null||K===void 0?void 0:K.messageId)!==((Z=j==null?void 0:j.parentMessage)===null||Z===void 0?void 0:Z.messageId))return j;var ne=j.allThreadMessages.findIndex(function(le){return le.messageId===$.messageId})>-1;return H(H({},j),{parentMessage:((te=j.parentMessage)===null||te===void 0?void 0:te.messageId)===($==null?void 0:$.messageId)?$:j.parentMessage,allThreadMessages:ne?j.allThreadMessages.map(function(le){return le.messageId===$.messageId?$:le}):we(we([],j.allThreadMessages.filter(function(le){return(le==null?void 0:le.reqId)!==($==null?void 0:$.reqId)}),!0),[$],!1)})})},[t]),onReactionUpdated:M.useCallback(function(L){return t.setState(function($){var j,X=$.parentMessage;((j=$.parentMessage)===null||j===void 0?void 0:j.messageId)===(L==null?void 0:L.messageId)&&(X=_U.cloneDeep($.parentMessage),X.applyReactionEvent(L));var K=$.allThreadMessages.map(function(Z){if((L==null?void 0:L.messageId)===(Z==null?void 0:Z.messageId)){var te=_U.cloneDeep(Z);return te.applyReactionEvent(L),te}return Z});return H(H({},$),{parentMessage:X,allThreadMessages:we([],K,!0)})})},[t]),onUserMuted:M.useCallback(function(L,$){return t.setState(function(j){var X;return((X=j.currentChannel)===null||X===void 0?void 0:X.url)!==(L==null?void 0:L.url)||j.currentUserId!==($==null?void 0:$.userId)?j:H(H({},j),{isMuted:!0})})},[t]),onUserUnmuted:M.useCallback(function(L,$){return t.setState(function(j){var X;return((X=j.currentChannel)===null||X===void 0?void 0:X.url)!==(L==null?void 0:L.url)||j.currentUserId!==($==null?void 0:$.userId)?j:H(H({},j),{isMuted:!1})})},[t]),onUserBanned:M.useCallback(function(){return t.setState(function(L){return H(H({},L),{channelState:Wc.NIL,threadListState:Al.NIL,parentMessageState:bu.NIL,currentChannel:null,parentMessage:null,allThreadMessages:[],hasMorePrev:!1,hasMoreNext:!1})})},[t]),onUserUnbanned:M.useCallback(function(){return t.setState(function(L){return H({},L)})},[t]),onUserLeft:M.useCallback(function(){return t.setState(function(L){return H(H({},L),{channelState:Wc.NIL,threadListState:Al.NIL,parentMessageState:bu.NIL,currentChannel:null,parentMessage:null,allThreadMessages:[],hasMorePrev:!1,hasMoreNext:!1})})},[t]),onChannelFrozen:M.useCallback(function(){return t.setState(function(L){return H(H({},L),{isChannelFrozen:!0})})},[t]),onChannelUnfrozen:M.useCallback(function(){return t.setState(function(L){return H(H({},L),{isChannelFrozen:!1})})},[t]),onOperatorUpdated:M.useCallback(function(L){return t.setState(function($){var j;return(L==null?void 0:L.url)===((j=$.currentChannel)===null||j===void 0?void 0:j.url)?H(H({},$),{currentChannel:L}):$})},[t]),onTypingStatusUpdated:M.useCallback(function(L,$){return t.setState(function(j){var X;return mu(L.url,(X=j.currentChannel)===null||X===void 0?void 0:X.url)?H(H({},j),{typingMembers:$}):j})},[t]),onFileInfoUpdated:M.useCallback(function(L){var $=L.channelUrl,j=L.requestId,X=L.index,K=L.uploadableFileInfo,Z=L.error;return t.setState(function(te){var ne,le;if(!mu($,(ne=te.currentChannel)===null||ne===void 0?void 0:ne.url)||Z)return te;var Te=te.localThreadMessages,Ze=Te.find(function(ge){return mu(ape(ge)&&ge.reqId,j)}),ce=(le=Ze.messageParams)===null||le===void 0?void 0:le.fileInfoList;return Array.isArray(ce)&&(ce[X]=K),H(H({},te),{localThreadMessages:Te})})},[t])},G=M.useMemo(function(){return H(H(H(H(H(H(H(H({},P),{toggleReaction:S}),y),I),w),R),A),{initializeThreadFetcher:O,fetchPrevThreads:B,fetchNextThreads:F})},[P,S,y,I,w,R,A,O,B,F]);return{state:l,actions:G}},spe=m.createContext(null),ope=function(e){var n=O5().state.currentChannel;return m.createElement(MI,H({},e,{currentChannel:n}))},IC={OPERATOR:"operator"},lpe=function(e,n){var t=e.sendFileMessage,r=e.sendMultipleFilesMessage,i=e.quoteMessage,a=n.logger,s=tn().stringSet,o=en().state.config,l=o.imageCompression,u=o==null?void 0:o.uikitUploadSizeLimit,c=o==null?void 0:o.uikitMultipleFilesMessageLimit,h=sI().openModal,f=M.useCallback(function(p){return vr(void 0,void 0,void 0,function(){var _,g,C,E,y;return pr(this,function(S){switch(S.label){case 0:return!t||!r?(a.warning("Channel|useHandleUploadFiles: required functions are undefined",{sendFileMessage:t,sendMultipleFilesMessage:r}),[2]):p.length===0?(a.warning("Channel|useHandleUploadFiles: given file list is empty.",{files:p}),[2]):p.length>c?(a.info("Channel|useHandleUploadFiles: Cannot upload files more than ".concat(c)),h({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__COUNT_LIMIT.replace("%d","".concat(c)),hideFooter:!0},childElement:function(I){var w=I.closeModal;return m.createElement(af,{type:br.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:w,onSubmit:w})}}),[2]):p.some(function(I){return I.size>u})?(a.info("Channel|useHandleUploadFiles: Cannot upload file size exceeding ".concat(u)),h({modalProps:{titleText:s.FILE_UPLOAD_NOTIFICATION__SIZE_LIMIT.replace("%d","".concat(Math.floor(u/RZ))),hideFooter:!0},childElement:function(I){var w=I.closeModal;return m.createElement(af,{type:br.PRIMARY,submitText:s.BUTTON__OK,hideCancelButton:!0,onCancel:w,onSubmit:w})}}),[2]):[4,T5({files:p,imageCompression:l,logger:a})];case 1:if(_=S.sent().compressedFiles,g=_,g.length===1)a.info("Channel|useHandleUploadFiles: sending one file."),C=g[0],t(C,i);else if(g.length>1)return a.info("Channel|useHandleUploadFiles: sending multiple files."),E=[],y=[],g.forEach(function(I){So(I.type)?E.push(I):y.push(I)}),[2,y.reduce(function(I,w){return I.then(function(){return t(w,i)})},function(){return E.length===0?Promise.resolve():E.length===1?t(E[0],i):r(E,i)}())];return[2]}})})},[t,r,i]);return f},upe=function(e,n){var t,r=e.className,i=e.renderFileUploadIcon,a=e.renderVoiceMessageIcon,s=e.renderSendMessageIcon,o=e.acceptableMimeTypes,l=en().state.config,u=si().isMobile,c=tn().stringSet,h=l.isOnline,f=l.userMention,p=l.logger,_=l.groupChannel,g=O5(),C=g.state,E=C.currentChannel,y=C.parentMessage,S=C.isMuted,I=C.isChannelFrozen,w=C.allThreadMessages,R=g.actions,A=R.sendMessage,U=R.sendFileMessage,O=R.sendVoiceMessage,B=R.sendMultipleFilesMessage,F=M.useRef(),P=_.enableMention,G=_.enableVoiceMessage,L=(t=g.state.isMultipleFilesMessageEnabled)!==null&&t!==void 0?t:l.isMultipleFilesMessageEnabled,$=e.disabled||!h||S||(E==null?void 0:E.myRole)!==IC.OPERATOR&&I||y===null,j=lpe({sendFileMessage:U,sendMultipleFilesMessage:B,quoteMessage:y},{logger:p}),X=M.useState(""),K=X[0],Z=X[1],te=M.useState([]),ne=te[0],le=te[1],Te=M.useState([]),Ze=Te[0],ce=Te[1],ge=M.useState(null),Qe=ge[0],xe=ge[1],tt=M.useState([]),ht=tt[0],bt=tt[1],Rt=M.useState(null),Ut=Rt[0],lt=Rt[1],kt=M.useState(!1),$t=kt[0],mt=kt[1],zt=h&&P&&K.length>0&&!C5(E)&&!S5(E)&&!(E!=null&&E.isBroadcast);M.useEffect(function(){mt(!1)},[E==null?void 0:E.url]);var Tt=bI({ref:n||F},{logger:p}),Pt=(Tt==null?void 0:Tt.length)<(f==null?void 0:f.maxMentionCount);return M.useEffect(function(){le(ne.filter(function(Xe){var je=Xe.userId,Ve=Ze.indexOf(je);return Ve<0?!1:(Ze.splice(Ve,1),!0)}))},[Ze]),E!=null&&E.isBroadcast&&(E==null?void 0:E.myRole)!==IC.OPERATOR?m.createElement(m.Fragment,null):m.createElement("div",{className:fn($t?"sendbird-thread-message-input--voice-message":"sendbird-thread-message-input",r)},zt&&m.createElement(ope,{targetNickname:K,inputEvent:Ut??void 0,onUserItemClick:function(Xe){Xe&&le(we(we([],ne,!0),[Xe],!1)),Z(""),xe(Xe),lt(null)},onFocusItemChange:function(){lt(null)},onFetchUsers:function(Xe){bt(Xe)},ableAddMention:Pt,maxMentionCount:f==null?void 0:f.maxMentionCount,maxSuggestionCount:f==null?void 0:f.maxSuggestionCount}),$t?m.createElement(N5,{channel:E,onSubmitClick:function(Xe,je){O(Xe,je,y),mt(!1)},onCancelClick:function(){mt(!1)}}):m.createElement(um,{className:"sendbird-thread-message-input__message-input",messageFieldId:"sendbird-message-input-text-field--thread",channel:E,channelUrl:E==null?void 0:E.url,isMobile:u,disabled:$,acceptableMimeTypes:o,setMentionedUsers:le,mentionSelectedUser:Qe,isMentionEnabled:P,isVoiceMessageEnabled:G,isSelectingMultipleFilesEnabled:L,onVoiceMessageIconClick:function(){mt(!0)},renderFileUploadIcon:i,renderVoiceMessageIcon:a,renderSendMessageIcon:s,ref:n||F,placeholder:(E==null?void 0:E.isFrozen)&&(E==null?void 0:E.myRole)!==IC.OPERATOR&&c.MESSAGE_INPUT__PLACE_HOLDER__DISABLED||(E==null?void 0:E.myMutedState)===xs.MUTED&&c.MESSAGE_INPUT__PLACE_HOLDER__MUTED_SHORT||(w.length>0?c.THREAD__INPUT__REPLY_TO_THREAD:c.THREAD__INPUT__REPLY_IN_THREAD),onStartTyping:function(){var Xe;(Xe=E==null?void 0:E.startTyping)===null||Xe===void 0||Xe.call(E)},onSendMessage:function(Xe){var je,Ve=Xe.message,Ct=Xe.mentionTemplate;A({message:Ve,mentionedUsers:ne,mentionTemplate:Ct,quoteMessage:y}),Z(""),le([]),(je=E==null?void 0:E.endTyping)===null||je===void 0||je.call(E)},onFileUpload:j,onUserMentioned:function(Xe){(Qe==null?void 0:Qe.userId)===(Xe==null?void 0:Xe.userId)&&(xe(null),Z(""))},onMentionStringChange:function(Xe){Z(Xe)},onMentionedUserIdsUpdated:function(Xe){ce(Xe)},onKeyDown:function(Xe){return zt&&(ht==null?void 0:ht.length)>0&&(Xe.key===Va.Enter&&Pt||Xe.key===Va.ArrowUp||Xe.key===Va.ArrowDown)?(lt(Xe),!0):!1}}))};m.forwardRef(upe);var cpe=function(e){var n=e.className,t=Xl();return m.createElement(Rue,H({},t,{className:n,currentChannel:t.currentGroupChannel}))},dpe=function(e){var n=Xl().deleteMessage;return m.createElement(Bfe,H({},e,{deleteMessage:n}))},hpe=function(e){var n=Xl().deleteMessage;return m.createElement(Gfe,H({},e,{deleteMessage:n}))},gU=function(e){var n,t,r=en().state.config,i=Xl(),a=i.initialized,s=i.currentGroupChannel,o=i.animatedMessageId,l=i.setAnimatedMessageId,u=i.updateMessage,c=i.scrollToMessage,h=i.replyType,f=i.threadReplySelectType,p=i.isReactionEnabled,_=i.toggleReaction,g=i.emojiContainer,C=i.nicknamesMap,E=i.setQuoteMessage,y=i.resendMessage,S=i.deleteMessage,I=i.renderUserMentionItem,w=i.onReplyInThread,R=i.onQuoteMessageClick,A=i.onMessageAnimated,U=i.sendMessage,O=i.localMessages,B=i.allMessages,F=e.message;return s?m.createElement(Ffe,H({},e,{channel:s,emojiContainer:g,editInputDisabled:!a||C5(s)||S5(s)||!r.isOnline,shouldRenderSuggestedReplies:((n=r==null?void 0:r.groupChannel)===null||n===void 0?void 0:n.enableSuggestedReplies)&&(((t=r==null?void 0:r.groupChannel)===null||t===void 0?void 0:t.showSuggestedRepliesFor)==="all_messages"?!0:F.messageId===B[B.length-1].messageId)&&(O==null?void 0:O.length)===0&&nP(F).length>0,isReactionEnabled:p,replyType:h,threadReplySelectType:f,nicknamesMap:C,renderUserMentionItem:I,scrollToMessage:c,toggleReaction:_,setQuoteMessage:E,onQuoteMessageClick:R,onReplyInThreadClick:w,sendUserMessage:function(P){U({message:P.message,mentionedUsers:P.mentionedUsers,mentionTemplate:P.mentionedMessageTemplate})},updateUserMessage:function(P,G){var L;u({messageId:P,message:(L=G.message)!==null&&L!==void 0?L:"",mentionedUsers:G.mentionedUsers,mentionTemplate:G.mentionedMessageTemplate})},resendMessage:y,deleteMessage:S,animatedMessageId:o,setAnimatedMessageId:l,onMessageAnimated:A,renderFileViewer:function(P){return m.createElement(dpe,H({},P))},renderRemoveMessageModal:function(P){return m.createElement(hpe,H({},P))}})):null},fpe=100;function vpe(e,n){return e-n}function D5(e){var n=e.hasMore,t=e.hasNext,r=e.onScroll,i=e.scrollRef,a=e.setShowScrollDownButton,s=zu(function(){var o=i==null?void 0:i.current;if(o!=null){var l=o.scrollTop,u=o.scrollHeight,c=o.clientHeight,h=vpe(u,l);typeof a=="function"&&a(u>l+c+1),n&&xl(l,0,zo)&&r(function(){var f=o.scrollHeight>u;f&&(o.scrollTop=o.scrollHeight-h)}),t&&xl(c+l,u,zo)&&r(function(){var f=o.scrollHeight>u;f&&(o.scrollTop=l)})}});return AI(s,fpe,{trailing:!0})}var ppe=100;function mpe(e){var n=e.loading,t=M.useState(0),r=t[0],i=t[1];M.useEffect(function(){n&&i(0)},[n]);var a=function(s){var o=s.target;try{i(o.scrollHeight-o.scrollTop-o.offsetHeight)}catch{}};return{scrollBottom:r,scrollToBottomHandler:AI(a,ppe,{trailing:!0})}}function _pe(){var e=Xl(),n=e.scrollRef,t=e.scrollBehavior,r=t===void 0?"auto":t;return M.useEffect(function(){n.current&&(n.current.style.scrollBehavior=r)},[n.current]),null}var gpe=50,Epe=function(e){var n,t,r,i,a,s,o,l=e.className,u=l===void 0?"":l,c=rc(e),h=c.renderMessage,f=c.renderMessageContent,p=c.renderSuggestedReplies,_=c.renderCustomSeparator,g=c.renderPlaceholderLoader,C=g===void 0?function(){return m.createElement(po,{type:gr.LOADING})}:g,E=c.renderPlaceholderEmpty,y=E===void 0?function(){return m.createElement(po,{className:"sendbird-conversation__no-messages",type:gr.NO_MESSAGES})}:E,S=c.renderFrozenNotification,I=S===void 0?function(){return m.createElement(Vfe,{className:"sendbird-conversation__messages__notification"})}:S,w=Xl(),R=w.allMessages,A=w.localMessages,U=w.hasMorePrev,O=w.hasMoreNext,B=w.setInitialTimeStamp,F=w.setAnimatedMessageId,P=w.setHighLightedMessageId,G=w.isMessageGroupingEnabled,L=w.scrollRef,$=w.onScrollCallback,j=w.onScrollDownCallback,X=w.messagesDispatcher,K=w.messageActionTypes,Z=w.currentGroupChannel,te=w.disableMarkAsRead,ne=w.filterMessageList,le=w.replyType,Te=w.loading,Ze=w.isScrolled,ce=w.unreadSince,ge=w.unreadSinceDate,Qe=w.typingMembers,xe=en().state,tt=tn().stringSet,ht=typeof ne=="function"?R.filter(ne):R,bt=xe.config.markAsReadScheduler,Rt=M.useState(!1),Ut=Rt[0],lt=Rt[1];_pe();var kt=function(Ve){var Ct=L==null?void 0:L.current;if(Ct!=null){var ut=Ct.scrollTop,qe=Ct.clientHeight,pt=Ct.scrollHeight;U&&xl(ut,0,zo)&&$(Ve),O&&xl(qe+ut,pt,zo)&&j(Ve),!te&&xl(qe+ut,pt,zo)&&Z&&(X({type:K.MARK_AS_READ,payload:{channel:Z}}),bt.push(Z))}},$t=function(){var Ve,Ct;B==null||B(null),F==null||F(null),P==null||P(null),L.current&&L.current.scrollTop>-1&&(L.current.scrollTop=((Ve=L.current.scrollHeight)!==null&&Ve!==void 0?Ve:0)-((Ct=L.current.offsetHeight)!==null&&Ct!==void 0?Ct:0))},mt=function(Ve){Ve===void 0&&(Ve=!1);var Ct=L==null?void 0:L.current;if(Ct){var ut=Ct.scrollHeight-Ct.scrollTop-Ct.offsetHeight;je<ut&&(!Ve||je<zo)&&(Ct.scrollTop+=ut-je)}},zt=D5({hasMore:U,hasNext:O,onScroll:kt,scrollRef:L}),Tt=M5({onReachedBottom:function(){!O&&!te&&Z&&(X({type:K.MARK_AS_READ,payload:{channel:Z}}),bt.push(Z)),lt(!0)},onReachedTop:function(){lt(!1)},onInBetween:function(){lt(!1)}}),Pt=mpe({loading:Te}),Xe=Pt.scrollToBottomHandler,je=Pt.scrollBottom;return Te?C():ht.length<1?y():m.createElement(m.Fragment,null,!Ze&&m.createElement(po,{type:gr.LOADING}),m.createElement("div",{className:"sendbird-conversation__messages ".concat(u),dir:Lle((n=xe==null?void 0:xe.config)===null||n===void 0?void 0:n.htmlTextDirection,(t=xe==null?void 0:xe.config)===null||t===void 0?void 0:t.forceLeftToRightMessageLayout)},m.createElement("div",{className:"sendbird-conversation__scroll-container"},m.createElement("div",{className:"sendbird-conversation__padding"}),m.createElement("div",{className:"sendbird-conversation__messages-padding","data-testid":"sendbird-message-list-container",ref:L,onScroll:function(Ve){zt(),Xe(Ve),Tt(Ve)}},ht.map(function(Ve,Ct){var ut,qe,pt=cU({allMessages:ht,stringSet:tt,replyType:le,isMessageGroupingEnabled:G,currentIndex:Ct,currentMessage:Ve,currentChannel:Z}),jt=pt.chainTop,Ue=pt.chainBottom,hn=pt.hasSeparator,un=((ut=Ve==null?void 0:Ve.sender)===null||ut===void 0?void 0:ut.userId)===((qe=xe==null?void 0:xe.config)===null||qe===void 0?void 0:qe.userId);return m.createElement(TT,{message:Ve,key:Ve==null?void 0:Ve.messageId,isByMe:un},m.createElement(gU,{handleScroll:mt,message:Ve,hasSeparator:hn,chainTop:jt,chainBottom:Ue,renderMessageContent:f,renderSuggestedReplies:p,renderCustomSeparator:_,renderMessage:h}))}),A.map(function(Ve,Ct){var ut,qe,pt=cU({allMessages:ht,stringSet:tt,replyType:le,isMessageGroupingEnabled:G,currentIndex:Ct,currentMessage:Ve,currentChannel:Z}),jt=pt.chainTop,Ue=pt.chainBottom,hn=((ut=Ve==null?void 0:Ve.sender)===null||ut===void 0?void 0:ut.userId)===((qe=xe==null?void 0:xe.config)===null||qe===void 0?void 0:qe.userId);return m.createElement(TT,{message:Ve,key:Ve==null?void 0:Ve.messageId,isByMe:hn},m.createElement(gU,{handleScroll:mt,message:Ve,chainTop:jt,chainBottom:Ue,renderMessageContent:f,renderSuggestedReplies:p,renderCustomSeparator:_,renderMessage:h}))}),!O&&((i=(r=xe==null?void 0:xe.config)===null||r===void 0?void 0:r.groupChannel)===null||i===void 0?void 0:i.enableTypingIndicator)&&((o=(s=(a=xe==null?void 0:xe.config)===null||a===void 0?void 0:a.groupChannel)===null||s===void 0?void 0:s.typingIndicatorTypes)===null||o===void 0?void 0:o.has(D0.Bubble))&&m.createElement(Wfe,{typingMembers:Qe,handleScroll:mt}))),(Z==null?void 0:Z.isFrozen)&&I(),(!Ut||O)&&(ce||ge)&&m.createElement($fe,{className:"sendbird-conversation__messages__notification",count:Z==null?void 0:Z.unreadMessageCount,time:ce,lastReadAt:ge,onClick:function(){L!=null&&L.current&&(L.current.scrollTop=L.current.scrollHeight),!te&&Z&&(bt.push(Z),X({type:K.MARK_AS_READ,payload:{channel:Z}})),B(null),F(null),P(null)}}),je>gpe&&m.createElement("div",{className:"sendbird-conversation__scroll-bottom-button",onClick:$t,onKeyDown:$t,tabIndex:0,role:"button"},m.createElement(ke,{width:"24px",height:"24px",type:Ne.CHEVRON_DOWN,fillColor:Oe.PRIMARY}))))},ype=function(e){var n=Xl(),t=n.quoteMessage,r=n.currentGroupChannel,i=n.sendMessage,a=n.sendFileMessage,s=n.sendVoiceMessage,o=n.sendMultipleFilesMessage;return m.createElement(dve,H({},e,n,{currentChannel:r,messages:n.allMessages,sendUserMessage:function(l){return i({message:l.message,mentionTemplate:l.mentionedMessageTemplate,mentionedUsers:l.mentionedUsers,quoteMessage:t??void 0})},sendFileMessage:function(l){return a(l.file,t??void 0)},sendVoiceMessage:function(l,u){var c=l.file;return s(c,u,t??void 0)},sendMultipleFilesMessage:function(l){var u=l.fileInfoList;return o(u.map(function(c){return c.file}),t??void 0)}}))},bpe=function(e){var n=Xl(),t=n.channelUrl,r=n.isInvalid,i=rc(e),a=i.renderChannelHeader,s=a===void 0?function(h){return m.createElement(cpe,H({},h))}:a,o=i.renderMessageList,l=o===void 0?function(h){return m.createElement(Epe,H({},h,{className:"sendbird-conversation__message-list"}))}:o,u=i.renderMessageInput,c=u===void 0?function(){return m.createElement(ype,H({},e))}:u;return m.createElement(_ue,H({},e,n,{isLoading:e==null?void 0:e.isLoading,isInvalid:r,channelUrl:t,renderChannelHeader:s,renderMessageList:l,renderMessageInput:c}))},Cpe=function(e){return m.createElement(Yve,H({},e),m.createElement(bpe,H({},e)))},Spe=m.createContext(null),jI=function(){var e=m.useContext(Spe);if(!e)throw new Error("OpenChannelContext not found. Use within the OpenChannel module");return e};m.forwardRef(function(e,n){var t=jI(),r=t.currentOpenChannel,i=t.disabled,a=t.handleSendMessage,s=t.handleFileUpload,o=t.amIMuted,l=r,u=M.useContext(lr).stringSet,c=e.value;function h(){return o?u.MESSAGE_INPUT__PLACE_HOLDER__MUTED:i?u.MESSAGE_INPUT__PLACE_HOLDER__DISABLED:""}return l?m.createElement("div",{className:"sendbird-openchannel-footer"},m.createElement(um,{channel:r,ref:n,value:c,disabled:i,isVoiceMessageEnabled:!1,onSendMessage:a,onFileUpload:s,placeholder:h()})):null});var $0=function(e){if(window.clipboardData&&window.clipboardData.setData)return window.clipboardData.setData("Text",e);if(document.queryCommandSupported&&document.queryCommandSupported("copy")){var n=document.createElement("textarea");n.textContent=e,n.style.position="fixed",document.body.appendChild(n),n.select();try{return document.execCommand("copy")}catch{return!1}finally{document.body.removeChild(n)}}return!1},qI={PENDING:"pending",FAILED:"failed",SUCCEEDED:"succeeded"},vm=function(e){return e.sender||e._sender},KI=function(e){return e===qI.SUCCEEDED},FE=function(e){return e===qI.PENDING},pm=function(e){return e===qI.FAILED},WI=function(e,n){return vm(e).userId===n},BE=function(e){var n,t=e.message;return(t==null?void 0:t.messageType)==="user"&&((n=t==null?void 0:t.message)===null||n===void 0?void 0:n.length)>0},jl=function(e){var n=e.message,t=e.status,r=e.userId;return WI(n,r)&&pm(t)&&(n==null?void 0:n.isResendable)},HE=function(e){var n,t=e.message,r=e.status,i=e.userId;return WI(t,i)&&KI(r)&&((n=t==null?void 0:t.isUserMessage)===null||n===void 0?void 0:n.call(t))},Ad=function(e){var n=e.message,t=e.userId;return WI(n,t)},Tpe=function(e){var n,t=e.message,r=e.status;return!!(!((n=t==null?void 0:t.isFileMessage)===null||n===void 0)&&n.call(t)&&KI(r))},GE=function(e){var n=e.message,t=e.status,r=e.userId;return n.messageType==="user"?Ad({message:n,userId:r})||HE({message:n,status:t,userId:r})||BE({message:n})||jl({message:n,status:t,userId:r}):Ad({message:n,userId:r})||jl({message:n,status:t,userId:r})},$E=function(e){var n=e.message,t=e.parentRef,r=e.resendMessage,i=e.showEdit,a=e.showRemove,s=e.copyToClipboard,o=e.hideMenu,l=e.isEphemeral,u=l===void 0?!1:l,c=n,h=n==null?void 0:n.sendingStatus,f=tn().stringSet,p=en().state.config.userId,_=n;return m.createElement(ba,{isOpen:!0,menuItems:function(){return m.createElement(ya,{className:"sendbird-openchannel__mobile-menu",parentRef:t,parentContainRef:t,closeDropdown:o},BE({message:c})&&m.createElement(Ii,{className:"sendbird-openchannel-og-message__top__context-menu__copy",onClick:function(){s==null||s()},testID:"open_channel_mobile_context_menu_copy"},m.createElement(m.Fragment,null,f.CONTEXT_MENU_DROPDOWN__COPY)),!u&&HE({message:n,userId:p,status:h})&&m.createElement(Ii,{className:"sendbird-openchannel-og-message__top__context-menu__edit",onClick:function(){i==null||i()},testID:"open_channel_mobile_context_menu_edit"},m.createElement(m.Fragment,null,f.CONTEXT_MENU_DROPDOWN__EDIT)),jl({message:n,userId:p,status:h})&&m.createElement(Ii,{onClick:function(){r==null||r()},testID:"open_channel_mobile_context_menu_resend"},m.createElement(m.Fragment,null,f.CONTEXT_MENU_DROPDOWN__RESEND)),!u&&Ad({message:n,userId:p})&&m.createElement(Ii,{onClick:function(){a==null||a()},testID:"open_channel_mobile_context_menu_delete"},m.createElement(m.Fragment,null,f.CONTEXT_MENU_DROPDOWN__DELETE)),Tpe({message:n,status:h})&&m.createElement(Ii,{onClick:function(){o()},testID:"open_channel_mobile_context_menu_download_file"},m.createElement("a",{className:"sendbird-openchannel__mobile-menu-hyperlink",rel:"noopener noreferrer",href:_==null?void 0:_.url,target:"_blank"},f.CONTEXT_MENU_DROPDOWN__SAVE)))}})};function Npe(e){var n=e.className,t=e.message,r=e.isOperator,i=e.isEphemeral,a=i===void 0?!1:i,s=e.userId,o=e.resendMessage,l=e.disabled,u=e.showEdit,c=e.showRemove,h=e.chainTop,f=tn(),p=f.stringSet,_=f.dateLocale,g=Fd(),C=g.disableUserProfile,E=g.renderUserProfile,y=M.useRef(),S=M.useRef(),I=M.useRef(),w=M.useRef(),R=M.useState({}),A=R[0],U=R[1],O=M.useState(!1),B=O[0],F=O[1],P=t==null?void 0:t.sendingStatus,G=FE(P),L=pm(P),$=vm(t);M.useEffect(function(){var K;!((K=y==null?void 0:y.current)===null||K===void 0)&&K.clientHeight&&y.current.clientHeight>36?U({top:"8px "}):U({top:"2px"})},[window.innerWidth]);var j=tl({onLongPress:function(){F(!0)}}),X=si().isMobile;return!t||t.messageType!=="user"?m.createElement(m.Fragment,null):m.createElement(m.Fragment,null,m.createElement("div",{className:we(we([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-user-message"],!1).join(" "),ref:y},m.createElement("div",{className:"sendbird-openchannel-user-message__left"},!h&&m.createElement(ba,{menuTrigger:function(K){return m.createElement(Ui,{className:"sendbird-openchannel-user-message__left__avatar",src:$.profileUrl||"",ref:S,width:"28px",height:"28px",onClick:function(){C||K()}})},menuItems:function(K){return E?E({user:$,close:K,currentUserId:s,avatarRef:S}):m.createElement(ya,{parentRef:S,parentContainRef:S,closeDropdown:K,style:{paddingTop:"0px",paddingBottom:"0px"}},m.createElement(Bd,{user:$,onSuccess:K,disableMessaging:!0}))}})),m.createElement("div",{className:"sendbird-openchannel-user-message__right"},!h&&m.createElement("div",{className:"sendbird-openchannel-user-message__right__top"},m.createElement(Ce,{className:"sendbird-openchannel-user-message__right__top__sender-name",type:be.CAPTION_2,color:r?ue.SECONDARY_3:ue.ONBACKGROUND_2},$&&($.friendName||$.nickname||$.userId)),m.createElement(Ce,{className:"sendbird-openchannel-user-message__right__top__sent-at",type:be.CAPTION_3,color:ue.ONBACKGROUND_3},(t==null?void 0:t.createdAt)&&_a(t==null?void 0:t.createdAt,p.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:_}))),m.createElement("div",H({},X?H({},j):{},{className:"sendbird-openchannel-user-message__right__bottom",ref:w}),m.createElement(Ce,{className:"sendbird-openchannel-user-message__right__bottom__message",type:be.BODY_1,color:ue.ONBACKGROUND_1},t==null?void 0:t.message,hI(t)&&m.createElement(Ce,{key:qs(),type:be.BODY_1,color:ue.ONBACKGROUND_2,className:"sendbird-openchannel-user-message-word"}," ".concat(p.MESSAGE_EDITED," ")))),(G||L)&&m.createElement("div",{className:"sendbird-openchannel-user-message__right__tail"},G&&m.createElement(sc,{width:"16px",height:"16px"},m.createElement(ke,{className:"sendbird-openchannel-user-message__right__tail__pending",type:Ne.SPINNER,fillColor:Oe.PRIMARY,width:"16px",height:"16px"})),L&&m.createElement(ke,{className:"sendbird-openchannel-user-message__right__tail__failed",type:Ne.ERROR,fillColor:Oe.ERROR,width:"16px",height:"16px"}))),!X&&m.createElement("div",{className:"sendbird-openchannel-user-message__context-menu",ref:I,style:A},m.createElement(ba,{menuTrigger:function(K){return GE({message:t,userId:s,status:P})&&m.createElement(ps,{className:"sendbird-openchannel-user-message__context-menu--icon",width:"32px",height:"32px",onClick:function(){K()}},m.createElement(ke,{type:Ne.MORE,fillColor:Oe.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(K){return m.createElement(ya,{parentRef:I,parentContainRef:I,closeDropdown:K,openLeft:!0},BE({message:t})&&m.createElement(Ii,{className:"sendbird-openchannel-user-message__context-menu__copy",onClick:function(){$0(t.message),K()},testID:"open_channel_user_message_menu_copy"},p.CONTEXT_MENU_DROPDOWN__COPY),!a&&HE({message:t,userId:s,status:P})&&m.createElement(Ii,{className:"sendbird-openchannel-user-message__context-menu__edit",onClick:function(){l||(u(!0),K())},testID:"open_channel_user_message_menu_edit"},p.CONTEXT_MENU_DROPDOWN__EDIT),jl({message:t,userId:s,status:P})&&m.createElement(Ii,{className:"sendbird-openchannel-user-message__context-menu__resend",onClick:function(){o(t),K()},testID:"open_channel_user_message_menu_resend"},p.CONTEXT_MENU_DROPDOWN__RESEND),!a&&Ad({message:t,userId:s})&&m.createElement(Ii,{className:"sendbird-openchannel-user-message__context-menu__delete",onClick:function(){l||(c(!0),K())},testID:"open_channel_user_message_menu_delete"},p.CONTEXT_MENU_DROPDOWN__DELETE))}}))),B&&m.createElement($E,{message:t,parentRef:w,hideMenu:function(){F(!1)},showRemove:function(){F(!1),c(!0)},showEdit:function(){F(!1),u(!0)},copyToClipboard:function(){F(!1),$0(t==null?void 0:t.message)},resendMessage:function(){F(!1),o(t)}}))}function Ipe(e){var n=e.className,t=e.message;return m.createElement("div",{className:we(we([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-admin-message"],!1).join(" ")},m.createElement(Ce,{className:"sendbird-openchannel-admin-message__text",type:be.CAPTION_2,color:ue.ONBACKGROUND_2},t.message||""))}function Mpe(e){var n,t,r,i=e.message,a=e.isOperator,s=e.isEphemeral,o=s===void 0?!1:s,l=e.className,u=e.disabled,c=e.showEdit,h=e.showRemove,f=e.resendMessage,p=e.chainTop,_=e.userId,g=i==null?void 0:i.sendingStatus,C=(n=i.ogMetaData)!==null&&n!==void 0?n:null,E=C==null?void 0:C.defaultImage,y=tn(),S=y.stringSet,I=y.dateLocale,w=si().isMobile,R=Fd(),A=R.disableUserProfile,U=R.renderUserProfile,O=M.useState({}),B=O[0],F=O[1],P=M.useState(!1),G=P[0],L=P[1],$=function(){return sm(C==null?void 0:C.url)},j=tl({onLongPress:function(){return L(!0)},onClick:$},{delay:300}),X=M.useRef(),K=M.useRef(),Z=M.useRef(),te=M.useRef(),ne=FE(g),le=pm(g),Te=vm(i),Ze=M.useMemo(function(){return of({messageText:i.message})},[i==null?void 0:i.updatedAt,i==null?void 0:i.message]);return M.useEffect(function(){var ce,ge;!((ce=X==null?void 0:X.current)===null||ce===void 0)&&ce.clientHeight&&((ge=X==null?void 0:X.current)===null||ge===void 0?void 0:ge.clientHeight)>36?F({top:"8px "}):F({top:"2px"})},[window.innerWidth]),!i||i.messageType!=="user"?m.createElement(m.Fragment,null):m.createElement(m.Fragment,null,m.createElement("div",H({className:we(we([],Array.isArray(l)?l:[l],!0),["sendbird-openchannel-og-message"],!1).join(" "),ref:X},w?H({},j):{}),m.createElement("div",{className:"sendbird-openchannel-og-message__top"},m.createElement("div",{className:"sendbird-openchannel-og-message__top__left"},!p&&m.createElement(ba,{menuTrigger:function(ce){return m.createElement(Ui,{className:"sendbird-openchannel-og-message__top__left__avatar",src:Te.profileUrl||"",ref:te,width:"28px",height:"28px",onClick:function(){A||ce()}})},menuItems:function(ce){return U?U({user:Te,close:ce,currentUserId:_,avatarRef:te}):m.createElement(ya,{parentRef:te,parentContainRef:te,closeDropdown:ce,style:{paddingTop:"0px",paddingBottom:"0px"}},m.createElement(Bd,{user:Te,onSuccess:ce,disableMessaging:!0}))}})),m.createElement("div",{className:"sendbird-openchannel-og-message__top__right"},!p&&m.createElement("div",{className:"sendbird-openchannel-og-message__top__right__title"},m.createElement(Ce,{className:"sendbird-openchannel-og-message__top__right__title__sender-name",type:be.CAPTION_2,color:a?ue.SECONDARY_3:ue.ONBACKGROUND_2},Te&&(Te.friendName||Te.nickname||Te.userId)),m.createElement(Ce,{className:"sendbird-openchannel-og-message__top__right__title__sent-at",type:be.CAPTION_3,color:ue.ONBACKGROUND_3},(i==null?void 0:i.createdAt)&&_a(i==null?void 0:i.createdAt,S.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:I}))),m.createElement("div",{className:"sendbird-openchannel-og-message__top__right__description"},m.createElement(Ce,{className:"sendbird-openchannel-og-message__top__right__description__message",type:be.BODY_1,color:ue.ONBACKGROUND_1},m.createElement(jp,{tokens:Ze}),((t=i==null?void 0:i.updatedAt)!==null&&t!==void 0?t:0)>0&&m.createElement(Ce,{key:qs(),className:"sendbird-openchannel-og-message--word",type:be.BODY_1,color:ue.ONBACKGROUND_2},S.MESSAGE_EDITED)))),!w&&m.createElement("div",{className:"sendbird-openchannel-og-message__top__context-menu",ref:K,style:B},m.createElement(ba,{menuTrigger:function(ce){return GE({message:i,userId:_,status:g})&&m.createElement(ps,{className:"sendbird-openchannel-og-message__top__context-menu--icon",width:"32px",height:"32px",onClick:function(){ce()}},m.createElement(ke,{type:Ne.MORE,fillColor:Oe.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(ce){return m.createElement(ya,{parentRef:K,parentContainRef:K,closeDropdown:ce,openLeft:!0},BE({message:i})&&m.createElement(Ii,{className:"sendbird-openchannel-og-message__top__context-menu__copy",onClick:function(){$0(i.message),ce()},testID:"open_channel_og_message_menu_copy"},S.CONTEXT_MENU_DROPDOWN__COPY),!o&&HE({message:i,userId:_,status:g})&&m.createElement(Ii,{className:"sendbird-openchannel-og-message__top__context-menu__edit",onClick:function(){u||(c(!0),ce())},testID:"open_channel_og_message_menu_edit"},S.CONTEXT_MENU_DROPDOWN__EDIT),jl({message:i,userId:_,status:g})&&m.createElement(Ii,{className:"sendbird-openchannel-og-message__top__context-menu__resend",onClick:function(){f(i),ce()},testID:"open_channel_og_message_menu_resend"},S.CONTEXT_MENU_DROPDOWN__RESEND),!o&&Ad({message:i,userId:_})&&m.createElement(Ii,{className:"sendbird-openchannel-og-message__top__context-menu__delete",onClick:function(){u||(h(!0),ce())},testID:"open_channel_og_message_menu_delete"},S.CONTEXT_MENU_DROPDOWN__DELETE))}}))),m.createElement("div",{className:"sendbird-openchannel-og-message__bottom"},m.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag",ref:Z},(C==null?void 0:C.url)&&m.createElement(Ce,{className:"sendbird-openchannel-og-message__bottom__og-tag__url",type:be.CAPTION_3,color:ue.ONBACKGROUND_2},C.url),(C==null?void 0:C.title)&&m.createElement(QP,{className:"sendbird-openchannel-og-message__bottom__og-tag__title",src:(r=C.url)!==null&&r!==void 0?r:"",type:be.SUBTITLE_2,color:ue.PRIMARY},C.title),(C==null?void 0:C.description)&&m.createElement(Ce,{className:"sendbird-openchannel-og-message__bottom__og-tag__description",type:be.BODY_2,color:ue.ONBACKGROUND_1},C.description),(C==null?void 0:C.url)&&m.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail",role:"button",onClick:$,onKeyDown:$,tabIndex:0},E&&m.createElement(wr,{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image",url:E.url||"",alt:E.alt||"",width:"334px",height:"189px",defaultComponent:m.createElement("div",{className:"sendbird-openchannel-og-message__bottom__og-tag__thumbnail__image--placeholder"},m.createElement(ke,{type:Ne.THUMBNAIL_NONE,width:"56px",height:"56px"}))}))),(ne||le)&&m.createElement("div",{className:"sendbird-openchannel-og-message__top__right__tail"},ne&&m.createElement(sc,{width:"16px",height:"16px"},m.createElement(ke,{className:"sendbird-openchannel-og-message__top__right__tail__pending",type:Ne.SPINNER,fillColor:Oe.PRIMARY,width:"16px",height:"16px"})),le&&m.createElement(ke,{className:"sendbird-openchannel-og-message__top__right__tail__failed",type:Ne.ERROR,fillColor:Oe.ERROR,width:"16px",height:"16px"})))),G&&m.createElement($E,{message:i,parentRef:Z,hideMenu:function(){L(!1)},showRemove:function(){L(!1),h(!0)},showEdit:function(){L(!1),c(!0)},copyToClipboard:function(){L(!1),$0(i==null?void 0:i.message)},resendMessage:function(){L(!1),f(i)}}))}var $h={IMAGE:"IMAGE",VIDEO:"VIDEO",UNSUPPORTED:"UNSUPPORTED"},EU={IMAGE:["image/jpeg","image/jpg","image/png","image/gif","image/webp"],VIDEO:["video/mpeg","video/ogg","video/webm","video/mp4"]},Ape=function(e){return EU.IMAGE.indexOf(e)>=0?$h.IMAGE:EU.VIDEO.indexOf(e)>=0?$h.VIDEO:$h.UNSUPPORTED};function wpe(e){var n,t=e.className,r=e.message,i=e.isOperator,a=e.isEphemeral,s=a===void 0?!1:a,o=e.disabled,l=e.userId,u=e.chainTop,c=e.onClick,h=e.showRemove,f=e.resendMessage,p=r.type,_=r.url,g=r.thumbnails,C=r.localUrl,E=r==null?void 0:r.sendingStatus,y=g&&g.length>0&&g[0].url||null,S=tn(),I=S.stringSet,w=S.dateLocale,R=Fd(),A=R.disableUserProfile,U=R.renderUserProfile,O=M.useState(360),B=O[0],F=O[1],P=M.useState(!1),G=P[0],L=P[1],$=M.useRef(null),j=M.useRef(null),X=M.useRef(null),K=M.useRef(null),Z=tl({onLongPress:function(){L(!0)},onClick:function(){c(!0)}}),te=si().isMobile,ne=M.useMemo(function(){return function(ge){return function(Qe){var xe=Qe.style;return m.createElement("div",{style:xe},m.createElement(ke,{type:ge,fillColor:Oe.ON_BACKGROUND_2,width:"56px",height:"56px"}))}}},[]),le=KI(E),Te=FE(E),Ze=pm(E),ce=vm(r);return M.useEffect(function(){var ge,Qe,xe=((Qe=(ge=$==null?void 0:$.current)===null||ge===void 0?void 0:ge.clientWidth)!==null&&Qe!==void 0?Qe:0)-80;F(xe>360?360:xe)},[]),m.createElement(m.Fragment,null,m.createElement("div",{className:we(we([],Array.isArray(t)?t:[t],!0),["sendbird-openchannel-thumbnail-message"],!1).join(" "),ref:$},m.createElement("div",{className:"sendbird-openchannel-thumbnail-message__left"},!u&&m.createElement(ba,{menuTrigger:function(ge){return m.createElement(Ui,{className:"sendbird-openchannel-thumbnail-message__left__avatar",src:ce.profileUrl||"",ref:K,width:"28px",height:"28px",onClick:function(){A||ge()}})},menuItems:function(ge){return U?U({user:ce,close:ge,currentUserId:l,avatarRef:K}):m.createElement(ya,{parentRef:K,parentContainRef:K,closeDropdown:ge,style:{paddingTop:"0px",paddingBottom:"0px"}},m.createElement(Bd,{user:ce,onSuccess:ge,disableMessaging:!0}))}})),m.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right"},!u&&m.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__title"},m.createElement(Ce,{className:"sendbird-openchannel-thumbnail-message__right__title__sender-name",type:be.CAPTION_2,color:i?ue.SECONDARY_3:ue.ONBACKGROUND_2},ce&&(ce.friendName||ce.nickname||ce.userId)),m.createElement(Ce,{className:"sendbird-openchannel-thumbnail-message__right__title__sent-at",type:be.CAPTION_3,color:ue.ONBACKGROUND_3},(r==null?void 0:r.createdAt)&&_a(r.createdAt,I.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:w}))),m.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body",ref:j},m.createElement("div",H({className:"sendbird-openchannel-thumbnail-message__right__body__wrap",role:"button",onClick:function(){le&&c(!0)},onKeyDown:function(){le&&c(!0)},tabIndex:0},te?H({},Z):{}),m.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__overlay"}),(n={},n[$h.VIDEO]=_||C?m.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video"},y?m.createElement(wr,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video",url:y,width:B,height:"270px",alt:"image",placeHolder:ne(Ne.PLAY)}):m.createElement("video",{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video__video"},m.createElement("source",{src:_||C,type:p})),m.createElement(ke,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video__icon",type:Ne.PLAY,fillColor:Oe.ON_BACKGROUND_2,width:"56px",height:"56px"})):m.createElement(ke,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__video--icon",type:Ne.PHOTO,fillColor:Oe.ON_BACKGROUND_2,width:"56px",height:"56px"}),n[$h.IMAGE]=_||C?m.createElement(wr,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__image",url:y||_||C||"",alt:"image",width:B,height:"270px",placeHolder:ne(Ne.PHOTO)}):m.createElement(ke,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__image--icon",type:Ne.PHOTO,fillColor:Oe.ON_BACKGROUND_2,width:"56px",height:"56px"}),n[$h.UNSUPPORTED]=m.createElement(ke,{className:"sendbird-openchannel-thumbnail-message__right__body__wrap__unknown",type:Ne.PHOTO,fillColor:Oe.ON_BACKGROUND_2,width:"56px",height:"56px"}),n)[Ape(p)])),(Te||Ze)&&m.createElement("div",{className:"sendbird-openchannel-thumbnail-message__right__tail"},Te&&m.createElement(sc,{width:"16px",height:"16px"},m.createElement(ke,{className:"sendbird-openchannel-thumbnail-message__right__tail__pending",type:Ne.SPINNER,fillColor:Oe.PRIMARY,width:"16px",height:"16px"})),Ze&&m.createElement(ke,{className:"sendbird-openchannel-thumbnail-message__right__tail__failed",type:Ne.ERROR,fillColor:Oe.ERROR,width:"16px",height:"16px"}))),!te&&m.createElement("div",{className:"sendbird-openchannel-thumbnail-message__context-menu",ref:X},(jl({message:r,userId:l,status:E})||!s)&&m.createElement(ba,{menuTrigger:function(ge){return GE({message:r,userId:l,status:E})&&m.createElement(ps,{className:"sendbird-openchannel-thumbnail-message__context-menu--icon",width:"32px",height:"32px",onClick:ge},m.createElement(ke,{type:Ne.MORE,fillColor:Oe.CONTENT_INVERSE,width:"24px",height:"24px"}))},menuItems:function(ge){return m.createElement(ya,{parentRef:X,parentContainRef:X,closeDropdown:ge,openLeft:!0},jl({message:r,userId:l,status:E})&&m.createElement(Ii,{onClick:function(){f(r),ge()},testID:"open_channel_thumbnail_message_menu_resend"},I.CONTEXT_MENU_DROPDOWN__RESEND),!s&&Ad({message:r,userId:l})&&m.createElement(Ii,{onClick:function(){o||(h(!0),ge())},testID:"open_channel_thumbnail_message_menu_delete"},I.CONTEXT_MENU_DROPDOWN__DELETE))}}))),G&&m.createElement($E,{message:r,parentRef:j,hideMenu:function(){L(!1)},showRemove:function(){L(!1),h(!0)},resendMessage:function(){L(!1),f(r)}}))}var yU=function(e){var n=/(\.mp3)$/i,t=/(\.gif)$/i;return n.test(e)?Ne.FILE_AUDIO:t.test(e)?Ne.GIF:Ne.FILE_DOCUMENT},Rpe=function(e,n){if(e==null)return"";if(e.length<=n)return e;var t="...",r=t.length,i=n-r,a=Math.ceil(i/2),s=Math.floor(i/2);return e.substr(0,a)+t+e.substr(e.length-s)};function Ope(e){var n=e.className,t=e.message,r=e.isOperator,i=e.isEphemeral,a=i===void 0?!1:i,s=e.userId,o=e.disabled,l=e.chainTop,u=e.showRemove,c=e.resendMessage,h=t==null?void 0:t.sendingStatus,f=tn(),p=f.dateLocale,_=f.stringSet,g=M.useRef(null),C=M.useRef(null),E=M.useRef(null),y=Fd(),S=y.disableUserProfile,I=y.renderUserProfile,w=si().isMobile,R=function(){return sm(t.url)},A=FE(h),U=pm(h),O=vm(t),B=M.useState(!1),F=B[0],P=B[1],G=tl({onLongPress:function(){w&&P(!0)},onClick:R},{delay:300});return m.createElement(m.Fragment,null,m.createElement("div",{className:we(we([],Array.isArray(n)?n:[n],!0),["sendbird-openchannel-file-message"],!1).join(" "),ref:C},m.createElement("div",{className:"sendbird-openchannel-file-message__left"},!l&&m.createElement(ba,{menuTrigger:function(L){return m.createElement(Ui,{className:"sendbird-openchannel-file-message__left__avatar",src:O.profileUrl||"",ref:E,width:"28px",height:"28px",onClick:function(){S||L()}})},menuItems:function(L){return I?I({user:O,close:L,currentUserId:s,avatarRef:E}):m.createElement(ya,{parentRef:E,parentContainRef:E,closeDropdown:L,style:{paddingTop:"0px",paddingBottom:"0px"}},m.createElement(Bd,{user:O,onSuccess:L,disableMessaging:!0}))}})),m.createElement("div",{className:"sendbird-openchannel-file-message__right"},!l&&m.createElement("div",{className:"sendbird-openchannel-file-message__right__title"},m.createElement(Ce,{className:"sendbird-openchannel-file-message__right__title__sender-name",type:be.CAPTION_2,color:r?ue.SECONDARY_3:ue.ONBACKGROUND_2},O&&(O.friendName||O.nickname||O.userId)),m.createElement(Ce,{className:"sendbird-openchannel-file-message__right__title__sent-at",type:be.CAPTION_3,color:ue.ONBACKGROUND_3},(t==null?void 0:t.createdAt)&&_a(t.createdAt,_.DATE_FORMAT__MESSAGE_CREATED_AT,{locale:p}))),m.createElement("div",H({className:"sendbird-openchannel-file-message__right__body"},w?H({},G):{}),yU(t.url)&&m.createElement(ke,{className:"sendbird-openchannel-file-message__right__body__icon",type:yU(t.url),fillColor:Oe.PRIMARY,width:"48px",height:"48px"}),m.createElement(Ef,{className:"sendbird-openchannel-file-message__right__body__file-name",onClick:R},m.createElement(Ce,{className:"sendbird-openchannel-file-message__right__body__file-name__label",type:be.BODY_1,color:ue.ONBACKGROUND_1},Rpe(t.name||t.url,40)))),(A||U)&&m.createElement("div",{className:"sendbird-openchannel-file-message__right__tail"},A&&m.createElement(sc,{width:"16px",height:"16px"},m.createElement(ke,{className:"sendbird-openchannel-file-message__right__tail__pending",type:Ne.SPINNER,fillColor:Oe.PRIMARY,width:"16px",height:"16px"})),U&&m.createElement(ke,{className:"sendbird-openchannel-file-message__right__tail__failed",type:Ne.ERROR,fillColor:Oe.ERROR,width:"16px",height:"16px"}))),!w&&m.createElement("div",{className:"sendbird-openchannel-file-message__context-menu",ref:g},(jl({message:t,userId:s,status:h})||!a)&&m.createElement(ba,{menuTrigger:function(L){return GE({message:t,userId:s,status:h})&&m.createElement(ps,{className:"sendbird-openchannel-file-message__context-menu__icon",width:"32px",height:"32px",onClick:L},m.createElement(ke,{type:Ne.MORE,width:"24px",height:"24px"}))},menuItems:function(L){return m.createElement(ya,{parentRef:g,parentContainRef:g,closeDropdown:L,openLeft:!0},jl({message:t,userId:s,status:h})&&m.createElement(Ii,{onClick:function(){o||(c(t),L())},testID:"open_channel_file_message_context_menu_resend"},_.CONTEXT_MENU_DROPDOWN__RESEND),!a&&Ad({message:t,userId:s})&&m.createElement(Ii,{onClick:function(){o||(u(!0),L())},testID:"open_channel_file_message_context_menu_delete"},_.CONTEXT_MENU_DROPDOWN__DELETE))}}))),F&&m.createElement($E,{message:t,hideMenu:function(){P(!1)},parentRef:C,showRemove:function(){P(!1),u(!0)}}))}function Dpe(e){var n=e.message,t=e.onCloseModal,r=e.onDeleteMessage,i=M.useContext(lr).stringSet;return m.createElement(qa,{onCancel:t,onSubmit:r,submitText:i.MESSAGE_MENU__DELETE,titleText:g5(i,n)})}var ks={ADMIN:"ADMIN",USER:"USER",FILE:"FILE",THUMBNAIL:"THUMBNAIL",OG:"OG",UNKNOWN:"UNKNOWN"},bU={FAILED:"failed",PENDING:"pending"},Upe=function(e,n){var t,r,i=n==null?void 0:n.isOgMessageEnabledInOpenChannel;return!((t=e==null?void 0:e.isUserMessage)===null||t===void 0)&&t.call(e)||(e==null?void 0:e.messageType)==="user"?e!=null&&e.ogMetaData&&i?ks.OG:ks.USER:!((r=e==null?void 0:e.isAdminMessage)===null||r===void 0)&&r.call(e)?ks.ADMIN:(e==null?void 0:e.messageType)==="file"?So(e.type)||Vl(e.type)?ks.THUMBNAIL:ks.FILE:ks.UNKNOWN};function Lpe(e){var n,t,r=e.message,i=e.chainTop,a=e.chainBottom,s=e.hasSeparator,o=e.renderMessage,l=jI(),u=l.currentOpenChannel,c=l.deleteMessage,h=l.updateMessage,f=l.resendMessage,p=tn(),_=p.dateLocale,g=p.stringSet,C=u==null?void 0:u.isFrozen,E=en().state,y=(t=E==null?void 0:E.config)===null||t===void 0?void 0:t.userId,S=E.config.openChannel.enableOgtag,I;(r==null?void 0:r.messageType)!=="admin"&&(I=r==null?void 0:r.sender);var w=M.useState(!1),R=w[0],A=w[1],U=M.useState(!1),O=U[0],B=U[1],F=M.useState(!1),P=F[0],G=F[1],L=M.useRef(null),$=!1;return I&&(r==null?void 0:r.messageType)!=="admin"&&($=y===I.userId||(r==null?void 0:r.sendingStatus)===bU.PENDING||(r==null?void 0:r.sendingStatus)===bU.FAILED),o?m.createElement("div",{className:"sendbird-open-channel-msg-hoc sendbird-msg--scroll-ref","data-testid":"sendbird-message-hoc"},o({message:r,chainTop:i,chainBottom:a})):(r==null?void 0:r.messageType)==="user"&&R?m.createElement(um,{isEdit:!0,channel:u,disabled:C,ref:L,message:r,onUpdateMessage:function(j){var X=j.messageId,K=j.message;h(X,K),A(!1)},onCancelEdit:function(){A(!1)}}):m.createElement("div",{className:"sendbird-open-channel-msg-hoc sendbird-msg--scroll-ref","data-testid":"sendbird-message-hoc"},m.createElement(m.Fragment,null,s&&(r==null?void 0:r.createdAt)&&m.createElement(MP,null,m.createElement(Ce,{type:be.CAPTION_2,color:ue.ONBACKGROUND_2},_a(r==null?void 0:r.createdAt,g.DATE_FORMAT__MESSAGE_LIST__DATE_SEPARATOR,{locale:_}))),(n={},n[ks.ADMIN]=function(){if((r==null?void 0:r.messageType)==="admin")return m.createElement(Ipe,{message:r})}(),n[ks.FILE]=function(){var j;if((r==null?void 0:r.messageType)==="file")return m.createElement(Ope,{message:r,isOperator:u==null?void 0:u.isOperator((j=r==null?void 0:r.sender)===null||j===void 0?void 0:j.userId),isEphemeral:u==null?void 0:u.isEphemeral,disabled:C,userId:y,showRemove:B,resendMessage:f,chainTop:i,chainBottom:a})}(),n[ks.OG]=function(){var j;if((r==null?void 0:r.messageType)==="user"&&S)return m.createElement(Mpe,{message:r,isOperator:u==null?void 0:u.isOperator((j=r==null?void 0:r.sender)===null||j===void 0?void 0:j.userId),isEphemeral:u==null?void 0:u.isEphemeral,userId:y,showEdit:A,disabled:C,showRemove:B,resendMessage:f,chainTop:i,chainBottom:a})}(),n[ks.THUMBNAIL]=function(){var j;if((r==null?void 0:r.messageType)==="file")return m.createElement(wpe,{message:r,isOperator:u==null?void 0:u.isOperator((j=r==null?void 0:r.sender)===null||j===void 0?void 0:j.userId),isEphemeral:u==null?void 0:u.isEphemeral,disabled:C,userId:y,showRemove:B,resendMessage:f,onClick:G,chainTop:i,chainBottom:a})}(),n[ks.USER]=function(){var j;if((r==null?void 0:r.messageType)==="user")return m.createElement(Npe,{message:r,isOperator:u==null?void 0:u.isOperator((j=r==null?void 0:r.sender)===null||j===void 0?void 0:j.userId),isEphemeral:u==null?void 0:u.isEphemeral,userId:y,disabled:C,showEdit:A,showRemove:B,resendMessage:f,chainTop:i,chainBottom:a})}(),n[ks.UNKNOWN]=function(){}(),n)[Upe(r,{isOgMessageEnabledInOpenChannel:S})],O&&m.createElement(Dpe,{message:r,onCloseModal:function(){return B(!1)},onDeleteMessage:function(){(r==null?void 0:r.messageType)!=="admin"&&c(r)}}),P&&(r==null?void 0:r.messageType)==="file"&&m.createElement(XP,{onClose:function(){return G(!1)},message:r,onDelete:function(){return c(r)},isByMe:$})))}function kpe(e,n){var t=jI(),r=t.isMessageGroupingEnabled,i=r===void 0?!0:r,a=t.allMessages,s=t.hasMore,o=t.onScroll,l=en().state,u=tn().stringSet,c=l.config.userId,h=M.useRef(null),f=n||h,p=M.useState(!1),_=p[0],g=p[1],C=function(){f&&"current"in f&&f.current&&(f.current.scrollTo(0,f.current.scrollHeight),g(!1))},E=D5({setShowScrollDownButton:g,hasMore:s,onScroll:o,scrollRef:f}),y=M.useMemo(function(){var S;return a.length>0?a.map(function(I,w){var R,A=a[w-1],U=a[w-1],O=A&&A.createdAt,B=I==null?void 0:I.createdAt,F=!(O&&wE(B,O)),P=i?y5(A,I,U,u):[!1,!1],G=P[0],L=P[1],$=((R=I==null?void 0:I.sender)===null||R===void 0?void 0:R.userId)===c,j=(I==null?void 0:I.messageId)||(I==null?void 0:I.reqId);return m.createElement(TT,{message:I,isByMe:$,key:j},m.createElement(Lpe,{message:I,chainTop:G,chainBottom:L,hasSeparator:F,renderMessage:e==null?void 0:e.renderMessage}))}):((S=e==null?void 0:e.renderPlaceHolderEmptyList)===null||S===void 0?void 0:S.call(e))||m.createElement(po,{className:"sendbird-openchannel-conversation-scroll__container__place-holder",type:gr.NO_MESSAGES})},[a]);return m.createElement("div",{className:"sendbird-openchannel-conversation-scroll"},m.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container"},m.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__padding"}),m.createElement("div",{className:["sendbird-openchannel-conversation-scroll__container__item-container",a.length>0?"":"no-messages"].join(" "),onScroll:E,ref:f},y)),_&&m.createElement("div",{className:"sendbird-openchannel-conversation-scroll__container__scroll-bottom-button",onClick:C,onKeyDown:C,tabIndex:0,role:"button"},m.createElement(ke,{width:"24px",height:"24px",type:Ne.CHEVRON_DOWN,fillColor:Oe.CONTENT})))}m.forwardRef(kpe);m.createContext(null);M.createContext({openedListKeys:[],addOpenedListKey:Mn,removeOpenedListKey:Mn,clearOpenedListKeys:Mn,allowMultipleOpen:!1});function xpe(){var e=en(),n=e.state,t=e.actions;return H(H({},n),t)}var Ppe=function(e){var n=e.renderHeader,t=e.renderPlaceHolderError,r=e.renderPlaceHolderLoading,i=e.renderPlaceHolderEmptyList,a=e.onChangeTheme,s=e.onUserProfileUpdated,o=e.allowProfileEdit,l=e.channels,u=e.onLoadMore,c=e.initialized,h=e.renderChannel,f=e.renderAddChannel,p=e.scrollRef,_=M.useState(!1),g=_[0],C=_[1],E=en().state.stores,y={addChannel:f,channel:h,placeholder:{loading:function(){return c?null:r?r():m.createElement(po,{type:gr.LOADING})},empty:function(){return c?i?i():m.createElement(po,{type:gr.NO_CHANNELS}):null},error:function(){return!c||!E.sdkStore.error?null:t?t():m.createElement(po,{type:gr.WRONG})}}};return m.createElement(m.Fragment,null,m.createElement("div",{className:"sendbird-channel-list__header"},(n==null?void 0:n())||m.createElement(hve,{onEdit:function(){return o&&C(!0)},allowProfileEdit:o,renderIconButton:function(){return y.addChannel()}})),g&&m.createElement(Eve,{onThemeChange:a,onCancel:function(){return C(!1)},onEditProfile:function(S){C(!1),s(S)}}),m.createElement(Fpe,{data:l,renderItem:y.channel,onLoadMore:u,placeholderLoading:y.placeholder.loading(),placeholderEmpty:y.placeholder.empty(),placeholderError:y.placeholder.error(),scrollRef:p}))},Fpe=function(e){var n=e.data,t=e.renderItem,r=e.onLoadMore,i=e.placeholderLoading,a=e.placeholderError,s=e.placeholderEmpty,o=e.scrollRef,l=M5({onReachedBottom:function(){return r==null?void 0:r()}});return m.createElement("div",{className:"sendbird-channel-list__body",onScroll:l,ref:o},a,m.createElement("div",null,n.map(function(u,c){return t({item:u,index:c})})),i,n.length===0&&s)},Bpe=function(e){return function(n){return e==null?void 0:e.includes(n)}},CU=function(e,n){return n==="broadcast"&&(e.isBroadcast=!0),n==="supergroup"&&(e.isSuper=!0),e},Hpe=function(e){var n=e.sdk,t=e.userFilledApplicationUserListQuery,r=n.createApplicationUserListQuery();return t&&Object.keys(t).forEach(function(i){r[i]=t[i]}),r},Tl;(function(e){e.GROUP="group",e.SUPERGROUP="supergroup",e.BROADCAST="broadcast"})(Tl||(Tl={}));var YI=m.createContext(null),U5={sdk:void 0,userListQuery:void 0,onCreateChannelClick:void 0,onChannelCreated:void 0,onBeforeCreateChannel:void 0,pageStep:0,type:Tl.GROUP,onCreateChannel:void 0,overrideInviteUser:void 0},Gpe=function(e){var n=e.onCreateChannelClick,t=e.onBeforeCreateChannel,r=e.onChannelCreated,i=e.userListQuery,a=e.onCreateChannel,s=e.overrideInviteUser,o=jpe().updateState,l=en().state.config,u=i??(l==null?void 0:l.userListQuery);return M.useEffect(function(){o({onCreateChannelClick:n,onBeforeCreateChannel:t,onChannelCreated:r,userListQuery:u,onCreateChannel:a,overrideInviteUser:s})},[n,t,r,i,a,s,u]),null},$pe=function(e){var n=e.children;return m.createElement(zpe,H({},e),m.createElement(Gpe,H({},e)),n)},Vpe=function(e){return rI(H(H({},U5),e))},zpe=function(e){var n=e.children,t=rc({userListQuery:e==null?void 0:e.userListQuery,onCreateChannelClick:e==null?void 0:e.onCreateChannelClick,onChannelCreated:e==null?void 0:e.onChannelCreated,onBeforeCreateChannel:e==null?void 0:e.onBeforeCreateChannel,onCreateChannel:e==null?void 0:e.onCreateChannel,overrideInviteUser:e==null?void 0:e.overrideInviteUser}),r=M.useRef(Vpe(t));return m.createElement(YI.Provider,{value:r.current},n)},jpe=function(){return iI(YI,function(e){return e},U5)},QI=function(){var e=M.useContext(YI),n=xpe();if(!e)throw new Error("useCreateChannel must be used within a CreateChannelProvider");var t=M.useCallback(function(o){e.setState(function(l){return H(H({},l),{pageStep:o})})},[e]),r=M.useCallback(function(o){e.setState(function(l){return H(H({},l),{type:o})})},[e]),i=M.useCallback(function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];var u=zP(n);return u.apply(void 0,o)},[n]),a=am.useSyncExternalStore(e.subscribe,e.getState),s=M.useMemo(function(){return{setPageStep:t,setType:r,createChannel:i}},[t,r,i]);return{state:a,actions:s}},qpe=50,Kpe=function(e){var n=e.onCancel,t=e.userListQuery,r=QI(),i=r.state,a=i.onCreateChannelClick,s=i.onBeforeCreateChannel,o=i.onChannelCreated,l=i.onCreateChannel,u=i.overrideInviteUser,c=i.type,h=r.actions.createChannel,f=en().state,p=f.config.userId,_=f.stores.sdkStore.sdk,g=[p],C=M.useState([]),E=C[0],y=C[1],S=M.useState({}),I=S[0],w=S[1],R=M.useContext(lr).stringSet,A=M.useState(null),U=A[0],O=A[1],B=Object.keys(I).length,F=R.MODAL__CREATE_CHANNEL__TITLE,P=R.BUTTON__CREATE,G=si().isMobile,L=M.useState(window.innerHeight),$=L[0],j=L[1];return M.useEffect(function(){var X=t?t():Hpe({sdk:_});O(X),X!=null&&X.isLoading||X.next().then(function(K){y(K)})},[]),M.useEffect(function(){var X=function(){j(window.innerHeight)};return window.addEventListener("resize",X),function(){window.removeEventListener("resize",X)}},[]),m.createElement(qa,{isFullScreenOnMobile:!0,titleText:F,submitText:P,type:br.PRIMARY,disabled:E.length>1&&Object.keys(I).length===0,onCancel:n,onSubmit:function(){var X=Object.keys(I).length>0?Object.keys(I):[p],K=o??l,Z=a??u;if(typeof Z=="function"){Z({users:X,onClose:n??Mn,channelType:c});return}if(s){var te=s(X);CU(te,c),h(te).then(function(ne){return K==null?void 0:K(ne)})}else{var te={};te.invitedUserIds=X,te.isDistinct=!1,p&&(te.operatorUserIds=[p]),CU(te,c),h(te).then(function(le){return K==null?void 0:K(le)})}n==null||n()}},m.createElement("div",null,m.createElement(Ce,{color:B>0?ue.PRIMARY:ue.ONBACKGROUND_3,type:be.CAPTION_1},"".concat(B," ").concat(R.MODAL__INVITE_MEMBER__SELECTED)),m.createElement("div",{className:"sendbird-create-channel--scroll",style:G?{height:"calc(".concat($,"px - 200px)")}:{},onScroll:function(X){if(U){var K=X.target,Z=U.hasNext,te=U.isLoading,ne=K.clientHeight+K.scrollTop+qpe>K.scrollHeight;Z&&ne&&!te&&U.next().then(function(le){y(we(we([],E,!0),le,!0))})}}},E.map(function(X){return!Bpe(g)(X.userId)&&m.createElement(jP,{key:X.userId,user:X,checkBox:!0,checked:I[X.userId],onChange:function(K){var Z,te=H(H({},I),(Z={},Z[K.target.id]=K.target.checked,Z));K.target.checked||delete te[K.target.id],w(te)}})}))))},Wpe=function(e){var n,t="allow_broadcast_channel",r=(n=e==null?void 0:e.appInfo)===null||n===void 0?void 0:n.applicationAttributes;return Array.isArray(r)?r.includes(t):!1},Ype=function(e){var n,t="allow_super_group_channel",r=(n=e==null?void 0:e.appInfo)===null||n===void 0?void 0:n.applicationAttributes;return Array.isArray(r)?r.includes(t):!1},Qpe=function(e){var n=e.onCancel,t=en().state,r=VP(t),i=QI().actions,a=i.setPageStep,s=i.setType,o=M.useContext(lr).stringSet,l=Wpe(r),u=Ype(r);return m.createElement(qa,{titleText:o==null?void 0:o.MODAL__CREATE_CHANNEL__TITLE,hideFooter:!0,onCancel:function(){n==null||n()},className:"sendbird-add-channel__modal"},m.createElement("div",{className:"sendbird-add-channel__rectangle-wrap"},m.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){s(Tl.GROUP),a(1)},role:"button",tabIndex:0,onKeyDown:function(){s(Tl.GROUP),a(1)}},m.createElement(ke,{className:"sendbird-add-channel__rectangle__chat-icon",type:Ne.CHAT,fillColor:Oe.PRIMARY,width:"28px",height:"28px"}),m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},o.MODAL__CREATE_CHANNEL__GROUP)),u&&m.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){s(Tl.SUPERGROUP),a(1)},role:"button",tabIndex:0,onKeyDown:function(){s(Tl.SUPERGROUP),a(1)}},m.createElement(ke,{className:"sendbird-add-channel__rectangle__supergroup-icon",type:Ne.SUPERGROUP,fillColor:Oe.PRIMARY,width:"28px",height:"28px"}),m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},o.MODAL__CREATE_CHANNEL__SUPER)),l&&m.createElement("div",{className:"sendbird-add-channel__rectangle",onClick:function(){s(Tl.BROADCAST),a(1)},role:"button",tabIndex:0,onKeyDown:function(){s(Tl.BROADCAST),a(1)}},m.createElement(ke,{className:"sendbird-add-channel__rectangle__broadcast-icon",type:Ne.BROADCAST,fillColor:Oe.PRIMARY,width:"28px",height:"28px"}),m.createElement(Ce,{type:be.SUBTITLE_1,color:ue.ONBACKGROUND_1},o.MODAL__CREATE_CHANNEL__BROADCAST))))},Xpe=function(e){var n=e.onCancel,t=e.renderStepOne,r=QI(),i=r.state,a=i.pageStep,s=i.userListQuery,o=r.actions.setPageStep;return m.createElement(m.Fragment,null,a===0&&((t==null?void 0:t())||m.createElement(Qpe,{onCancel:n})),a===1&&m.createElement(Kpe,{userListQuery:s,onCancel:function(){o(0),n==null||n()}}))},Zpe=function(e){return m.createElement($pe,H({},e),m.createElement(Xpe,H({},e)))},Jpe=function(e){var n=e.createChannelVisible,t=e.onChangeCreateChannelVisible,r=e.onBeforeCreateChannel,i=e.onCreateChannelClick,a=e.onChannelCreated,s=en().state.config;return m.createElement(m.Fragment,null,m.createElement(ps,{height:"32px",width:"32px",disabled:!s.isOnline,onClick:function(){return t(!0)}},m.createElement(ke,{type:Ne.CREATE,fillColor:Oe.PRIMARY,width:"24px",height:"24px"})),n&&m.createElement(Zpe,{onCancel:function(){return t(!1)},onChannelCreated:function(o){a==null||a(o),t(!1)},onBeforeCreateChannel:r,onCreateChannelClick:i}))},eme=function(){var e=M.useState(!1),n=e[0],t=e[1],r=ME().state,i=r.onChannelCreated,a=r.onBeforeCreateChannel,s=r.onCreateChannelClick;return m.createElement(Jpe,{createChannelVisible:n,onChangeCreateChannelVisible:t,onCreateChannelClick:s,onBeforeCreateChannel:a,onChannelCreated:i})},tme=function(e){var n=e.renderHeader,t=e.renderChannelPreview,r=e.renderPlaceHolderError,i=e.renderPlaceHolderLoading,a=e.renderPlaceHolderEmptyList,s=ME().state,o=s.onChannelSelect,l=s.onThemeChange,u=s.allowProfileEdit,c=s.typingChannelUrls,h=s.groupChannels,f=s.initialized,p=s.selectedChannelUrl,_=s.loadMore,g=s.onUserProfileUpdated,C=s.scrollRef,E=en().state,y=E.stores,S=E.config,I=S.logger,w=S.isOnline,R=y.sdkStore.sdk,A=function(U){var O=U.item,B=U.index,F={channel:O,tabIndex:B,isSelected:O.url===p,isTyping:c.includes(O.url),renderChannelAction:function(P){return m.createElement(Cve,H({},P))},onClick:function(){w||R!=null&&R.isCacheEnabled?(I.info("ChannelList: Clicked on channel:",O),o(O)):I.warning("ChannelList: Inactivated clicking channel item during offline.")},onLeaveChannel:function(){return vr(this,void 0,void 0,function(){return pr(this,function(P){switch(P.label){case 0:return I.info("ChannelList: Leaving channel",O),[4,O.leave()];case 1:return P.sent(),I.info("ChannelList: Leaving channel success"),[2]}})})}};return t?m.createElement("div",{key:O.url,onClick:F.onClick},t(F)):m.createElement(Ive,H({key:O.url},F))};return m.createElement(Ppe,{renderHeader:n,renderChannel:A,renderPlaceHolderError:r,renderPlaceHolderLoading:i,renderPlaceHolderEmptyList:a,onChangeTheme:l??Mn,allowProfileEdit:u,onUserProfileUpdated:g??Mn,channels:h,onLoadMore:_,initialized:f,renderAddChannel:function(){return m.createElement(eme,null)},scrollRef:C})},nme=function(e){return m.createElement(due,H({},e),m.createElement(tme,H({},e)))},SU;(function(e){e.CHANNEL_LIST="CHANNEL_LIST",e.CHANNEL="CHANNEL",e.CHANNEL_SETTINGS="CHANNEL_SETTINGS",e.MESSAGE_SEARCH="MESSAGE_SEARCH",e.THREAD="THREAD"})(SU||(SU={}));const rme="_container_11ok0_1",ime="_header_11ok0_9",ame="_title_11ok0_15",sme="_subtitle_11ok0_22",ome="_listWrapper_11ok0_29",Ev={container:rme,header:ime,title:ame,subtitle:sme,listWrapper:ome};function TU({onChannelSelect:e,selectedChannelUrl:n}){return de.jsxs("div",{className:Ev.container,children:[de.jsxs("div",{className:Ev.header,children:[de.jsx("h2",{className:Ev.title,children:"  "}),de.jsx("p",{className:Ev.subtitle,children:"GroupChannelListScreen"})]}),de.jsx("div",{className:Ev.listWrapper,children:de.jsx(nme,{onChannelSelect:t=>{t&&e(t)},onChannelCreated:t=>{t&&e(t)},selectedChannelUrl:n??void 0,channelListQueryParams:{includeEmpty:!0,limit:20}})})]})}const lme="_container_7b75k_3",ume="_dragging_7b75k_11",cme="_previewContainer_7b75k_17",dme="_previewItem_7b75k_28",hme="_previewImage_7b75k_36",fme="_fileIcon_7b75k_44",vme="_fileExtension_7b75k_54",pme="_removeButton_7b75k_62",mme="_fileName_7b75k_87",_me="_inputWrapper_7b75k_99",gme="_attachButton_7b75k_117",Eme="_imageButton_7b75k_118",yme="_textarea_7b75k_146",bme="_sendButton_7b75k_174",Cme="_active_7b75k_189",Sme="_spinner_7b75k_206",Tme="_hiddenInput_7b75k_222",Nme="_dragOverlay_7b75k_232",Ime="_dragContent_7b75k_243",Jr={container:lme,dragging:ume,previewContainer:cme,previewItem:dme,previewImage:hme,fileIcon:fme,fileExtension:vme,removeButton:pme,fileName:mme,inputWrapper:_me,attachButton:gme,imageButton:Eme,textarea:yme,sendButton:bme,active:Cme,spinner:Sme,hiddenInput:Tme,dragOverlay:Nme,dragContent:Ime};function Mme({initialText:e="",placeholder:n=" ...",onMessageSent:t,onFileSent:r}){const[i,a]=M.useState(e),[s,o]=M.useState(!1),[l,u]=M.useState([]),[c,h]=M.useState(!1),f=M.useRef(null),p=M.useRef(null),_=M.useRef(null),{currentGroupChannel:g,sendMessage:C,sendFileMessage:E}=Xl(),y=M.useCallback(async()=>{if(!(!i.trim()&&l.length===0)&&g&&!c){h(!0);try{for(const{file:L}of l){console.log("[CustomMessageInput] Sending file:",L.name,L.type,L.size);try{await E(L),console.log("[CustomMessageInput] File sent successfully:",L.name),r==null||r(L)}catch($){throw console.error("[CustomMessageInput] File send error:",$),$}}i.trim()&&(C({message:i.trim()}),t==null||t(i.trim())),a(""),u([]),_.current&&(_.current.style.height="auto")}catch(L){console.error("  :",L)}finally{h(!1)}}},[i,l,g,C,E,t,r,c]),S=L=>{L.key==="Enter"&&!L.shiftKey&&(L.preventDefault(),y())},I=5*1024*1024,w=5,R=L=>{const $=L.target.files;if(console.log("[CustomMessageInput] handleFileSelect called, files:",$),!$||$.length===0){console.log("[CustomMessageInput] No files selected");return}const j=[],X=[];Array.from($).forEach(K=>{if(console.log("[CustomMessageInput] Processing file:",K.name,K.type,K.size),K.size>I){X.push(`${K.name} (${(K.size/1024/1024).toFixed(1)}MB)`);return}const Z=K.type.startsWith("image/"),te=K.type.startsWith("video/");j.push({file:K,preview:Z||te?URL.createObjectURL(K):"",isVideo:te})}),X.length>0&&alert(`    ( ${w}MB):
${X.join(`
`)}`),j.length>0&&(console.log("[CustomMessageInput] Adding files to preview:",j.length),u(K=>[...K,...j])),f.current&&(f.current.value=""),p.current&&(p.current.value="")},A=L=>{u($=>{const j=$[L];return j.preview&&URL.revokeObjectURL(j.preview),$.filter((X,K)=>K!==L)})},U=L=>{L.preventDefault(),o(!0)},O=L=>{L.preventDefault(),o(!1)},B=L=>{L.preventDefault(),o(!1);const $=L.dataTransfer.files;if(!$)return;const j=[],X=[];Array.from($).forEach(K=>{if(K.size>I){X.push(`${K.name} (${(K.size/1024/1024).toFixed(1)}MB)`);return}const Z=K.type.startsWith("image/"),te=K.type.startsWith("video/");j.push({file:K,preview:Z||te?URL.createObjectURL(K):"",isVideo:te})}),X.length>0&&alert(`    ( ${w}MB):
${X.join(`
`)}`),j.length>0&&u(K=>[...K,...j])},F=L=>{a(L.target.value);const $=L.target;$.style.height="auto",$.style.height=`${Math.min($.scrollHeight,120)}px`},P=!g,G=(i.trim()||l.length>0)&&!c;return de.jsxs("div",{className:`${Jr.container} ${s?Jr.dragging:""}`,onDragOver:U,onDragLeave:O,onDrop:B,children:[l.length>0&&de.jsx("div",{className:Jr.previewContainer,children:l.map((L,$)=>{var j;return de.jsxs("div",{className:Jr.previewItem,children:[L.preview?L.isVideo?de.jsx("video",{src:L.preview,className:Jr.previewImage,muted:!0}):de.jsx("img",{src:L.preview,alt:L.file.name,className:Jr.previewImage}):de.jsx("div",{className:Jr.fileIcon,children:de.jsx("span",{className:Jr.fileExtension,children:(j=L.file.name.split(".").pop())==null?void 0:j.toUpperCase()})}),de.jsx("button",{onClick:()=>A($),className:Jr.removeButton,type:"button",children:""}),de.jsx("span",{className:Jr.fileName,children:L.file.name})]},$)})}),de.jsxs("div",{className:Jr.inputWrapper,children:[de.jsx("button",{type:"button",onClick:()=>{var L;return(L=f.current)==null?void 0:L.click()},className:Jr.attachButton,disabled:P,title:" ",children:de.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:de.jsx("path",{d:"M21.44 11.05l-9.19 9.19a6 6 0 0 1-8.49-8.49l9.19-9.19a4 4 0 0 1 5.66 5.66l-9.2 9.19a2 2 0 0 1-2.83-2.83l8.49-8.48"})})}),de.jsx("button",{type:"button",onClick:()=>{var L;return(L=p.current)==null?void 0:L.click()},className:Jr.imageButton,disabled:P,title:" ",children:de.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[de.jsx("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),de.jsx("circle",{cx:"8.5",cy:"8.5",r:"1.5"}),de.jsx("polyline",{points:"21 15 16 10 5 21"})]})}),de.jsx("textarea",{ref:_,value:i,onChange:F,onKeyDown:S,placeholder:n,className:Jr.textarea,disabled:P,rows:1}),de.jsx("button",{type:"button",onClick:y,className:`${Jr.sendButton} ${G?Jr.active:""}`,disabled:!G,title:"",children:c?de.jsx("div",{className:Jr.spinner}):de.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor",children:de.jsx("path",{d:"M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"})})})]}),de.jsx("input",{ref:f,type:"file",onChange:R,className:Jr.hiddenInput,multiple:!0,accept:"*/*"}),de.jsx("input",{ref:p,type:"file",onChange:R,className:Jr.hiddenInput,multiple:!0,accept:"image/*"}),s&&de.jsx("div",{className:Jr.dragOverlay,children:de.jsxs("div",{className:Jr.dragContent,children:[de.jsxs("svg",{width:"48",height:"48",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",children:[de.jsx("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),de.jsx("polyline",{points:"17 8 12 3 7 8"}),de.jsx("line",{x1:"12",y1:"3",x2:"12",y2:"15"})]}),de.jsx("span",{children:"  "})]})})]})}const Ame="_container_1rje5_1",wme="_header_1rje5_8",Rme="_backButton_1rje5_17",Ome="_headerInfo_1rje5_34",Dme="_channelName_1rje5_38",Ume="_memberCount_1rje5_45",Lme="_chatWrapper_1rje5_51",Uc={container:Ame,header:wme,backButton:Rme,headerInfo:Ome,channelName:Dme,memberCount:Ume,chatWrapper:Lme};function NU({channel:e,onBack:n}){const t=M.useCallback((r,i)=>{const s=`[${new Date().toLocaleTimeString()}] ${r}: ${JSON.stringify(i,null,2)}`;console.log(s)},[]);return de.jsxs("div",{className:Uc.container,children:[de.jsxs("div",{className:Uc.header,children:[de.jsx("button",{onClick:n,className:Uc.backButton,children:" "}),de.jsxs("div",{className:Uc.headerInfo,children:[de.jsx("h2",{className:Uc.channelName,children:e.name||""}),de.jsxs("span",{className:Uc.memberCount,children:[" ",e.memberCount," | GroupChannelScreen"]})]})]}),de.jsx("div",{className:Uc.chatWrapper,children:de.jsx(Cpe,{channelUrl:e.url,renderMessageInput:()=>de.jsx(Mme,{placeholder:" ...",onMessageSent:r=>{t("Custom Input - Message Sent",{message:r})},onFileSent:r=>{t("Custom Input - File Sent",{name:r.name,size:r.size,type:r.type})}})})})]})}function L5(e,n="test_user"){return Array.from({length:e},(t,r)=>`${n}_${r+1}`)}async function kme(e,n,t){try{const r=gE.init({appId:Gh.APP_ID,modules:[new _E]});await r.connect(e);const i=L5(n-1,"member"),a=[e,...i],s={name:t||`${n}  `,invitedUserIds:a,isDistinct:!1,operatorUserIds:[e],customType:`TEST_GROUP_${n}`},o=await r.groupChannel.createChannel(s);return console.log(` ${n}   :`,{channelUrl:o.url,memberCount:o.memberCount,name:o.name}),{success:!0,channelUrl:o.url,memberCount:o.memberCount}}catch(r){return console.error("   :",r),{success:!1,error:r instanceof Error?r.message:"   "}}}async function xme(e,n){const t=gE.init({appId:Gh.APP_ID,modules:[new _E]});for(let r=0;r<e.length;r++){const i=e[r];try{await t.connect(i),await t.updateCurrentUserInfo({nickname:`Member ${r+1}`}),await t.disconnect(),n==null||n(r+1,e.length)}catch(a){console.warn(` ${i}  :`,a)}}}async function Pme(e=50,n,t){try{const r=["user_a","user_b","user_c"],i=L5(e-r.length,"member"),a=[...r,...i];t==null||t(` ${i.length}    ...`),await xme(a,(u,c)=>{t==null||t(`   : ${u}/${c}`)}),t==null||t("   !   ...");const s=gE.init({appId:Gh.APP_ID,modules:[new _E]});await s.connect("user_a"),await s.updateCurrentUserInfo({nickname:"User A"});const o={name:n||`${e}   (ABC)`,invitedUserIds:a,isDistinct:!1,operatorUserIds:r,customType:`MULTI_TEST_GROUP_${e}`},l=await s.groupChannel.createChannel(o);return console.log("     :",{channelUrl:l.url,memberCount:l.memberCount,name:l.name}),{success:!0,channelUrl:l.url,memberCount:l.memberCount}}catch(r){return console.error("    :",r),{success:!1,error:r instanceof Error?r.message:"   "}}}const Fme="_container_1uj1p_1",Bme="_title_1uj1p_9",Hme="_form_1uj1p_16",Gme="_field_1uj1p_22",$me="_label_1uj1p_28",Vme="_input_1uj1p_34",zme="_hint_1uj1p_54",jme="_presets_1uj1p_59",qme="_presetLabel_1uj1p_66",Kme="_presetButton_1uj1p_71",Wme="_createButton_1uj1p_92",Yme="_result_1uj1p_115",Qme="_success_1uj1p_122",Xme="_error_1uj1p_128",Zme="_channelUrl_1uj1p_134",Jme="_info_1uj1p_145",ei={container:Fme,title:Bme,form:Hme,field:Gme,label:$me,input:Vme,hint:zme,presets:jme,presetLabel:qme,presetButton:Kme,createButton:Wme,result:Yme,success:Qme,error:Xme,channelUrl:Zme,info:Jme};function e_e({userId:e,onGroupCreated:n}){const[t,r]=M.useState(50),[i,a]=M.useState(""),[s,o]=M.useState(!1),[l,u]=M.useState(null),c=async()=>{o(!0),u(null);try{const h=await kme(e,t,i||void 0);h.success?(u({success:!0,message:` ${h.memberCount}   !`,channelUrl:h.channelUrl}),n==null||n(h.channelUrl)):u({success:!1,message:`  : ${h.error}`})}catch(h){u({success:!1,message:` : ${h instanceof Error?h.message:"   "}`})}finally{o(!1)}};return de.jsxs("div",{className:ei.container,children:[de.jsx("h3",{className:ei.title,children:"   "}),de.jsxs("div",{className:ei.form,children:[de.jsxs("div",{className:ei.field,children:[de.jsx("label",{className:ei.label,children:" "}),de.jsx("input",{type:"number",className:ei.input,value:t,onChange:h=>r(Number(h.target.value)),min:2,max:100,disabled:s}),de.jsxs("span",{className:ei.hint,children:["   ",t,""]})]}),de.jsxs("div",{className:ei.field,children:[de.jsx("label",{className:ei.label,children:"  ()"}),de.jsx("input",{type:"text",className:ei.input,value:i,onChange:h=>a(h.target.value),placeholder:`${t}  `,disabled:s})]}),de.jsxs("div",{className:ei.presets,children:[de.jsx("span",{className:ei.presetLabel,children:":"}),de.jsx("button",{className:ei.presetButton,onClick:()=>r(10),disabled:s,children:"10"}),de.jsx("button",{className:ei.presetButton,onClick:()=>r(50),disabled:s,children:"50"}),de.jsx("button",{className:ei.presetButton,onClick:()=>r(100),disabled:s,children:"100"})]}),de.jsx("button",{className:ei.createButton,onClick:c,disabled:s||t<2,children:s?" ...":`${t}  `})]}),l&&de.jsxs("div",{className:`${ei.result} ${l.success?ei.success:ei.error}`,children:[de.jsx("p",{children:l.message}),l.channelUrl&&de.jsx("code",{className:ei.channelUrl,children:l.channelUrl})]}),de.jsxs("div",{className:ei.info,children:[de.jsx("h4",{children:"  "}),de.jsxs("ul",{children:[de.jsxs("li",{children:["  ID: member_1, member_2, ... member_",t-1]}),de.jsxs("li",{children:[" (",e,")  "]}),de.jsx("li",{children:"(@)   maxSuggestionCount "})]})]})]})}const t_e="_container_wv1qa_1",n_e="_embedded_wv1qa_8",r_e="_sidebar_wv1qa_12",i_e="_header_wv1qa_17",a_e="_headerLeft_wv1qa_26",s_e="_logo_wv1qa_30",o_e="_headerCenter_wv1qa_36",l_e="_userInfo_wv1qa_41",u_e="_headerRight_wv1qa_49",c_e="_dualModeButton_wv1qa_56",d_e="_logoutButton_wv1qa_73",h_e="_main_wv1qa_89",f_e="_chatArea_wv1qa_106",v_e="_sidebarFull_wv1qa_114",p_e="_chatAreaFull_wv1qa_123",m_e="_emptyState_wv1qa_130",__e="_emptyContent_wv1qa_138",g_e="_emptyIcon_wv1qa_144",E_e="_codeInfo_wv1qa_163",hi={container:t_e,embedded:n_e,sidebar:r_e,header:i_e,headerLeft:a_e,logo:s_e,headerCenter:o_e,userInfo:l_e,headerRight:u_e,dualModeButton:c_e,logoutButton:d_e,main:h_e,chatArea:f_e,sidebarFull:v_e,chatAreaFull:p_e,emptyState:m_e,emptyContent:__e,emptyIcon:g_e,codeInfo:E_e};function y_e({userId:e,nickname:n,onLogout:t,onDualMode:r,embedded:i}){const[a,s]=M.useState(null),o=M.useCallback(u=>{console.log("Channel Selected:",{url:u.url,name:u.name,memberCount:u.memberCount}),s(u)},[]),l=M.useCallback(()=>{s(null)},[]);return de.jsx(sue,{userId:e,nickname:n,children:de.jsxs("div",{className:`${hi.container} ${i?hi.embedded:""}`,children:[!i&&de.jsxs("header",{className:hi.header,children:[de.jsx("div",{className:hi.headerLeft,children:de.jsx("span",{className:hi.logo,children:" Zigbang Chat Debug"})}),de.jsx("div",{className:hi.headerCenter,children:de.jsxs("span",{className:hi.userInfo,children:[" ",n," (",e,")"]})}),de.jsxs("div",{className:hi.headerRight,children:[r&&de.jsx("button",{onClick:r,className:hi.dualModeButton,children:"  "}),t&&de.jsx("button",{onClick:t,className:hi.logoutButton,children:""})]})]}),de.jsx("main",{className:hi.main,children:i?a?de.jsx("section",{className:hi.chatAreaFull,children:de.jsx(NU,{channel:a,onBack:l})}):de.jsx("aside",{className:hi.sidebarFull,children:de.jsx(TU,{onChannelSelect:o,selectedChannelUrl:void 0})}):de.jsxs(de.Fragment,{children:[de.jsx("aside",{className:hi.sidebar,children:de.jsx(TU,{onChannelSelect:o,selectedChannelUrl:a==null?void 0:a.url})}),de.jsx("section",{className:hi.chatArea,children:a?de.jsx(NU,{channel:a,onBack:l}):de.jsx("div",{className:hi.emptyState,children:de.jsxs("div",{className:hi.emptyContent,children:[de.jsx("span",{className:hi.emptyIcon,children:""}),de.jsx("h3",{children:" "}),de.jsxs("p",{children:["   ",de.jsx("br",{}),"  "]}),de.jsx(e_e,{userId:e,onGroupCreated:u=>{console.log("  :",u)}}),de.jsxs("div",{className:hi.codeInfo,children:[de.jsx("h4",{children:" zigbang  "}),de.jsxs("ul",{children:[de.jsxs("li",{children:[de.jsx("code",{children:"GroupChannelListScreen"}),"   "]}),de.jsxs("li",{children:[de.jsx("code",{children:"GroupChannelScreen"}),"   "]}),de.jsxs("li",{children:[de.jsx("code",{children:"SendInput"}),"   "]}),de.jsxs("li",{children:[de.jsx("code",{children:"ChannelInput"}),"   "]}),de.jsxs("li",{children:[de.jsx("code",{children:"CustomMessageRenderer"}),"   "]}),de.jsxs("li",{children:[de.jsx("code",{children:"useSendBirdMessage"}),"   "]})]})]})]})})})]})})]})})}const b_e="_container_sbx4a_1",C_e="_header_sbx4a_8",S_e="_title_sbx4a_17",T_e="_headerInfo_sbx4a_24",N_e="_userBadge_sbx4a_30",I_e="_vs_sbx4a_38",M_e="_headerActions_sbx4a_43",A_e="_createButton_sbx4a_49",w_e="_createResult_sbx4a_71",R_e="_exitButton_sbx4a_80",O_e="_toggleButton_sbx4a_95",D_e="_panels_sbx4a_112",U_e="_panel_sbx4a_112",L_e="_panelHeader_sbx4a_132",k_e="_panelLabel_sbx4a_140",x_e="_panelUser_sbx4a_147",P_e="_iframe_sbx4a_164",bi={container:b_e,header:C_e,title:S_e,headerInfo:T_e,userBadge:N_e,vs:I_e,headerActions:M_e,createButton:A_e,createResult:w_e,exitButton:R_e,toggleButton:O_e,panels:D_e,panel:U_e,panelHeader:L_e,panelLabel:k_e,panelUser:x_e,iframe:P_e};function F_e({userA:e,userB:n,userC:t,onExit:r}){const[i,a]=M.useState(!1),[s,o]=M.useState(null),[l,u]=M.useState(t?3:2),c=[e,n,t].filter(Boolean),h=async()=>{a(!0),o(" ...");const g=await Pme(50,void 0,C=>{o(C)});g.success?o(` ${g.memberCount}   ! .`):o(` : ${g.error}`),a(!1)},f=g=>{const C=new URLSearchParams({userId:g.userId,nickname:g.nickname,embedded:"true"});return`${window.location.origin}/?${C.toString()}`},p=()=>{u(g=>g===2?3:2)},_=c.slice(0,l);return de.jsxs("div",{className:bi.container,children:[de.jsxs("header",{className:bi.header,children:[de.jsx("h1",{className:bi.title,children:"   "}),de.jsx("div",{className:bi.headerInfo,children:_.map((g,C)=>de.jsxs("span",{children:[C>0&&de.jsx("span",{className:bi.vs,children:""}),de.jsxs("span",{className:bi.userBadge,style:{backgroundColor:g.color},children:[String.fromCharCode(65+C),": ",g.nickname]})]},g.userId))}),de.jsxs("div",{className:bi.headerActions,children:[de.jsx("button",{onClick:p,className:bi.toggleButton,children:l===2?"3 ":"2 "}),de.jsx("button",{onClick:h,className:bi.createButton,disabled:i,children:i?" ...":" 50  "}),s&&de.jsx("span",{className:bi.createResult,children:s}),de.jsx("button",{onClick:r,className:bi.exitButton,children:" "})]})]}),de.jsx("div",{className:`${bi.panels} ${l===3?bi.threePanel:""}`,children:_.map((g,C)=>de.jsxs("div",{className:bi.panel,style:{borderColor:g.color},children:[de.jsxs("div",{className:bi.panelHeader,style:{backgroundColor:g.color},children:[de.jsxs("span",{className:bi.panelLabel,children:["User ",String.fromCharCode(65+C)]}),de.jsxs("span",{className:bi.panelUser,children:[g.nickname," (",g.userId,")"]})]}),de.jsx("iframe",{src:f(g),className:bi.iframe,title:`User ${String.fromCharCode(65+C)} Chat`})]},g.userId))})]})}function B_e(){const e=new URLSearchParams(window.location.search);return{userId:e.get("userId"),nickname:e.get("nickname"),embedded:e.get("embedded")==="true"}}function H_e(){const[e,n]=M.useState(null),[t,r]=M.useState("single"),i=M.useMemo(()=>B_e(),[]);M.useEffect(()=>{if(i.embedded&&i.userId&&i.nickname){n({userId:i.userId,nickname:i.nickname});return}const o=localStorage.getItem("chat_debug_user");if(o)try{n(JSON.parse(o))}catch{localStorage.removeItem("chat_debug_user")}},[i]);const a=o=>{localStorage.setItem("chat_debug_user",JSON.stringify(o)),n(o)},s=()=>{localStorage.removeItem("chat_debug_user"),n(null),r("single")};return t==="dual"?de.jsx(F_e,{userA:{userId:"user_a",nickname:"User A",color:"#e94560"},userB:{userId:"user_b",nickname:"User B",color:"#0ea5e9"},userC:{userId:"user_c",nickname:"User C",color:"#10b981"},onExit:()=>r("single")}):e?de.jsx(y_e,{userId:e.userId,nickname:e.nickname,onLogout:i.embedded?void 0:s,onDualMode:i.embedded?void 0:()=>r("dual"),embedded:i.embedded}):de.jsx(XV,{onLogin:a,onDualMode:()=>r("dual")})}Fk(document.getElementById("root")).render(de.jsx(M.StrictMode,{children:de.jsx(H_e,{})}));const G_e=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));export{_e as G,Xk as J,AN as Q,V_e as V,Q as a,ra as b,i0 as c,$_e as d,Zh as j,q as m};
